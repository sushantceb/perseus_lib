!function(e){function t(n){if(r[n])return r[n].exports;var i=r[n]={exports:{},id:n,loaded:!1};return e[n].call(i.exports,i,i.exports,t),i.loaded=!0,i.exports}var n=window.webpackJsonp;window.webpackJsonp=function(r,o){for(var s,a,l=0,p=[];l<r.length;l++)a=r[l],i[a]&&p.push.apply(p,i[a]),i[a]=0;for(s in o)e[s]=o[s];for(n&&n(r,o);p.length;)p.shift().call(null,t)};var r={},i={0:0,1:0};return t.e=function(e,n){if(0===i[e])return n.call(null,t);if(void 0!==i[e])i[e].push(n);else{i[e]=[n];var r=document.getElementsByTagName("head")[0],o=document.createElement("script");o.type="text/javascript",o.charset="utf-8",o.async=!0,o.src=t.p+""+e+"."+({1:"extra-widgets"}[e]||e)+".js",r.appendChild(o)}},t.m=e,t.c=r,t.p="/build/",t(0)}([function(e,t,n){"use strict";function r(e,t){var n=$.Deferred(),r=Math.floor(100*Math.random());null===e&&(e=p);var c={renderer:[a,{question:e,problemNum:r}],article:[l,{content:e}],"":[s,{question:e,problemNum:r}]},u=null;return i.init({skipMathJax:!1,loadExtraWidgets:!1}).then(function(){var e;u=o.render((e=React).createElement.apply(e,c[t]||c[""]),document.getElementById("perseus-container")),n.resolve(u)}).then(function(){},function(e){console.error(e),n.resolve(u)}),n.promise()}n(1),window.Khan={Util:KhanUtil,error:function(){},query:{debug:""},imageBase:"/images/",exerciseApi:r};var i=window.Perseus=n(2),o=window.ReactDOM=React.__internalReactDOM,s=n(3),a=n(4),l=n(5),p={question:{content:"",images:{},widgets:{}},answerArea:{calculator:!1},itemDataVersion:{major:0,minor:1},hints:[]}},function(e,t,n){"use strict";window.icu={getDecimalFormatSymbols:function(){return{decimal_separator:".",grouping_separator:",",minus:"-"}}},window.KhanUtil={debugLog:function(){},localeToFixed:function(e,t){return e.toFixed(t)}},window.Exercises={localMode:!0,useKatex:!0,khanExercisesUrlBase:"../",getCurrentFramework:function(){return"khan-exercises"},PerseusBridge:{cleanupProblem:function(){return!1},questionEvents:n(1)}}},function(e,t,n){"use strict";var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},i=n(6);e.exports=r({itemVersion:n(8),RevisionDiff:n(30),StatefulArticleEditor:n(9),StatefulEditorPage:n(10),ClassNames:n(11).ClassNames,Util:n(12),ViewportResizer:n(31),DeviceFramer:n(32),renderability:n(13),accessibility:n(14),i18n:n(15),ArticleEditor:n(16),Editor:n(17),EditorPage:n(18),IframeContentRenderer:n(19)},i)},function(e,t,n){"use strict";var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},i=n(34),o=n(10),s=n(18),a=n(12),l=n(13),p=i.createClass({displayName:"EditorDemo",propTypes:{problemNum:i.PropTypes.number,question:i.PropTypes.any.isRequired},getDefaultProps:function(){return{problemNum:1}},getInitialState:function(){return{deviceType:"desktop",scratchpadEnabled:!1}},componentDidMount:function(){window.editorPage=this.refs.editor.refs.editor,window.itemRenderer=window.editorPage.renderer},serialize:function(){return this.refs.editor.serialize()},scorePreview:function(){return this.refs.editor.scorePreview()},_getContentHash:function(){return a.strongEncodeURIComponent(JSON.stringify(this.refs.editor.serialize()))},permalink:function(e){window.location.hash="content="+this._getContentHash(),e.preventDefault()},viewRendered:function(e){var t=document.createElement("a");t.href=window.location.pathname+"?renderer#content="+this._getContentHash(),t.target="_blank",t.click(),e.preventDefault()},inputVersion:function(e){e.preventDefault(),console.log(l.isItemRenderableByVersion(this.refs.editor.serialize(),{"::renderer::":{major:100,minor:0},group:{major:100,minor:0},sequence:{major:100,minor:0},"input-number":{major:100,minor:0},"numeric-input":{major:100,minor:0}}))},saveWarnings:function(e){e.preventDefault(),console.log(this.refs.editor.getSaveWarnings())},getEditorProps:function(){var e=this,t=this.state.deviceType,n="phone"===t||"tablet"===t;return r({},this.props.question,{problemNum:this.props.problemNum,developerMode:!0,imageUploader:function(e,t){setTimeout(t,1e3,"http://fake.image.url")},apiOptions:{onFocusChange:function(e,t){console.log("onFocusChange",e,t)},customKeypad:n,isMobile:n,setDrawingAreaAvailable:function(t){e.setState({scratchpadEnabled:t})}},componentClass:s,onPreviewDeviceChange:function(t){e.setState({deviceType:t})},previewDevice:t,frameSource:'<!DOCTYPE html>\n<html>\n<head>\n<meta charset="utf-8">\n<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1.0, user-scalable=0">\n\n<link rel="stylesheet/less" type="text/css" href="'+window.perseus_path+'stylesheets/local-only/khan-site.less" />\n<link rel="stylesheet" type="text/css" href="'+window.perseus_path+'stylesheets/local-only/khan-exercise.css" />\n<link rel="stylesheet" type="text/css" href="'+window.perseus_path+'lib/katex/katex.css" />\n<link rel="stylesheet" type="text/css" href="'+window.perseus_path+'lib/font-awesome.min.css">\n<link rel="stylesheet" type="text/css" href="'+window.perseus_path+'lib/mathquill/mathquill.css" />\n<link rel="stylesheet" type="text/css" href="'+window.perseus_path+'stylesheets/perseus-admin-package/devices.min.css" />\n\n<link rel="stylesheet/less" type="text/css" href="'+window.perseus_path+'stylesheets/exercise-content-package/perseus.less" />\n<link rel="stylesheet/less" type="text/css" href="'+window.perseus_path+"stylesheets/perseus-admin-package/editor.less\" />\n<style>\nbody {\n      min-width: 0 !important;\n      /* overrides body { min-width: 1000px; } in khan-site.css \n\n       overflow: hidden;\n}\n</style>\n\n<script>less = {env: 'development', logLevel: 1};</script>\n<script src=\""+window.perseus_path+'lib/less-compiled.js"></script>\n</head>\n<body>\n<div id="content-container">\n</div>\n<script src="'+window.perseus_path+'lib/underscore-compiled.js"></script>\n<script src="'+window.perseus_path+'build/frame-perseus-compiled.js"></script>\n</body>\n</html>'})},render:function(){var e=this.getEditorProps();return i.createElement("div",{id:"perseus-index"},i.createElement("div",{className:"extras"},i.createElement("button",{onClick:this.serialize},"serialize")," ",i.createElement("button",{onClick:this.scorePreview},"score")," ",i.createElement("button",{onClick:this.permalink},"permalink")," ",i.createElement("button",{onClick:this.viewRendered},"view rendered")," ",i.createElement("button",{onClick:this.inputVersion},"contains only inputs?")," ",i.createElement("button",{onClick:this.saveWarnings},"save warnings")," ",i.createElement("span",null,"Seed:",this.props.problemNum," ")," ",i.createElement("span",null,"Scratchpad:",this.state.scratchpadEnabled?"enabled":"disabled")),i.createElement(o,r({key:this.props.question,ref:"editor"},e)))}});e.exports=p},function(e,t,n){"use strict";var r=n(34),i=n(82),o=i.StyleSheet,s=i.css,a=n(35),l=n(11).ClassNames,p=n(20),c=n(21),u=r.createClass({displayName:"RendererDemo",propTypes:{problemNum:r.PropTypes.number,question:r.PropTypes.any.isRequired},getDefaultProps:function(){return{problemNum:1}},getInitialState:function(){return{answer:{empty:!0,correct:null},scratchpadEnabled:!0,isMobile:navigator.userAgent.indexOf("Mobile")!==-1}},componentDidMount:function(){a.findDOMNode(this.refs.itemRenderer).focus(),window.addEventListener("resize",this._handleResize)},componentWillUnmount:function(){window.removeEventListener("resize",this._handleResize)},onScore:function(){return this.refs.itemRenderer.scoreInput()},checkAnswer:function(){this.setState({answer:this.refs.itemRenderer.scoreInput()})},takeHint:function(){this.refs.itemRenderer.showHint()},_handleResize:function(){var e=navigator.userAgent.indexOf("Mobile")!==-1;this.state.isMobile!==e&&this.setState({isMobile:e})},render:function(){var e=this,t=this.state.isMobile,n={getAnotherHint:function(){e.refs.itemRenderer.showHint()},isMobile:t,customKeypad:t,setDrawingAreaAvailable:function(t){e.setState({scratchpadEnabled:t})}},i=r.createElement(p,{item:this.props.question,ref:"itemRenderer",problemNum:this.props.problemNum,initialHintsVisible:0,apiOptions:n}),o=this.state.answer,a=!o.empty&&o.correct,u=r.createElement("div",null,r.createElement(c,{color:o.empty||o.correct?"green":"orange",onClick:this.checkAnswer},o.empty?"Check Answer":o.correct?"Correct!":"Incorrect, try again."),r.createElement("img",{className:s(h.smiley,!a&&h.hideSmiley),src:window.SERVER_PREFIX+"/perseus_new/images/face-smiley.png"}));this.state.scratchpadEnabled;if(t){var d="framework-perseus "+l.MOBILE;return r.createElement("div",{className:d},r.createElement("div",{className:s(h.problemAndAnswer)},i,r.createElement("div",{id:"problem-area"},r.createElement("div",{id:"workarea",style:{marginLeft:0}}),r.createElement("div",{id:"hintsarea"}))))}return r.createElement("div",{className:"renderer-demo framework-perseus"},r.createElement("div",{className:s(h.problemAndAnswer)},r.createElement("div",{id:"problem-area"},r.createElement("div",{id:"workarea"}),r.createElement("div",{id:"hintsarea"})),r.createElement("div",{className:s(h.answerAreaWrap)},r.createElement("div",{id:"answer-area"},r.createElement("div",{className:s(h.infoBox)},r.createElement("div",{id:"solutionarea"}),r.createElement("div",{className:s(h.answerButtons)},u)),r.createElement("div",{className:s(h.infoBox)},r.createElement(c,{color:"orange",onClick:this.takeHint},"Hint")))),r.createElement("div",{style:{clear:"both"}})),i)}}),h=o.create({problemAndAnswer:{minHeight:180,position:"relative"},smiley:{width:28,position:"absolute",top:7,left:5,cursor:"pointer"},hideSmiley:{display:"none"},answerAreaWrap:{margin:"0px -8px 0 0",position:"absolute",bottom:0,right:0,width:80},answerButtons:{margin:"0 -10px",padding:"10px 10px 0",position:"relative"},infoBox:{background:"#eee",border:"1px solid #aaa",color:"#333",marginBottom:10,padding:10,position:"relative",zIndex:10,boxShadow:"0 1px 2px #ccc",overflow:"visible",":before":{content:'" "',borderRight:"8px solid transparent",borderBottom:"8px solid #cccccc",height:16,position:"absolute",right:-1,top:-24}}});e.exports=u},function(e,t,n){"use strict";var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},i=n(34),o=n(35),s=n(16),a=n(9),l=n(12),p=i.createClass({displayName:"ArticleDemo",propTypes:{content:i.PropTypes.any.isRequired},getInitialState:function(){return{isMobile:navigator.userAgent.indexOf("Mobile")!==-1}},componentDidMount:function(){o.findDOMNode(this.refs.itemRenderer).focus(),window.addEventListener("resize",this._handleResize)},componentWillUnmount:function(){window.removeEventListener("resize",this._handleResize)},serialize:function(){console.log(JSON.stringify(this.refs.editor.serialize(),null,4))},scorePreview:function(){console.log(this.refs.editor.scorePreview())},_getContentHash:function(){return l.strongEncodeURIComponent(JSON.stringify(this.refs.editor.serialize()))},permalink:function(e){window.location.hash="content="+this._getContentHash(),e.preventDefault()},_handleResize:function(){var e=navigator.userAgent.indexOf("Mobile")!==-1;this.state.isMobile!==e&&this.setState({isMobile:e})},getEditorProps:function(){var e=this.state.isMobile;return{json:this.props.content,imageUploader:function(e,t){setTimeout(t,1e3,"http://fake.image.url")},apiOptions:{customKeypad:e,onFocusChange:function(e,t){console.log("onFocusChange",e,t)},trackInteraction:function(e){console.log("Interaction with",e.type,e)},isMobile:e},useNewStyles:!0,componentClass:s,frameSource:""}},render:function(){return i.createElement("div",{id:"perseus-index"},i.createElement("div",{id:"extras"},i.createElement("button",{onClick:this.serialize},"serialize")," ",i.createElement("button",{onClick:this.scorePreview},"score")," ",i.createElement("button",{onClick:this.permalink},"permalink")," "),i.createElement("div",{style:{margin:20}},i.createElement(a,r({ref:"editor"},this.getEditorProps()))))}});e.exports=p},function(e,t,n){"use strict";var r=n(48),i=n(22),o=n(23);i.registerMany(o),e.exports={apiVersion:r.apiVersion,itemDataVersion:r.itemDataVersion,init:n(24),ArticleRenderer:n(25),ItemRenderer:n(20),ServerItemRenderer:n(26),HintsRenderer:n(27),Renderer:n(28)}},,function(e,t,n){"use strict";var r=n(36),i=n(22),o=n(48);i.registerMany(r);var s=i.getVersionVector();s["::renderer::"]=o.itemDataVersion,e.exports=s},function(e,t,n){"use strict";var r=n(34),i=n(57),o=n(16),s=r.createClass({displayName:"StatefulArticleEditor",getInitialState:function(){return i({}).extend(this.props,{mode:"edit",onChange:this.handleChange,ref:"editor",screen:"desktop"})},componentWillReceiveProps:function(e){this.setState(i(e).omit("onChange","ref"))},getSaveWarnings:function(){return this.refs.editor.getSaveWarnings()},serialize:function(){return this.refs.editor.serialize()},handleChange:function(e,t){this.isMounted()&&this.setState(e,t)},scorePreview:function(){return this.refs.editor.scorePreview()},render:function(){var e=this,t=this.state,n=t.mode,i=t.screen;return r.createElement("div",null,r.createElement("div",{style:a.controlBar},r.createElement("span",{style:a.controls},"Mode:"," ",r.createElement("span",{onClick:function(){return e.setState({mode:"edit"})},style:"edit"===n?a.controlSelected:a.control},"EDIT")," | ",r.createElement("span",{onClick:function(){return e.setState({mode:"preview"})},style:"preview"===n?a.controlSelected:a.control},"PREVIEW")," | ",r.createElement("span",{onClick:function(){return e.setState({mode:"json"})},style:"json"===n?a.controlSelected:a.control},"JSON")),r.createElement("span",{style:a.controls},"Screen:"," ",r.createElement("span",{onClick:function(){return e.setState({screen:"phone"})},style:"phone"===i?a.controlSelected:a.control},"PHONE")," | ",r.createElement("span",{onClick:function(){return e.setState({screen:"tablet"})},style:"tablet"===i?a.controlSelected:a.control},"TABLET")," | ",r.createElement("span",{onClick:function(){return e.setState({screen:"desktop"})},style:"desktop"===i?a.controlSelected:a.control},"DESKTOP"))),r.createElement("div",{style:a.editor},r.createElement(o,this.state)))}}),a={controlBar:{marginBottom:25,marginTop:5},controls:{marginRight:10},controlSelected:{cursor:"default",fontWeight:700},control:{cursor:"pointer"},editor:{marginTop:-20}};e.exports=s},function(e,t,n){"use strict";var r=n(34),i=n(57),o=n(18),s=r.createClass({displayName:"StatefulEditorPage",propTypes:{componentClass:r.PropTypes.func},getDefaultProps:function(){return{componentClass:o}},render:function(){return r.createElement(this.props.componentClass,this.state)},getInitialState:function(){return i({}).extend(i.omit(this.props,"componentClass"),{onChange:this.handleChange,ref:"editor"})},componentWillReceiveProps:function(e){this.setState(i(e).pick("apiOptions","imageUploader","developerMode","problemNum","previewDevice","frameSource"))},getSaveWarnings:function(){return this.refs.editor.getSaveWarnings()},serialize:function(){return this.refs.editor.serialize()},handleChange:function(e,t){this.isMounted()&&this.setState(e,t)},scorePreview:function(){return this.refs.editor.scorePreview()}});e.exports=s},function(e,t,n){"use strict";var r=n(34),i=n(37);e.exports={Options:{propTypes:r.PropTypes.shape({isArticle:r.PropTypes.bool.isRequired,satStyling:r.PropTypes.bool.isRequired,onInputError:r.PropTypes.func.isRequired,onFocusChange:r.PropTypes.func.isRequired,staticRender:r.PropTypes.bool.isRequired,GroupMetadataEditor:r.PropTypes.func.isRequired,showAlignmentOptions:r.PropTypes.bool.isRequired,readOnly:r.PropTypes.bool.isRequired,answerableCallback:r.PropTypes.func,getAnotherHint:r.PropTypes.func,interactionCallback:r.PropTypes.func,groupAnnotator:r.PropTypes.func.isRequired,imagePlaceholder:r.PropTypes.node,widgetPlaceholder:r.PropTypes.node,baseElements:r.PropTypes.shape({Link:r.PropTypes.func}),imagePreloader:r.PropTypes.func,trackInteraction:r.PropTypes.func,customKeypad:r.PropTypes.bool,isMobile:r.PropTypes.bool,setDrawingAreaAvailable:r.PropTypes.func}).isRequired,defaults:{isArticle:!1,isMobile:!1,satStyling:!1,onInputError:function(){},onFocusChange:function(){},staticRender:!1,GroupMetadataEditor:i,showAlignmentOptions:!1,readOnly:!1,groupAnnotator:function(){return null},baseElements:{Link:function(e){return r.createElement("a",e)}},setDrawingAreaAvailable:function(){}}},ClassNames:{RENDERER:"perseus-renderer",TWO_COLUMN_RENDERER:"perseus-renderer-two-columns",RESPONSIVE_RENDERER:"perseus-renderer-responsive",INPUT:"perseus-input",FOCUSED:"perseus-focused",RADIO:{OPTION:"perseus-radio-option",SELECTED:"perseus-radio-selected",OPTION_CONTENT:"perseus-radio-option-content"},INTERACTIVE:"perseus-interactive",CORRECT:"perseus-correct",INCORRECT:"perseus-incorrect",UNANSWERED:"perseus-unanswered",MOBILE:"perseus-mobile"}}},function(e,t,n){"use strict";var r=n(57),i=n(58),o=function e(t,n,i){return r.isArray(t)?r.map(t,function(t){return e(t,n)}):n.call(i,t)},s={inputPathsEqual:function(e,t){return null==e||null==t?null==e==(null==t):e.length===t.length&&e.every(function(e,n){return t[n]===e})},nestedMap:o,rWidgetParts:/^\[\[\u2603 (([a-z-]+) ([0-9]+))\]\]$/,rWidgetRule:/^\[\[\u2603 (([a-z-]+) ([0-9]+))\]\]/,rTypeFromWidgetId:/^([a-z-]+) ([0-9]+)$/,snowman:"☃",noScore:{type:"points",earned:0,total:0,message:null},seededRNG:function(e){var t=e;return function(){var e=t;return e=e+2127912214+(e<<12)&4294967295,e=4294967295&(3345072700^e^e>>>19),e=e+374761393+(e<<5)&4294967295,e=4294967295&(e+3550635116^e<<9),e=e+4251993797+(e<<3)&4294967295,e=4294967295&(3042594569^e^e>>>16),(t=268435455&e)/268435456}},shuffle:function(e,t,n){var i=r.clone(e);if(!i.length||r.all(i,function(e){return r.isEqual(e,i[0])}))return i;var o;o=r.isFunction(t)?t:s.seededRNG(t);do for(var a=i.length;a>0;a--){var l=Math.floor(o()*a),p=i[l];i[l]=i[a-1],i[a-1]=p}while(n&&r.isEqual(e,i));return i},split:"x".split(/(.)/g).length?function(e,t){return e.split(t)}:function(e,t){for(var n,r=[],i=t.lastIndex=0;n=t.exec(e);)r.push(e.slice(i,n.index)),r.push.apply(r,n.slice(1)),i=n.index+n[0].length;return r.push(e.slice(i)),r},combineScores:function(e,t){var n;return"points"===e.type&&"points"===t.type?(n=e.message&&t.message&&e.message!==t.message?null:e.message||t.message,{type:"points",earned:e.earned+t.earned,total:e.total+t.total,message:n}):"points"===e.type&&"invalid"===t.type?t:"invalid"===e.type&&"points"===t.type?e:"invalid"===e.type&&"invalid"===t.type?(n=e.message&&t.message&&e.message!==t.message?null:e.message||t.message,{type:"invalid",message:n}):void 0},keScoreFromPerseusScore:function(e,t){if("points"===e.type)return{empty:!1,correct:e.earned>=e.total,message:e.message,guess:t};if("invalid"===e.type)return{empty:!0,correct:!1,message:e.message,guess:t};throw new Error("Invalid score type: "+e.type)},firstNumericalParse:function(e){var t,n=i.predicate.createValidatorFunctional(function(e){return t=e,!0},{simplify:"optional",inexact:!0,forms:"integer, proper, improper, pi, log, mixed, decimal"});return n(e),t},stringArrayOfSize:function(e){return r(e).times(function(){return""})},gridDimensionConfig:function(e,t,n,r){var i=s.scaleFromExtent(t,n),o=e*i,a=o>30;return{scale:i,tickStep:e/r,unityLabel:a}},getGridStep:function(e,t,n){return r(2).times(function(r){var i=s.scaleFromExtent(e[r],n),o=s.gridStepFromTickStep(t[r],i);return o})},snapStepFromGridStep:function(e){return r.map(e,function(e){return e/2})},scaleFromExtent:function(e,t){var n=e[1]-e[0],r=t/n;return r},tickStepFromExtent:function(e,t){var n,r=e[1]-e[0];n=15<r&&r<=20?23:r>100||r<5?10:16;var i=t/500,o=n*i;return s.tickStepFromNumTicks(r,o)},gridStepFromTickStep:function(e,t){var n=e*t,r=e,i=Math.pow(10,Math.floor(Math.log(r)/Math.LN10)),o=Math.floor(r/i);return n<25?e:n<50?5===o?e:e/2:1===o?e/2:2===o?e/4:5===o?e/5:void 0},tickStepFromNumTicks:function(e,t){var n=Math.pow(10,Math.floor(Math.log(e/t)/Math.LN10)),r=t/e*n;return r<=.15?n*=10:r<=.35?n*=5:r<=.75&&(n*=2),n},DeprecationMixin:{componentWillMount:function(){var e={};r.each(this.deprecatedProps,function(t,n){r.has(this.props,n)&&r.extend(e,t(this.props))},this),r.isEmpty(e)||(r.extend(this.props,e),setTimeout(this.props.onChange,0,e))}},eq:function(e,t){return r.isNumber(e)&&r.isNumber(t)?Math.abs(e-t)<1e-9:e===t},deepEq:function(e,t){if(r.isArray(e)&&r.isArray(t)){if(e.length!==t.length)return!1;for(var n=0;n<e.length;n++)if(!s.deepEq(e[n],t[n]))return!1;return!0}return!r.isArray(e)&&!r.isArray(t)&&(r.isFunction(e)&&r.isFunction(t)?s.eq(e,t):!r.isFunction(e)&&!r.isFunction(t)&&(r.isObject(e)&&r.isObject(t)?e===t||r.all(e,function(e,n){return s.deepEq(t[n],e)})&&r.all(t,function(t,n){return s.deepEq(e[n],t)}):!r.isObject(e)&&!r.isObject(t)&&s.eq(e,t)))},parseQueryString:function(e){e=e||window.location.search.substring(1);for(var t,n={},r=/\+/g,i=/([^&=]+)=?([^&]*)/g,o=function(e){return decodeURIComponent(e.replace(r," "))};t=i.exec(e);)n[o(t[1])]=o(t[2]);return n},updateQueryString:function(e,t,n){n=encodeURIComponent(n);var r=new RegExp("([?&])"+t+"=.*?(&|$)","i"),i=e.indexOf("?")!==-1?"&":"?";return e.match(r)?e.replace(r,"$1"+t+"="+n+"$2"):e+i+t+"="+n},strongEncodeURIComponent:function(e){return encodeURIComponent(e).replace(/['()!]/g,window.escape).replace(/\*/g,"%2A")},widgetShouldHighlight:function(e){if(!e)return!1;var t=["measurer","protractor"];return!r.contains(t,e.type)},scoreIsEmpty:function(e){return"invalid"===e.type&&(!e.message||0===e.message.length)},touchHandlers:{pointerDown:!1,currentTouchIdentifier:null},resetTouchHandlers:function(){r.extend(s.touchHandlers,{pointerDown:!1,currentTouchIdentifier:null})},extractPointerLocation:function(e){var t;if(s.touchHandlers.pointerDown){if(null!=s.touchHandlers.currentTouchIdentifier)for(var n=e.changedTouches?e.changedTouches.length:0,r=0;r<n;r++)e.changedTouches[r].identifier===s.touchHandlers.currentTouchIdentifier&&(t=e.changedTouches[r]);else t=e;var i="touchend"===e.type||"touchcancel"===e.type;t&&i&&(s.touchHandlers.pointerDown=!1,s.touchHandlers.currentTouchIdentifier=null)}else s.touchHandlers.pointerDown=!0,e.changedTouches?(t=e.changedTouches[0],s.touchHandlers.currentTouchIdentifier=t.identifier):t=e;if(t)return{left:t.pageX,top:t.pageY}},captureScratchpadTouchStart:function(e){e.stopPropagation()},getImageSize:function(e,t){var i=new Image;i.onload=function(){0===i.width&&0===i.height?(document.body.appendChild(i),r.defer(function(){t(i.clientWidth,i.clientHeight),document.body.removeChild(i)})):t(i.width,i.height)};var o=n(38);i.src=o.getRealImageUrl(e)},textarea:{getWordBeforeCursor:function(e){var t=e.value,n=e.selectionStart-1,r=Math.max(t.lastIndexOf("\n",n),t.lastIndexOf(" ",n))+1;return{string:t.substring(r,n+1),pos:{start:r,end:n}}},moveCursor:function(e,t){e.selectionStart=t,e.selectionEnd=t}}};s.random=s.seededRNG(4294967295&(new Date).getTime()),e.exports=s},function(e,t,n){"use strict";var r=(n(57),n(39)),i=n(22),o=function(e,t){if(null==t)return!1;var n=e.version||{major:0,minor:0};return t.major>n.major||!(t.major<n.major)&&t.minor>=n.minor},s=function(e,t){if(null==e||null==e.type)return!0;var n=i.upgradeWidgetInfoToLatestVersion(e);return o(n,t[n.type])},a=function(e,t){var n=!0;return r.traverseRendererDeep(e,null,function(e){n=n&&s(e,t)}),n},l=function(e,t){if(null==e||null==t)throw new Error("missing parameter to Perseus.isRenderable.item");return a(e.question,t)};e.exports={isItemRenderableByVersion:l}},function(e,t,n){"use strict";var r=n(57),i=n(39),o=n(22);e.exports={violatingWidgets:function(e){var t=[];return i.traverseRendererDeep(e.question,null,function(e){e.type&&!o.isAccessible(e)&&t.push(e.type)}),r.uniq(t)}}},function(e,t,n){"use strict";function r(e,t){var n=u.parse(e);u.traverseContent(n,function(e){"image"===e.type&&t.push(e.target)})}function i(e,t){e&&e.backgroundImage&&e.backgroundImage.url&&t.push(e.backgroundImage.url)}function o(e,t){e.options&&("categorizer"===e.type?(p.each(e.options.items,function(e){r(e,t)}),p.each(e.options.categories,function(e){r(e,t)})):"image"===e.type?(r(e.options.title,t),r(e.options.caption,t)):"matcher"===e.type?(p.each(e.options.left,function(e){r(e,t)}),p.each(e.options.right,function(e){r(e,t)}),p.each(e.options.labels,function(e){r(e,t)})):"matrix"===e.type?(r(e.options.prefix,t),r(e.options.suffix,t)):"orderer"===e.type?p.each(e.options.options,function(e){r(e.content,t)}):"passage"===e.type?r(e.options.passageTitle,t):"radio"===e.type?p.each(e.options.choices,function(e){r(e.content,t)}):"sorter"===e.type?p.each(e.options.correct,function(e){r(e,t)}):"table"===e.type&&p.each(e.options.headers,function(e){r(e,t)}),"grapher"===e.type?i(e.options.graph,t):"image"===e.type?i(e.options,t):"interactive-graph"===e.type?i(e.options,t):"measurer"===e.type&&e.options.image?t.push(e.options.image.url):"plotter"===e.type?t.push(e.options.picUrl):"transformer"===e.type&&i(e.options.graph,t))}function s(e){var t=[];return p.each(e,function(e){c.traverseRendererDeep(e,function(e){r(e,t)},function(e){return o(e,t)})}),t}function a(e){var t=[e.question].concat(e.hints);return s(t)}function l(e){return s(e)}var p=n(57),c=n(39),u=n(40);e.exports={findImagesInArticles:l,findImagesInItemData:a}},function(e,t,n){"use strict";var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},i=n(34),o=n(57),s=n(11).Options,a=n(17),l=n(41),p=l.iconCircleArrowDown,c=l.iconCircleArrowUp,u=l.iconPlus,h=l.iconTrash,d=n(42),f=n(43),m=n(32),g=n(19),v=i.PropTypes.shape({content:i.PropTypes.string,widgets:i.PropTypes.object,images:i.PropTypes.object}),y=i.createClass({displayName:"SectionControlButton",propTypes:{icon:i.PropTypes.shape(d.propTypes).isRequired,onClick:i.PropTypes.func.isRequired,title:i.PropTypes.string.isRequired},render:function(){var e=this.props,t=e.icon,n=e.onClick,r=e.title;return i.createElement("a",{href:"#",className:"section-control-button simple-button simple-button--small orange",onClick:function(e){e.preventDefault(),n()},title:r},i.createElement(d,t))}}),b=i.createClass({displayName:"ArticleEditor",propTypes:{apiOptions:i.PropTypes.shape({}),frameSource:i.PropTypes.string.isRequired,imageUploader:i.PropTypes.func,json:i.PropTypes.oneOfType([v,i.PropTypes.arrayOf(v)]),mode:i.PropTypes.oneOf(["diff","edit","json","preview"]),onChange:i.PropTypes.func.isRequired,screen:i.PropTypes.oneOf(["phone","tablet","desktop"]),sectionImageUploadGenerator:i.PropTypes.func,useNewStyles:i.PropTypes.bool},getDefaultProps:function(){return{json:[{}],mode:"edit",screen:"desktop",sectionImageUploadGenerator:function(){return i.createElement("span",null)},useNewStyles:!1}},componentDidUpdate:function(){var e=this;"preview"===this.props.mode?this.refs["frame-all"].sendNewData({type:"article-all",data:this._sections().map(function(t){return e._apiOptionsForSection(t)})}):this._sections().forEach(function(t,n){e.refs["frame-"+n].sendNewData({type:"article",data:e._apiOptionsForSection(t)})})},_apiOptionsForSection:function(e){return{apiOptions:r({},s.defaults,this.props.apiOptions,{showAlignmentOptions:!0,isArticle:!0}),json:e,useNewStyles:this.props.useNewStyles}},_sections:function(){return o.isArray(this.props.json)?this.props.json:[this.props.json]},_renderEditor:function(){var e=this,t=this.props,n=t.imageUploader,l=t.sectionImageUploadGenerator,d=r({},s.defaults,this.props.apiOptions,{showAlignmentOptions:!0,isArticle:!0}),f=this._sections();return i.createElement("div",{className:"perseus-editor-table"},f.map(function(t,s){return[i.createElement("div",{className:"perseus-editor-row"},i.createElement("div",{className:"perseus-editor-left-cell"},i.createElement("div",{className:"pod-title"},"Section ",s+1,i.createElement("div",{style:{display:"inline-block",float:"right"}},l(s),i.createElement(y,{icon:u,onClick:function(){e._handleAddSectionAfter(s)},title:"Add a new section after this one"}),s+1<f.length&&i.createElement(y,{icon:p,onClick:function(){e._handleMoveSectionLater(s)},title:"Move this section down"}),s>0&&i.createElement(y,{icon:c,onClick:function(){e._handleMoveSectionEarlier(s)},title:"Move this section up"}),i.createElement(y,{icon:h,onClick:function(){var t="Are you sure you want to delete section "+(s+1)+"?";confirm(t)&&e._handleRemoveSection(s)},title:"Delete this section"}))),i.createElement(a,r({},t,{apiOptions:d,imageUploader:n,onChange:o.partial(e._handleEditorChange,s),placeholder:"Type your section text here...",ref:"editor"+s}))),i.createElement("div",{className:"editor-preview"},e._renderIframePreview(s,!0)))]}),this._renderAddSection())},_renderAddSection:function(){var e=this;return i.createElement("div",{className:"perseus-editor-row"},i.createElement("div",{className:"perseus-editor-left-cell"},i.createElement("a",{href:"#",className:"simple-button orange",onClick:function(){e._handleAddSectionAfter(e._sections().length-1)}},i.createElement(d,u)," Add a section")))},_renderIframePreview:function(e,t){var n="phone"===this.props.screen||"tablet"===this.props.screen;return i.createElement(m,{deviceType:this.props.screen,nochrome:t},i.createElement(g,{ref:"frame-"+e,key:this.props.screen,content:this.props.frameSource,datasetKey:"mobile",datasetValue:n,seamless:t}))},_renderPreviewMode:function(){return i.createElement("div",{className:"standalone-preview"},this._renderIframePreview("all",!1))},_handleJsonChange:function(e){this.props.onChange({json:e})},_handleEditorChange:function(e,t){var n=o.clone(this._sections());n[e]=o.extend({},n[e],t),this.props.onChange({json:n})},_handleMoveSectionEarlier:function(e){if(0!==e){var t=o.clone(this._sections()),n=t[e];t.splice(e,1),t.splice(e-1,0,n),this.props.onChange({json:t})}},_handleMoveSectionLater:function(e){var t=o.clone(this._sections());if(e+1!==t.length){var n=t[e];t.splice(e,1),t.splice(e+1,0,n),this.props.onChange({json:t})}},_handleAddSectionAfter:function(e){var t=o.clone(this.serialize()),n=e>=0?{widgets:t[e].widgets}:{};t.splice(e+1,0,n),this.props.onChange({json:t})},_handleRemoveSection:function(e){var t=o.clone(this._sections());t.splice(e,1),this.props.onChange({json:t})},serialize:function(){var e=this;if("edit"===this.props.mode)return this._sections().map(function(t,n){return e.refs["editor"+n].serialize()});if("preview"===this.props.mode||"json"===this.props.mode)return this.props.json;throw new Error("Could not serialize; mode "+this.props.mode+" not found")},render:function(){return i.createElement("div",{className:"framework-perseus perseus-article-editor"},"edit"===this.props.mode&&this._renderEditor(),"preview"===this.props.mode&&this._renderPreviewMode(),"json"===this.props.mode&&i.createElement("div",{className:"json-editor"},i.createElement("div",{className:"json-editor-warning"},i.createElement("span",null,"Warning: Editing in this mode can lead to broken articles!")),i.createElement(f,{multiLine:!0,onChange:this._handleJsonChange,value:this.props.json})))}});e.exports=b},function(e,t,n){"use strict";var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},i=n(34),o=n(35),s=n(62),a=n(63),l=n(57),p=n(11).Options,c=n(79),u=n(41),h=u.iconChevronDown,d=u.iconChevronRight,f=u.iconTrash,m=n(42),g=n(44),v=n(40),y=n(45),b=n(12),E=n(22),T=n(59),x=n(64),w="[[☃ {id}]]",C="(\\[\\[☃ {id}\\]\\])",P=new RegExp(C.replace("{id}","[a-z-]+ [0-9]+"),"g"),S=/^\[\[([a-z\-]+)$/,k=/(?:\n{2,}|^\n*)$/,N=/(\n*)$/,M=/^(\n*)/,_=function(e){var t=e.toString();return t.length>=5&&(t=t.replace(/(\d)(?=(\d{3})+$)/g,"$1{,}")),t},O=function(e){if(k.test(e))return e;var t=N.exec(e)[1];return e+"\n\n".slice(0,2-t.length)},A=function(e){var t=M.exec(e)[1];return"\n\n".slice(0,2-t.length)+e},I=i.createClass({displayName:"WidgetSelect",shouldComponentUpdate:function(){return!1},handleChange:function(e){
var t=e.target.value;""!==t&&this.props.onChange&&this.props.onChange(t)},render:function(){var e=E.getPublicWidgets(),t=l.sortBy(l.keys(e),function(t){return e[t].displayName}),n="Add a widget…";return i.createElement("select",{value:"",onChange:this.handleChange},i.createElement("option",{value:""},n),i.createElement("option",{disabled:!0},"--"),l.map(t,function(t){return i.createElement("option",{key:t,value:t},e[t].displayName)}))}}),R=i.createClass({displayName:"WidgetEditor",propTypes:{id:i.PropTypes.string.isRequired,onChange:i.PropTypes.func.isRequired,onRemove:i.PropTypes.func.isRequired,apiOptions:p.propTypes,type:i.PropTypes.string.isRequired,alignment:i.PropTypes.string,static:i.PropTypes.bool,graded:i.PropTypes.bool,options:i.PropTypes.any,version:i.PropTypes.shape({major:i.PropTypes.number.isRequired,minor:i.PropTypes.number.isRequired})},getInitialState:function(){return{showWidget:!1}},componentWillMount:function(){this._upgradeWidgetInfo(this.props)},componentWillReceiveProps:function(e){this._upgradeWidgetInfo(e)},_upgradeWidgetInfo:function(e){var t=l.omit(e,x),n=E.upgradeWidgetInfoToLatestVersion(t);this.setState({widgetInfo:n})},_toggleWidget:function(e){e.preventDefault(),this.setState({showWidget:!this.state.showWidget})},_handleWidgetChange:function(e,t,n){var r=l.clone(this.state.widgetInfo);r.options=l.extend(this.refs.widget.serialize(),e),this.props.onChange(r,t,n)},_toggleStatic:function(e){e.preventDefault();var t=l.extend({},this.state.widgetInfo,{static:!this.state.widgetInfo.static});this.props.onChange(t)},_handleAlignmentChange:function(e){var t=e.target.value,n=l.clone(this.state.widgetInfo);n.alignment=t,this.props.onChange(n)},render:function(){var e,t=this,n=this.state.widgetInfo,o=E.getEditor(n.type);e=this.props.apiOptions.showAlignmentOptions?E.getSupportedAlignments(n.type):["default"];var s=E.supportsStaticMode(n.type),a="transformer"===n.type,l=i.createElement(y,{label:"Graded:",graded:n.graded,onChange:this.props.onChange});return i.createElement("div",{className:"perseus-widget-editor"},i.createElement("div",{className:"perseus-widget-editor-title "+(this.state.showWidget?"open":"closed")},i.createElement("a",{className:"perseus-widget-editor-title-id",href:"#",onClick:this._toggleWidget},this.props.id,this.state.showWidget?i.createElement(m,h):i.createElement(m,d)),s&&i.createElement("input",{type:"button",onClick:this._toggleStatic,className:"simple-button--small",style:{marginRight:10},value:n.static?"Unset as static":"Set as static"}),e.length>1&&i.createElement("select",{className:"alignment",value:n.alignment,onChange:this._handleAlignmentChange},e.map(function(e){return i.createElement("option",{key:e},e)})),i.createElement("a",{href:"#",className:"remove-widget simple-button simple-button--small orange",onClick:function(e){e.preventDefault(),t.props.onRemove()}},i.createElement(m,f))),i.createElement("div",{className:"perseus-widget-editor-content "+(this.state.showWidget?"enter":"leave")},a&&l,i.createElement(o,r({ref:"widget",onChange:this._handleWidgetChange,static:n.static,apiOptions:this.props.apiOptions},n.options))))},getSaveWarnings:function(){var e=this.refs.widget.getSaveWarnings;return e?e():[]},serialize:function(){var e=this.state.widgetInfo;return{type:e.type,alignment:e.alignment,static:e.static,graded:e.graded,options:this.refs.widget.serialize(),version:e.version}}}),D=/!\[[^\]]*\]\(([^\s\)]+)[^\)]*\)/g,L=function(e,t){for(var n=[];;){var r=e.exec(t);if(!r)break;n.push(r)}return n},F=function(e){return l.map(L(D,e),function(e){return e[1]})},q=i.createClass({displayName:"Editor",propTypes:{apiOptions:p.propTypes,imageUploader:i.PropTypes.func},getDefaultProps:function(){return{content:"",placeholder:"",widgets:{},images:{},disabled:!1,widgetEnabled:!0,immutableWidgets:!1,showWordCount:!1,warnNoPrompt:!1,warnNoWidgets:!1}},getInitialState:function(){return{showKatexErrors:!1}},getWidgetEditor:function(e,t){if(E.getEditor(t))return i.createElement(R,r({ref:e,id:e,type:t,onChange:this._handleWidgetEditorChange.bind(this,e),onRemove:this._handleWidgetEditorRemove.bind(this,e),apiOptions:this.props.apiOptions},this.props.widgets[e]))},_handleWidgetEditorChange:function(e,t,n,r){var i=l.clone(this.props.widgets);i[e]=l.extend({},i[e],t),this.props.onChange({widgets:i},n,r)},_handleWidgetEditorRemove:function(e){var t=new RegExp(C.replace("{id}",e),"gm"),n=o.findDOMNode(this.refs.textarea);this.props.onChange({content:n.value.replace(t,"")})},_sizeImages:function(e){var t=F(e.content),n=l.pick(e.images,t),r=l.filter(t,function(e){return!n[e]});l.each(r,function(t){b.getImageSize(t,function(r,i){n[t]={width:r,height:i},e.onChange({images:l.clone(n)},null,!0)})})},componentDidMount:function(){this._sizeImages(this.props),a(o.findDOMNode(this.refs.textarea)).on("copy cut",this._maybeCopyWidgets).on("paste",this._maybePasteWidgets)},componentDidUpdate:function(e){var t=o.findDOMNode(this.refs.textarea);t.value=this.props.content,this.props.content!==e.content&&this._sizeImages(this.props)},handleDrop:function(e){var t=this,n=this.props.content,r=e.nativeEvent.dataTransfer,i=r.files;if(0!==i.length)l(i).chain().map(function(e){if(!e.type.match("image.*"))return null;var t="☃ "+l.uniqueId("image_");return n+="\n\n![]("+t+")",{file:e,sentinel:t}}).reject(l.isNull).tap(function(){t.props.onChange({content:n})}).each(function(e){t.props.imageUploader(e.file,function(n){t.props.onChange({content:t.props.content.replace(e.sentinel,n)})})});else{var o=r.getData("URL");if(o){var s=n+"\n\n![]("+o+")";this.props.onChange({content:s})}}},handleChange:function(){var e=o.findDOMNode(this.refs.textarea);this.props.onChange({content:e.value})},_handleKeyDown:function(e){if("Tab"===e.key){var t=o.findDOMNode(this.refs.textarea),n=b.textarea.getWordBeforeCursor(t),r=n.string.toLowerCase().match(S);if(null!=r){var i=r[1],s=E.getAllWidgetTypes(),a=l.filter(s,function(e){return e.substring(0,i.length)===i});if(1===a.length){var p=a[0];this._addWidgetToContent(this.props.content,[n.pos.start,n.pos.end+1],p)}e.preventDefault()}}},_maybeCopyWidgets:function(e){var t=e.target,n=t.value.substring(t.selectionStart,t.selectionEnd),r=l.map(n.match(P),function(e){return b.rWidgetParts.exec(e)[1]}),i=l.pick(this.serialize().widgets,r);localStorage.perseusLastCopiedText=n,localStorage.perseusLastCopiedWidgets=JSON.stringify(i),console.log("Widgets copied: "+localStorage.perseusLastCopiedWidgets)},_maybePasteWidgets:function(e){var t=localStorage.perseusLastCopiedWidgets,n=localStorage.perseusLastCopiedText,r=e.originalEvent.clipboardData.getData("text");if(t&&n===r){e.preventDefault();for(var i=JSON.parse(t),o=this._safeWidgetNameMapping(i),s={},a=Object.entries(i),p=Array.isArray(a),c=0,a=p?a:a[Symbol.iterator]();;){var u;if(p){if(c>=a.length)break;u=a[c++]}else{if(c=a.next(),c.done)break;u=c.value}var h=u,d=h[0],f=h[1];s[o[d]]=f}var m=l.extend(s,this.props.widgets),g=n.replace(P,function(e){var t=b.rWidgetParts.exec(e),n=t[0],r=t[1];return n.replace(r,o[r])}),v=e.target,y=v.selectionStart,E=this.props.content.substr(0,y)+g+this.props.content.substr(v.selectionEnd);this.props.onChange({content:E,widgets:m},function(){var e=y+g.length;b.textarea.moveCursor(v,e)})}},_safeWidgetNameMapping:function(e){var t=l.keys(e).map(function(e){return e.split(" ")}),n=l.uniq(t.map(function(e){return e[0]})),r=l.keys(this.props.widgets).map(function(e){return e.split(" ")}),i={};l.each(n,function(e){i[e]=l.chain(r).filter(function(t){return t[0]===e}).map(function(e){return+e[1]+1}).max().value(),i[e]=Math.max(i[e],1)});var o={};return l.each(t,function(e){var t=e.join(" "),n=e[0];o[t]=n+" "+i[n],i[n]++}),o},_addWidgetToContent:function(e,t,n){var r=o.findDOMNode(this.refs.textarea),i=l.map(e.match(P),function(e){var t=b.rWidgetParts.exec(e),n=t[2],r=+t[3];return[n,r]}),s=l.reduce(i,function(e,t){var r=t[0],i=t[1];return r===n?Math.max(i+1,e):e},1),a=n+" "+s,p=w.replace("{id}",a),c="block"===E.getDefaultAlignment(n),u=e.slice(0,t[0]),h=e.slice(t[1]),d=c?O(u):u,f=c?A(h):h,m=d+p+f,g=l.clone(this.props.widgets);g[a]={options:E.getEditor(n).defaultProps,type:n,version:E.getVersion(n)},this.props.onChange({content:m,widgets:g},function(){b.textarea.moveCursor(r,m.length-h.length)})},_addWidget:function(e){var t=o.findDOMNode(this.refs.textarea);this._addWidgetToContent(this.props.content,[t.selectionStart,t.selectionEnd],e),t.focus()},addTemplate:function(e){var t=e.target.value;if(""!==t){e.target.value="";var n=this.props.content;n=n.replace(/\n*$/,"\n\n");var r;if("table"===t)r="header 1 | header 2 | header 3\n- | - | -\ndata 1 | data 2 | data 3\ndata 4 | data 5 | data 6\ndata 7 | data 8 | data 9";else if("titledTable"===t)r="|| **Table title** ||\nheader 1 | header 2 | header 3\n- | - | -\ndata 1 | data 2 | data 3\ndata 4 | data 5 | data 6\ndata 7 | data 8 | data 9";else if("alignment"===t)r="$\\begin{align} x+5 &= 30 \\\\\nx+5-5 &= 30-5 \\\\\nx &= 25 \\end{align}$";else if("piecewise"===t)r="$f(x) = \\begin{cases}\n7 & \\text{if $x=1$} \\\\\nf(x-1)+5 & \\text{if $x > 1$}\n\\end{cases}$";else{if("allWidgets"!==t)throw new Error("Invalid template type: "+t);r=E.getAllWidgetTypes().map(function(e){return"[["+b.snowman+" "+e+" 1]]"}).join("\n\n")}var i=n+r;this.props.onChange({content:i},this.focusAndMoveToEnd)}},getSaveWarnings:function(){var e=this,t=v.parse(this.props.content),n=!1;v.traverseContent(t,function(e){"unescapedDollar"===e.type&&(n=!0)});var r=[];v.traverseContent(t,function(e){if("image"===e.type&&!e.alt){var t=e.target.length<9?e.target:e.target.slice(0,3)+"..."+e.target.slice(-3);r.push("Image '"+e.target+"' doesn't have alt text: ![add alt text here]("+t+")")}});var i=l.intersection(this.widgetIds,l.keys(this.refs)),o=l(i).chain().map(function(t){var n=e.refs[t].getSaveWarnings,r=n?n():[];return l.map(r,function(e){return t+": "+e})}).flatten(!0).value(),s=r.concat(o);return n&&s.unshift('This content is UNTRANSLATABLE because there are "unescaped" $ signs outside of math expressions. Please substitute $ -> \\$ where appropriate.'),s},focus:function(){o.findDOMNode(this.refs.textarea).focus()},focusAndMoveToEnd:function(){this.focus();var e=o.findDOMNode(this.refs.textarea);e.selectionStart=e.value.length,e.selectionEnd=e.value.length},render:function(){var e,t,n,r,o,a,p,u=[];if(this.props.showWordCount){var h=v.characterCount(this.props.content),d=Math.floor(h/6);p=i.createElement("span",{className:"perseus-editor-word-count",title:"~"+_(d)+" words ("+_(h)+" characters)"},_(d))}if(this.props.widgetEnabled){e=b.split(this.props.content,P),t={},n=[];for(var f=0;f<e.length;f++)if(f%2===0){n.push(e[f]);var m=v.parse(e[f]);v.traverseContent(m,function(e){if("math"===e.type||"blockMath"===e.type){var t=T(e.content);try{katex.renderToString(t)}catch(e){u.push({math:t,message:e.message})}}})}else{var y=b.rWidgetParts.exec(e[f]),E=y[1],x=y[2],w=!1,C=E in t;t[E]=this.getWidgetEditor(E,x);var S=(C||!t[E]?"error ":"")+(w?"selected ":""),k=C?f:E;n.push(i.createElement("b",{className:S,key:k},e[f]))}this.widgetIds=l.keys(t),r=i.createElement(I,{ref:"widgetSelect",onChange:this._addWidget});var N="Insert template…";o=i.createElement("select",{onChange:this.addTemplate},i.createElement("option",{value:""},N),i.createElement("option",{disabled:!0},"--"),i.createElement("option",{value:"table"},"Table"),i.createElement("option",{value:"titledTable"},"Titled table"),i.createElement("option",{value:"alignment"},"Aligned equations"),i.createElement("option",{value:"piecewise"},"Piecewise function"),i.createElement("option",{disabled:!0},"--"),i.createElement("option",{value:"allWidgets"},"All widgets (for testing)")),this.props.immutableWidgets||(a=i.createElement("div",{className:"perseus-editor-widgets"},i.createElement("div",{className:"perseus-editor-widgets-selectors"},r,o,p),s(t)),p=null)}else n=[this.props.content];n.push(i.createElement("br",{key:"end"}));var M,O=[i.createElement("div",{className:"perseus-textarea-underlay",ref:"underlay",key:"underlay"},n),i.createElement("textarea",{ref:"textarea",key:"textarea",style:{width:"95%"},onChange:this.handleChange,onKeyDown:this._handleKeyDown,placeholder:this.props.placeholder,disabled:this.props.disabled,value:this.props.content})];M=this.props.imageUploader?i.createElement(c,{onDrop:this.handleDrop,className:"perseus-textarea-pair"},O):i.createElement("div",{className:"perseus-textarea-pair"},O);var A=this.props.content.replace(/\[\[\u2603 (([a-z-]+) ([0-9]+))\]\]/g,""),R=0===A.trim().length,D=!/\[\[\u2603 (([a-z-]+) ([0-9]+))\]\]/g.test(this.props.content),L={borderTop:"none",padding:4,backgroundColor:"pink"};return i.createElement("div",{className:"perseus-single-editor "+(this.props.className||"")},M,u.length>0&&i.createElement(g,{errorList:u}),this.props.warnNoPrompt&&R&&i.createElement("div",{style:L},"Graded Groups should contain a prompt"),this.props.warnNoWidgets&&D&&i.createElement("div",{style:L},"Graded Groups should contain at least one widget"),p,a)},serialize:function(e){var t=this,n={},r=l.intersection(this.widgetIds,l.keys(this.refs));return l.each(r,function(e){n[e]=t.refs[e].serialize()}),e&&e.keepDeletedWidgets&&l.chain(this.props.widgets).keys().reject(function(e){return l.contains(r,e)}).each(function(e){n[e]=t.props.widgets[e]}),{replace:this.props.replace,content:this.props.content,images:this.props.images,widgets:n}}});e.exports=q},function(e,t,n){"use strict";var r=n(34),i=n(57),o=n(11).ClassNames,s=n(65),a=n(46),l=n(60),p=n(47),c=n(43),u=n(31),h=r.createClass({displayName:"EditorPage",propTypes:{answerArea:r.PropTypes.any,developerMode:r.PropTypes.bool,frameSource:r.PropTypes.string.isRequired,hints:r.PropTypes.any,imageUploader:r.PropTypes.func,itemDataVersion:r.PropTypes.shape({major:r.PropTypes.number,minor:r.PropTypes.number}),jsonMode:r.PropTypes.bool,onChange:r.PropTypes.func,onPreviewDeviceChange:r.PropTypes.func,previewDevice:r.PropTypes.string,question:r.PropTypes.any},mixins:[s],getDefaultProps:function(){return{developerMode:!1,jsonMode:!1,onChange:function(){},ref:""}},getInitialState:function(){return{json:i.pick(this.props,"question","answerArea","hints","itemDataVersion"),gradeMessage:"",wasAnswered:!1}},handleCheckAnswer:function(){var e=this.scorePreview();this.setState({gradeMessage:e.message,wasAnswered:e.correct})},toggleJsonMode:function(){this.setState({json:this.serialize({keepDeletedWidgets:!0})},function(){this.props.onChange({jsonMode:!this.props.jsonMode})})},componentDidMount:function(){this.rendererMountNode=document.createElement("div"),this.updateRenderer()},componentDidUpdate:function(){this.updateRenderer()},updateRenderer:function(){var e=!this.props.developerMode||!this.props.jsonMode;if(this.isMounted()&&e){var t="phone"===this.props.previewDevice||"tablet"===this.props.previewDevice,n=Object.assign(this.getApiOptions(),{customKeypad:t,isMobile:t});this.refs.itemEditor.triggerPreviewUpdate({type:"question",data:i({item:this.serialize(),apiOptions:n,initialHintsVisible:0,device:this.props.previewDevice}).extend(i(this.props).pick("workAreaSelector","solutionAreaSelector","hintsAreaSelector","problemNum"))})}},handleChange:function(e,t,n){var r=i(this.props).pick("question","hints","answerArea");i(r).extend(e),this.props.onChange(r,t,n)},changeJSON:function(e){this.setState({json:e}),this.props.onChange(e)},_fixPassageRefs:function(){var e=this.serialize(),t=l(e);this.setState({json:t}),this.props.onChange(t)},scorePreview:function(){return this.renderer?this.renderer.scoreInput():null},render:function(){var e="framework-perseus",t="phone"===this.props.previewDevice||"tablet"===this.props.previewDevice,n=Object.assign(this.getApiOptions(),{customKeypad:t,isMobile:t});return n.isMobile&&(e+=" "+o.MOBILE),r.createElement("div",{id:"perseus",className:e},r.createElement("div",{style:{marginBottom:10}},this.props.developerMode&&r.createElement("span",null,r.createElement("label",null," ","Developer JSON Mode:"," ",r.createElement("input",{type:"checkbox",checked:this.props.jsonMode,onChange:this.toggleJsonMode}))," ",r.createElement("button",{type:"button",onClick:this._fixPassageRefs},"Fix passage-refs")," "),!this.props.jsonMode&&r.createElement(u,{deviceType:this.props.previewDevice,onViewportSizeChanged:this.props.onPreviewDeviceChange})),this.props.developerMode&&this.props.jsonMode&&r.createElement("div",null,r.createElement(c,{multiLine:!0,value:this.state.json,onChange:this.changeJSON})),(!this.props.developerMode||!this.props.jsonMode)&&r.createElement(p,{ref:"itemEditor",rendererOnly:this.props.jsonMode,question:this.props.question,answerArea:this.props.answerArea,imageUploader:this.props.imageUploader,onChange:this.handleChange,wasAnswered:this.state.wasAnswered,gradeMessage:this.state.gradeMessage,onCheckAnswer:this.handleCheckAnswer,deviceType:this.props.previewDevice,apiOptions:n,frameSource:this.props.frameSource}),(!this.props.developerMode||!this.props.jsonMode)&&r.createElement(a,{ref:"hintsEditor",hints:this.props.hints,imageUploader:this.props.imageUploader,onChange:this.handleChange,deviceType:this.props.previewDevice,apiOptions:n,frameSource:this.props.frameSource}))},getSaveWarnings:function(){var e=this.refs.itemEditor.getSaveWarnings(),t=this.refs.hintsEditor.getSaveWarnings();return e.concat(t)},serialize:function(e){return this.props.jsonMode?this.state.json:i.extend(this.refs.itemEditor.serialize(e),{hints:this.refs.hintsEditor.serialize(e)})}});e.exports=h},function(e,t,n){"use strict";var r=n(34),i=0,o={},s={};window.iframeDataStore={},window.addEventListener("message",function(e){"string"==typeof e.data?o[e.data]():e.data.id&&s[e.data.id](e.data.height)});var a=r.createClass({displayName:"IframeContentRenderer",propTypes:{content:r.PropTypes.string.isRequired,datasetKey:r.PropTypes.any,datasetValue:r.PropTypes.any,seamless:r.PropTypes.bool},componentDidMount:function(){var e=this;this.iframeID=i,i++,this._prepareFrame(),o[this.iframeID]=function(){e.sendNewData(e._lastData)},s[this.iframeID]=function(t){e._lastHeight=t,e.isMounted()&&e.props.seamless&&(e.refs.container.style.height=t+"px")}},shouldComponentUpdate:function(e){return e.content!==this.props.content||e.datasetValue!==this.props.datasetValue||e.seamless!==this.props.seamless},componentDidUpdate:function(e){this.props.seamless?this.refs.container.style.height=this._lastHeight+"px":this.refs.container.style.height="100%",e.content===this.props.content&&e.datasetValue===this.props.datasetValue||this._prepareFrame()},componentWillUnmount:function(){o[this.iframeID]=null,s[this.iframeID]=null},_prepareFrame:function(){var e=this;this._frame&&this.refs.container.removeChild(this._frame),this._frame=document.createElement("iframe"),this._frame.style.width="100%",this._frame.style.height="100%",this.props.datasetKey&&(this._frame.dataset[this.props.datasetKey]=this.props.datasetValue),this._frame.dataset.id=this.iframeID,this._frame.onload=function(){e._frame.onload=null,setTimeout(function(){e._frame.contentWindow.document.open(),e._frame.contentWindow.document.write(e.props.content),e._frame.contentWindow.document.close()})},this.refs.container.appendChild(this._frame)},sendNewData:function(e){this.isMounted()&&e&&(this._lastData=e,window.iframeDataStore[this.iframeID]=e,this._frame.contentWindow.postMessage(this.iframeID,"*"))},render:function(){return r.createElement("div",{ref:"container",style:{width:"100%",height:"100%"}})}});e.exports=a},function(e,t,n){"use strict";var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},i=n(34),o=n(35),s=n(57),a=n(11).Options,l=n(27),p=n(28),c=n(66),u=n(12),h=n(67),d=h.mapObject,f=i.PropTypes,m=i.createClass({displayName:"ItemRenderer",propTypes:{apiOptions:f.shape({interactionCallback:f.func,onFocusChange:f.func,setDrawingAreaAvailable:f.func}),controlPeripherals:f.bool,hintsAreaSelector:f.string,initialHintsVisible:f.number,item:f.shape({answerArea:f.shape({calculator:f.bool,chi2Table:f.bool,periodicTable:f.bool,tTable:f.bool,zTable:f.bool}),hints:f.arrayOf(f.object),question:f.object}).isRequired,onShowCalculator:f.func,onShowChi2Table:f.func,onShowPeriodicTable:f.func,onShowTTable:f.func,onShowZTable:f.func,problemNum:f.number,savedState:f.any,workAreaSelector:f.string},mixins:[c],getDefaultProps:function(){return{apiOptions:{},controlPeripherals:!0,hintsAreaSelector:"#hintsarea",initialHintsVisible:0,workAreaSelector:"#workarea"}},getInitialState:function(){return{hintsVisible:this.props.initialHintsVisible,questionCompleted:!1,questionHighlightedWidgets:[]}},componentDidMount:function(){this.props.controlPeripherals&&this.props.apiOptions.setDrawingAreaAvailable&&this.props.apiOptions.setDrawingAreaAvailable(!0),this._currentFocus=null,this.update()},componentWillReceiveProps:function(e){this.setState({questionHighlightedWidgets:[]})},componentDidUpdate:function(){this.update()},componentWillUnmount:function(){if(o.unmountComponentAtNode(document.querySelector(this.props.workAreaSelector)),o.unmountComponentAtNode(document.querySelector(this.props.hintsAreaSelector)),this.props.controlPeripherals){var e=this.props.item.answerArea||{};e.calculator&&$("#calculator").hide(),e.periodicTable&&$(".periodic-table-info-box").hide(),e.zTable&&$(".z-table-info-box").hide(),e.tTable&&$(".t-table-info-box").hide(),e.chi2Table&&$(".chi2-table-info-box").hide()}},update:function(){var e=r({},a.defaults,this.props.apiOptions,{onFocusChange:this._handleFocusChange});this.questionRenderer=o.render(i.createElement(p,r({keypadElement:this.keypadElement(),problemNum:this.props.problemNum,onInteractWithWidget:this.handleInteractWithWidget,highlightedWidgets:this.state.questionHighlightedWidgets,apiOptions:e,questionCompleted:this.state.questionCompleted,savedState:this.props.savedState},this.props.item.question)),document.querySelector(this.props.workAreaSelector)),this.hintsRenderer=o.render(i.createElement(l,{hints:this.props.item.hints,hintsVisible:this.state.hintsVisible,apiOptions:e}),document.querySelector(this.props.hintsAreaSelector));var t=this.props.item.answerArea||{};if(this.props.controlPeripherals?($("#calculator").toggle(t.calculator||!1),$(".periodic-table-info-box").toggle(t.periodicTable||!1),$(".z-table-info-box").toggle(t.zTable||!1),$(".t-table-info-box").toggle(t.tTable||!1),$(".chi2-table-info-box").toggle(t.chi2Table||!1)):(t.calculator&&this.props.onShowCalculator&&this.props.onShowCalculator(),t.periodicTable&&this.props.onShowPeriodicTable&&this.props.onShowPeriodicTable(),t.zTable&&this.props.onShowZTable&&this.props.onShowZTable(),t.tTable&&this.props.onShowTTable&&this.props.onShowTTable(),t.chi2Table&&this.props.onShowChi2Table&&this.props.onShowChi2Table()),e.answerableCallback){var n=0===this.questionRenderer.emptyWidgets().length;e.answerableCallback(n)}},_handleFocusChange:function(e,t){null!=e?this._setCurrentFocus(e):this._onRendererBlur(t)},_setCurrentFocus:function(e){var t=this,n=this.keypadElement(),r=this._currentFocus;this._currentFocus=e;var i=this.getInputPaths(),s=this._currentFocus&&i.some(function(e){return u.inputPathsEqual(e,t._currentFocus)});null!=this.props.apiOptions.onFocusChange&&this.props.apiOptions.onFocusChange(this._currentFocus,r,s&&n&&o.findDOMNode(n)),n&&(s?n.activate():n.dismiss())},_onRendererBlur:function(e){var t=this,n=this._currentFocus;u.inputPathsEqual(e,n)&&setTimeout(function(){u.inputPathsEqual(t._currentFocus,n)&&t._setCurrentFocus(null)})},_setWidgetProps:function(e,t,n){this.questionRenderer._setWidgetProps(e,t,n)},_handleAPICall:function(e,t){var n=s.rest(arguments),r=this.questionRenderer;return r[e].apply(r,n)},setInputValue:function(e,t,n){return this._handleAPICall("setInputValue",e,t,n)},focusPath:function(e){return this._handleAPICall("focusPath",e)},blurPath:function(e){return this._handleAPICall("blurPath",e)},getDOMNodeForPath:function(e){return this._handleAPICall("getDOMNodeForPath",e)},getGrammarTypeForPath:function(e){return this._handleAPICall("getGrammarTypeForPath",e)},getInputPaths:function(){var e=this.questionRenderer.getInputPaths();return e},handleInteractWithWidget:function(e){var t=s.difference(this.state.questionHighlightedWidgets,[e]);this.setState({questionCompleted:!1,questionHighlightedWidgets:t}),this.props.apiOptions.interactionCallback&&this.props.apiOptions.interactionCallback()},focus:function(){return this.questionRenderer.focus()},blur:function(){this._currentFocus&&this.blurPath(this._currentFocus)},showHint:function(){this.state.hintsVisible<this.getNumHints()&&this.setState({hintsVisible:this.state.hintsVisible+1})},getNumHints:function(){return this.props.item.hints.length},scoreInput:function(){var e=this.questionRenderer.guessAndScore(),t=e[0],n=e[1],r=[t,[]],i=u.keScoreFromPerseusScore(n,r),o=this.questionRenderer.emptyWidgets();return this.setState({questionCompleted:i.correct,questionHighlightedWidgets:o}),i},getWidgetIds:function(){return this.questionRenderer.getWidgetIds()},scoreWidgets:function(){var e=this.questionRenderer.scoreWidgets(),t=this.questionRenderer.getUserInputForWidgets();return d(e,function(e,n){return u.keScoreFromPerseusScore(e,t[n])})},getSerializedState:function(){return{question:this.questionRenderer.getSerializedState(),hints:this.hintsRenderer.getSerializedState()}},restoreSerializedState:function(e,t){var n=2,r=function(){--n,t&&0===n&&t()};this.questionRenderer.restoreSerializedState(e.question,r),this.hintsRenderer.restoreSerializedState(e.hints,r)},render:function(){return i.createElement("div",null)}});e.exports=m},function(e,t,n){"use strict";var r=n(34),i=n(82),o=i.StyleSheet,s=i.css,a=r.createClass({displayName:"SimpleButton",propTypes:{children:r.PropTypes.node,color:r.PropTypes.oneOf(["orange","green"]),onClick:r.PropTypes.func},getDefaultProps:function(){return{children:null,color:"green",onClick:function(){}}},render:function(){return r.createElement("div",{className:s(l.baseButton,l[this.props.color]),onClick:this.props.onClick},this.props.children)}}),l=o.create({baseButton:{top:"0",fontSize:"11px",padding:"3px 10px",backgroundRepeat:"repeat-x",borderColor:"\n            rgba(0, 0, 0, 0.1)\n            rgba(0, 0, 0, 0.1)\n            rgba(0, 0, 0, 0.25)\n        ",color:"#ffffff",borderRadius:"3px",lineHeight:"15px",cursor:"pointer",transition:"box-shadow ease-in-out 0.15s",appearance:"none",textDecoration:"none",textAlign:"center",":hover":{boxShadow:"0 1px 1px rgba(0, 0, 0, 0.35),\n                inset 0 0 50px 5px rgba(255, 255, 255, 0.2)"}},green:{border:"1px solid #7fab07",backgroundColor:"#80ac07",backgroundImage:"linear-gradient(to bottom, #8aba08, #719807)",":hover":{borderBottomColor:"#547105",backgroundColor:"#719807"}},orange:{border:"1px solid #d45704",backgroundColor:"#d55704",backgroundImage:"linear-gradient(to bottom, #e35d04, #c04f03)",":hover":{borderBottomColor:"#983e03",bakgroundColor:"#c04f03"}}});e.exports=a},function(e,t,n){"use strict";var r=n(57),i="block",o=["default"],s=!1,a="",l={},p={},c={register:function(e,t,n){l[e]=t,p[e]=n},registerMany:function(e){var t=this;e.forEach(function(e){var n=e[0],r=e[1];n&&t.register(n.name,n,r)}),this.validateAlignments()},getWidget:function(e){return r.has(l,e)?l[e].getWidget?l[e].getWidget():l[e].widget:null},getEditor:function(e){return r.has(p,e)?p[e]:null},getTransform:function(e){return r.has(l,e)?l[e].transform||r.identity:null},getVersion:function(e){var t=l[e];return t?l[e].version||{major:0,minor:0}:null},getVersionVector:function(){var e={};return r.each(r.keys(l),function(t){e[t]=c.getVersion(t)}),e},getPublicWidgets:function(){return r.pick(l,r.reject(r.keys(l),function(e){return l[e].hidden}))},isAccessible:function(e){var t=l[e.type].accessible;return"function"==typeof t?t(e.options):!!t},getAllWidgetTypes:function(){return r.keys(l)},upgradeWidgetInfoToLatestVersion:function(e){var t=e.type;if(!r.isString(t))throw new Error("widget type must be a string, but was: "+t);var n=l[t];if(null==n)return e;var i=e.version||{major:0,minor:0},o=n.version||{major:0,minor:0};if(i.major>o.major||i.major===o.major&&i.minor>o.minor)return e;var a=r.clone(e.options)||{},u=n.propUpgrades||{};if(0!==r.keys(a).length)for(var h=i.major+1;h<=o.major;h++)u[h]?a=u[h](a):"undefined"!=typeof console&&console.warn&&console.warn("No upgrade found for widget `"+t+"` from major version `"+(h-1)+"` to major version `"+h+"` found. This is necessary to render this `"+t+"` correctly.");var d=p[t].defaultProps;a=r.extend({},d,a);var f=e.alignment;null!=f&&"default"!==f||(f=c.getSupportedAlignments(t)[0]);var m=e.static;return null==m&&(m=s),r.extend({},e,{version:o,graded:null==e.graded||e.graded,alignment:f,static:m,options:a})},getRendererPropsForWidgetInfo:function(e,t){var n=e.type,i=l[n];if(null==i)return e.options;var o;return(o=e.static?this.getStaticTransform(n)||r.identity:i.transform||r.identity)(e.options,t)},traverseChildWidgets:function(e,t){if(!t)throw new Error("traverseRenderer must be provided, but was not");if(!e||!e.type||!l[e.type])return e;var n=l[e.type],i=e.options;if(n.traverseChildWidgets&&i){var o=n.traverseChildWidgets(i,t);return r.extend({},e,{options:o})}return e},getSupportedAlignments:function(e){var t=l[e];return t&&t.supportedAlignments||o},getDefaultAlignment:function(e){var t,n=l[e];return n?(t=n.getDefaultAlignment?n.getDefaultAlignment():n.defaultAlignment,t||i):i},validAlignments:["block","inline-block","inline","float-left","float-right","full-width"],validateAlignments:function(){r.each(l,function(e){if(e.defaultAlignment&&!r.contains(c.validAlignments,e.defaultAlignment))throw new Error("Widget '"+e.displayName+"' has an invalid defaultAlignment value: "+e.defaultAlignment);if(e.supportedAlignments){var t=r.difference(e.supportedAlignments,c.validAlignments);if(t.length)throw new Error("Widget '"+e.displayName+"' has an invalid value for supportedAlignments: "+t.join(" "))}})},supportsStaticMode:function(e){var t=l[e];return t&&null!=t.staticTransform},getStaticTransform:function(e){var t=l[e];return t&&t.staticTransform},getTracking:function(e){var t=l[e];return t&&t.tracking||a}};e.exports=c},function(e,t,n){"use strict";e.exports=[[n(68),n(75)],[n(69),n(70)],[n(71),n(72)],[n(73),n(74)]]},function(e,t,n){"use strict";var r=function(e){var t=e.skipMathJax,r=$.Deferred();void 0===e.loadExtraWidgets||e.loadExtraWidgets?!function(){var e=n(22);n.e(1,function(t){var i=n(49);e.registerMany(i),r.resolve()},0)}():r.resolve();var i=$.Deferred();return t?i.resolve():(MathJax.Hub.Config({messageStyle:"none",skipStartupTypeset:"none","HTML-CSS":{availableFonts:["TeX"],imageFont:null,scale:100,showMathMenu:!1}}),MathJax.Hub.Configured(),MathJax.Hub.Queue(i.resolve)),r.then(function(){return i})};e.exports=r},function(e,t,n){"use strict";var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},i=n(34),o=n(35),s=n(83),a=n(12),l=n(11).Options,p=n(11).ClassNames,c=n(28),u=n(66),h=i.PropTypes.shape({content:i.PropTypes.string,widgets:i.PropTypes.object,images:i.PropTypes.object}),d=i.createClass({displayName:"ArticleRenderer",propTypes:{apiOptions:i.PropTypes.shape({onFocusChange:i.PropTypes.func,isMobile:i.PropTypes.bool}),json:i.PropTypes.oneOfType([h,i.PropTypes.arrayOf(h)]).isRequired,useNewStyles:i.PropTypes.bool},mixins:[u],getDefaultProps:function(){return{apiOptions:{},useNewStyles:!1}},componentDidMount:function(){this._currentFocus=null},shouldComponentUpdate:function(e,t){return e!==this.props||t!==this.state},_handleFocusChange:function(e,t){e?this._setCurrentFocus(e):this._onRendererBlur(t)},_setCurrentFocus:function(e){var t=this,n=this.keypadElement(),r=this._currentFocus;this._currentFocus=e;var i=!1;this._currentFocus&&!function(){var e=t._currentFocus,n=e[0],r=e.slice(1),o=t.refs[n].getInputPaths();i=o.some(function(e){return a.inputPathsEqual(e,r)})}(),null!=this.props.apiOptions.onFocusChange&&this.props.apiOptions.onFocusChange(this._currentFocus,r,i&&n&&o.findDOMNode(n)),
n&&(i?n.activate():n.dismiss())},_onRendererBlur:function(e){var t=this,n=this._currentFocus;a.inputPathsEqual(e,n)&&setTimeout(function(){a.inputPathsEqual(t._currentFocus,n)&&t._setCurrentFocus(null)})},blur:function(){if(this._currentFocus){var e=this._currentFocus,t=e[0],n=e.slice(1);this.refs[t].blurPath(n)}},_sections:function(){return Array.isArray(this.props.json)?this.props.json:[this.props.json]},render:function(){var e,t=this,n=r({},l.defaults,this.props.apiOptions,{isArticle:!0}),o=s((e={"framework-perseus":!0,"perseus-article":!0,"bibliotron-article":this.props.useNewStyles},e[p.MOBILE]=n.isMobile,e)),a=this._sections().map(function(e,o){var s="section-"+o;return i.createElement("div",{key:o,className:"clearfix"},i.createElement(c,r({},e,{ref:s,key:o,key_:o,keypadElement:t.keypadElement(),apiOptions:r({},n,{onFocusChange:function(e,n){t._handleFocusChange(e&&[s].concat(e),n&&[s].concat(n))}})})))});return i.createElement("div",{className:o},a)}});e.exports=d},function(e,t,n){"use strict";var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},i=n(34),o=n(35),s=n(57),a=n(82),l=a.StyleSheet,p=a.css,c=n(11).Options,u=n(27),h=n(66),d=n(28),f=n(12),m=n(67),g=m.mapObject,v=i.PropTypes,y=i.createClass({displayName:"ItemRenderer",propTypes:{apiOptions:v.any,hintsVisible:v.number,item:v.shape({answerArea:v.shape({calculator:v.bool,chi2Table:v.bool,periodicTable:v.bool,tTable:v.bool,zTable:v.bool}),hints:v.arrayOf(v.object),question:v.object}).isRequired,problemNum:v.number,savedState:v.any},mixins:[h],getDefaultProps:function(){return{apiOptions:{}}},getInitialState:function(){return{questionCompleted:!1,questionHighlightedWidgets:[]}},componentDidMount:function(){this._currentFocus=null},componentWillReceiveProps:function(e){this.setState({questionHighlightedWidgets:[]})},componentDidUpdate:function(){if(this.props.apiOptions.answerableCallback){var e=0===this.questionRenderer.emptyWidgets().length;this.props.apiOptions.answerableCallback(e)}},_handleFocusChange:function(e,t){null!=e?this._setCurrentFocus(e):this._onRendererBlur(t)},_setCurrentFocus:function(e){var t=this,n=this.keypadElement(),r=this._currentFocus;this._currentFocus=e;var i=this.getInputPaths(),s=this._currentFocus&&i.some(function(e){return f.inputPathsEqual(e,t._currentFocus)});null!=this.props.apiOptions.onFocusChange&&this.props.apiOptions.onFocusChange(this._currentFocus,r,s&&n&&o.findDOMNode(n)),n&&(s?n.activate():n.dismiss())},_onRendererBlur:function(e){var t=this,n=this._currentFocus;s.isEqual(e,n)&&s.defer(function(){s.isEqual(t._currentFocus,n)&&t._setCurrentFocus(null)})},_setWidgetProps:function(e,t,n){this.questionRenderer._setWidgetProps(e,t,n)},_handleAPICall:function(e,t){var n=s.rest(arguments),r=this.questionRenderer;return r[e].apply(r,n)},setInputValue:function(e,t,n){return this._handleAPICall("setInputValue",e,t,n)},focusPath:function(e){return this._handleAPICall("focusPath",e)},blurPath:function(e){return this._handleAPICall("blurPath",e)},getDOMNodeForPath:function(e){return this._handleAPICall("getDOMNodeForPath",e)},getGrammarTypeForPath:function(e){return this._handleAPICall("getGrammarTypeForPath",e)},getInputPaths:function(){var e=this.questionRenderer.getInputPaths();return e},handleInteractWithWidget:function(e){var t=s.difference(this.state.questionHighlightedWidgets,[e]);this.setState({questionCompleted:!1,questionHighlightedWidgets:t}),this.props.apiOptions.interactionCallback&&this.props.apiOptions.interactionCallback()},focus:function(){return this.questionRenderer.focus()},blur:function(){this._currentFocus&&this.blurPath(this._currentFocus)},getNumHints:function(){return this.props.item.hints.length},scoreInput:function(){var e=this.questionRenderer.guessAndScore(),t=e[0],n=e[1],r=[t,[]],i=f.keScoreFromPerseusScore(n,r),o=this.questionRenderer.emptyWidgets();return this.setState({questionCompleted:i.correct,questionHighlightedWidgets:o}),i},getWidgetIds:function(){return this.questionRenderer.getWidgetIds()},scoreWidgets:function(){var e=this.questionRenderer.scoreWidgets(),t=this.questionRenderer.getUserInputForWidgets();return g(e,function(e,n){return f.keScoreFromPerseusScore(e,t[n])})},getSerializedState:function(){return{question:this.questionRenderer.getSerializedState(),hints:this.hintsRenderer.getSerializedState()}},restoreSerializedState:function(e,t){var n=2,r=function(){--n,t&&0===n&&t()};this.questionRenderer.restoreSerializedState(e.question,r),this.hintsRenderer.restoreSerializedState(e.hints,r)},render:function(){var e=this,t=r({},c.defaults,this.props.apiOptions,{onFocusChange:this._handleFocusChange}),n=i.createElement(d,r({keypadElement:this.keypadElement(),problemNum:this.props.problemNum,onInteractWithWidget:this.handleInteractWithWidget,highlightedWidgets:this.state.questionHighlightedWidgets,apiOptions:t,questionCompleted:this.state.questionCompleted,savedState:this.props.savedState,ref:function(t){return e.questionRenderer=t}},this.props.item.question));console.log(this.props);var o=i.createElement(u,{hints:this.props.item.hints,hintsVisible:this.props.hintsVisible,apiOptions:t,ref:function(t){return e.hintsRenderer=t}});return i.createElement("div",null,i.createElement("div",null,n),i.createElement("div",{className:!t.isMobile&&p(b.hintsContainer)},o))}}),b=l.create({hintsContainer:{marginLeft:50}});e.exports=y},function(e,t,n){"use strict";var r,i,o,s=n(34),a=n(35),l=n(82),p=l.StyleSheet,c=l.css,u=n(83),h=n(57),d=window.i18n,f=n(29),m=n(38),g=n(65),v=n(76),y=n(77),b=n(78),E=b.baseUnitPx,T=b.hintBorderWidth,x=b.kaGreen,w=b.gray85,C=b.gray17,P=s.createClass({displayName:"HintsRenderer",propTypes:{className:s.PropTypes.string,hints:s.PropTypes.arrayOf(s.PropTypes.any),hintsVisible:s.PropTypes.number},mixins:[g],componentDidMount:function(){this._cacheHintImages()},componentDidUpdate:function(e,t){if(h.isEqual(e.hints,this.props.hints)&&e.hintsVisible===this.props.hintsVisible||this._cacheHintImages(),e.hintsVisible<this.props.hintsVisible){var n=this.props.hintsVisible-1;a.findDOMNode(this.refs["hintRenderer"+n]).focus();var r=new CustomEvent("hintEvent",{detail:"new hint added"});document.dispatchEvent(r)}},_hintsVisible:function(){return null==this.props.hintsVisible||this.props.hintsVisible===-1?this.props.hints.length:this.props.hintsVisible},_cacheImagesInHint:function(e){h.each(e.images,function(e,t){var n=new Image;n.src=m.getRealImageUrl(t)})},_cacheHintImages:function(){this._hintsVisible()>0?h.each(this.props.hints,this._cacheImagesInHint):this.props.hints.length>0&&this._cacheImagesInHint(this.props.hints[0])},getSerializedState:function(){var e=this;return h.times(this._hintsVisible(),function(t){return e.refs["hintRenderer"+t].getSerializedState()})},restoreSerializedState:function(e,t){var n=this,r=1,i=function(){--r,t&&0===r&&t()};h.each(e,function(e,t){var o=n.refs["hintRenderer"+t];o&&(++r,o.restoreSerializedState(e,i))}),i()},render:function(){var e=this,t=this.getApiOptions(),n=this._hintsVisible(),r=[];this.props.hints.slice(0,n).forEach(function(i,o){var a=o===e.props.hints.length-1&&!/\*\*/.test(i.content),l=o===n-1,p=s.createElement(f,{lastHint:a,lastRendered:l,hint:i,pos:o,totalHints:e.props.hints.length,ref:"hintRenderer"+o,key:"hintRenderer"+o,apiOptions:t});i.replace&&r.length>0?r[r.length-1]=p:r.push(p)});var i=t.getAnotherHint&&n>0&&n<this.props.hints.length,o=u(this.props.className,t.isMobile&&n>0&&c(k.mobileHintStylesHintsRenderer));return s.createElement("div",{className:o},t.isMobile&&n>0&&s.createElement("div",{className:c(k.mobileHintStylesHintTitle,y.responsiveLabel)},d._("Hints")),r,i&&s.createElement("button",{rel:"button",className:c(k.linkButton,k.getAnotherHintButton,t.isMobile&&k.mobileHintStylesGetAnotherHintButton),onClick:function(e){e.preventDefault(),e.stopPropagation(),t.getAnotherHint()}},s.createElement("span",{className:c(k.plusText,t.isMobile&&k.mobileHintStylesPlusText)},"+"),s.createElement("span",{className:c(k.getAnotherHintText)},d._("Get another hint")," (",n,"/",this.props.hints.length,")")))}}),S=E+T,k=p.create({rendererMargins:{marginTop:E},linkButton:{cursor:"pointer",border:"none",backgroundColor:"transparent",fontSize:"100%",fontFamily:"inherit",fontWeight:"bold",color:x,padding:0,position:"relative"},plusText:{fontSize:20,position:"absolute",top:-3,left:0},getAnotherHintText:{marginLeft:16},mobileHintStylesHintsRenderer:{marginTop:4*E,border:"solid "+w,borderWidth:"1px 0 0 0",position:"relative",":before":{content:'""',display:"table",clear:"both"},":after":{content:'""',display:"table",clear:"both"}},mobileHintStylesHintTitle:(r={fontFamily:"inherit",fontStyle:"normal",fontWeight:"bold",color:C,paddingTop:E,paddingBottom:1.5*E},r[v.lgOrSmaller]={paddingLeft:0},r[v.smOrSmaller]={paddingLeft:S},r),getAnotherHintButton:{marginTop:1.5*E},mobileHintStylesGetAnotherHintButton:(i={},i[v.lgOrSmaller]={paddingLeft:0},i[v.smOrSmaller]={paddingLeft:S},i),mobileHintStylesPlusText:(o={},o[v.lgOrSmaller]={left:0},o[v.smOrSmaller]={left:S},o)});e.exports=P},function(e,t,n){"use strict";var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol?"symbol":typeof e},i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},o=n(63),s=n(34),a=n(35),l=n(57),p=n(83),c=n(50),u=n(40),h=n(51),d=n(38),f=n(80),m=n(52),g=n(22),v=n(12),y=n(65),b=n(11).ClassNames,E=n(53),T=n(54),x=n(59),w=n(160).propTypes.keypadElementPropType,C=n(67),P=C.mapObject,S=C.mapObjectFromArray,k={"\\a":"","\\b":"\b","\\t":"\t","\\n":"\n","\\v":"\v","\\f":"\f","\\r":"\r","\\\\":"\\"},N=/\\a|\\b|\\t|\\n|\\v|\\f|\\r|\\\\/g,M=/\S/,_=function(){};"undefined"!=typeof KA&&"en-pt"===KA.language&&(window.PerseusTranslationComponents=[],KA.jipt_dom_insert_checks||(KA.jipt_dom_insert_checks=[]),KA.jipt_dom_insert_checks.push(function(e,t,n){var r=o(t),i=r.data("perseus-component-index"),s=r.data("perseus-paragraph-index");if(t&&"undefined"!=typeof i){var a=window.PerseusTranslationComponents[i];return!!a&&(e=e.replace(N,function(e){return k[e]}),a.replaceJiptContent(e,s),!1)}return e}));var O=["content","problemNum","widgets"],A=function(e,t){return null===e||null===t?e===t:l.every(e,function(e,n){return l.isEqual(e,t[n])})},I=function(e,t,n,r){e?(this._tracked=!1,this.trackApi=e,this.widgetType=t,this.widgetID=n,this.setting=r,this.track=this._track.bind(this)):this.track=this._noop};I.prototype._track=function(e){this._tracked&&!this.setting||(this._tracked=!0,this.trackApi(i({type:this.widgetType,id:this.widgetID},e)))},I.prototype._noop=function(){};var R=s.createClass({displayName:"Renderer",propTypes:{alwaysUpdate:s.PropTypes.bool,highlightedWidgets:s.PropTypes.arrayOf(s.PropTypes.any),ignoreMissingWidgets:s.PropTypes.bool,images:s.PropTypes.any,interWidgets:s.PropTypes.func,keypadElement:w,onInteractWithWidget:s.PropTypes.func,onRender:s.PropTypes.func,problemNum:s.PropTypes.number,questionCompleted:s.PropTypes.bool,reviewMode:s.PropTypes.bool},mixins:[y],getDefaultProps:function(){return{content:"",widgets:{},images:{},ignoreMissingWidgets:!0,highlightedWidgets:[],questionCompleted:!1,onRender:_,onInteractWithWidget:function(){},interWidgets:function(){return null},alwaysUpdate:!1,reviewMode:!1}},getInitialState:function(){return l.extend({jiptContent:null},this._getInitialWidgetState())},componentDidMount:function(){this.handleRender({}),this._currentFocus=null,this._rootNode=a.findDOMNode(this),this._isMounted=!0},componentWillReceiveProps:function(e){l.isEqual(l.pick(this.props,O),l.pick(e,O))||this.setState(this._getInitialWidgetState(e))},shouldComponentUpdate:function(e,t){if(this.props.alwaysUpdate)return!0;var n=!l.isEqual(this.state,t),r=!l.isEqual(this.props,e);return r||n},componentWillUpdate:function(e,t){var n=this.shouldRenderJiptPlaceholder(this.props,this.state),r=this.shouldRenderJiptPlaceholder(e,t),i=this.getContent(this.props,this.state),o=this.getContent(e,t),s=this.props.highlightedWidgets,a=e.highlightedWidgets;this.reuseMarkdown=!n&&!r&&i===o&&s===a},componentDidUpdate:function(e,t){var n=this;this.handleRender(e),l.each(this.widgetIds,function(e){var t=n.refs["container:"+e];t.replaceWidgetProps(n.getWidgetProps(e))})},componentWillUnmount:function(){null!=this.translationIndex&&(window.PerseusTranslationComponents[this.translationIndex]=null),this._isMounted=!1},_getInitialWidgetState:function(e){e=e||this.props;var t=this._getAllWidgetsInfo(e);return{widgetInfo:t,widgetProps:this._getAllWidgetsStartProps(t,e)}},_getAllWidgetsInfo:function(e){return e=e||this.props,P(e.widgets,function(e,t){if(!e.type||!e.alignment){var n={};e.type||(n.type=t.split(" ")[0]),e.alignment||(n.alignment="default"),e=l.extend({},e,n)}return g.upgradeWidgetInfoToLatestVersion(e)})},_getAllWidgetsStartProps:function(e,t){return P(e,function(e){return g.getRendererPropsForWidgetInfo(e,t.problemNum)})},_getDefaultWidgetInfo:function(e){var t=v.rTypeFromWidgetId.exec(e);return null==t?{}:{type:t[1],graded:!0,options:{}}},_getWidgetInfo:function(e){return this.state.widgetInfo[e]||this._getDefaultWidgetInfo(e)},renderWidget:function(e,t,n){var r=this.state.widgetInfo[t];if(r&&"full-width"===r.alignment&&(n.foundFullWidth=!0),r||this.props.ignoreMissingWidgets){var i=r&&r.type||e,o=l.contains(this.props.highlightedWidgets,t);return s.createElement(m,{ref:"container:"+t,key:"container:"+t,type:i,initialProps:this.getWidgetProps(t),shouldHighlight:o})}return null},getWidgetProps:function(e){var t=this,n=this.getApiOptions(),r=this.state.widgetProps[e]||{},o=null,s=this.state.widgetInfo[e];this.props.reviewMode&&s&&(o=s.options),this._interactionTrackers||(this._interactionTrackers={});var a=this._interactionTrackers[e];return a||(a=this._interactionTrackers[e]=new I(n.trackInteraction,s&&s.type,e,g.getTracking(s&&s.type))),i({},r,{ref:e,widgetId:e,alignment:s&&s.alignment,static:s&&s.static,problemNum:this.props.problemNum,apiOptions:this.getApiOptions(this.props),keypadElement:this.props.keypadElement,questionCompleted:this.props.questionCompleted,onFocus:l.partial(this._onWidgetFocus,e),onBlur:l.partial(this._onWidgetBlur,e),interWidgets:this.interWidgets,reviewModeRubric:o,onChange:function(n,r){t._setWidgetProps(e,n,r)},trackInteraction:a.track})},getSerializedState:function(){var e=this;return P(this.state.widgetProps,function(t,n){var r=e.getWidgetInstance(n);return r&&r.getSerializedState?r.getSerializedState():t})},restoreSerializedState:function(e,t){var n=this,r=l.keys(e),i=l.keys(this.state.widgetProps);if(r.length!==i.length||l.intersection(r,i).length!==r.length)return void console.error("Refusing to restore bad serialized state:",e,"Current props:",this.state.widgetProps);var o=1,s=function(){--o,t&&0===o&&t()};this.setState({widgetProps:P(e,function(e,t){var r=n.getWidgetInstance(t);if(r&&r.restoreSerializedState){++o;var i=r.restoreSerializedState(e,s);return l.extend({},n.state.widgetProps[t],i)}return e})},s)},interWidgets:function(e){var t,n=this;if("string"==typeof e)if(e.indexOf(" ")!==-1){var r=e;t=function(e,t){return e===r}}else{var i=e;t=function(e,t){return t.type===i}}else t=e;var o=this.widgetIds.filter(function(e){var r=n._getWidgetInfo(e),i=n.getWidgetInstance(e);return t(e,r,i)}).map(this.getWidgetInstance),s=this.props.interWidgets(e,o);return s?s:o},getWidgetInstance:function(e){var t=this.refs["container:"+e];return t?t.getWidget():null},_onWidgetFocus:function(e,t){if(void 0===t)t=[];else if(!l.isArray(t))throw new Error("widget props.onFocus focusPath must be an Array, but was"+JSON.stringify(t));this._setCurrentFocus([e].concat(t))},_onWidgetBlur:function(e,t){var n=this,r=this._currentFocus,i=[e].concat(t);l.isEqual(i,r)&&l.defer(function(){l.isEqual(n._currentFocus,r)&&n._setCurrentFocus(null)})},getContent:function(e,t){return t.jiptContent||e.content},shouldRenderJiptPlaceholder:function(e,t){return"undefined"!=typeof KA&&"en-pt"===KA.language&&null==t.jiptContent&&e.content.indexOf("crwdns")!==-1},replaceJiptContent:function(e,t){if(null==t)this.setState({jiptContent:e});else{/\S\n\s*\n\S/.test(e)&&(e="$\\large{\\red{\\text{Please translate each paragraph to a single paragraph.}}}$"),/^\s*$/.test(e)&&(e="$\\large{\\red{\\text{Translated paragraph is currently empty}}}$");var n=this.getContent(this.props,this.state),r=c.parseToArray(n);r[t]=e,this.setState({jiptContent:c.joinFromArray(r)})}},outputMarkdown:function(e,t){if(l.isArray(e)){for(var n=t.key,r=[],i=!1,o=0;o<e.length;o++){t.key=o,t.paragraphIndex=o;var a=this.outputMarkdown(e[o],t),c="string"==typeof a;c&&i?r[r.length-1]+=a:r.push(a),i=c}return t.key=n,r}this._foundTextNodes=!1,t.foundFullWidth=!1;var u,d=this.outputNested(e,t);return u=null!=this.translationIndex?null:p({"perseus-paragraph-centered":!this._foundTextNodes,"perseus-paragraph-full-width":t.foundFullWidth&&1===e.content.length}),s.createElement(h,{key:t.key,className:u,translationIndex:this.translationIndex,paragraphIndex:t.paragraphIndex},d)},outputNested:function(e,t){if(l.isArray(e)){for(var n=t.key,r=[],i=!1,o=0;o<e.length;o++){t.key=o;var s=this.outputNested(e[o],t),a="string"==typeof s;a&&i?r[r.length-1]+=s:r.push(s),i=a}return t.key=n,r}return this.outputNode(e,this.outputNested,t)},outputNode:function(e,t,n){var o=this,a=this.getApiOptions();if("widget"===e.type){var p=a.widgetPlaceholder;return p?p:(this._foundTextNodes=!0,l.contains(this.widgetIds,e.id)?s.createElement("span",{key:n.key,className:"renderer-widget-error"},"Widget [[","☃"," ",e.id,"]] already exists."):(this.widgetIds.push(e.id),this.renderWidget(e.widgetType,e.id,n)))}if("blockMath"!==e.type){if("math"===e.type){var c=e.content.replace(/\{align[*]?\}/g,"{aligned}");return s.createElement("span",{key:n.key,style:{whiteSpace:"nowrap"}},s.createElement("span",null),s.createElement(f,{onRender:this.props.onRender},c),s.createElement("span",null))}if("image"===e.type){var h=a.imagePlaceholder;if(h)return h;var m=l.has(this.props.images,e.target)?this.props.images[e.target]:null,g=!n.inTable;return s.createElement(d,i({key:n.key,src:u.sanitizeUrl(e.target),alt:e.alt,title:e.title,responsive:g,onUpdate:this.props.onRender,zoomToFullSizeOnMobile:a.isMobile},m))}if("columns"===e.type)return this._isTwoColumn=!0,u.ruleOutput(e,t,n);if("text"===e.type)return M.test(e.content)&&(this._foundTextNodes=!0),e.content;if("table"===e.type||"titledTable"===e.type){n.inTable=!0;var v=u.ruleOutput(e,t,n);n.inTable=!1;var y=16,b={marginLeft:-y,marginRight:-y},w={paddingLeft:0,paddingRight:0},C=void 0;return C=a.isMobile?s.createElement("div",{style:i({},w,{overflowX:"auto"})},s.createElement(E,{animateHeight:!0},v)):s.createElement("div",{style:w},v),s.createElement("div",{style:b},C)}return u.ruleOutput(e,t,n)}var P=function(){var t=new T,r=function(e){if(o.props.onRender&&o.props.onRender(e),a.isMobile&&e){var n=e.querySelector(".katex"),r=e.querySelector('script[type="math/tex"]')||e.querySelector(".MathJax");if(n)t.resolve();else{if(!r)throw new Error("No math present in Renderer");t.resolve()}}},l=s.createElement(f,{onRender:r},x(e.content)),p={overflowX:"auto",overflowY:"hidden",paddingTop:10,paddingBottom:10,marginTop:-10,marginBottom:-10};if(a.isMobile){var c=16,u={marginLeft:-c,marginRight:-c},h={paddingLeft:c,paddingRight:c},d=function(e,t){var n=e.querySelector(".katex-html")||e.querySelector(".MathJax"),r={width:n.offsetWidth,height:n.offsetHeight};return{width:Math.max(t.width,r.width),height:Math.max(t.height,r.height)}};return{v:s.createElement("div",{key:n.key,className:"perseus-block-math",style:u},s.createElement("div",{className:"perseus-block-math-inner",style:i({},p,h)},s.createElement(E,{readyToMeasureDeferred:t,computeChildBounds:d},l)))}}return{v:s.createElement("div",{key:n.key,className:"perseus-block-math"},s.createElement("div",{className:"perseus-block-math-inner",style:p},l))}}();if("object"===("undefined"==typeof P?"undefined":r(P)))return P.v},handleRender:function(e){var t=this.props.onRender,n=e.onRender;if(t!==_||n!==_){var r=o(a.findDOMNode(this)).find("img");n!==_&&r.off("load",n),t!==_&&r.on("load",t)}t()},_setCurrentFocus:function(e){var t=this.getApiOptions();if(!A(e,this._currentFocus)){var n=this._currentFocus;n&&this.blurPath(n),this._currentFocus=e,null!=t.onFocusChange&&t.onFocusChange(this._currentFocus,n)}},focus:function(){for(var e,t,n=0;n<this.widgetIds.length;n++){var r=this.widgetIds[n],i=this.getWidgetInstance(r),o=i&&i.focus&&i.focus();if(o){e=r,t=o;break}}if(e){var s;return s=l.isObject(t)?[e].concat(t.path||[]):[e],this._setCurrentFocus(s),!0}},getDOMNodeForPath:function(e){var t=l.first(e),n=l.rest(e),r=this.getWidgetInstance(t),i=r.getDOMNodeForPath;return i?i(n):0===n.length?a.findDOMNode(r):void 0},getGrammarTypeForPath:function(e){var t=l.first(e),n=l.rest(e),r=this.getWidgetInstance(t);return r.getGrammarTypeForPath(n)},getInputPaths:function(){var e=this,t=[];return l.each(this.widgetIds,function(n){var r=e.getWidgetInstance(n);if(r.getInputPaths){var i=r.getInputPaths();l.each(i,function(e){var r=[n].concat(e);t.push(r)})}}),t},focusPath:function(e){if(!l.isEqual(this._currentFocus,e)){this._currentFocus&&this.blurPath(this._currentFocus);var t=l.first(e),n=l.rest(e),r=this.getWidgetInstance(t).focusInputPath;r&&r(n)}},blurPath:function(e){if(l.isEqual(this._currentFocus,e)){var t=l.first(e),n=l.rest(e),r=this.getWidgetInstance(t);if(r){var i=this.getWidgetInstance(t).blurInputPath;i&&i(n)}}},blur:function(){this._currentFocus&&this.blurPath(this._currentFocus)},serialize:function(){var e={};return l.each(this.state.widgetInfo,function(t,n){var r=this.getWidgetInstance(n),i=r.serialize();l.isEmpty(i)||(e[n]=i)},this),e},emptyWidgets:function(){var e=this;return l.filter(this.widgetIds,function(t){var n=e._getWidgetInfo(t),r=e.getWidgetInstance(t).simpleValidate(n.options,null);return v.scoreIsEmpty(r)})},_setWidgetProps:function(e,t,n){var r=this,i=l.clone(this.state.widgetProps);i[e]=l.extend({},i[e],t),this.setState({widgetProps:i},function(){var t=n&&n();r.props.onInteractWithWidget(e),t!==!1&&r._setCurrentFocus([e])})},setInputValue:function(e,t,n){var r=l.first(e),i=l.rest(e),o=this.getWidgetInstance(r);o.setInputValue(i,t,n)},getUserInput:function(){var e=this;return l.map(this.widgetIds,function(t){return e.getWidgetInstance(t).getUserInput()})},getWidgetIds:function(){return this.widgetIds},getAllWidgetIds:function(){var e=this;return l.map(this.getWidgetIds(),function(t){var n="group";return t.substring(0,n.length)===n&&e.getWidgetInstance(t)?{id:t,children:e.getWidgetInstance(t).getRenderer().getAllWidgetIds()}:{id:t,children:[]}})},getUserInputForWidgets:function(){var e=this;return S(this.widgetIds,function(t){return e.getWidgetInstance(t).getUserInput()})},scoreWidgets:function(){var e=this,t=this.state.widgetInfo,n=this.getApiOptions().onInputError||function(){},r=l.filter(this.widgetIds,function(e){var n=t[e];return null==n.graded||n.graded}),i={};return l.each(r,function(r){var o=t[r],s=e.getWidgetInstance(r);s&&(i[r]=s.simpleValidate(o.options,n))}),i},score:function(){return l.reduce(this.scoreWidgets(),v.combineScores,v.noScore)},guessAndScore:function(){var e=this.getUserInput(),t=this.score();return[e,t]},examples:function e(){var t=this.widgetIds,e=l.compact(l.map(t,function(e){return e.examples?e.examples():null}));if(!e.length)return null;var n=l.all(e,function(t){return l.isEqual(e[0],t)});return n?e[0]:null},render:function(){var e,t=this.getApiOptions();if(this.reuseMarkdown)return this.lastRenderedMarkdown;var n=this.getContent(this.props,this.state);if(this.widgetIds=[],this.shouldRenderJiptPlaceholder(this.props,this.state)&&(this.translationIndex||(this.translationIndex=window.PerseusTranslationComponents.push(this)-1),!t.isArticle))return s.createElement("div",{"data-perseus-component-index":this.translationIndex},n);this._isTwoColumn=!1;var r=u.parse(n,{isJipt:null!=this.translationIndex}),i=this.outputMarkdown(r,{baseElements:t.baseElements}),o=p((e={},e[b.RENDERER]=!0,e[b.RESPONSIVE_RENDERER]=!0,e[b.TWO_COLUMN_RENDERER]=this._isTwoColumn,e));return this.lastRenderedMarkdown=s.createElement("div",{className:o},i),this.lastRenderedMarkdown}});e.exports=R},function(e,t,n){"use strict";var r,i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},o=n(34),s=n(82),a=s.StyleSheet,l=s.css,p=n(83),c=window.i18n,u=n(28),h=n(11).Options,d=n(76),f=n(78),m=f.baseUnitPx,g=f.hintBorderWidth,v=f.kaGreen,y=f.gray97,b=o.createClass({displayName:"HintRenderer",propTypes:{apiOptions:h.propTypes,className:o.PropTypes.string,hint:o.PropTypes.any,lastHint:o.PropTypes.bool,lastRendered:o.PropTypes.bool,pos:o.PropTypes.number,totalHints:o.PropTypes.number},getSerializedState:function(){return this.refs.renderer.getSerializedState()},restoreSerializedState:function(e,t){this.refs.renderer.restoreSerializedState(e,t)},render:function(){var e=this.props,t=e.apiOptions,n=e.className,r=e.hint,s=e.lastHint,a=e.lastRendered,h=e.pos,d=e.totalHints,f=t.isMobile,m=p(!f&&"perseus-hint-renderer",f&&l(E.newHint),f&&a&&l(E.lastRenderedNewHint),s&&"last-hint",a&&"last-rendered",n),g=i({},t,{customKeypad:!1,staticRender:!1});return o.createElement("div",{className:m,tabIndex:"-1"},!t.isMobile&&o.createElement("span",{className:"perseus-sr-only"},c._("Hint #%(pos)s",{pos:h+1})),!t.isMobile&&d&&null!=h&&o.createElement("span",{className:"perseus-hint-label",style:{display:"block"}},h+1+" / "+d),o.createElement(u,{ref:"renderer",widgets:r.widgets,content:r.content||"",images:r.images,apiOptions:g}))}}),E=a.create({newHint:(r={marginBottom:1.5*m,borderLeftColor:y,borderLeftStyle:"solid",borderLeftWidth:g},r[d.lgOrSmaller]={paddingLeft:m},r[d.smOrSmaller]={paddingLeft:0},r[":focus"]={outline:"none"},r),lastRenderedNewHint:{marginBottom:0,borderLeftColor:v}});e.exports=b},function(e,t,n){"use strict";var r=n(34),i=n(57),o=n(55),s=n(56),a=function(e,t,n){var r=!1,o=i(t).reduce(function(e,t){return r||!e.hasOwnProperty(t)?(r=!0,n):e[t]},e);return o},l=function(e){var t=e.question||{},n=t.widgets||{};return i.keys(n)},p=function(e,t){var n=e.hints||[],r=n[t]||{},o=r.widgets||{};return i.keys(o)},c=function(e){return i.isObject(e)&&!("content"in e)},u=r.createClass({displayName:"RevisionDiff",propTypes:{beforeItem:r.PropTypes.object.isRequired,afterItem:r.PropTypes.object.isRequired},render:function(){var e=this.props.beforeItem,t=this.props.afterItem,n=0;i(e).has("hints")&&i(t).has("hints")&&(n=Math.max(e.hints.length,t.hints.length));var u=i.union(l(e),l(t)),h=[{title:"Question",path:["question"]},{title:"Question extras",path:["answerArea"]}].concat(i.times(n,function(e){return{title:"Hint #"+(e+1),path:["hints",e]}})).concat(i.map(u,function(e){return{title:e,path:["question","widgets",e,"options"]}})).concat(i.flatten(i.times(n,function(n){var r=i.union(p(e,n),p(t,n));return i.map(r,function(e){return{title:"Hint #"+(n+1)+"."+e,path:["hints",n,"widgets",e,"options"]}})}))),d=[];return i(h).each(function(n,i){var l,p=n.path,u=a(e,p,""),h=a(t,p,"");c(u)||c(h)?(c(u)||(u={}),c(h)||(h={}),l=r.createElement(s,{key:n.title,title:n.title,before:u,after:h})):l=r.createElement(o,{key:n.title,title:n.title,before:u.content,after:h.content}),d.push(r.createElement("div",{key:i},r.createElement("div",{className:"diff-header"},n.title),r.createElement("div",{className:"diff-header"},n.title),r.createElement("div",{className:"diff-body perseus-clearfix"},l)))}),r.createElement("div",null,d)}});e.exports=u},function(e,t,n){"use strict";var r=n(34),i=n(81),o=n(61),s=o.devices,a=n(41),l=a.iconDesktop,p=a.iconMobilePhone,c=a.iconTablet,u=n(42),h=r.createClass({displayName:"ViewportResizer",propTypes:{deviceType:r.PropTypes.string.isRequired,onViewportSizeChanged:r.PropTypes.func.isRequired},handleChange:function(e){this.props.onViewportSizeChanged(e)},render:function(){var e=r.createElement("span",null,r.createElement(u,p)," ","Phone"),t=r.createElement("span",null,r.createElement(u,c)," ","Tablet"),n=r.createElement("span",null,r.createElement(u,l)," ","Desktop");return r.createElement("span",{className:"viewport-resizer"},"Viewport:"," ",r.createElement(i,{value:this.props.deviceType,allowEmpty:!1,buttons:[{value:s.PHONE,content:e},{value:s.TABLET,content:t},{value:s.DESKTOP,content:n}],onChange:this.handleChange}))}});e.exports=h},function(e,t,n){"use strict";var r=n(34),i=n(61),o=i.devices,s={phone:{width:375,height:667,framedWidth:375},tablet:{width:512,height:946,framedWidth:512},desktop:{width:688,height:600,framedWidth:688}},a=r.createClass({displayName:"DeviceFramer",propTypes:{children:r.PropTypes.element.isRequired,deviceType:r.PropTypes.oneOf([o.PHONE,o.TABLET,o.DESKTOP]).isRequired,nochrome:r.PropTypes.bool},render:function(){var e=this.props.deviceType;if(this.props.nochrome)return r.createElement("div",null,r.createElement("div",{key:"screen",style:{border:"1px solid black",width:s[e].framedWidth}},r.createElement("div",null,this.props.children)));var t=s[e].framedWidth/s[e].width,n=r.createElement("div",{style:{zoom:t,height:"100%"}},this.props.children),i={backgroundColor:"white",color:"black",textAlign:"left"},a=r.createElement("div",{key:"screen",className:"screen",style:i},n);return e===o.DESKTOP?r.createElement("div",{className:"marvel-device macbook",style:{marginLeft:45,marginRight:45}},a,r.createElement("div",{className:"top-bar"}),r.createElement("div",{className:"camera"}),r.createElement("div",{className:"bottom-bar"})):e===o.TABLET?r.createElement("div",{className:"marvel-device ipad silver"},a,r.createElement("div",{className:"camera"}),r.createElement("div",{className:"home"})):e===o.PHONE?r.createElement("div",{className:"marvel-device iphone6 silver"},a,r.createElement("div",{className:"top-bar"}),r.createElement("div",{className:"sleep"}),r.createElement("div",{className:"volume"}),r.createElement("div",{className:"camera"}),r.createElement("div",{className:"sensor"}),r.createElement("div",{className:"speaker"}),r.createElement("div",{className:"home"}),r.createElement("div",{className:"bottom-bar"})):void 0}});e.exports=a},,function(e,t,n){e.exports=window.React},function(e,t,n){e.exports=window.React.__internalReactDOM},function(e,t,n){"use strict";var r=n(23),i=n(49);e.exports=r.concat(i)},function(e,t,n){"use strict";var r=n(34),i=n(84),o=[],s=r.createClass({displayName:"StubTagEditor",propTypes:{value:r.PropTypes.arrayOf(r.PropTypes.string),onChange:r.PropTypes.func.isRequired},getDefaultProps:function(){return{value:o}},render:function(){return r.createElement("div",null,r.createElement("div",{style:{fontSize:14}},"Tags:"),r.createElement(i,{options:this.props.value||o,layout:"vertical",onChange:this.props.onChange}))}});e.exports=s},function(e,t,n){"use strict";function r(e){return P.test(e)}function i(e){return/\.(jpg|jpeg)$/i.test(e)}function o(e){var t="http:"===window.location.protocol?"http:":"https:";return e.replace(P,t)}function s(e){return o(e)+".svg"}function a(e){return o(e)+"-data.json"}function l(){return"undefined"!=typeof KA&&"en"!==KA.language}function p(){return"undefined"!=typeof KA&&"en-pt"===KA.language}function c(e){if("undefined"!=typeof KA){var t=o(e).split(_),n=t[0],r=t[1];return n+"/"+KA.language+"/"+r+"-data.json"}return a(e)}function u(e){var t=e.match(S);return t&&t[1]}function h(){return f.DOM.span({style:{background:"url(/images/throbber.gif) no-repeat",backgroundPosition:"center",width:"100%",height:"100%",position:"absolute",minWidth:"20px"}})}var d=n(83),f=n(34),m=n(63),g=n(57),v=n(85),y=n(86),b=n(87),E=n(12),T=n(88),x=700,w={},C=function(e,t){function n(){document.head.removeChild(r),delete window[t.callbackName]}t=g.extend({},{callbackName:"callback",success:m.noop,error:m.noop},t);var r=document.createElement("script");
r.setAttribute("async",""),r.setAttribute("src",e),window[t.callbackName]=function(){n(),t.success.apply(null,arguments)},r.addEventListener("error",function(){n(),t.error.apply(null,arguments)}),document.head.appendChild(r)},P=/^web\+graphie\:/,S=/\/([^/]+)$/,k={"\\a":"","\\b":"\b","\\t":"\t","\\n":"\n","\\v":"\v","\\f":"\f","\\r":"\r","\\\\":"\\"},N=/\\a|\\b|\\t|\\n|\\v|\\f|\\r|\\\\/g,M=[];p()&&(KA.jipt_dom_insert_checks||(KA.jipt_dom_insert_checks=[]),KA.jipt_dom_insert_checks.push(function(e,t,n){var r=m(t).data("jipt-label-index");if(t&&"undefined"!=typeof r){var i=M[r],o=i.label,s=i.useMath;if(o.text(""),e=e.replace(N,function(e){return k[e]}),s){var a=/^\$(.*)\$$/,l=e.match(a),p=l?l[1]:"\\color{red}{\\text{Invalid Math}}";o.processMath(p,!0)}else o.processText(e);return!1}return e}));var _=/\/(?=[^/]+$)/,O=f.createClass({displayName:"SvgImage",propTypes:{allowFullBleed:f.PropTypes.bool,alt:f.PropTypes.string,constrainHeight:f.PropTypes.bool,extraGraphie:f.PropTypes.shape({box:f.PropTypes.array.isRequired,range:f.PropTypes.array.isRequired,labels:f.PropTypes.array.isRequired}),height:f.PropTypes.number,onUpdate:f.PropTypes.func,preloader:f.PropTypes.func,responsive:f.PropTypes.bool,scale:f.PropTypes.number,src:f.PropTypes.string.isRequired,title:f.PropTypes.string,trackInteraction:f.PropTypes.func,width:f.PropTypes.number,zoomToFullSizeOnMobile:f.PropTypes.bool},statics:{getRealImageUrl:function(e){return r(e)?s(e):e}},getDefaultProps:function(){return{constrainHeight:!1,onUpdate:function(){},responsive:!0,src:"",scale:1,zoomToFullSizeOnMobile:!1}},getInitialState:function(){return{imageLoaded:!1,imageDimensions:null,dataLoaded:!1,labels:[],range:[[0,0],[0,0]]}},componentDidMount:function(){r(this.props.src)&&this.loadResources()},componentWillReceiveProps:function(e){this.props.src!==e.src&&this.setState({imageLoaded:!1,dataLoaded:!1})},shouldComponentUpdate:function(e,t){if(!g.isEqual(this.props,e))return!0;if(!r(e.src))return!1;var n=this.isLoadedInState(this.state),i=this.isLoadedInState(t);return n!==i},componentDidUpdate:function(){r(this.props.src)&&!this.isLoadedInState(this.state)&&this.loadResources()},isLoadedInState:function(e){return e.imageLoaded&&e.dataLoaded},loadResources:function(){var e=this,t=u(this.props.src);if(w[t])w[t].loaded?this.onDataLoaded(w[t].data):w[t].dataCallbacks.push(this.onDataLoaded);else{var n={loaded:!1,dataCallbacks:[this.onDataLoaded],data:null};w[t]=n;var r=function(e,r){C(e,{callbackName:"svgData"+t,success:function(e){n.data=e,n.loaded=!0,g.each(n.dataCallbacks,function(e){e(n.data)})},error:r})};l()?r(c(this.props.src),function(t,n,i){r(a(e.props.src),function(t,n,r){console.error("Data load failed:",a(e.props.src),r)})}):r(a(this.props.src),function(t,n,r){console.error("Data load failed:",a(e.props.src),r)})}},onDataLoaded:function(e){this.isMounted()&&e.labels&&e.range&&this.setState({dataLoaded:!0,labels:e.labels,range:e.range})},sizeProvided:function(){return null!=this.props.width&&null!=this.props.height},onImageLoad:function(){var e=this;this.sizeProvided()?this.setState({imageLoaded:!0}):E.getImageSize(this.props.src,function(t,n){e.isMounted()&&e.setState({imageLoaded:!0,imageDimensions:[t,n]})})},setupGraphie:function(e,t){var n=this;g.map(t.labels,function(t){if(p()){var r=e.label(t.coordinates,t.content,t.alignment,!1);m(r).data("jipt-label-index",M.length),M.push({label:r,useMath:t.typesetAsMath})}else if(t.coordinates){var i=e.label(t.coordinates,t.content,t.alignment,t.typesetAsMath,{"font-size":100*n.props.scale+"%"}),o=i.position(),s=n.props.height*n.props.scale,a=n.props.width*n.props.scale;i.css({top:o.top/s*100+"%",left:o.left/a*100+"%"}),g.each(t.style,function(e,t){i.css(t,e)})}})},_handleZoomClick:function(e){var t=m(e.target);(t.width()<this.props.width||this.props.zoomToFullSizeOnMobile)&&T.ZoomService.handleZoomClick(e,this.props.zoomToFullSizeOnMobile),this.props.trackInteraction&&this.props.trackInteraction()},render:function(){var e,t=this.props.src,n={alt:this.props.alt,title:this.props.title},o=this.props.width&&this.props.width*this.props.scale,a=this.props.height&&this.props.height*this.props.scale,l={width:o,height:a},p=this.props.responsive&&!(!o||!a);this.props.extraGraphie&&this.props.extraGraphie.labels.length&&(e=f.createElement(y,{box:this.props.extraGraphie.box,range:this.props.extraGraphie.range,options:{labels:this.props.extraGraphie.labels},responsive:!0,addMouseLayer:!1,setup:this.setupGraphie}));var c=void 0===this.props.preloader?h:this.props.preloader,u=c?function(){return c(l)}:null;if(!r(t)){if(p){var m=d({zoomable:o>x,"svg-image":!0});return n.onClick=this._handleZoomClick,f.createElement(v,{className:m,width:o,height:a,constrainHeight:this.props.constrainHeight,allowFullBleed:this.props.allowFullBleed&&i(t)},f.createElement(b,{src:t,imgProps:n,preloader:u,onUpdate:this.props.onUpdate}),e)}return n.style=l,f.createElement(b,{src:t,preloader:u,imgProps:n,onUpdate:this.props.onUpdate})}var E,T=s(t);if(this.isLoadedInState(this.state)){var w;w=this.sizeProvided()?[o,a]:[this.state.imageDimensions[0]*this.props.scale,this.state.imageDimensions[1]*this.props.scale];var C=[40*this.props.scale,40*this.props.scale];E=f.createElement(y,{ref:"graphie",box:w,scale:C,range:this.state.range,options:g.pick(this.state,"labels"),responsive:p,addMouseLayer:!1,setup:this.setupGraphie})}return p?f.createElement(v,{className:"svg-image",width:o,height:a,constrainHeight:this.props.constrainHeight},f.createElement(b,{src:T,onLoad:this.onImageLoad,onUpdate:this.props.onUpdate,preloader:u,imgProps:n}),E,e):(n.style=l,f.createElement("div",{className:"unresponsive-svg-image",style:l},f.createElement(b,{src:T,onLoad:this.onImageLoad,onUpdate:this.props.onUpdate,preloader:u,imgProps:n}),E))}});e.exports=O},function(e,t,n){"use strict";var r=n(57),i=n(67),o=n(22),s=function(){},a=function(e,t,n){var r=function r(i,s){var a,p=o.upgradeWidgetInfoToLatestVersion(i),c=o.getVersion(p.type);a=c&&p.version.major===c.major?o.traverseChildWidgets(p,function(t){return l(t,e,r,n)}):p;var u=t(a,s);return void 0!==u?u:a};return r},l=function(e,t,n,o){var s=e.content;if(null!=e.content){var a=t(e.content);void 0!==a&&(s=a)}var l=i.mapObject(e.widgets||{},function(e,t){return null==e||null==e.type?e:n(e,t)}),p=r.extend({},e,{content:s,widgets:l}),c=o(p);return void 0!==c?c:p},p=function(e,t,n,r){return t=t||s,n=n||s,r=r||s,l(e,t,a(t,n,r),r)};e.exports={traverseRendererDeep:p}},function(e,t,n){"use strict";var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},i=n(57),o=n(191),s=n(80),a=n(12),l=function(e,t,n){var r=e.length,i=0;if(n){if(t.inline)return null;for(;i<r&&" "===e[i];)i++}if(!(i<r&&"$"===e[i]))return null;i++;for(var o=i,s=0;i<r;){var a=e[i];if("\\"===a)i++;else{if(s<=0&&"$"===a){var l=i+1;if(n){var p=/^(?: *\n){2,}/.exec(e.slice(l));l=p?l+p[0].length:null}return l?[e.substring(0,l),e.substring(o,i)]:null}if("{"===a)s++;else if("}"===a)s--;else if("\n"===a&&"\n"===e[i-1])return null}i++}return null},p=function(e,t){return l(e,t,!1)},c=function(e,t){return l(e,t,!0)},u=new RegExp("^\\|\\| +(.*) +\\|\\| *\\n("+o.defaultRules.nptable.match.regex.source.substring(1)+")"),h=o.blockRegex(/^(crwdns.*)\n\s*\n/),d=i.extend({},o.defaultRules,{columns:{order:-2,match:o.blockRegex(/^([\s\S]*\n\n)={5,}\n\n([\s\S]*)/),parse:function(e,t,n){return{col1:t(e[1],n),col2:t(e[2],n)}},react:function(e,t,n){return React.createElement("div",{className:"perseus-two-columns",key:n.key},React.createElement("div",{className:"perseus-column"},React.createElement("div",{className:"perseus-column-content"},t(e.col1,n))),React.createElement("div",{className:"perseus-column"},React.createElement("div",{className:"sat-header-grafting-area"}),React.createElement("div",{className:"perseus-column-content"},t(e.col2,n),React.createElement("div",{className:"sat-grafting-area"}))))}},crowdinId:{order:-1,match:function(e,t,n){return t.isJipt?h(e,t,n):null},parse:function(e,t,n){return{id:e[1]}},react:function(e,t,n){return e.id}},titledTable:{order:o.defaultRules.nptable.order-.5,match:o.blockRegex(u),parse:function(e,t,n){var r=o.parseInline(t,e[1],n),s=i.rest(e,2),a=o.defaultRules.nptable.parse(s,t,n);return{title:r,table:a}},react:function(e,t,n){var r=e.table?o.defaultRules.table.react(e.table,t,n):"//invalid table//";return React.createElement("div",{className:"perseus-titled-table",key:n.key},React.createElement("div",{className:"perseus-table-title"},t(e.title,n)),r)}},widget:{order:o.defaultRules.link.order-.75,match:o.inlineRegex(a.rWidgetRule),parse:function(e,t,n){return{id:e[1],widgetType:e[2]}},react:function(e,t,n){return React.createElement("em",{key:n.key},"[Widget: ",e.id,"]")}},blockMath:{order:o.defaultRules.codeBlock.order+.5,match:c,parse:function(e,t,n){return{content:e[1]}},react:function(e,t,n){return React.createElement(s,{key:n.key},e.content)}},math:{order:o.defaultRules.link.order-.25,match:p,parse:function(e,t,n){return{content:e[1]}},react:function(e,t,n){return React.createElement(s,{key:n.key},e.content)}},unescapedDollar:{order:o.defaultRules.link.order-.24,match:o.inlineRegex(/^(?!\\)\$/),parse:function(e,t,n){return{}},react:function(e,t,n){return"$"}},fence:i.extend({},o.defaultRules.fence,{parse:function(e,t,n){var r=o.defaultRules.fence.parse(e,t,n);return"alt"===r.lang?{type:"codeBlock",lang:"alt",content:t(r.content+"\n\n",n)}:r}}),link:i.extend({},o.defaultRules.link,{react:function(e,t,n){var i=o.defaultRules.link.react(e,t,n),s=i.props.href;"undefined"!=typeof KA&&KA.isZeroRated&&(s=s.match(/https?:\/\/[^\/]*khanacademy.org/)?s.replace("khanacademy.org","zero.khanacademy.org"):"/zero/external-link?url="+encodeURIComponent(s));var a=r({},i.props,{href:s});return n.baseElements&&n.baseElements.Link?n.baseElements.Link(a):React.cloneElement(i,a)}}),codeBlock:i.extend({},o.defaultRules.codeBlock,{react:function(e,t,n){return"alt"===e.lang?React.createElement("div",{key:n.key,className:"perseus-markdown-alt perseus-sr-only"},t(e.content,n)):o.defaultRules.codeBlock.react(e,t,n)}}),list:i.extend({},o.defaultRules.list,{match:function(e,t,n){return t.isJipt?null:o.defaultRules.list.match(e,t,n)}})}),f=o.parserFor(d),m=function(e,t){var n=e+"\n\n";return f(n,i.extend({inline:!1},t))},g=function(e,t){return f(e,i.extend({inline:!0},t))},v=function e(t,n){i.isArray(t)?i.each(t,function(t){return e(t,n)}):i.isObject(t)&&(n(t),"table"===t.type?(e(t.header,n),e(t.cells,n)):"list"===t.type?e(t.items,n):"titledTable"===t.type?e(t.table,n):"columns"===t.type?(e(t.col1,n),e(t.col2,n)):i.isArray(t.content)&&e(t.content,n))},y=function e(t){if(i.isArray(t))return i.flatten(i.map(t,e));if(t.content&&i.isString(t.content))return t.type.toLowerCase().indexOf("code")!==-1?["",t.content,""]:[t.content.replace(/\s+/g," ")];var n=i.chain(t).values().flatten().filter(function(e){return null!=e&&i.has(e,"type")}).value();if(n.length){var r=e(n);if("paragraph"===t.type&&r.length){r[0]=r[0].replace(/^\s+/,"");var o=r.length-1;r[o]=r[o].replace(/\s+$/,"")}return r}return[]},b=function(e){var t=m(e),n=y(t).join("");return n.length};e.exports={characterCount:b,traverseContent:v,parse:m,parseInline:g,reactFor:o.reactFor,ruleOutput:o.ruleOutput(d,"react"),basicOutput:o.reactFor(o.ruleOutput(d,"react")),sanitizeUrl:o.sanitizeUrl}},function(e,t,n){"use strict";e.exports={iconCheck:{path:"M10,3.8C10,4,9.9,4.2,9.8,4.3L5.1,8.9L4.3,9.8C4.2,9.9,4,10,3.8,10\n        S3.5,9.9,3.4,9.8L2.5,8.9L0.2,6.6C0.1,6.5,0,6.3,0,6.2s0.1-0.3,0.2-0.4\n        l0.9-0.9c0.1-0.1,0.3-0.2,0.4-0.2s0.3,0.1,0.4,0.2l1.9,1.9l4.2-4.2c0.1\n        -0.1,0.3-0.2,0.4-0.2c0.2,0,0.3,0.1,0.4,0.2l0.9,0.9C9.9,3.5,10,3.7,\n        10,3.8z",width:10,height:10},iconChevronDown:{path:"M99.669 13.048q0 3.36-2.352 5.712l-41.664 41.664q-2.408 2.408-5.88 2.408t-5.712-2.408l-41.664-41.664q-2.408-2.24-2.408-5.712t2.408-5.88l4.76-4.816q2.52-2.352 5.88-2.352t5.656 2.352l31.136 31.136 31.08-31.136q2.352-2.352 5.712-2.352t5.88 2.352l4.816 4.816q2.352 2.52 2.352 5.88z",width:100,height:63.034},iconChevronRight:{path:"M62.808 49.728q0 3.36-2.352 5.88l-41.72 41.664q-2.352 2.408-5.768 2.408t-5.768-2.408l-4.872-4.76q-2.352-2.52-2.352-5.88t2.352-5.712l31.08-31.136-31.08-31.024q-2.352-2.52-2.352-5.88t2.352-5.712l4.872-4.76q2.296-2.408 5.768-2.408t5.768 2.408l41.72 41.664q2.352 2.296 2.352 5.656z",width:63.034,height:100},iconCircle:{path:"M100.035 50.046q.057 13.623-6.669 25.137t-18.24 18.183-25.08 6.669-25.137-6.726q-11.514-6.726-18.183-18.183-6.726-11.571-6.726-25.137t6.726-25.08 18.24-18.24 25.08-6.669q13.566 0 25.08 6.726 11.514 6.669 18.24 18.183t6.669 25.137z",width:100,height:100},iconCircleArrowDown:{path:"M50.046 83.676q1.767 0 2.907-1.14l29.526-29.526q1.197-1.197 1.197-2.907t-1.197-2.964l-5.928-5.928q-1.197-1.14-2.964-1.14t-2.907 1.14l-12.312 12.312l0-32.661q0-1.71-1.254-2.964t-2.907-1.254l-8.322 0q-1.71 0-2.964 1.254t-1.254 2.964l0 32.661l-12.312-12.312q-1.197-1.254-2.907-1.254t-2.907 1.254l-5.928 5.928q-1.197 1.197-1.197 2.964t1.197 2.907l29.469 29.526q1.197 1.14 2.964 1.14zm49.989-33.63q.057 13.623-6.669 25.137t-18.24 18.183-25.08 6.669-25.137-6.726q-11.514-6.726-18.183-18.183-6.726-11.571-6.726-25.137t6.726-25.08 18.24-18.24 25.08-6.669q13.566 0 25.08 6.726 11.514 6.669 18.24 18.183t6.669 25.137z",width:100,height:100},iconCircleArrowUp:{path:"M54.207 83.391q1.653 0 2.907-1.254t1.254-2.907l0-32.718l12.312 12.312q1.254 1.254 2.964 1.254t2.907-1.254l5.928-5.928q1.197-1.197 1.14-2.964 0-1.767-1.14-2.907l-29.526-29.526q-1.197-1.14-2.907-1.14t-2.964 1.14l-29.469 29.526q-1.197 1.254-1.197 2.964t1.197 2.907l5.928 5.928q1.197 1.197 2.907 1.197t2.907-1.197l12.312-12.312l0 32.718q0 1.653 1.254 2.907t2.964 1.254l8.322 0zm45.828-33.345q.057 13.623-6.669 25.137t-18.24 18.183-25.08 6.669-25.137-6.726q-11.514-6.726-18.183-18.183-6.726-11.571-6.726-25.137t6.726-25.08 18.24-18.24 25.08-6.669q13.566 0 25.08 6.726 11.514 6.669 18.24 18.183t6.669 25.137z",width:100,height:100},iconCircleThin:{path:"M50.046 8.322q-8.493 0-16.188 3.306-15.561 6.669-22.173 22.23-3.363 7.695-3.363 16.188t3.306 16.188 8.949 13.281q5.586 5.586 13.281 8.892t16.188 3.306 16.188-3.306 13.281-8.892 8.892-13.281 3.306-16.188-3.306-16.188-8.892-13.281-13.281-8.949q-7.695-3.306-16.188-3.306zm0 91.713q-13.623 0-25.137-6.726t-18.183-18.183q-6.726-11.571-6.726-25.137t6.726-25.08 18.24-18.24 25.08-6.669q13.566 0 25.08 6.726 11.514 6.669 18.24 18.183t6.726 25.137-6.726 25.137-18.24 18.126q-11.514 6.726-25.08 6.726z",width:100,height:99.944},iconDesktop:{path:"M94.208 52.119l0-43.746q0-.69-.506-1.15t-1.196-.506l-84.088 0q-.69 0-1.196.506t-.506 1.15l0 43.746q0 .69.506 1.196t1.196.506l84.088 0q.69 0 1.196-.506t.506-1.196zm6.716-43.746l0 57.224q0 3.45-2.484 5.934t-5.934 2.484l-28.566 0q0 3.128 2.53 7.774.828 1.61.828 2.622t-1.012 2.07q-1.012 1.012-2.346.966l-26.91 0q-1.38 0-2.392-1.012t-1.012-2.024q0-1.058 1.656-4.14t1.748-6.256l-28.612 0q-3.45 0-5.934-2.484t-2.484-5.934l0-57.224q0-3.45 2.484-5.934t5.934-2.438l84.088 0q3.45 0 5.98 2.438 2.438 2.484 2.438 5.934z",width:100,height:86.648},iconExclamationSign:{path:"M58.368 81.225l0-12.369q0-.912-.57-1.539t-1.425-.627l-12.54 0q-.855-.057-1.482.627t-.684 1.539l0 12.369q-.057.855.627 1.482t1.539.684l12.54 0q.855 0 1.425-.627t.57-1.539zm1.026-62.871q0-1.596-2.223-1.71l-14.307 0q-2.109 0-2.223 1.71l1.14 40.47q0 .627.627 1.14t1.539.456l12.084 0q.912-.057 1.539-.513t.684-1.083zm-9.348-18.354q13.566 0 25.08 6.726 11.514 6.669 18.24 18.183t6.726 25.137-6.726 25.137-18.24 18.183-25.08 6.669-25.137-6.726q-11.514-6.726-18.183-18.183-6.726-11.571-6.726-25.137t6.726-25.08 18.24-18.24 25.08-6.669z",width:100,height:99.944},iconGear:{path:"M1152 896q0-106-75-181t-181-75-181 75-75 181 75 181 181 75 181-75 75-181zm512-109v222q0 12-8 23t-20 13l-185 28q-19 54-39 91 35 50 107 138 10 12 10 25t-9 23q-27 37-99 108t-94 71q-12 0-26-9l-138-108q-44 23-91 38-16 136-29 186-7 28-36 28h-222q-14 0-24.5-8.5t-11.5-21.5l-28-184q-49-16-90-37l-141 107q-10 9-25 9-14 0-25-11-126-114-165-168-7-10-7-23 0-12 8-23 15-21 51-66.5t54-70.5q-27-50-41-99l-183-27q-13-2-21-12.5t-8-23.5v-222q0-12 8-23t19-13l186-28q14-46 39-92-40-57-107-138-10-12-10-24 0-10 9-23 26-36 98.5-107.5t94.5-71.5q13 0 26 10l138 107q44-23 91-38 16-136 29-186 7-28 36-28h222q14 0 24.5 8.5t11.5 21.5l28 184q49 16 90 37l142-107q9-9 24-9 13 0 25 10 129 119 165 170 7 8 7 22 0 12-8 23-15 21-51 66.5t-54 70.5q26 50 41 98l183 28q13 2 21 12.5t8 23.5z",width:1792,height:1792},iconMobilePhone:{path:"M36.04 89.557q0-2.584-1.836-4.42t-4.42-1.836-4.352 1.836q-1.836 1.836-1.836 4.42t1.836 4.352 4.42 1.836q2.652-.068 4.42-1.836t1.768-4.352zm16.184-12.444l0-54.74q0-1.088-.748-1.768t-1.768-.68l-39.78 0q-1.088 0-1.768.748t-.68 1.7l0 54.74q0 1.02.748 1.768t1.7.68l39.78 0q1.02-.068 1.768-.748t.748-1.7zm-14.892-65.892q0-1.224-1.292-1.292l-12.444 0q-1.224.068-1.224 1.292t1.224 1.224l12.444 0q1.292 0 1.292-1.224zm22.372-1.292l0 79.628q0 3.944-2.992 6.936t-7.004 2.992l-39.78 0q-4.012 0-7.004-2.924-2.924-2.924-2.924-7.004l0-79.628q0-4.012 2.924-6.936t7.004-2.992l39.78 0q4.012-.068 7.004 2.924t2.992 7.004z",width:60.013,height:100},iconOk:{path:"M37.964 76.048q-2.576 0-4.368-1.792l-31.864-31.864q-1.792-1.792-1.792-4.368t1.792-4.368l8.736-8.68q1.792-1.792 4.368-1.792t4.312 1.792l18.816 18.872 42-42.056q1.792-1.792 4.368-1.792t4.312 1.792l8.736 8.736q1.792 1.792 1.792 4.368t-1.792 4.312l-55.048 55.048q-1.792 1.792-4.368 1.792z",width:100,height:76.637},iconPlus:{path:"M99.758 43.09l0 13.578q0 2.852-1.984 4.836t-4.836 1.984l-29.45 0l0 29.45q0 2.852-1.984 4.836t-4.836 1.984l-13.578 0q-2.852 0-4.836-1.984t-1.984-4.836l0-29.45l-29.45 0q-2.852 0-4.836-1.984t-1.984-4.836l0-13.578q0-2.852 1.984-4.836t4.836-1.984l29.45 0l0-29.45q0-2.852 1.984-4.836t4.836-1.984l13.578 0q2.852 0 4.836 1.984t1.984 4.836l0 29.45l29.45 0q2.852 0 4.836 1.984t1.984 4.836z",width:100,height:100},iconRemove:{path:"M100.464 80.808q0 3.404-2.368 5.772l-11.47 11.544q-2.368 2.368-5.772 2.368t-5.698-2.368l-24.864-24.864-24.864 24.864q-2.368 2.368-5.772 2.368t-5.772-2.368l-11.47-11.544q-2.368-2.368-2.368-5.772t2.368-5.698l24.864-24.864-24.864-24.864q-2.368-2.368-2.368-5.772t2.368-5.772l11.47-11.47q2.368-2.368 5.772-2.368t5.772 2.368l24.864 24.864 24.864-24.864q2.294-2.368 5.698-2.368t5.772 2.368l11.47 11.47q2.368 2.368 2.368 5.772t-2.368 5.772l-24.864 24.864 24.864 24.864q2.368 2.294 2.368 5.698z",width:100,height:100},iconStar:{path:"M15.1052249,9.55978547 L22.0028147,9.55978545 C23.6568673,9.55978545 23.9349557,10.3753626 22.6181351,11.3858845 L16.9943688,15.7015366 L19.2518801,22.8294455 C19.7526645,24.4106317 19.0984455,24.8825885 17.769353,23.8673293 L12.0490577,19.4977438 L6.5116497,23.8422153 C5.20921411,24.8640642 4.53299569,24.4067544 5.00266927,22.8160582 L7.10332364,15.7015366 L1.42794544,11.3634306 C0.110226041,10.3562014 0.383967283,9.54239221 2.0409646,9.54574013 L8.9924676,9.55978547 L11.1485117,2.72669438 C11.6458693,1.15043244 12.4548928,1.15900049 12.9494787,2.72669438 L15.1052249,9.55978547 Z",width:24,height:24},iconTryAgain:{path:"M3.74890556,17.9799506 C2.19251241,16.1970909 1.10103636,13.4971457 1.13090903,11.1491783 C1.17160478,7.95052637 4.01704076,0.865059407 11.7028044,0.865059407 C19.388568,0.865059407 22.3026521,7.35203035 22.3026521,11.5879453 C22.3026521,15.8238603 19.386629,20.5574509 13.6832464,21.7131548 L13.6757539,17.3722171 C17.0812986,16.2190517 18.331158,14.1944123 18.3311578,11.5879451 C18.3311574,8.16554692 15.6664205,5.03476549 11.7028048,5.20494205 C7.73918903,5.37511861 5.59244567,8.66930079 5.59244567,11.1491783 C5.59244567,12.9090077 6.11128139,14.1753512 6.93640437,15.3053215 L8.14052356,14.2949456 C8.98559348,13.5858477 9.6994861,13.9070448 9.73489556,15.0076413 L9.91284941,20.5388014 C9.94832683,21.6415103 9.09967118,22.3514475 8.02194403,22.1254594 L2.60571602,20.9897332 C1.5259204,20.7633114 1.34338662,19.9984207 2.18070755,19.295825 L3.74890556,17.9799506 Z",width:23,height:23},iconTablet:{path:"M45.322 90.706q0-1.86-1.302-3.224-1.364-1.364-3.224-1.364t-3.224 1.364-1.302 3.224q0 1.86 1.364 3.224 1.302 1.364 3.162 1.302 1.86.062 3.224-1.302t1.302-3.224zm27.218-11.346l0-68.014q0-.93-.682-1.612t-1.55-.682l-58.962 0q-.93 0-1.612.682t-.682 1.612l0 68.014q0 .93.682 1.612t1.612.62l58.962 0q.992-.062 1.612-.682t.62-1.55zm9.114-68.014l0 77.066q0 4.65-3.348 7.998t-7.998 3.348l-58.962 0q-4.65 0-7.998-3.348t-3.348-7.998l0-77.066q0-4.65 3.348-7.998t7.998-3.348l58.962 0q4.65 0 7.998 3.348t3.348 7.998z",width:81.852,height:100},iconTrash:{path:"M31.293 37.506q2.052 0 2.052 2.109l0 37.506q0 1.995-2.052 2.109l-4.218 0q-.912-.057-1.482-.627t-.57-1.482l0-37.506q0-2.109 2.052-2.109l4.218 0zm18.753 2.109l0 37.506q0 .912-.57 1.482t-1.539.627l-4.161 0q-1.995 0-2.109-2.109l0-37.506q.057-.912.627-1.482t1.482-.627l4.161 0q.969.057 1.539.627t.57 1.482zm14.592-2.109q2.052 0 2.052 2.109l0 37.506q0 1.995-2.052 2.109l-4.161 0q-.969-.057-1.539-.627t-.57-1.482l0-37.506q0-2.109 2.109-2.109l4.161 0zm10.431 49.248l0-61.731l-58.368 0l0 61.731q.057 2.679.969 3.819t1.083 1.14l54.207 0q.171 0 1.14-1.083t.969-3.876zm-43.776-70.11l29.184 0l-3.135-7.581q-.456-.57-1.14-.741l-20.634 0q-.627.114-1.083.741zm-31.293 2.109q0-1.995 2.109-2.109l20.121 0l4.56-10.83q.969-2.394 3.477-4.104 2.565-1.71 5.187-1.71l20.805 0q2.622 0 5.187 1.71t3.477 4.104l4.56 10.83l20.178 0q.912.057 1.482.627t.57 1.482l0 4.161q0 1.995-2.052 2.109l-6.27 0l0 61.731q0 5.415-3.078 9.348t-7.353 3.933l-54.207 0q-4.275 0-7.353-3.819t-3.078-9.177l0-62.016l-6.213 0q-.969 0-1.539-.57t-.57-1.539l0-4.161z",width:91.681,height:100},iconUndo:{path:"M10,6.6C10,7.2,9.8,8,9.3,9.1c0,0,0,0.1-0.1,0.1S9.2,9.3,9.2,9.4c0,0,0,0.1-0.1,0.1C9,9.6,9,9.6,8.9,9.6 c-0.1,0-0.1,0-0.1-0.1c0,0,0-0.1,0-0.1c0,0,0-0.1,0-0.1s0-0.1,0-0.1c0-0.3,0-0.5,0-0.7c0-0.4,0-0.7-0.1-1C8.6,7.1,8.5,6.9,8.4,6.7S8.2,6.3,8,6.1C7.8,5.9,7.6,5.8,7.4,5.7S6.9,5.5,6.7,5.5S6.1,5.4,5.8,5.4c-0.3,0-0.6,0-1,0H3.6v1.4c0,0.1,0,0.2-0.1,0.3C3.4,7.1,3.3,7.1,3.2,7.1C3.1,7.1,3,7.1,3,7L0.1,4.1C0,4.1,0,4,0,3.9s0-0.2,0.1-0.3L3,0.8C3,0.7,3.1,0.7,3.2,0.7c0.1,0,0.2,0,0.3,0.1C3.5,0.9,3.6,0.9,3.6,1v1.4h1.2c2.6,0,4.3,0.7,4.9,2.2C9.9,5.2,10,5.8,10,6.6z",width:10,height:10}}},function(e,t,n){"use strict";var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},i=n(34),o=function(e){var t=e.path,n=e.width,o=e.height,s=e.style,a=void 0===s?{}:s;return i.createElement("svg",{style:r({verticalAlign:"middle"},a),width:n/o+"em",height:"1em",viewBox:"0 0 "+n+" "+o},i.createElement("path",{d:t,fill:"currentColor"}))};o.propTypes={path:i.PropTypes.string.isRequired,height:i.PropTypes.number.isRequired,width:i.PropTypes.number.isRequired,style:i.PropTypes.object},e.exports=o},function(e,t,n){"use strict";var r=n(34),i=n(57),o=r.createClass({displayName:"JsonEditor",getInitialState:function(){return{currentValue:JSON.stringify(this.props.value,null,4),valid:!0}},componentWillReceiveProps:function(e){var t=!this.state.valid||!i.isEqual(e.value,JSON.parse(this.state.currentValue));t&&this.setState(this.getInitialState())},render:function(){var e="perseus-json-editor "+(this.state.valid?"valid":"invalid");return r.createElement("textarea",{className:e,value:this.state.currentValue,onChange:this.handleChange,onKeyDown:this.handleKeyDown,onBlur:this.handleBlur})},handleKeyDown:function(e){if("Tab"===e.key){var t=e.target.selectionStart,n=e.target.value,r=n.substring(0,t),i=n.substring(t,n.length);e.target.value=r+"    "+i,e.target.selectionStart=r.length+4,e.target.selectionEnd=r.length+4,e.preventDefault(),this.handleChange(e)}},handleChange:function(e){var t=e.target.value;try{var n=JSON.parse(t);i.isString(n)&&(n=JSON.parse(n)),this.setState({currentValue:t,valid:!0},function(){this.props.onChange(n)})}catch(e){this.setState({currentValue:t,valid:!1})}},handleBlur:function(e){var t=e.target.value;try{var n=JSON.parse(t);i.isString(n)&&(n=JSON.parse(n)),this.setState({currentValue:JSON.stringify(n,null,4),valid:!0},function(){this.props.onChange(n)})}catch(e){this.setState({currentValue:JSON.stringify(this.props.value,null,4),valid:!0})}}});e.exports=o},function(e,t,n){"use strict";var r=n(34),i=n(82),o=i.css,s=i.StyleSheet,a=r.createClass({displayName:"KatexErrorView",propTypes:{errorList:r.PropTypes.arrayOf(r.PropTypes.shape({math:r.PropTypes.string.isRequired,message:r.PropTypes.string.isRequired})).isRequired},getInitialState:function(){return{showErrors:!1}},handleToggleKatexErrors:function(e){this.setState({showErrors:!this.state.showErrors})},render:function(){var e=this.props.errorList,t=this.state.showErrors,n=t?"icon-chevron-down":"icon-chevron-right";return r.createElement("div",{className:o(l.errorContainer)},r.createElement("div",{className:o(l.title),onClick:this.handleToggleKatexErrors},r.createElement("i",{className:n,style:{fontSize:14}}),"  KaTeX Errors (",e.length,")"),t&&r.createElement("div",{className:o(l.errorExplanation)},"These errors will cause your LaTeX to load really slowly for the student. Please fix them if you can. If you can’t because KaTeX doesn’t support the feature you need, please message Cam."),t&&e.map(function(e,t){return r.createElement("div",{className:o(l.error),key:t},r.createElement("div",{style:{color:"red"}},e.math),r.createElement("div",null,e.message))}))}}),l=s.create({title:{backgroundColor:"#eee",fontSize:"1.25em",padding:"4px 10px"},errorContainer:{border:"1px solid #ddd",borderTop:"none"},errorExplanation:{padding:"4px 10px",backgroundColor:"pink"},error:{padding:"4px 10px"}});e.exports=a},function(e,t,n){"use strict";var r=n(34),i=n(57),o=r.createClass({displayName:"PropCheckBox",propTypes:{labelAlignment:r.PropTypes.oneOf(["left","right"])},DEFAULT_PROPS:{label:null,onChange:null,labelAlignment:"left"},getDefaultProps:function(){return this.DEFAULT_PROPS},propName:function e(){var e=i.find(i.keys(this.props),function(e){return!i.has(this.DEFAULT_PROPS,e)},this);if(!e)throw new Error("Attempted to create a PropCheckBox with no prop!");return e},_labelAlignLeft:function(){return"left"===this.props.labelAlignment},render:function(){var e=this.propName();return r.createElement("label",null,this._labelAlignLeft()&&this.props.label,r.createElement("input",{type:"checkbox",checked:this.props[e],onChange:this.toggle}),!this._labelAlignLeft()&&this.props.label)},toggle:function(){var e=this.propName(),t={};t[e]=!this.props[e],this.props.onChange(t)}});e.exports=o},function(e,t,n){"use strict";var r=n(34),i=n(57),o=n(17),s=n(89),a=n(32),l=n(11).Options,p=n(41),c=p.iconCircleArrowDown,u=p.iconCircleArrowUp,h=p.iconPlus,d=p.iconTrash,f=n(42),m=n(19),g=r.createClass({displayName:"HintEditor",propTypes:{apiOptions:l.propTypes,imageUploader:r.PropTypes.func},getDefaultProps:function(){return{content:"",replace:!1}},handleChange:function(e){this.props.onChange({replace:e.target.checked})},render:function(){return r.createElement("div",{className:"perseus-hint-editor perseus-editor-left-cell"},r.createElement("div",{className:"pod-title"},"Hint"),r.createElement(o,{ref:"editor",apiOptions:this.props.apiOptions,widgets:this.props.widgets,content:this.props.content,images:this.props.images,replace:this.props.replace,placeholder:"Type your hint here...",imageUploader:this.props.imageUploader,onChange:this.props.onChange}),r.createElement("div",{className:"hint-controls-container clearfix"},r.createElement("span",{className:"reorder-hints"},r.createElement("button",{type:"button",className:this.props.isLast?"hidden":"",onClick:i.partial(this.props.onMove,1)},r.createElement(f,c))," ",r.createElement("button",{type:"button",className:this.props.isFirst?"hidden":"",onClick:i.partial(this.props.onMove,-1)},r.createElement(f,u))," ",this.props.isLast&&r.createElement(s,null,r.createElement("p",null,"The last hint is automatically bolded."))),r.createElement("input",{type:"checkbox",checked:this.props.replace,onChange:this.handleChange}),"Replace previous hint",r.createElement("button",{type:"button",className:"remove-hint simple-button orange",onClick:this.props.onRemove},r.createElement(f,d),"Remove this hint"," ")))},focus:function(){this.refs.editor.focus()},getSaveWarnings:function(){return this.refs.editor.getSaveWarnings()},serialize:function(e){return this.refs.editor.serialize(e)}}),v=r.createClass({displayName:"CombinedHintEditor",propTypes:{apiOptions:l.propTypes,deviceType:r.PropTypes.string.isRequired,frameSource:r.PropTypes.string.isRequired,imageUploader:r.PropTypes.func},updatePreview:function(){var e=this.props.isLast&&!/\*\*/.test(this.props.hint.content);this.refs.frame.sendNewData({type:"hint",data:{hint:this.props.hint,bold:e,pos:this.props.pos,apiOptions:this.props.apiOptions}})},componentDidMount:function(){this.updatePreview()},componentDidUpdate:function(){this.updatePreview()},render:function(){var e="phone"===this.props.deviceType||"tablet"===this.props.deviceType;return r.createElement("div",{className:"perseus-combined-hint-editor perseus-editor-row"},r.createElement(g,{ref:"editor",isFirst:this.props.isFirst,isLast:this.props.isLast,widgets:this.props.hint.widgets,content:this.props.hint.content,images:this.props.hint.images,replace:this.props.hint.replace,imageUploader:this.props.imageUploader,onChange:this.props.onChange,onRemove:this.props.onRemove,onMove:this.props.onMove,apiOptions:this.props.apiOptions}),r.createElement("div",{className:"perseus-editor-right-cell"},r.createElement(a,{deviceType:this.props.deviceType,nochrome:!0},r.createElement(m,{ref:"frame",content:this.props.frameSource,datasetKey:"mobile",datasetValue:e,seamless:!0}))))},getSaveWarnings:function(){return this.refs.editor.getSaveWarnings()},serialize:function(e){return this.refs.editor.serialize(e)},focus:function(){this.refs.editor.focus()}}),y=r.createClass({displayName:"CombinedHintsEditor",propTypes:{apiOptions:l.propTypes,deviceType:r.PropTypes.string.isRequired,frameSource:r.PropTypes.string.isRequired,imageUploader:r.PropTypes.func},getDefaultProps:function(){return{onChange:function(){},hints:[]}},render:function(){var e=this.props.hints,t=i.map(e,function(t,n){return r.createElement(v,{ref:"hintEditor"+n,key:"hintEditor"+n,isFirst:0===n,isLast:n+1===e.length,hint:t,pos:n,imageUploader:this.props.imageUploader,onChange:this.handleHintChange.bind(this,n),onRemove:this.handleHintRemove.bind(this,n),onMove:this.handleHintMove.bind(this,n),deviceType:this.props.deviceType,apiOptions:this.props.apiOptions,frameSource:this.props.frameSource})},this);return r.createElement("div",{className:"perseus-hints-editor perseus-editor-table"},t,r.createElement("div",{className:"perseus-editor-row"},r.createElement("div",{className:"add-hint-container perseus-editor-left-cell"},r.createElement("button",{type:"button",className:"add-hint simple-button orange",onClick:this.addHint},r.createElement(f,h)," ","Add a hint"))))},handleHintChange:function(e,t,n,r){var o=i(this.props.hints).clone();o[e]=i.extend({},this.serializeHint(e,{keepDeletedWidgets:!0}),t),this.props.onChange({hints:o},n,r)},handleHintRemove:function(e){var t=i(this.props.hints).clone();t.splice(e,1),this.props.onChange({hints:t})},handleHintMove:function(e,t){var n=this,r=i(this.props.hints).clone(),o=r.splice(e,1)[0];r.splice(e+t,0,o),this.props.onChange({hints:r},function(){n.refs["hintEditor"+(e+t)].focus()})},addHint:function(){var e=this,t=i(this.props.hints).clone().concat([{content:""}]);this.props.onChange({hints:t},function(){var n=t.length-1;e.refs["hintEditor"+n].focus()})},getSaveWarnings:function(){var e=this;return i.chain(this.props.hints).map(function(t,n){return i.map(e.refs["hintEditor"+n].getSaveWarnings(),function(e){return"Hint "+(n+1)+": "+e})}).flatten(!0).value()},serialize:function(e){var t=this;return this.props.hints.map(function(n,r){return t.serializeHint(r,e)})},serializeHint:function(e,t){return this.refs["hintEditor"+e].serialize(t)}});e.exports=y},function(e,t,n){"use strict";var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){
var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},i=n(34),o=n(57),s=n(11).Options,a=n(17),l=n(90),p=n(32),c=n(48).itemDataVersion,u=n(19),h=i.createClass({displayName:"ItemEditor",propTypes:{apiOptions:s.propTypes,deviceType:i.PropTypes.string,frameSource:i.PropTypes.string.isRequired,gradeMessage:i.PropTypes.string,imageUploader:i.PropTypes.func,wasAnswered:i.PropTypes.bool},getDefaultProps:function(){return{onChange:function(){},question:{},answerArea:{}}},updateProps:function(e,t,n){var r=o(this.props).pick("question","answerArea");this.props.onChange(o(r).extend(e),t,n)},render:function(){var e="phone"===this.props.deviceType||"tablet"===this.props.deviceType;return i.createElement("div",{className:"perseus-editor-table"},i.createElement("div",{className:"perseus-editor-row perseus-question-container"},i.createElement("div",{className:"perseus-editor-left-cell"},i.createElement("div",{className:"pod-title"},"Question"),i.createElement(a,r({ref:"questionEditor",placeholder:"Type your question here...",className:"perseus-question-editor",imageUploader:this.props.imageUploader,onChange:this.handleEditorChange,apiOptions:this.props.apiOptions,showWordCount:!0},this.props.question))),i.createElement("div",{className:"perseus-editor-right-cell"},i.createElement("div",{id:"problemarea"},i.createElement(p,{deviceType:this.props.deviceType,nochrome:!0},i.createElement(u,{ref:"frame",key:this.props.deviceType,content:this.props.frameSource,datasetKey:"mobile",datasetValue:e,seamless:!0})),i.createElement("div",{id:"hintsarea",className:"hintsarea",style:{display:"none"}})))),i.createElement("div",{className:"perseus-editor-row perseus-answer-container"},i.createElement("div",{className:"perseus-editor-left-cell"},i.createElement("div",{className:"pod-title"},"Question extras"),i.createElement(l,r({ref:"itemExtrasEditor",onChange:this.handleItemExtrasChange},this.props.answerArea))),i.createElement("div",{className:"perseus-editor-right-cell"},i.createElement("div",{id:"answer_area"}))))},triggerPreviewUpdate:function(e){this.refs.frame.sendNewData(e)},handleEditorChange:function(e,t,n){var r=o.extend({},this.props.question,e);this.updateProps({question:r},t,n)},handleItemExtrasChange:function(e,t,n){var r=o.extend({},this.props.answerArea,e);this.updateProps({answerArea:r},t,n)},getSaveWarnings:function(){return this.refs.questionEditor.getSaveWarnings()},serialize:function(e){return{question:this.refs.questionEditor.serialize(e),answerArea:this.refs.itemExtrasEditor.serialize(e),itemDataVersion:c}},focus:function(){this.questionEditor.focus()}});e.exports=h},function(e,t,n){e.exports={apiVersion:{major:8,minor:1},itemDataVersion:{major:0,minor:1}}},function(e,t,n){"use strict";e.exports=[[n(91),n(92)],[n(93),n(94)],[n(95),n(96)],[n(97),n(98)],[n(99),n(100)],[n(101),n(102)],[n(103),n(104)],[n(105),n(106)],[n(107),n(108)],[n(109),n(110)],[n(111),n(112)],[n(113),n(114)],[n(115),n(116)],[n(117),n(118)],[n(119),n(120)],[n(121),n(122)],[n(123),n(124)],[n(125),n(126)],[n(127),n(128)],[n(129),n(130)],[n(131),n(132)],[n(133),n(134)],[n(135),n(136)],[n(137),n(138)],[n(139),n(140)],[n(141),n(142)],[n(143),n(144)],[n(145),n(146)],[n(147),n(148)],[n(149),n(150)],[n(151),n(152)],[n(153),n(154)],[n(155),n(156)],[n(157),n(158)]]},function(e,t,n){"use strict";var r=n(191),i={paragraph:{match:r.defaultRules.paragraph.match,order:1,parse:function(e,t,n){return e[1]}}},o=r.parserFor(i),s=function(e){var t=e.replace(/^\n\s*\n/,"")+"\n\n";return o(t,{inline:!1})},a=function(e){return e.join("\n\n")};e.exports={parseToArray:s,joinFromArray:a}},function(e,t,n){"use strict";var r=n(34),i=r.createClass({displayName:"QuestionParagraph",render:function(){var e=this.props.className?"paragraph "+this.props.className:"paragraph";return r.createElement("div",{className:e,"data-perseus-component-index":this.props.translationIndex,"data-perseus-paragraph-index":this.props.paragraphIndex},this.props.children)}});e.exports=i},function(e,t,n){"use strict";var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},i=n(83),o=n(34),s=n(35),a=n(22),l=n(159),p=l.containerSizeClass,c=l.getClassFromWidth,u=o.createClass({displayName:"WidgetContainer",propTypes:{shouldHighlight:o.PropTypes.bool.isRequired,type:o.PropTypes.string,initialProps:o.PropTypes.object.isRequired},getInitialState:function(){return{sizeClass:p.MEDIUM,widgetProps:this.props.initialProps}},componentDidMount:function(){if(this.state.widgetProps.apiOptions.isMobile){var e=s.findDOMNode(this).offsetWidth;this.setState({sizeClass:c(e)})}},render:function(){var e=i({"perseus-widget-container":!0,"widget-highlight":this.props.shouldHighlight,"widget-nohighlight":!this.props.shouldHighlight}),t=this.props.type,n=a.getWidget(t);if(null==n)return o.createElement("div",{className:e});var s=this.state.widgetProps.alignment;"default"===s&&(s=a.getDefaultAlignment(t)),e+=" widget-"+s;var l=this.state.widgetProps.apiOptions,p=this.state.widgetProps.static||l.readOnly,c={position:"relative",overflow:"visible"},u={width:"100%",height:"100%",position:"absolute",top:0,left:0,zIndex:100};return o.createElement("div",{className:e,style:p?c:{}},o.createElement(n,r({},this.state.widgetProps,{containerSizeClass:this.state.sizeClass,ref:"widget"})),p&&o.createElement("div",{style:u}))},componentWillReceiveProps:function(e){if(this.props.type!==e.type)throw new Error("WidgetContainer can't change widget type; set a different key instead to recreate the container.")},shouldComponentUpdate:function(e,t){return this.props.shouldHighlight!==e.shouldHighlight||this.props.type!==e.type||this.state.widgetProps!==t.widgetProps||this.state.sizeClass!==t.sizeClass},getWidget:function(){return this.refs.widget},replaceWidgetProps:function(e){this.setState({widgetProps:e})}});e.exports=u},function(e,t,n){"use strict";var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},i=n(34),o=n(35),s=n(54),a=i.createClass({displayName:"Zoomable",propTypes:{animateHeight:i.PropTypes.bool,children:i.PropTypes.element.isRequired,computeChildBounds:i.PropTypes.func,readyToMeasureDeferred:i.PropTypes.shape({then:i.PropTypes.func.isRequired,reject:i.PropTypes.func.isRequired}).isRequired},getDefaultProps:function(){var e=new s;return e.resolve(),{animateHeight:!1,readyToMeasureDeferred:e,computeChildBounds:function(e){var t=e.firstElementChild;return{width:t.offsetWidth+1,height:t.offsetHeight+1}}}},getInitialState:function(){return{visible:!1,marginBottomPx:0,zoomed:!0}},componentDidMount:function(){var e=this;this._node=o.findDOMNode(this),this.props.readyToMeasureDeferred.then(function(){e.isMounted()&&(e.scaleChildToFit(!1),window.MutationObserver&&(e._observer=new MutationObserver(function(t){if(e.isMounted())for(var n=t,r=Array.isArray(n),i=0,n=r?n:n[Symbol.iterator]();;){var o;if(r){if(i>=n.length)break;o=n[i++]}else{if(i=n.next(),i.done)break;o=i.value}var s=o;if(s.target!==e._node){e.scaleChildToFit(e.state.zoomed);break}}}),e._observer.observe(e._node,{childList:!0,subtree:!0,attributes:!0})),window.addEventListener("resize",e.reset))})},componentWillUnmount:function(){window.removeEventListener("resize",this.reset),this._observer&&this._observer.disconnect()},reset:function(){var e=this;this.isMounted()&&this.state.visible&&(this._originalWidth=null,this.setState({visible:!1,compactHeight:null,expandedHeight:null,zoomed:!0},function(){e.scaleChildToFit(!1)}))},stopPropagationIfZoomed:function(e){this.state.zoomed||e.stopPropagation()},scaleChildToFit:function(e){var t=this,n={width:this._node.offsetWidth,height:this._node.offsetHeight},r=this.props.computeChildBounds(this._node,n),i=r.width,o=r.height;if(i>n.width){var s=n.width/i;this.setState({scale:s,zoomed:e,compactHeight:Math.ceil(s*o),expandedHeight:o}),setTimeout(function(){t.isMounted()&&t.setState({visible:!0})})}else this.setState({visible:!0})},handleClickIfZoomed:function(e){this.state.zoomed||(e.stopPropagation(),this.handleClick())},handleClick:function(){this.setState({zoomed:!this.state.zoomed})},render:function(){var e=this.state,t=e.visible,n=e.scale,o=e.compactHeight,s=e.expandedHeight,a=e.zoomed,l=this.props.animateHeight,p=l?"opacity transform height":"opacity transform",c=t?{transitionProperty:p,WebkitTransitionProperty:p,msTransitionProperty:p,transitionDuration:"0.3s",WebkitTransitionDuration:"0.3s",msTransitionDuration:"0.3s",transitionTimingFunction:"ease-out",WebkitTransitionTimingfunction:"ease-out",msTransitionTmingFunction:"ease-out"}:{},u=t?"":" translate(0, 8px)",h=a?"scale(1, 1) "+u:"scale("+n+", "+n+") "+u,d=r({display:"block",width:"100%",height:a?s:o,transform:h,WebkitTransform:h,msTransform:h,transformOrigin:"0 0",WebkitTransformOrigin:"0 0",msTransformOrigin:"0 0",opacity:t?1:0,WebkitTapHighlightColor:"transparent"},c);return i.createElement("span",{onClick:this.handleClick,onClickCapture:this.handleClickIfZoomed,onTouchCancelCapture:this.stopPropagationIfZoomed,onTouchEndCapture:this.stopPropagationIfZoomed,onTouchStartCapture:this.stopPropagationIfZoomed,style:d},this.props.children)}});e.exports=a},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var i=function(){function e(){var t=this;r(this,e),this.promise=new Promise(function(e,n){t.resolve=e,t.reject=n})}return e.prototype.then=function(e){return this.promise.then(e)},e}();e.exports=i},function(e,t,n){"use strict";var r=n(83),i=n(34),o=n(57),s=n(161),a=n(162),l=n(163),p="before",c="after",u=/http.*?\.png/g,h=function(e){return e.match(u)||[]},d=function(e,t,n){return e.added?t:e.removed?n:""},f=i.createClass({displayName:"ImageDiffSide",propTypes:{side:i.PropTypes.oneOf([p,c]).isRequired,images:i.PropTypes.array.isRequired},render:function(){return i.createElement("div",null,this.props.images.length>0&&i.createElement("div",{className:"diff-header"},"Images"),o.map(this.props.images,function(e,t){var n=r({image:!0,"image-unchanged":"unchanged"===e.status,"image-added":"added"===e.status,"image-removed":"removed"===e.status});return i.createElement("div",{key:t},i.createElement("img",{src:e.value,title:e.value,className:n}))}))}}),m=i.createClass({displayName:"TextDiff",propTypes:{before:i.PropTypes.string,after:i.PropTypes.string,title:i.PropTypes.string},getDefaultProps:function(){return{before:"",after:"",title:""}},getInitialState:function(){return{collapsed:this.props.before===this.props.after}},componentWillReceiveProps:function(e){this.setState({collapsed:e.before===e.after})},render:function(){var e=this,t=s.diffWords(this.props.before,this.props.after),n=a(t),u=h(this.props.before),m=h(this.props.after),g=l(u,m),v=o.map(n,function(e){var t={};return t.before=o(e).map(function(e,t){var n=d(e,"not-present","removed dark");return i.createElement("span",{key:t,className:n},e.value)}),t.after=o(e).map(function(e,t){var n=d(e,"added dark","not-present");return i.createElement("span",{key:t,className:n},e.value)}),t}),y=r({"diff-row":!0,collapsed:this.state.collapsed});return i.createElement("div",null,i.createElement("div",{className:"perseus-clearfix"},o.map([p,c],function(t,n){return i.createElement("div",{className:"diff-row "+t,key:n},!e.state.collapsed&&o.map(v,function(e,n){var o=e[t].length>1,s=r({"diff-line":!0,added:t===c&&o,removed:t===p&&o});return i.createElement("div",{className:s,key:n},e[t])}),!e.state.collapsed&&i.createElement(f,{side:t,images:g[t]}))})),o.map([p,c],function(t,n){return i.createElement("div",{className:y+" "+t,key:n,onClick:e.handleExpand},e.state.collapsed&&i.createElement("span",null,i.createElement("span",{className:"expand-button"}," ","[ show unmodified ]")))}))},handleExpand:function(){this.setState({collapsed:!1})}});e.exports=m},function(e,t,n){"use strict";var r=n(83),i=n(34),o=n(57),s=n(164),a=function(e){return 20*(e-1)},l="before",p="after",c="unchanged",u=i.createClass({displayName:"DiffSide",propTypes:{side:i.PropTypes.oneOf([l,p]).isRequired,className:i.PropTypes.string.isRequired,showKey:i.PropTypes.bool.isRequired,propKey:i.PropTypes.string.isRequired,value:i.PropTypes.string,depth:i.PropTypes.number.isRequired},render:function(){var e=r(this.props.className,{"diff-row":!0,before:this.props.side===l,after:this.props.side===p});return i.createElement("div",{className:e},i.createElement("div",{style:{paddingLeft:a(this.props.depth)}},this.props.showKey&&this.props.propKey+": ",i.createElement("span",{className:"inner-value dark "+this.props.className},this.props.value)))}}),h=i.createClass({displayName:"CollapsedRow",propTypes:{depth:i.PropTypes.number,onClick:i.PropTypes.func.isRequired},getDefaultProps:function(){return{depth:0}},render:function(){var e=this;return i.createElement("div",{onClick:e.props.onClick},o.map([l,p],function(t){return i.createElement("div",{className:"diff-row collapsed "+t,key:t},i.createElement("div",{style:{paddingLeft:a(e.props.depth)}},i.createElement("span",null," [ show unmodified ] ")))}))}}),d=i.createClass({displayName:"DiffEntry",propTypes:{entry:i.PropTypes.shape({key:i.PropTypes.string,children:i.PropTypes.array,before:i.PropTypes.string,after:i.PropTypes.string}),depth:i.PropTypes.number,expanded:i.PropTypes.bool},getDefaultProps:function(){return{depth:0}},getInitialState:function(){return{expanded:this.props.expanded}},render:function(){var e,t=this.props.entry,n="removed"===t.status,s="added"===t.status,a="changed"===t.status,f=t.children.length>0,m=r({removed:(n||a)&&!f,dark:n,"blank-space":s}),g=r({added:(s||a)&&!f,dark:s,"blank-space":n});e=this.state.expanded?t.children:o(t.children).select(function(e){return e.status!==c});var v=e.length<t.children.length;t.children.length===e.length+1&&(e=t.children,v=!1);var y=this;return i.createElement("div",null,t.key&&i.createElement("div",null,i.createElement(u,{side:l,className:m,depth:this.props.depth,propKey:t.key,showKey:!s,value:t.before}),i.createElement(u,{side:p,className:g,depth:this.props.depth,propKey:t.key,showKey:!n,value:t.after})),o.map(e,function(e){return i.createElement(d,{key:e.key,depth:y.props.depth+1,entry:e,expanded:y.state.expanded})}),v&&i.createElement(h,{depth:this.props.depth+1,onClick:this.expand}))},expand:function(){this.setState({expanded:!0})}}),f=i.createClass({displayName:"WidgetDiff",propTypes:{before:i.PropTypes.shape({options:i.PropTypes.object}).isRequired,after:i.PropTypes.shape({options:i.PropTypes.object}).isRequired,title:i.PropTypes.string.isRequired},render:function(){var e=s(this.props.before,this.props.after);return i.createElement("div",null,i.createElement("div",{className:"perseus-clearfix"},i.createElement(d,{entry:e})))}});e.exports=f},function(e,t,n){e.exports=window._},function(e,t,n){"use strict";var r=n(63),i=n(57),o=n(165),s=Math.pow(2,-42),a={predicate:{defaultForms:"integer, proper, improper, mixed, decimal",createValidatorFunctional:function(e,t){t=i.extend({simplify:"required",ratio:!1,forms:a.predicate.defaultForms},t);var n=void 0;n=i.isArray(t.forms)?t.forms:t.forms.split(/\s*,\s*/),void 0===t.inexact&&(t.maxError=0),t.maxError=+t.maxError+s,i.contains(n,"percent")&&(n=i.without(n,"percent"),n.push("percent"));var l=function(e){e=e.replace(/\u2212/,"-").replace(/([+-])\s+/g,"$1").replace(/(^\s*)|(\s*$)/gi,"");var n=e.match(/^([+-]?\d+)\s*\/\s*([+-]?\d+)$/),r=parseInt(e,10);if(n){var i=parseFloat(n[1]),s=parseFloat(n[2]),a=s>0&&(t.ratio||"1"!==n[2])&&1===o.getGCD(i,s);return[{value:i/s,exact:a}]}return isNaN(r)||""+r!==e?[]:[{value:r,exact:!0}]},p={integer:function(e){var t=p.decimal(e),n=p.decimal(e,1);return null!=t[0].value&&t[0].value===n[0].value||null!=t[1].value&&t[1].value===n[1].value?t:[]},proper:function(e){return r.map(l(e),function(e){return Math.abs(e.value)<1?[e]:[]})},improper:function(e){return r.map(l(e),function(e){return Math.abs(e.value)>=1?[e]:[]})},pi:function(e){var t=void 0,n=[];if(e=e.replace(/\u2212/,"-"),t=e.match(/^([+-]?)\s*(\\?pi|p|\u03c0|\\?tau|t|\u03c4|pau)$/i))n=[{value:parseFloat(t[1]+"1"),exact:!0}];else if(t=e.match(/^([+-]?\s*\d+\s*(?:\/\s*[+-]?\s*\d+)?)\s*\*?\s*(\\?pi|p|\u03c0|\\?tau|t|\u03c4|pau)$/i))n=l(t[1]);else if(t=e.match(/^([+-]?)\s*(\d+)\s*([+-]?\d+)\s*\/\s*([+-]?\d+)\s*\*?\s*(\\?pi|p|\u03c0|\\?tau|t|\u03c4|pau)$/i)){var s=parseFloat(t[1]+"1"),c=parseFloat(t[2]),u=parseFloat(t[3]),h=parseFloat(t[4]),d=u<h&&1===o.getGCD(u,h);n=[{value:s*(c+u/h),exact:d}]}else if(t=e.match(/^([+-]?\s*\d+)\s*\*?\s*(\\?pi|p|\u03c0|\\?tau|t|\u03c4|pau)\s*(?:\/\s*([+-]?\s*\d+))?$/i))n=l(t[1]+"/"+t[3]);else if(t=e.match(/^([+-]?)\s*\*?\s*(\\?pi|p|\u03c0|\\?tau|t|\u03c4|pau)\s*(?:\/\s*([+-]?\d+))?$/i))n=l(t[1]+"1/"+t[3]);else if("0"===e)n=[{value:0,exact:!0}];else{if(!(t=e.match(/^(.+)\s*\*?\s*(\\?pi|p|\u03c0|\\?tau|t|\u03c4|pau)$/i))){n=i.reduce(a.predicate.defaultForms.split(/\s*,\s*/),function(t,n){return t.concat(p[n](e))},[]);var f=!1,m=parseFloat(e);if(isNaN(m)||m===parseInt(e))e.match(/\/\s*7/)&&(f=!0);else{var g=Math.PI/12,v=g*Math.round(m/g);Math.abs(m-v)<.01&&(f=!0)}return f&&i.each(n,function(e){e.piApprox=!0}),n}n=p.decimal(t[1])}var y=Math.PI;return e.match(/\\?tau|t|\u03c4/)&&(y=2*Math.PI),e.match(/pau/)&&(y=1.5*Math.PI),r.each(n,function(e,t){t.value*=y}),n},coefficient:function(e){var t=[];return e=e.replace(/\u2212/,"-"),""===e?t=[{value:1,exact:!0}]:"-"===e&&(t=[{value:-1,exact:!0}]),t},log:function(e){var t=void 0,n=[];return e=e.replace(/\u2212/,"-"),e=e.replace(/[ \(\)]/g,""),(t=e.match(/^log\s*(\S+)\s*$/i))?n=p.decimal(t[1]):"0"===e&&(n=[{value:0,exact:!0}]),n},percent:function(e){e=r.trim(e);var t=!1;e.indexOf("%")===e.length-1&&(e=r.trim(e.substring(0,e.length-1)),t=!0);var n=p.decimal(e);return r.each(n,function(e,n){n.exact=t,n.value=n.value/100}),n},mixed:function(e){var t=e.replace(/\u2212/,"-").replace(/([+-])\s+/g,"$1").match(/^([+-]?)(\d+)\s+(\d+)\s*\/\s*(\d+)$/);if(t){var n=parseFloat(t[1]+"1"),r=parseFloat(t[2]),i=parseFloat(t[3]),s=parseFloat(t[4]),a=i<s&&1===o.getGCD(i,s);return[{value:n*(r+i/s),exact:a}]}return[]},decimal:function(e,n){null==n&&(n=1e10);var i=function(e){e=r.trim(e);var i=e.replace(/\u2212/,"-").replace(/([+-])\s+/g,"$1").match(/^([+-]?(?:\d{1,3}(?:[, ]?\d{3})*\.?|\d{0,3}(?:[, ]?\d{3})*\.(?:\d{3}[, ]?)*\d{1,3}))$/),o=e.match(/^0[0,]*,/);if(i&&!o){var s=parseFloat(i[1].replace(/[, ]/g,""));return void 0===t.inexact&&(s=Math.round(s*n)/n),s}},o=function(e){return e=e.replace(/([\.,])/g,function(e,t){return"."===t?",":"."}),i(e)};return[{value:i(e),exact:!0},{value:o(e),exact:!0}]}};return function(o){var s=null!=t.fallback?""+t.fallback:"";o=r.trim(o)||s;var a={empty:""===o,correct:!1,message:null,guess:o};if(r.each(n,function(n,r){for(var i=p[r](o),s=0,l=i.length;s<l;s++){var c=i[s].value,u=i[s].exact,h=i[s].piApprox;if(e(c,t.maxError))return u||"optional"===t.simplify?(a.correct=!0,a.message=t.message||null,a.empty=!1):"percent"===r?(a.empty=!0,a.message=i18n._("Your answer is almost correct, but it is missing a <code>\\%</code> at the end.")):("enforced"!==t.simplify&&(a.empty=!0),a.message=i18n._("Your answer is almost correct, but it needs to be simplified.")),!1;h&&e(c,Math.abs(.001*c))&&(a.empty=!0,a.message=i18n._("Your answer is close, but you may have approximated pi. Enter your answer as a multiple of pi, like <code>12\\ \\text{pi}</code> or <code>2/3\\ \\text{pi}</code>"))}}),a.correct===!1){var l=!1;if(i.each(p,function(e){var t=i.any(e(o),function(e){return null!=e.value&&!i.isNaN(e.value)});t&&(l=!0)}),!l)return a.empty=!0,a.message=i18n._("We could not understand your answer. Please check your answer for extra text or symbols."),a}return a}}},number:{convertToPredicate:function(e,t){var n=parseFloat(r.trim(e));return[function(e,t){return Math.abs(e-n)<t},r.extend({},t,{type:"predicate"})]},createValidatorFunctional:function(e,t){var n;return(n=a.predicate).createValidatorFunctional.apply(n,a.number.convertToPredicate(e,t))}},expression:{parseSolution:function(e,t){var n=KAS.parse(e,t);if(!n.parsed)throw new Error("The provided solution ("+e+") didn't parse.");if(t.simplified&&!n.expr.isSimplified())throw new Error("The provided solution ("+e+") isn't fully expanded and simplified.");return n=n.expr},createValidatorFunctional:function(e,t){return function(n){var r={empty:!1,correct:!1,message:null,guess:n};if(!n)return r.empty=!0,r;var i=KAS.parse(n,t);if(!i.parsed)return r.empty=!0,r;"string"==typeof e&&(e=a.expression.parseSolution(e,t));var o=KAS.compare(i.expr,e,t);if(o.equal)r.correct=!0;else if(o.message)r.message=o.message;else{var s=KAS.parse(n.replace(/[xX]/g,"*"),t);if(s.parsed){var l=KAS.compare(s.expr,e,t);l.equal?(r.empty=!0,r.message="I'm a computer. I only understand multiplication if you use an asterisk (*) as the multiplication sign."):l.message&&(r.message=l.message+" Also, I'm a computer. I only understand multiplication if you use an asterisk (*) as the multiplication sign.")}}return r}}}};e.exports=a},function(e,t,n){"use strict";e.exports=function(e){return e.replace(/\{align[*]?\}/g,"{aligned}")}},function(e,t,n){"use strict";var r=n(57),i=n(39),o=new RegExp('(\\[\\[☃ (passage-ref [0-9]+)\\]\\])\\s\\(["“]([\\s\\S]*)["”]\\)',"g"),s=function(e){var t=r.clone(e.widgets||{}),n=(e.content||"").replace(o,function(e,n,i,o){return t[i]=r.extend({},t[i],{options:r.extend({},t[i].options,{summaryText:o})}),n});return r.extend({},e,{content:n,widgets:t})},a=new RegExp('\\{\\{(passage-ref \\d+ \\d+)}}\\s+\\(["\\u201C]([^"]*)["\\u201D]\\)',"g"),l=function(e,t,n){return/\n\n/.test(n)?e:"{{"+t+' "'+n+'"}}'},p=function(e){if("radio"!==e.type||!e.options||!e.options.choices)return e;var t=r.map(e.options.choices,function(e){if(!e.content)return e;var t=e.content.replace(a,l);return r.extend({},e,{content:t})});return r.extend({},e,{options:r.extend({},e.options,{choices:t})})},c=function(e){return i.traverseRendererDeep(e,null,p,s)},u=function(e){var t=c(e.question),n=r.map(e.hints,function(e){return c(e)});return r.extend({},e,{question:t,hints:n})};e.exports=u},function(e,t,n){"use strict";var r={PHONE:"phone",TABLET:"tablet",DESKTOP:"desktop"};e.exports={devices:r}},function(e,t,n){e.exports=n(34).__internalAddons.createFragment},function(e,t,n){e.exports=window.$},function(e,t,n){"use strict";e.exports=["key","ref","containerSizeClass","widgetId","onChange","problemNum","apiOptions","questionCompleted","interWidgets","onRemove","id","onBlur","onFocus","trackInteraction","keypadElement"]},function(e,t,n){"use strict";var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},i=n(34),o=n(11).Options,s={propTypes:{apiOptions:i.PropTypes.any},getDefaultProps:function(){return{apiOptions:{}}},getApiOptions:function(){return r({},o.defaults,this.props.apiOptions)}};e.exports=s},function(e,t,n){"use strict";var r=n(34),i=n(35),o=n(160).components.Keypad,s={propTypes:{apiOptions:r.PropTypes.shape({customKeypad:r.PropTypes.bool}),keypadStyle:r.PropTypes.any},getInitialState:function(){return{keypadElement:null}},componentDidMount:function(){var e=this;this.props.apiOptions&&this.props.apiOptions.customKeypad&&(this._keypadContainer=document.createElement("div"),document.body.appendChild(this._keypadContainer),i.render(r.createElement(o,{onElementMounted:function(t){e.setState({keypadElement:t})},onDismiss:function(){e.blur&&e.blur()},style:this.props.keypadStyle}),this._keypadContainer))},componentWillUnmount:function(){this._keypadContainer&&(i.unmountComponentAtNode(this._keypadContainer),this._keypadContainer.parentNode&&this._keypadContainer.parentNode.removeChild(this._keypadContainer),this._keypadContainer=null)},keypadElement:function(){return this.state.keypadElement}};e.exports=s},function(e,t,n){"use strict";var r=n(57),i=function(e,t){return r.object(r.map(e,function(e,n){return[n,e[t]]}))},o=function(e,t){var n={};return r.each(r.keys(e),function(r){n[r]=t(e[r],r)}),n},s=function(e,t){var n={};return r.each(e,function(e){n[e]=t(e)}),n};e.exports={pluck:i,mapObject:o,mapObjectFromArray:s}},function(e,t,n){"use strict";var r=n(57),i=n(12).shuffle,o=n(166),s=function(e,t){var n=function(n){return e.randomize?i(n,t):n},o=function(e){var t=null,n=r.reject(e,function(e,n){if(e.isNoneOfTheAbove)return t=e,!0});return t&&n.push(t),n},s=e.choices.slice();return s=r.map(s,function(e,t){return r.extend({},e,{originalIndex:t})}),o(n(s))},a=function(e,t){var n=r.map(s(e,t),function(e){return r.omit(e,"correct")});return e=r.extend({},e,{choices:n}),r.pick(e,"choices","hasNoneOfTheAbove","onePerLine","multipleSelect","correctAnswer","deselectEnabled")},l=function(e,t){var n=s(e,t),i=r.pluck(n,"correct"),o=r.pick(e,"hasNoneOfTheAbove","onePerLine","multipleSelect","correctAnswer","deselectEnabled"),a=r.extend({},o,{choices:n,values:i});return a},p={1:function(e){var t,n;if(e.noneOfTheAbove){t=r.clone(e.choices);var i=r.random(0,e.choices.length-1),o=r.extend({},e.choices[i],{isNoneOfTheAbove:!0});t.splice(i,1),t.push(o),n=!0}else t=e.choices,n=!1;return r.extend(r.omit(e,"noneOfTheAbove"),{choices:t,hasNoneOfTheAbove:n})}};e.exports={name:"radio",displayName:"Multiple choice",accessible:!0,widget:o,transform:a,staticTransform:l,version:{major:1,minor:0},propUpgrades:p}},function(e,t,n){"use strict";var r=n(83),i=n(34),o=n(57),s=n(167),a=n(168),l=n(169).parseTex,p=n(170),c=n(58),u=n(160).propTypes.keypadElementPropType,h=n(11).ClassNames,d=n(11).Options,f={number:{name:"Numbers",forms:"integer, decimal, proper, improper, mixed"},decimal:{name:"Decimals",forms:"decimal"},integer:{name:"Integers",forms:"integer"},rational:{name:"Fractions and mixed numbers",forms:"integer, proper, improper, mixed"},improper:{name:"Improper numbers (no mixed)",forms:"integer, proper, improper"},mixed:{name:"Mixed numbers (no improper)",forms:"integer, proper, mixed"},percent:{name:"Numbers or percents",forms:"integer, decimal, proper, improper, mixed, percent"},pi:{name:"Numbers with pi",forms:"pi"}},m={integer:function(e){return i18n._("an integer, like $6$")},proper:function(e){return"optional"===e.simplify?i18n._("a *proper* fraction, like $1/2$ or $6/10$"):i18n._("a *simplified proper* fraction, like $3/5$")},improper:function(e){return"optional"===e.simplify?i18n._("an *improper* fraction, like $10/7$ or $14/8$"):i18n._("a *simplified improper* fraction, like $7/4$")},mixed:function(e){return i18n._("a mixed number, like $1\\ 3/4$")},decimal:function(e){return i18n._("an *exact* decimal, like $0.75$")},percent:function(e){return i18n._("a percent, like $12.34\\%$")},pi:function(e){return i18n._("a multiple of pi, like $12\\ \\text{pi}$ or $2/3\\ \\text{pi}$")}},g=i.createClass({displayName:"InputNumber",propTypes:{answerType:i.PropTypes.oneOf(Object.keys(f)),currentValue:i.PropTypes.string,keypadElement:u,reviewModeRubric:i.PropTypes.object,widgetId:i.PropTypes.string.isRequired},getDefaultProps:function(){return{currentValue:"",size:"normal",answerType:"number",apiOptions:d.defaults}},shouldShowExamples:function(){return"number"!==this.props.answerType&&!this.props.apiOptions.staticRender},render:function(){if(this.props.apiOptions.customKeypad)return i.createElement(a,{ref:"input",value:this.props.currentValue,keypadElement:this.props.keypadElement,onChange:this.handleChange,onFocus:this._handleFocus,onBlur:this._handleBlur});var e=this.props.reviewModeRubric,t=null,n=null;if(e){var o=this.simpleValidate(e);if(t="points"===o.type&&o.earned===o.total,!t){var l=String(e.value);e.inexact&&e.maxError&&(l+=" ± "+e.maxError);var c=[l];n=i.createElement(p,{answers:c})}}var u={};u["perseus-input-size-"+this.props.size]=!0,u[h.CORRECT]=e&&t&&this.props.currentValue,u[h.INCORRECT]=e&&!t&&this.props.currentValue,u[h.UNANSWERED]=e&&!this.props.currentValue;var d=i.createElement(s,{ref:"input",value:this.props.currentValue,onChange:this.handleChange,className:r(u),type:this._getInputType(),examples:this.examples(),shouldShowExamples:this.shouldShowExamples(),onFocus:this._handleFocus,onBlur:this._handleBlur,id:this.props.widgetId,disabled:this.props.apiOptions.readOnly});return n?i.createElement("span",{className:"perseus-input-with-answer-blurb"},d,n):d},handleChange:function(e,t){this.props.onChange({currentValue:e},t)},_getInputType:function(){return this.props.apiOptions.staticRender?"tex":"text"},_handleFocus:function(){this.props.onFocus([])},_handleBlur:function(){this.props.onBlur([])},focus:function(){return this.refs.input.focus(),!0},focusInputPath:function(e){this.refs.input.focus()},blurInputPath:function(e){this.refs.input.blur()},getInputPaths:function(){return[[]]},getGrammarTypeForPath:function(e){return"number"},setInputValue:function(e,t,n){this.props.onChange({currentValue:t},n)},getUserInput:function(){return{currentValue:this.props.currentValue}},simpleValidate:function(e,t){return t=t||function(){},g.validate(this.getUserInput(),e,t)},examples:function e(){var t=this.props.answerType,n=f[t].forms.split(/\s*,\s*/),e=o.map(n,function(e){return m[e](this.props)},this);return[i18n._("**Your answer should be** ")].concat(e)}});o.extend(g,{validate:function(e,t,n){null==t.answerType&&(t.answerType="number");var r=c.number.createValidatorFunctional(t.value,{simplify:t.simplify,inexact:t.inexact||void 0,maxError:t.maxError,forms:f[t.answerType].forms}),i=l(e.currentValue),o=r(i);if(o.empty){var s=n(null,e.currentValue,o.message);return{type:"invalid",message:s===!1?null:o.message}}return{type:"points",earned:o.correct?1:0,total:1,message:o.message}}});var v=function(e){var t=e.simplify,n=e.size,r=e.answerType;return{simplify:t,size:n,answerType:r}};e.exports={name:"input-number",displayName:"Number text box (old)",defaultAlignment:"inline-block",hidden:!0,widget:g,transform:v}},function(e,t,n){"use strict";var r=n(34),i=n(35),o=n(57),s=n(12),a=n(171),l=n(89),p={number:{name:"Numbers",forms:"integer, decimal, proper, improper, mixed"},decimal:{name:"Decimals",forms:"decimal"},integer:{name:"Integers",forms:"integer"},rational:{name:"Fractions and mixed numbers",forms:"integer, proper, improper, mixed"},improper:{name:"Improper numbers (no mixed)",forms:"integer, proper, improper"},mixed:{name:"Mixed numbers (no improper)",forms:"integer, proper, mixed"},percent:{name:"Numbers or percents",forms:"integer, decimal, proper, improper, mixed, percent"},pi:{name:"Numbers with pi",forms:"pi"}},c=r.createClass({displayName:"InputNumberEditor",propTypes:{value:r.PropTypes.number,simplify:r.PropTypes.oneOf(["required","optional","enforced"]),size:r.PropTypes.oneOf(["normal","small"]),inexact:r.PropTypes.bool,maxError:r.PropTypes.number,answerType:r.PropTypes.string},getDefaultProps:function(){return{value:0,simplify:"required",size:"normal",inexact:!1,maxError:.1,answerType:"number"}},handleAnswerChange:function(e){var t=s.firstNumericalParse(e)||0;this.props.onChange({value:t})},render:function(){var e=this,t=o.map(p,function(e,t){return r.createElement("option",{value:t,key:t},e.name)},this);return r.createElement("div",null,r.createElement("div",null,r.createElement("label",null,"Correct answer:"," ",r.createElement(a,{value:""+this.props.value,onChange:this.handleAnswerChange,ref:"input"}))),r.createElement("div",null,r.createElement("label",null,"Unsimplified answers"," ",r.createElement("select",{value:this.props.simplify,onChange:function(t){e.props.onChange({simplify:t.target.value})}},r.createElement("option",{value:"required"},"will not be graded"),r.createElement("option",{value:"optional"},"will be accepted"),r.createElement("option",{value:"enforced"},"will be marked wrong"))),r.createElement(l,null,r.createElement("p",null,'Normally select "will not be graded". This will give the user a message saying the answer is correct but not simplified. The user will then have to simplify it and re-enter, but will not be penalized. (5th grade and anything after)'),r.createElement("p",null,'Select "will be accepted" only if the user is not expected to know how to simplify fractions yet. (Anything prior to 5th grade)'),r.createElement("p",null,'Select "will be marked wrong" only if we are specifically assessing the ability to simplify.'))),r.createElement("div",null,r.createElement("label",null,r.createElement("input",{
type:"checkbox",checked:this.props.inexact,onChange:function(t){e.props.onChange({inexact:t.target.checked})}})," ","Allow inexact answers"),r.createElement("label",null,r.createElement("input",{type:"checkbox",style:{visibility:"hidden"}}),"Max error:"," ",r.createElement("input",{type:"text",disabled:!this.props.inexact,defaultValue:this.props.maxError,onBlur:function(t){var n=""+(s.firstNumericalParse(t.target.value)||0);t.target.value=n,e.props.onChange({maxError:n})}}))),r.createElement("div",null,"Answer type:"," ",r.createElement("select",{value:this.props.answerType,onChange:function(t){e.props.onChange({answerType:t.target.value})}},t),r.createElement(l,null,r.createElement("p",null,'Use the default "Numbers" unless the answer must be in a specific form (e.g., question is about converting decimals to fractions).'))),r.createElement("div",null,r.createElement("label",null,"Width"," ",r.createElement("select",{value:this.props.size,onChange:function(t){e.props.onChange({size:t.target.value})}},r.createElement("option",{value:"normal"},"Normal (80px)"),r.createElement("option",{value:"small"},"Small (40px)"))),r.createElement(l,null,r.createElement("p",null,'Use size "Normal" for all text boxes, unless there are multiple text boxes in one line and the answer area is too narrow to fit them.'))))},focus:function(){return i.findDOMNode(this.refs.input).focus(),!0},serialize:function(){return o.pick(this.props,"value","simplify","size","inexact","maxError","answerType")}});e.exports=c},function(e,t,n){"use strict";var r=n(83),i=n(34),o=n(57),s=n(167),a=n(168),l=n(169).parseTex,p=n(170),c=n(11).ClassNames,u=n(11).Options,h=n(58),d=n(165),f=n(160).propTypes.keypadElementPropType,m=[{title:"Integers",value:"integer",content:"6"},{title:"Decimals",value:"decimal",content:"0.75"},{title:"Proper fractions",value:"proper",content:"⅗"},{title:"Improper fractions",value:"improper",content:"⁷⁄₄"},{title:"Mixed numbers",value:"mixed",content:"1¾"},{title:"Numbers with π",value:"pi",content:"π"}],g={integer:function(){return i18n._("an integer, like $6$")},proper:function(e){return"optional"===e.simplify?i18n._("a *proper* fraction, like $1/2$ or $6/10$"):i18n._("a *simplified proper* fraction, like $3/5$")},improper:function(e){return"optional"===e.simplify?i18n._("an *improper* fraction, like $10/7$ or $14/8$"):i18n._("a *simplified improper* fraction, like $7/4$")},mixed:function(){return i18n._("a mixed number, like $1\\ 3/4$")},decimal:function(){return i18n._("an *exact* decimal, like $0.75$")},pi:function(){return i18n._("a multiple of pi, like $12\\ \\text{pi}$ or $2/3\\ \\text{pi}$")}},v=i.createClass({displayName:"NumericInput",propTypes:{currentValue:i.PropTypes.string,size:i.PropTypes.oneOf(["normal","small"]),apiOptions:u.propTypes,coefficient:i.PropTypes.bool,answerForms:i.PropTypes.arrayOf(i.PropTypes.shape({name:i.PropTypes.string.isRequired,simplify:i.PropTypes.oneOf(["required","optional"]).isRequired})),keypadElement:f,labelText:i.PropTypes.string,reviewModeRubric:i.PropTypes.object,trackInteraction:i.PropTypes.func.isRequired,widgetId:i.PropTypes.string.isRequired},getDefaultProps:function(){return{currentValue:"",size:"normal",apiOptions:u.defaults,coefficient:!1,answerForms:[],labelText:""}},render:function(){if(this.props.apiOptions.customKeypad)return i.createElement(a,{ref:"input",value:this.props.currentValue,keypadElement:this.props.keypadElement,onChange:this.handleChange,onFocus:this._handleFocus,onBlur:this._handleBlur});var e,t,n=this.props.reviewModeRubric;if(n){var l=this.simpleValidate(n);if(e="points"===l.type&&l.earned===l.total,!e){var u=o.filter(n.answers,function(e){return"correct"===e.status}),h=o.map(u,function(e){var t="decimal";e.answerForms&&e.answerForms[0]&&(t=e.answerForms[0]);var n=d.toNumericString(e.value,t);return e.maxError&&(n+=" ± "+d.toNumericString(e.maxError,t)),n});t=i.createElement(p,{answers:h})}}var f={};f["perseus-input-size-"+this.props.size]=!0,f[c.CORRECT]=n&&e&&this.props.currentValue,f[c.INCORRECT]=n&&!e&&this.props.currentValue,f[c.UNANSWERED]=n&&!this.props.currentValue;var m=this.props.labelText;null!=m&&""!==m||(m=i18n._("Your answer:"));var g=i.createElement(s,{ref:"input",value:this.props.currentValue,onChange:this.handleChange,className:r(f),labelText:m,type:this._getInputType(),examples:this.examples(),shouldShowExamples:this.shouldShowExamples(),onFocus:this._handleFocus,onBlur:this._handleBlur,id:this.props.widgetId,disabled:this.props.apiOptions.readOnly});return t?i.createElement("span",{className:"perseus-input-with-answer-blurb"},g,t):g},handleChange:function(e,t){this.props.onChange({currentValue:e},t),this.props.trackInteraction()},_getInputType:function(){return this.props.apiOptions.staticRender?"tex":"text"},_handleFocus:function(){this.props.onFocus([])},_handleBlur:function(){this.props.onBlur([])},focus:function(){return this.refs.input.focus(),!0},focusInputPath:function(e){this.refs.input.focus()},blurInputPath:function(e){this.refs.input.blur()},getInputPaths:function(){return[[]]},getGrammarTypeForPath:function(e){return"number"},setInputValue:function(e,t,n){this.props.onChange({currentValue:t},n)},getUserInput:function(){return{currentValue:this.props.currentValue}},simpleValidate:function(e){return v.validate(this.getUserInput(),e)},shouldShowExamples:function(){var e=0===this.props.answerForms.length,t=o.uniq(this.props.answerForms.map(function(e){return e.name})),n=t.length>=o.size(g);return!e&&!n},examples:function e(){var t=0!==this.props.answerForms.length?this.props.answerForms:o.map(o.keys(g),function(e){return{name:e,simplify:"required"}}),e=o.map(t,function(e){return g[e.name](e)});return e=o.uniq(e),[i18n._("**Your answer should be** ")].concat(e)}});o.extend(v,{validate:function(e,t){var n=o.pluck(m,"value"),r=function(e){return h.number.createValidatorFunctional(e.value,{message:e.message,simplify:"correct"===e.status?e.simplify:"optional",inexact:!0,maxError:e.maxError,forms:e.strict&&e.answerForms&&0!==e.answerForms.length?e.answerForms:n})},i=l(e.currentValue),s=o.where(t.answers,{status:"correct"}),a=o.find(o.map(s,function(e){var n=i;t.coefficient&&(n?"-"===n&&(n=-1):n=1);var o=r(e);return o(n)}),function(e){return e.correct||e.empty});if(!a){var p=[].concat(o.where(t.answers,{status:"ungraded"}),o.where(t.answers,{status:"wrong"})),c=o.find(p,function(e){var t=r(e);return t(i).correct});a={empty:!!c&&"ungraded"===c.status,correct:!!c&&"correct"===c.status,message:c?c.message:null,guess:i}}return a.empty?{type:"invalid",message:a.message}:{type:"points",earned:a.correct?1:0,total:1,message:a.message}}});var y=function(e){var t=function(e,t){return o.reduce(e,function(e,n){var r=o.find(e,t.bind(null,n));return r?e:e.concat([n])},[])},n=o.flatten(e),r=t(n,o.isEqual);return o.sortBy(r,function(e){return o.keys(g).indexOf(e.name)})},b=function(e){var t=o.extend(o.omit(e,"answers"),{answerForms:y(o.map(e.answers,function(e){return o.map(e.answerForms,function(t){return{simplify:e.simplify,name:t}})}))});return t};e.exports={name:"numeric-input",displayName:"Number text box",defaultAlignment:"inline-block",accessible:!0,widget:v,transform:b}},function(e,t,n){"use strict";var r=n(34),i=n(57),o=n(172),s=n(173),a=n(81),l=n(17),p=n(41),c=p.iconGear,u=p.iconTrash,h=n(89),d=n(42),f=n(174),m=n(175),g=n(45),v=n(176),y=n(12).firstNumericalParse,b=[{title:"Integers",value:"integer",content:"6"},{title:"Decimals",value:"decimal",content:"0.75"},{title:"Proper fractions",value:"proper",content:"⅗"},{title:"Improper fractions",value:"improper",content:"⁷⁄₄"},{title:"Mixed numbers",value:"mixed",content:"1¾"},{title:"Numbers with π",value:"pi",content:"π"}],E=function(e){return{value:null,status:e,message:"",simplify:"required",answerForms:[],strict:!1,maxError:null}},T=r.createClass({displayName:"NumericInputEditor",mixins:[s,o],getDefaultProps:function(){return{answers:[E("correct")],size:"normal",coefficient:!1,labelText:""}},getInitialState:function(){return{lastStatus:"wrong",showOptions:i.map(this.props.answers,function(){return!1})}},render:function(){var e=this,t=this.props.answers,n=function(n){return r.createElement("div",{className:"perseus-widget-row"},r.createElement("label",null,"Unsimplified answers are"),r.createElement(a,{value:t[n].simplify,allowEmpty:!1,buttons:[{value:"required",content:"ungraded"},{value:"optional",content:"accepted"},{value:"enforced",content:"wrong"}],onChange:e.updateAnswer(n,"simplify")}),r.createElement(h,null,r.createElement("p",null,'Normally select "ungraded". This will give the user a message saying the answer is correct but not simplified. The user will then have to simplify it and re-enter, but will not be penalized. (5th grade and after)'),r.createElement("p",null,'Select "accepted" only if the user is not expected to know how to simplify fractions yet. (Anything prior to 5th grade)'),r.createElement("p",null,'Select "wrong" ',r.createElement("em",null,"only")," if we are specifically assessing the ability to simplify.")))},o=function(n){return r.createElement("div",null,r.createElement("div",{className:"perseus-widget-row"},r.createElement("label",null,"Choose the suggested answer formats"),r.createElement(f,{buttons:b,values:t[n].answerForms,onChange:e.updateAnswer(n,"answerForms")}),r.createElement(h,null,r.createElement("p",null,'Formats will be autoselected for you based on the given answer; to show no suggested formats and accept all types, simply have a decimal/integer be the answer. Values with π will have format "pi", and values that are fractions will have some subset (mixed will be "mixed" and "proper"; improper/proper will both be "improper" and "proper"). If you would like to specify that it is only a proper fraction (or only a mixed/improper fraction), deselect the other format. Except for specific cases, you should not need to change the autoselected formats.'),r.createElement("p",null,"To restrict the answer to ",r.createElement("em",null,"only"),' an improper fraction (i.e. 7/4), select the improper fraction and toggle "strict" to true. This ',r.createElement("b",null,"will not")," accept 1.75 as an answer. "),r.createElement("p",null,"Unless you are testing that specific skill, please do not restrict the answer format."))),r.createElement("div",{className:"perseus-widget-row"},r.createElement(g,{label:"Strictly match only these formats",strict:t[n].strict,onChange:e.updateAnswer.bind(e,n)})))},s=function(n){return r.createElement("div",{className:"perseus-widget-row"},r.createElement("label",null,"Max error"," ",r.createElement(m,{className:"max-error",value:t[n].maxError,onChange:e.updateAnswer(n,"maxError"),placeholder:"0"})))},p=r.createElement("div",{className:"perseus-widget-row"},r.createElement("label",null,"Width:"," "," "),r.createElement(a,{value:this.props.size,allowEmpty:!1,buttons:[{value:"normal",content:"Normal (80px)"},{value:"small",content:"Small (40px)"}],onChange:this.change("size")}),r.createElement(h,null,r.createElement("p",null,'Use size "Normal" for all text boxes, unless there are multiple text boxes in one line and the answer area is too narrow to fit them.'))),E=r.createElement("div",{className:"perseus-widget-row"},r.createElement("label",null,"Label text:"," ",r.createElement(v,{value:this.props.labelText,onChange:this.change("labelText")})),r.createElement(h,null,r.createElement("p",null,"Text to describe this input. This will be shown to users using screenreaders."))),T=r.createElement("div",null,r.createElement("div",{className:"perseus-widget-row"},r.createElement(g,{label:"Coefficient",coefficient:this.props.coefficient,onChange:this.props.onChange}),r.createElement(h,null,r.createElement("p",null,"A coefficient style number allows the student to use - for -1 and an empty string to mean 1.")))),x=r.createElement("div",null,r.createElement("a",{href:"javascript:void(0)",className:"simple-button orange",onClick:function(){return e.addAnswer()},onKeyDown:function(t){return e.onSpace(t,e.addAnswer)}},r.createElement("span",null,"Add new answer"))),w={wrong:"(address the mistake/misconception)",ungraded:"(explain in detail to avoid confusion)",correct:"(reinforce the user's understanding)"},C=function(){return t.map(function(a,p){var h=r.createElement(l,{apiOptions:e.props.apiOptions,content:a.message||"",placeholder:"Why is this answer "+a.status+"?\t"+w[a.status],widgetEnabled:!1,onChange:function(t){"content"in t&&e.updateAnswer(p,{message:t.content})}});return r.createElement("div",{className:"perseus-widget-row",key:p},r.createElement("div",{className:"input-answer-editor-value-container"+(a.maxError?" with-max-error":"")},r.createElement(m,{value:a.value,className:"numeric-input-value",placeholder:"answer",format:i.last(a.answerForms),onFormatChange:function(t,n){var r;"pi"===n?r=["pi"]:"mixed"===n?r=["proper","mixed"]:"proper"!==n&&"improper"!==n||(r=["proper","improper"]),e.updateAnswer(p,{value:y(t),answerForms:r})},onChange:function(t){e.updateAnswer(p,{value:y(t)})}}),a.strict&&r.createElement("div",{className:"is-strict-indicator",title:"strictly equivalent to"},"≡"),"required"!==a.simplify&&"correct"===a.status&&r.createElement("div",{className:"simplify-indicator "+a.simplify,title:"accepts unsimplified answers"},"‰"),a.maxError?r.createElement("div",{className:"max-error-container"},r.createElement("div",{className:"max-error-plusmn"},"±"),r.createElement(m,{placeholder:0,value:t[p].maxError,format:i.last(a.answerForms),onChange:e.updateAnswer(p,"maxError")})):null,r.createElement("div",{className:"value-divider"}),r.createElement("a",{href:"javascript:void(0)",className:"answer-status "+a.status,onClick:function(){return e.onStatusChange(p)},onKeyDown:function(t){return e.onSpace(t,e.onStatusChange,p)}},a.status),r.createElement("a",{href:"javascript:void(0)",className:"answer-trash",onClick:function(){return e.onTrashAnswer(p)},onKeyDown:function(t){return e.onSpace(t,e.onTrashAnswer,p)}},r.createElement(d,u)),r.createElement("a",{href:"javascript:void(0)",className:"options-toggle",onClick:function(){return e.onToggleOptions(p)},onKeyDown:function(t){return e.onSpace(t,e.onToggleOptions,p)}},r.createElement(d,c))),r.createElement("div",{className:"input-answer-editor-message"},h),e.state.showOptions[p]&&r.createElement("div",{className:"options-container"},s(p),"correct"===a.status&&n(p),o(p)))})};return r.createElement("div",{className:"perseus-input-number-editor"},r.createElement("div",{className:"ui-title"},"User input"),r.createElement("div",{className:"msg-title"},"Message shown to user on attempt"),C(),x,p,T,E)},onToggleOptions:function(e){var t=this.state.showOptions.slice();t[e]=!t[e],this.setState({showOptions:t})},onTrashAnswer:function(e){if(e>=0&&e<this.props.answers.length){var t=this.props.answers.slice(0);t.splice(e,1),this.props.onChange({answers:t})}},onSpace:function(e,t){if(" "===e.key){e.preventDefault();var n=i.toArray(arguments).slice(2);t.apply(this,n)}},onStatusChange:function(e){var t=["wrong","ungraded","correct"],n=this.props.answers,r=i.indexOf(t,n[e].status),o=t[(r+1)%t.length];this.updateAnswer(e,{status:o,simplify:"correct"===o?"required":"accepted"})},updateAnswer:function(e,t){var n=this;if(!i.isObject(t))return i.partial(function(e,t,r){var i={};i[t]=r,n.updateAnswer(e,i)},e,t);var r=i.clone(this.props.answers);if(e===r.length)var o=E(this.state.lastStatus),r=r.concat(o);r[e]=i.extend({},r[e],t),this.props.onChange({answers:r})},addAnswer:function(){var e=E(this.state.lastStatus),t=this.props.answers.concat(e);this.props.onChange({answers:t})},getSaveWarnings:function(){var e=[];return i.contains(i.pluck(this.props.answers,"value"),"")&&e.push("One or more answers is empty"),""===this.props.labelText&&e.push("No label is specified"),this.props.answers.forEach(function(t,n){var r=t.strict&&(!t.answerForms||0===t.answerForms.length);r&&e.push("Answer "+(n+1)+" is set to string format matching, but no format was selected")}),e}});e.exports=T},function(e,t,n){"use strict";var r=n(83),i=n(34),o=(n(35),n(177)),s=n(57),a=n(11).Options,l=n(172),a=n(11).Options,p=n(11).ClassNames,c=n(58),u=n(42),h=n(167),d=n(178),f=n(179),m=n(160).components.KeypadInput,g=n(160).propTypes,v=g.keypadConfigurationPropType,y=g.keypadElementPropType,b=n(160).consts.KeypadTypes,E=n(41),T=E.iconExclamationSign,x=(n(193),i18n._("Sorry, I don't understand that!")),w=(["An expression without an answer","is no expression to me.","Who can learn from an input","like the one that I see?","Put something in there","won't you please?","A few digits will do -","might I suggest some threes?"].join("\n"),function(e){return e.replace(/([_^])([^{])/g,"$1{$2}")}),C=i.createClass({displayName:"Expression",mixins:[l],propTypes:{apiOptions:a.propTypes,buttonSets:f.buttonSetsType,buttonsVisible:i.PropTypes.oneOf(["always","never","focused"]),functions:i.PropTypes.arrayOf(i.PropTypes.string),keypadConfiguration:v,keypadElement:y,times:i.PropTypes.bool,trackInteraction:i.PropTypes.func.isRequired,value:i.PropTypes.string,widgetId:i.PropTypes.string.isRequired},getDefaultProps:function(){return{value:"",times:!1,functions:[],buttonSets:["basic","trig","prealgebra","logarithms"],onFocus:function(){},onBlur:function(){},apiOptions:a.defaults}},getInitialState:function(){return{showErrorTooltip:!1,showErrorText:!1}},parse:function(e,t){var n=s.pick(t||this.props,"functions");return window.icu&&window.icu.getDecimalFormatSymbols&&s.extend(n,window.icu.getDecimalFormatSymbols()),KAS.parse(w(e),n)},render:function(){var e=this;if(this.props.apiOptions.customKeypad)return i.createElement(m,{ref:"input",value:this.props.value,keypadElement:this.props.keypadElement,onChange:this.changeAndTrack,onFocus:function(){e.props.keypadElement.configure(e.props.keypadConfiguration,function(){e.isMounted()&&e._handleFocus()})},onBlur:this._handleBlur});if(this.props.apiOptions.staticRender)return i.createElement(h,{ref:"input",value:this.props.value,type:"tex",examples:[],shouldShowExamples:!1,onChange:this.changeAndTrack,onFocus:this._handleFocus,onBlur:this._handleBlur,id:this.props.widgetId});var t=i.createElement("span",{className:"error-tooltip"},i.createElement(o,{className:"error-text-container",horizontalPosition:"right",horizontalAlign:"left",verticalPosition:"top",arrowSize:10,borderColor:"#fcc335",show:this.state.showErrorText},i.createElement("span",{className:"error-icon",onMouseEnter:function(){e.setState({showErrorText:!0})},onMouseLeave:function(){e.setState({showErrorText:!1})},onClick:function(){e.setState({showErrorText:!e.state.showErrorText})}},i.createElement(u,T)),i.createElement("div",{className:"error-text"},x))),n=r({"perseus-widget-expression":!0,"show-error-tooltip":this.state.showErrorTooltip});return i.createElement("span",{className:n},i.createElement(d,{ref:"input",className:p.INTERACTIVE,value:this.props.value,onChange:this.changeAndTrack,convertDotToTimes:this.props.times,buttonsVisible:this.props.buttonsVisible||"focused",buttonSets:this.props.buttonSets,onFocus:this._handleFocus,onBlur:this._handleBlur}),this.state.showErrorTooltip&&t)},changeAndTrack:function(e,t){this.change("value",e,t),this.props.trackInteraction()},_handleFocus:function(){this.props.onFocus([])},_handleBlur:function(){this.props.onBlur([])},errorTimeout:null,componentWillReceiveProps:function(e){var t=this;s.isEqual(this.props.value,e.value)&&s.isEqual(this.props.functions,e.functions)||(clearTimeout(this.errorTimeout),this.parse(e.value,e).parsed?this.setState({showErrorTooltip:!1}):this.errorTimeout=setTimeout(function(){var e=t.props.apiOptions.onInputError(null,t.props.value,x);e!==!1&&t.setState({showErrorTooltip:!0})},2e3))},componentWillUnmount:function(){clearTimeout(this.errorTimeout)},focus:function(){return this.props.apiOptions.customKeypad&&this.refs.input.focus(),!0},focusInputPath:function(e){this.refs.input.focus()},blurInputPath:function(e){this.refs.input.blur()},insert:function(e){this.props.apiOptions.staticRender||this.refs.input.insert(e)},getInputPaths:function(){return[[]]},getGrammarTypeForPath:function(e){return"expression"},setInputValue:function(e,t,n){this.props.onChange({value:t},n)},getAcceptableFormatsForInputPath:function(){return null},getUserInput:function(){return w(this.props.value)},simpleValidate:function(e,t){return t=t||function(){},C.validate(this.getUserInput(),e,t)}});s.extend(C,{validate:function(e,t,n){var r=s.clone(t);window.icu&&window.icu.getDecimalFormatSymbols&&s.extend(r,window.icu.getDecimalFormatSymbols());var i,o,a=function(e){return c.expression.createValidatorFunctional(KAS.parse(e.value,t).expr,s({}).extend(r,{simplify:e.simplify,form:e.form}))},l=!0,p=!!s(t.answerForms).find(function(t){var n=a(t);return i=n(e),o=t,l=l&&i.empty,i.correct}),u=i&&i.message;if(p){if("ungraded"===o.considered){var h=n(null,e,u);return{type:"invalid",message:h===!1?null:u}}return{type:"points",earned:"correct"===o.considered?1:0,total:1,message:u}}return l?{type:"invalid",message:null}:{type:"points",earned:0,total:1}}});var P=function(e){for(var t=b.EXPRESSION,n={},r={},i=e.answerForms,o=Array.isArray(i),s=0,i=o?i:i[Symbol.iterator]();;){var a;if(o){if(s>=i.length)break;a=i[s++]}else{if(s=i.next(),s.done)break;a=s.value}var l=a,p=KAS.parse(l.value,e);p.parsed&&!function(){for(var e=p.expr,t=function(e){return"pi"===e||"theta"===e},i=function(e){return t(e)?e.toUpperCase():e},o=e.getVars(),s=Array.isArray(o),a=0,o=s?o:o[Symbol.iterator]();;){var l;if(s){if(a>=o.length)break;l=o[a++]}else{if(a=o.next(),a.done)break;l=a.value}var c=l;n[i(c)]=!0}for(var u=e.getConsts(),h=Array.isArray(u),d=0,u=h?u:u[Symbol.iterator]();;){var f;if(h){if(d>=u.length)break;f=u[d++]}else{if(d=u.next(),d.done)break;f=d.value}var m=f;r[i(m)]=!0}}()}var c=Object.keys(n);c.sort();var u=Object.keys(r);u.sort();var h=[].concat(c,u);return h.length||h.push("PI"),{keypadType:t,extraKeys:h}},S={1:function(e){return{times:e.times,buttonSets:e.buttonSets,functions:e.functions,buttonsVisible:e.buttonsVisible,answerForms:[{considered:"correct",form:e.form,simplify:e.simplify,value:e.value,key:0}]}}};e.exports={name:"expression",displayName:"Expression / Equation",defaultAlignment:"inline-block",widget:C,transform:function(e){var t=e.times,n=e.functions,r=e.buttonSets,i=e.buttonsVisible;return{keypadConfiguration:P(e),times:t,functions:n,buttonSets:r,buttonsVisible:i}},version:{major:1,minor:0},propUpgrades:S,Expression:C}},function(e,t,n){"use strict";var r=n(34),i=n(57),o=n(193),s=n(172),a=n(89),l=n(45),p=n(180),c=n(80),u=n(179),h=n(73).Expression,d=["correct","wrong","ungraded"],f=r.PropTypes.shape({considered:r.PropTypes.oneOf(d).isRequired,value:r.PropTypes.string.isRequired,form:r.PropTypes.bool.isRequired,simplify:r.PropTypes.bool.isRequired}),m=r.createClass({displayName:"ExpressionEditor",mixins:[s],propTypes:{answerForms:r.PropTypes.arrayOf(f),times:r.PropTypes.bool,buttonSets:u.buttonSetsType,functions:r.PropTypes.arrayOf(r.PropTypes.string)},getDefaultProps:function(){return{answerForms:[],times:!1,buttonSets:["basic"],functions:["f","g","h"]}},getInitialState:function(){var e;return e=0===this.props.answerForms.length||i(this.props.answerForms).any(function(e){var t=e.value;return i.indexOf(t,"\\")!==-1||i.indexOf(t,"{")!==-1}),{isTex:e}},render:function(){var e=this,t=this.props.answerForms.map(function(t,n){var r={times:e.props.times,functions:e.props.functions,buttonSets:e.props.buttonSets,buttonsVisible:"focused",form:t.form,simplify:t.simplify,value:t.value,onChange:function(t){return e.updateForm(n,t)},trackInteraction:function(){},widgetId:e.props.widgetId+"-"+n};return o(t).merge([],{draggable:!0,onChange:function(t){return e.updateForm(n,t)},onDelete:function(){return e.handleRemoveForm(n)},expressionProps:r}).freeze()}).map(function(e){return r.createElement(v,e)}),n=r.createElement(p,{components:t,onReorder:this.handleReorder,className:"answer-options-list"}),s=i(u.buttonSets).map(function(t,n){var o="basic"===n,s=i.contains(e.props.buttonSets,n)||o,a=o?"button-set-label-float":"button-set-label";return r.createElement("label",{className:a,key:n},r.createElement("input",{type:"checkbox",checked:s,disabled:o,onChange:function(){return e.handleButtonSet(n)}}),n)});return s.splice(1,1,r.createElement("label",{key:"show-div"},r.createElement("input",{type:"checkbox",onChange:this.handleToggleDiv}),r.createElement("span",{className:"show-div-button"},"show ",r.createElement(c,null,"\\div")," button"))),r.createElement("div",{className:"perseus-widget-expression-editor"},r.createElement("h3",{className:"expression-editor-h3"},"Global Options"),r.createElement("div",null,r.createElement(l,{times:this.props.times,onChange:this.props.onChange,labelAlignment:"right",label:"Use × for rendering multiplication instead of a center dot."}),r.createElement(a,null,r.createElement("p",null,"For pre-algebra problems this option displays multiplication as \\times instead of \\cdot in both the rendered output and the acceptable formats examples."))),r.createElement("div",null,r.createElement("label",null,"Function variables: ",r.createElement("input",{type:"text",defaultValue:this.props.functions.join(" "),onChange:this.handleFunctions})),r.createElement(a,null,r.createElement("p",null,'Single-letter variables listed here will be interpreted as functions. This let us know that f(x) means "f of x" and not "f times x".'))),r.createElement("div",null,r.createElement("div",null,"Button sets:"),s),this.state.isTex&&r.createElement(u,{className:"math-input-buttons",sets:this.props.buttonSets,convertDotToTimes:this.props.times,onInsert:this.handleTexInsert}),r.createElement("h3",{className:"expression-editor-h3"},"Answers"),r.createElement("p",{style:{margin:"4px 0"}},"student responses area matched against these from top to bottom"),n,r.createElement("div",null,r.createElement("button",{className:"simple-button orange",style:{fontSize:13},onClick:this.newAnswer,type:"button"},"Add new answer")))},serialize:function(){var e=["value","form","simplify","considered","key"],t=["answerForms","buttonSets","functions","times"],n=this.props.answerForms.map(function(t){return i(t).pick(e)});return o(this.props).set(["answerForms"],n).mod([],function(e){return i(e).pick(t)}).freeze()},getSaveWarnings:function(){var e=this,t=[];if(0===this.props.answerForms.length)t.push("No answers specified");else{var n=!!i(this.props.answerForms).find(function(e){return"correct"===e.considered});n||t.push("No correct answer specified"),i(this.props.answerForms).each(function(n,r){if(""===e.props.value)t.push("Answer "+(r+1)+" is empty");else{var i=KAS.parse(n.value);i.parsed?n.simplify&&!i.expr.isSimplified()&&t.push(n.value+' isn\'t simplified, but is required" +\n                            " to be'):t.push("Couldn't parse "+n.value)}})}return t},_newEmptyAnswerForm:function(){return{considered:"correct",form:!1,key:this.props.answerForms.length,simplify:!1,value:""}},newAnswer:function(){var e=this.props.answerForms.slice();e.push(this._newEmptyAnswerForm()),this.change({answerForms:e})},handleRemoveForm:function(e){var t=this.props.answerForms.slice(0,-1);this.change({answerForms:t})},updateForm:function(e,t){var n=o(this.props.answerForms).merge([e],t).freeze();this.change({answerForms:n})},handleReorder:function(e){var t=i(e).map(function(e){var t=i(e.props).pick("considered","form","simplify","value");return t.key=e.key,t});this.change({answerForms:t})},handleButtonSet:function(e){var t=this,n=i(u.buttonSets).keys(),r=i(n).filter(function(n){return i(t.props.buttonSets).contains(n)!==(n===e)});this.props.onChange({buttonSets:r})},handleToggleDiv:function(){var e,t;i(this.props.buttonSets).contains("basic+div")?(e="basic",t="basic+div"):(e="basic+div",t="basic");var n=i(this.props.buttonSets).reject(function(e){return e===t}).concat(e);this.change("buttonSets",n)},handleTexInsert:function(e){this.refs.expression.insert(e)},handleFunctions:function(e){var t={};t.functions=i.compact(e.target.value.split(/[ ,]+/)),this.props.onChange(t)}}),g=function(e,t){var n=i(e).indexOf(t);return n=(n+1)%e.length,e[n]},v=r.createClass({displayName:"AnswerOption",mixins:[s],propTypes:{considered:r.PropTypes.oneOf(d).isRequired,expressionProps:r.PropTypes.object.isRequired,form:r.PropTypes.bool.isRequired,simplify:r.PropTypes.bool.isRequired,onChange:r.PropTypes.func.isRequired,onDelete:r.PropTypes.func.isRequired},getInitialState:function(){return{deleteFocused:!1}},handleDeleteBlur:function(){this.setState({deleteFocused:!1})},render:function(){var e=null;return e=this.state.deleteFocused?r.createElement("button",{type:"button",className:"simple-button orange",onClick:this.handleImSure,onBlur:this.handleDeleteBlur},"I'm sure!"):r.createElement("button",{type:"button",className:"simple-button orange",onClick:this.handleDelete},"Delete"),r.createElement("div",{className:"expression-answer-option"},r.createElement("div",{className:"answer-handle"}),r.createElement("div",{className:"answer-body"},r.createElement("div",{className:"answer-considered"},r.createElement("div",{onClick:this.toggleConsidered,className:"answer-status "+this.props.considered},this.props.considered),r.createElement("div",{className:"answer-expression"},r.createElement(h,this.props.expressionProps))),r.createElement("div",{className:"answer-option"},r.createElement(l,{form:this.props.form,onChange:this.props.onChange,labelAlignment:"right",label:"Answer expression must have the same form."}),r.createElement(a,null,r.createElement("p",null,"The student's answer must be in the same form. Commutativity and excess negative signs are ignored."))),r.createElement("div",{className:"answer-option"},r.createElement(l,{simplify:this.props.simplify,onChange:this.props.onChange,labelAlignment:"right",label:"Answer expression must be fully expanded and simplified."}),r.createElement(a,null,r.createElement("p",null,'The student\'s answer must be fully expanded and simplified. Answering this equation (x^2+2x+1) with this factored equation (x+1)^2 will render this response "Your answer is not fully expanded and simplified."'))),r.createElement("div",{className:"remove-container"},e)))},handleImSure:function(){this.props.onDelete()},handleDelete:function(){this.setState({deleteFocused:!0})},toggleConsidered:function(){var e=g(d,this.props.considered);this.change({considered:e})}});e.exports=m},function(e,t,n){"use strict";var r=n(34),i=n(57),o=n(11).Options,s=n(181),a=n(172),l=n(17),p=n(41),c=p.iconPlus,u=p.iconTrash,h=n(42),d=n(45),f=r.createClass({displayName:"ChoiceEditor",propTypes:{apiOptions:o.propTypes,choice:r.PropTypes.object,showDelete:r.PropTypes.bool,onClueChange:r.PropTypes.func,onContentChange:r.PropTypes.func,onDelete:r.PropTypes.func},render:function(){var e=this.props.choice.correct?"correct":"incorrect",t="Type a choice here...";this.props.choice.isNoneOfTheAbove&&(t=this.props.choice.correct?"Type the answer to reveal to the user...":"None of the above");var n=r.createElement(l,{ref:"content-editor",apiOptions:this.props.apiOptions,content:this.props.choice.content||"",widgetEnabled:!1,placeholder:t,disabled:this.props.choice.isNoneOfTheAbove&&!this.props.choice.correct,onChange:this.props.onContentChange}),i=r.createElement(l,{ref:"clue-editor",apiOptions:this.props.apiOptions,content:this.props.choice.clue||"",widgetEnabled:!1,placeholder:i18n._("Why is this choice "+e+"?"),onChange:this.props.onClueChange}),o=r.createElement("a",{className:"simple-button orange delete-choice",href:"#",onClick:this.props.onDelete,title:"Remove this choice"},r.createElement(h,u));return r.createElement("div",{className:"choice-clue-editors"},r.createElement("div",{className:"choice-editor "+e},n),r.createElement("div",{className:"clue-editor"},i),this.props.showDelete&&o)}}),m=r.createClass({displayName:"RadioEditor",mixins:[a],propTypes:{apiOptions:o.propTypes,choices:r.PropTypes.arrayOf(r.PropTypes.shape({content:r.PropTypes.string,clue:r.PropTypes.string,correct:r.PropTypes.bool})),displayCount:r.PropTypes.number,
randomize:r.PropTypes.bool,hasNoneOfTheAbove:r.PropTypes.bool,multipleSelect:r.PropTypes.bool,onePerLine:r.PropTypes.bool,deselectEnabled:r.PropTypes.bool,static:r.PropTypes.bool},getDefaultProps:function(){return{choices:[{},{}],displayCount:null,randomize:!1,hasNoneOfTheAbove:!1,multipleSelect:!1,onePerLine:!0,deselectEnabled:!1}},render:function(){return r.createElement("div",null,r.createElement("div",{className:"perseus-widget-row"},r.createElement("div",{className:"perseus-widget-left-col"},r.createElement(d,{label:"Multiple selections",labelAlignment:"right",multipleSelect:this.props.multipleSelect,onChange:this.onMultipleSelectChange})),r.createElement("div",{className:"perseus-widget-right-col"},r.createElement(d,{label:"Randomize order",labelAlignment:"right",randomize:this.props.randomize,onChange:this.props.onChange}))),r.createElement(s,{ref:"baseRadio",multipleSelect:this.props.multipleSelect,onePerLine:!0,labelWrap:!1,apiOptions:this.props.apiOptions,choices:this.props.choices.map(function(e,t){var n=this;return{content:r.createElement(f,{ref:"choice-editor"+t,apiOptions:this.props.apiOptions,choice:e,onContentChange:function(e){"content"in e&&n.onContentChange(t,e.content)},onClueChange:function(e){"content"in e&&n.onClueChange(t,e.content)},onDelete:this.onDelete.bind(this,t),showDelete:this.props.choices.length>=2}),isNoneOfTheAbove:e.isNoneOfTheAbove,checked:e.correct}},this),onCheckedChange:this.onCheckedChange}),r.createElement("div",{className:"add-choice-container"},r.createElement("a",{className:"simple-button orange",href:"#",onClick:this.addChoice.bind(this,!1)},r.createElement(h,c)," ","Add a choice"," "),!this.props.hasNoneOfTheAbove&&r.createElement("a",{className:"simple-button",href:"#",onClick:this.addChoice.bind(this,!0)},r.createElement(h,c)," ","None of the above"," ")))},onMultipleSelectChange:function(e){e=e.multipleSelect;var t=i.reduce(this.props.choices,function(e,t){return t.correct?e+1:e},0);if(!e&&t>1){var n=i.map(this.props.choices,function(e){return i.defaults({correct:!1},e)});this.props.onChange({multipleSelect:e,choices:n})}else this.props.onChange({multipleSelect:e})},onCheckedChange:function(e){var t=i.map(this.props.choices,function(t,n){return i.extend({},t,{correct:e[n],content:t.isNoneOfTheAbove&&!e[n]?"":t.content})});this.props.onChange({choices:t})},onContentChange:function(e,t){var n=this.props.choices.slice();n[e]=i.extend({},n[e],{content:t}),this.props.onChange({choices:n})},onClueChange:function(e,t){var n=this.props.choices.slice();n[e]=i.extend({},n[e],{clue:t}),""===t&&delete n[e].clue,this.props.onChange({choices:n})},onDelete:function(e,t){t.preventDefault();var n=this.props.choices.slice(),r=n[e];n.splice(e,1),this.props.onChange({choices:n,hasNoneOfTheAbove:this.props.hasNoneOfTheAbove&&!r.isNoneOfTheAbove})},addChoice:function(e,t){var n=this;t.preventDefault();var r=this.props.choices.slice(),i={isNoneOfTheAbove:e},o=r.length-(this.props.hasNoneOfTheAbove?1:0);r.splice(o,0,i),this.props.onChange({choices:r,hasNoneOfTheAbove:e||this.props.hasNoneOfTheAbove},function(){n.refs["choice-editor"+o].refs["content-editor"].focus()})},setDisplayCount:function(e){this.props.onChange({displayCount:e})},focus:function(){return this.refs["choice-editor0"].refs["content-editor"].focus(),!0},getSaveWarnings:function(){return i.some(i.pluck(this.props.choices,"correct"))?[]:["No choice is marked as correct."]},serialize:function(){return i.pick(this.props,"choices","randomize","multipleSelect","displayCount","hasNoneOfTheAbove","onePerLine","deselectEnabled")}});e.exports=m},function(e,t,n){"use strict";var r=n(78),i=r.pureXsMax,o=r.pureSmMin,s=r.pureSmMax,a=r.pureMdMin,l=r.pureMdMax,p=r.pureLgMin,c=r.pureLgMax,u=r.pureXlMin;e.exports={xs:"@media screen and (max-width: "+i+")",sm:"@media screen and (min-width: "+o+") and "+("(max-width: "+s+")"),md:"@media screen and (min-width: "+a+") and "+("(max-width: "+l+")"),lg:"@media screen and (min-width: "+p+") and "+("(max-width: "+c+")"),xl:"@media screen and (min-width: "+u+"))",smOrSmaller:"@media screen and (max-width: "+s+")",mdOrSmaller:"@media screen and (max-width: "+l+")",lgOrSmaller:"@media screen and (max-width: "+c+")",smOrLarger:"@media screen and (min-width: "+o+")",mdOrLarger:"@media screen and (min-width: "+a+")",lgOrLarger:"@media screen and (min-width: "+p+")"}},function(e,t,n){"use strict";var r,i,o,s,a=n(82),l=a.StyleSheet,p=n(76),c=n(78),u=c.zIndexAboveScratchpad,h=c.zIndexInteractiveComponent,d=c.radioBorderColor,f=c.checkedColor,m=c.circleSize;e.exports=l.create({perseusInteractive:{zIndex:h,position:"relative"},aboveScratchpad:{position:"relative",zIndex:u},blankBackground:{backgroundColor:"#FDFDFD"},perseusSrOnly:{border:0,clip:"rect(0,0,0,0)",height:1,margin:-1,overflow:"hidden",padding:0,position:"absolute",width:1},responsiveLabel:(r={},r[p.smOrSmaller]={fontSize:14,lineHeight:1.3},r[p.md]={fontSize:17,lineHeight:1.4},r[p.lgOrLarger]={fontSize:20,lineHeight:1.4},r),responsiveInput:(i={},i[p.lgOrSmaller]={display:"inline-block",WebkitAppearance:"none",appearance:"none",backgroundColor:"#fff",border:"2px solid #fff",boxShadow:"0 0px 0px 1px "+d,outline:"none",boxSizing:"border-box",flexShrink:0,marginBottom:0,marginLeft:15,marginRight:15,marginTop:0,height:m,width:m},i),responsiveRadioInput:(o={},o[p.lgOrSmaller]={borderRadius:"50%",":checked":{backgroundColor:f,border:"2px solid #fff",borderRadius:"50%",boxShadow:"0 0px 0px 2px "+f,height:m,width:m}},o),responsiveMobileRadioInput:(s={},s[p.lgOrSmaller]={display:"none"},s),disableTextSelection:{userSelect:"none"}})},function(e,t,n){"use strict";e.exports={baseFontFamily:"'Proxima Nova',sans-serif",boldFontFamily:"'Proxima Nova Semibold',sans-serif",green:"#76A005",kaGreen:"#71B307",blue:"#1C758A",gray:"#AAAAAA",red:"#FFBABA",questionWidth:"480px",grayLight:"#AAAAAA",grayLighter:"#DDDDDD",learnstormBlue:"#4898FC",white:"#FFFFFF",gray98:"#FAFAFA",gray97:"#F6F7F7",gray95:"#F0F1F2",gray90:"#E3E5E6",gray85:"#D6D8DA",gray76:"#BABEC2",gray68:"#888D93",gray41:"#626569",gray25:"#3B3e40",gray17:"#21242c",black:"#000000",pureSmMin:"568px",pureMdMin:"768px",pureLgMin:"1024px",pureXlMin:"1280px",pureXsMax:"567px",pureSmMax:"767px",pureMdMax:"1023px",pureLgMax:"1279px",tableBackgroundAccent:"#F9F9F9",satBlue:"#0084CE",satSelectedBackgroundColor:"#E4F3F9",satActiveBackgroundColor:"#D0EDF4",satCorrectColor:"#009900",satCorrectBorderColor:"#00CC00",satCorrectBackgroundColor:"#E4F7E4",satIncorrectColor:"#990000",satIncorrectBorderColor:"#CC5252",satIncorrectBackgroundColor:"#F2EBEB",zIndexScratchPad:"1",zIndexAboveScratchpad:"2",zIndexInteractiveComponent:"3",zIndexCurrentlyDragging:"4",zIndexCalculator:"5",phoneMargin:16,negativePhoneMargin:-16,hintBorderWidth:4,baseUnitPx:16,interactiveSizes:{defaultBoxSize:400,defaultBoxSizeSmall:288},circleSize:20},e.exports.radioBorderColor=e.exports.gray76,e.exports.checkedColor=e.exports.kaGreen},function(e,t,n){"use strict";var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},i=n(34),o=n(57),s=i.createClass({displayName:"DragTarget",propTypes:{onDrop:i.PropTypes.func.isRequired,component:i.PropTypes.any,shouldDragHighlight:i.PropTypes.func},render:function(){var e=this.state.dragHover?{opacity:.3}:{},t=this.props.component;return i.createElement(t,r({},this.props,{style:o.extend({},this.props.style,e),onDrop:this.handleDrop,onDragEnd:this.handleDragEnd,onDragOver:this.handleDragOver,onDragEnter:this.handleDragEnter,onDragLeave:this.handleDragLeave}))},getInitialState:function(){return{dragHover:!1}},getDefaultProps:function(){return{component:"div",shouldDragHighlight:function(){return!0}}},handleDrop:function(e){e.stopPropagation(),e.preventDefault(),this.setState({dragHover:!1}),this.props.onDrop(e)},handleDragEnd:function(){this.setState({dragHover:!1})},handleDragOver:function(e){e.preventDefault()},handleDragLeave:function(){this.setState({dragHover:!1})},handleDragEnter:function(e){this.setState({dragHover:this.props.shouldDragHighlight(e)})}});e.exports=s},function(e,t,n){"use strict";var r=n(186),i=n(34),o=n(35),s=n(182),a=[],l=[],p=!1,c=function(e,t){a.push(e),l.push(t),p||(p=!0,setTimeout(h,0))},u=function(e){if("undefined"!=typeof MathJax)e();else{if("undefined"==typeof Khan||!Khan.mathJaxLoaded)throw new Error("MathJax wasn't loaded before it was needed by <TeX/>");Khan.mathJaxLoaded.then(e)}},h=function(){u(function(){MathJax.Hub.Queue(function(){var e=MathJax.Hub.elementScripts;MathJax.Hub.elementScripts=function(e){return a};try{return MathJax.Hub.Process(null,function(){for(var e=l,t=Array.isArray(e),n=0,e=t?e:e[Symbol.iterator]();;){var r;if(t){if(n>=e.length)break;r=e[n++]}else{if(n=e.next(),n.done)break;r=n.value}var i=r;i()}a=[],l=[],p=!1})}catch(e){throw e}finally{MathJax.Hub.elementScripts=e}})})},d={border:0,clip:"rect(0,0,0,0)",height:"1px",margin:"-1px",overflow:"hidden",padding:0,position:"absolute",width:"1px"},f=i.createClass({displayName:"TeX",propTypes:{children:i.PropTypes.node,onClick:i.PropTypes.func,onRender:i.PropTypes.func,style:i.PropTypes.any},mixins:[r],getDefaultProps:function(){return{onRender:function(){},onClick:null}},componentDidMount:function(){var e=this;if(this._root=o.findDOMNode(this),this.refs.katex.childElementCount>0)return void this.props.onRender(this._root);var t=this.props.children;this.setScriptText(t),c(this.script,function(){return e.props.onRender(e._root)})},componentDidUpdate:function(e,t){var n=this;if(this.refs.katex.childElementCount>0)return this.script&&u(function(){var e=MathJax.Hub.getJaxFor(n.script);e&&e.Remove()}),void this.props.onRender();var r=this.props.children;this.script?u(function(){MathJax.Hub.Queue(function(){var e=MathJax.Hub.getJaxFor(n.script);return e?e.Text(r,n.props.onRender):(n.setScriptText(r),void c(n.script,n.props.onRender))})}):(this.setScriptText(r),c(this.script,this.props.onRender))},componentWillUnmount:function(){var e=this;this.script&&u(function(){var t=MathJax.Hub.getJaxFor(e.script);t&&t.Remove()})},setScriptText:function(e){this.script||(this.script=document.createElement("script"),this.script.type="math/tex",o.findDOMNode(this.refs.mathjax).appendChild(this.script)),"text"in this.script?this.script.text=e:this.script.textContent=e},render:function(){var e=null;try{e={__html:katex.renderToString(this.props.children)}}catch(e){if(e.__proto__!==katex.ParseError.prototype)throw e}var t=null;if(e)try{t={__html:s.renderString(this.props.children)}}catch(e){}return i.createElement("span",{style:this.props.style,onClick:this.props.onClick},i.createElement("span",{ref:"mathjax"}),i.createElement("span",{ref:"katex",dangerouslySetInnerHTML:e,"aria-hidden":!!e&&!!t}),i.createElement("span",{dangerouslySetInnerHTML:t,style:d}))}});e.exports=f},function(e,t,n){"use strict";var r=n(34),i=n(35),o=n(57),s=n(183),a=n(82).css,l=r.createClass({displayName:"ButtonGroup",propTypes:{value:r.PropTypes.any,buttons:r.PropTypes.arrayOf(r.PropTypes.shape({value:r.PropTypes.any.isRequired,content:r.PropTypes.node,title:r.PropTypes.string})).isRequired,onChange:r.PropTypes.func.isRequired,allowEmpty:r.PropTypes.bool},getDefaultProps:function(){return{value:null,allowEmpty:!0}},render:function(){var e=this,t=this.props.value,n=o(this.props.buttons).map(function(n,i){return r.createElement("button",{title:n.title,type:"button",id:""+i,ref:"button"+i,key:""+i,className:a(s.button.buttonStyle,n.value===t&&s.button.selectedStyle),onClick:e.toggleSelect.bind(e,n.value)},n.content||""+n.value)}),i={display:"inline-block"};return r.createElement("div",{style:i},n)},focus:function(){return i.findDOMNode(this).focus(),!0},toggleSelect:function(e){var t=this.props.value;this.props.allowEmpty?this.props.onChange(t!==e?e:null):this.props.onChange(e)}});e.exports=l},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){var n=[],r=!0,i=!1,o=void 0;try{for(var s,a=e[Symbol.iterator]();!(r=(s=a.next()).done)&&(n.push(s.value),!t||n.length!==t);r=!0);}catch(e){i=!0,o=e}finally{try{!r&&a.return&&a.return()}finally{if(i)throw o}}return n}return function(t,n){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),i=n(184),o=n(185),s={create:function(e){return(0,i.mapObj)(e,function(e){var t=r(e,2),n=t[0],o=t[1];return[n,{_name:n+"_"+(0,i.hashObject)(o),_definition:o}]})},rehydrate:function(){var e=arguments.length<=0||void 0===arguments[0]?[]:arguments[0];(0,o.addRenderedClassNames)(e)}},a={renderStatic:function(e){(0,o.reset)(),(0,o.startBuffering)();var t=e(),n=(0,o.flushToString)();return{html:t,css:{content:n,renderedClassNames:(0,o.getRenderedClassNames)()}}}},l=function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=t.filter(function(e){return e});if(0===r.length)return"";var i=r.map(function(e){return e._name}).join("-o_O-");return(0,o.injectStyleOnce)(i,"."+i,r.map(function(e){return e._definition})),i};t.default={StyleSheet:s,StyleSheetServer:a,css:l},e.exports=t.default},function(e,t,n){function r(){for(var e=arguments,t=[],n=0;n<e.length;n++){var r=e[n];if(r)if("string"==typeof r||"number"==typeof r)t.push(r);else if("object"==typeof r)for(var i in r)r.hasOwnProperty(i)&&r[i]&&t.push(i)}return t.join(" ")}"undefined"!=typeof e&&e.exports&&(e.exports=r)},function(e,t,n){"use strict";function r(e){if(!a[e]){var t=$("<span>").text(e).appendTo("body");a[e]=t.width()+5,t.remove()}return a[e]}var i=n(34),o=n(35),s=n(57),a={},l=i.createClass({displayName:"TextListEditor",propTypes:{options:i.PropTypes.array,layout:i.PropTypes.string,onChange:i.PropTypes.func.isRequired},getDefaultProps:function(){return{options:[],layout:"horizontal"}},getInitialState:function(){return{items:this.props.options.concat("")}},componentWillReceiveProps:function(e){this.setState({items:e.options.concat("")})},render:function(){var e=["perseus-text-list-editor","perseus-clearfix","layout-"+this.props.layout].join(" "),t=s.map(this.state.items,function(e,t){return i.createElement("li",{key:t},i.createElement("input",{ref:"input_"+t,type:"text",value:e,onChange:this.onChange.bind(this,t),onKeyDown:this.onKeyDown.bind(this,t),style:{width:r(e)}}))},this);return i.createElement("ul",{className:e},t)},onChange:function(e,t){var n=s.clone(this.state.items);n[e]=t.target.value,e===n.length-1&&(n=n.concat("")),this.setState({items:n}),this.props.onChange(s.compact(n))},onKeyDown:function(e,t){var n=t.nativeEvent.keyCode;if(8===n&&""===this.state.items[e]){t.preventDefault();var r=s.clone(this.state.items),i=0===e?0:e-1;e!==r.length-1||0!==e&&""===r[i]?(r.splice(e,1),this.setState({items:r},function(){o.findDOMNode(this.refs["input_"+i]).focus()})):o.findDOMNode(this.refs["input_"+i]).focus()}else if(8===n&&1===this.state.items[e].length&&e===this.state.items.length-2){t.preventDefault();var r=s.clone(this.state.items);r.splice(e,1),this.setState({items:r}),this.props.onChange(s.compact(r))}else if(13===n){t.preventDefault();var r=s.clone(this.state.items),i=e+1;e===r.length-2?o.findDOMNode(this.refs["input_"+i]).focus():(r.splice(i,0,""),this.setState({items:r},function(){o.findDOMNode(this.refs["input_"+i]).focus()}))}}});e.exports=l},function(e,t,n){"use strict";var r=n(83),i=n(34),o=n(78),s=o.negativePhoneMargin,a=480,l=i.createClass({displayName:"FixedToResponsive",propTypes:{width:i.PropTypes.number.isRequired,height:i.PropTypes.number.isRequired,className:i.PropTypes.string,constrainHeight:i.PropTypes.bool,allowFullBleed:i.PropTypes.bool},getDefaultProps:function(){return{className:"",constrainHeight:!1,allowFullBleed:!1}},getInitialState:function(){return{viewportHeight:null,viewportWidth:null}},componentDidMount:function(){window.innerHeight<a?setTimeout(this._cacheViewportSize,800):this._cacheViewportSize()},_cacheViewportSize:function(){this.isMounted()&&this.setState({viewportHeight:Math.max(a,window.innerHeight),viewportWidth:window.innerWidth})},render:function(){var e=this.props.width/this.props.height,t=i.createElement("div",{style:{paddingBottom:100*(1/e).toFixed(4)+"%"}}),n=this.props,o=n.width,a=n.height;if(this.props.constrainHeight&&this.state.viewportHeight){var l=2/3*this.state.viewportHeight;this.props.height>=l&&(a=l,o=l*e)}var p={maxWidth:o,maxHeight:a},c=r("fixed-to-responsive",this.props.className),u=i.createElement("div",{className:c,style:p},t,this.props.children),h=this.props.allowFullBleed&&this.state.viewportWidth&&o>=this.state.viewportWidth;return h?i.createElement("div",{style:{marginLeft:s,marginRight:s}},u):u}});e.exports=l},function(e,t,n){"use strict";var r=n(34),i=n(35),o=n(57),s=n(187),a=n(188),l=s.GraphieMovable,p=n(12).deepEq,c=n(12).nestedMap,u=n(189).assert,h=n(190),d=h.createGraphie,f=r.createClass({displayName:"Graphie",propTypes:{addMouseLayer:r.PropTypes.bool,box:r.PropTypes.arrayOf(r.PropTypes.number).isRequired,children:r.PropTypes.node,isMobile:r.PropTypes.bool,onClick:r.PropTypes.func,onMouseDown:r.PropTypes.func,onMouseMove:r.PropTypes.func,onMouseUp:r.PropTypes.func,options:r.PropTypes.shape({snapStep:r.PropTypes.arrayOf(r.PropTypes.number)}),range:r.PropTypes.arrayOf(r.PropTypes.arrayOf(r.PropTypes.number)),responsive:r.PropTypes.bool,setDrawingAreaAvailable:r.PropTypes.func,setup:r.PropTypes.func.isRequired},getDefaultProps:function(){return{range:[[-10,10],[-10,10]],options:{},responsive:!1,addMouseLayer:!0}},componentDidMount:function(){this._setupGraphie(),this._updateMovables()},shouldComponentUpdate:function(e){return!p(this.props,e)},componentDidUpdate:function(e){this.props.setup!==e.setup&&window.console&&window.console.warn&&window.console.warn("<Graphie> was given a new setup function. This is a bad idea; please refactor your code to give the same setup function reference to <Graphie> on every render."),p(this.props.options,e.options)&&p(this.props.box,e.box)&&p(this.props.range,e.range)||this._setupGraphie(),this._updateMovables()},getGraphie:function(){return this._graphie},_range:function(){return o.map(this.props.range,function(e){return e[0]>=e[1]?[-10,10]:e})},_box:function(){return o.map(this.props.box,function(e){return e>0?e:340})},_scale:function(){var e=this._box(),t=this._range();return o.map(e,function(e,n){var r=t[n][1]-t[n][0];return e/r})},_setupGraphie:function(){this._removeMovables();var e=i.findDOMNode(this.refs.graphieDiv);$(e).empty();var t=this._graphie=d(e);t.init({range:this._range(),scale:this._scale(),isMobile:this.props.isMobile}),this.props.addMouseLayer&&t.addMouseLayer({onClick:this.props.onClick,onMouseDown:this.props.onMouseDown,onMouseUp:this.props.onMouseUp,onMouseMove:this.props.onMouseMove,setDrawingAreaAvailable:this.props.setDrawingAreaAvailable}),t.snap=this.props.options.snapStep||[1,1],this.props.responsive&&($(e).css({width:"100%",height:"100%"}),t.raphael.setSize("100%","100%")),this.props.setup(t,o.extend({range:this._range(),scale:this._scale()},this.props.options))},_removeMovables:function(){o.invoke(this._movables,"remove"),this._movables={}},_renderMovables:function(e,t){var n=this,r=t.graphie,i=t.oldMovables,s=t.newMovables,a=function(e){o.each(e.movableProps,function(r){e.props[r]=n._renderMovables(e.props[r],t)})},p=!1;return c(e,function(e){if(!e)return t.nextKey++,e;var o=new e.type(e.props);u(o instanceof l,"All children of a Graphie component must be Graphie movables");var c=e.key,h=null==c?"_no_id_"+t.nextKey:c;t.nextKey++;var d=e.ref;a(o);var f=i[h];if(f)if(o.constructor===f.constructor){f.props=o.props;var m=f.modify(r);"reordered"===m&&(p=!0),s[h]=f}else null==c&&"undefined"!=typeof console&&console.warn&&console.warn("Replacing a <Graphie> child with a child of a different type. Please add keys to your <Graphie> children"),f.remove(),o.add(r),p=!0,s[h]=o;else o.add(r),p=!0,s[h]=o;return p&&s[h].toFront(),d&&(n.movables[d]=s[h]),s[h]})},_updateMovables:function(){var e=this._graphie,t=this._movables,n={};this._movables=n,this.movables={},this._renderMovables(this.props.children,{nextKey:1,graphie:e,oldMovables:t,newMovables:n}),o.each(t,function(e,t){n[t]||e.remove()})},render:function(){return r.createElement("div",{className:"graphie-container"},r.createElement("div",{className:"graphie",ref:"graphieDiv"}))}});o.extend(f,s),o.extend(f,a),e.exports=f},function(e,t,n){"use strict";var r=n(34),i=r.PropTypes,o={PENDING:"pending",LOADING:"loading",LOADED:"loaded",FAILED:"failed"},s=r.createClass({displayName:"ImageLoader",propTypes:{children:r.PropTypes.oneOfType([r.PropTypes.arrayOf(r.PropTypes.node),r.PropTypes.node]),imgProps:i.any,onError:i.func,onLoad:i.func,onUpdate:i.func,preloader:i.func,src:i.string},getInitialState:function(e){return{status:this.props.src?o.LOADING:o.PENDING}},componentDidMount:function(){this.state.status===o.LOADING&&this.createLoader()},componentWillReceiveProps:function(e){this.props.src!==e.src&&this.setState({status:e.src?o.LOADING:o.PENDING})},componentDidUpdate:function(e,t){this.state.status!==o.LOADING||this.img||this.createLoader(),t.status!==this.state.status&&this.props.onUpdate()},componentWillUnmount:function(){this.destroyLoader()},createLoader:function(){this.destroyLoader(),this.img=new Image,this.img.onload=this.handleLoad,this.img.onerror=this.handleError,this.img.src=this.props.src},destroyLoader:function(){this.img&&(this.img.onload=null,this.img.onerror=null,this.img=null)},handleLoad:function(e){this.destroyLoader(),this.setState({status:o.LOADED}),this.props.onLoad&&this.props.onLoad(e)},handleError:function(e){this.destroyLoader(),this.setState({status:o.FAILED}),this.props.onError&&this.props.onError(e)},renderImg:function(){var e=this.props,t=e.src,n=e.imgProps,i={src:t};for(var o in n)n.hasOwnProperty(o)&&(i[o]=n[o]);return r.createElement("img",i)},render:function(){switch(this.state.status){case o.LOADED:return this.renderImg();case o.FAILED:if(this.props.children)return this.props.children;break;default:if(this.props.preloader)return this.props.preloader()}return null}});e.exports=s},function(e,t,n){"use strict";function r(){var e=document.createElement("bootstrap"),t={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd otransitionend",transition:"transitionend"};for(var n in t)if(void 0!==e.style[n])return{end:t[n]};return!1}function i(e,t){var n=window.scrollX,r=window.scrollY,i=document.querySelector("meta[name=viewport]");i?i.setAttribute("content",e):$("head").append('<meta name="viewport" content="'+e+'">'),document.body.style.opacity=.9999,setTimeout(function(){document.body.style.opacity=1,window.scrollTo(n,r),t&&setTimeout(t,0)},0)}function o(){}function s(e,t){this._fullHeight=this._fullWidth=this._overlay=null,this._targetImage=e,this._enableMobilePinch=t,this._$body=$(document.body)}$.fn.emulateTransitionEnd=function(e){var t=!1,n=this;$(this).one("bsTransitionEnd",function(){t=!0});var r=function(){t||$(n).trigger($.support.transition.end)};return setTimeout(r,e),this},$(function(){$.support.transition=r(),$.support.transition&&($.event.special.bsTransitionEnd={bindType:$.support.transition.end,delegateType:$.support.transition.end,handle:function(e){if($(e.target).is(this))return e.handleObj.handler.apply(this,arguments)}})}),o.prototype._initialize=function(e){this._$document||(this._activeZoom=this._initialScrollPosition=this._initialTouchPosition=this._touchMoveListener=null,this._$document=$(document),this._$window=$(window),this._$body=$(document.body),this._boundClick=$.proxy(this._clickHandler,this),this._enableMobilePinch=e)},o.prototype.handleZoomClick=function(e,t){var n=this;this._initialize(t);var r=e.target;if(r&&"IMG"===r.tagName&&!this._$body.hasClass("zoom-overlay-open"))return e.metaKey||e.ctrlKey?window.open(e.target.src,"_blank"):void(!t&&r.width>=window.innerWidth-s.getOffset()||(this._activeZoomClose(!0),t?i("width=device-width, initial-scale=1, minimum-scale=1",function(){return n._zoom(r)}):this._zoom(r),t||(this._$window.on("scroll.zoom",$.proxy(this._scrollHandler,this)),this._$document.on("keyup.zoom",$.proxy(this._keyHandler,this)),this._$document.on("touchstart.zoom",$.proxy(this._touchStart,this))),document.addEventListener("click",this._boundClick,!0),e.stopPropagation()))},o.prototype._zoom=function(e){this._activeZoom=new s(e,this._enableMobilePinch),this._activeZoom.zoomImage()},o.prototype._activeZoomClose=function(e){var t=this;this._activeZoom&&(e?(this._activeZoom.dispose(),this._disposeActiveZoom()):i("width=device-width, initial-scale=1, minimum-scale=1,\n            maximum-scale=1",function(){t._activeZoom.close(),t._disposeActiveZoom()}))},o.prototype._disposeActiveZoom=function(){this._$window.off(".zoom"),this._$document.off(".zoom"),document.removeEventListener("click",this._boundClick,!0),this._activeZoom=null},o.prototype._scrollHandler=function(e){null===this._initialScrollPosition&&(this._initialScrollPosition=window.scrollY);var t=this._initialScrollPosition-window.scrollY;Math.abs(t)>=40&&this._activeZoomClose()},o.prototype._keyHandler=function(e){27===e.keyCode&&this._activeZoomClose()},o.prototype._clickHandler=function(e){e.stopPropagation(),e.preventDefault(),this._activeZoomClose()},o.prototype._touchStart=function(e){this._initialTouchPosition=e.originalEvent.touches[0].pageY,$(e.target).on("touchmove.zoom",$.proxy(this._touchMove,this))},o.prototype._touchMove=function(e){Math.abs(e.originalEvent.touches[0].pageY-this._initialTouchPosition)>10&&(this._activeZoomClose(),$(e.target).off("touchmove.zoom"))},s._OFFSET=80,s._MAX_WIDTH=2560,s._MAX_HEIGHT=4096,s.getOffset=function(e){return e?0:s._OFFSET},s.prototype.getOffset=function(){return s.getOffset(this._enableMobilePinch)},s.prototype.zoomImage=function(){var e=document.createElement("img"),t=$(e);e.onload=function(){this._fullHeight=Number(e.height),this._fullWidth=Number(e.width);var n=this._imageOffset=$(this._targetImage).offset(),r=this._left=n.left-$(window).scrollLeft(),i=this._top=n.top-$(window).scrollTop();t.css({left:r,top:i,width:this._targetImage.width,height:this._targetImage.height}),this._zoomOriginal()}.bind(this),e.src=this._targetImage.src,this.$zoomedImage=t},s.prototype._zoomOriginal=function(){this.$zoomedImage.addClass("zoom-img").attr("data-action","zoom-out"),$(this._targetImage).css("visibility","hidden"),this._backdrop=document.createElement("div"),this._backdrop.className="zoom-backdrop",document.body.appendChild(this._backdrop),this._overlay=document.createElement("div"),this._overlay.className="zoom-overlay",document.body.appendChild(this._overlay),this._overlay.appendChild(this.$zoomedImage[0]),this._calculateZoom(),this._triggerAnimation()},s.prototype._calculateZoom=function(){var e=this._fullWidth,t=this._fullHeight,n=window.innerHeight-this.getOffset(),r=window.innerWidth-this.getOffset(),i=e/this._targetImage.width,o=e/t,s=r/n;e<r&&t<n?this._imgScaleFactor=i:o<s?this._imgScaleFactor=n/t*i:this._imgScaleFactor=r/e*i},s.prototype._triggerAnimation=function(){var e=$(window).scrollTop()+window.innerHeight/2,t=$(window).scrollLeft()+window.innerWidth/2,n=this._imgScaleFactor,r=this._imageOffset.top+this._targetImage.height/2,i=this._imageOffset.left+this._targetImage.width/2;this._translateY=(e-r)/n,this._translateX=(t-i)/n,this._zoomedInTransformString="\n        scale("+n+")\n        translate3d("+this._translateX+"px, "+this._translateY+"px, 0)\n    ",this.$zoomedImage.css({transform:this._zoomedInTransformString}).addClass("zoom-transition").one($.support.transition.end,$.proxy(this._onZoomInFinish,this)).emulateTransitionEnd(300),this._$body.addClass("zoom-overlay-open")},s.prototype._onZoomInFinish=function(){var e=this._targetImage.height*this._imgScaleFactor,t=this._targetImage.width*this._imgScaleFactor,n=0,r=0,i=0,o=0,s=0,a=0;t<window.innerWidth?(n="50%",i=-t/2):s=(t-window.innerWidth)/2,e<window.innerHeight?(r="50%",o=-e/2):a=(e-window.innerHeight)/2,this.$zoomedImage.css({height:e,left:n,marginLeft:i,marginTop:o,top:r,transform:"",width:t}).removeClass("zoom-transition"),$(this._overlay).scrollLeft(s).scrollTop(a)},s.prototype.close=function(){var e=this;this._$body.removeClass("zoom-overlay-open").addClass("zoom-overlay-transitioning"),this.$zoomedImage.css({height:this._targetImage.height,left:this._left,marginLeft:0,marginTop:0,top:this._top,transform:this._zoomedInTransformString,width:this._targetImage.width}).removeClass("zoom-transition"),$(this._overlay).scrollLeft(0).scrollTop(0),setTimeout(function(){e.$zoomedImage.css({transform:"scale(1)"}).addClass("zoom-transition").one($.support.transition.end,$.proxy(e.dispose,e)).emulateTransitionEnd(300)},10)},s.prototype.dispose=function(){this.$zoomedImage&&this.$zoomedImage[0].parentNode&&(this.$zoomedImage.remove(),this.$zoomedImage=null,this._overlay.parentNode.removeChild(this._overlay),this._backdrop.parentNode.removeChild(this._backdrop),this._$body.removeClass("zoom-overlay-transitioning")),$(this._targetImage).css("visibility","visible")},t.ZoomService=new o},function(e,t,n){"use strict";var r=n(34),i=n(192),o=r.createClass({displayName:"InfoTip",getInitialState:function(){return{didMount:!1}},componentDidMount:function(){this.setState({didMount:!0})},render:function(){return this.state.didMount?r.createElement(i,this.props):r.createElement("div",null)}});e.exports=o},function(e,t,n){"use strict";var r=n(34),i=n(89),o=r.createClass({displayName:"ItemExtrasEditor",propTypes:{calculator:r.PropTypes.bool,chi2Table:r.PropTypes.bool,onChange:r.PropTypes.func.isRequired,periodicTable:r.PropTypes.bool,tTable:r.PropTypes.bool,zTable:r.PropTypes.bool},getDefaultProps:function(){return{calculator:!1,chi2Table:!1,periodicTable:!1,tTable:!1,zTable:!1}},serialize:function(){return{calculator:this.props.calculator,chi2Table:this.props.chi2Table,periodicTable:this.props.periodicTable,tTable:this.props.tTable,zTable:this.props.zTable}},render:function(){var e=this;return r.createElement("div",{className:"perseus-answer-editor"},r.createElement("div",{className:"perseus-answer-options"},r.createElement("div",null,r.createElement("label",null,"Show calculator:"," ",r.createElement("input",{type:"checkbox",checked:this.props.calculator,onChange:function(t){e.props.onChange({calculator:t.target.checked})}})),r.createElement(i,null,"Use the calculator when completing difficult calculations is NOT the intent of the question. DON’T use the calculator when testing the student’s ability to complete different types of computations.")),r.createElement("div",null,r.createElement("label",null,"Show periodic table:"," ",r.createElement("input",{type:"checkbox",checked:this.props.periodicTable,onChange:function(t){e.props.onChange({periodicTable:t.target.checked})}})),r.createElement(i,null,"This provides the student with the ability to view a periodic table of the elements, e.g., for answering chemistry questions.")),r.createElement("div",null,r.createElement("label",null,"Show z table (statistics):"," ",r.createElement("input",{type:"checkbox",checked:this.props.zTable,onChange:function(t){e.props.onChange({zTable:t.target.checked})}})),r.createElement(i,null,"This provides the student with the ability to view a table of critical values for the z distribution, e.g. for answering statistics questions.")),r.createElement("div",null,r.createElement("label",null,"Show t table (statistics):"," ",r.createElement("input",{type:"checkbox",checked:this.props.tTable,onChange:function(t){e.props.onChange({tTable:t.target.checked})}})),r.createElement(i,null,"This provides the student with the ability to view a table of critical values for the Student's t distribution, e.g. for answering statistics questions.")),r.createElement("div",null,r.createElement("label",null,"Show chi-squared table (statistics):"," ",r.createElement("input",{type:"checkbox",checked:this.props.chi2Table,onChange:function(t){e.props.onChange({chi2Table:t.target.checked})}})),r.createElement(i,null,"This provides the student with the ability to view a table of critical values for the chi-squared distribution, e.g. for answering statistics questions."))));
}});e.exports=o},function(e,t,n){"use strict";var r,i=n(82),o=i.StyleSheet,s=i.css,a=n(34),l=n(83),p=n(172),c=n(194),u=n(57),h=n(11).ClassNames,d=n(11).Options,f=n(41),m=f.iconCircle,g=f.iconCircleThin,v=n(42),y=n(28),b=n(12),E=n(76),T=n(77),x=a.createClass({displayName:"Categorizer",mixins:[c,p],propTypes:{apiOptions:d.propTypes,categories:a.PropTypes.arrayOf(a.PropTypes.string),items:a.PropTypes.arrayOf(a.PropTypes.string),trackInteraction:a.PropTypes.func.isRequired,values:a.PropTypes.arrayOf(a.PropTypes.number)},getDefaultProps:function(){return{items:[],categories:[],values:[]}},getInitialState:function(){return{uniqueId:u.uniqueId("perseus_radio_")}},render:function(){var e=this,t=this,n=this.props.apiOptions.isMobile,r=this.props.items.map(function(e,t){return[e,t]});this.props.randomizeItems&&(r=b.shuffle(r,this.props.problemNum));var i=a.createElement("table",{className:"categorizer-table"},a.createElement("thead",null,a.createElement("tr",null,a.createElement("th",null," "),this.props.categories.map(function(e,t){return a.createElement("th",{className:s(C.header),key:t},a.createElement(y,{content:e}))}))),a.createElement("tbody",null,r.map(function(r){var i=r[0],o=r[1],l=t.state.uniqueId+"_"+o;return a.createElement("tr",{key:o},a.createElement("td",null,a.createElement(y,{content:i})),u.range(t.props.categories.length).map(function(r){var i=t.props.values[o]===r;return a.createElement("td",{className:"category "+s(C.cell,C.responsiveCell),key:r},a.createElement("div",{className:h.INTERACTIVE,onClick:e.onChange.bind(e,o,r)},n&&a.createElement("input",{type:"radio",name:l,className:s(T.responsiveInput,T.responsiveRadioInput),checked:i,onChange:e.onChange.bind(e,o,r),onClick:function(e){return e.stopPropagation()}}),!n&&a.createElement("span",{className:s(C.responsiveSpan,C.radioSpan,i&&C.checkedRadioSpan,e.props.static&&i&&C.staticCheckedRadioSpan)},i?a.createElement(v,m):a.createElement(v,g))))}))}))),o=l({"categorizer-container":!0,"static-mode":this.props.static}),p=this.props.apiOptions.isMobile?[C.fullBleedContainer]:[];return a.createElement("div",{className:o+" "+s.apply(void 0,p)},i)},onChange:function(e,t){var n=u.clone(this.props.values);n[e]=t,this.change("values",n),this.props.trackInteraction()},simpleValidate:function(e){return x.validate(this.getUserInput(),e)}});u.extend(x,{validate:function(e,t){var n=!0,r=!0;return u.each(t.values,function(t,i){null==e.values[i]&&(n=!1),e.values[i]!==t&&(r=!1)}),n?{type:"points",earned:r?1:0,total:1,message:null}:{type:"invalid",message:i18n._("Make sure you select something for every row.")}}});var w=16,C=o.create({fullBleedContainer:(r={},r[E.mdOrSmaller]={marginLeft:-w,marginRight:-w,overflowX:"auto"},r),header:{textAlign:"center",verticalAlign:"bottom"},cell:{textAlign:"center",padding:0,color:"#ccc",verticalAlign:"middle"},radioSpan:{fontSize:30,paddingRight:3,":hover":{color:"#999"}},checkedRadioSpan:{color:"#333"},staticCheckedRadioSpan:{color:"#888"}});e.exports={name:"categorizer",displayName:"Categorizer",widget:x,transform:function(e){return u.pick(e,"items","categories","randomizeItems")},staticTransform:function(e){return u.pick(e,"items","categories","values","randomizeItems")}}},function(e,t,n){"use strict";var r=n(34),i=n(172),o=n(57),s=n(11).Options,a=n(173),l=n(45),p=n(84),c=n(91).widget,u=r.createClass({displayName:"CategorizerEditor",mixins:[a,i],propTypes:{apiOptions:s.propTypes,items:r.PropTypes.arrayOf(r.PropTypes.string),categories:r.PropTypes.arrayOf(r.PropTypes.string),values:r.PropTypes.arrayOf(r.PropTypes.number),randomizeItems:r.PropTypes.bool},getDefaultProps:function(){return{items:[],categories:[],values:[],randomizeItems:!1}},render:function(){var e=this;return r.createElement("div",null,r.createElement("div",{className:"perseus-widget-row"},r.createElement(l,{label:"Randomize item order",labelAlignment:"right",randomizeItems:this.props.randomizeItems,onChange:this.props.onChange})),"Categories:",r.createElement(p,{options:this.props.categories,onChange:function(t){e.change("categories",t)},layout:"horizontal"}),"Items:",r.createElement(p,{options:this.props.items,onChange:function(t){e.change({items:t,values:o.first(e.props.values,t.length)})},layout:"vertical"}),r.createElement(c,{apiOptions:this.props.apiOptions,items:this.props.items,categories:this.props.categories,values:this.props.values,onChange:function(t){e.props.onChange(t)},trackInteraction:function(){}}))}});e.exports=u},function(e,t,n){"use strict";function r(e){var t=c.replace("{programID}",e),n=document.location.hostname,r="www.khanacademy.org";return p.test(n)&&(r=n),t.replace("{hostname}",r)}var i=n(34),o=n(57),s=n(172),a=n(12).updateQueryString,l=2,p=/khanacademy\.org/,c="https://{hostname}/computer-programming/program/{programID}/embedded?embed=yes&author=no",u=i.createClass({displayName:"CSProgram",mixins:[s],propTypes:{programID:i.PropTypes.string,width:i.PropTypes.number,height:i.PropTypes.number,settings:i.PropTypes.array,showEditor:i.PropTypes.bool,showButtons:i.PropTypes.bool,status:i.PropTypes.oneOf(["incomplete","incorrect","correct"]),message:i.PropTypes.string},getDefaultProps:function(){return{showEditor:!1,showButtons:!1,status:"incomplete",message:null}},handleMessageEvent:function(e){var t={};try{t=JSON.parse(e.originalEvent.data)}catch(e){return}if(!o.isUndefined(t.testsPassed)){var n=t.testsPassed?"correct":"incorrect";this.change({status:n,message:t.message})}},componentDidMount:function(){$(window).on("message",this.handleMessageEvent)},componentWillUnmount:function(){$(window).off("message",this.handleMessageEvent)},render:function(){if(!this.props.programID)return i.createElement("div",null);var e,t=r(this.props.programID),n={height:this.props.height};if(this.props.showEditor?(t+="&editor=yes",n.width="100%",e="perseus-scratchpad-editor"):(t+="&editor=no",n.width=this.props.width+l,e="perseus-scratchpad"),this.props.showButtons?(t+="&buttons=yes",n.height+=50):t+="&buttons=no",this.props.settings){var s={};o.each(this.props.settings,function(e){e.name&&e.value&&(s[e.name]=e.value)}),t=a(t,"settings",JSON.stringify(s))}return i.createElement("iframe",{sandbox:"allow-same-origin allow-scripts",src:t,style:n,className:e,allowFullScreen:!0})},simpleValidate:function(e){return u.validate({status:this.props.status,message:this.props.message},e)},statics:{validate:function(e,t){return"correct"===e.status?{type:"points",earned:1,total:1,message:e.message||null}:"incorrect"===e.status?{type:"points",earned:0,total:1,message:e.message||null}:{type:"invalid",message:"Keep going, you're not there yet!"}}}});e.exports={name:"cs-program",displayName:"CS Program",supportedAlignments:["block","full-width"],widget:u}},function(e,t,n){"use strict";function r(e){var t=m.exec(e);return t&&(e=t[1]),e}var i=n(34),o=n(57),s=n(172),a=n(173),l=n(171),p=n(89),c=n(45),u=400,h=400,d=i.createClass({displayName:"PairEditor",mixins:[s,a],propTypes:{name:i.PropTypes.string,value:i.PropTypes.string},getDefaultProps:function(){return{name:"",value:""}},render:function(){return i.createElement("fieldset",{className:"pair-editor"},i.createElement("label",null,"Name:"," ",i.createElement(l,{value:this.props.name,onChange:this.change("name")})),i.createElement("label",null," Value:"," ",i.createElement(l,{value:this.props.value,onChange:this.change("value")})))}}),f=i.createClass({displayName:"PairsEditor",mixins:[s,a],propTypes:{pairs:i.PropTypes.arrayOf(i.PropTypes.shape({name:i.PropTypes.string,value:i.PropTypes.string})).isRequired},render:function(){var e=this,t=o.map(this.props.pairs,function(t,n){return i.createElement(d,{key:n,name:t.name,value:t.value,onChange:e.handlePairChange.bind(e,n)})});return i.createElement("div",null,t)},handlePairChange:function(e,t){var n=this.props.pairs.slice();n[e]=t;var r=n[n.length-1];r.name&&r.value&&n.push({name:"",value:""}),this.change("pairs",n)}}),m=/khanacademy\.org\/computer-programming\/[^\/]+\/(\d+)/,g=i.createClass({displayName:"CSProgramEditor",mixins:[s,a],getDefaultProps:function(){return{programID:"",settings:[{name:"",value:""}],showEditor:!1,showButtons:!1,width:u,height:h}},render:function(){return i.createElement("div",null,i.createElement("label",null,"Url or Program ID:"," ",i.createElement(l,{name:"programID",value:this.props.programID,onChange:this._handleProgramIDChange})),i.createElement("br",null),i.createElement(c,{label:"Show Editor",showEditor:this.props.showEditor,onChange:this.props.onChange}),i.createElement(p,null,'If you show the editor, you should use the "full-width" alignment to make room for the width of the editor.'),i.createElement("br",null),i.createElement(c,{label:"Show Buttons",showButtons:this.props.showButtons,onChange:this.props.onChange}),i.createElement("br",null),i.createElement("label",null,"Settings:",i.createElement(f,{name:"settings",pairs:this.props.settings,onChange:this._handleSettingsChange}),i.createElement(p,null,"Settings that you add here are available to the program as an object returned by ",i.createElement("code",null,"Program.settings()"))))},_handleSettingsChange:function(e){this.change({settings:e.pairs})},_handleProgramIDChange:function(e){var t=this;e=r(e),$.getJSON("https://www.khanacademy.org/api/internal/scratchpads/"+e).done(function(n){t.change({width:n.width,height:n.height,programID:e})}).fail(function(n,r,i){console.error("Error retrieving scratchpad info for program ID ",e),console.error(r+", "+i),t.change({width:u,height:h,programID:e})})}});e.exports=g},function(e,t,n){"use strict";var r=n(82),i=r.StyleSheet,o=r.css,s=n(83),a=n(34),l=n(35),p=n(57),c=n(11).ClassNames,u=n(11).Options,h=n(78),d=n(12).captureScratchpadTouchStart,f=a.createClass({displayName:"Dropdown",propTypes:{apiOptions:u.propTypes,choices:a.PropTypes.arrayOf(a.PropTypes.string),onChange:a.PropTypes.func.isRequired,placeholder:a.PropTypes.string,selected:a.PropTypes.number,trackInteraction:a.PropTypes.func.isRequired},getDefaultProps:function(){return{choices:[],selected:0,placeholder:"",apiOptions:u.defaults}},render:function(){var e=this.props.choices.slice(),t=s({"perseus-widget-dropdown":!0});return a.createElement("select",{onChange:this._handleChangeEvent,onTouchStart:d,className:t+" "+o(v.dropdown)+" "+c.INTERACTIVE,disabled:this.props.apiOptions.readOnly,value:this.props.selected},a.createElement("option",{value:0,disabled:!0},this.props.placeholder),e.map(function(e,t){return a.createElement("option",{key:""+(t+1),value:t+1},e)}))},focus:function(){return l.findDOMNode(this).focus(),!0},_handleChangeEvent:function(e){this._handleChange(parseInt(e.target.value))},_handleChange:function(e){this.props.trackInteraction(),this.props.onChange({selected:e})},getUserInput:function(){return{value:this.props.selected}},simpleValidate:function(e){return f.validate(this.getUserInput(),e)}});p.extend(f,{validate:function(e,t){var n=e.value;if(0===n)return{type:"invalid",message:null};var r=t.choices[n-1].correct;return{type:"points",earned:r?1:0,total:1,message:null}}});var m=function(e){return{placeholder:e.placeholder,choices:p.map(e.choices,function(e){return e.content})}},g=24,v=i.create({dropdown:{appearance:"none",background:"url(/images/dropdown.png) no-repeat right",backgroundColor:"transparent",border:"1px solid "+h.gray76,borderRadius:4,boxShadow:"none",fontFamily:h.baseFontFamily,padding:"9px "+(g+1)+"px 9px 9px",":focus":{outline:"none",background:"url(/images/dropdown-focused.png) no-repeat right",border:"2px solid "+h.kaGreen,padding:"8px "+g+"px 8px 8px"},":disabled":{color:h.gray68}}});e.exports={name:"dropdown",displayName:"Drop down",defaultAlignment:"inline-block",accessible:!0,widget:f,transform:m}},function(e,t,n){"use strict";var r=n(34),i=n(35),o=n(57),s=n(41),a=s.iconPlus,l=s.iconTrash,p=n(89),c=n(42),u=n(173),h=r.createClass({displayName:"DropdownEditor",mixins:[u],propTypes:{choices:r.PropTypes.arrayOf(r.PropTypes.shape({content:r.PropTypes.string,correct:r.PropTypes.bool})),placeholder:r.PropTypes.string},getDefaultProps:function(){return{placeholder:"",choices:[{content:"",correct:!1}]}},render:function(){var e=o.uniqueId("perseus_dropdown_");return r.createElement("div",{className:"perseus-widget-dropdown"},r.createElement("div",{className:"dropdown-info"},"Dropdown",r.createElement(p,null,r.createElement("p",null,"The drop down is useful for making inequalities in a custom format. We normally use the symbols ","<",", ",">",', ≤, ≥ (in that order) which you can copy into the choices. When possible, use the "multiple choice" answer type instead.'))),r.createElement("div",{className:"dropdown-placeholder"},r.createElement("input",{type:"text",placeholder:"Placeholder value",value:this.props.placeholder,onChange:this.onPlaceholderChange}),r.createElement(p,null,r.createElement("p",null,"This value will appear as the drop down default. It should give the user some indication of the values available in the drop down itself, e.g., Yes/No/Maybe."))),r.createElement("div",{className:"clearfix"}),r.createElement("ul",{className:"dropdown-choices"},this.props.choices.map(function(t,n){var i=t.correct?"correct":"incorrect";return r.createElement("li",{key:""+n},r.createElement("div",null,r.createElement("input",{ref:"radio"+n,type:"radio",name:e,checked:t.correct?"checked":"",onChange:this.onCorrectChange.bind(this,n),value:n}),r.createElement("input",{type:"text",ref:"editor"+n,onChange:this.onContentChange.bind(this,n),className:i,value:t.content}),r.createElement("a",{href:"#",className:"simple-button orange",onClick:this.removeChoice.bind(this,n)},r.createElement("span",{className:"remove-choice"},r.createElement(c,l)))))},this)),r.createElement("div",{className:"add-choice-container"},r.createElement("a",{href:"#",className:"simple-button orange",onClick:this.addChoice},r.createElement(c,a)," ","Add a choice"," ")))},onPlaceholderChange:function(e){var t=e.target.value;this.props.onChange({placeholder:t})},onCorrectChange:function(e){var t=o.map(this.props.choices,function(t,n){return o.extend({},t,{correct:n===e})});this.props.onChange({choices:t})},onContentChange:function(e,t){var n=this.props.choices.slice(),r=o.clone(n[e]);r.content=t.target.value,n[e]=r,this.props.onChange({choices:n})},addChoice:function(e){e.preventDefault();var t=this.props.choices,n={content:"",correct:!1};this.props.onChange({choices:t.concat([n])},this.focus.bind(this,t.length))},removeChoice:function(e,t){t.preventDefault();var n=o(this.props.choices).clone();n.splice(e,1),this.props.onChange({choices:n})},focus:function(e){return i.findDOMNode(this.refs["editor"+e]).focus(),!0}});e.exports=h},function(e,t,n){"use strict";var r,i,o=n(82),s=o.StyleSheet,a=o.css,l=n(34),p=n(35),c=n(57),u=n(172),h=n(11),d=n(28),f=n(76),m=n(78),g={showPrompt:"Explain",hidePrompt:"Hide explanation",explanation:"explanation goes here\n\nmore explanation",widgets:{}},v=l.createClass({displayName:"Explanation",mixins:[u],propTypes:{apiOptions:h.Options.propTypes,explanation:l.PropTypes.string,hidePrompt:l.PropTypes.string,showPrompt:l.PropTypes.string,trackInteraction:l.PropTypes.func.isRequired,widgets:l.PropTypes.object},getDefaultProps:function(){return g},getInitialState:function(){return{expanded:!1,contentHeight:0}},_onClick:function(){this._updateHeight(),this.setState({expanded:!this.state.expanded}),this.props.trackInteraction()},_updateHeight:function(){var e=p.findDOMNode(this.refs.content),t=this.props.apiOptions.isMobile,n=Array.prototype.reduce.call(e.childNodes,function(e,t){return e+(t.offsetHeight||0)},t?0:2*b);n!==this.state.contentHeight&&this.setState({contentHeight:n})},componentDidMount:function(){this._updateHeight()},componentDidUpdate:function(e,t){e!==this.props&&this._updateHeight()},render:function(){var e=this.props.apiOptions.baseElements.Link,t=this.props.apiOptions,n=t.readOnly,r=t.isMobile,i=this.state.expanded?this.props.hidePrompt:this.props.showPrompt,o=void 0,s=n?null:"javascript:void(0)",p=n?null:this._onClick;o=r?l.createElement("div",{className:a(w.linkContainer)},l.createElement("a",{className:a(w.mobileExplanationLink),href:s,onClick:p},i),this.state.expanded&&l.createElement("svg",{className:a(w.disclosureArrow)},l.createElement("polygon",{style:{fill:x},points:"0,"+T+" "+(E+","+T+" ")+(E/2+",0")}))):l.createElement("div",{className:a(w.linkContainer)},l.createElement(e,{className:a(w.explanationLink),href:s,onClick:p},"["+i+"]"));var c=r?w.contentExpandedMobile:w.contentExpanded;return l.createElement("div",{className:a(w.container)},o,l.createElement("div",{className:a(w.content,r&&w.contentMobile,this.state.expanded&&c),style:{height:this.state.expanded?this.state.contentHeight:0,overflow:this.state.expanded?"visible":"hidden"},ref:"content"},l.createElement(d,{apiOptions:this.props.apiOptions,content:this.props.explanation,widgets:this.props.widgets})))},getUserInput:function(){return{}},simpleValidate:function(e){return v.validate(this.getUserInput(),e)}}),y=23,b=10,E=30,T=14,x=m.gray95,w=s.create({container:{display:"inline",position:"relative"},linkContainer:{display:"inline-block"},explanationLink:(r={fontStyle:"italic",color:"#007d96"},r[f.xl]={fontSize:20,lineHeight:1.1},r[f.lgOrSmaller]={fontSize:17,lineHeight:1.4},r[f.smOrSmaller]={fontSize:14,lineHeight:1.3},r),mobileExplanationLink:(i={color:m.kaGreen,borderBottom:"dashed 1px "+m.kaGreen,textDecoration:"none"},i[f.xl]={fontSize:22,lineHeight:1.4},i[f.lgOrSmaller]={fontSize:20,lineHeight:1.5},i[f.smOrSmaller]={fontSize:18,lineHeight:1.2},i),content:{position:"relative",transition:"all 0.1s"},contentExpanded:{borderLeft:"5px solid #ccc",marginLeft:-y,paddingLeft:y,paddingTop:b,paddingBottom:b,marginBottom:T,marginTop:T},contentExpandedMobile:{boxSizing:"content-box",paddingTop:32,paddingBottom:32,marginTop:T},contentMobile:{background:x,marginLeft:m.negativePhoneMargin,marginRight:m.negativePhoneMargin,paddingLeft:m.phoneMargin,paddingRight:m.phoneMargin},disclosureArrow:{bottom:-(T+5),height:T,left:"50%",marginLeft:-(E/2),position:"absolute",width:E}});c.extend(v,{validate:function(e,t){return{type:"points",earned:0,total:0,message:null}}}),e.exports={name:"explanation",displayName:"Explanation (for hints)",defaultAlignment:"inline",widget:v,transform:c.identity}},function(e,t,n){"use strict";var r=n(34),i=n(57),o=n(172),s=n(173),a=n(17),l=n(176),p={showPrompt:"Explain",hidePrompt:"Hide explanation",explanation:"explanation goes here\n\nmore explanation",widgets:{}},c=r.createClass({displayName:"ExplanationEditor",mixins:[s,o],propTypes:{showPrompt:r.PropTypes.string,hidePrompt:r.PropTypes.string,explanation:r.PropTypes.string,widgets:r.PropTypes.object,apiOptions:r.PropTypes.any},getDefaultProps:function(){return p},getInitialState:function(){return{}},render:function(){var e=this;return r.createElement("div",{className:"perseus-widget-explanation-editor"},r.createElement("div",{className:"perseus-widget-row"},r.createElement("label",null,"Prompt to show explanation: ",r.createElement(l,{value:this.props.showPrompt,onChange:this.change("showPrompt")}))),r.createElement("div",{className:"perseus-widget-row"},r.createElement("label",null,"Prompt to hide explanation: ",r.createElement(l,{value:this.props.hidePrompt,onChange:this.change("hidePrompt")}))),r.createElement("div",{className:"perseus-widget-row"},r.createElement(a,{apiOptions:this.props.apiOptions,content:this.props.explanation,widgets:this.props.widgets,widgetEnabled:!0,immutableWidgets:!1,onChange:function(t){var n={};i.has(t,"content")&&(n.explanation=t.content),i.has(t,"widgets")&&(n.widgets=t.widgets),e.change(n)}})))}});e.exports=c},function(e,t,n){"use strict";function r(e,t,n){var r=function(e,t,n){return(t[0]-e[0])*(n[1]-e[1])-(n[0]-e[0])*(t[1]-e[1])};return r(n[0],n[1],t)>0!=r(n[0],n[1],e)>0}var i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},o=n(34),s=n(57),a=n(195),l=n(38),p=n(12),c=n(81),u=n(86),h=u.MovablePoint,d=u.MovableLine,f=n(196),m=n(221).number,g=n(221).vector,v=n(221).point,y=n(197),b=n(159),E=b.containerSizeClassPropType,T=n(78),x=T.interactiveSizes,w=n(159),C=w.getInteractiveBoxFromSizeClass,P=n(172),S=n(207),k=S.GrapherUtil,N=S.typeToButton,M=S.functionForType,_=S.DEFAULT_GRAPHER_PROPS,O={padding:"5px 5px"},A=o.createClass({displayName:"FunctionGrapher",mixins:[P],_coords:function(e){e=e||this.props;var t=e.graph,n=e.model&&k.maybePointsFromNormalized(e.model.defaultCoords,t.range,t.step,t.snapStep);return e.coords||n||null},_asymptote:function(e){return e=e||this.props,e.asymptote},propTypes:{flexibleType:o.PropTypes.bool,graph:o.PropTypes.any,hideHairlines:o.PropTypes.func,isMobile:o.PropTypes.bool,model:o.PropTypes.any,onChange:o.PropTypes.func,setDrawingAreaAvailable:o.PropTypes.func,showHairlines:o.PropTypes.func,showTooltips:o.PropTypes.bool,static:o.PropTypes.bool},getDefaultProps:function(){return{graph:{range:[[-10,10],[-10,10]],step:[1,1]},coords:null,asymptote:null,isMobile:!1}},render:function(){var e=this,t=function(t,n){return o.createElement(h,{key:n,coord:t,static:e.props.static,constraints:[a.MovablePoint.constraints.bound(),a.MovablePoint.constraints.snap(),function(t){var r=s.all(e._coords(),function(e,r){return n===r||!e||!m.equal(t[0],e[0])});if(!r)return!1;if(e.props.model&&e.props.model.extraCoordConstraint){var i=e.props.model.extraCoordConstraint,o=s.clone(e._coords()),a=s.clone(o[n]);return o[n]=t,i(t,a,o,e._asymptote(),e.props.graph)}return r}],onMove:function(t,i){var o,a=e._asymptote();o=a&&e.props.model.allowReflectOverAsymptote&&r(t,i,a)?s.map(e._coords(),function(e){return v.reflectOverLine(e,a)}):s.clone(e._coords()),o[n]=t,e.props.onChange({coords:o})},showHairlines:e.props.showHairlines,hideHairlines:e.props.hideHairlines,showTooltips:e.props.showTooltips,isMobile:e.props.isMobile})},n=s.map(this._coords(),t),p=this.props.graph.box,c=this.props.graph.backgroundImage,d=null;if(c.url){var f=p[0]/x.defaultBoxSize;d=o.createElement(l,{src:c.url,width:c.width,height:c.height,scale:f})}return o.createElement("div",{className:"perseus-widget perseus-widget-grapher",style:{width:p[0],height:this.props.flexibleType?"auto":p[1],boxSizing:"initial"}},o.createElement("div",{className:"graphie-container above-scratchpad",style:{width:p[0],height:p[1]}},d,o.createElement(u,i({},this.props.graph,{setDrawingAreaAvailable:this.props.setDrawingAreaAvailable}),this.props.model&&this.renderPlot(),this.props.model&&this.renderAsymptote(),this.props.model&&n)))},renderPlot:function(){var e=this.props.model,t=this.props.graph.range[0],n=i({stroke:this.props.isMobile?y.BLUE_C:y.DYNAMIC},this.props.isMobile?{"stroke-width":3}:{}),r=e.getCoefficients(this._coords(),this._asymptote());if(r){var s=e.getPropsForCoeffs(r,t);return o.createElement(e.Movable,i({},s,{key:this.props.model.url,range:t,style:n}))}},renderAsymptote:function(){var e=this,t=this.props.model,n=this.props.graph,r=this._asymptote(),i={strokeDasharray:"- "};return r&&o.createElement(d,{onMove:function(t,n){var r=g.subtract(t,n),i=s.map(e._asymptote(),function(e){return g.add(e,r)});e.props.onChange({asymptote:i})},constraints:[a.MovableLine.constraints.bound(),a.MovableLine.constraints.snap(),function(r,i){var o=g.subtract(r,i),a=s.map(e._asymptote(),function(e){return g.add(e,o)});return!t.extraAsymptoteConstraint||t.extraAsymptoteConstraint(r,i,e._coords(),a,n)}],normalStyle:i,highlightStyle:i},s.map(r,function(t,n){return o.createElement(h,{key:"asymptoteCoord-"+n,coord:t,static:!0,draw:null,extendLine:!0,showHairlines:e.props.showHairlines,hideHairlines:e.props.hideHairlines,showTooltips:e.props.showTooltips,isMobile:e.props.isMobile})}))}}),I=o.createClass({displayName:"Grapher",propTypes:{apiOptions:o.PropTypes.any,availableTypes:o.PropTypes.arrayOf(o.PropTypes.any),containerSizeClass:E.isRequired,graph:o.PropTypes.any,markings:o.PropTypes.string,onChange:o.PropTypes.func,plot:o.PropTypes.any,static:o.PropTypes.bool,trackInteraction:o.PropTypes.func.isRequired},getDefaultProps:function(){return _},render:function(){var e=this.props.plot.type,t=this.props.plot.coords,n=this.props.plot.asymptote,r=o.createElement("div",{style:O,className:"above-scratchpad"},o.createElement(c,{value:e,allowEmpty:!0,buttons:s.map(this.props.availableTypes,N),onChange:this.handleActiveTypeChange})),a=C(this.props.containerSizeClass),l=i({},this.props.graph,k.getGridAndSnapSteps(this.props.graph,a[0]),{gridConfig:this._getGridConfig(i({},this.props.graph,{box:a},k.getGridAndSnapSteps(this.props.graph,a[0])))}),p={graph:{box:a,range:l.range,step:l.step,snapStep:l.snapStep,backgroundImage:l.backgroundImage,options:l,setup:this._setupGraphie},onChange:this.handlePlotChanges,model:e&&M(e),coords:t,asymptote:n,static:this.props.static,setDrawingAreaAvailable:this.props.apiOptions.setDrawingAreaAvailable,isMobile:this.props.apiOptions.isMobile,showTooltips:this.props.graph.showTooltips,showHairlines:this.showHairlines,hideHairlines:this.hideHairlines};return o.createElement("div",null,o.createElement(A,p),this.props.availableTypes.length>1&&r)},handlePlotChanges:function(e){var t=s.extend({},this.props.plot,e);this.props.onChange({plot:t}),this.props.trackInteraction()},handleActiveTypeChange:function(e){var t=this.props.graph,n=s.extend({},this.props.plot,k.defaultPlotProps(e,t));this.props.onChange({plot:n})},_getGridConfig:function(e){return s.map(e.step,function(t,n){return p.gridDimensionConfig(t,e.range[n],e.box[n],e.gridStep[n])})},_setupGraphie:function(e,t){var n=this.props.apiOptions.isMobile;if("graph"===t.markings?(e.graphInit({range:t.range,scale:s.pluck(t.gridConfig,"scale"),axisArrows:"<->",labelFormat:function(e){return"\\small{"+e+"}"},gridStep:t.gridStep,snapStep:t.snapStep,tickStep:n?[2,2]:s.pluck(t.gridConfig,"tickStep"),labelStep:1,unityLabels:s.pluck(t.gridConfig,"unityLabel"),isMobile:n}),e.label([0,t.range[1][1]],t.labels[1],n?"below right":"above"),e.label([t.range[0][1],0],t.labels[0],n?"above left":"right")):"grid"===t.markings?e.graphInit({range:t.range,scale:s.pluck(t.gridConfig,"scale"),gridStep:t.gridStep,axes:!1,ticks:!1,labels:!1,isMobile:n}):"none"===t.markings&&e.init({range:t.range,scale:s.pluck(t.gridConfig,"scale")}),this.props.apiOptions.isMobile){var r={normalStyle:{strokeWidth:1}};this.horizHairline=new f(e,[0,0],[0,0],r),this.horizHairline.attr({stroke:y.INTERACTIVE}),this.horizHairline.hide(),this.vertHairline=new f(e,[0,0],[0,0],r),this.vertHairline.attr({stroke:y.INTERACTIVE}),this.vertHairline.hide()}},showHairlines:function(e){this.props.apiOptions.isMobile&&"none"!==this.props.markings&&(this.horizHairline.moveTo([this.props.graph.range[0][0],e[1]],[this.props.graph.range[0][1],e[1]]),this.horizHairline.show(),this.vertHairline.moveTo([e[0],this.props.graph.range[1][0]],[e[0],this.props.graph.range[1][1]]),this.vertHairline.show())},hideHairlines:function(){this.props.apiOptions.isMobile&&(this.horizHairline.hide(),this.vertHairline.hide())},simpleValidate:function(e){return k.validate(this.getUserInput(),e)},getUserInput:function(){return this.props.plot},focus:$.noop}),R=function(e){var t={availableTypes:e.availableTypes,graph:e.graph};if(1===t.availableTypes.length){var n=t.graph,r=k.chooseType(t.availableTypes);t.plot=k.defaultPlotProps(r,n)}return t},D=function(e){return s.extend({},R(e),{availableTypes:[e.correct.type],plot:e.correct})};e.exports={name:"grapher",displayName:"Grapher",widget:I,transform:R,staticTransform:D}},function(e,t,n){"use strict";var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},i=n(34),o=n(57),s=n(172),a=n(198),l=n(89),p=n(174),c=n(99).widget,u=n(207),h=u.GrapherUtil,d=u.allTypes,f=u.typeToButton,m=u.DEFAULT_GRAPHER_PROPS,g=n(159),v=g.containerSizeClass,y=g.getInteractiveBoxFromSizeClass,b=i.createClass({displayName:"GrapherEditor",mixins:[s],getDefaultProps:function(){return{correct:m.plot,graph:m.graph,availableTypes:m.availableTypes}},render:function(){var e=this,t=v.SMALL,n=void 0,s=void 0;if(this.props.graph.valid===!0){var u={graph:this.props.graph,plot:this.props.correct,availableTypes:this.props.availableTypes,onChange:function(t,n){var r=e.props.correct;r=r.type===t.plot.type?o.extend({},r,t.plot):t.plot,e.props.onChange({correct:r},n)},trackInteraction:function(){}};s=i.createElement(c,r({},u,{apiOptions:this.props.apiOptions,containerSizeClass:t})),n=h.getEquationString(u)}else s=i.createElement("div",{className:"perseus-error"},this.props.graph.valid);return i.createElement("div",null,i.createElement("div",null,"Correct answer"," ",i.createElement(l,null,i.createElement("p",null,"Graph the correct answer in the graph below and ensure the equation or point coordinates displayed represent the correct answer."))," ",": ",n),i.createElement(a,{editableSettings:["graph","snap","image"],box:y(t),range:this.props.graph.range,labels:this.props.graph.labels,step:this.props.graph.step,gridStep:this.props.graph.gridStep,snapStep:this.props.graph.snapStep,valid:this.props.graph.valid,backgroundImage:this.props.graph.backgroundImage,markings:this.props.graph.markings,rulerLabel:this.props.graph.rulerLabel,rulerTicks:this.props.graph.rulerTicks,showTooltips:this.props.graph.showTooltips,onChange:this.change("graph")}),i.createElement("div",{className:"perseus-widget-row"},i.createElement("label",null,"Available functions:"," "," "),i.createElement(p,{allowEmpty:!1,values:this.props.availableTypes,buttons:o.map(d,f),onChange:this.handleAvailableTypesChange})),s)},handleAvailableTypesChange:function(e){var t=this.props.correct;if(!o.contains(e,this.props.correct.type))var n=this.props.graph,r=h.chooseType(e),t=h.defaultPlotProps(r,n);this.props.onChange({availableTypes:e,correct:t})},serialize:function(){return o.chain(this.props).pick("correct","availableTypes").extend({graph:o.omit(this.props.graph,"box")}).value()}});e.exports=b},function(e,t,n){"use strict";var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},i=n(83),o=n(34),s=n(57),a=n(11).Options,l=n(172),p=n(41),c=p.iconOk,u=p.iconRemove,h=(p.icon,n(42)),d=n(28),f=n(199),m=n(78),g=m.gray76,v=m.phoneMargin,y=m.negativePhoneMargin,b=m.tableBackgroundAccent,E=m.kaGreen,T=n(82),x=T.StyleSheet,w=T.css,C={ungraded:"ungraded",correct:"correct",incorrect:"incorrect",invalid:"invalid"},P=f.ANSWER_BAR_STATES,S=function(e,t){switch(e){case P.HIDDEN:return t?P.ACTIVE:e;case P.ACTIVE:return t?e:P.INACTIVE;case P.INACTIVE:return t?P.ACTIVE:e;case P.INCORRECT:return t?P.ACTIVE:P.INACTIVE;default:return e}},k="We couldn't grade your answer.",N="It looks like you left something blank or entered in an invalid answer.",M=o.createClass({displayName:"GradedGroup",propTypes:{apiOptions:a.propTypes,content:o.PropTypes.string,hasHint:o.PropTypes.bool,hint:o.PropTypes.object,images:o.PropTypes.object,onBlur:o.PropTypes.func,onFocus:o.PropTypes.func,title:o.PropTypes.string,trackInteraction:o.PropTypes.func.isRequired,transparentBackground:o.PropTypes.bool,widgets:o.PropTypes.object},mixins:[l],getDefaultProps:function(){return{title:"",content:"",widgets:{},images:{},hint:null,hasHint:!1}},getInitialState:function(){return{status:C.ungraded,showHint:!1,message:"",answerBarState:P.HIDDEN}},shouldComponentUpdate:function(e,t){return e!==this.props||t!==this.state},_onInteractWithWidget:function(e){if(this.setState({status:C.ungraded,message:""}),this.refs.renderer){this.change("widgets",this.props.widgets);var t=this.refs.renderer.emptyWidgets(),n=0===t.length,r=this.state.answerBarState;this.setState({answerBarState:S(r,n)})}},_checkAnswer:function(){var e=this.refs.renderer.score(),t=void 0,n=void 0;"points"===e.type?(t=e.total===e.earned?C.correct:C.incorrect,n=e.message||""):(t=C.invalid,n=e.message?k+" "+e.message:k+" "+N),this.setState({status:t,message:n,answerBarState:"correct"===t?P.CORRECT:P.INCORRECT
}),this.props.trackInteraction({status:t})},getInputPaths:function(){return this.refs.renderer.getInputPaths()},setInputValue:function(e,t,n){return this.refs.renderer.setInputValue(e,t,n)},getAcceptableFormatsForInputPath:function(e){return this.refs.renderer.getAcceptableFormatsForInputPath(e)},focus:function(){return this.refs.renderer.focus()},focusInputPath:function(e){this.refs.renderer.focusPath(e)},blurInputPath:function(e){this.refs.renderer.blurPath(e)},render:function(){var e,t=this,n=s.extend({},a.defaults,this.props.apiOptions,{onFocusChange:function(e,n){n&&t.props.onBlur(n),e&&t.props.onFocus(e)}}),l=null;this.state.status===C.correct?l=o.createElement(h,r({},c,{style:{color:"#526f03"}})):this.state.status===C.incorrect&&(l=o.createElement(h,r({},u,{style:{color:"#ff5454"}})));var p=i((e={},e[w(O.gradedGroup)]=n.isMobile&&!this.props.transparentBackground,e["perseus-graded-group"]=!0,e["answer-correct"]=!n.isMobile&&this.state.status===C.correct,e["answer-incorrect"]=!n.isMobile&&this.state.status===C.incorrect,e)),m=this.state.answerBarState,g=m===P.CORRECT,v=n.readOnly||n.isMobile&&g;return o.createElement("div",{className:p},!!this.props.title&&o.createElement("div",{className:w(O.title)},this.props.title),o.createElement(d,r({},this.props,{ref:"renderer",apiOptions:r({},n,{readOnly:v}),onInteractWithWidget:this._onInteractWithWidget})),!n.isMobile&&l&&o.createElement("div",{className:"group-icon"},l),!n.isMobile&&o.createElement("p",null,this.state.message),!n.isMobile&&o.createElement("input",{type:"button",value:i18n._("Check"),className:"simple-button",disabled:this.props.apiOptions.readOnly,onClick:this._checkAnswer}),this.props.hasHint&&(this.state.showHint?o.createElement("div",null,o.createElement("div",{className:w(O.explanationTitle),onClick:function(){return t.setState({showHint:!1})}},i18n._("Hide explanation")),o.createElement(d,r({},this.props.hint,{ref:"hints-renderer",apiOptions:n}))):o.createElement("div",{onClick:function(){return t.setState({showHint:!0})},className:w(O.showHintLink)},i18n._("Explain"))),n.isMobile&&m!==P.HIDDEN&&o.createElement(f,{apiOptions:n,answerBarState:m,onCheckAnswer:this._checkAnswer}))}}),_=function(e,t){return s.extend({},e,t(e))};e.exports={name:"graded-group",displayName:"Graded Group",widget:M,traverseChildWidgets:_,hidden:!1,tracking:"all"};var O=x.create({gradedGroup:{borderTop:"1px solid "+g,borderBottom:"1px solid "+g,backgroundColor:b,marginLeft:y,marginRight:y,paddingBottom:v,paddingLeft:v,paddingRight:v,paddingTop:10,width:"auto"},showHintLink:{marginTop:20,color:E,cursor:"pointer"},explanationTitle:{marginTop:20,color:E,marginBottom:10,cursor:"pointer"},title:{fontSize:12,color:g,textTransform:"uppercase",marginBottom:11,letterSpacing:.8}})},function(e,t,n){"use strict";var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},i=n(34),o=(n(57),n(82)),s=o.StyleSheet,a=o.css,l=n(11).Options,p=n(172),c=n(17),u=n(45),h=n(176),d=i.createClass({displayName:"GradedGroupEditor",mixins:[p],propTypes:{title:i.PropTypes.string,content:i.PropTypes.string,widgets:i.PropTypes.object,images:i.PropTypes.object,apiOptions:l.propTypes},getDefaultProps:function(){return{title:"",content:"",widgets:{},images:{},hint:null,hasHint:!1}},render:function(){var e=this;return i.createElement("div",{className:"perseus-group-editor"},i.createElement("div",{className:"perseus-widget-row"},i.createElement("label",{className:a(f.title)},"Title: ",i.createElement(h,{value:this.props.title,className:a(f.input),onChange:this.change("title")}))),i.createElement(c,{ref:"editor",content:this.props.content,widgets:this.props.widgets,apiOptions:this.props.apiOptions,images:this.props.images,widgetEnabled:!0,immutableWidgets:!1,onChange:this.props.onChange,warnNoPrompt:!0,warnNoWidgets:!0}),i.createElement("div",{className:a(f.hintsTitle)},"Hint"),i.createElement(u,{hasHint:this.props.hasHint,onChange:this.props.onChange,labelAlignment:"right",label:"enabled"}),this.props.hasHint&&i.createElement(c,{ref:"hint-editor",content:this.props.hint?this.props.hint.content:"",widgets:this.props.hint?this.props.hint.widgets:{},apiOptions:this.props.apiOptions,images:this.props.hint&&this.props.hint.images,widgetEnabled:!0,immutableWidgets:!1,onChange:function(t){e.change("hint",Object.assign({},e.props.hint,t))}}))},getSaveWarnings:function(){return this.refs.editor.getSaveWarnings()},serialize:function(){return r({title:this.props.title,hasHint:this.props.hasHint},this.refs.editor.serialize(),{hint:this.props.hasHint?this.refs["hint-editor"].serialize():null})}}),f=s.create({title:{fontSize:18,fontWeight:"bold"},input:{fontSize:18},hintsTitle:{marginTop:10,fontSize:"110%",fontWeight:"bold"}});e.exports=d},function(e,t,n){"use strict";var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},i=n(34),o=(n(57),n(82)),s=o.StyleSheet,a=o.css,l=n(11).Options,p=n(172),c=n(101).widget,u=n(78),h=u.grayLight,d=u.gray76,f=u.tableBackgroundAccent,m=u.kaGreen,g=u.phoneMargin,v=u.negativePhoneMargin,y=i.createClass({displayName:"Indicators",propTypes:{currentGroup:i.PropTypes.number.isRequired,numGroups:i.PropTypes.number.isRequired,onChangeCurrentGroup:i.PropTypes.func.isRequired},render:function(){for(var e=this,t=[],n=function(n){t.push(i.createElement("div",{key:n,className:a(T.indicator,n===e.props.currentGroup&&T.selectedIndicator),onClick:function(){return e.props.onChangeCurrentGroup(n)}}))},r=0;r<this.props.numGroups;r++)n(r);return i.createElement("div",{className:a(T.indicatorContainer)},t)}}),b=i.createClass({displayName:"GradedGroupSet",propTypes:{apiOptions:l.propTypes,gradedGroups:i.PropTypes.array,trackInteraction:i.PropTypes.func.isRequired},mixins:[p],getDefaultProps:function(){return{gradedGroups:[]}},getInitialState:function(){return{currentGroup:0}},shouldComponentUpdate:function(e,t){return e!==this.props||t!==this.state},getInputPaths:function(){return this._childGroup.getInputPaths()},setInputValue:function(e,t,n){return this._childGroup.setInputValue(e,t,n)},getAcceptableFormatsForInputPath:function(e){return this._childGroup.getAcceptableFormatsForInputPath(e)},focus:function(){return this._childGroup.focus()},focusInputPath:function(e){this._childGroup.focusInputPath(e)},blurInputPath:function(e){this._childGroup.blurInputPath(e)},render:function(){var e=this,t=this.props.gradedGroups[this.state.currentGroup];return t?i.createElement("div",{className:a(T.container)},i.createElement("div",{className:a(T.top)},i.createElement("div",{className:a(T.title)},t.title),i.createElement("div",{className:a(T.spacer)}),i.createElement(y,{numGroups:this.props.gradedGroups.length,currentGroup:this.state.currentGroup,onChangeCurrentGroup:function(t){return e.setState({currentGroup:t})}})),i.createElement(c,r({ref:function(t){return e._childGroup=t}},this.props,t,{transparentBackground:!0,title:null}))):i.createElement("span",null,"No current group...")}}),E=function(e,t){return{groups:e.gradedGroups.map(t)}};e.exports={name:"graded-group-set",displayName:"Graded Group Set",widget:b,traverseChildWidgets:E,hidden:!1,tracking:"all"};var T=s.create({top:{display:"flex",flexDirection:"row"},spacer:{flex:1},title:{fontSize:12,color:d,textTransform:"uppercase",marginBottom:11,letterSpacing:.8},indicatorContainer:{display:"flex",flexDirection:"row"},indicator:{width:10,height:10,borderRadius:5,backgroundColor:h,marginLeft:5,cursor:"pointer"},selectedIndicator:{backgroundColor:m},container:{borderTop:"1px solid "+d,borderBottom:"1px solid "+d,backgroundColor:f,marginLeft:v,marginRight:v,paddingBottom:g,paddingLeft:g,paddingRight:g,paddingTop:10,width:"auto"}})},function(e,t,n){"use strict";var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},i=n(34),o=(n(57),n(11).Options),s=n(172),a=n(102),l=i.createClass({displayName:"GradedGroupSetEditor",propTypes:{apiOptions:o.propTypes,gradedGroups:i.PropTypes.array,onChange:i.PropTypes.func.isRequired},mixins:[s],getDefaultProps:function(){return{gradedGroups:[]}},componentWillMount:function(){this._editors=[]},getSaveWarnings:function(){var e;return(e=[]).concat.apply(e,this._editors.map(function(e){return e.getSaveWarnings()}))},serialize:function(){return{gradedGroups:this.props.gradedGroups}},renderGroups:function(){var e=this;return this.props.gradedGroups?this.props.gradedGroups.map(function(t,n){return i.createElement(a,r({key:n,ref:function(t){return e._editors[n]=t}},t,{apiOptions:e.props.apiOptions,widgetEnabled:!0,immutableWidgets:!1,onChange:function(t){return e.change("gradedGroups",p(e.props.gradedGroups,n,r({},e.props.gradedGroups[n],t)))}}))}):null},addGroup:function(){var e=this.props.gradedGroups||[];this.change("gradedGroups",e.concat([a.getDefaultProps()]))},render:function(){return i.createElement("div",{className:"perseus-group-editor"},this.renderGroups(),i.createElement("button",{onClick:this.addGroup},"Add group"))}}),p=function(e,t,n){return[].concat(e.slice(0,t),[n],e.slice(t+1))};e.exports=l},function(e,t,n){"use strict";var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},i=n(34),o=n(57),s=n(11).Options,a=n(172),l=n(28),p=i.createClass({displayName:"Group",mixins:[a],propTypes:{content:i.PropTypes.string,widgets:i.PropTypes.object,images:i.PropTypes.object,icon:i.PropTypes.object,reviewModeRubric:i.PropTypes.object},getDefaultProps:function(){return{content:"",widgets:{},images:{},icon:null}},componentDidMount:function(){this.forceUpdate()},render:function(){var e=this,t=o.extend({},s.defaults,this.props.apiOptions,{onFocusChange:function(t,n){n&&e.props.onBlur(n),t&&e.props.onFocus(t)}}),n=o.indexOf(this.props.interWidgets("group"),this),a=this.props.apiOptions.groupAnnotator(n,this.props.widgetId),p=function(t){e.refs.renderer&&e.change("widgets",e.refs.renderer.props.widgets)};return i.createElement("div",{className:"perseus-group"},a,i.createElement(l,r({},this.props,{ref:"renderer",apiOptions:t,interWidgets:this._interWidgets,reviewMode:!!this.props.reviewModeRubric,onInteractWithWidget:p})),this.props.icon&&i.createElement("div",{className:"group-icon"},this.props.icon))},_interWidgets:function(e,t){return t.length?t:this.props.interWidgets(e)},getUserInput:function(){return this.refs.renderer.getUserInput()},getSerializedState:function(){return this.refs.renderer.getSerializedState()},restoreSerializedState:function(e,t){return this.refs.renderer.restoreSerializedState(e,t),null},simpleValidate:function(e){return this.refs.renderer.score()},getInputPaths:function(){return this.refs.renderer.getInputPaths()},setInputValue:function(e,t,n){return this.refs.renderer.setInputValue(e,t,n)},getAcceptableFormatsForInputPath:function(e){return this.refs.renderer.getAcceptableFormatsForInputPath(e)},getRenderer:function(){return this.refs.renderer},focus:function(){return this.refs.renderer.focus()},focusInputPath:function(e){this.refs.renderer.focusPath(e)},blurInputPath:function(e){this.refs.renderer.blurPath(e)}}),c=function(e,t){return o.extend({},e,t(e))};e.exports={name:"group",displayName:"Group",widget:p,traverseChildWidgets:c,hidden:!1}},function(e,t,n){"use strict";var r=n(34),i=n(57),o=n(11).Options,s=n(172),a=n(17),l=r.createClass({displayName:"GroupEditor",mixins:[s],propTypes:{content:r.PropTypes.string,widgets:r.PropTypes.object,images:r.PropTypes.object,metadata:r.PropTypes.any,apiOptions:o.propTypes},getDefaultProps:function(){return{content:"",widgets:{},images:{},metadata:void 0}},render:function(){return r.createElement("div",{className:"perseus-group-editor"},r.createElement("div",null,this._renderMetadataEditor()),r.createElement(a,{ref:"editor",content:this.props.content,widgets:this.props.widgets,apiOptions:this.props.apiOptions,images:this.props.images,widgetEnabled:!0,immutableWidgets:!1,onChange:this.props.onChange}))},_renderMetadataEditor:function(){var e=this.props.apiOptions.GroupMetadataEditor;return r.createElement(e,{value:this.props.metadata,onChange:this.change("metadata")})},getSaveWarnings:function(){return this.refs.editor.getSaveWarnings()},serialize:function(){return i.extend({},this.refs.editor.serialize(),{metadata:this.props.metadata})}});e.exports=l},function(e,t,n){"use strict";var r=n(34),i=n(57),o=n(172),s=n(194),a=n(12).updateQueryString,l=r.createClass({displayName:"Iframe",mixins:[o,s],propTypes:{width:r.PropTypes.string,height:r.PropTypes.string,url:r.PropTypes.string,settings:r.PropTypes.array,status:r.PropTypes.oneOf(["incomplete","incorrect","correct"]),message:r.PropTypes.string,allowFullScreen:r.PropTypes.bool},getDefaultProps:function(){return{status:"incomplete",message:null,allowFullScreen:!1}},handleMessageEvent:function(e){var t={};try{t=JSON.parse(e.originalEvent.data)}catch(e){return}if(!i.isUndefined(t.testsPassed)){var n=t.testsPassed?"correct":"incorrect";this.change({status:n,message:t.message})}},componentDidMount:function(){$(window).on("message",this.handleMessageEvent)},componentWillUnmount:function(){$(window).off("message",this.handleMessageEvent)},render:function(){var e={width:this.props.width,height:this.props.height},t=this.props.url;if(t&&t.length&&0!==t.indexOf("http")&&(t="https://www.khanacademy.org/computer-programming/program/"+t+"/embedded?buttons=no&embed=yes&editor=no&author=no",t=a(t,"width",this.props.width),t=a(t,"height",this.props.height),t=a(t,"origin",window.location.origin)),"undefined"!=typeof KA&&KA.isZeroRated&&(t.match(/https?:\/\/[^\/]*khanacademy.org/)?t.match(/zero.khanacademy.org/)||(t=t.replace("khanacademy.org","zero.khanacademy.org")):t="/zero/external-link?context=iframe&url="+encodeURIComponent(t)),this.props.settings){var n={};i.each(this.props.settings,function(e){e.name&&e.value&&(n[e.name]=e.value)}),t=a(t,"settings",JSON.stringify(n))}return r.createElement("iframe",{sandbox:"allow-same-origin allow-scripts",style:e,src:t,allowFullScreen:this.props.allowFullScreen})},simpleValidate:function(e){return l.validate(this.getUserInput(),e)}});i.extend(l,{validate:function(e,t){return"correct"===e.status?{type:"points",earned:1,total:1,message:e.message||null}:"incorrect"===e.status?{type:"points",earned:0,total:1,message:e.message||null}:{type:"invalid",message:"Keep going, you're not there yet!"}}}),e.exports={name:"iframe",displayName:"Iframe",widget:l,hidden:!0}},function(e,t,n){"use strict";var r=n(34),i=n(57),o=n(172),s=n(173),a=n(171),l=n(45),p=r.createClass({displayName:"PairEditor",mixins:[o,s],propTypes:{name:r.PropTypes.string,value:r.PropTypes.string},getDefaultProps:function(){return{name:"",value:""}},render:function(){return r.createElement("fieldset",null,r.createElement("label",null,"Name:",r.createElement(a,{value:this.props.name,onChange:this.change("name")})),r.createElement("label",null,"Value:",r.createElement(a,{value:this.props.value,onChange:this.change("value")})))}}),c=r.createClass({displayName:"PairsEditor",mixins:[o,s],propTypes:{pairs:r.PropTypes.arrayOf(r.PropTypes.shape({name:r.PropTypes.string,value:r.PropTypes.string})).isRequired},render:function(){var e=this,t=i.map(this.props.pairs,function(t,n){return r.createElement(p,{key:n,name:t.name,value:t.value,onChange:e.handlePairChange.bind(e,n)})});return r.createElement("div",null,t)},handlePairChange:function(e,t){var n=this.props.pairs.slice();n[e]=t;var r=n[n.length-1];r.name&&r.value&&n.push({name:"",value:""}),this.change("pairs",n)}}),u=r.createClass({displayName:"IframeEditor",mixins:[o,s],getDefaultProps:function(){return{url:"",settings:[{name:"",value:""}],width:"400",height:"400",allowFullScreen:!1}},render:function(){return r.createElement("div",null,r.createElement("div",{style:{fontWeight:"bold",textAlign:"center"}},"This widget is deprecated! ",r.createElement("br",null),"Try using the Video or CS Program widgets instead."),r.createElement("label",null,"Url or Program ID:",r.createElement(a,{name:"url",value:this.props.url,onChange:this.change("url")})),r.createElement("br",null),r.createElement("label",null,"Settings:",r.createElement(c,{name:"settings",pairs:this.props.settings,onChange:this.handleSettingsChange})),r.createElement("br",null),r.createElement("label",null,"Width:",r.createElement(a,{name:"width",value:this.props.width,onChange:this.change("width")})),r.createElement("label",null,"Height:",r.createElement(a,{name:"height",value:this.props.height,onChange:this.change("height")})),r.createElement(l,{label:"Allow full screen",allowFullScreen:this.props.allowFullScreen,onChange:this.props.onChange}))},handleSettingsChange:function(e){this.change({settings:e.pairs})}});e.exports=u},function(e,t,n){"use strict";var r,i=n(83),o=n(82),s=o.StyleSheet,a=o.css,l=n(34),p=n(57),c=n(11).Options,u=n(78),h=u.baseUnitPx,d=n(172),f=n(76),m=n(28),g=n(38),v=400,y=[0,10],b={url:null,width:0,height:0},E=["block","float-left","float-right","full-width"],T=["block","full-width"],x="block",w=l.createClass({displayName:"ImageWidget",propTypes:{alignment:l.PropTypes.oneOf(E),alt:l.PropTypes.string,apiOptions:c.propTypes,backgroundImage:l.PropTypes.shape({url:l.PropTypes.string,width:l.PropTypes.number,height:l.PropTypes.number}),box:l.PropTypes.arrayOf(l.PropTypes.number),caption:l.PropTypes.string,labels:l.PropTypes.arrayOf(l.PropTypes.shape({content:l.PropTypes.string,coordinates:l.PropTypes.arrayOf(l.PropTypes.number),alignment:l.PropTypes.string})),range:l.PropTypes.arrayOf(l.PropTypes.arrayOf(l.PropTypes.number)),title:l.PropTypes.string,trackInteraction:l.PropTypes.func.isRequired},statics:{styles:s.create({caption:(r={display:"inline-block",marginTop:h,maxWidth:640},r[f.lgOrSmaller]={maxWidth:540},r[f.smOrSmaller]={maxWidth:450},r)})},mixins:[d],getDefaultProps:function(){return{alignment:x,title:"",range:[y,y],box:[v,v],backgroundImage:b,labels:[],alt:"",caption:""}},render:function(){var e,t,n=this.props.apiOptions,r=this.props.backgroundImage;if(r.url&&(e=l.createElement(g,{src:r.url,alt:this.props.alt?"":void 0,width:r.width,height:r.height,preloader:n.imagePreloader,extraGraphie:{box:this.props.box,range:this.props.range,labels:this.props.labels},trackInteraction:this.props.trackInteraction,zoomToFullSizeOnMobile:n.isMobile,constrainHeight:n.isMobile,allowFullBleed:n.isMobile})),this.props.alt&&(t=l.createElement("span",{className:"perseus-sr-only"},l.createElement(m,{content:this.props.alt,apiOptions:n}))),n.isMobile){var o;if(this.props.title||this.props.caption){var s=this.props.title;s&&(this.props.caption&&!/[.?!"']\s*$/.test(s)&&(s+="."),s="**"+s+"** ");var p=i({"perseus-image-caption":!0,"has-title":!!s}),c=this.props.alignment,u="block"===c||"full-width"===c,h=u?null:"0 !important";o=l.createElement("div",{className:p},l.createElement("div",{className:a(w.styles.caption),style:{minWidth:h}},l.createElement(m,{content:s+this.props.caption,apiOptions:n})))}return l.createElement("div",{className:"perseus-image-widget"},e,t,o)}var d,f;return this.props.title&&(d=l.createElement("div",{className:"perseus-image-title"},l.createElement(m,{content:this.props.title,apiOptions:n}))),this.props.caption&&(f=l.createElement("div",{className:"perseus-image-caption"},l.createElement(m,{content:this.props.caption,apiOptions:n}))),l.createElement("div",{className:"perseus-image-widget"},d,e,t,f)},getUserInput:function(){return null},simpleValidate:function(e){return w.validate(this.getUserInput(),e)},focus:$.noop});p.extend(w,{validate:function(e,t){return{type:"points",earned:0,total:0,message:null}}}),e.exports={name:"image",accessible:function(e){var t=e.backgroundImage;return!(t&&t.url&&!e.alt)},defaultAlignment:x,supportedAlignments:T,displayName:"Image",widget:w}},function(e,t,n){"use strict";function r(){return{content:"",coordinates:[0,0],alignment:"center"}}var i=n(34),o=n(57),s=n(41),a=s.iconTrash,l=n(12),p=n(172),c=n(173),u=n(171),h=n(17),d=n(89),f=n(42),m=n(200),g=400,v=[0,10],y={url:null,width:0,height:0},b="(ka-.*.s3.amazonaws.com|(fastly|cdn).kastatic.org|khanacademy.org|kasandbox.org)",E=new RegExp("^(https?|web\\+graphie)://[^/]*"+b),T=["center","above","above right","right","below right","below","below left","left","above left"],x=i.createClass({displayName:"ImageEditor",mixins:[p,c],componentDidMount:function(){var e=this;o.defer(function(){var t=e.props.backgroundImage.url;e.onUrlChange(t,!0)})},getDefaultProps:function(){return{title:"",range:[v,v],box:[g,g],backgroundImage:y,labels:[],alt:"",caption:""}},getInitialState:function(){return{showAdvancedSettings:this.props.title.length>0||this.props.labels.length>0,backgroundImageError:""}},render:function(){var e=this,t=this.props.backgroundImage,n=i.createElement("div",{className:"image-settings"},i.createElement("div",null,i.createElement("label",null,i.createElement("div",null,"Alt text:",i.createElement(d,null,"This is important for screenreaders. The content of this alt text will be formatted as markdown (tables, emphasis, etc. are supported).")),i.createElement(h,{apiOptions:this.props.apiOptions,content:this.props.alt,onChange:function(t){null!=t.content&&e.change("alt",t.content)},widgetEnabled:!1}))),i.createElement("div",null,i.createElement("label",null,i.createElement("div",null,"Caption:"),i.createElement(h,{apiOptions:this.props.apiOptions,content:this.props.caption,onChange:function(t){null!=t.content&&e.change("caption",t.content)},widgetEnabled:!1})))),r=i.createElement("div",{className:"graph-settings"},i.createElement("div",null,i.createElement("label",null,"Graphie X range:"," ",i.createElement(m,{value:this.props.range[0],onChange:o.partial(this.onRangeChange,0)}))),i.createElement("div",null,i.createElement("label",null,"Graphie Y range:"," ",i.createElement(m,{value:this.props.range[1],onChange:o.partial(this.onRangeChange,1)}))),i.createElement("div",{className:"add-label"},i.createElement("button",{onClick:this.addLabel}," ","Add a label"," ")),this.props.labels.length>0&&i.createElement("table",{className:"label-settings"},i.createElement("thead",null,i.createElement("tr",null,i.createElement("th",null,"Coordinates"),i.createElement("th",null,"Content"),i.createElement("th",null,"Alignment"),i.createElement("th",null))),i.createElement("tbody",null,this.props.labels.map(this._renderRowForLabel))),i.createElement("div",null,i.createElement("label",null,i.createElement("div",null,"Title:",i.createElement(d,null,"Appears above the image.")),i.createElement(h,{apiOptions:this.props.apiOptions,content:this.props.title,onChange:function(t){null!=t.content&&e.change("title",t.content)},widgetEnabled:!1})))),s=i.createElement("div",null,i.createElement("a",{href:"#",onClick:this._toggleAdvancedSettings},this.state.showAdvancedSettings?"Hide ":"Show ","advanced settings"),this.state.showAdvancedSettings&&r),a=i.createElement("div",{className:"renderer-widget-error"},this.state.backgroundImageError);return i.createElement("div",{className:"perseus-image-editor"},i.createElement("label",null,"Image url:",i.createElement(d,null,"Paste an image or graphie image URL."),this.state.backgroundImageError&&a,i.createElement(u,{value:t.url||"",style:{width:332},onChange:function(t){return e.onUrlChange(t,!1)}})),t.url&&n,t.url&&s)},_toggleAdvancedSettings:function(e){e.preventDefault(),this.setState({showAdvancedSettings:!this.state.showAdvancedSettings})},_renderRowForLabel:function(e,t){return i.createElement("tr",{key:t},i.createElement("td",null,i.createElement(m,{value:e.coordinates,onChange:this.onCoordinateChange.bind(this,t)})),i.createElement("td",{style:{verticalAlign:"bottom",width:"5px"}},i.createElement("input",{type:"text",className:"graph-settings-axis-label",value:e.content,onChange:this.onContentChange.bind(this,t)})),i.createElement("td",null,i.createElement("select",{className:"perseus-widget-dropdown",value:e.alignment,onChange:this.onAlignmentChange.bind(this,t)},T.map(function(e,t){return i.createElement("option",{key:""+t,value:e},e)},this))),i.createElement("td",null,i.createElement("a",{href:"#",className:"simple-button orange delete-label",title:"Remove this label",onClick:this.removeLabel.bind(this,t)},i.createElement(f,a))))},addLabel:function(e){e.preventDefault();var t=this.props.labels.slice(),n=r();t.push(n),this.props.onChange({labels:t})},removeLabel:function(e,t){t.preventDefault();var n=o(this.props.labels).clone();n.splice(e,1),this.props.onChange({labels:n})},onCoordinateChange:function(e,t){var n=this.props.labels.slice();n[e]=o.extend({},n[e],{coordinates:t}),this.props.onChange({labels:n})},onContentChange:function(e,t){var n=t.target.value,r=this.props.labels.slice();r[e]=o.extend({},r[e],{content:n}),this.props.onChange({labels:r})},onAlignmentChange:function(e,t){var n=t.target.value,r=this.props.labels.slice();r[e]=o.extend({},r[e],{alignment:n}),this.props.onChange({labels:r})},setUrl:function(e,t,n,r){if(this.isMounted()){var i=o.clone(this.props.backgroundImage);i.url=e,i.width=t,i.height=n;var s=[i.width,i.height];this.props.onChange({backgroundImage:i,box:s},null,r)}},onUrlChange:function(e,t){var n=this;return E.test(e)?(this.setState({backgroundImageError:""}),this._leadingUrl=e,e?void l.getImageSize(e,function(t,r){n._leadingUrl===e&&n.setUrl(e,t,r,!0)}):void this.setUrl(e,0,0,t)):void this.setState({backgroundImageError:"Images must be from sites hosted by Khan Academy. Please input a Khan Academy-owned address, or use the Add Image tool to rehost an existing image"})},onRangeChange:function(e,t){var n=this.props.range.slice();n[e]=t,this.props.onChange({range:n})},getSaveWarnings:function(){var e=[];return this.props.backgroundImage.url&&!this.props.alt&&e.push("No alt text"),e}});e.exports=x},function(e,t,n){"use strict";var r=n(34),i=n(57),o=n(172),s=n(86),a=s.Label,l=s.Line,p=s.MovablePoint,c=s.MovableLine,u=s.Plot,h=s.PlotParametric,d=s.Point,f=s.Rect,m=n(221).vector,g=function(e,t){t=t||{};for(var n=e+"||"+t.decimal_separatpr+"||",r=t.functions,i=r?r.length:0,o=0;o<i;o++)n+=r[o]+"|";return n},v=Object.create(null),y=function(e,t){var n=g(e,t),r=v[n];return r?r:(r=KAS.parse(e,t),v[n]=r,r)},b=Object.create(null),E=function(e,t){var n=g(e,t),r=b[n];if(r)return r;var i=KAS.parse(e,t).expr;return r=i?i.compile():function(){return 0},b[n]=r,r},T={graph:{box:[400,400],labels:["x","y"],range:[[-10,10],[-10,10]],tickStep:[1,1],gridStep:[1,1],markings:"graph"},elements:[]},x=r.createClass({displayName:"Interaction",mixins:[o],propTypes:{graph:r.PropTypes.object,elements:r.PropTypes.arrayOf(r.PropTypes.object)},getDefaultProps:function(){return T},getInitialState:function(){return{variables:this._getInitialVariables(this.props.elements),functions:this._getInitialFunctions(this.props.elements)}},_getInitialVariables:function(e){var t={};return i.each(i.where(e,{type:"movable-point"}),function(e){var n=e.options.varSubscript,r=y(e.options.startX||"0").expr,i=y(e.options.startY||"0").expr,o=0,s=0;r&&(o=r.eval({})||0),i&&(s=i.eval({})||0),t["x_"+n]=o,t["y_"+n]=s},this),i.each(i.where(e,{type:"movable-line"}),function(e){var n=e.options.startSubscript,r=e.options.endSubscript,i=y(e.options.startX||"0").expr,o=y(e.options.startY||"0").expr,s=y(e.options.endX||"0").expr,a=y(e.options.endY||"0").expr,l=0,p=0,c=0,u=0;i&&(l=i.eval({})||0),o&&(p=o.eval({})||0),s&&(c=s.eval({})||0),a&&(u=a.eval({})||0),t["x_"+n]=l,t["y_"+n]=p,t["x_"+r]=c,t["y_"+r]=u},this),i.each(i.where(e,{type:"function"}),function(e){t[e.options.funcName]=e.options.value}),t},_getInitialFunctions:function(e){return i.map(i.where(e,{type:"function"}),function(e){return e.options.funcName})},componentWillReceiveProps:function(e){this.setState({variables:this._getInitialVariables(e.elements),functions:this._getInitialFunctions(e.elements)})},_setupGraphie:function(e,t){if(e.graphInit(i.extend({},t,{grid:i.contains(["graph","grid"],this.props.graph.markings),axes:i.contains(["graph"],this.props.graph.markings),ticks:i.contains(["graph"],this.props.graph.markings),labels:i.contains(["graph"],this.props.graph.markings),labelFormat:function(e){return"\\small{"+e+"}"},axisArrows:"<->",unityLabels:!1})),"graph"===this.props.graph.markings){var n=this.props.graph.labels,r=this.props.graph.range;e.label([0,r[1][1]],n[1],"above"),e.label([r[0][1],0],n[0],"right")}},_updatePointLocation:function(e,t){var n=i.clone(this.state.variables);n["x_"+e]=t[0],n["y_"+e]=t[1],this.setState({variables:n}),this.props.trackInteraction()},_updateLineLocation:function(e,t){var n=this._eval("("+e.endX+")-("+e.startX+")"),r=this._eval("("+e.endY+")-("+e.startY+")"),o=m.add(t,[n,r]),s=i.clone(this.state.variables);s["x_"+e.startSubscript]=t[0],s["y_"+e.startSubscript]=t[1],s["x_"+e.endSubscript]=o[0],s["y_"+e.endSubscript]=o[1],this.setState({variables:s}),this.props.trackInteraction()},_eval:function(e,t){var n=this,r=E(e,{functions:this.state.functions}),o=i.extend({},this.state.variables,t);return i.each(i.keys(o),function(e){if(i.isString(o[e])){var t=E(o[e],{functions:n.state.functions});o[e]=function(e){return t(i.extend({},o,{x:e}))}}}),r(o)||0},_extractVars:function(e){if(null==e)return[];var t=[];return i.each(e.args(),function(e){e&&"Expr"===e.constructor.name&&(t=t.concat(this._extractVars(e)))},this),"Var"===e.name()&&t.push(e.prettyPrint()),t},render:function(){return r.createElement(s,{box:this.props.graph.box,range:this.props.graph.range,options:this.props.graph,setup:this._setupGraphie,setDrawingAreaAvailable:this.props.apiOptions.setDrawingAreaAvailable},i.map(this.props.elements,function(e,t){var n=this;if("point"===e.type)return r.createElement(d,{key:e.key,coord:[this._eval(e.options.coordX),this._eval(e.options.coordY)],color:e.options.color});if("line"===e.type){var o=[this._eval(e.options.startX),this._eval(e.options.startY)],s=[this._eval(e.options.endX),this._eval(e.options.endY)];return r.createElement(l,{key:e.key,start:o,end:s,style:{stroke:e.options.color,strokeWidth:e.options.strokeWidth,strokeDasharray:e.options.strokeDasharray,arrows:e.options.arrows}})}if("movable-point"===e.type){var m=[function(t){var r=Math.max(n._eval(e.options.constraintXMin),Math.min(n._eval(e.options.constraintXMax),t[0])),i=Math.max(n._eval(e.options.constraintYMin),Math.min(n._eval(e.options.constraintYMax),t[1]));return[r,i]}];return"snap"===e.options.constraint?m.push(p.constraints.snap(e.options.snap)):"x"===e.options.constraint?m.push(function(t){return[n._eval(e.options.constraintFn,{y:t[1]}),t[1]]}):"y"===e.options.constraint&&m.push(function(t){return[t[0],n._eval(e.options.constraintFn,{x:t[0]})]}),r.createElement(p,{key:e.key,coord:[this.state.variables["x_"+e.options.varSubscript],this.state.variables["y_"+e.options.varSubscript]],constraints:m,foo_x:e.options.constraint,foo_y:e.options.constraintFn,foo_z:e.options.snap,onMove:i.partial(this._updatePointLocation,e.options.varSubscript)})}if("movable-line"===e.type){var m=[function(t){var r=Math.max(n._eval(e.options.constraintXMin),Math.min(n._eval(e.options.constraintXMax),t[0])),i=Math.max(n._eval(e.options.constraintYMin),Math.min(n._eval(e.options.constraintYMax),t[1]));return[r,i]}];"snap"===e.options.constraint?m.push(p.constraints.snap(e.options.snap)):"x"===e.options.constraint?m.push(function(t){return[n._eval(e.options.constraintFn,{y:t[1]}),t[1]]}):"y"===e.options.constraint&&m.push(function(t){return[t[0],n._eval(e.options.constraintFn,{x:t[0]})]});var o=[this.state.variables["x_"+e.options.startSubscript],this.state.variables["y_"+e.options.startSubscript]],s=[this.state.variables["x_"+e.options.endSubscript],this.state.variables["y_"+e.options.endSubscript]];return r.createElement(c,{key:e.key,constraints:m,onMove:i.bind(this._updateLineLocation,this,e.options),foo_x:e.options.constraint,foo_y:e.options.constraintFn,foo_z:e.options.snap
},r.createElement(p,{coord:o,static:!0,normalStyle:{stroke:"none",fill:"none"}}),r.createElement(p,{coord:s,static:!0,normalStyle:{stroke:"none",fill:"none"}}))}if("function"===e.type){var g=function(t){return n._eval(e.options.value,{x:t})},v=i.without(this._extractVars(y(e.options.value).expr),"x"),b=i.object(v,i.map(v,function(e){return n.state.variables[e]})),E=[this._eval(e.options.rangeMin,this.state.variables),this._eval(e.options.rangeMax,this.state.variables)];return r.createElement(u,{key:e.key,fn:g,foo_fn:e.options.value,foo_varvalues:b,range:E,style:{stroke:e.options.color,strokeWidth:e.options.strokeWidth,strokeDasharray:e.options.strokeDasharray,plotPoints:100}})}if("parametric"===e.type){var g=function(t){return[n._eval(e.options.x,{t:t}),n._eval(e.options.y,{t:t})]},v=i.without(this._extractVars(y(e.options.x).expr).concat(this._extractVars(y(e.options.y).expr)),"t"),b=i.object(v,i.map(v,function(e){return n.state.variables[e]})),E=[this._eval(e.options.rangeMin,this.state.variables),this._eval(e.options.rangeMax,this.state.variables)];return r.createElement(h,{key:e.key,fn:g,foo_fnx:e.options.x,foo_fny:e.options.y,foo_varvalues:b,range:E,style:{stroke:e.options.color,strokeWidth:e.options.strokeWidth,strokeDasharray:e.options.strokeDasharray,plotPoints:100}})}if("label"===e.type){var T=[this._eval(e.options.coordX),this._eval(e.options.coordY)];return r.createElement(a,{key:t+1,coord:T,text:e.options.label,style:{color:e.options.color}})}return"rectangle"===e.type?r.createElement(f,{key:t+1,x:this._eval(e.options.coordX),y:this._eval(e.options.coordY),width:i.max([this._eval(e.options.width),0]),height:i.max([this._eval(e.options.height),0]),style:{stroke:"none",fill:e.options.color}}):void 0},this))},getUserInput:function(){return{}},simpleValidate:function(e){return x.validate(this.getUserInput(),e)}});i.extend(x,{validate:function(e,t){return{type:"points",earned:0,total:0,message:null}}}),e.exports={name:"interaction",displayName:"Interaction",widget:x,transform:i.identity}},function(e,t,n){"use strict";var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},i=n(34),o=n(57),s=n(172),a=n(173),l=n(208),p=n(209),c=n(210),u=n(211),h=n(212),d=n(198),f=n(178),m=n(175),g=n(80),v=n(176),y=n(197),b={graph:{box:[400,400],labels:["x","y"],range:[[-10,10],[-10,10]],tickStep:[1,1],gridStep:[1,1],markings:"graph"},elements:[]},E=i.createClass({displayName:"PointEditor",mixins:[a,s],propTypes:{coordX:i.PropTypes.string,coordY:i.PropTypes.string,color:i.PropTypes.string},getDefaultProps:function(){return{coordX:"0",coordY:"0",color:y.BLACK}},render:function(){return i.createElement("div",{className:"graph-settings"},i.createElement("div",{className:"perseus-widget-row"},"Coordinate: ",i.createElement(g,null,"\\Large("),i.createElement(f,{buttonSets:[],buttonsVisible:"never",value:this.props.coordX,onChange:this.change("coordX")}),i.createElement(g,null,",")," ",i.createElement(f,{buttonSets:[],buttonsVisible:"never",value:this.props.coordY,onChange:this.change("coordY")}),i.createElement(g,null,"\\Large)")),i.createElement("div",{className:"perseus-widget-row"},i.createElement(p,{value:this.props.color,onChange:this.change("color")})))}}),T=i.createClass({displayName:"LineEditor",mixins:[a,s],propTypes:{startX:i.PropTypes.string,startY:i.PropTypes.string,endX:i.PropTypes.string,endY:i.PropTypes.string,color:i.PropTypes.string,strokeDasharray:i.PropTypes.string,arrows:i.PropTypes.string,strokeWidth:i.PropTypes.number},getDefaultProps:function(){return{startX:"-5",startY:"5",endX:"5",endY:"5",color:y.BLACK,strokeDasharray:"",arrows:"",strokeWidth:2}},render:function(){return i.createElement("div",{className:"graph-settings"},i.createElement("div",{className:"perseus-widget-row"},"Start: ",i.createElement(g,null,"\\Large("),i.createElement(f,{buttonSets:[],buttonsVisible:"never",value:this.props.startX,onChange:this.change("startX")}),i.createElement(g,null,",")," ",i.createElement(f,{buttonSets:[],buttonsVisible:"never",value:this.props.startY,onChange:this.change("startY")}),i.createElement(g,null,"\\Large)")),i.createElement("div",{className:"perseus-widget-row"},"End: ",i.createElement(g,null,"\\Large("),i.createElement(f,{buttonSets:[],buttonsVisible:"never",value:this.props.endX,onChange:this.change("endX")}),i.createElement(g,null,",")," ",i.createElement(f,{buttonSets:[],buttonsVisible:"never",value:this.props.endY,onChange:this.change("endY")}),i.createElement(g,null,"\\Large)")),i.createElement("div",{className:"perseus-widget-row"},i.createElement(p,{value:this.props.color,onChange:this.change("color")})),i.createElement("div",{className:"perseus-widget-row"},i.createElement(u,{value:this.props.strokeDasharray,onChange:this.change("strokeDasharray")}),"   ",i.createElement(l,{value:this.props.arrows,onChange:this.change("arrows")})),i.createElement("div",{className:"perseus-widget-row"},i.createElement("div",{className:"perseus-widget-left-col"},"Width: ",i.createElement(m,{value:this.props.strokeWidth,placeholder:2,onChange:this.change("strokeWidth")}))))}}),x=i.createClass({displayName:"MovablePointEditor",mixins:[a,s],propTypes:{startX:i.PropTypes.string,startY:i.PropTypes.string,constraint:i.PropTypes.string,snap:i.PropTypes.number,constraintFn:i.PropTypes.string},getDefaultProps:function(){return{startX:"0",startY:"0",constraint:"none",snap:.5,constraintFn:"0",constraintXMin:"-10",constraintXMax:"10",constraintYMin:"-10",constraintYMax:"10"}},render:function(){return i.createElement("div",{className:"graph-settings"},i.createElement("div",{className:"perseus-widget-row"},"Start: ",i.createElement(g,null,"\\Large("),i.createElement(f,{buttonSets:[],buttonsVisible:"never",value:this.props.startX,onChange:this.change("startX")}),i.createElement(g,null,",")," ",i.createElement(f,{buttonSets:[],buttonsVisible:"never",value:this.props.startY,onChange:this.change("startY")}),i.createElement(g,null,"\\Large)")),i.createElement("div",{className:"perseus-widget-row"},"Update ",i.createElement(g,null,"(x_n, y_n)")," for ",i.createElement(g,null,"n =")," ",i.createElement(m,{value:this.props.varSubscript,placeholder:0,onChange:this.change("varSubscript")})),i.createElement(c,this.props))}}),w=i.createClass({displayName:"MovableLineEditor",mixins:[a,s],propTypes:{startX:i.PropTypes.string,startY:i.PropTypes.string,endX:i.PropTypes.string,endY:i.PropTypes.string,constraint:i.PropTypes.string,snap:i.PropTypes.number,constraintFn:i.PropTypes.string},getDefaultProps:function(){return{startX:"-5",startY:"5",endX:"5",endY:"5",constraint:"none",snap:.5,constraintFn:"0",constraintXMin:"-10",constraintXMax:"10",constraintYMin:"-10",constraintYMax:"10"}},render:function(){return i.createElement("div",{className:"graph-settings"},"Initial position:",i.createElement("div",{className:"perseus-widget-row"},"Start: ",i.createElement(g,null,"\\Large("),i.createElement(f,{buttonSets:[],buttonsVisible:"never",value:this.props.startX,onChange:this.change("startX")}),i.createElement(g,null,",")," ",i.createElement(f,{buttonSets:[],buttonsVisible:"never",value:this.props.startY,onChange:this.change("startY")}),i.createElement(g,null,"\\Large)")),i.createElement("div",{className:"perseus-widget-row"},"End: ",i.createElement(g,null,"\\Large("),i.createElement(f,{buttonSets:[],buttonsVisible:"never",value:this.props.endX,onChange:this.change("endX")}),i.createElement(g,null,",")," ",i.createElement(f,{buttonSets:[],buttonsVisible:"never",value:this.props.endY,onChange:this.change("endY")}),i.createElement(g,null,"\\Large)")),i.createElement("div",{className:"perseus-widget-row"},"Start updates ",i.createElement(g,null,"(x_n, y_n)")," for ",i.createElement(g,null,"n ="),i.createElement(m,{value:this.props.startSubscript,placeholder:0,onChange:this.change("startSubscript")})),i.createElement("div",{className:"perseus-widget-row"},"End updates ",i.createElement(g,null,"(x_m, y_m)")," for ",i.createElement(g,null,"m ="),i.createElement(m,{value:this.props.endSubscript,placeholder:0,onChange:this.change("endSubscript")})),i.createElement("div",{className:"perseus-widget-row"},"All constraints are applied to the start point."),i.createElement(c,this.props))}}),C=i.createClass({displayName:"FunctionEditor",mixins:[a,s],propTypes:{value:i.PropTypes.string,rangeMin:i.PropTypes.string,rangeMax:i.PropTypes.string,color:i.PropTypes.string,strokeDashArray:i.PropTypes.string,strokeWidth:i.PropTypes.number},getDefaultProps:function(){return{value:"x",rangeMin:"-10",rangeMax:"10",color:y.BLUE,strokeDasharray:"",strokeWidth:2}},render:function(){return i.createElement("div",{className:"graph-settings"},i.createElement("div",{className:"perseus-widget-row"},i.createElement(g,null,this.props.funcName+"(x)=")," ",i.createElement(f,{buttonSets:[],buttonsVisible:"never",value:this.props.value,onChange:this.change("value")})),i.createElement("div",{className:"perseus-widget-row"},"Range: ",i.createElement(g,null,"\\Large("),i.createElement(f,{buttonSets:[],buttonsVisible:"never",value:this.props.rangeMin,onChange:this.change("rangeMin")}),i.createElement(g,null,",")," ",i.createElement(f,{buttonSets:[],buttonsVisible:"never",value:this.props.rangeMax,onChange:this.change("rangeMax")}),i.createElement(g,null,"\\Large)")),i.createElement("div",{className:"perseus-widget-row"},i.createElement(p,{value:this.props.color,onChange:this.change("color")})),i.createElement("div",{className:"perseus-widget-row"},i.createElement(u,{value:this.props.strokeDasharray,onChange:this.change("strokeDasharray")})),i.createElement("div",{className:"perseus-widget-row"},i.createElement("div",{className:"perseus-widget-left-col"},"Width: ",i.createElement(m,{value:this.props.strokeWidth,placeholder:2,onChange:this.change("strokeWidth")}))))}}),P=i.createClass({displayName:"ParametricEditor",mixins:[a,s],propTypes:{x:i.PropTypes.string,y:i.PropTypes.string,rangeMin:i.PropTypes.string,rangeMax:i.PropTypes.string,color:i.PropTypes.string,strokeDashArray:i.PropTypes.string,strokeWidth:i.PropTypes.number},getDefaultProps:function(){return{x:"cos(t)",y:"sin(t)",rangeMin:"0",rangeMax:"2\\pi",color:y.BLUE,strokeDasharray:"",strokeWidth:2}},render:function(){return i.createElement("div",{className:"graph-settings"},i.createElement("div",{className:"perseus-widget-row"},i.createElement(g,null,"X(t) =")," ",i.createElement(f,{buttonSets:[],buttonsVisible:"never",value:this.props.x,onChange:this.change("x")})),i.createElement("div",{className:"perseus-widget-row"},i.createElement(g,null,"Y(t) =")," ",i.createElement(f,{buttonSets:[],buttonsVisible:"never",value:this.props.y,onChange:this.change("y")})),i.createElement("div",{className:"perseus-widget-row"},"Range: ",i.createElement(g,null,"\\Large("),i.createElement(f,{buttonSets:[],buttonsVisible:"never",value:this.props.rangeMin,onChange:this.change("rangeMin")}),i.createElement(g,null,",")," ",i.createElement(f,{buttonSets:[],buttonsVisible:"never",value:this.props.rangeMax,onChange:this.change("rangeMax")}),i.createElement(g,null,"\\Large)")),i.createElement("div",{className:"perseus-widget-row"},i.createElement(p,{value:this.props.color,onChange:this.change("color")})),i.createElement("div",{className:"perseus-widget-row"},i.createElement(u,{value:this.props.strokeDasharray,onChange:this.change("strokeDasharray")})),i.createElement("div",{className:"perseus-widget-row"},i.createElement("div",{className:"perseus-widget-left-col"},"Width: ",i.createElement(m,{value:this.props.strokeWidth,placeholder:2,onChange:this.change("strokeWidth")}))))}}),S=i.createClass({displayName:"LabelEditor",mixins:[a,s],propTypes:{color:i.PropTypes.string,coordX:i.PropTypes.string,coordY:i.PropTypes.string,label:i.PropTypes.string},getDefaultProps:function(){return{coordX:"0",coordY:"0",color:y.BLACK,label:"\\phi"}},render:function(){return i.createElement("div",{className:"graph-settings"},i.createElement("div",{className:"perseus-widget-row"},i.createElement(v,{value:this.props.label,onChange:this.change("label"),style:{width:"100%"}})),i.createElement("div",{className:"perseus-widget-row"},"Location: ",i.createElement(g,null,"\\Large("),i.createElement(f,{buttonSets:[],buttonsVisible:"never",value:this.props.coordX,onChange:this.change("coordX")}),i.createElement(g,null,",")," ",i.createElement(f,{buttonSets:[],buttonsVisible:"never",value:this.props.coordY,onChange:this.change("coordY")}),i.createElement(g,null,"\\Large)")),i.createElement("div",{className:"perseus-widget-row"},i.createElement(p,{value:this.props.color,onChange:this.change("color")})))}}),k=i.createClass({displayName:"RectangleEditor",mixins:[a,s],propTypes:{color:i.PropTypes.string,coordX:i.PropTypes.string,coordY:i.PropTypes.string,height:i.PropTypes.string,width:i.PropTypes.string},getDefaultProps:function(){return{coordX:"-5",coordY:"5",width:"2",height:"3",color:y.LIGHT_BLUE}},render:function(){return i.createElement("div",{className:"graph-settings"},i.createElement("div",{className:"perseus-widget-row"},"Bottom left: ",i.createElement(g,null,"\\Large("),i.createElement(f,{buttonSets:[],buttonsVisible:"never",value:this.props.coordX,onChange:this.change("coordX")}),i.createElement(g,null,",")," ",i.createElement(f,{buttonSets:[],buttonsVisible:"never",value:this.props.coordY,onChange:this.change("coordY")}),i.createElement(g,null,"\\Large)")),i.createElement("div",{className:"perseus-widget-row"},"Width: ",i.createElement(f,{buttonSets:[],buttonsVisible:"never",value:this.props.width,onChange:this.change("width")})),i.createElement("div",{className:"perseus-widget-row"},"Height: ",i.createElement(f,{buttonSets:[],buttonsVisible:"never",value:this.props.height,onChange:this.change("height")})),i.createElement("div",{className:"perseus-widget-row"},i.createElement(p,{value:this.props.color,lightColors:!0,onChange:this.change("color")})),i.createElement("div",{className:"perseus-widget-row"},"You want a border? Sorry, draw your own."))}}),N=i.createClass({displayName:"InteractionEditor",mixins:[a,s],propTypes:{elements:i.PropTypes.arrayOf(i.PropTypes.object),graph:i.PropTypes.objectOf(i.PropTypes.any)},getDefaultProps:function(){return b},getInitialState:function(){return{usedVarSubscripts:this._getAllVarSubscripts(this.props.elements),usedFunctionNames:this._getAllFunctionNames(this.props.elements)}},componentWillReceiveProps:function(e){this.setState({usedVarSubscripts:this._getAllVarSubscripts(e.elements),usedFunctionNames:this._getAllFunctionNames(e.elements)})},_getAllVarSubscripts:function(e){return o.map(o.where(e,{type:"movable-point"}),function(e){return e.options.varSubscript}).concat(o.map(o.where(e,{type:"movable-line"}),function(e){return e.options.startSubscript})).concat(o.map(o.where(e,{type:"movable-line"}),function(e){return e.options.endSubscript}))},_getAllFunctionNames:function(e){return o.map(o.where(e,{type:"function"}),function(e){return e.options.funcName})},_updateGraphProps:function(e){this.change({graph:o.extend(o.omit(e,"step"),{tickStep:e.step})})},_addNewElement:function(e){var t=e.target.value;if(""!==t){e.target.value="";var n,r={type:t,key:t+"-"+(16777215*Math.random()<<0).toString(16),options:"point"===t?o.clone(E.defaultProps):"line"===t?o.clone(T.defaultProps):"movable-point"===t?o.clone(x.defaultProps):"movable-line"===t?o.clone(w.defaultProps):"function"===t?o.clone(C.defaultProps):"parametric"===t?o.clone(P.defaultProps):"label"===t?o.clone(S.defaultProps):"rectangle"===t?o.clone(k.defaultProps):{}};if("movable-point"===t)n=o.max([o.max(this.state.usedVarSubscripts),-1])+1,r.options.varSubscript=n;else if("movable-line"===t)n=o.max([o.max(this.state.usedVarSubscripts),-1])+1,r.options.startSubscript=n,r.options.endSubscript=n+1;else if("function"===t){var i=String.fromCharCode(o.max([o.max(o.map(this.state.usedFunctionNames,function(e){return e.charCodeAt(0)})),"e".charCodeAt(0)])+1);r.options.funcName=i}this.change({elements:this.props.elements.concat(r)})}},_deleteElement:function(e){var t=this.props.elements[e];this.change({elements:o.without(this.props.elements,t)})},_moveElementUp:function(e){var t=this.props.elements[e],n=o.without(this.props.elements,t);n.splice(e-1,0,t),this.change({elements:n})},_moveElementDown:function(e){var t=this.props.elements[e],n=o.without(this.props.elements,t);n.splice(e+1,0,t),this.change({elements:n})},render:function(){return i.createElement("div",{className:"perseus-widget-interaction-editor"},i.createElement(h,{title:"Grid settings"},i.createElement(d,{editableSettings:["canvas","graph"],box:this.props.graph.box,labels:this.props.graph.labels,range:this.props.graph.range,step:this.props.graph.tickStep,gridStep:this.props.graph.gridStep,markings:this.props.graph.markings,onChange:this._updateGraphProps}),this.props.graph.valid===!0||i.createElement("div",null,this.props.graph.valid)),o.map(this.props.elements,function(e,t){var n=this;return"movable-point"===e.type?i.createElement(h,{title:i.createElement("span",null,"Movable point ",i.createElement(g,null,"(x_{"+e.options.varSubscript+"}, y_{"+e.options.varSubscript+"})")),onUp:0===t?null:this._moveElementUp.bind(this,t),onDown:t===this.props.elements.length-1?null:this._moveElementDown.bind(this,t),onDelete:this._deleteElement.bind(this,t),key:e.key},i.createElement(x,r({},e.options,{onChange:function(e){var r=JSON.parse(JSON.stringify(n.props.elements));o.extend(r[t].options,e),n.change({elements:r})}}))):"movable-line"===e.type?i.createElement(h,{title:i.createElement("span",null,"Movable line ",i.createElement(g,null,"(x_{"+e.options.startSubscript+"}, y_{"+e.options.startSubscript+"})")," to ",i.createElement(g,null,"(x_{"+e.options.endSubscript+"}, y_{"+e.options.endSubscript+"})")),onUp:0===t?null:this._moveElementUp.bind(this,t),onDown:t===this.props.elements.length-1?null:this._moveElementDown.bind(this,t),onDelete:this._deleteElement.bind(this,t),key:e.key},i.createElement(w,r({},e.options,{onChange:function(e){var r=JSON.parse(JSON.stringify(n.props.elements));o.extend(r[t].options,e),n.change({elements:r})}}))):"point"===e.type?i.createElement(h,{title:i.createElement("span",null,"Point ",i.createElement(g,null,"("+e.options.coordX+", "+e.options.coordY+")")),onUp:0===t?null:this._moveElementUp.bind(this,t),onDown:t===this.props.elements.length-1?null:this._moveElementDown.bind(this,t),onDelete:this._deleteElement.bind(this,t),key:e.key},i.createElement(E,r({},e.options,{onChange:function(e){var r=JSON.parse(JSON.stringify(n.props.elements));o.extend(r[t].options,e),n.change({elements:r})}}))):"line"===e.type?i.createElement(h,{title:i.createElement("span",null,"Line ",i.createElement(g,null,"("+e.options.startX+", "+e.options.startY+")")," to ",i.createElement(g,null,"("+e.options.endX+", "+e.options.endY+")")),onUp:0===t?null:this._moveElementUp.bind(this,t),onDown:t===this.props.elements.length-1?null:this._moveElementDown.bind(this,t),onDelete:this._deleteElement.bind(this,t),key:e.key},i.createElement(T,r({},e.options,{onChange:function(e){var r=JSON.parse(JSON.stringify(n.props.elements));o.extend(r[t].options,e),n.change({elements:r})}}))):"function"===e.type?i.createElement(h,{title:i.createElement("span",null,"Function ",i.createElement(g,null,e.options.funcName+"(x) = "+e.options.value)),onUp:0===t?null:this._moveElementUp.bind(this,t),onDown:t===this.props.elements.length-1?null:this._moveElementDown.bind(this,t),onDelete:this._deleteElement,key:e.key},i.createElement(C,r({},e.options,{onChange:function(e){var r=JSON.parse(JSON.stringify(n.props.elements));o.extend(r[t].options,e),n.change({elements:r})}}))):"parametric"===e.type?i.createElement(h,{title:i.createElement("span",null,"Parametric"),onUp:0===t?null:this._moveElementUp.bind(this,t),onDown:t===this.props.elements.length-1?null:this._moveElementDown.bind(this,t),onDelete:this._deleteElement,key:e.key},i.createElement(P,r({},e.options,{onChange:function(e){var r=JSON.parse(JSON.stringify(n.props.elements));o.extend(r[t].options,e),n.change({elements:r})}}))):"label"===e.type?i.createElement(h,{title:i.createElement("span",null,"Label ",i.createElement(g,null,e.options.label)," "),onUp:0===t?null:this._moveElementUp.bind(this,t),onDown:t===this.props.elements.length-1?null:this._moveElementDown.bind(this,t),onDelete:this._deleteElement,key:e.key},i.createElement(S,r({},e.options,{onChange:function(e){var r=JSON.parse(JSON.stringify(n.props.elements));o.extend(r[t].options,e),n.change({elements:r})}}))):"rectangle"===e.type?i.createElement(h,{title:i.createElement("span",null,"Rectangle ",i.createElement(g,null,"("+e.options.coordX+", "+e.options.coordY+")")," — ",i.createElement(g,null,e.options.width+" \\times "+e.options.height)),onUp:0===t?null:this._moveElementUp.bind(this,t),onDown:t===this.props.elements.length-1?null:this._moveElementDown.bind(this,t),onDelete:this._deleteElement,key:e.key},i.createElement(k,r({},e.options,{onChange:function(e){var r=JSON.parse(JSON.stringify(n.props.elements));o.extend(r[t].options,e),n.change({elements:r})}}))):void 0},this),i.createElement("div",{className:"perseus-widget-interaction-editor-select-element"},i.createElement("select",{onChange:this._addNewElement},i.createElement("option",{value:""},"Add an element","…"),i.createElement("option",{disabled:!0},"--"),i.createElement("option",{value:"point"},"Point"),i.createElement("option",{value:"line"},"Line segment"),i.createElement("option",{value:"function"},"Function plot"),i.createElement("option",{value:"parametric"},"Parametric plot"),i.createElement("option",{value:"label"},"Label"),i.createElement("option",{value:"rectangle"},"Rectangle"),i.createElement("option",{value:"movable-point"},"★ Movable point"),i.createElement("option",{value:"movable-line"},"★ Movable line segment"))))}});e.exports=N},function(e,t,n){"use strict";function r(e,t,n){return(t[0]-e[0])*(n[1]-e[1])-(n[0]-e[0])*(t[1]-e[1])}function i(e,t,n){return H(r(e,t,n),0)}function o(e){return H(e,0)?0:e>0?1:-1}function s(e,t){return null==e?t:e}function a(e,t,n){return n[0]<=Math.max(e[0],t[0])&&n[0]>=Math.min(e[0],t[0])&&n[1]<=Math.max(e[1],t[1])&&n[1]>=Math.min(e[1],t[1])}function l(e,t){var n=[[e[0],e[1],t[0]],[e[0],e[1],t[1]],[t[0],t[1],e[0]],[t[0],t[1],e[1]]],i=P.map(n,function(e){return o(r.apply(null,e))});if(i[0]!==i[1]&&i[2]!==i[3])return!0;for(var s=0;s<4;s++)if(0===i[s]&&a.apply(null,n[s]))return!0;return!1}function p(e,t){return P.map(P.zip(e,t),function(e){return e[0]-e[1]})}function c(e){return Math.sqrt(P.reduce(e,function(e,t){return e+Math.pow(t,2)},0))}function u(e,t){return P.reduce(P.zip(e,t),function(e,t){return e+t[0]*t[1]},0)}function h(e){var t=P.zip(e,y(e));return P.map(t,function(e){return c(p.apply(null,e))})}function d(e){var t=P.zip(y(e,-1),e,y(e,1)),n=P.map(t,function(e){var t=p(e[1],e[0]),n=p(e[2],e[1]),i=Math.acos(u(t,n)/(c(t)*c(n)));return o(r.apply(null,e))>0?i:-i}),i=P.reduce(n,function(e,t){return e+t},0);return P.map(n,function(e){return i>0?Math.PI-e:Math.PI+e})}function f(e,t,n){if(e.length!==t.length)return!1;for(var r=e.length,i=d(e),o=d(t),s=h(e),a=h(t),l=0;l<2*r;l++){var p=o.slice(),c=a.slice();if(l>=r&&(p.reverse(),c.reverse(),c=y(c,1)),p=y(p,l),c=y(c,l),U(i,p)){var u=P.zip(s,c),f=P.map(u,function(e){return e[0]/e[1]}),m=P.all(f,function(e){return H(f[0],e)}),g=P.all(u,function(e){return O.equal(e[0],e[1],n)});if(m&&g)return!0}}return!1}function m(e,t){return e<t||H(e,t)}function g(e,t,n){return 180*Math.acos((e*e+t*t-n*n)/(2*e*t))/Math.PI}function v(e){var t=e[0],n=e[1],r=e[2],i=e[3];t<0&&(t*=-1,n*=-1,r*=-1);var o=2*Math.PI;for(n<0&&(n*=-1,r*=-1,r+=o/2);r>0;)r-=o;for(;r<0;)r+=o;return[t,n,r,i]}function y(e,t){return t="undefined"==typeof t?1:t%e.length,e.slice(t).concat(e.slice(0,t))}function b(e){return e.replace(/(?:^|-)(.)/g,function(e,t){return t.toUpperCase()})}function E(e,t){if(H(e[0],t[0]))return"x = "+e[0].toFixed(3);var n=(t[1]-e[1])/(t[0]-e[0]),r=e[1]-n*e[0];return"y = "+n.toFixed(3)+"x + "+r.toFixed(3)}function T(e,t){var n=e[0][0],r=e[0][1],i=e[1][0],o=e[1][1],s=t[0][0],a=t[0][1],l=t[1][0],p=t[1][1],c=(n-i)*(a-p)-(r-o)*(s-l);if(Math.abs(c)<1e-9)return"Lines are parallel";var u=((n*o-r*i)*(s-l)-(n-i)*(s*p-a*l))/c,h=((n*o-r*i)*(a-p)-(r-o)*(s*p-a*l))/c;return"Intersection: ("+u.toFixed(3)+", "+h.toFixed(3)+")"}function x(e,t){return Math.floor((e[1]-e[0])/t)}var w=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},C=n(34),P=n(57),S=n(201),k=n(89),N=n(195),M=n(175),_=n(12),O=n(221).number,A=n(221).point,I=n(197),R=n(190),D=n(78),L=(D.interactiveSizes,n(159)),F=L.containerSizeClassPropType,q=L.getInteractiveBoxFromSizeClass,z=n(196),B=_.DeprecationMixin,j="https://ka-perseus-graphie.s3.amazonaws.com/b1452c0d79fd0f7ff4c3af9488474a0a0decb361.png",W={url:null},H=_.eq,U=_.deepEq,V="unlimited",G={showGraph:function(e){return{markings:e.showGraph?"graph":"none"}}},Y=C.createClass({displayName:"InteractiveGraph",propTypes:{containerSizeClass:F.isRequired,trackInteraction:C.PropTypes.func.isRequired},getInitialState:function(){return{shouldShowInstructions:this._getShouldShowInstructions()}},getDefaultProps:function(){return{labels:["x","y"],range:[[-10,10],[-10,10]],step:[1,1],backgroundImage:W,markings:"graph",showTooltips:!1,showProtractor:!1,showRuler:!1,rulerLabel:"",rulerTicks:10,graph:{type:"linear"}}},mixins:[B],deprecatedProps:G,_getShouldShowInstructions:function(e){return e=e||this.props,this.isClickToAddPoints(e)&&(null==e.graph.coords||0===e.graph.coords.length)},componentDidUpdate:function(e,t){var n=e.graph.type,r=this.props.graph.type;n===r&&e.graph.allowReflexAngles===this.props.graph.allowReflexAngles&&e.graph.angleOffsetDeg===this.props.graph.angleOffsetDeg&&e.graph.numPoints===this.props.graph.numPoints&&e.graph.numSides===this.props.graph.numSides&&e.graph.numSegments===this.props.graph.numSegments&&e.graph.showAngles===this.props.graph.showAngles&&e.graph.showSides===this.props.graph.showSides&&e.graph.snapTo===this.props.graph.snapTo&&e.graph.snapDegrees===this.props.graph.snapDegrees||(this["remove"+b(n)+"Controls"](),this["add"+b(r)+"Controls"]()),this.shouldResetGraphie&&this.resetGraphie()},render:function(){var e,t,n=this;if(this.props.flexibleType)if(e=C.createElement("select",{value:this.props.graph.type,onChange:function(e){var t=e.target.value;n.onChange({graph:{type:t}})}},C.createElement("option",{value:"linear"},"Linear function"),C.createElement("option",{value:"quadratic"},"Quadratic function"),C.createElement("option",{value:"sinusoid"},"Sinusoid function"),C.createElement("option",{value:"circle"},"Circle"),C.createElement("option",{value:"point"},"Point(s)"),C.createElement("option",{value:"linear-system"},"Linear System"),C.createElement("option",{value:"polygon"},"Polygon"),C.createElement("option",{value:"segment"},"Line Segment(s)"),C.createElement("option",{value:"ray"},"Ray"),C.createElement("option",{value:"angle"},"Angle")),"point"===this.props.graph.type)t=C.createElement("select",{key:"point-select",value:this.props.graph.numPoints||1,onChange:function(e){var t=+e.target.value||e.target.value;n.onChange({graph:{type:"point",numPoints:t,coords:null}})}},P.map(P.range(1,7),function(e){return C.createElement("option",{value:e},e," point",e>1&&"s")}),C.createElement("option",{value:V},"unlimited"));else if("polygon"===this.props.graph.type)t=C.createElement("div",null,C.createElement("div",null,C.createElement("select",{key:"polygon-select",value:this.props.graph.numSides||3,onChange:function(e){var t=+e.target.value||e.target.value,r=P.extend({},n.props.graph,{numSides:t,coords:null,snapTo:"grid"});n.onChange({graph:r})}},P.map(P.range(3,13),function(e){return C.createElement("option",{value:e},e," sides")}),C.createElement("option",{value:V},"unlimited sides"))),C.createElement("div",null,C.createElement("label",null," Snap to"," ",C.createElement("select",{key:"polygon-snap",value:this.props.graph.snapTo,onChange:function(e){var t=P.extend({},n.props.graph,{snapTo:e.target.value,coords:null});n.onChange({graph:t})}},C.createElement("option",{value:"grid"},"grid"),this.props.graph.numSides!==V&&[C.createElement("option",{value:"angles"}," ","interior angles"," "),C.createElement("option",{value:"sides"}," ","side measures"," ")])),C.createElement(k,null,C.createElement("p",null,"These options affect the movement of the vertex points. The grid option will guide the points to the nearest half step along the grid."),C.createElement("p",null,"The interior angle and side measure options guide the points to the nearest whole angle or side")," measure respectively."," ")),C.createElement("div",null,C.createElement("label",null,"Show angle measures:"," ",C.createElement("input",{type:"checkbox",checked:this.props.graph.showAngles,onChange:this.toggleShowAngles})),C.createElement(k,null,C.createElement("p",null,"Displays the interior angle measures."))),C.createElement("div",null,C.createElement("label",null,"Show side measures:"," ",C.createElement("input",{type:"checkbox",checked:this.props.graph.showSides,onChange:this.toggleShowSides})),C.createElement(k,null,C.createElement("p",null,"Displays the side lengths."))));else if("segment"===this.props.graph.type)t=C.createElement("select",{key:"segment-select",value:this.props.graph.numSegments||1,onChange:function(e){var t=+e.target.value;n.onChange({graph:{type:"segment",numSegments:t,coords:null}})}},P.map(P.range(1,7),function(e){return C.createElement("option",{value:e},e," segment",e>1&&"s")}));else if("angle"===this.props.graph.type){var r=s(this.props.graph.allowReflexAngles,!0);t=C.createElement("div",null,C.createElement("div",null,C.createElement("label",null,"Show angle measure:"," ",C.createElement("input",{type:"checkbox",checked:this.props.graph.showAngles,onChange:this.toggleShowAngles}))),C.createElement("div",null,C.createElement("label",null,"Allow reflex angles:"," ",C.createElement("input",{type:"checkbox",checked:r,onChange:function(e){n.onChange({graph:P.extend({},n.props.graph,{allowReflexAngles:!r,coords:null})})}})),C.createElement(k,null,C.createElement("p",null,"Reflex angles are angles with a measure greater than 180 degrees."),C.createElement("p",null,"By default, these should remain enabled."))),C.createElement("div",null,C.createElement("label",null,"Snap to increments of"," ",C.createElement(M,{key:"degree-snap",placeholder:1,value:this.props.graph.snapDegrees,onChange:function(e){n.onChange({graph:P.extend({},n.props.graph,{snapDegrees:Math.abs(e),coords:null})})}})," ","degrees"," ")),C.createElement("div",null,C.createElement("label",null," ","With an offset of"," ",C.createElement(M,{key:"angle-offset",placeholder:0,value:this.props.graph.angleOffsetDeg,onChange:function(e){n.onChange({graph:P.extend({},n.props.graph,{angleOffsetDeg:e,coords:null})})}})," ","degrees"," ")))}var i,o=q(this.props.containerSizeClass);this.isClickToAddPoints()&&this.state.shouldShowInstructions?"point"===this.props.graph.type?i=i18n._("Click to add points"):"polygon"===this.props.graph.type&&(i=i18n._("Click to add vertices")):i=void 0;var a=this.isClickToAddPoints()?this.handleAddPointsMouseDown:null,l=this.props.gridStep||_.getGridStep(this.props.range,this.props.step,o[0]),p=this.props.snapStep||_.snapStepFromGridStep(l),c=this.props.apiOptions.isMobile;return C.createElement("div",{className:"perseus-widget perseus-widget-interactive-graph",style:{width:o[0],height:this.props.flexibleType?"auto":o[1]}},C.createElement(S,{instructions:i,ref:"graph",box:o,labels:this.props.labels,range:this.props.range,step:c?[2,2]:this.props.step,gridStep:l,snapStep:p,markings:this.props.markings,backgroundImage:this.props.backgroundImage,showProtractor:this.props.showProtractor,showRuler:this.props.showRuler,rulerLabel:this.props.rulerLabel,rulerTicks:this.props.rulerTicks,onMouseDown:a,onGraphieUpdated:this.setGraphie,setDrawingAreaAvailable:this.props.apiOptions.setDrawingAreaAvailable,
isMobile:c}),e,t)},componentDidMount:function(){this.setGraphie(this.refs.graph.graphie())},setGraphie:function(e){this.graphie=e,this.setupGraphie()},handleAddPointsMouseDown:function(e){if(!this.isClickToAddPoints())throw new Error("handleAddPointsClick should not be registeredwhen isClickToAddPoints() is false");if(!this.isCoordInTrash(e)){var t;if("point"===this.props.graph.type){if(t=this.createPointForPointsType(e,this.points.length),!t.constrain())return void t.remove();this.points.push(t);var n=this.points.length-1;this.points[n].grab(e),this.updateCoordsFromPoints()}else if("polygon"===this.props.graph.type){if(this.polygon.closed())return;t=this.createPointForPolygonType(e,this.points.length),this.points.push(t);var n=this.points.length-1;this.points[n].grab(e),this.updatePolygon()}this.setState({shouldShowInstructions:!1})}},resetGraphie:function(){this.shouldResetGraphie=!1,this.parabola=null,this.sinusoid=null,this.refs.graph.reset()},setupGraphie:function(){this.setTrashCanVisibility(0),this.isClickToAddPoints()&&this.setTrashCanVisibility(.5),this.props.apiOptions.isMobile&&(this.horizHairline=new z(this.graphie,[0,0],[0,0],{normalStyle:{strokeWidth:1}}),this.horizHairline.attr({stroke:I.INTERACTIVE}),this.horizHairline.hide(),this.vertHairline=new z(this.graphie,[0,0],[0,0],{normalStyle:{strokeWidth:1}}),this.vertHairline.attr({stroke:I.INTERACTIVE}),this.vertHairline.hide());var e=this.props.graph.type;this["add"+b(e)+"Controls"]()},showHairlines:function(e){this.props.apiOptions.isMobile&&"none"!==this.props.markings&&(this.horizHairline.moveTo([this.props.range[0][0],e[1]],[this.props.range[0][1],e[1]]),this.horizHairline.show(),this.vertHairline.moveTo([e[0],this.props.range[1][0]],[e[0],this.props.range[1][1]]),this.vertHairline.show())},hideHairlines:function(){this.props.apiOptions.isMobile&&(this.horizHairline.hide(),this.vertHairline.hide())},setTrashCanVisibility:function(e){var t=this.graphie;O.equal(e,0)?this.trashCan&&(this.trashCan.remove(),this.trashCan=null):this.props.apiOptions.isMobile||(this.trashCan||(this.trashCan=t.raphael.image(j,t.xpixels-40,t.ypixels-40,40,40)),this.trashCan.attr({opacity:e}))},componentWillReceiveProps:function(e){this.isClickToAddPoints()!==this.isClickToAddPoints(e)&&(this.shouldResetGraphie=!0,this.setState({shouldShowInstructions:this._getShouldShowInstructions(e)})),this.props.containerSizeClass!==e.containerSizeClass&&(this.shouldResetGraphie=!0)},isClickToAddPoints:function(e){return e=e||this.props,"point"===e.graph.type&&e.graph.numPoints===V||"polygon"===e.graph.type&&e.graph.numSides===V},_lineStroke:function(){return this.props.isMobile?{"stroke-width":3}:{}},addLine:function(e){var t=this,n=this,r=n.graphie,i=Y.getLineCoords(n.props.graph,n.props),o=n.points=P.map(i,function(e){return N.addMaybeMobileMovablePoint(t,{coord:e,constraints:[N.MovablePoint.constraints.bound(),N.MovablePoint.constraints.snap()],onMove:function(){var e=P.extend({},n.props.graph,{coords:P.invoke(o,"coord")});n.onChange({graph:e})}})}),s={points:o,static:!0,normalStyle:w({stroke:this.props.apiOptions.isMobile?I.BLUE_C:I.INTERACTIVE},this._lineStroke())};"line"===e?s.extendLine=!0:"ray"===e&&(s.extendRay=!0);n.line=N.addMovableLine(r,s);o[0].listen("constraints","isLine",function(e){return!A.equal(e,o[1].coord())}),o[1].listen("constraints","isLine",function(e){return!A.equal(e,o[0].coord())})},removeLine:function(){P.invoke(this.points,"remove"),this.line.remove()},addLinearControls:function(){this.addLine("line")},removeLinearControls:function(){this.removeLine()},addQuadraticControls:function(){var e=this,t=(this.graphie,this.props.graph.coords);t||(t=Y.defaultQuadraticCoords(this.props));var n,r,i,o=function(){var t=P.extend({},e.props.graph,{coords:[n.coord(),r.coord(),i.coord()]});e.onChange({graph:t}),e.updateQuadratic()};n=this.pointA=N.addMaybeMobileMovablePoint(this,{coord:t[0],constraints:[N.MovablePoint.constraints.bound(),N.MovablePoint.constraints.snap(),function(e){return!n||e[0]!==r.coord()[0]&&e[0]!==i.coord()[0]}],onMove:o}),r=this.pointB=N.addMaybeMobileMovablePoint(this,{coord:t[1],constraints:[N.MovablePoint.constraints.bound(),N.MovablePoint.constraints.snap(),function(e){return!r||e[0]!==n.coord()[0]&&e[0]!==i.coord()[0]}],onMove:o}),i=this.pointC=N.addMaybeMobileMovablePoint(this,{coord:t[2],constraints:[N.MovablePoint.constraints.bound(),N.MovablePoint.constraints.snap(),function(e){return!i||e[0]!==n.coord()[0]&&e[0]!==r.coord()[0]}],onMove:o}),this.updateQuadratic()},updateQuadratic:function(){var e=Y.getCurrentQuadraticCoefficients(this.props);if(e){var t=e[0],n=e[1],r=e[2];if(this.parabola){var i=this.graphie.svgParabolaPath(t,n,r);this.parabola.attr({path:i})}else this.parabola=this.graphie.parabola(t,n,r),this.parabola.attr(w({stroke:this.props.apiOptions.isMobile?I.BLUE_C:I.DYNAMIC},this._lineStroke())),this.parabola.toBack()}},removeQuadraticControls:function(){this.pointA.remove(),this.pointB.remove(),this.pointC.remove(),this.parabola&&(this.parabola.remove(),this.parabola=null)},addSinusoidControls:function(){var e=this,t=(this.graphie,this.props.graph.coords);t||(t=Y.defaultSinusoidCoords(this.props));var n,r,i=function(){var t=P.extend({},e.props.graph,{coords:[n.coord(),r.coord()]});e.onChange({graph:t}),e.updateSinusoid()};n=this.pointA=N.addMaybeMobileMovablePoint(this,{coord:t[0],constraints:[N.MovablePoint.constraints.bound(),N.MovablePoint.constraints.snap(),function(e){return!n||e[0]!==r.coord()[0]}],onMove:i}),r=this.pointB=N.addMaybeMobileMovablePoint(this,{coord:t[1],constraints:[N.MovablePoint.constraints.bound(),N.MovablePoint.constraints.snap(),function(e){return!n||e[0]!==n.coord()[0]}],onMove:i}),this.updateSinusoid()},updateSinusoid:function(){var e=Y.getCurrentSinusoidCoefficients(this.props);if(e){var t=e[0],n=e[1],r=e[2],i=e[3];if(this.sinusoid){var o=this.graphie.svgSinusoidPath(t,n,r,i);this.sinusoid.attr({path:o})}else this.sinusoid=this.graphie.sinusoid(t,n,r,i),this.sinusoid.attr(w({stroke:this.props.apiOptions.isMobile?I.BLUE_C:I.DYNAMIC},this._lineStroke())),this.sinusoid.toBack()}},removeSinusoidControls:function(){this.pointA.remove(),this.pointB.remove(),this.sinusoid&&(this.sinusoid.remove(),this.sinusoid=null)},addCircleControls:function(){var e=this,t=this.graphie,n=P.min(t.snap),r=this.circle=t.addCircleGraph({center:this.props.graph.center||[0,0],radius:this.props.graph.radius||P.min(this.props.step),snapX:t.snap[0],snapY:t.snap[1],minRadius:2*n,snapRadius:n});$(r).on("move",function(){var t=P.extend({},e.props.graph,{center:r.center,radius:r.radius});e.onChange({graph:t})})},removeCircleControls:function(){this.circle.remove()},addLinearSystemControls:function(){var e=this,t=this.graphie,n=Y.getLinearSystemCoords(this.props.graph,this.props),r=[I.INTERACTIVE,I.GREEN],i=this.points=P.map(n,function(t,n){var i=P.map(t,function(t,o){return N.addMaybeMobileMovablePoint(e,{coord:t,constraints:[N.MovablePoint.constraints.bound(),N.MovablePoint.constraints.snap(),function(e){if(i)return!A.equal(e,i[1-o].coord())}],onMove:function(){var t=P.extend({},e.props.graph,{coords:P.map(e.points,function(e){return P.invoke(e,"coord")})});e.onChange({graph:t})},normalStyle:{fill:r[n]},highlightStyle:{fill:r[n]}})});return i});this.lines=P.map(i,function(e,n){return N.addMovableLine(t,{points:e,static:!0,extendLine:!0,normalStyle:{stroke:r[n]}})})},removeLinearSystemControls:function(){P.invoke(this.lines,"remove"),P.map(this.points,function(e){return P.invoke(e,"remove")})},isCoordInTrash:function(e){if(this.props.apiOptions.isMobile)return!1;var t=this.graphie,n=t.scalePoint(e);return n[0]>=t.xpixels-40&&n[1]>=t.ypixels-40},createPointForPointsType:function(e,t){var n=this,r=(n.graphie,function(){n.points=P.filter(n.points,function(e){return e!==i}),n.updateCoordsFromPoints(),setTimeout(i.remove.bind(i),0)}),i=N.addMaybeMobileMovablePoint(this,w({coord:e,constraints:[N.MovablePoint.constraints.bound(),N.MovablePoint.constraints.snap(),function(e){return P.all(n.points,function(t){return i===t||!A.equal(e,t.coord())})}],onMoveStart:function(){n.isClickToAddPoints()&&n.setTrashCanVisibility(1)},onMove:n.updateCoordsFromPoints,onMoveEnd:function(e){n.isClickToAddPoints()&&(n.isCoordInTrash(e)&&r(),n.setTrashCanVisibility(.5))}},this.props.apiOptions.isMobile&&n.isClickToAddPoints()?{onRemove:r}:{}));return i},removePoint:function(e){var t=null;return this.points=P.filter(this.points,function(n,r){return n!==e||(t=r,!1)}),t},createPointForPolygonType:function(e,t){var n=this,s=(this.graphie,!P.contains(["angles","sides"],this.props.graph.snapTo)),a=function(e){return(t+e+n.points.length)%n.points.length},u=function(){var e=n.removePoint(v);n.polygon.closed()&&(n.points=y(n.points,e),n.polygon.update({closed:!1})),n.updatePolygon(),n.clearCoords(),setTimeout(v.remove.bind(v),0)},h=function(e){if(n.isClickToAddPoints()){if(n.isCoordInTrash(e))u();else if(n.points.length>1&&(v===n.points[0]&&A.equal(e,P.last(n.points).coord())||v===P.last(n.points)&&A.equal(e,n.points[0].coord()))){var t=n.points.pop();n.points.length>2?(n.polygon.update({closed:!0}),n.updateCoordsFromPoints()):(n.polygon.update({closed:!1}),n.clearCoords()),n.updatePolygon(),setTimeout(t.remove.bind(t),0)}else{var r=P.any(n.points,function(t){return t!==v&&A.equal(t.coord(),e)});r?(n.removePoint(v),n.points.length<3?(n.polygon.update({closed:!1}),n.clearCoords()):n.polygon.closed()&&n.updateCoordsFromPoints(),n.updatePolygon(),setTimeout(v.remove.bind(v),0)):v!==n.points[0]&&v!==P.last(n.points)||v.hasMoved()||v.state.isInitialMove||n.polygon.closed()||!(n.points.length>2)||(n.polygon.update({closed:!0}),n.updatePolygon(),n.updateCoordsFromPoints())}n.setTrashCanVisibility(.5)}v.state.isInitialMove=!1},f=function(e){if(null==n.points||0===n.points.length)return!0;var s=P.invoke(n.points,"coord");if(s[t]=e,!n.isClickToAddPoints()){if(i(s[a(-2)],s[a(-1)],s[t])||i(s[a(-1)],s[t],s[a(1)])||i(s[t],s[a(1)],s[a(2)]))return!1;var u=P.zip(s,y(s));if(n.points.length>3)for(var h=-1;h<=0;h++)for(var f=u[a(h)],v=P.without(u,f,u[a(h-1)],u[a(h+1)]),b=0;b<v.length;b++){var E=v[b];if(l(f,E))return!1}}if("angles"===n.props.graph.snapTo&&n.points.length>2){var T=P.map(d(s),function(e){return 180*e/Math.PI});P.each([-1,1],function(e){T[a(e)]=Math.round(T[a(e)])});var x=function(e,t,n){var r=R.findAngle(s[a(e)],s[a(n)],s[a(t)]);return(r+360)%360},w=[T[a(-1)]-x(-2,-1,1),T[a(1)]-x(-1,1,2)];if(w[2]=180-(w[0]+w[1]),P.any(w,function(e){return m(e,1)}))return!1;var C=c(p(s[a(-1)],s[a(1)])),S=1===o(r(s[a(-1)],s[a(1)],s[t])),k=Math.sin(w[1]*Math.PI/180)/Math.sin(w[2]*Math.PI/180)*C,N=R.findAngle(s[a(1)],s[a(-1)]),M=n.graphie.polar(k,N+(S?1:-1)*w[0]);return n.graphie.addPoints(s[a(-1)],M)}if("sides"===n.props.graph.snapTo&&n.points.length>1){var _=P.map([[s[a(-1)],s[t]],[s[t],s[a(1)]],[s[a(-1)],s[a(1)]]],function(e){return c(p.apply(null,e))});if(P.each([0,1],function(e){_[e]=Math.round(_[e])}),m(_[1]+_[2],_[0])||m(_[0]+_[2],_[1])||m(_[0]+_[1],_[2]))return!1;var O=g(_[0],_[2],_[1]),N=R.findAngle(s[a(1)],s[a(-1)]),S=1===o(r(s[a(-1)],s[a(1)],s[t])),M=n.graphie.polar(_[0],N+(S?1:-1)*O);return n.graphie.addPoints(s[a(-1)],M)}return!0},v=N.addMaybeMobileMovablePoint(this,w({coord:e,constraints:[N.MovablePoint.constraints.bound(),s?N.MovablePoint.constraints.snap():null,f],onMoveStart:function(){n.isClickToAddPoints()&&n.setTrashCanVisibility(1)},onMove:function(){n.polygon.closed()&&n.updateCoordsFromPoints()},onMoveEnd:h},this.props.apiOptions.isMobile&&this.isClickToAddPoints()?{onRemove:u}:{}));return v.state.isInitialMove=!0,v},updateCoordsFromPoints:function(){var e=P.extend({},this.props.graph,{coords:P.map(this.points,function(e){return P.result(e,"coord")})});this.onChange({graph:e})},clearCoords:function(){var e=P.extend({},this.props.graph,{coords:null});this.onChange({graph:e})},onChange:function(e){this.props.onChange(e),this.props.trackInteraction()},addPointControls:function(){var e=Y.getPointCoords(this.props.graph,this.props);this.points=[],this.points=P.map(e,this.createPointForPointsType,this)},removePointControls:function(){P.invoke(this.points,"remove")},addSegmentControls:function(){var e=this,t=this,n=this.graphie,r=Y.getSegmentCoords(this.props.graph,this.props),i=function(t){return N.addMaybeMobileMovablePoint(e,t)};this.points=[],this.lines=P.map(r,function(e,r){var o=function(){var e=P.extend({},t.props.graph,{coords:P.invoke(t.lines,"coords")});t.onChange({graph:e})},s=P.map(e,function(e,t){return i({coord:e,constraints:[N.MovablePoint.constraints.bound(),N.MovablePoint.constraints.snap(),function(e){if(s)return!A.equal(e,s[1-t].coord())}],onMove:o})});t.points=t.points.concat(s);var a=N.addMovableLine(n,{points:s,static:!1,constraints:[N.MovableLine.constraints.bound(),N.MovableLine.constraints.snap()],onMove:[N.MovableLine.onMove.updatePoints,o],normalStyle:w({stroke:this.props.apiOptions.isMobile?I.BLUE_C:I.INTERACTIVE},this._lineStroke()),highlightStyle:w({stroke:this.props.apiOptions.isMobile?I.BLUE_C:I.INTERACTING},this._lineStroke())});return P.invoke(s,"toFront"),a},this)},removeSegmentControls:function(){P.invoke(this.points,"remove"),P.invoke(this.lines,"remove")},addRayControls:function(){this.addLine("ray")},removeRayControls:function(){this.removeLine()},addPolygonControls:function(){this.polygon=null;var e=Y.getPolygonCoords(this.props.graph,this.props);this.points=[],this.points=P.map(e,this.createPointForPolygonType,this),this.updatePolygon()},updatePolygon:function(){var e;e=this.polygon?this.polygon.closed():this.points.length>=3;var t=this.graphie,n=this.points.length,r=!P.contains(["angles","sides"],this.props.graph.snapTo),i=P.times(n,function(t){return this.props.graph.showAngles&&(e||0!==t&&t!==n-1)?"angles"===this.props.graph.snapTo?"$deg0":"$deg1":""},this),o=P.times(n,function(t){return e||0!==t&&t!==n-1},this),s=P.times(n,function(t){return this.props.graph.showAngles&&(e||0!==t&&t!==n-1)?1:0},this),a=P.times(n,function(t){return!this.props.graph.showSides||!e&&t===n-1?"":"sides"===this.props.graph.snapTo?"$len0":"$len1"},this);if(null==this.polygon){var l=this;l.polygon=N.addMovablePolygon(t,{constraints:[N.MovablePolygon.constraints.bound(),r?N.MovablePolygon.constraints.snap():null],closed:e,points:l.points,angleLabels:i,showRightAngleMarkers:o,numArcs:s,sideLabels:a,onMove:[N.MovablePolygon.onMove.updatePoints,function(){this.closed()&&l.updateCoordsFromPoints()}],normalStyle:w({stroke:this.props.apiOptions.isMobile?I.BLUE_C:I.INTERACTIVE},this._lineStroke())})}else this.polygon.update({closed:e,points:this.points,angleLabels:i,showRightAngleMarkers:o,numArcs:s,sideLabels:a})},removePolygonControls:function(){P.invoke(this.points,"remove"),this.polygon.remove()},addAngleControls:function(){var e=this,t=this.graphie,n=Y.getAngleCoords(this.props.graph,this.props);this.points=P.map(n,function(e,n){return t.addMovablePoint(P.extend({coord:e,normalStyle:{stroke:I.INTERACTIVE,fill:I.INTERACTIVE}},1===n?{snapX:t.snap[0],snapY:t.snap[1]}:{}))}),this.angle=t.addMovableAngle({points:this.points,snapDegrees:this.props.graph.snapDegrees||1,snapOffsetDeg:this.props.graph.angleOffsetDeg||0,angleLabel:this.props.graph.showAngles?"$deg0":"",pushOut:2,allowReflex:s(this.props.graph.allowReflexAngles,!0)}),$(this.angle).on("move",function(){var t=P.extend({},e.props.graph,{coords:e.angle.getClockwiseCoords()});e.onChange({graph:t})})},removeAngleControls:function(){P.invoke(this.points,"remove"),this.angle.remove()},toggleShowAngles:function(){var e=P.extend({},this.props.graph,{showAngles:!this.props.graph.showAngles});this.onChange({graph:e})},toggleShowSides:function(){var e=P.extend({},this.props.graph,{showSides:!this.props.graph.showSides});this.onChange({graph:e})},getUserInput:function(){return this.props.graph},simpleValidate:function(e){return Y.validate(this.getUserInput(),e,this)},focus:$.noop});P.extend(Y,{getQuadraticCoefficients:function(e){var t=e[0],n=e[1],r=e[2],i=(t[0]-n[0])*(t[0]-r[0])*(n[0]-r[0]);if(0!==i){var o=(r[0]*(n[1]-t[1])+n[0]*(t[1]-r[1])+t[0]*(r[1]-n[1]))/i,s=(r[0]*r[0]*(t[1]-n[1])+n[0]*n[0]*(r[1]-t[1])+t[0]*t[0]*(n[1]-r[1]))/i,a=(n[0]*r[0]*(n[0]-r[0])*t[1]+r[0]*t[0]*(r[0]-t[0])*n[1]+t[0]*n[0]*(t[0]-n[0])*r[1])/i;return[o,s,a]}},getSinusoidCoefficients:function(e){var t=e[0],n=e[1],r=n[1]-t[1],i=Math.PI/(2*(n[0]-t[0])),o=t[0]*i,s=t[1];return[r,i,o,s]},getLineCoords:function(e,t){return e.coords||Y.pointsFromNormalized(t,[[.25,.75],[.75,.75]])},getPointCoords:function(e,t){var n=e.numPoints||1,r=e.coords;if(r)return r;switch(n){case 1:r=[e.coord||[0,0]];break;case 2:r=[[-5,0],[5,0]];break;case 3:r=[[-5,0],[0,0],[5,0]];break;case 4:r=[[-6,0],[-2,0],[2,0],[6,0]];break;case 5:r=[[-6,0],[-3,0],[0,0],[3,0],[6,0]];break;case 6:r=[[-5,0],[-3,0],[-1,0],[1,0],[3,0],[5,0]];break;case V:r=[]}var i=[[-10,10],[-10,10]];r=Y.normalizeCoords(r,i);var r=Y.pointsFromNormalized(t,r);return r},getLinearSystemCoords:function(e,t){return e.coords||P.map([[[.25,.75],[.75,.75]],[[.25,.25],[.75,.25]]],function(e){return Y.pointsFromNormalized(t,e)})},getPolygonCoords:function(e,t){var n=e.coords;if(n)return n;var r=e.numSides||3;if(r===V)n=[];else{var i=2*Math.PI/r,o=(1/r-.5)*Math.PI,s="sides"===e.snapTo?Math.sqrt(3)/3*7:4;n=P.times(r,function(e){return[s*Math.cos(e*i+o),s*Math.sin(e*i+o)]})}var a=[[-10,10],[-10,10]];n=Y.normalizeCoords(n,a);var l=!P.contains(["angles","sides"],e.snapTo);return n=Y.pointsFromNormalized(t,n,!l)},getSegmentCoords:function(e,t){var n=e.coords;if(n)return n;var r=e.numSegments||1,i={1:[5],2:[5,-5],3:[5,0,-5],4:[6,2,-2,-6],5:[6,3,0,-3,-6],6:[5,3,1,-1,-3,-5]}[r],o=[[-10,10],[-10,10]];return P.map(i,function(e){var n=[[-5,e],[5,e]];return n=Y.normalizeCoords(n,o),n=Y.pointsFromNormalized(t,n)})},getAngleCoords:function(e,t){var n=e.coords;if(n)return n;for(var r=e.snapDegrees||1,i=r;i<20;)i+=r;i=i*Math.PI/180;var o=(e.angleOffsetDeg||0)*Math.PI/180;n=Y.pointsFromNormalized(t,[[.85,.5],[.5,.5]]);var s=c(p.apply(null,n));return n[0]=[n[1][0]+s*Math.cos(o),n[1][1]+s*Math.sin(o)],n[2]=[n[1][0]+s*Math.cos(i+o),n[1][1]+s*Math.sin(i+o)],n},normalizeCoords:function(e,t){return P.map(e,function(e){return P.map(e,function(e,n){var r=t[n][1]-t[n][0];return(e+t[n][1])/r})})},getEquationString:function(e){var t=e.graph.type,n="get"+b(t)+"EquationString";return Y[n](e)},pointsFromNormalized:function(e,t,n){return P.map(t,function(t){return P.map(t,function(t,r){var i=e.range[r];if(n)return i[0]+(i[1]-i[0])*t;var o=e.step[r],s=x(i,o),a=Math.round(t*s);return i[0]+o*a})})},getLinearEquationString:function(e){var t=Y.getLineCoords(e.graph,e);if(H(t[0][0],t[1][0]))return"x = "+t[0][0].toFixed(3);var n=(t[1][1]-t[0][1])/(t[1][0]-t[0][0]),r=t[0][1]-n*t[0][0];return H(n,0)?"y = "+r.toFixed(3):"y = "+n.toFixed(3)+"x + "+r.toFixed(3)},getCurrentQuadraticCoefficients:function(e){var t=e.graph.coords||Y.defaultQuadraticCoords(e);return Y.getQuadraticCoefficients(t)},defaultQuadraticCoords:function(e){var t=[[.25,.75],[.5,.25],[.75,.75]];return Y.pointsFromNormalized(e,t)},getQuadraticEquationString:function(e){var t=Y.getCurrentQuadraticCoefficients(e);return"y = "+t[0].toFixed(3)+"x^2 + "+t[1].toFixed(3)+"x + "+t[2].toFixed(3)},getCurrentSinusoidCoefficients:function(e){var t=e.graph.coords||Y.defaultSinusoidCoords(e);return Y.getSinusoidCoefficients(t)},defaultSinusoidCoords:function(e){var t=[[.5,.5],[.65,.6]];return Y.pointsFromNormalized(e,t)},getSinusoidEquationString:function(e){var t=Y.getCurrentSinusoidCoefficients(e);return"y = "+t[0].toFixed(3)+"sin("+t[1].toFixed(3)+"x - "+t[2].toFixed(3)+") + "+t[3].toFixed(3)},getCircleEquationString:function(e){var t=e.graph,n=t.center||[0,0],r=t.radius||2;return"center ("+n[0]+", "+n[1]+"), radius "+r},getLinearSystemEquationString:function(e){var t=Y.getLinearSystemCoords(e.graph,e);return"\n"+E(t[0][0],t[0][1])+"\n"+E(t[1][0],t[1][1])+"\n"+T(t[0],t[1])},getPointEquationString:function(e){var t=Y.getPointCoords(e.graph,e);return t.map(function(e){return"("+e[0]+", "+e[1]+")"}).join(", ")},getSegmentEquationString:function(e){var t=Y.getSegmentCoords(e.graph,e);return P.map(t,function(e){return"["+P.map(e,function(e){return"("+e.join(", ")+")"}).join(" ")+"]"}).join(" ")},getRayEquationString:function(e){var t=Y.getLineCoords(e.graph,e),n=t[0],r=t[1],i=Y.getLinearEquationString(e);return i+=n[0]>r[0]?" (for x <= "+n[0].toFixed(3)+")":n[0]<r[0]?" (for x >= "+n[0].toFixed(3)+")":n[1]>r[1]?" (for y <= "+n[1].toFixed(3)+")":" (for y >= "+n[1].toFixed(3)+")"},getPolygonEquationString:function(e){var t=Y.getPolygonCoords(e.graph,e);return P.map(t,function(e){return"("+e.join(", ")+")"}).join(" ")},getAngleEquationString:function(e){var t=Y.getAngleCoords(e.graph,e),n=R.findAngle(t[2],t[0],t[1]);return n.toFixed(0)+"° angle at ("+t[1].join(", ")+")"},validate:function(e,t,n){var r=!!(e.coords||e.center&&e.radius);if(e.type===t.correct.type&&r)if("linear"===e.type){var o=e.coords,s=t.correct.coords;if(i(s[0],s[1],o[0])&&i(s[0],s[1],o[1]))return{type:"points",earned:1,total:1,message:null}}else if("linear-system"===e.type){var o=e.coords,s=t.correct.coords;if(i(s[0][0],s[0][1],o[0][0])&&i(s[0][0],s[0][1],o[0][1])&&i(s[1][0],s[1][1],o[1][0])&&i(s[1][0],s[1][1],o[1][1])||i(s[0][0],s[0][1],o[1][0])&&i(s[0][0],s[0][1],o[1][1])&&i(s[1][0],s[1][1],o[0][0])&&i(s[1][0],s[1][1],o[0][1]))return{type:"points",earned:1,total:1,message:null}}else if("quadratic"===e.type){var a=this.getQuadraticCoefficients(e.coords),l=this.getQuadraticCoefficients(t.correct.coords);if(U(a,l))return{type:"points",earned:1,total:1,message:null}}else if("sinusoid"===e.type){var a=this.getSinusoidCoefficients(e.coords),l=this.getSinusoidCoefficients(t.correct.coords),p=v(a),c=v(l);if(U(p,c))return{type:"points",earned:1,total:1,message:null}}else if("circle"===e.type){if(U(e.center,t.correct.center)&&H(e.radius,t.correct.radius))return{type:"points",earned:1,total:1,message:null}}else if("point"===e.type){var o=e.coords,s=Y.getPointCoords(t.correct,n);if(o=o.slice(),s=s.slice(),o.sort(),s.sort(),U(o,s))return{type:"points",earned:1,total:1,message:null}}else if("polygon"===e.type){var u,o=e.coords.slice(),s=t.correct.coords.slice();if("similar"===t.correct.match?u=f(o,s,Number.POSITIVE_INFINITY):"congruent"===t.correct.match?u=f(o,s,O.DEFAULT_TOLERANCE):"approx"===t.correct.match?u=f(o,s,.1):(o.sort(),s.sort(),u=U(o,s)),u)return{type:"points",earned:1,total:1,message:null}}else if("segment"===e.type){var o=e.coords.slice(),s=t.correct.coords.slice();if(o=P.invoke(o,"sort").sort(),s=P.invoke(s,"sort").sort(),U(o,s))return{type:"points",earned:1,total:1,message:null}}else if("ray"===e.type){var o=e.coords,s=t.correct.coords;if(U(o[0],s[0])&&i(s[0],s[1],o[1]))return{type:"points",earned:1,total:1,message:null}}else if("angle"===e.type){var u,o=e.coords,s=t.correct.coords;if("congruent"===t.correct.match){var h=P.map([o,s],function(e){var t=R.findAngle(e[2],e[0],e[1]);return(t+360)%360});u=H.apply(null,h)}else u=U(o[1],s[1])&&i(s[1],s[0],o[0])&&i(s[1],s[2],o[2]);if(u)return{type:"points",earned:1,total:1,message:null}}return!r||P.isEqual(e,t.graph)?{type:"invalid",message:null}:{type:"points",earned:0,total:1,message:null}}}),e.exports={name:"interactive-graph",displayName:"Interactive graph",widget:Y}},function(e,t,n){"use strict";var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},i=n(34),o=n(57),s=n(12),a=s.DeprecationMixin,l=n(198),p=n(89),c=n(113).widget,u=n(78),h=u.interactiveSizes,d=n(159),f=d.containerSizeClass,m=d.getInteractiveBoxFromSizeClass,g={url:null},v={showGraph:function(e){return{markings:e.showGraph?"graph":"none"}}},y=i.createClass({displayName:"InteractiveGraphEditor",className:"perseus-widget-interactive-graph",getDefaultProps:function(){return{labels:["x","y"],range:[[-10,10],[-10,10]],step:[1,1],valid:!0,backgroundImage:g,markings:"graph",showProtractor:!1,showRuler:!1,showTooltips:!1,rulerLabel:"",rulerTicks:10,correct:{type:"linear",coords:null}}},mixins:[a],deprecatedProps:v,render:function(){var e,t,n=this,a=this.props.gridStep||s.getGridStep(this.props.range,this.props.step,h.defaultBoxSize),u=this.props.snapStep||s.snapStepFromGridStep(a),d=f.SMALL;if(this.props.valid===!0){var g={ref:"graph",box:this.props.box,range:this.props.range,labels:this.props.labels,step:this.props.step,gridStep:a,snapStep:u,graph:this.props.correct,backgroundImage:this.props.backgroundImage,markings:this.props.markings,showProtractor:this.props.showProtractor,showRuler:this.props.showRuler,rulerLabel:this.props.rulerLabel,rulerTicks:this.props.rulerTicks,trackInteraction:function(){},flexibleType:!0,onChange:function(e){var t=n.props.correct;t=t.type===e.graph.type?o.extend({},t,e.graph):e.graph,n.props.onChange({correct:t})}};e=i.createElement(c,r({},g,{containerSizeClass:d,apiOptions:r({},this.props.apiOptions,{isMobile:!1})})),t=c.getEquationString(g)}else e=i.createElement("div",{className:"perseus-error"},this.props.valid);return i.createElement("div",{className:"perseus-widget-interactive-graph"},i.createElement("div",null,"Correct answer"," ",i.createElement(p,null,i.createElement("p",null,"Graph the correct answer in the graph below and ensure the equation or point coordinates displayed represent the correct answer."))," ",": ",t),i.createElement(l,{box:m(d),range:this.props.range,labels:this.props.labels,step:this.props.step,gridStep:a,snapStep:u,valid:this.props.valid,backgroundImage:this.props.backgroundImage,markings:this.props.markings,showProtractor:this.props.showProtractor,showRuler:this.props.showRuler,showTooltips:this.props.showTooltips,rulerLabel:this.props.rulerLabel,rulerTicks:this.props.rulerTicks,onChange:this.props.onChange}),"polygon"===this.props.correct.type&&i.createElement("div",{className:"type-settings"},i.createElement("label",null," ","Student answer must"," ",i.createElement("select",{value:this.props.correct.match,onChange:this.changeMatchType},i.createElement("option",{value:"exact"},"match exactly"),i.createElement("option",{value:"congruent"},"be congruent"),i.createElement("option",{value:"approx"},"be approximately congruent"),i.createElement("option",{value:"similar"},"be similar"))),i.createElement(p,null,i.createElement("ul",null,i.createElement("li",null,i.createElement("p",null,i.createElement("b",null,"Match Exactly:")," Match exactly in size, orientation, and location on the grid even if it is not shown in the background.")),i.createElement("li",null,i.createElement("p",null,i.createElement("b",null,"Be Congruent:")," Be congruent in size and shape, but can be located anywhere on the grid.")),i.createElement("li",null,i.createElement("p",null,i.createElement("b",null,"Be Approximately Congruent:")," Be exactly similar, and congruent in size and shape to within 0.1 units, but can be located anywhere on the grid. ",i.createElement("em",null,"Use this with snapping to angle measure."))),i.createElement("li",null,i.createElement("p",null,i.createElement("b",null,"Be Similar:")," Be similar with matching interior angles, and side measures that are matching or a multiple of the correct side measures. The figure can be located anywhere on the grid."))))),"angle"===this.props.correct.type&&i.createElement("div",{className:"type-settings"},i.createElement("div",null,i.createElement("label",null," ","Student answer must"," ",i.createElement("select",{value:this.props.correct.match,onChange:this.changeMatchType},i.createElement("option",{value:"exact"},"match exactly"),i.createElement("option",{value:"congruent"},"be congruent"))),i.createElement(p,null,i.createElement("p",null,"Congruency requires only that the angle measures are the same. An exact match implies congruency, but also requires that the angles have the same orientation and that the vertices are in the same position.")))),e)},changeMatchType:function(e){var t=o.extend({},this.props.correct,{match:e.target.value});this.props.onChange({correct:t})},serialize:function(){var e=o.pick(this.props,"step","backgroundImage","markings","labels","showProtractor","showRuler","showTooltips","rulerLabel","rulerTicks","range","gridStep","snapStep"),t=this.refs.graph;if(t){var n=t&&t.getUserInput();o.extend(e,{graph:{type:n.type},correct:n}),o.each(["allowReflexAngles","angleOffsetDeg","numPoints","numSides","numSegments","showAngles","showSides","snapTo","snapDegrees"],function(t){o.has(n,t)&&(e.graph[t]=n[t])})}return e}});e.exports=y},function(e,t,n){"use strict";var r=n(34),i=n(57),o=n(172),s=n(194),a=5,l={display:"table",tableLayout:"fixed"},p={display:"table-row"},c={display:"table-cell",padding:a},u={borderRadius:10,cursor:"pointer"},h={padding:a,display:"inline-block"},d={float:"right",paddingRight:a},f=50,m={plus:function(){return[[!1,!0,!1],[!0,!0,!0],[!1,!0,!1]]},x:function(){return[[!0,!1,!0],[!1,!0,!1],[!0,!1,!0]]},"plus/x":function(e){return e%2?m.x():m.plus()}},g=r.createClass({displayName:"Tile",propTypes:{value:r.PropTypes.bool.isRequired,size:r.PropTypes.number.isRequired},render:function(){var e=this.props.value?"#55dd55":"#115511",t=i.extend({},u,{width:this.props.size,height:this.props.size,backgroundColor:e});return r.createElement("div",{style:t,onClick:this._flip})},_flip:function(){this.props.onChange(!this.props.value)}}),v=r.createClass({displayName:"TileGrid",propTypes:{cells:r.PropTypes.arrayOf(r.PropTypes.arrayOf(r.PropTypes.bool)).isRequired,size:r.PropTypes.number.isRequired},render:function(){var e=this;return r.createElement("div",{style:l,className:"no-select"},i.map(this.props.cells,function(t,n){return r.createElement("div",{key:n,style:p},i.map(t,function(t,o){return r.createElement("div",{key:o,style:c},r.createElement(g,{value:t,size:e.props.size,onChange:i.partial(e.props.onChange,n,o)}))}))}))}}),y=function(e,t){return i.map(e,function(e,n){return i.map(e,function(e,r){return t(n,r)?!e:e})})},b=function(e,t,n,r){return y(e,function(e,i){var o=e-t,s=i-n;return Math.abs(o)<=1&&Math.abs(s)<=1&&r[o+1][s+1]})},E=r.createClass({displayName:"LightsPuzzle",mixins:[o,s],propTypes:{cells:r.PropTypes.arrayOf(r.PropTypes.arrayOf(r.PropTypes.bool)),startCells:r.PropTypes.arrayOf(r.PropTypes.arrayOf(r.PropTypes.bool)),flipPattern:r.PropTypes.string.isRequired,moveCount:r.PropTypes.number.isRequired},getDefaultProps:function(){return{cells:[[!1,!1,!1],[!1,!1,!1],[!1,!1,!1]],startCells:[[!1,!1,!1],[!1,!1,!1],[!1,!1,!1]],flipPattern:"plus",moveCount:0}},render:function(){var e=this._width(),t=f,n=e*(t+2*a);return r.createElement("div",null,r.createElement(v,{cells:this.props.cells,size:t,onChange:this._flipTile}),r.createElement("div",{style:{width:n}},r.createElement("div",{style:h},"Moves: ",this.props.moveCount),r.createElement("div",{style:d},r.createElement("input",{type:"button",value:"Reset",onClick:this._reset,className:"simple-button"}))),r.createElement("div",{className:"clearfix"}))},_width:function(){return 0!==this.props.cells.length?this.props.cells[0].length:0},componentDidMount:function(){this._initNextPatterns()},componentDidUpdate:function(e){e.flipPattern!==this.props.flipPattern&&this._initNextPatterns()},_initNextPatterns:function(){this._currPattern=m[this.props.flipPattern](0),this._nextPattern=m[this.props.flipPattern](1),this._patternIndex=2},_shiftPatterns:function(){this._currPattern=this._nextPattern,this._nextPattern=m[this.props.flipPattern](this._patternIndex),this._patternIndex++},_flipTile:function(e,t){var n=b(this.props.cells,e,t,this._currPattern);this._shiftPatterns(),this.change({cells:n,moveCount:this.props.moveCount+1})},_reset:function(){this.change({cells:this.props.startCells,moveCount:0})},simpleValidate:function(e){return T(e,this.getUserInput())}}),T=function(e,t){var n=i.all(t.cells,function(t,n){return i.all(t,function(t,r){return t===e.startCells[n][r]})});if(n)return{type:"invalid",message:i18n._("Click on the tiles to change the lights.")};var r=i.all(t.cells,function(e){return i.all(e,function(e){return e})});return r?{type:"points",
earned:1,total:1,message:null}:e.gradeIncompleteAsWrong?{type:"points",earned:0,total:1,message:null}:{type:"invalid",message:i18n._("You must turn on all of the lights to continue.")}},x=function(e){return{cells:e.startCells,startCells:e.startCells,flipPattern:e.flipPattern}};e.exports={name:"lights-puzzle",displayName:"Lights Puzzle",hidden:!0,widget:E,transform:x}},function(e,t,n){"use strict";var r=n(34),i=n(57),o=n(172),s=n(173),a=n(175),l=n(45),p=n(89),c=8,u=5,h={display:"table",tableLayout:"fixed"},d={display:"table-row"},f={display:"table-cell",padding:u},m={borderRadius:10,cursor:"pointer"},g={plus:function(){return[[!1,!0,!1],[!0,!0,!0],[!1,!0,!1]]},x:function(){return[[!0,!1,!0],[!1,!0,!1],[!0,!1,!0]]},"plus/x":function(e){return e%2?g.x():g.plus()}},v=function(e,t,n){return e=Math.floor(e),e=Math.max(e,t),e=Math.min(e,n)},y=function(e,t){return i.map(e,function(e,n){return i.map(e,function(e,r){return t(n,r)?!e:e})})},b=r.createClass({displayName:"Tile",propTypes:{value:r.PropTypes.bool.isRequired,size:r.PropTypes.number.isRequired},render:function(){var e=this.props.value?"#55dd55":"#115511",t=i.extend({},m,{width:this.props.size,height:this.props.size,backgroundColor:e});return r.createElement("div",{style:t,onClick:this._flip})},_flip:function(){this.props.onChange(!this.props.value)}}),E=r.createClass({displayName:"TileGrid",propTypes:{cells:r.PropTypes.arrayOf(r.PropTypes.arrayOf(r.PropTypes.bool)).isRequired,size:r.PropTypes.number.isRequired},render:function(){var e=this;return r.createElement("div",{style:h,className:"no-select"},i.map(this.props.cells,function(t,n){return r.createElement("div",{key:n,style:d},i.map(t,function(t,o){return r.createElement("div",{key:o,style:f},r.createElement(b,{value:t,size:e.props.size,onChange:i.partial(e.props.onChange,n,o)}))}))}))}}),T=r.createClass({displayName:"LightsPuzzleEditor",mixins:[o,s],propTypes:{startCells:r.PropTypes.arrayOf(r.PropTypes.arrayOf(r.PropTypes.bool)),flipPattern:r.PropTypes.string.isRequired,gradeIncompleteAsWrong:r.PropTypes.bool.isRequired},getDefaultProps:function(){return{startCells:[[!1,!1,!1],[!1,!1,!1],[!1,!1,!1]],flipPattern:"plus",gradeIncompleteAsWrong:!1}},_height:function(){return this.props.startCells.length},_width:function(){return 0!==this.props.startCells.length?this.props.startCells[0].length:0},render:function(){return r.createElement("div",null,r.createElement("div",null,"Width:",r.createElement(a,{value:this._width(),placeholder:5,onChange:this._changeWidth}),", ","Height:",r.createElement(a,{value:this._height(),placeholder:5,onChange:this._changeHeight})),r.createElement("div",null,"Flip pattern:",r.createElement("select",{value:this.props.flipPattern,onChange:this._handlePatternChange},i.map(i.keys(g),function(e,t){return r.createElement("option",{value:e,key:t},e)}))),r.createElement("div",null,"Grade incomplete puzzles as wrong:"," ",r.createElement(l,{gradeIncompleteAsWrong:this.props.gradeIncompleteAsWrong,onChange:this.props.onChange}),r.createElement(p,null,"By default, incomplete puzzles are graded as empty.")),r.createElement("div",null,"Starting configuration:"),r.createElement("div",{style:{overflowX:"auto"}},r.createElement(E,{cells:this.props.startCells,size:50,onChange:this._switchTile})))},_handlePatternChange:function(e){this.change("flipPattern",e.target.value)},_changeWidth:function(e){e=v(e,1,c),this._truncateCells(e,this._height())},_changeHeight:function(e){e=v(e,1,c),this._truncateCells(this._width(),e)},_truncateCells:function(e,t){var n=this,r=i.times(t,function(t){return i.times(e,function(e){return!(!n.props.startCells[t]||!n.props.startCells[t][e])})});this.change({startCells:r})},_switchTile:function(e,t){var n=y(this.props.startCells,function(n,r){return n===e&&r===t});this.change({startCells:n})}});e.exports=T},function(e,t,n){"use strict";var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},i=n(83),o=n(34),s=n(35),a=n(57),l=n(175),p=n(28),c=n(176),u=n(202),h=n(168),d=n(11).Options,f=n(58),m=n(160).propTypes.keypadElementPropType,g=n(189).assert,v=n(12).stringArrayOfSize,y={INPUT_MARGIN:4,INPUT_HEIGHT:38,INPUT_WIDTH:82},b={INPUT_MARGIN:3,INPUT_HEIGHT:30,INPUT_WIDTH:40},E={INPUT_MARGIN:4,INPUT_HEIGHT:36,INPUT_WIDTH:64},T=function(e,t){return[""+e,""+t]},x=function(){return T(0,0)},w=function(e){return g(a.isArray(e)&&2===e.length),+e[0]},C=function(e){return g(a.isArray(e)&&2===e.length),+e[1]},P=function(e){var t=w(e),n=C(e);return"answer"+t+","+n},S=function(e){var t=[1,1];return a(e).each(function(e,n){var r=0;a(e).each(function(e,t){null!=e&&e.toString().length&&(r=t+1)}),t[1]=Math.max(t[1],r),r>0&&(t[0]=Math.max(t[0],n+1))}),t},k=o.createClass({displayName:"Matrix",propTypes:{answers:o.PropTypes.arrayOf(o.PropTypes.arrayOf(o.PropTypes.oneOfType([o.PropTypes.string,o.PropTypes.number]))),apiOptions:d.propTypes,cursorPosition:o.PropTypes.arrayOf(o.PropTypes.number),keypadElement:m,matrixBoardSize:o.PropTypes.arrayOf(o.PropTypes.number).isRequired,prefix:o.PropTypes.string,suffix:o.PropTypes.string,trackInteraction:o.PropTypes.func.isRequired},getDefaultProps:function(){return{matrixBoardSize:[3,3],answers:[[]],prefix:"",suffix:"",cursorPosition:[0,0],apiOptions:d.defaults}},getInitialState:function(){return{enterTheMatrix:0}},componentDidMount:function(){this.cursorPosition=[0,0]},render:function(){var e=this,t=void 0;t=this.props.apiOptions.customKeypad?E:this.props.apiOptions.staticRender?y:b;var n=t,s=n.INPUT_MARGIN,d=n.INPUT_HEIGHT,f=n.INPUT_WIDTH,m=S(this.props.answers),g=this.props.matrixBoardSize[0],v=this.props.matrixBoardSize[1],x=this.props.cursorPosition[0],w=this.props.cursorPosition[1],C=Math.max(x,m[0]-1),k=Math.max(w,m[1]-1),N=(C+1)*(d+2*s),M=(k+1)*(f+2*s),_=i({"perseus-matrix":!0,"static-mode":this.props.static,"the-matrix":this.state.enterTheMatrix>=5});return o.createElement("div",{className:_},this.props.prefix&&o.createElement("div",{className:"matrix-prefix"},o.createElement(p,{content:this.props.prefix})),o.createElement("div",{className:"matrix-input"},o.createElement("div",{className:"matrix-bracket bracket-left",style:{height:N}}),o.createElement("div",{className:"matrix-bracket bracket-right",style:{height:N,left:M}}),a(g).times(function(t){var n=e.props.answers[t];return o.createElement("div",{className:"matrix-row",key:t},a(v).times(function(i){var a=t>C||i>k,p={className:a?"outside":"inside",ref:P(T(t,i)),value:n?n[i]:null,style:{height:d,width:f,margin:s},disabled:e.props.apiOptions.readOnly,onFocus:function(){e.cursorPosition=[t,i],e.props.onChange({cursorPosition:[t,i]},function(){return!1}),e._handleFocus(t,i)},onBlur:function(){t===e.cursorPosition[0]&&i===e.cursorPosition[1]&&e.props.onChange({cursorPosition:[0,0]},function(){return!1}),e._handleBlur(t,i)},onKeyDown:function(n){e.handleKeyDown(t,i,n)},onChange:function(n,r){e.onValueChange(t,i,n,r)}},m=void 0;if(e.props.apiOptions.customKeypad){var g={margin:s,minWidth:f,minHeight:d,boxSizing:"border-box",backgroundColor:a?"#f3f3f3":"#fff"};m=o.createElement(h,r({},p,{style:g,scrollable:!0,keypadElement:e.props.keypadElement}))}else m=e.props.apiOptions.staticRender?o.createElement(u,p):e.props.numericInput?o.createElement(l,p):o.createElement(c,p);return o.createElement("span",{key:i,className:"matrix-input-field"},m)}))})),this.props.suffix&&o.createElement("div",{className:"matrix-suffix"},o.createElement(p,{content:this.props.suffix})))},getInputPaths:function(){var e=[],t=this.props.matrixBoardSize[0],n=this.props.matrixBoardSize[1];return a(t).times(function(t){a(n).times(function(n){var r=T(t,n);e.push(r)})}),e},getGrammarTypeForPath:function(e){return"number"},_handleFocus:function(e,t){this.props.onFocus(T(e,t))},_handleBlur:function(e,t){this.props.onBlur(T(e,t))},focus:function(){return this.focusInputPath(x()),!0},focusInputPath:function(e){var t=P(e);this.refs[t].focus()},blurInputPath:function(e){0===e.length&&(e=x());var t=P(e);this.refs[t].blur()},getDOMNodeForPath:function(e){var t=P(e);return s.findDOMNode(this.refs[t])},setInputValue:function(e,t,n){var r=w(e),i=C(e);this.onValueChange(r,i,t,n)},handleKeyDown:function(e,t,n){var r=this.props.matrixBoardSize[0],i=this.props.matrixBoardSize[1],o=null,s=this.refs[P(T(e,t))],a=s.getStringValue(),l=s.getSelectionStart(),p=s.getSelectionEnd(),c=null;if("ArrowUp"===n.key&&e>0?c=T(e-1,t):"ArrowDown"===n.key&&e+1<r?c=T(e+1,t):"ArrowLeft"===n.key&&t>0?0===l&&0===p&&(c=T(e,t-1)):"ArrowRight"===n.key&&t+1<i?l===a.length&&(c=T(e,t+1)):"Enter"===n.key?o=this.state.enterTheMatrix+1:"Escape"===n.key&&(o=0),c){n.preventDefault();var u=this.refs[P(c)],h=u.getStringValue(),d=2*h.length;u.focus(),"ArrowRight"===n.key?u.setSelectionRange(0,0):u.setSelectionRange(d,d)}null!=o&&this.setState({enterTheMatrix:o})},onValueChange:function(e,t,n,r){var i=a.map(this.props.answers,a.clone);i[e]||(i[e]=[]),i[e][t]=n,this.props.onChange({answers:i},r),this.props.trackInteraction()},getUserInput:function(){return{answers:this.props.answers}},simpleValidate:function(e){return k.validate(this.getUserInput(),e)}});a.extend(k,{validate:function(e,t){var n=t.answers,r=e.answers,i=S(n),o=S(r),s=i[0]!==o[0]||i[1]!==o[1],l=f.number.createValidatorFunctional,p=null,c=!1,u=!1;return a(o[0]).times(function(e){a(o[1]).times(function(t){null!=r[e][t]&&0!==r[e][t].toString().length||(c=!0);var i=l(n[e][t],{simplify:!0}),o=i(r[e][t]);o.message&&(p=o.message),o.correct||(u=!0)})}),c?{type:"invalid",message:i18n._("Make sure you fill in all cells in the matrix.")}:s?{type:"points",earned:0,total:1,message:null}:{type:"points",earned:u?0:1,total:1,message:p}}});var N=function(e){var t=a(e.matrixBoardSize[0]).times(function(){return v(e.matrixBoardSize[1])});return e=a.pick(e,"matrixBoardSize","prefix","suffix"),a.extend(e,{answers:t})},M=function(e){var t=a.pick(e,"matrixBoardSize","prefix","suffix");return t.answers=a.map(e.answers,function(e){return a.map(e,function(e){return null!=e?String(e):""})}),t};e.exports={name:"matrix",displayName:"Matrix",widget:k,transform:N,staticTransform:M}},function(e,t,n){"use strict";var r=n(34),i=n(57),o=n(172),s=n(173),a=n(17),l=n(200),p=n(117).widget,c=6,u=function(e){var t=[1,1];return i(e).each(function(e,n){var r=0;i(e).each(function(e,t){null!=e&&e.toString().length&&(r=t+1)}),t[1]=Math.max(t[1],r),r>0&&(t[0]=Math.max(t[0],n+1))}),t},h=r.createClass({displayName:"MatrixEditor",mixins:[s,o],propTypes:{matrixBoardSize:r.PropTypes.arrayOf(r.PropTypes.number).isRequired,answers:r.PropTypes.arrayOf(r.PropTypes.arrayOf(r.PropTypes.number)),prefix:r.PropTypes.string,suffix:r.PropTypes.string,cursorPosition:r.PropTypes.arrayOf(r.PropTypes.number)},getDefaultProps:function(){return{matrixBoardSize:[3,3],answers:[[]],prefix:"",suffix:"",cursorPosition:[0,0]}},render:function(){var e=this,t=i.extend({numericInput:!0,onBlur:function(){},onFocus:function(){},trackInteraction:function(){}},this.props);return r.createElement("div",{className:"perseus-matrix-editor"},r.createElement("div",{className:"perseus-widget-row"}," ","Max matrix size:"," ",r.createElement(l,{value:this.props.matrixBoardSize,onChange:this.onMatrixBoardSizeChange,format:this.props.labelStyle,useArrowKeys:!0})),r.createElement("div",{className:"perseus-widget-row"},r.createElement(p,t)),r.createElement("div",{className:"perseus-widget-row"}," ","Matrix prefix:"," ",r.createElement(a,{ref:"prefix",apiOptions:this.props.apiOptions,content:this.props.prefix,widgetEnabled:!1,onChange:function(t){e.change({prefix:t.content})}})),r.createElement("div",{className:"perseus-widget-row"}," ","Matrix suffix:"," ",r.createElement(a,{ref:"suffix",apiOptions:this.props.apiOptions,content:this.props.suffix,widgetEnabled:!1,onChange:function(t){e.change({suffix:t.content})}})))},onMatrixBoardSizeChange:function(e){var t=this,n=u(this.props.answers);if(null!==e[0]&&null!==e[1]){e=[Math.round(Math.min(Math.max(e[0],1),c)),Math.round(Math.min(Math.max(e[1],1),c))];var r=i(Math.min(e[0],n[0])).times(function(r){return i(Math.min(e[1],n[1])).times(function(e){return t.props.answers[r][e]})});this.props.onChange({matrixBoardSize:e,answers:r})}}});e.exports=h},function(e,t,n){"use strict";var r=n(34),i=n(57),o=n(28),s=n(203),a=n(11).Options,l=n(12).shuffle,p=n(12).seededRNG,c=r.createClass({displayName:"Matcher",propTypes:{apiOptions:a.propTypes,labels:r.PropTypes.array,left:r.PropTypes.array,onChange:r.PropTypes.func,orderMatters:r.PropTypes.bool,padding:r.PropTypes.bool,problemNum:r.PropTypes.number,right:r.PropTypes.array,trackInteraction:r.PropTypes.func.isRequired},getDefaultProps:function(){return{left:[],right:[],labels:["",""],orderMatters:!1,padding:!0,problemNum:0,onChange:function(){}}},getInitialState:function(){return{leftHeight:0,rightHeight:0}},render:function(){var e,t=p(this.props.problemNum);e=this.props.orderMatters?l(this.props.left,t,!0):this.props.left;var n=l(this.props.right,t,!0),a=i.any(this.props.labels),c={height:i.max([this.state.leftHeight,this.state.rightHeight])},u=this.props.apiOptions.isMobile?8:5;return r.createElement("div",{className:"perseus-widget-matcher"},a&&r.createElement("div",{className:"perseus-clearfix"},r.createElement("div",{className:"column"},r.createElement("div",{className:"column-label"},r.createElement(o,{content:this.props.labels[0]||"..."}))),r.createElement("div",{className:"column"},r.createElement("div",{className:"column-label"},r.createElement(o,{content:this.props.labels[1]||"..."})))),r.createElement("div",{className:"perseus-clearfix"},r.createElement("div",{className:"column"},r.createElement(s,{options:e,layout:"vertical",padding:this.props.padding,disabled:!this.props.orderMatters,constraints:c,onMeasure:this.onMeasureLeft,onChange:this.changeAndTrack,margin:u,ref:"left"})),r.createElement("div",{className:"column"},r.createElement(s,{options:n,layout:"vertical",padding:this.props.padding,constraints:c,onMeasure:this.onMeasureRight,onChange:this.changeAndTrack,margin:u,ref:"right"}))))},changeAndTrack:function(e){this.props.onChange(e),this.props.trackInteraction()},onMeasureLeft:function(e){var t=i.max(e.heights);var iW = $('.perseus-widget-matcher div.perseus-clearfix:nth-child(2) .column:nth-child(1)').width();
$('.perseus-widget-matcher div.perseus-clearfix:nth-child(1) .column:nth-child(1)').width(iW); this.setState({leftHeight:t})},onMeasureRight:function(e){var t=i.max(e.heights);this.setState({rightHeight:t})},getUserInput:function(){return{left:this.refs.left.getOptions(),right:this.refs.right.getOptions()}},simpleValidate:function(e){return c.validate(this.getUserInput(),e)}});i.extend(c,{validate:function(e,t){var n=i.isEqual(e.left,t.left)&&i.isEqual(e.right,t.right);return{type:"points",earned:n?1:0,total:1,message:null}}}),e.exports={name:"matcher",displayName:"Two column matcher",widget:c}},function(e,t,n){"use strict";var r=n(34),i=n(57),o=n(89),s=n(45),a=n(84),l=r.createClass({displayName:"MatcherEditor",propTypes:{left:r.PropTypes.array,right:r.PropTypes.array,labels:r.PropTypes.array,orderMatters:r.PropTypes.bool,padding:r.PropTypes.bool},getDefaultProps:function(){return{left:["$x$","$y$","$z$"],right:["$1$","$2$","$3$"],labels:["test","label"],orderMatters:!1,padding:!0}},render:function(){var e=this;return r.createElement("div",{className:"perseus-matcher-editor"},r.createElement("div",null," ","Correct answer:"," ",r.createElement(o,null,r.createElement("p",null,"Enter the correct answers here. The preview on the right will show the cards in a randomized order, which is how the student will see them."))),r.createElement("div",{className:"perseus-clearfix"},r.createElement(a,{options:this.props.left,onChange:function(t,n){e.props.onChange({left:t},n)},layout:"vertical"}),r.createElement(a,{options:this.props.right,onChange:function(t,n){e.props.onChange({right:t},n)},layout:"vertical"})),r.createElement("span",null," ","Labels:"," ",r.createElement(o,null,r.createElement("p",null,"These are entirely optional."))),r.createElement("div",null,r.createElement("input",{type:"text",defaultValue:this.props.labels[0],onChange:this.onLabelChange.bind(this,0)}),r.createElement("input",{type:"text",defaultValue:this.props.labels[1],onChange:this.onLabelChange.bind(this,1)})),r.createElement("div",null,r.createElement(s,{label:"Order of the matched pairs matters:",orderMatters:this.props.orderMatters,onChange:this.props.onChange}),r.createElement(o,null,r.createElement("p",null,"With this option enabled, only the order provided above will be treated as correct. This is useful when ordering is significant, such as in the context of a proof."),r.createElement("p",null,"If disabled, pairwise matching is sufficient. To make this clear, the left column becomes fixed in the provided order and only the cards in the right column can be moved."))),r.createElement("div",null,r.createElement(s,{label:"Padding:",padding:this.props.padding,onChange:this.props.onChange}),r.createElement(o,null,r.createElement("p",null,"Padding is good for text, but not needed for images."))))},onLabelChange:function(e,t){var n=i.clone(this.props.labels);n[e]=t.target.value,this.props.onChange({labels:n})},getSaveWarnings:function(){return this.props.left.length!==this.props.right.length?["The two halves of the matcher have different numbers of cards."]:[]},serialize:function(){return i.pick(this.props,"left","right","labels","orderMatters","padding")}});e.exports=l},function(e,t,n){"use strict";var r=n(34),i=n(35),o=n(57),s=n(11).Options,a=n(190),l={url:null,top:0,left:0},p=r.createClass({displayName:"Measurer",propTypes:{apiOptions:s.propTypes,box:r.PropTypes.arrayOf(r.PropTypes.number),image:r.PropTypes.shape({url:r.PropTypes.string,top:r.PropTypes.number,left:r.PropTypes.number}),showProtractor:r.PropTypes.bool,protractorX:r.PropTypes.number,protractorY:r.PropTypes.number,showRuler:r.PropTypes.bool,rulerLabel:r.PropTypes.string,rulerTicks:r.PropTypes.number,rulerPixels:r.PropTypes.number,rulerLength:r.PropTypes.number},getDefaultProps:function(){return{box:[480,480],image:{},showProtractor:!0,protractorX:7.5,protractorY:.5,showRuler:!1,rulerLabel:"",rulerTicks:10,rulerPixels:40,rulerLength:10}},getInitialState:function(){return{}},render:function(){var e=o.extend({},l,this.props.image);return r.createElement("div",{className:"perseus-widget perseus-widget-measurer graphie-container above-scratchpad",style:{width:this.props.box[0],height:this.props.box[1]}},e.url&&r.createElement("img",{src:e.url,style:{top:e.top,left:e.left}}),r.createElement("div",{className:"graphie",ref:"graphieDiv"}))},componentDidMount:function(){this.setupGraphie()},componentDidUpdate:function(e){var t=o.any(["box","showProtractor","showRuler","rulerLabel","rulerTicks","rulerPixels","rulerLength"],function(t){return e[t]!==this.props[t]},this);t&&this.setupGraphie()},setupGraphie:function(){var e=i.findDOMNode(this.refs.graphieDiv);$(e).empty();var t=this.graphie=a.createGraphie(e),n=[40,40],r=[[0,this.props.box[0]/n[0]],[0,this.props.box[1]/n[1]]];t.init({range:r,scale:n}),t.addMouseLayer({allowScratchpad:!0,setDrawingAreaAvailable:this.props.apiOptions.setDrawingAreaAvailable}),this.protractor&&this.protractor.remove(),this.props.showProtractor&&(this.protractor=t.protractor([this.props.protractorX,this.props.protractorY])),this.ruler&&this.ruler.remove(),this.props.showRuler&&(this.ruler=t.ruler({center:[(r[0][0]+r[0][1])/2,(r[1][0]+r[1][1])/2],label:this.props.rulerLabel,pixelsPerUnit:this.props.rulerPixels,ticksPerUnit:this.props.rulerTicks,units:this.props.rulerLength}))},getUserInput:function(){return{}},simpleValidate:function(e){return p.validate(this.getUserInput(),e)},focus:$.noop});o.extend(p,{validate:function(e,t){return{type:"points",earned:1,total:1,message:null}}});var c={1:function(e){var t=o(e).chain().omit("imageUrl","imageTop","imageLeft").extend({image:{url:e.imageUrl,top:e.imageTop,left:e.imageLeft}}).value();return t}};e.exports={name:"measurer",displayName:"Measurer",widget:p,version:{major:1,minor:0},propUpgrades:c}},function(e,t,n){"use strict";var r=n(34),i=n(57),o=n(172),s=n(173),a=n(89),l=n(175),p=n(45),c=n(200),u={url:null,top:0,left:0},h=r.createClass({displayName:"MeasurerEditor",mixins:[o,s],className:"perseus-widget-measurer",propTypes:{box:r.PropTypes.arrayOf(r.PropTypes.number),image:r.PropTypes.shape({url:r.PropTypes.string,top:r.PropTypes.number,left:r.PropTypes.number}),showProtractor:r.PropTypes.bool,showRuler:r.PropTypes.bool,rulerLabel:r.PropTypes.string,rulerTicks:r.PropTypes.number,rulerPixels:r.PropTypes.number,rulerLength:r.PropTypes.number},getDefaultProps:function(){return{box:[480,480],image:{},showProtractor:!0,showRuler:!1,rulerLabel:"",rulerTicks:10,rulerPixels:40,rulerLength:10}},render:function(){var e=this,t=i.extend({},u,this.props.image);return r.createElement("div",{className:"perseus-widget-measurer"},r.createElement("div",null,"Image displayed under protractor and/or ruler:"),r.createElement("div",null,"URL:"," ",r.createElement("input",{type:"text",className:"perseus-widget-measurer-url",ref:"image-url",defaultValue:t.url,onChange:this._changeUrl}),r.createElement(a,null,r.createElement("p",null,'Create an image in graphie, or use the "Add image" function to create a background.'))),t.url&&r.createElement("div",{className:"perseus-widget-row"},r.createElement("label",{className:"perseus-widget-left-col"},"Pixels from top:"," ",r.createElement(l,{placeholder:0,onChange:this._changeTop,value:t.top,useArrowKeys:!0})),r.createElement("label",{className:"perseus-widget-right-col"},"Pixels from left:"," ",r.createElement(l,{placeholder:0,onChange:this._changeLeft,value:t.left,useArrowKeys:!0}))),r.createElement("div",null,"Containing area [width, height]:"," ",r.createElement(c,{onChange:this.change("box"),value:this.props.box,useArrowKeys:!0})),r.createElement("div",{className:"perseus-widget-row"},r.createElement("div",{className:"perseus-widget-left-col"},r.createElement(p,{label:"Show ruler",showRuler:this.props.showRuler,onChange:this.props.onChange})),r.createElement("div",{className:"perseus-widget-right-col"},r.createElement(p,{label:"Show protractor",showProtractor:this.props.showProtractor,onChange:this.props.onChange}))),this.props.showRuler&&r.createElement("div",null,r.createElement("div",null,r.createElement("label",null," ","Ruler label:"," ",r.createElement("select",{onChange:function(t){return e.change("rulerLabel",t.target.value)},value:this.props.rulerLabel},r.createElement("option",{value:""},"None"),r.createElement("optgroup",{label:"Metric"},this.renderLabelChoices([["milimeters","mm"],["centimeters","cm"],["meters","m"],["kilometers","km"]])),r.createElement("optgroup",{label:"Imperial"},this.renderLabelChoices([["inches","in"],["feet","ft"],["yards","yd"],["miles","mi"]]))))),r.createElement("div",null,r.createElement("label",null," ","Ruler ticks:"," ",r.createElement("select",{onChange:function(t){return e.change("rulerTicks",+t.target.value)},value:this.props.rulerTicks},i.map([1,2,4,8,10,16],function(e){return r.createElement("option",{key:e,value:e},e)})))),r.createElement("div",null,r.createElement("label",null,"Ruler pixels per unit:"," ",r.createElement(l,{placeholder:40,onChange:this.change("rulerPixels"),value:this.props.rulerPixels,useArrowKeys:!0}))),r.createElement("div",null,r.createElement("label",null,"Ruler length in units:"," ",r.createElement(l,{placeholder:10,onChange:this.change("rulerLength"),value:this.props.rulerLength,useArrowKeys:!0})))))},_changeUrl:function(e){this._changeImage("url",e.target.value)},_changeTop:function(e){this._changeImage("top",e)},_changeLeft:function(e){this._changeImage("left",e)},_changeImage:function(e,t){var n=i.clone(this.props.image);n[e]=t,this.change("image",n)},renderLabelChoices:function(e){return i.map(e,function(e){var t=e[0],n=e[1];return r.createElement("option",{key:n,value:n},t)})}});e.exports=h},function(e,t,n){"use strict";var r=n(34),i=n(213),o=n(214),s=o.layout,a=n(215),l=a.parse,p=a.ParseError,c=30,u=r.createClass({displayName:"Molecule",propTypes:{id:r.PropTypes.string.isRequired,rotationAngle:r.PropTypes.number,smiles:r.PropTypes.string},getInitialState:function(){return{parsedSmiles:null,error:null}},componentWillMount:function(){this.stateFromSmiles(this.props.smiles)},componentDidMount:function(){this.canvasRender()},componentWillReceiveProps:function(e){this.stateFromSmiles(e.smiles)},componentDidUpdate:function(){this.canvasRender()},stateFromSmiles:function(e){try{this.setState({parsedSmiles:l(e),error:null})}catch(e){if(!(e instanceof p))throw e;this.setState({error:e.message})}},setCanvasBounds:function(e,t){var n=Math.max.apply(Math,t.map(function(e){return e.pos?e.pos[0]:-(1/0)})),r=Math.max.apply(Math,t.map(function(e){return e.pos?e.pos[1]:-(1/0)})),i=Math.min.apply(Math,t.map(function(e){return e.pos?e.pos[0]:1/0})),o=Math.min.apply(Math,t.map(function(e){return e.pos?e.pos[1]:1/0})),s=n-i+2*c,a=r-o+2*c;return e.width=s,e.height=a,[c-i,c-o]},canvasRender:function(){if(!this.state.error&&this.state.parsedSmiles){var e=s(this.state.parsedSmiles,this.props.rotationAngle),t=this.refs.canvas,n=this.setCanvasBounds(t,e),r=t.getContext("2d");r.clearRect(0,0,t.width,t.height),r.save(),r.translate(n[0],n[1]),i(r,e),r.restore()}},render:function(){var e=r.createElement("canvas",{className:"molecule-canvas",id:this.props.id+"-molecule",ref:"canvas"},"A molecular structure drawing.  SMILES notation:",this.props.smiles,".");return this.state.error&&(e=r.createElement("div",{className:"error"},this.state.error)),r.createElement("div",{className:"molecule-canvas"},e)}}),h=r.createClass({displayName:"MoleculeWidget",propTypes:{rotationAngle:r.PropTypes.number,smiles:r.PropTypes.string,widgetId:r.PropTypes.string},getDefaultProps:function(){return{rotationAngle:0}},simpleValidate:function(){return{type:"points",earned:0,total:0,message:null}},getUserInput:function(){return[]},validate:function(e,t){return{type:"points",earned:0,total:0,message:null}},render:function(){return r.createElement(u,{id:this.props.widgetId,smiles:this.props.smiles,rotationAngle:this.props.rotationAngle})}});e.exports={name:"molecule-renderer",displayName:"Molecule renderer",hidden:!1,widget:h,molecule:u}},function(e,t,n){"use strict";var r=n(34),i=n(173),o=n(172),s=n(175),a=n(176),l=r.createClass({displayName:"MoleculeWidgetEditor",propTypes:{rotationAngle:r.PropTypes.number,smiles:r.PropTypes.string},mixins:[o,i],updateMolecule:function(e){this.change({smiles:e})},updateRotation:function(e){this.change({rotationAngle:e})},render:function(){return r.createElement("div",null,r.createElement("div",null,r.createElement("label",null,"SMILES: ",r.createElement(a,{onChange:this.updateMolecule,value:this.props.smiles}))),r.createElement("div",null,r.createElement("label",null,"Rotation (deg): ",r.createElement(s,{onChange:this.updateRotation,value:this.props.rotationAngle}))))}});e.exports=l},function(e,t,n){"use strict";function r(e,t){return 1===t?""+e:e+"/"+t}function i(e,t){if(e<0)return"-"+i(-e,t);var n=Math.floor(e/t);return 0===n?r(e,t):e-n*t===0?""+n:n+"\\:"+r(e-n*t,t)}function o(e,t,n){var i=Math.floor(n/t);return r(e*i,n)}var s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},a=n(34),l=n(35),p=n(57),c=n(172),u=n(175),h=n(202),d=n(168),f=n(11).Options,m=n(160).propTypes.keypadElementPropType,g=n(86),v=g.MovablePoint,y=g.Line,b=n(221).number,E=n(165),T=n(197),x=function(e,t,n){return Math.min(Math.max(e,t),n)},w=n(189).assert,C="–",P=30,S={ge:"le",gt:"lt",le:"ge",lt:"gt"},k={ge:"gt",gt:"ge",le:"lt",lt:"le"},N=function(e,t,n,s,a){if(s=s||n,"decimal"===t||"decimal ticks"===t)return e.label([n,-.53],Math.round(100*s)/100,"center");if("improper"===t){var l=E.toFraction(s);return e.label([n,-.53],r(l[0],l[1]),"center")}if("mixed"===t){var p=E.toFraction(s);return e.label([n,-.53],i(p[0],p[1]),"center")}if("non-reduced"===t){var c=E.toFraction(s);return e.label([n,-.53],o(c[0],c[1],a),"center")}},M=g.createSimpleClass(function(e,t){if(!p.isFinite(t.tickStep)||t.tickStep<=0)return[];var n,r=[],i=t.range,o=t.labelRange,s=null==o[0]?i[0]:o[0],a=null==o[1]?i[1]:o[1];if("non-reduced"===t.labelStyle){for(var l=[s,a],c=0;c<=t.numDivisions;c++){var u=i[0]+c*t.tickStep;l.push(u)}var h=function(e){return b.toFraction(e)[1]},d=p.map(l,h);n=p.reduce(d,function(e,t){return E.getLCM(e,t)})}else n=void 0;for(var f=0;f<=t.numDivisions;f++){var m=i[0]+f*t.tickStep;r.push(e.line([m,-.2],[m,.2]));var g=t.labelTicks;(g||"decimal ticks"===t.labelStyle)&&r.push(N(e,t.labelStyle,m,m,n))}return r.push(e.style(t.isMobile?{color:T.BLUE_D}:{},function(){return N(e,t.labelStyle,s,s,n)})),r.push(e.style(t.isMobile?{color:T.BLUE_D}:{},function(){return N(e,t.labelStyle,a,a,n)})),e.style({stroke:t.isMobile?T.BLUE_D:T.DYNAMIC,strokeWidth:3.5},function(){r.push(e.line([s,-.2],[s,.2])),r.push(e.line([a,-.2],[a,.2]))}),r}),_=a.createClass({displayName:"NumberLine",propTypes:{range:a.PropTypes.arrayOf(a.PropTypes.number).isRequired,labelRange:a.PropTypes.arrayOf(a.PropTypes.number).isRequired,labelStyle:a.PropTypes.string.isRequired,labelTicks:a.PropTypes.bool.isRequired,divisionRange:a.PropTypes.arrayOf(a.PropTypes.number).isRequired,numDivisions:a.PropTypes.number.isRequired,snapDivisions:a.PropTypes.number.isRequired,isTickCtrl:a.PropTypes.bool.isRequired,isInequality:a.PropTypes.bool.isRequired,numLinePosition:a.PropTypes.number.isRequired,rel:a.PropTypes.oneOf(["lt","gt","le","ge"]),onFocus:a.PropTypes.func.isRequired,onBlur:a.PropTypes.func.isRequired,onChange:a.PropTypes.func.isRequired,apiOptions:f.propTypes,keypadElement:m,static:a.PropTypes.bool,showTooltips:a.PropTypes.bool,trackInteraction:a.PropTypes.func.isRequired},mixins:[c],getDefaultProps:function(){return{range:[0,10],labelStyle:"decimal",labelRange:[null,null],divisionRange:[1,12],labelTicks:!0,isTickCtrl:!1,isInequality:!1,numLinePosition:0,snapDivisions:2,showTooltips:!1,rel:"ge",apiOptions:f.defaults}},getInitialState:function(){return{numDivisionsEmpty:!1}},isValid:function(){var e=this.props.range,t=this.props.numLinePosition,n=this.props.divisionRange;return t=null==t?e[0]:t,e[0]<e[1]&&b.sign(t-e[0])>=0&&b.sign(t-e[1])<=0&&n[0]<n[1]&&0<this.props.numDivisions&&0<this.props.snapDivisions},onNumDivisionsChange:function(e,t){var n=this,r=this.props.divisionRange.slice(),i=this.props.range[1]-this.props.range[0];if(e=Math.round(e),e=e<0?e*-1:e){var o=p.extend({},this.props,{tickStep:i/e}),s=this.snapNumLinePosition(o,this.props.numLinePosition);this.setState({numDivisionsEmpty:!1},function(){n.props.onChange({divisionRange:r,numDivisions:e,numLinePosition:s},t)})}else this.setState({numDivisionsEmpty:!0},t)},_handleTickCtrlFocus:function(){this.props.onFocus(["tick-ctrl"])},_handleTickCtrlBlur:function(){this.props.onBlur(["tick-ctrl"])},focus:function(){if(this.props.isTickCtrl)return this.refs["tick-ctrl"].focus(),!0},focusInputPath:function(e){1===e.length&&this.refs[e[0]].focus()},blurInputPath:function(e){1===e.length&&this.refs[e[0]].blur()},getInputPaths:function(){return this.props.isTickCtrl?[["tick-ctrl"]]:[]},getDOMNodeForPath:function(e){if(1===e.length)return l.findDOMNode(this.refs[e[0]])},getGrammarTypeForPath:function(e){if(1===e.length&&"tick-ctrl"===e[0])return"number"},setInputValue:function(e,t,n){1===e.length&&"tick-ctrl"===e[0]&&this.onNumDivisionsChange(t,n)},_renderGraphie:function(){var e=this,t=this.props.range,n=t[1]-t[0],r=p.pick(this.props,["range","isTickCtrl"]),i=p.extend({},this.props,{tickStep:n/this.props.numDivisions});return a.createElement(g,{ref:"graphie",box:[460,80],options:r,onMouseDown:function(t){e.refs.graphie.movables.numberLinePoint.grab(t)},setup:this._setupGraphie,setDrawingAreaAvailable:this.props.apiOptions.setDrawingAreaAvailable,isMobile:this.props.apiOptions.isMobile},a.createElement(M,s({},p.pick(i,["range","numDivisions","labelTicks","labelStyle","labelRange","tickStep"]),{isMobile:this.props.apiOptions.isMobile})),this._renderInequality(i),this._renderNumberLinePoint(i))},snapNumLinePosition:function(e,t){
var n=e.range[0],r=e.range[1],i=e.tickStep/e.snapDivisions,o=x(t,n,r);return o=n+b.roundTo(o-n,i),w(p.isFinite(o)),o},_renderNumberLinePoint:function(e){var t,n=this,r=p(["lt","gt"]).contains(e.rel);t=r?T._BACKGROUND:e.static?T.DYNAMIC:T.INTERACTIVE;var i={fill:t,stroke:e.static?T.DYNAMIC:T.INTERACTIVE,"stroke-width":r?3:1},o={fill:r?T._BACKGROUND:T.INTERACTING,"stroke-width":r?3:1},s=e.isInequality?{stroke:T.INTERACTIVE,"fill-opacity":r?0:1}:{};return a.createElement(v,{ref:"numberLinePoint",pointSize:6,coord:[e.numLinePosition,0],constraints:[function(e,t){return[e[0],t[1]]},function(t,r){var i=n.snapNumLinePosition(e,t[0]);return[i,t[1]]}],normalStyle:i,highlightStyle:o,onMove:function(e){n.change({numLinePosition:e[0]}),n.props.trackInteraction()},isMobile:this.props.apiOptions.isMobile,mobileStyleOverride:s,showTooltips:this.props.showTooltips,xOnlyTooltip:!0})},handleReverse:function(){var e=S[this.props.rel];this.props.onChange({rel:e})},handleToggleStrict:function(){var e=k[this.props.rel];this.props.onChange({rel:e})},_getInequalityEndpoint:function(e){var t=p(["ge","gt"]).contains(e.rel),n=400,r=e.range,i=(r[1]-r[0])/n,o=P*i,s=r[0]-o,a=r[1]+o,l=t?[a,0]:[s,0];return l},_renderInequality:function(e){if(e.isInequality){var t=this._getInequalityEndpoint(e),n={arrows:"->",stroke:this.props.apiOptions.isMobile?T.INTERACTIVE:T.DYNAMIC,strokeWidth:3.5},r=["ge","gt"].includes(e.rel);return a.createElement(y,{start:[(r?.4:-.4)+e.numLinePosition,0],end:t,style:n})}return null},_setupGraphie:function(e,t){if(this.isValid()){var n=this.props.apiOptions.isMobile?288-2*P:400,r=t.range,i=(r[1]-r[0])/n,o=P*i,s=r[0]-o,a=r[1]+o,l=-1,p=1;e.init({range:[[s,a],[l,p]],scale:[1/i,40],isMobile:this.props.apiOptions.isMobile});var c=(r[0]+r[1])/2;e.line([c,0],[a,0],{arrows:"->"}),e.line([c,0],[s,0],{arrows:"->"})}},getUserInput:function(){return{numLinePosition:this.props.numLinePosition,rel:this.props.isInequality?this.props.rel:"eq",numDivisions:this.props.numDivisions,divisionRange:this.props.divisionRange}},simpleValidate:function(e){return _.validate(this.getUserInput(),e)},render:function(){var e,t=this.props.divisionRange,n=t[0]+C+t[1],r=this.props.numDivisions<t[0]||this.props.numDivisions>t[1],i=a.createElement("div",null,a.createElement("input",{type:"button",className:"simple-button",value:i18n._("Switch direction"),onClick:this.handleReverse}),a.createElement("input",{type:"button",className:"simple-button",value:p(["le","ge"]).contains(this.props.rel)?i18n._("Make circle open"):i18n._("Make circle filled"),onClick:this.handleToggleStrict}));if(this.props.isTickCtrl){var o;o=this.props.apiOptions.customKeypad?d:this.props.apiOptions.staticRender?h:u,e=a.createElement("label",null,i18n._("Number of divisions:")," ",a.createElement(o,{ref:"tick-ctrl",value:this.state.numDivisionsEmpty?null:this.props.numDivisions||t[0],checkValidity:function(e){return e>=t[0]&&e<=t[1]},onChange:this.onNumDivisionsChange,onFocus:this._handleTickCtrlFocus,onBlur:this._handleTickCtrlBlur,useArrowKeys:!0,keypadElement:this.props.keypadElement}))}return a.createElement("div",{className:"perseus-widget perseus-widget-interactive-number-line"},e,this.isValid()?this.props.isTickCtrl&&r?a.createElement("div",{className:"perseus-error"},$_({divRangeString:n},"Please make sure the number of divisions is in the range %(divRangeString)s.")):this._renderGraphie():a.createElement("div",{className:"perseus-error"},"Invalid number line configuration."),!this.props.static&&this.props.isInequality&&i)}});p.extend(_,{validate:function(e,t){var n=t.range,r=e.divisionRange,i=null!=t.initialX?t.initialX:n[0],o=t.isInequality?"ge":"eq",s=t.correctRel||"eq",a=b.equal(e.numLinePosition,t.correctX||0),l=e.numDivisions>r[1]||e.numDivisions<r[0];return e.isTickCrtl&&l?{type:"invalid",message:"Number of divisions is outside the allowed range."}:a&&s===e.rel?{type:"points",earned:1,total:1,message:null}:e.numLinePosition===i&&e.rel===o?{type:"invalid",message:null}:{type:"points",earned:0,total:1,message:null}}});var O=function(e){var t,n=p.pick(e,["range","labelRange","labelStyle","labelTicks","divisionRange","snapDivisions","isTickCtrl","isInequality","showTooltips"]),r=null!=e.initialX?e.initialX:e.range[0],i=e.range[1]-e.range[0];return t=null!=e.numDivisions?e.numDivisions:null!=e.tickStep?i/e.tickStep:void 0,p.extend(n,{numLinePosition:r,numDivisions:t,snapDivisions:n.snapDivisions||void 0}),n},A=function(e){var t,n=p.pick(e,["range","labelRange","labelStyle","labelTicks","divisionRange","snapDivisions","isInequality"]),r=null!=e.correctX?e.correctX:e.range[0],i=e.range[1]-e.range[0];return t=null!=e.numDivisions?e.numDivisions:null!=e.tickStep?i/e.tickStep:void 0,p.extend(n,{numLinePosition:r,numDivisions:t,rel:e.isInequality?e.correctRel:null,snapDivisions:n.snapDivisions||void 0}),n};e.exports={name:"number-line",displayName:"Number line",widget:_,transform:O,staticTransform:A}},function(e,t,n){"use strict";var r=n(34),i=n(57),o=n(173),s=n(81),a=n(89),l=n(175),p=n(45),c=n(200),u=n(221).number,h=function(e,t,n){return Math.min(Math.max(e,t),n)},d="–",f=r.createClass({displayName:"NumberLineEditor",propTypes:{range:r.PropTypes.arrayOf(r.PropTypes.number).isRequired,labelRange:r.PropTypes.arrayOf(r.PropTypes.number).isRequired,labelStyle:r.PropTypes.string.isRequired,labelTicks:r.PropTypes.bool,divisionRange:r.PropTypes.arrayOf(r.PropTypes.number).isRequired,numDivisions:r.PropTypes.number.isRequired,snapDivisions:r.PropTypes.number,tickStep:r.PropTypes.number,correctRel:r.PropTypes.oneOf(["lt","gt","le","ge","eq"]),correctX:r.PropTypes.number,initialX:r.PropTypes.number,isTickCtrl:r.PropTypes.bool,onChange:r.PropTypes.func.isRequired,static:r.PropTypes.bool,showTooltips:r.PropTypes.bool},mixins:[o],getDefaultProps:function(){return{range:[0,10],labelRange:[null,null],labelStyle:"decimal",labelTicks:!0,divisionRange:[1,12],numDivisions:5,snapDivisions:2,tickStep:null,correctRel:"eq",correctX:null,initialX:null,showTooltips:!1}},onRangeChange:function(e){this.props.onChange({range:e})},onLabelRangeChange:function(e,t){var n=this.props.labelRange.slice(),r=n[1-e];null==t||null==r?n[e]=t:n=[Math.min(t,r),Math.max(t,r)],this.props.onChange({labelRange:n})},onDivisionRangeChange:function(e){var t=this.props.numDivisions;t=h(t,e[0],e[1]),this.props.onChange({divisionRange:e,numDivisions:t})},onNumChange:function(e,t){var n={};n[e]=t,this.props.onChange(n)},onNumDivisionsChange:function(e){var t=this.props.divisionRange.slice();i.isFinite(e)||(e=null),e=Math.round(e),e=e<0?e*-1:e,e&&(e=Math.min(t[1],Math.max(t[0],e)),this.props.onChange({tickStep:null,divisionRange:t,numDivisions:e}))},onTickStepChange:function(e){this.props.onChange({numDivisions:null,tickStep:e})},onChangeRelation:function(e){var t=e.target.value;this.props.onChange({correctRel:t,isInequality:"eq"!==t})},onLabelStyleChange:function(e){this.props.onChange({labelStyle:e})},render:function(){var e=this.props.range,t=this.props.labelRange,n=this.props.divisionRange;e[0]=+e[0],e[1]=+e[1];var i=e[1]-e[0],o=this.props.numDivisions,h=this.props.snapDivisions,f=this.props.tickStep,m=this.props.isTickCtrl,g=void 0;g=m?null:f?f/h:i/o/h;var v=[{value:"decimal",content:"0.75",title:"Decimals"},{value:"improper",content:"⁷⁄₄",title:"Improper fractions"},{value:"mixed",content:"1¾",title:"Mixed numbers"},{value:"non-reduced",content:"⁸⁄₄",title:"Non-reduced"}];return r.createElement("div",{className:"perseus-widget-number-line-editor"},r.createElement("div",{className:"perseus-widget-row"},"Correct x"," ",r.createElement("select",{value:this.props.correctRel,onChange:this.onChangeRelation},r.createElement("option",{value:"eq"}," = "),r.createElement("option",{value:"lt"}," < "),r.createElement("option",{value:"gt"}," > "),r.createElement("option",{value:"le"}," ≤ "),r.createElement("option",{value:"ge"}," ≥ "))," ",r.createElement(l,{value:this.props.correctX,format:this.props.labelStyle,onChange:this.onNumChange.bind(this,"correctX"),checkValidity:function(t){return t>=e[0]&&t<=e[1]&&(!g||u.isInteger((t-e[0])/g))},placeholder:"answer",size:"normal",useArrowKeys:!0}),r.createElement(a,null,r.createElement("p",null,"This is the correct answer. The answer is validated (as right or wrong) by using only the end position of the point and the relation (=, <, >, ≤, ≥)."))),r.createElement("div",{className:"perseus-widget-row"},this.props.static?r.createElement("label",null,"Range:"):r.createElement("label",null,"Position:"," ",r.createElement(l,{value:this.props.initialX,format:this.props.labelStyle,onChange:this.onNumChange.bind(this,"initialX"),placeholder:e[0],checkValidity:function(t){return t>=e[0]&&t<=e[1]},useArrowKeys:!0})," ∈ "),r.createElement(c,{value:e,onChange:this.onRangeChange,format:this.props.labelStyle,useArrowKeys:!0}),r.createElement(a,null,r.createElement("p",null,"This controls the initial position of the point along the number line and the ",r.createElement("strong",null,"range"),", the position of the endpoints of the number line. Setting the range constrains the position of the answer and the labels."),r.createElement("p",null,"In static mode, the initial position of the point is determined by Correct x instead of position."))),r.createElement("div",{className:"perseus-widget-row"},r.createElement("div",{className:"perseus-widget-left-col"},"Labels:"," ",r.createElement(l,{value:t[0],placeholder:e[0],format:this.props.labelStyle,checkValidity:function(t){return t>=e[0]&&t<=e[1]},onChange:this.onLabelRangeChange.bind(this,0),useArrowKeys:!0}),r.createElement("span",null," & "),r.createElement(l,{value:t[1],placeholder:e[1],format:this.props.labelStyle,checkValidity:function(t){return t>=e[0]&&t<=e[1]},onChange:this.onLabelRangeChange.bind(this,1),useArrowKeys:!0}),r.createElement(a,null,r.createElement("p",null,"This controls the position of the left / right labels. By default, the labels are set by the range ",r.createElement("br",null),r.createElement("strong",null,"Note:")," Ensure that the labels line up with the tick marks, or it may be confusing for users.")))),r.createElement("div",{className:"perseus-widget-row"},"Style:"," ",r.createElement(s,{allowEmpty:!1,value:this.props.labelStyle,buttons:v,onChange:this.onLabelStyleChange}),r.createElement(a,null,r.createElement("p",null,"This controls the styling of the labels for the two main labels as well as all the tick mark labels, if applicable. Your choices are decimal, improper fractions, mixed fractions, and non-reduced fractions."))),r.createElement("div",{className:"perseus-widget-row"},!this.props.static&&r.createElement("div",{className:"perseus-widget-left-col"},r.createElement(p,{label:"Show tick controller",isTickCtrl:this.props.isTickCtrl,onChange:this.props.onChange})),r.createElement("div",{className:"perseus-widget-right-col"},r.createElement(p,{label:"Show label ticks",labelTicks:this.props.labelTicks,onChange:this.props.onChange}))),r.createElement("div",{className:"perseus-widget-row"},!this.props.static&&r.createElement(p,{label:"Show tooltips",showTooltips:this.props.showTooltips,onChange:this.props.onChange})),r.createElement("div",{className:"perseus-widget-row"},m&&r.createElement("span",null,r.createElement("label",null,"Start num divisions at"," ",r.createElement(l,{value:this.props.numDivisions||null,format:"decimal",onChange:this.onNumDivisionsChange,checkValidity:function(e){return e>=n[0]&&e<=n[1]},placeholder:i/this.props.tickStep,useArrowKeys:!0})),r.createElement(a,null,r.createElement("p",null,"This controls the number (and position) of the tick marks. The number of divisions is constrained to"," "+n[0]+d+n[1],".",r.createElement("br",null),r.createElement("strong",null,"Note:")," The user will be able to specify the number of divisions in a number input."))),!m&&r.createElement("span",null,r.createElement("label",null,"Num divisions:"," ",r.createElement(l,{value:this.props.numDivisions||null,format:"decimal",onChange:this.onNumDivisionsChange,checkValidity:function(e){return e>=n[0]&&e<=n[1]},placeholder:i/this.props.tickStep,useArrowKeys:!0}))," ",r.createElement("label",null,"or tick step:"," ",r.createElement(l,{value:this.props.tickStep||null,format:this.props.labelStyle,onChange:this.onTickStepChange,checkValidity:function(e){return e>0&&e<=i},placeholder:i/this.props.numDivisions,useArrowKeys:!0})),r.createElement(a,null,r.createElement("p",null,"This controls the number (and position) of the tick marks; you can either set the number of divisions (2 divisions would split the entire range in two halves), or the tick step (the distance between ticks) and the other value will be updated accordingly. ",r.createElement("br",null),r.createElement("strong",null,"Note:")," There is no check to see if labels coordinate with the tick marks, which may be confusing for users if the blue labels and black ticks are off-step.")))),r.createElement("div",{className:"perseus-widget-row"},r.createElement("label",null,"Snap increments per tick:"," ",r.createElement(l,{value:h,checkValidity:function(e){return e>0},format:this.props.labelStyle,onChange:this.onNumChange.bind(this,"snapDivisions"),useArrowKeys:!0})),r.createElement(a,null,r.createElement("p",null,"This determines the number of different places the point will snap between two adjacent tick marks. ",r.createElement("br",null),r.createElement("strong",null,"Note:"),"Ensure the required number of snap increments is provided to answer the question."))))}});e.exports=f},function(e,t,n){"use strict";var r=n(34),i=n(35),o=n(57),s=n(28),a=n(12),l=n(11).ClassNames,p=r.createClass({displayName:"PlaceholderCard",propTypes:{width:r.PropTypes.number.isRequired,height:r.PropTypes.number.isRequired},render:function(){return r.createElement("div",{className:"card-wrap "+l.INTERACTIVE,style:{width:this.props.width}},r.createElement("div",{className:"card placeholder",style:{height:this.props.height}}))}}),c=r.createClass({displayName:"DragHintCard",render:function(){return r.createElement("div",{className:"card-wrap "+l.INTERACTIVE},r.createElement("div",{className:"card drag-hint"}))}}),u={position:r.PropTypes.shape({left:r.PropTypes.number,top:r.PropTypes.number})},h=r.createClass({displayName:"Card",propTypes:{floating:r.PropTypes.bool.isRequired,animating:r.PropTypes.bool,width:r.PropTypes.number,stack:r.PropTypes.bool,onMouseDown:r.PropTypes.func,onMouseMove:r.PropTypes.func,onMouseUp:r.PropTypes.func,startMouse:u.position,startOffset:u.position,animateTo:u.position,onAnimationEnd:r.PropTypes.func},getDefaultProps:function(){return{stack:!1,animating:!1}},render:function(){var e={};this.props.floating&&(e={position:"absolute",left:this.props.startOffset.left,top:this.props.startOffset.top}),this.props.width&&(e.width=this.props.width);var t=["card"];this.props.stack&&t.push("stack"),this.props.floating&&!this.props.animating&&(t.push("dragging"),e.left+=this.props.mouse.left-this.props.startMouse.left,e.top+=this.props.mouse.top-this.props.startMouse.top);var n=o.pick(this.props,"content"),i=this.props.animating?$.noop:this.onMouseDown;return r.createElement("div",{className:"card-wrap "+l.INTERACTIVE,style:e,onMouseDown:i,onTouchStart:i,onTouchMove:this.onMouseMove,onTouchEnd:this.onMouseUp,onTouchCancel:this.onMouseUp},r.createElement("div",{className:t.join(" ")},r.createElement(s,n)))},shouldComponentUpdate:function(e,t){return this.props.floating||e.floating||this.props.content!==e.content||this.props.fakeRef!==e.fakeRef},componentDidMount:function(){this.mouseMoveUpBound=!1},componentDidUpdate:function(e,t){if(this.props.animating&&!e.animating){var n=15*Math.sqrt(Math.sqrt(Math.pow(this.props.animateTo.left-this.props.startOffset.left,2)+Math.pow(this.props.animateTo.top-this.props.startOffset.top,2)));$(i.findDOMNode(this)).animate(this.props.animateTo,Math.max(n,1),this.props.onAnimationEnd)}},componentWillUnmount:function(){this.mouseMoveUpBound&&(console.warn("Removing an element with bound event handlers."),this.unbindMouseMoveUp(),a.resetTouchHandlers())},bindMouseMoveUp:function(){this.mouseMoveUpBound=!0,$(document).on("mousemove",this.onMouseMove),$(document).on("mouseup",this.onMouseUp)},unbindMouseMoveUp:function(){this.mouseMoveUpBound=!1,$(document).off("mousemove",this.onMouseMove),$(document).off("mouseup",this.onMouseUp)},onMouseDown:function(e){e.preventDefault();var t=a.extractPointerLocation(e);t&&(this.bindMouseMoveUp(),this.props.onMouseDown&&this.props.onMouseDown(t,this))},onMouseMove:function(e){e.preventDefault();var t=a.extractPointerLocation(e);t&&this.props.onMouseMove&&this.props.onMouseMove(t)},onMouseUp:function(e){e.preventDefault();var t=a.extractPointerLocation(e);t&&(this.unbindMouseMoveUp(),this.props.onMouseUp&&this.props.onMouseUp(t))}}),d="normal",f="auto",m="horizontal",g="vertical",v=r.createClass({displayName:"Orderer",propTypes:{correctOptions:r.PropTypes.array,current:r.PropTypes.array,height:r.PropTypes.oneOf([d,f]),layout:r.PropTypes.oneOf([m,g]),options:r.PropTypes.array,trackInteraction:r.PropTypes.func.isRequired},getDefaultProps:function(){return{current:[],options:[],correctOptions:[],height:d,layout:m}},getInitialState:function(){return{current:[],dragging:!1,placeholderIndex:null}},componentWillReceiveProps:function(e){o.isEqual(this.props.current,e.current)||this.setState({current:e.current})},render:function(){var e=this,t=this.state.dragging&&r.createElement(h,{ref:"dragging",floating:!0,content:this.state.dragContent,startOffset:this.state.offsetPos,startMouse:this.state.grabPos,mouse:this.state.mousePos,width:this.state.dragWidth,onMouseUp:this.onRelease,onMouseMove:this.onMouseMove,key:this.state.dragKey||"draggingCard"}),n=this.state.animating&&r.createElement(h,{floating:!0,animating:!0,content:this.state.dragContent,startOffset:this.state.offsetPos,width:this.state.dragWidth,animateTo:this.state.animateTo,onAnimationEnd:this.state.onAnimationEnd,key:this.state.dragKey||"draggingCard"}),i=o.map(this.state.current,function(e,t){return r.createElement(h,{ref:"sortable"+t,fakeRef:"sortable"+t,floating:!1,content:e.content,width:e.width,key:e.key,onMouseDown:this.state.animating?$.noop:this.onClick.bind(null,"current",t)})},this);if(null!=this.state.placeholderIndex){var s=r.createElement(p,{ref:"placeholder",width:this.state.dragWidth,height:this.state.dragHeight,key:"placeholder"});i.splice(this.state.placeholderIndex,0,s)}var a=i.length>0;i.push(t,n);var u=r.createElement("div",{className:"perseus-clearfix draggable-box"},!a&&r.createElement(c,null),r.createElement("div",{ref:"dragList"},i)),d=r.createElement("div",{ref:"bank",className:"bank perseus-clearfix"},o.map(this.props.options,function(t,n){return r.createElement(h,{ref:"bank"+n,floating:!1,content:t.content,stack:!0,key:n,onMouseDown:e.state.animating?$.noop:e.onClick.bind(null,"bank",n),onMouseMove:e.onMouseMove,onMouseUp:e.onRelease})},this));return r.createElement("div",{className:"draggy-boxy-thing orderer height-"+this.props.height+" layout-"+this.props.layout+" above-scratchpad blank-background perseus-clearfix "+l.INTERACTIVE,ref:"orderer"},d,u)},onClick:function(e,t,n,r){var o,s=$(i.findDOMNode(r)),a=this.state.current.slice(),l=null;"current"===e?(a.splice(t,1),o=this.state.current[t],l=t):"bank"===e&&(o=this.props.options[t]),this.setState({current:a,dragging:!0,placeholderIndex:l,dragKey:o.key,dragContent:o.content,dragWidth:s.width(),dragHeight:s.height(),grabPos:n,mousePos:n,offsetPos:s.position()})},onRelease:function(e){var t=this,n=this.refs.dragging;if(null!=n){var r=this.isCardInBank(n),s=this.state.placeholderIndex,a=function(){var e=t.state.current.slice();if(!r){var n={content:t.state.dragContent,key:o.uniqueId("perseus_draggable_card_"),width:t.state.dragWidth};e.splice(s,0,n)}t.props.onChange({current:e}),t.setState({current:e,dragging:!1,placeholderIndex:null,animating:!1}),t.props.trackInteraction()},l=$(i.findDOMNode(n)).position(),p=null;r?o.each(this.props.options,function(e,t){if(e.content===this.state.dragContent){var n=i.findDOMNode(this.refs["bank"+t]);p=$(n).position()}},this):null!=this.refs.placeholder&&(p=$(i.findDOMNode(this.refs.placeholder)).position()),null==p?a():this.setState({offsetPos:l,animateTo:p,onAnimationEnd:a,animating:!0,dragging:!1})}},onMouseMove:function(e){var t=this.refs.dragging;if(null!=t){var n;n=this.isCardInBank(t)?null:this.findCorrectIndex(t,this.state.current),this.setState({mousePos:e,placeholderIndex:n})}},findCorrectIndex:function(e,t){var n=this.props.layout===m,r=$(i.findDOMNode(this.refs.dragList)),s=r.offset().left,a=r.offset().top,l=$(i.findDOMNode(e)).offset().left-s,p=$(i.findDOMNode(e)).offset().top-a,c=0,u=0,h=0;return n?o.each(t,function(e,t){var n=i.findDOMNode(this.refs["sortable"+t]),r=$(n).outerWidth(!0);l>u+r/2&&(c+=1),u+=r},this):o.each(t,function(e,t){var n=i.findDOMNode(this.refs["sortable"+t]),r=$(n).outerHeight(!0);p>h+r/2&&(c+=1),h+=r},this),c},isCardInBank:function(e){if(null==e)return!1;var t=this.props.layout===m,n=$(i.findDOMNode(e)),r=$(i.findDOMNode(this.refs.bank)),o=n.offset(),s=r.offset(),a=n.outerHeight(!0),l=r.outerHeight(!0),p=r.outerWidth(!0),c=i.findDOMNode(this.refs.dragList),u=($(c).width(),n.outerWidth(!0));return t?o.top+a/2<s.top+l:o.left+u/2<s.left+p},getUserInput:function(){return{current:o.map(this.props.current,function(e){return e.content})}},simpleValidate:function(e){return v.validate(this.getUserInput(),e)}});o.extend(v,{validate:function(e,t){if(0===e.current.length)return{type:"invalid",message:null};var n=o.isEqual(e.current,o.pluck(t.correctOptions,"content"));return{type:"points",earned:n?1:0,total:1,message:null}}}),e.exports={name:"orderer",displayName:"Orderer",widget:v}},function(e,t,n){"use strict";var r=n(34),i=n(57),o=n(89),s=n(84),a="normal",l="auto",p="horizontal",c="vertical",u=r.createClass({displayName:"OrdererEditor",propTypes:{correctOptions:r.PropTypes.array,otherOptions:r.PropTypes.array,height:r.PropTypes.oneOf([a,l]),layout:r.PropTypes.oneOf([p,c]),onChange:r.PropTypes.func.isRequired},getDefaultProps:function(){return{correctOptions:[{content:"$x$"}],otherOptions:[{content:"$y$"}],height:a,layout:p}},render:function(){return r.createElement("div",{className:"perseus-widget-orderer"},r.createElement("div",null," ","Correct answer:"," ",r.createElement(o,null,r.createElement("p",null,"Place the cards in the correct order. The same card can be used more than once in the answer but will only be displayed once at the top of a stack of identical cards."))),r.createElement(s,{options:i.pluck(this.props.correctOptions,"content"),onChange:this.onOptionsChange.bind(this,"correctOptions"),layout:this.props.layout}),r.createElement("div",null," ","Other cards:"," ",r.createElement(o,null,r.createElement("p",null,"Create cards that are not part of the answer."))),r.createElement(s,{options:i.pluck(this.props.otherOptions,"content"),onChange:this.onOptionsChange.bind(this,"otherOptions"),layout:this.props.layout}),r.createElement("div",null,r.createElement("label",null," ","Layout:"," ",r.createElement("select",{value:this.props.layout,onChange:this.onLayoutChange},r.createElement("option",{value:p},"Horizontal"),r.createElement("option",{value:c},"Vertical"))),r.createElement(o,null,r.createElement("p",null,"Use the horizontal layout for short text and small images. The vertical layout is best for longer text (e.g. proofs)."))),r.createElement("div",null,r.createElement("label",null," ","Height:"," ",r.createElement("select",{value:this.props.height,onChange:this.onHeightChange},r.createElement("option",{value:a},"Normal"),r.createElement("option",{value:l},"Automatic"))),r.createElement(o,null,r.createElement("p",null,'Use "Normal" for text, "Automatic" for images.'))))},onOptionsChange:function(e,t,n){var r={};r[e]=i.map(t,function(e){return{content:e}}),this.props.onChange(r,n)},onLayoutChange:function(e){this.props.onChange({layout:e.target.value})},onHeightChange:function(e){this.props.onChange({height:e.target.value})},serialize:function(){var e=i.chain(i.pluck(this.props.correctOptions,"content")).union(i.pluck(this.props.otherOptions,"content")).uniq().reject(function(e){return""===e}).sort().sortBy(function(e){return/\d/.test(e)?0:/^\$?[a-zA-Z]+\$?$/.test(e)?2:1}).map(function(e){return{content:e}}).value();return{options:e,correctOptions:this.props.correctOptions,otherOptions:this.props.otherOptions,height:this.props.height,layout:this.props.layout}}});e.exports=u},function(e,t,n){"use strict";var r=n(34),i=n(35),o=n(57),s=n(172),a=n(28),l=n(216),p=r.createClass({displayName:"Passage",mixins:[s],propTypes:{passageTitle:r.PropTypes.string,passageText:r.PropTypes.string,footnotes:r.PropTypes.string,showLineNumbers:r.PropTypes.bool},getDefaultProps:function(){return{passageTitle:"",passageText:"",footnotes:"",showLineNumbers:!0}},getInitialState:function(){return{nLines:null,startLineNumbersAfter:0}},shouldComponentUpdate:function(e,t){return!o.isEqual(this.props,e)||!o.isEqual(this.state,t)},render:function(){var e,t=this,n=this.state.nLines;this.props.showLineNumbers&&n&&(e=o.range(1,n+1).map(function(e){return 4===e&&n>4?r.createElement("span",{key:"line-marker",className:"line-marker"},"Line"):e+t.state.startLineNumbersAfter}));var i=this.props.passageText,s={},p=l.parse(i,s);return r.createElement("div",{className:"perseus-widget-passage-container"},this._renderInstructions(s),r.createElement("div",{className:"perseus-widget-passage"},r.createElement("div",{className:"passage-title"},r.createElement(a,{content:this.props.passageTitle})),e&&r.createElement("div",{className:"line-numbers","aria-hidden":!0},e),r.createElement("h3",{className:"perseus-sr-only"},i18n._("Beginning of reading passage.")),r.createElement("div",{className:"passage-text"},this._renderContent(p)),this._hasFootnotes()&&[r.createElement("h4",{key:"footnote-start",className:"perseus-sr-only"},i18n._("Beginning of reading passage footnotes.")),r.createElement("div",{key:"footnotes",className:"footnotes"},this._renderFootnotes())],r.createElement("div",{className:"perseus-sr-only"},i18n._("End of reading passage."))))},componentDidMount:function(){this._updateState(),window.addEventListener("resize",this._updateState)},componentDidUpdate:function(){this._updateState()},componentWillUnmount:function(){window.removeEventListener("resize",this._updateState)},_updateState:function(){this.setState({nLines:this._measureLines(),startLineNumbersAfter:this._getInitialLineNumber()})},_measureLines:function(){var e=$(i.findDOMNode(this.refs.content)),t=e.height(),n=parseInt(e.css("line-height")),r=Math.round(t/n);return r},_getInitialLineNumber:function(){var e=this,t=!0,n=this.props.interWidgets(function(n,r){return"passage"===r.type&&(n===e.props.widgetId&&(t=!1),t)});return n.map(function(e){return e.getLineCount()}).reduce(function(e,t){return e+t},0)},getLineCount:function(){return null!=this.state.nLines?this.state.nLines:this._measureLines()},_renderInstructions:function(e){var t=e.firstQuestionRef,n=e.firstSentenceRef,i="";t&&(i+=i18n._("The symbol %(questionSymbol)s indicates that question %(questionNumber)s references this portion of the passage.",{questionSymbol:"[["+t+"]]",questionNumber:t})),n&&(i+=i18n._(" The symbol %(sentenceSymbol)s indicates that the following sentence is referenced in a question.",{sentenceSymbol:"["+n+"]"}));var o=l.parse(i);return r.createElement("div",{className:"perseus-widget-passage-instructions"},l.output(o))},_renderContent:function(e){return r.createElement("div",{ref:"content"},l.output(e))},_hasFootnotes:function(){var e=this.props.footnotes,t=/^\s*$/.test(e);return!t},_renderFootnotes:function(){var e=this.props.footnotes,t=l.parse(e);return l.output(t)},_getStartRefLineNumber:function(e){var t=l.START_REF_PREFIX+e,n=this.refs[t];if(!n)return null;var r=$(i.findDOMNode(n)),o=r.next();0===o.length&&(o=r);var s=o.offset().top;return this.state.startLineNumbersAfter+1+this._convertPosToLineNumber(s)},_getEndRefLineNumber:function(e){var t=l.END_REF_PREFIX+e,n=this.refs[t];if(!n)return null;var r=$(i.findDOMNode(n)),o=r.prev();0===o.length&&(o=r);var s=o.height(),a=o.offset().top,p=this._convertPosToLineNumber(a+s);return 0===s&&(p+=1),this.state.startLineNumbersAfter+p},_convertPosToLineNumber:function(e){var t=$(i.findDOMNode(this.refs.content)),n=e-t.offset().top,r=parseInt(t.css("line-height")),o=Math.round(n/r);return o},_getRefContent:function(e){var t=l.START_REF_PREFIX+e,n=this.refs[t];return n?n.getRefContent():null},getReference:function(e){var t=this._getStartRefLineNumber(e),n=this._getEndRefLineNumber(e);if(null==t||null==n)return null;var r=this._getRefContent(e);return{startLine:t,endLine:n,content:r}},getUserInput:function(){return null},simpleValidate:function(e){return p.validate(this.getUserInput(),e)}});o.extend(p,{validate:function(e,t){return{type:"points",earned:0,total:0,message:null}}}),e.exports={name:"passage",displayName:"Passage",widget:p,transform:function(e){return o.pick(e,"passageTitle","passageText","footnotes","showLineNumbers")}}},function(e,t,n){"use strict";var r=n(34),i=(n(57),n(172)),o=n(173),s=n(17),a=n(89),l=n(45),p=r.createClass({displayName:"PassageEditor",mixins:[o,i],propTypes:{passageTitle:r.PropTypes.string,passageText:r.PropTypes.string,footnotes:r.PropTypes.string,showLineNumbers:r.PropTypes.bool},getDefaultProps:function(){return{passageTitle:"",passageText:"",footnotes:"",showLineNumbers:!0}},render:function(){var e=this,t=r.createElement(s,{ref:"passage-editor",apiOptions:this.props.apiOptions,content:this.props.passageText,widgetEnabled:!1,placeholder:"Type passage here...",onChange:function(t){e.change({passageText:t.content})},showWordCount:!0}),n=r.createElement(s,{ref:"passage-footnotes-editor",apiOptions:this.props.apiOptions,content:this.props.footnotes,widgetEnabled:!1,placeholder:"Type footnotes here...",onChange:function(t){e.change({footnotes:t.content})}});return r.createElement("div",{className:"perseus-widget-passage-editor"},r.createElement("div",{className:"perseus-widget-row"},r.createElement(l,{label:"Show line numbers",labelAlignment:"right",showLineNumbers:this.props.showLineNumbers,onChange:this.props.onChange})),r.createElement("div",null,"Passage title:",r.createElement(a,null,r.createElement("p",null,"An optional title that will appear directly above the passage in the same font style. (E.g. Passage 1)")),r.createElement("div",null,r.createElement("input",{type:"text",defaultValue:this.props.passageTitle,onChange:function(t){e.change({passageTitle:t.target.value})}}))),r.createElement("div",null,"Passage Text:",t),r.createElement("div",null,"Footnotes:",r.createElement(a,null,r.createElement("p",null,"To add footnotes, add ^ characters where they belong in the passage. Then, add ^ in the footnotes area to reference the footnotes in the passage.")),n))}});e.exports=p},function(e,t,n){"use strict";var r=n(34),i=n(57),o=n(172),s=n(40),a=n(194),l="–",p=r.createClass({displayName:"PassageRef",mixins:[a,o],propTypes:{passageNumber:r.PropTypes.number,referenceNumber:r.PropTypes.number,summaryText:r.PropTypes.string},getDefaultProps:function(){return{passageNumber:1,referenceNumber:1,summaryText:""}},getInitialState:function(){return{lineRange:null,content:null}},shouldComponentUpdate:function(e,t){return!i.isEqual(this.props,e)||!i.isEqual(this.state,t)},render:function(){var e,t=this.state.lineRange;e=t?t[0]===t[1]?$_({lineNumber:t[0]},"line %(lineNumber)s"):$_({lineRange:t[0]+l+t[1]},"lines %(lineRange)s"):$_({lineRange:"?"+l+"?"},"lines %(lineRange)s");var n;if(this.props.summaryText){var i=s.parseInline(this.props.summaryText);n=r.createElement("span",{"aria-hidden":!0}," ","(“",s.basicOutput(i),"”)")}else n=null;return r.createElement("span",null,e,n,t&&r.createElement("div",{className:"perseus-sr-only"},this.state.content))},componentDidMount:function(){this._deferredUpdateRange(),window.addEventListener("resize",this._deferredUpdateRange)},componentDidUpdate:function(){this._deferredUpdateRange()},componentWillUnmount:function(){
window.removeEventListener("resize",this._deferredUpdateRange)},_deferredUpdateRange:function(){i.defer(this._updateRange)},_updateRange:function(){var e=this.props.interWidgets("passage "+this.props.passageNumber)[0],t=null;e&&(t=e.getReference(this.props.referenceNumber)),this.isMounted()&&(t?this.setState({lineRange:[t.startLine,t.endLine],content:t.content}):this.setState({lineRange:null,content:null}))},simpleValidate:function(e){return p.validate(this.getUserInput(),e)}});i.extend(p,{validate:function(e,t){return{type:"points",earned:0,total:0,message:null}}}),e.exports={name:"passage-ref",displayName:"PassageRef",defaultAlignment:"inline",widget:p,transform:function(e){return i.pick(e,"passageNumber","referenceNumber","summaryText")},version:{major:0,minor:1}}},function(e,t,n){"use strict";var r=n(34),i=n(172),o=n(173),s=n(89),a=n(175),l=n(176),p=r.createClass({displayName:"PassageRefEditor",mixins:[o,i],propTypes:{passageNumber:r.PropTypes.number,referenceNumber:r.PropTypes.number,summaryText:r.PropTypes.string},getDefaultProps:function(){return{passageNumber:1,referenceNumber:1,summaryText:""}},render:function(){return r.createElement("div",null,r.createElement("div",null,r.createElement("label",null,"Passage Number: ",r.createElement(a,{value:this.props.passageNumber,onChange:this.change("passageNumber")}))),r.createElement("div",null,r.createElement("label",null,"Reference Number: ",r.createElement(a,{value:this.props.referenceNumber,onChange:this.change("referenceNumber")}))),r.createElement("div",null,r.createElement("label",null,"Summary Text: ",r.createElement(l,{value:this.props.summaryText,onChange:this.change("summaryText")}),r.createElement(s,null,r.createElement("p",null,"Short summary of the referenced section. This will be included in parentheses and quotes automatically."),r.createElement("p",null,"Ex: The start ... the end")))))}});e.exports=p},function(e,t,n){"use strict";var r=n(34),i=n(57),o=n(172),s=n(194),a=n(28),l=r.createClass({displayName:"PassageRefTarget",mixins:[s,o],propTypes:{content:r.PropTypes.string},getDefaultProps:function(){return{content:""}},render:function(){return r.createElement(a,{content:this.props.content,inline:!0,apiOptions:this.props.apiOptions})},simpleValidate:function(e){return l.validate(this.getUserInput(),e)}});i.extend(l,{validate:function(e,t){return{type:"points",earned:0,total:0,message:null}}}),e.exports={name:"passage-ref-target",displayName:"PassageRefTarget",defaultAlignment:"inline",widget:l,hidden:!0,transform:function(e){return i.pick(e,"content")},version:{major:0,minor:0}}},function(e,t,n){"use strict";var r=n(34),i=(n(57),n(172)),o=n(173),s=r.createClass({displayName:"PassageRefTargetEditor",mixins:[o,i],propTypes:{content:r.PropTypes.string},getDefaultProps:function(){return{content:""}},render:function(){return r.createElement("div",null,"Content:",r.createElement("input",{type:"text",value:this.props.content,onChange:this.handleContentChange}))},handleContentChange:function(e){this.change({content:e.target.value})}});e.exports=s},function(e,t,n){"use strict";var r=n(34),i=n(35),o=n(57),s=n(11).ClassNames,a=n(12).deepEq,l=n(165),p=n(197),c=n(190),u=n(195),h=n(196),d="bar",f="line",m="pic",g="histogram",v="dotplot",y=({type:r.PropTypes.oneOf([d,f,m,g,v]),labels:r.PropTypes.arrayOf(r.PropTypes.string),categories:r.PropTypes.arrayOf(r.PropTypes.oneOfType([r.PropTypes.number,r.PropTypes.string])),scaleY:r.PropTypes.number,maxY:r.PropTypes.number,snapsPerLine:r.PropTypes.number,picSize:r.PropTypes.number,pixBoxHeight:r.PropTypes.number,picUrl:r.PropTypes.string,plotDimensions:r.PropTypes.arrayOf(r.PropTypes.number),labelInterval:r.PropTypes.number,starting:r.PropTypes.arrayOf(r.PropTypes.number),static:r.PropTypes.bool},r.createClass({displayName:"Plotter",propTypes:{onChange:r.PropTypes.func.isRequired,trackInteraction:r.PropTypes.func.isRequired},getDefaultProps:function(){return{type:d,labels:["",""],categories:[""],scaleY:1,maxY:10,snapsPerLine:2,picSize:40,picBoxHeight:48,picUrl:"",plotDimensions:[380,300],labelInterval:1}},getInitialState:function(){return{values:this.props.starting||[1]}},DOT_PLOT_POINT_SIZE:function(){return this.props.apiOptions.isMobile?6:4},DOT_PLOT_POINT_PADDING:function(){return 8},DOT_TICK_POINT_SIZE:function(){return 2},render:function(){return r.createElement("div",{className:"perseus-widget-plotter graphie "+s.INTERACTIVE,ref:"graphieDiv"})},componentDidUpdate:function(e,t){this.shouldSetupGraphie&&this.setupGraphie(t)},componentDidMount:function(){this.setupGraphie(this.state)},componentWillReceiveProps:function(e){var t=["type","labels","categories","scaleY","maxY","snapsPerLine","picUrl","labelInterval","static"];this.shouldSetupGraphie=o.any(t,function(t){return!o.isEqual(this.props[t],e[t])},this),o.isEqual(this.props.starting,e.starting)||o.isEqual(this.state.values,e.starting)||(this.shouldSetupGraphie=!0,this.setState({values:e.starting}))},setupGraphie:function(e){var t=this;t.shouldSetupGraphie=!1;var n=i.findDOMNode(t.refs.graphieDiv);$(n).empty();var r=c.createGraphie(n);t.graphie=r,t.graphie.pics=[],t.graphie.dotTicks=[];var s=t.props.type===d,a=t.props.type===f,u=t.props.type===m,y=t.props.type===g,b=t.props.type===v,E=u||b,T={},x=T,w=this.props.apiOptions.isMobile;x.graph={lines:[],bars:[],points:[],dividers:[]},x.scaleY=t.props.scaleY,x.dimX=t.props.categories.length;var C=w?[288,336]:t.props.plotDimensions;if(a)x.dimX+=w?-.2:1;else if(y)x.barPad=0,x.barWidth=1;else if(s)x.barPad=w?.08:.15,x.barWidth=1-2*x.barPad,x.dimX+=(w?-2:2)*x.barPad;else if(E){x.picBoxHeight=t.props.picBoxHeight,x.picBoxWidthPx=C[0]/t.props.categories.length;var P=C[0]-x.dimX*x.picBoxWidthPx;x.picPad=P/(2*x.dimX+2);var S=x.picBoxWidthPx+2*x.picPad;x.picPad=x.picPad/S,x.picBoxWidth=x.picBoxWidthPx/S,x.dimX+=2*x.picPad}b&&(x.picBoxHeight=2*this.DOT_PLOT_POINT_SIZE()+this.DOT_PLOT_POINT_PADDING()),x.dimY=Math.ceil(t.props.maxY/x.scaleY)*x.scaleY;var k=25,N=25;if((s||a)&&w&&(k=0!==t.props.labels[1].length?17:11),b&&(k/=2),w&&E&&0===t.props.labels[1].length&&(k=0),w?x.scale=o.map([[x.dimX,k],[x.dimY,N]],function(e,t){var n=e[0],r=e[1];return(C[t]-4*r)/n}):x.scale=o.map([x.dimX,x.dimY],function(e,t){return C[t]/e}),k/=x.scale[0],N/=x.scale[1],E&&(x.scale[1]=x.picBoxHeight/x.scaleY),r.init({range:[[-3*k,x.dimX+k],[-3*N,x.dimY+N]],scale:x.scale,isMobile:this.props.apiOptions.isMobile}),r.addMouseLayer({allowScratchpad:!0,setDrawingAreaAvailable:this.props.apiOptions.setDrawingAreaAvailable}),!E)for(var M=w?x.scaleY:0,_=M;_<=x.dimY;_+=x.scaleY)r.label([0,_],l.roundToApprox(_,2),"left",!0),r.style({stroke:w?"#e9ebec":"#000",strokeWidth:1,opacity:w?1:.3},function(){r.line([0,_],[x.dimX,_])});(s||a)&&w&&(t.graphie.dragPrompt=r.label([x.dimX/2,x.dimY/2],"Drag handles to make graph","center",!1).css("font-weight","bold").css("color",p.KA_GREEN).css("display","none")),t.setupCategories(T),E&&w&&(t.graphie.dotPrompt=r.label([x.dimX/2,x.dimY/2],"Tap to add points","center",!1).css("font-weight","bold").css("color",p.KA_GREEN).css("display","none")),E&&t.drawPicHeights(t.state.values,e.values),r.style({stroke:"#000",strokeWidth:2,opacity:1},function(){E?b?r.style({stroke:w?p.GRAY_G:"#000",strokeWidth:w?1:2},function(){return r.line([w?0:.5,0],[x.dimX-(w?0:.5),0])}):(r.line([0,0],[x.dimX,0]),0===t.props.labels[1].length&&w||r.style({stroke:w?p.GRAY_G:"#000",strokeWidth:w?1:2},function(){return r.line([0,0],[0,x.dimY])})):(r.style({stroke:w?p.GRAY_G:"#000",strokeWidth:w?1:2},function(){return r.line([w?3*-k:0,0],[x.dimX+(w?k:0),0])}),(s||a)&&w||r.style({stroke:w?p.GRAY_G:"#000",strokeWidth:w?1:2},function(){return r.line([0,0],[0,x.dimY])}))}),r.label([x.dimX/2,w?3*-N:-35/x.scale[1]],t.props.labels[0],w?"above":"below",!1).css("font-weight","bold").css("color",w&&p.GRAY_F),r.label([(w?-35:-60)/x.scale[0],x.dimY/2],t.props.labels[1],"center",!1).css("font-weight","bold").css("color",w&&p.GRAY_F).addClass("rotate"),this.props.apiOptions.isMobile&&(this.horizHairline=new h(this.graphie,[0,0],[0,0],{normalStyle:{strokeWidth:1}}),this.horizHairline.attr({stroke:p.INTERACTIVE}),this.horizHairline.hide(),this.hairlineRange=[[0,x.dimX],[0,x.dimY]])},showHairlines:function(e){this.props.apiOptions.isMobile&&"none"!==this.props.markings&&(this.horizHairline.moveTo([this.hairlineRange[0][0],e[1]],[this.hairlineRange[0][1],e[1]]),this.horizHairline.show())},hideHairlines:function(){this.props.apiOptions.isMobile&&this.horizHairline.hide()},labelCategory:function(e,t){var n=this.props.apiOptions.isMobile,r=this.graphie;t+="";var i=!1,o=t.match(/^\$(.*)\$$/);o&&(t=o[1],i=!0);var s=(0!==this.props.labels[0].length,"translateX(-50%) translateX(5px) translateY(-50%) rotate(-45deg)");r.style({color:n?p.GRAY_G:"inherit",transform:n&&!o?s:"none",transformOrigin:"100%"},function(){return r.label([e,n?-.5:0],t,"below",i)})},setupCategories:function(e){var t=this,n=e,r=t.graphie,i=this.props.apiOptions.isMobile;t.props.type===g?(o.times(t.props.categories.length-1,function(n){t.setupBar({index:n,startHeight:t.state.values[n],config:e,isHistogram:!0})}),o.each(t.props.categories,function(e,o){var s=.5+o*n.barWidth;t.labelCategory(s,e);var a=6/n.scale[1];r.style({stroke:"#000",strokeWidth:i?1:2,opacity:1},function(){r.line([s,-a],[s,0])})})):o.each(t.props.categories,function(o,s){var a,l=t.state.values[s];t.props.type===d?a=t.setupBar({index:s,startHeight:l,config:e,isHistogram:!1}):t.props.type===f?a=t.setupLine(s,l,e):t.props.type===m?a=t.setupPic(s,e):t.props.type===v&&(a=t.setupDotplot(s,e));var c=0,u=-6/n.scale[1];t.props.type!==v||i||(c=-u),t.props.type===v?s%t.props.labelInterval!==0&&s!==t.props.categories.length-1||(t.labelCategory(a,o),c*=1.5,u*=1.5):t.labelCategory(a,o),r.style({stroke:i?p.GRAY_G:"#000",strokeWidth:i?1:2,opacity:1},function(){r.line([a,c],[a,u])})})},_clampValue:function(e,t,n){return Math.max(Math.min(e,n),t)},_updateDragPrompt:function(e){var t=e.every(function(e){return 0===e});this.graphie.dragPrompt[0].style.display=t?"inline":"none"},setupBar:function(e){var t,n=this,r=this.props.apiOptions.isMobile,i=e.index,s=e.startHeight,a=e.config,l=e.isHistogram,c=this,h=c.graphie,d=a.barWidth/2;t=l?.5+i*a.barWidth+d:(r?d:.5+a.barPad)+i;var f=function(e,t){var n=h.scalePoint(0);if(a.graph.bars[e].scale(1,Math.max(r?.2:.01,t/a.scaleY),n[0],n[1]),l){var i=a.graph.dividers[e-1],o=a.graph.dividers[e];if(i){var s=Math.min(c.state.values[e-1],t);i.scale(1,Math.max(.01,s/a.scaleY),n[0],n[1])}if(o){var s=Math.min(c.state.values[e+1],t);o.scale(1,Math.max(.01,s/a.scaleY),n[0],n[1])}}};return h.style({stroke:"none",fill:r?p.BLUE_C:p.LIGHT_BLUE,opacity:1},function(){a.graph.bars[i]=h.path([[t-d,0],[t-d,a.scaleY],[t+d,a.scaleY],[t+d,0],[t-d,0]])}),l&&i>0&&h.style({stroke:"#000",strokeWidth:1,opacity:.3},function(){a.graph.dividers.push(h.path([[t-d,0],[t-d,a.scaleY]]))}),r?!function(){var e=a.scaleY/c.props.snapsPerLine;a.graph.lines[i]=u.addMaybeMobileMovablePoint(n,{coord:[t,s],constraints:[function(r,i,o){return[t,n._clampValue(Math.round(r[1]/e)*e,0,a.dimY)]}],onMoveStart:function(){a.graph.bars[i].attr({fill:p.INTERACTIVE})},onMove:function(){var e=a.graph.lines[i].coord()[1],t=o.clone(c.state.values);t[i]=e,c.setState({values:t}),c.changeAndTrack({values:t}),c._updateDragPrompt(t),f(i,e)},onMoveEnd:function(){a.graph.bars[i].attr({fill:p.BLUE_C})}}),a.graph.lines[i].state.visibleShape.wrapper.style.zIndex="1",c._updateDragPrompt(c.state.values)}():(a.graph.lines[i]=h.addMovableLineSegment({coordA:[t-d,s],coordZ:[t+d,s],snapY:a.scaleY/c.props.snapsPerLine,constraints:{constrainX:!0},normalStyle:{stroke:p.INTERACTIVE,"stroke-width":this.props.static?0:4}}),a.graph.lines[i].onMove=function(e,t){var n=this.coordA[1];(n<0||n>a.dimY)&&(n=Math.min(Math.max(n,0),a.dimY),this.coordA[1]=this.coordZ[1]=n,this.transform());var r=o.clone(c.state.values);r[i]=n,c.setState({values:r}),c.changeAndTrack({values:r}),f(i,n)}),f(i,s),t},setupLine:function(e,t,n){var r=this,i=this.props.apiOptions.isMobile,s=this,a=n,l=s.graphie,c=e+(i?.4:1);return i?!function(){var i=n.scaleY/s.props.snapsPerLine;a.graph.points[e]=u.addMaybeMobileMovablePoint(r,{coord:[c,t],constraints:[function(e,t,o){return[c,r._clampValue(Math.round(e[1]/i)*i,0,n.dimY)]}],onMove:function(){var t=a.graph.points[e].coord()[1],n=o.clone(s.state.values);n[e]=t,s.setState({values:n}),s.changeAndTrack({values:n}),s._updateDragPrompt(n)}}),s._updateDragPrompt(s.state.values),e>0&&(a.graph.lines[e]=u.addMovableLine(l,{points:[a.graph.points[e-1],a.graph.points[e]],constraints:u.MovablePoint.constraints.fixed(),normalStyle:{stroke:p.BLUE_C,"stroke-width":2},highlightStyle:{stroke:p.BLUE_C,"stroke-width":2}}))}():(a.graph.points[e]=l.addMovablePoint({coord:[c,t],constraints:{constrainX:!0},normalStyle:{fill:p.INTERACTIVE,stroke:p.INTERACTIVE},snapY:a.scaleY/s.props.snapsPerLine}),a.graph.points[e].onMove=function(t,n){n=Math.min(Math.max(n,0),a.dimY);var r=o.clone(s.state.values);return r[e]=n,s.setState({values:r}),s.changeAndTrack({values:r}),[t,n]},e>0&&(a.graph.lines[e]=l.addMovableLineSegment({pointA:a.graph.points[e-1],pointZ:a.graph.points[e],constraints:{fixed:!0},normalStyle:{stroke:"#9ab8ed","stroke-width":2}}))),c},setupDotplot:function(e,t){var n=this,r=this.graphie,i=this.props.apiOptions.isMobile;return this.setupTiledPlot(e,i?.5:1,t,function(e,t){return r.ellipse([e,t],[n.DOT_PLOT_POINT_SIZE()/r.scale[0],n.DOT_PLOT_POINT_SIZE()/r.scale[1]],{fill:p.INTERACTIVE,stroke:p.INTERACTIVE})})},setupPic:function(e,t){var n=this,r=this.graphie;return this.setupTiledPlot(e,0,t,function(e,t){var i=r.scalePoint([e,t]),o=n.props.picSize;return r.raphael.image(n.props.picUrl,i[0]-o/2,i[1]-o/2,o,o)})},setupTiledPlot:function(e,t,n,r){var i=this,s=n,a=i.graphie,l=a.pics,p=a.dotTicks,c=e+.5+s.picPad;l[e]=[],p[e]=[];var u=Math.round(s.dimY/s.scaleY)+1;return o(u).times(function(n){n-=1;var o=(n+.5)*s.scaleY,u=c-s.picBoxWidth/2,h=o+.5*s.scaleY,d=a.scalePoint([u,h+t]),f=a.mouselayer.rect(d[0],d[1],s.picBoxWidthPx,s.picBoxHeight);$(f[0]).css({fill:"#000",opacity:0,cursor:"pointer"}).on("vmousedown",function(n){n.preventDefault(),i.whichPicClicked=e,i.setPicHeight(e,h),$(document).on("vmouseup.plotTile",function(e){$(document).unbind(".plotTile")}),$(document).on("vmousemove.plotTile",function(e){e.preventDefault();var n=a.getMouseCoord(e)[1],r=Math.floor(n-t),o=Math.max(-1,Math.floor(r/s.scaleY)),l=(o+.5)*s.scaleY,p=l+.5*s.scaleY;i.setPicHeight(i.whichPicClicked,p)})}),n<0||(l[e][n]=r(c,o+t),p[e][n]=a.ellipse([c,o+t],[i.DOT_TICK_POINT_SIZE()/a.scale[0],i.DOT_TICK_POINT_SIZE()/a.scale[1]],{fill:"#dee1e3",stroke:"#dee1e3"}))}),c},setPicHeight:function(e,t){var n=o.clone(this.state.values);n[e]=t,this.drawPicHeights(n,this.state.values),this.setState({values:n}),this.changeAndTrack({values:n})},changeAndTrack:function(e){this.props.onChange(e),this.props.trackInteraction()},drawPicHeights:function(e,t){var n=this,r=n.graphie,i=r.pics,s=this.props.apiOptions.isMobile;if(s){var a=e.every(function(e){return 0===e});r.dotPrompt[0].style.display=a?"inline":"none"}o.each(i,function(i,a){o.each(i,function(i,o){var l=(o+1)*n.props.scaleY,p=l<=e[a];if(n.props.type===v){var c=l<=t[a],u=p&&!c;u&&i.animate({"stroke-width":8},75,function(){return i.animate({"stroke-width":2},75)})}$(i[0]).css({display:p?"inline":"none"}),r.dotTicks[a][o][0].style.display=p||!s?"none":"inline"})})},getUserInput:function(){return this.state.values},simpleValidate:function(e){return y.validate(this.getUserInput(),e)}}));o.extend(y,{validate:function(e,t){return a(e,t.starting)?{type:"invalid",message:null}:{type:"points",earned:a(e,t.correct)?1:0,total:1,message:null}}});var b=o.identity;e.exports={name:"plotter",displayName:"Plotter",widget:y,staticTransform:b}},function(e,t,n){"use strict";function r(e,t,n){var r=a.clone(e);r.length=t;for(var i=e.length;i<t;i++)r[i]=n;return r}var i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},o=n(34),s=n(35),a=n(57),l=n(171),p=n(89),c=n(175),u=n(200),h=n(38),d=n(84),f=n(135).widget,m=n(221).knumber,g="bar",v="line",y="pic",b="histogram",E="dotplot",T={scaleY:1,maxY:10,snapsPerLine:2},x={type:o.PropTypes.oneOf([g,v,y,b,E]),labels:o.PropTypes.arrayOf(o.PropTypes.string),categories:o.PropTypes.arrayOf(o.PropTypes.oneOfType([o.PropTypes.number,o.PropTypes.string])),scaleY:o.PropTypes.number,maxY:o.PropTypes.number,snapsPerLine:o.PropTypes.number,picSize:o.PropTypes.number,pixBoxHeight:o.PropTypes.number,picUrl:o.PropTypes.string,plotDimensions:o.PropTypes.arrayOf(o.PropTypes.number),labelInterval:o.PropTypes.number,starting:o.PropTypes.arrayOf(o.PropTypes.number),static:o.PropTypes.bool},w=function(e){return"$"+m.round(e,2)+"$"},C=o.createClass({displayName:"PlotterEditor",propTypes:x,getDefaultProps:function(){return a.extend({},T,{correct:[1],starting:[1],type:g,labels:["",""],categories:[""],picSize:30,picBoxHeight:36,picUrl:Khan.imageBase+"badges/earth-small.png",plotDimensions:[275,200],labelInterval:1})},getInitialState:function(){return{editing:"correct",pic:null,loadedUrl:null,minX:null,maxX:null,tickStep:null}},componentWillMount:function(){this.fetchPic(this.props.picUrl)},componentWillReceiveProps:function(e){this.fetchPic(e.picUrl)},fetchPic:function(e){var t=this;if(this.state.loadedUrl!==e){var n=new Image;n.src=e,n.onload=function(){t.setState({pic:n,loadedUrl:e})}}},render:function(){var e=a.contains([v,b,E],this.props.type),t=!a.contains([y,E],this.props.type),n=i({trackInteraction:function(){}},this.props);return o.createElement("div",{className:"perseus-widget-plotter-editor"},o.createElement("div",null,"Chart type:"," ",a.map([g,v,y,b,E],function(e){return o.createElement("label",{key:e},o.createElement("input",{type:"radio",name:"chart-type",checked:this.props.type===e,onChange:a.partial(this.changeType,e)}),e)},this)),o.createElement("div",null,"Labels:"," ",a.map(["x","y"],function(e,t){return o.createElement("label",{key:e},e+":",o.createElement("input",{type:"text",onChange:a.partial(this.changeLabel,t),defaultValue:this.props.labels[t]}))},this)),e&&o.createElement("div",{className:"set-from-scale-box"},o.createElement("span",{className:"categories-title"},"Set Categories From Scale"),o.createElement("div",null,o.createElement("label",null,"Tick Step:"," ",o.createElement(c,{placeholder:1,useArrowKeys:!0,value:this.state.tickStep,onChange:this.handleChangeTickStep})),o.createElement(p,null,o.createElement("p",null,"The difference between adjacent ticks."))),o.createElement("div",null,o.createElement("label",null,"Range:"," ",o.createElement(u,{placeholder:[0,10],useArrowKeys:!0,value:[this.state.minX,this.state.maxX],onChange:this.handleChangeRange}))),o.createElement("div",null,o.createElement("button",{onClick:this.setCategoriesFromScale},"Set Categories"," "))),o.createElement("div",null,o.createElement("label",null,"Label Interval:"," ",o.createElement(c,{useArrowKeys:!0,value:this.props.labelInterval,onChange:this.changeLabelInterval})),o.createElement(p,null,o.createElement("p",null,'Which ticks to display the labels for. For instance, setting this to "4" will only show every 4th label (plus the last one)'))),this.props.type===y&&o.createElement("div",null,o.createElement("label",null,"Picture:"," ",o.createElement(l,{className:"pic-url",value:this.props.picUrl,onChange:this.changePicUrl}),o.createElement(p,null,o.createElement("p",null,'Use the default picture of Earth, or insert the URL for a different picture using the "Add image" function.'))),this.state.pic&&this.state.pic.width!==this.state.pic.height&&o.createElement("p",{className:"warning"},o.createElement("b",null,"Warning"),": You are using a picture which is not square.  This means the image will get distorted. You should probably crop it to be square.")),o.createElement("div",null,o.createElement("label",null,"Categories:"," ",o.createElement(d,{ref:"categories",layout:"horizontal",options:this.props.categories,onChange:this.changeCategories}))),o.createElement("div",null,o.createElement("label",null,"Scale (y):"," ",o.createElement("input",{type:"text",onChange:this.changeScale,defaultValue:this.props.scaleY}))),o.createElement("div",null,o.createElement("label",null,"Max y:"," ",o.createElement("input",{type:"text",ref:"maxY",onChange:this.changeMax,defaultValue:this.props.maxY}))),t&&o.createElement("div",null,o.createElement("label",null,"Snaps per line:"," ",o.createElement("input",{type:"text",onChange:this.changeSnaps,defaultValue:this.props.snapsPerLine})),o.createElement(p,null,o.createElement("p",null,"Creates the specified number of divisions between the horizontal lines. Fewer snaps between lines makes the graph easier for the student to create correctly."))),o.createElement("div",null,"Editing values:"," ",a.map(["correct","starting"],function(e){return o.createElement("label",{key:e},o.createElement("input",{type:"radio",name:"editing",checked:this.state.editing===e,onChange:a.partial(this.changeEditing,e)}),e)},this),o.createElement(p,null,o.createElement("p",null,"Use this toggle to switch between editing the correct answer (what the student will be graded on) and the starting values (what the student will see plotted when they start the problem). Note: These cannot be the same."),o.createElement("p",null,"In static mode, the starting values are rendered out to the displayed widget."))),o.createElement(f,i({},n,{starting:this.props[this.state.editing],onChange:this.handlePlotterChange})))},handleChangeTickStep:function(e){this.setState({tickStep:e})},handleChangeRange:function(e){this.setState({minX:e[0],maxX:e[1]})},changeLabelInterval:function(e){this.props.onChange({labelInterval:e})},handlePlotterChange:function(e){var t={};t[this.state.editing]=e.values,this.props.onChange(t)},changeType:function(e){var t;e===b?(t=[w(0)].concat(this.props.categories),this.props.onChange({type:e,categories:t})):this.props.type===b?(t=this.props.categories.slice(1),this.props.onChange({type:e,categories:t})):this.props.onChange({type:e}),t&&(s.findDOMNode(this.refs.categories).value=t.join(", "))},changeLabel:function(e,t){var n=a.clone(this.props.labels);n[e]=t.target.value,this.props.onChange({labels:n})},changePicUrl:function(e){var t=h.getRealImageUrl(e);this.props.onChange({picUrl:t})},changeCategories:function(e){var t=e.length;this.props.type===b&&t--;var n=this.props.scaleY;this.props.onChange({categories:e,correct:r(this.props.correct,t,n),starting:r(this.props.starting,t,n)})},changeScale:function(e){var t=this.props.scaleY,n=+e.target.value||T.scaleY,r=function(e){return e*n/t},i=r(this.props.maxY);this.props.onChange({scaleY:n,maxY:i,correct:a.map(this.props.correct,r),starting:a.map(this.props.starting,r)}),s.findDOMNode(this.refs.maxY).value=i},changeMax:function(e){this.props.onChange({maxY:+e.target.value||T.maxY})},changeSnaps:function(e){this.props.onChange({snapsPerLine:+e.target.value||T.snapsPerLine})},changeEditing:function(e){this.setState({editing:e})},setCategoriesFromScale:function(){var e,t=this.state.tickStep||1,n=this.state.minX||0,r=this.state.maxX||0,i=Math.floor((r-n)/t)*t;e=this.props.type===b||this.props.type===E?a.range(0,i+t,t):a.range(t,i+t,t),e=a.map(e,function(e){return e+n}),e=a.map(e,w),this.changeCategories(e),s.findDOMNode(this.refs.categories).value=e.join(", ")},serialize:function(){var e=a.pick(this.props,"correct","starting","type","labels","categories","scaleY","maxY","snapsPerLine","labelInterval");return this.props.type===y&&(e.picUrl=this.props.picUrl),e}});e.exports=C},function(e,t,n){"use strict";var r=n(34),i=n(123).molecule,o=r.createClass({displayName:"Separator",propTypes:{data:r.PropTypes.any,index:r.PropTypes.number},componentDidMount:function(){this.drawArrow()},componentDidUpdate:function(){this.drawArrow()},arrowLength:100,drawArrow:function(){var e=this.refs["arrowCanvas"+this.props.index],t=e.getContext("2d");t.clearRect(0,0,e.width,e.height);var n=new Path2D;t.strokeStyle="rgb(0,0,0)",t.lineWidth=1.2,t.lineCap="round";var r=5;n.moveTo(r,e.height/2),n.lineTo(e.width-r,e.height/2),n.moveTo(e.width-2*r,e.height/2-r),n.lineTo(e.width-r,e.height/2),n.moveTo(e.width-2*r,e.height/2+r),n.lineTo(e.width-r,e.height/2),t.stroke(n)},render:function(){return r.createElement("div",{className:"arrow-container"},r.createElement("div",{className:"above-text"},this.props.data.topText),r.createElement("canvas",{height:"30",id:"arrowCanvas"+this.props.index,ref:"arrowCanvas"+this.props.index,width:this.arrowLength},"Reaction arrow pointing to the right."),r.createElement("div",{className:"below-text"},this.props.data.bottomText))}}),s=r.createClass({displayName:"ReactionDiagramWidget",propTypes:{rotationAngle:r.PropTypes.arrayOf(r.PropTypes.number),separators:r.PropTypes.arrayOf(r.PropTypes.object),smiles:r.PropTypes.arrayOf(r.PropTypes.string),widgetId:r.PropTypes.string},getDefaultProps:function(){return{smiles:[],rotationAngle:[],separators:[]}},simpleValidate:function(){return{type:"points",earned:0,total:0,message:null}},getUserInput:function(){return[]},validate:function(e,t){return{type:"points",earned:0,total:0,message:null}},focus:function(){return!0},render:function(){var e=this;return r.createElement("div",{className:"reaction",ref:"reaction"},this.props.smiles.map(function(t,n){var s=e.props.widgetId+"-"+n;return r.createElement("div",{key:s,className:"molecule-container"},r.createElement(i,{id:s,rotationAngle:e.props.rotationAngle[n],smiles:t}),n===e.props.smiles.length-1?null:r.createElement(o,{data:e.props.separators[n],index:n}))}))}});e.exports={name:"reaction-diagram",displayName:"Chemical reaction",hidden:!1,widget:s}},function(e,t,n){"use strict";var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},i=n(34),o=n(172),s=n(173),a=n(175),l=n(176),p=i.createClass({displayName:"ReactionDiagramWidgetEditor",propTypes:{rotationAngle:i.PropTypes.arrayOf(i.PropTypes.number),separators:i.PropTypes.arrayOf(i.PropTypes.object),smiles:i.PropTypes.arrayOf(i.PropTypes.string)},mixins:[o,s],getDefaultProps:function(){return{smiles:["",""],rotationAngle:[0,0],separators:[{type:"right",topText:"",bottomText:""}]}},updateMolecule:function(e){return function(t){var n=[].concat(this.props.smiles);n[e]=t,this.change({smiles:n})}.bind(this)},updateRotation:function(e){return function(t){var n=[].concat(this.props.rotationAngle);n[e]=t,this.change({rotationAngle:n})}.bind(this)},updateSeparators:function(e,t){var n=this;return function(i){var o=n.props.separators.map(function(e){return r({},e)});o[e][t]=i,n.change({separators:o})}},render:function(){return i.createElement("div",null,i.createElement("div",null,i.createElement("label",null,"LHS SMILES: ",i.createElement(l,{onChange:this.updateMolecule(0),value:this.props.smiles[0]}))),i.createElement("div",null,i.createElement("label",null,"LHS Rotation (deg): ",i.createElement(a,{onChange:this.updateRotation(0),value:this.props.rotationAngle[0]}))),i.createElement("div",null,i.createElement("label",null,"RHS SMILES: ",i.createElement(l,{onChange:this.updateMolecule(1),value:this.props.smiles[1]}))),i.createElement("div",null,i.createElement("label",null,"RHS Rotation (deg): ",i.createElement(a,{onChange:this.updateRotation(1),value:this.props.rotationAngle[1]}))),i.createElement("div",null,i.createElement("label",null,"Top of arrow text: ",i.createElement(l,{onChange:this.updateSeparators(0,"topText"),value:this.props.separators[0].topText}))),i.createElement("div",null,i.createElement("label",null,"Bottom of arrow text: ",i.createElement(l,{onChange:this.updateSeparators(0,"bottomText"),value:this.props.separators[0].bottomText}))))}});e.exports=p},function(e,t,n){"use strict";var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},i=n(34),o=n(57),s=n(11).Options,a=n(172),l=n(41),p=l.iconOk,c=n(42),u=n(28),h=n(12),d=i.createClass({displayName:"Sequence",mixins:[a],propTypes:{apiOptions:s.propTypes,json:i.PropTypes.arrayOf(i.PropTypes.shape({content:i.PropTypes.string,images:i.PropTypes.object,widgets:i.PropTypes.object})),trackInteraction:i.PropTypes.func.isRequired},getDefaultProps:function(){return{json:[{content:"",widgets:{},images:{}}]}},getInitialState:function(){return{visible:1}},shouldComponentUpdate:function(e,t){return e!==this.props||t!==this.state},render:function(){var e=this,t=i.createElement(c,r({},p,{style:{color:"green"}})),n=o.chain(this.props.json).first(this.state.visible).map(function(e,t){return"[["+h.snowman+" group "+t+"]]"}).join("\n\n").value(),s={};return o.each(this.props.json,function(n,r){var i="group "+r;s[i]={type:"group",graded:!0,version:{major:0,minor:0},options:o.extend({},n,{icon:r<e.state.visible-1?t:null})}}),i.createElement("div",{className:"perseus-sequence"},i.createElement(u,{ref:"renderer",content:n,widgets:s,onInteractWithWidget:this._handleInteraction,apiOptions:this.props.apiOptions}))},_handleInteraction:function(e){var t=parseInt(e.split(" ")[1]);if(t===this.state.visible-1){var n=this.refs.renderer.getWidgetInstance("group "+t),r=n.simpleValidate();"points"===r.type&&r.total===r.earned&&(this.setState({visible:this.state.visible+1}),this.props.trackInteraction({visible:this.state.visible+1}))}}}),f=function(e,t){var n=e.json;o.isArray(n)||(n=[n]);var r=o.map(n,function(e){return t(e)});return o.extend({},e,{json:r})};e.exports={name:"sequence",displayName:"Graded Sequence",widget:d,traverseChildWidgets:f,tracking:"all"}},function(e,t,n){"use strict";var r=n(34),i=n(57),o=n(11).Options,s=n(17),a=n(41),l=a.iconCircleArrowDown,p=a.iconCircleArrowUp,c=a.iconPlus,u=a.iconTrash,h=n(42),d=r.createClass({displayName:"StepControlButton",render:function(){var e=this;return r.createElement("a",{href:"#",className:"step-control-button simple-button simple-button--small orange",onClick:function(t){t.preventDefault(),e.props.onClick()}},r.createElement(h,this.props.icon))}}),f=r.createClass({displayName:"SequenceEditor",propTypes:{json:r.PropTypes.arrayOf(r.PropTypes.shape({content:r.PropTypes.string,widgets:r.PropTypes.object,images:r.PropTypes.object})),apiOptions:o.propTypes,onChange:r.PropTypes.func.isRequired},getDefaultProps:function(){return{json:[{content:"",widgets:{},images:{}}]}},render:function(){var e=this;return r.createElement("div",{className:"perseus-sequence-editor"},i.map(this.props.json,function(t,n){return r.createElement("div",{key:n},"Step ",n+1,r.createElement("div",{style:{display:"inline-block",float:"right"}},n+1<e.props.json.length&&r.createElement(d,{icon:l,onClick:function(){e._handleMoveStepLater(n)}}),n>0&&r.createElement(d,{icon:p,onClick:function(){e._handleMoveStepEarlier(n)}}),r.createElement(d,{icon:u,onClick:function(){var t="Are you sure you want to remove step "+(n+1)+"?";confirm(t)&&e._handleRemoveStep(n)}}),r.createElement(d,{icon:c,onClick:function(){e._handleAddStepAfter(n)}})),r.createElement(s,{ref:"editor"+n,apiOptions:e.props.apiOptions,content:t.content,widgets:t.widgets,images:t.images,widgetEnabled:!0,immutableWidgets:!1,onChange:i.partial(e._handleEditorChange,n)}))}))},_handleEditorChange:function(e,t){var n=i.clone(this.props.json);n[e]=i.extend({},n[e],t),this.props.onChange({json:n})},serialize:function(){var e=this;return{json:i.times(this.props.json.length,function(t){return e.refs["editor"+t].serialize()})}},_handleMoveStepEarlier:function(e){if(0!==e){var t=i.clone(this.props.json),n=t[e];t.splice(e,1),t.splice(e-1,0,n),this.props.onChange({json:t})}},_handleMoveStepLater:function(e){var t=i.clone(this.props.json);if(e+1!==t.length){var n=t[e];t.splice(e,1),t.splice(e+1,0,n),this.props.onChange({json:t})}},_handleAddStepAfter:function(e){var t=i.clone(this.props.json),n=e>=0?{widgets:t[e].widgets}:{};t.splice(e+1,0,n),this.props.onChange({json:t})},_handleRemoveStep:function(e){
var t=i.clone(this.props.json);t.splice(e,1),this.props.onChange({json:t})}});e.exports=f},function(e,t,n){"use strict";var r=n(89),i=n(34),o=n(35),s=n(57),a=n(172),l=n(11).Options,p=n(189).assert,c=n(86),u=c.Path,h=c.Arc,d=(c.Circle,c.Label),f=c.Line,m=c.MovablePoint,g=c.MovableLine,v=n(175),y=n(202),b=(n(12).seededRNG,n(12)),E=n(221).number,T=n(197),x=n(165),w=400,C=1e3,P=i.createClass({displayName:"Histogram",propTypes:{data:i.PropTypes.arrayOf(i.PropTypes.number),xAxisLabel:i.PropTypes.string,yAxisLabel:i.PropTypes.string,box:i.PropTypes.arrayOf(i.PropTypes.number)},getDefaultProps:function(){return{data:null,xAxisLabel:"Proportion (%)",yAxisLabel:"Number of times seen",box:[w,w]}},getInitialState:function(){return{threshold:this._getInitialThreshold(this._range())}},componentWillReceiveProps:function(e){var t=this._range(),n=this._range(e);b.deepEq(t,n)||this.setState({threshold:this._getInitialThreshold(n)})},_renderThresholdLine:function(){var e=this,t=[0,this._range()[1][1]],n=s.map(t,function(t){return[e.state.threshold,t]}),r=function(e,t){return i.createElement(m,{key:t,static:!0,coord:e,normalStyle:{stroke:"none",fill:"none"}})};return i.createElement(g,{onMove:this.handleMouseInteraction},s.map(n,r))},_renderCircle:function(){var e=this,t=this.props.data,n=s.reduce(t,function(e,t){return e+t},0),r=s.reduce(t,function(t,n,r){return null!=e.state.threshold&&r<=e.state.threshold?t+n:t},0),o=r/n,a=1e-5,l=20,p=[this.props.box[0]-1.5*l,1.5*l],c=function(){var e={key:"below",center:p,radius:l,startAngle:0,endAngle:o<1?360*o:360-a,sector:1!==o,unscaled:!0,style:{fill:T.LIGHT_RED,stroke:T.RED}};return i.createElement(h,e)},u=function(){var e={key:"above",center:p,radius:l,startAngle:o>0?360*o:a,endAngle:360,sector:0!==o,unscaled:!0,style:{fill:T.LIGHT_BLUE,stroke:T.BLUE}};return i.createElement(h,e)},f=this._range()[0],m=Math.min(Math.max(this.state.threshold,f[0]),f[1]).toFixed(2),g=function(){var e={key:"label",coord:[p[0],p[1]+1.5*l],text:r+" of "+n+" results below "+m+"%",direction:"center",tex:!1,unscaled:!0,style:{fontSize:"12px"}};return i.createElement(d,e)};return[o>0&&c(),o<1&&u(),g()]},_renderData:function(){var e=this,t=this.props.data,n=(this._range(),1),r=function(t,r){if(t){var o=null!=e.state.threshold&&r<=e.state.threshold,s={fill:o?T.LIGHT_RED:T.LIGHT_BLUE,stroke:o?T.RED:T.BLUE},a=[[r,0],[r,t],[r+n,t],[r+n,0]];return i.createElement(u,{key:r,coords:a,style:s})}};return s.map(t,r)},render:function(){var e=this.props.data,t=this._range(),n={xAxisLabel:this.props.xAxisLabel,yAxisLabel:this.props.yAxisLabel,box:this.props.box,range:t,data:e,scale:[b.scaleFromExtent(t[0],this.props.box[0]),b.scaleFromExtent(t[1],this.props.box[1])]},r={stroke:"#000",strokeWidth:1,opacity:1},o=[t[0][0],0],s=[t[0][1],0];return i.createElement(c,{box:n.box,range:n.range,options:n,setup:this._setupGraphie,onMouseMove:this.handleMouseInteraction,onMouseDown:this.handleMouseInteraction,setDrawingAreaAvailable:this.props.setDrawingAreaAvailable},i.createElement(f,{start:o,end:s,style:r}),e&&this._renderData(),e&&this._renderCircle(),e&&this._renderThresholdLine())},_setupGraphie:function(e,t){var n=t.data,r=t.range,i=t.scale,o=r[0][1]-r[0][0],a=r[1][1]-0,l=20,p=Math.ceil(a/l);if(s.each(s.range(0,r[1][1],p),function(t){n&&e.label([r[0][0],t],x.roundToApprox(t,2),"left",!0),e.line([r[0][0],t],[r[0][1],t],{stroke:"#000",strokeWidth:1,opacity:.3})}),n){var c=15,u=Math.ceil(o/c);s.each(s.range(r[0][0],r[0][1],u),function(t){e.label([t,0],E.round(t,2),"below",!0);var n=8;e.line([t,0],[t,-n/i[1]],{stroke:"#000",strokeWidth:1})})}var h={stroke:"#000",strokeWidth:2,opacity:1},d=[r[0][0],0],f=[r[0][0],r[1][1]];e.line(d,f,h);var m=r[0][0]+o/2,g=n?25:0;e.label([m,-g/i[1]],t.xAxisLabel,"below",!1).css("font-weight","bold");var v=0+a/2,y=n?55:28;e.label([r[0][0]-y/i[0],v],t.yAxisLabel,"center",!1).css("font-weight","bold").css("-webkit-transform","rotate(-90deg)")},handleMouseInteraction:function(e){this.setState({threshold:e[0]})},_range:function(e){var t=[[0,100],[-1,10]];return e=e||this.props,e.data?this._getRangeForData(e.data):t},_getRangeForData:function(e){var t=10,n=s.indexOf(e,s.find(e,function(e){return e>0})),r=Math.max(0,n-t),i=s.lastIndexOf(e,s.last(s.filter(e,function(e){return e>0}))),o=Math.min(101,i+1+t),a=-1,l=s.max(e);return[[r,o],[a,l]]},_getInitialThreshold:function(e){var t=e[0];return t[0]+(t[1]-t[0])/3}}),S=i.createClass({displayName:"Simulator",mixins:[a],propTypes:{apiOptions:l.propTypes,data:i.PropTypes.arrayOf(i.PropTypes.number),numTrials:i.PropTypes.number,proportionLabel:i.PropTypes.string,proportionOrPercentage:i.PropTypes.string,randomSeed:i.PropTypes.number,sampleSize:i.PropTypes.number,trackInteraction:i.PropTypes.func.isRequired,userProportion:i.PropTypes.number,xAxisLabel:i.PropTypes.string,yAxisLabel:i.PropTypes.string},getInitialState:function(){return{invalidInput:!1}},getDefaultProps:function(){return{data:null,userProportion:null,sampleSize:null,numTrials:null,randomSeed:0,xAxisLabel:"Proportion (%)",yAxisLabel:"Number of times seen",proportionLabel:"Underlying proportion",proportionOrPercentage:"proportion",apiOptions:l.defaults}},componentWillMount:function(){null!=this.props.randomSeed&&(this.generateNumber=b.seededRNG(this.props.randomSeed))},componentWillReceiveProps:function(e){e.randomSeed!==this.props.randomSeed&&(this.generateNumber=b.seededRNG(e.randomSeed))},render:function(){var e=this,t={marginLeft:"5px"},n="0px 0px 0px 2px rgba(255, 165, 0, 1)",o=s.extend({},t,{WebkitBoxShadow:n,MozBoxShadow:n,boxShadow:n,transition:"all 0.15s"}),a=s.extend({},t,{transition:"all 0.15s"}),l=this.state.invalidInput?o:a,p=this.props.apiOptions.staticRender?y:v,c=i.createElement("div",null,i.createElement(p,{ref:"userProportion",style:l,value:this.calculateDisplayProportion(),checkValidity:this.checkProportionValidity,disabled:this.props.apiOptions.readOnly,onChange:this.handleUserProportionChange,onFocus:function(){return e.props.onFocus(["userProportion"])},onBlur:function(){return e.props.onBlur(["userProportion"])}}),i.createElement(r,null,i.createElement("p",null,"This controls the proportion or percentage that will be used in your simulation."))),u=i.createElement("div",null,i.createElement(p,{ref:"sampleSize",style:l,value:this.props.sampleSize,checkValidity:function(e){return e>=0},disabled:this.props.apiOptions.readOnly,onChange:this.handleSampleSizeChange,onFocus:function(){return e.props.onFocus(["sampleSize"])},onBlur:function(){return e.props.onBlur(["sampleSize"])}}),i.createElement(r,null,i.createElement("p",null,"This controls the sample size that will be used in your simulation. For example, if you set this to 100, then for each trial, responses from 100 participants will be simulated."))),h=i.createElement("div",{style:{textAlign:"right"}},i.createElement("b",null,this.props.numTrials),i.createElement(r,null,i.createElement("p",null,"This is the number of trials used in the simulation. For example, if set to 50, then the survey will be conducted 50 times."))),d=function(e){var t=i.createElement("thead",null,i.createElement("tr",null,i.createElement("th",null,"Parameter"),i.createElement("th",null,"Value"))),n=i.createElement("tbody",null,s.map(e,function(e,t){return i.createElement("tr",{key:t},i.createElement("td",null,e.title),i.createElement("td",null,e.value))}));return i.createElement("table",null,t,n)},f=[{title:this.props.proportionLabel+":",value:c},{title:"Sample size:",value:u},{title:"Number of trials:",value:h}],m={margin:"20px 0"},g=i.createElement("button",{className:"simple-button",style:m,disabled:this.props.apiOptions.readOnly,onClick:this.handleRunSimulation},i18n._("Run simulation")),b={paddingBottom:this.props.data?40:0},E=i.createElement("div",{style:b},i.createElement(P,{data:this.props.data,xAxisLabel:this.props.xAxisLabel,yAxisLabel:this.props.yAxisLabel,setDrawingAreaAvailable:this.props.apiOptions.setDrawingAreaAvailable}));return i.createElement("div",null,d(f),g,E)},calculateDisplayProportion:function(){var e=this.props.userProportion;return"percentage"===this.props.proportionOrPercentage?Math.round(100*e):e},checkProportionValidity:function(e){return e>=0&&"proportion"===this.props.proportionOrPercentage&&e<=1||"percentage"===this.props.proportionOrPercentage&&e<=100},handleUserProportionChange:function(e,t){var n;n="percentage"===this.props.proportionOrPercentage?e/100:e,null!=n&&(n=Math.min(1,Math.max(0,n))),this.props.onChange({userProportion:n},t)},handleSampleSizeChange:function(e,t){null!=e&&(e=Math.min(C,Math.max(0,Math.floor(e)))),this.props.onChange({sampleSize:e},t)},handleRunSimulation:function(){return null==this.props.numTrials||null==this.props.userProportion||null==this.props.sampleSize?void this.setState({invalidInput:!0}):(this.setState({invalidInput:!1}),this.props.onChange({data:this.generateData()}),void this.props.trackInteraction())},generateData:function(e){var t=this;e=e||this.props;var n=function(e,n,r){var i=function(){return t.generateNumber()<r},o=s.times(101,function(){return 0});return s.times(n,function(){var t=s.times(e,i),n=s.filter(t,s.identity).length,r=Math.floor(100*n/e);o[r]++}),o};return n(e.sampleSize,e.numTrials,e.userProportion)},getInputPaths:function(){return[["userProportion"],["sampleSize"]]},focus:function(){var e=s.head(this.getInputPaths());return this.focusInputPath(e),!0},focusInputPath:function(e){p(e.length>0);var t=s.head(e),n=this.refs[t];n.focus()},blurInputPath:function(e){p(e.length>0);var t=s.head(e),n=this.refs[t];n.blur()},getDOMNodeForPath:function(e){p(e.length>0);var t=s.head(e);return o.findDOMNode(this.refs[t])},getGrammarTypeForPath:function(e){return p(e.length>0),"number"},setInputValue:function(e,t,n){p(e.length>0);var r=s.head(e),i=r.charAt(0).toUpperCase()+r.slice(1),o="handle"+i+"Change";this[o](t,n)},getUserInput:function(){return null},simpleValidate:function(e){return S.validate(this.getUserInput(),e)}});s.extend(S,{validate:function(e,t){return{type:"points",earned:0,total:0,message:null}}});var k=function(e){var t=s.clone(e);return t.randomSeed=e.problemNum,t};e.exports={name:"simulator",displayName:"Simulator",widget:S,transform:k}},function(e,t,n){"use strict";var r=n(34),i=n(57),o=n(172),s=n(173),a=n(89),l=n(175),p=5e3,c=r.createClass({displayName:"SimulatorEditor",mixins:[o,s],propTypes:{xAxisLabel:r.PropTypes.string,yAxisLabel:r.PropTypes.string,numTrials:r.PropTypes.number,proportionLabel:r.PropTypes.string,proportionOrPercentage:r.PropTypes.string},getDefaultProps:function(){return{xAxisLabel:"Proportion (%)",yAxisLabel:"Number of times seen",numTrials:100,proportionLabel:"Underlying proportion",proportionOrPercentage:"proportion"}},render:function(){return r.createElement("div",{className:"perseus-widget-simulator"},r.createElement("div",null,i18n._("X-Axis Label"),":",r.createElement("input",{type:"text",className:"graph-settings-axis-label",value:this.props.xAxisLabel,onChange:i.partial(this.handleTargetValueChange,"xAxisLabel")})),r.createElement("div",null,i18n._("Y-Axis Label"),":",r.createElement("input",{type:"text",className:"graph-settings-axis-label",value:this.props.yAxisLabel,onChange:i.partial(this.handleTargetValueChange,"yAxisLabel")})),r.createElement("div",null,i18n._('"True Proportion" Label'),":",r.createElement("input",{type:"text",className:"graph-settings-axis-label",value:this.props.proportionLabel,onChange:i.partial(this.handleTargetValueChange,"proportionLabel")}),r.createElement(a,null,r.createElement("p",null,'This text will be displayed next to the box in which the user enters the sample proportion for their simulation. For example, if your question is about surveying for approval ratings, you might want this to say "Sample approval rating".'))),r.createElement("div",null,i18n._("Proportion or Percentage"),":",r.createElement("select",{className:"perseus-widget-dropdown",value:this.props.proportionOrPercentage,onChange:i.partial(this.handleTargetValueChange,"proportionOrPercentage")},r.createElement("option",{key:"proportion",value:"proportion"},"Proportion"),r.createElement("option",{key:"percentage",value:"percentage"},"Percentage")),r.createElement(a,null,r.createElement("p",null,"Do you want the user to describe their simulation in terms of a proportion or a percentage?"))),r.createElement("div",null,i18n._("Number of trials"),":",r.createElement(l,{value:this.props.numTrials,checkValidity:function(e){return e>=0&&e<=p},onChange:this.change("numTrials")}),r.createElement(a,null,r.createElement("p",null,"This controls the number of trials used in the simulation. For example, if you set this to 50, then the survey will be conducted 50 times. Warning: setting this too high (i.e., greater than 5000 or so) will freeze the page."))))},handleTargetValueChange:function(e,t){this.change(e,t.target.value)}});e.exports=c},function(e,t,n){"use strict";var r=n(34),i=n(57),o=n(203),s=n(11).Options,a=n(12).shuffle,l="horizontal",p="vertical",c=r.createClass({displayName:"Sorter",propTypes:{apiOptions:s.propTypes,correct:r.PropTypes.array,layout:r.PropTypes.oneOf([l,p]),onChange:r.PropTypes.func,padding:r.PropTypes.bool,problemNum:r.PropTypes.number,trackInteraction:r.PropTypes.func.isRequired},getDefaultProps:function(){return{correct:[],layout:l,padding:!0,problemNum:0,onChange:function(){}}},render:function(){var e=a(this.props.correct,this.props.problemNum,!0),t=this.props.apiOptions.isMobile?8:5;return r.createElement("div",{className:"perseus-widget-sorter perseus-clearfix"},r.createElement(o,{options:e,layout:this.props.layout,margin:t,padding:this.props.padding,onChange:this.handleChange,ref:"sortable"}))},handleChange:function(e){this.props.onChange(e),this.props.trackInteraction()},getUserInput:function(){return{options:this.refs.sortable.getOptions()}},simpleValidate:function(e){return c.validate(this.getUserInput(),e)}});i.extend(c,{validate:function(e,t){var n=i.isEqual(e.options,t.correct);return{type:"points",earned:n?1:0,total:1,message:null}}}),e.exports={name:"sorter",displayName:"Sorter",widget:c}},function(e,t,n){"use strict";var r=n(34),i=n(57),o=n(89),s=n(45),a=n(84),l="horizontal",p="vertical",c=r.createClass({displayName:"SorterEditor",propTypes:{correct:r.PropTypes.array,layout:r.PropTypes.oneOf([l,p]),padding:r.PropTypes.bool},getDefaultProps:function(){return{correct:["$x$","$y$","$z$"],layout:l,padding:!0}},render:function(){var e=this;return r.createElement("div",null,r.createElement("div",null," ","Correct answer:"," ",r.createElement(o,null,r.createElement("p",null,"Enter the correct answer (in the correct order) here. The preview on the right will have the cards in a randomized order, which is how the student will see them."))),r.createElement(a,{options:this.props.correct,onChange:function(t,n){e.props.onChange({correct:t},n)},layout:this.props.layout}),r.createElement("div",null,r.createElement("label",null," ","Layout:"," ",r.createElement("select",{value:this.props.layout,onChange:this.onLayoutChange},r.createElement("option",{value:l},"Horizontal"),r.createElement("option",{value:p},"Vertical"))),r.createElement(o,null,r.createElement("p",null,"Use the horizontal layout for short text and small images. The vertical layout is best for longer text and larger images."))),r.createElement("div",null,r.createElement(s,{label:"Padding:",padding:this.props.padding,onChange:this.props.onChange}),r.createElement(o,null,r.createElement("p",null,"Padding is good for text, but not needed for images."))))},onLayoutChange:function(e){this.props.onChange({layout:e.target.value})},serialize:function(){return i.pick(this.props,"correct","layout","padding")}});e.exports=c},function(e,t,n){"use strict";var r=n(34),i=n(35),o=n(57),s=n(202),a=n(28),l=n(12),p=n(11).Options,c=n(58),u=n(189).assert,h=function(e,t){return[""+e,""+t]},d=function(){return h(0,0)},f=function(e){return u(o.isArray(e)&&2===e.length),+e[0]},m=function(e){return u(o.isArray(e)&&2===e.length),+e[1]},g=function(e){var t=f(e),n=m(e);return"answer"+t+","+n},v=r.createClass({displayName:"Table",propTypes:{answers:r.PropTypes.arrayOf(r.PropTypes.arrayOf(r.PropTypes.string)),editableHeaders:r.PropTypes.bool,Editor:r.PropTypes.func,headers:r.PropTypes.arrayOf(r.PropTypes.string),trackInteraction:r.PropTypes.func.isRequired},getDefaultProps:function(){var e=4,t=1,n=o(e).times(function(){return l.stringArrayOfSize(t)});return{apiOptions:p.defaults,headers:[""],editableHeaders:!1,rows:e,columns:t,answers:n}},_getRows:function(){return this.props.answers.length},_getColumns:function(){return this.props.answers[0].length},render:function(){var e,t=this,n=this._getRows(),i=this._getColumns(),l=this.props.headers;return e=this.props.apiOptions.staticRender?s:"input",r.createElement("table",{className:"perseus-widget-table-of-values non-markdown"},r.createElement("thead",null,r.createElement("tr",null,o.map(l,function(e,n){return t.props.editableHeaders?r.createElement("th",{key:n},r.createElement(t.props.Editor,{ref:"columnHeader"+n,apiOptions:t.props.apiOptions,content:e,widgetEnabled:!1,onChange:o.partial(t.onHeaderChange,n)})):r.createElement("th",{key:n},r.createElement(a,{content:e}))}))),r.createElement("tbody",null,o(n).times(function(n){return r.createElement("tr",{key:n},o(i).times(function(i){return r.createElement("td",{key:i},r.createElement(e,{ref:g(h(n,i)),type:"text",value:t.props.answers[n][i],disabled:t.props.apiOptions.readOnly,onFocus:o.partial(t._handleFocus,h(n,i)),onBlur:o.partial(t._handleBlur,h(n,i)),onChange:o.partial(t.onValueChange,n,i)}))}))})))},getUserInput:function(){return o.map(this.props.answers,o.clone)},onValueChange:function(e,t,n){var r=o.map(this.props.answers,o.clone);r[e][t]=n.target.value,this.props.onChange({answers:r}),this.props.trackInteraction()},onHeaderChange:function(e,t){var n=this.props.headers.slice();n[e]=t.content,this.props.onChange({headers:n})},simpleValidate:function(e){return v.validate(this.getUserInput(),e)},_handleFocus:function(e){this.props.onFocus(e)},_handleBlur:function(e){this.props.onBlur(e)},focus:function(){return this.focusInputPath(d()),!0},focusInputPath:function(e){var t=g(e),n=this.refs[t];this.props.apiOptions.staticRender?n.focus():i.findDOMNode(n).focus()},blurInputPath:function(e){var t=g(e),n=this.refs[t];this.props.apiOptions.staticRender?n.blur():i.findDOMNode(n).blur()},getDOMNodeForPath:function(e){var t=g(e);return i.findDOMNode(this.refs[t])},getInputPaths:function(){var e=this._getRows(),t=this._getColumns(),n=[];return o(e).times(function(e){o(t).times(function(t){var r=h(e,t);n.push(r)})}),n},getGrammarTypeForPath:function(e){return"number"},setInputValue:function(e,t,n){var r=f(e),i=m(e),s=o.map(this.props.answers,o.clone);s[r][i]=t,this.props.onChange({answers:s},n)}});o.extend(v,{validate:function(e,t){var n=function(e){return o.filter(e,function(e){return o.some(e,o.identity)})},r=n(t.answers),i=n(e),s=o.some(i,function(e){return o.some(e,function(e){return""===e})});if(s||!i.length)return{type:"invalid",message:null};if(i.length!==r.length)return{type:"points",earned:0,total:1,message:null};var a=c.number.createValidatorFunctional,l=null,p=o.every(r,function(e){var t;for(t=0;t<i.length;t++){var n=i[t],r=o.every(n,function(t,n){var r=e[n],i=a(r,{simplify:!0}),o=i(t);return o.message&&(l=o.message),o.correct});if(r)return i.splice(t,1),!0}return!1});return{type:"points",earned:p?1:0,total:1,message:l}}});var y=function(e){var t=e.answers.length,n=e.answers[0].length,r=o(t).times(function(){return l.stringArrayOfSize(n)});return o.extend({},e,{answers:r})};e.exports={name:"table",displayName:"Table of values",accessible:!0,widget:v,transform:y}},function(e,t,n){"use strict";var r=n(34),i=n(35),o=n(57),s=n(12),a=n(89),l=n(175),p=n(17),c=n(145).widget,u=r.createClass({displayName:"TableEditor",propTypes:{rows:r.PropTypes.number,columns:r.PropTypes.number,headers:r.PropTypes.arrayOf(r.PropTypes.string),answers:r.PropTypes.arrayOf(r.PropTypes.arrayOf(r.PropTypes.string))},getDefaultProps:function(){var e=4,t=1,n=o(e).times(function(){return s.stringArrayOfSize(t)});return{headers:[""],rows:e,columns:t,answers:n}},focus:function(){i.findDOMNode(this.refs.numberOfColumns).focus()},render:function(){var e=this,t=o.pick(this.props,"headers","answers","onChange","apiOptions");return o.extend(t,{editableHeaders:!0,Editor:p,onFocus:function(){},onBlur:function(){},trackInteraction:function(){}}),r.createElement("div",null,r.createElement("div",{className:"perseus-widget-row"},r.createElement("label",null,"Number of columns:"," ",r.createElement(l,{ref:"numberOfColumns",value:this.props.columns,onChange:function(t){t&&e.onSizeInput(e.props.rows,t)},useArrowKeys:!0}))),r.createElement("div",{className:"perseus-widget-row"},r.createElement("label",null,"Number of rows:"," ",r.createElement(l,{ref:"numberOfRows",value:this.props.rows,onChange:function(t){t&&e.onSizeInput(t,e.props.columns)},useArrowKeys:!0}))),r.createElement("div",null," ","Table of answers:"," ",r.createElement(a,null,r.createElement("p",null,"The student has to fill out all cells in the table.  For partially filled tables create a table using the template, and insert text input boxes as desired."))),r.createElement("div",null,r.createElement(c,t)))},onSizeInput:function(e,t){function n(e){i<=a?e.length=i:o(i-a).times(function(){e.push("")})}var r=+e||0,i=+t||0;r=Math.min(Math.max(1,r),30),i=Math.min(Math.max(1,i),6);var a=this.props.columns,l=this.props.rows,p=this.props.answers;r<=l?p.length=r:o(r-l).times(function(){p.push(s.stringArrayOfSize(a))});var c=this.props.headers;n(c),o.each(p,n),this.props.onChange({rows:r,columns:i,answers:p,headers:c})},serialize:function(){var e=o.pick(this.props,"headers","rows","columns");return o.extend({},e,{answers:o.map(this.props.answers,o.clone)})}});e.exports=u},function(e,t,n){"use strict";function r(e,t){return g.object(g.map(e,function(e,n){return[n,e[t]]}))}function i(e){return e.constraints.fixed?H.DYNAMIC:H.INTERACTIVE}function o(e,t){var n=t[0][1]-t[0][0],r=t[1][1]-t[1][0];return e*Math.max(n,r)/20}function s(e,t,n){var r=q.subtract(e,t),i=q.scale(r,n),o=q.add(t,i);return o}function a(e){return String(W.roundTo(9,e))}function l(e){var t=W.toFraction(e,F.DEFAULT_TOLERANCE);return 1===t[1]?a(e):a(t[0])+"/"+a(t[1])}function p(e){return[f.createElement(T,null,"("),a(e[0]),f.createElement(T,null,", {}"),a(e[1]),f.createElement(T,null,")")]}function c(e){return[f.createElement(T,null,"\\langle"),a(e[0]),f.createElement(T,null,", {}"),a(e[1]),f.createElement(T,null,"\\rangle")]}function u(e){return a(e)+S}function h(e,t){return e=g.clone(e).sort(z.compare),t=g.clone(t).sort(z.compare),g.all(g.map(e,function(e,n){var r=t[n];return z.equal(e,r)}))}var d=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},f=n(34),m=n(35),g=n(57),v=n(201),y=n(42),b=n(175),E=n(202),T=n(80),x=n(168),w=n(11).Options,C=n(160).propTypes.keypadElementPropType,P=15,S="°",k=300,N=1.5,M=2,_=1,O=n(41),A=O.iconPlus,I=O.iconUndo,R=n(12).deepEq,D=n(12).getGridStep,L=n(12).captureScratchpadTouchStart,F=n(221).number,q=n(221).vector,z=n(221).point,B=n(221).ray,j=n(221).line,W=n(165),H=n(197),U=n(189).assert,V=400,G={url:null},Y=function(e,t){e=e||{};var n=e.labels||["x","y"],r=e.range||[[-10,10],[-10,10]],i=e.step||[1,1],o=e.gridStep||D(r,i,t);return{box:[t,t],labels:n,range:r,step:i,gridStep:o,valid:!0,backgroundImage:G,markings:"grid",showProtractor:!1}},K={apiOptions:w.defaults,gradeEmpty:!1,graphMode:"interactive",listMode:"dynamic",graph:{},tools:{translation:{enabled:!0,required:!1,constraints:{}},rotation:{enabled:!0,required:!1,constraints:{fixed:!1},coord:[1,6]},reflection:{enabled:!0,required:!1,constraints:{fixed:!1},coords:[[2,-4],[2,2]]},dilation:{enabled:!0,required:!1,constraints:{fixed:!1},coord:[6,6]}},drawSolutionShape:!0,starting:{shape:{type:"polygon-3",coords:[[2,2],[2,6],[7,2]]},transformations:[]},correct:{shape:{type:"polygon-3",coords:[[2,2],[2,6],[7,2]]},transformations:[]}},X=function(e){return e.customKeypad?x:e.staticRender?E:b},J={apply:function(e){return Q[e.type].isValid(e)?Q[e.type].apply(e):g.identity},append:function(e,t){var n=J._appendAndCollapseLastTwo(e,t);return J._collapseFinalNoOps(n)},_collapseFinalNoOps:function(e){return e.length&&J.isNoOp(g.last(e))?g.initial(e):e},_appendAndCollapseLastTwo:function(e,t){if(e.length){var n=J.collapse(g.last(e),t);return g.initial(e).concat(n)}return[t]},isNoOp:function(e){return Q[e.type].isNoOp(e)},collapse:function(e,t){return e.type!==t.type?[e,t]:J.isEmpty(e)&&J.isEmpty(t)?[]:J.isValid(e)&&J.isValid(t)?J._collapseValidMonotypedTransforms(e,t):[e,t]},isValid:function(e){return Q[e.type].isValid(e)},isEmpty:function(e){return Q[e.type].isEmpty(e)},_collapseValidMonotypedTransforms:function(e,t){var n=Q[e.type].collapse(e,t);return n?(g.isArray(n)||(n=[n]),g.each(n,function(t){t.type=e.type}),n):[e,t]},toTeX:function(e){return Q[e.type].toTeX(e)},ListItem:f.createClass({displayName:"ListItem",render:function(){if("dynamic"===this.props.mode)return f.createElement("div",null,J.toTeX(this.props.transform));if("interactive"===this.props.mode){var e=Q[this.props.transform.type].Input;return f.createElement(e,d({ref:"transform",onChange:this.handleChange,onFocus:this.props.onFocus,onBlur:this.props.onBlur,keypadElement:this.props.keypadElement,apiOptions:this.props.apiOptions},this.props.transform))}throw new Error("Invalid mode: "+this.props.mode)},value:function(){return"interactive"===this.props.mode?g.extend({type:this.props.transform.type},this.refs.transform.value()):this.props.transform},handleChange:g.debounce(function(e){this.props.onChange(this.value(),e)},k),_getComponentAtPath:function(e){var t=this.refs.transform,n=g.head(e);return t.refs[n]},focus:function(){var e=this.refs.transform,t=g.head(e.getInputPaths());t&&this.focusInputPath(t)},focusInputPath:function(e){this._getComponentAtPath(e).focus()},blurInputPath:function(e){this._getComponentAtPath(e).blur()},getDOMNodeForPath:function(e){return m.findDOMNode(this._getComponentAtPath(e))},getGrammarTypeForPath:function(e){return"number"},setInputValue:function(e,t,n){t.length&&(t=parseFloat(t),isNaN(t))||this.refs.transform.setInputValue(e,t,n)},getInputPaths:function(){return"dynamic"===this.props.mode?[]:this.refs.transform.getInputPaths()}})},Q={translation:{verbName:i18n._("Translate"),nounName:i18n._("Translation"),lowerNounName:i18n._("translation"),apply:function(e){return function(t){return q.add(t,e.vector)}},isValid:function(e){return g.isFinite(e.vector[0])&&g.isFinite(e.vector[1])},isEmpty:function(e){return null===e.vector[0]&&null===e.vector[1]},isNoOp:function(e){return q.equal(e.vector,[0,0])},collapse:function(e,t){return{vector:q.add(e.vector,t.vector)}},toTeX:function(e){return $_({vector:c(e.vector)},"Translation by %(vector)s")},Input:f.createClass({displayName:"Input",getInitialState:function(){return{vector:this.props.vector||[null,null]}},componentDidUpdate:function(e){R(this.props,e)||this.setState({vector:this.props.vector})},render:function(){var e=this,t=X(this.props.apiOptions),n=[f.createElement(T,null,"\\langle"),f.createElement(t,{ref:"x",placeholder:0,value:this.state.vector[0],useArrowKeys:!0,onChange:function(t){var n=e.state.vector[1];e.setState({vector:[t,n]},function(){e.props.onChange()})},onFocus:g.partial(this.props.onFocus,"x"),onBlur:g.partial(this.props.onBlur,"x"),keypadElement:this.props.keypadElement}),f.createElement(T,null,", {}"),f.createElement(t,{ref:"y",placeholder:0,value:this.state.vector[1],useArrowKeys:!0,onChange:function(t){var n=e.state.vector[0];e.setState({vector:[n,t]},function(){e.props.onChange()})},onFocus:g.partial(this.props.onFocus,"y"),onBlur:g.partial(this.props.onBlur,"y"),keypadElement:this.props.keypadElement}),f.createElement(T,null,"\\rangle")];return f.createElement("div",null,$_({vector:n},"Translation by %(vector)s"))},value:function(){var e=this.refs.x.getValue(),t=this.refs.y.getValue();return{vector:[e,t]}},setInputValue:function(e,t,n){var r=this,i=g.first(e),o=g.clone(this.state.vector);"x"===i?o[0]=t:"y"===i&&(o[1]=t),this.setState({vector:o},function(){r.props.onChange(n)})},getInputPaths:function(){return[["x"],["y"]]}})},rotation:{verbName:i18n._("Rotate"),nounName:i18n._("Rotation"),lowerNounName:i18n._("rotation"),apply:function(e){return function(t){return z.rotateDeg(t,e.angleDeg,e.center)}},isValid:function(e){return g.isFinite(e.angleDeg)&&g.isFinite(e.center[0])&&g.isFinite(e.center[1])},isEmpty:function(e){return null===e.angleDeg&&null===e.center[0]&&null===e.center[1]},isNoOp:function(e){return F.equal(e.angleDeg,0)},collapse:function(e,t){return!!z.equal(e.center,t.center)&&{center:e.center,angleDeg:e.angleDeg+t.angleDeg}},toTeX:function(e){return $_({degrees:u(e.angleDeg),point:p(e.center)},"Rotation by %(degrees)s about %(point)s")},Input:f.createClass({displayName:"Input",getInitialState:function(){return{center:this.props.center||[null,null],angleDeg:this.props.angleDeg||null}},componentDidUpdate:function(e){R(this.props,e)||this.setState({center:this.props.center,angleDeg:this.props.angleDeg})},render:function(){var e=this,t=X(this.props.apiOptions),n=[f.createElement(T,null,"("),f.createElement(t,{ref:"centerX",placeholder:0,value:this.state.center[0],useArrowKeys:!0,onChange:function(t){var n=e.state.center[1];e.setState({center:[t,n]},function(){e.props.onChange()})},onFocus:g.partial(this.props.onFocus,"centerX"),onBlur:g.partial(this.props.onBlur,"centerX"),keypadElement:this.props.keypadElement}),f.createElement(T,null,", {}"),f.createElement(t,{ref:"centerY",placeholder:0,value:this.state.center[1],useArrowKeys:!0,onChange:function(t){var n=e.state.center[0];e.setState({center:[n,t]},function(){e.props.onChange()})},onFocus:g.partial(this.props.onFocus,"centerY"),onBlur:g.partial(this.props.onBlur,"centerY"),keypadElement:this.props.keypadElement}),f.createElement(T,null,")")],r=[f.createElement(t,{ref:"angleDeg",placeholder:0,value:this.state.angleDeg,useArrowKeys:!0,onChange:function(t){e.setState({angleDeg:t},function(){e.props.onChange()})},onFocus:g.partial(this.props.onFocus,"angleDeg"),onBlur:g.partial(this.props.onBlur,"angleDeg"),keypadElement:this.props.keypadElement}),S],i=$_({point:n,degrees:r},"Rotation about %(point)s by %(degrees)s");return f.createElement("div",null,i)},value:function(){var e=this.refs.angleDeg.getValue(),t=this.refs.centerX.getValue(),n=this.refs.centerY.getValue();return{angleDeg:e,center:[t,n]}},setInputValue:function(e,t,n){var r=this,i=g.first(e),o=g.clone(this.state.angleDeg),s=g.clone(this.state.center);"angleDeg"===i?o=t:"centerX"===i?s[0]=t:"centerY"===i&&(s[1]=t),this.setState({angleDeg:o,center:s},function(){r.props.onChange(n)})},getInputPaths:function(){return[["centerX"],["centerY"],["angleDeg"]]}})},reflection:{verbName:i18n._("Reflect"),nounName:i18n._("Reflection"),lowerNounName:i18n._("reflection"),apply:function(e){return function(t){return z.reflectOverLine(t,e.line)}},isValid:function(e){return g.all(g.flatten(e.line),g.isFinite)&&!z.equal(e.line[0],e.line[1])},isEmpty:function(e){return g.all(g.flatten(e.line),g.isNull)},isNoOp:function(e){return!1},collapse:function(e,t){return!!j.equal(e.line,t.line)&&[]},toTeX:function(e){var t=e.line[0],n=e.line[1];return $_({point1:p(t),point2:p(n)},"Reflection over the line from %(point1)s to %(point2)s")},Input:f.createClass({displayName:"Input",getInitialState:function(){return{line:this.props.line||[[null,null],[null,null]]}},componentDidUpdate:function(e){R(this.props,e)||this.setState({line:this.props.line})},render:function(){var e=X(this.props.apiOptions),t=[f.createElement(T,null,"("),f.createElement(e,{ref:"x1",value:this.state.line[0][0],useArrowKeys:!0,onChange:this.changePoint.bind(this,0,0),onFocus:g.partial(this.props.onFocus,"x1"),onBlur:g.partial(this.props.onBlur,"x1"),keypadElement:this.props.keypadElement}),f.createElement(T,null,", {}"),f.createElement(e,{
ref:"y1",value:this.state.line[0][1],useArrowKeys:!0,onChange:this.changePoint.bind(this,0,1),onFocus:g.partial(this.props.onFocus,"y1"),onBlur:g.partial(this.props.onBlur,"y1"),keypadElement:this.props.keypadElement}),f.createElement(T,null,")")],n=[f.createElement(T,null,"("),f.createElement(e,{ref:"x2",value:this.state.line[1][0],useArrowKeys:!0,onChange:this.changePoint.bind(this,1,0),onFocus:g.partial(this.props.onFocus,"x2"),onBlur:g.partial(this.props.onBlur,"x2"),keypadElement:this.props.keypadElement}),f.createElement(T,null,", {}"),f.createElement(e,{ref:"y2",value:this.state.line[1][1],useArrowKeys:!0,onChange:this.changePoint.bind(this,1,1),onFocus:g.partial(this.props.onFocus,"y2"),onBlur:g.partial(this.props.onBlur,"y2"),keypadElement:this.props.keypadElement}),f.createElement(T,null,")")];return f.createElement("div",null,$_({point1:t,point2:n},"Reflection over the line from %(point1)s to %(point2)s"))},changePoint:function(e,t,n,r){var i=this,o=g.map(this.state.line,g.clone);o[e][t]=n,this.setState({line:o},function(){i.props.onChange(r)})},value:function(){var e=this.refs.x1.getValue(),t=this.refs.y1.getValue(),n=this.refs.x2.getValue(),r=this.refs.y2.getValue();return{line:[[e,t],[n,r]]}},setInputValue:function(e,t,n){var r,i=g.first(e);"x"===i[0]?r=0:"y"===i[0]&&(r=1);var o;"1"===i[1]?o=0:"2"===i[1]&&(o=1),this.changePoint(o,r,t,n)},getInputPaths:function(){return[["x1"],["y1"],["x2"],["y2"]]}})},dilation:{verbName:i18n._("Dilate"),nounName:i18n._("Dilation"),lowerNounName:i18n._("dilation"),apply:function(e){return function(t){return s(t,e.center,e.scale)}},isValid:function(e){return g.isFinite(e.scale)&&g.isFinite(e.center[0])&&g.isFinite(e.center[1])},isEmpty:function(e){return null===e.scale&&null===e.center[0]&&null===e.center[1]},isNoOp:function(e){return F.equal(e.scale,1)},collapse:function(e,t){return!!z.equal(e.center,t.center)&&{center:e.center,scale:e.scale*t.scale}},toTeX:function(e){var t=l(e.scale);return $_({scale:t,point:p(e.center)},"Dilation of scale %(scale)s about %(point)s")},Input:f.createClass({displayName:"Input",getInitialState:function(){return{center:this.props.center||[null,null],scale:this.props.scale||null}},componentDidUpdate:function(e){R(this.props,e)||this.setState({center:this.props.center,scale:this.props.scale})},render:function(){var e=this,t=X(this.props.apiOptions),n=[f.createElement(T,null,"("),f.createElement(t,{ref:"x",placeholder:0,value:this.state.center[0],useArrowKeys:!0,onChange:function(t){var n=e.state.center[1];e.setState({center:[t,n]},function(){e.props.onChange()})},onFocus:g.partial(this.props.onFocus,"x"),onBlur:g.partial(this.props.onBlur,"x"),keypadElement:this.props.keypadElement}),f.createElement(T,null,", {}"),f.createElement(t,{ref:"y",placeholder:0,value:this.state.center[1],useArrowKeys:!0,onChange:function(t){var n=e.state.center[0];e.setState({center:[n,t]},function(){e.props.onChange()})},onFocus:g.partial(this.props.onFocus,"y"),onBlur:g.partial(this.props.onBlur,"y"),keypadElement:this.props.keypadElement}),f.createElement(T,null,")")],r=f.createElement(t,{ref:"scale",placeholder:1,value:this.state.scale,useArrowKeys:!0,onChange:function(t){e.setState({scale:t},function(){e.props.onChange()})},onFocus:g.partial(this.props.onFocus,"scale"),onBlur:g.partial(this.props.onBlur,"scale"),keypadElement:this.props.keypadElement});return f.createElement("div",null,$_({point:n,scale:r},"Dilation about %(point)s by %(scale)s"))},value:function(){var e=this.refs.scale.getValue(),t=this.refs.x.getValue(),n=this.refs.y.getValue();return{scale:e,center:[t,n]}},setInputValue:function(e,t,n){var r=this,i=g.first(e),o=this.state.scale,s=g.clone(this.state.center);"x"===i?s[0]=t:"y"===i?s[1]=t:"scale"===i&&(o=t),this.setState({scale:o,center:s},function(){r.props.onChange(n)})},getInputPaths:function(){return[["x"],["y"],["scale"]]}})}},Z={getPointCountForType:function(e){var t=e.split("-");return"polygon"===t[0]?t[1]||3:"line"===t[0]||"lineSegment"===t[0]?2:"angle"===t[0]?3:"circle"===t[0]?2:"point"===t[0]?1:void 0},addMovableShape:function(e,t){if(t.editable&&t.translatable)throw new Error("It doesn't make sense to have a movable shape where you can stretch the points and translate them simultaneously. options: "+JSON.stringify(t));var n,r=g.map(t.shape.coords,function(i){var o,s=!1,a=i,l=function(e,i){s||(a=o.coord,s=!0);var l=q.subtract([e,i],o.coord);t.onMove&&(l=t.onMove(l[0],l[1])),t.translatable&&g.each(r,function(e){e!==o&&e.setCoord(q.add(e.coord,l))});var p=o.coord,c=q.add(o.coord,l);return o.coord=c,n.update(),o.coord=p,c},p=function(){if(t.onMoveEnd&&s){s=!1;var e=q.subtract(o.coord,a);t.onMoveEnd(e[0],e[1])}n.update()};return o=e.addMovablePoint({coord:i,normalStyle:t.normalPointStyle,highlightStyle:t.highlightPointStyle,constraints:{fixed:!t.translatable&&!t.editable},visible:t.showPoints,snapX:t.snap&&t.snap[0]||0,snapY:t.snap&&t.snap[1]||0,bounded:!1,onMove:l,onMoveEnd:p}),o.bounded=!0,o});n=Z.addShape(e,t,r);var i=n.remove;return n.remove=function(){i.apply(n),g.invoke(r,"remove")},n},addShape:function(e,t,n){n=n||t.shape.coords;var r=Z._typesOf(t.shape),i=t.shape.options||Z.defaultOptions(r),o=Z._mapTypes(r,n,function(n,r,o){var s=g.extend({},t,i[o]);return Z._addType(e,n,r,s)}),s=g.filter(g.pluck(o,"update"),g.identity),a=function(){g.invoke(s,"call")},l=g.filter(g.pluck(o,"remove"),g.identity),p=function(){g.invoke(l,"call")},c=function(){return g.map(o,function(e){return e.getOptions?e.getOptions():{}})},u=function(){var e=g.map(n,function(e){return g.isArray(e)?e:e.coord});return{type:r,coords:e,options:c()}};return{type:r,points:n,update:a,remove:p,toJSON:u,getOptions:c}},equal:function(e,t){var n=Z._typesOf(e),r=Z._typesOf(t);if(n.length!==r.length)return!1;var i=Z._mapTypes(n,e.coords,Z._combine),o=Z._mapTypes(r,t.coords,Z._combine);return g.all(g.map(i,function(e,t){var n=o[t];return e.type===n.type&&Z._forType(e.type).equal(e.coords,n.coords)}))},_typesOf:function(e){var t=e.type;return g.isArray(t)||(t=[t]),g.map(t,function(e){return"polygon"===e?"polygon-3":e})},defaultOptions:function(e){return g.map(e,function(e){var t=Z._forType(e).defaultOptions;return g.extend({},t)})},_forType:function(e){var t=e.split("-")[0];return Z[t]},_mapTypes:function(e,t,n,r){return g.map(e,function(e,i){var o=Z.getPointCountForType(e),s=g.first(t,o);return t=g.rest(t,o),n.call(r,e,s,i)})},_addType:function(e,t,n,r){var i=g.isArray(n[0])?{coordA:n[0],coordZ:n[1]}:{pointA:n[0],pointZ:n[1]};if(t=t.split("-")[0],"polygon"===t){var o=e.addMovablePolygon(g.extend({},r,{fixed:!r.editable,snapX:r.snap&&r.snap[0]||0,snapY:r.snap&&r.snap[1]||0,points:n,constrainToGraph:!1}));return{update:o.transform.bind(o),remove:o.remove.bind(o)}}if("line"===t||"lineSegment"===t){var s=e.addMovableLineSegment(g.extend({},r,i,{movePointsWithLine:!0,fixed:!0,constraints:{fixed:!0},extendLine:"line"===t}));return{update:s.transform.bind(s,!0),remove:s.remove.bind(s)}}if("angle"===t){var a=!!r.editable&&null,l=e.addMovableAngle({angleLabel:"$deg0",fixed:!0,points:n,normalStyle:r.normalStyle,reflex:r.reflex});return g.isArray(n[0])||r.editable||(n[0].remove(),n[2].remove()),{update:l.update.bind(l,a),remove:l.remove.bind(l),getOptions:function(){return{reflex:l.isReflex()}}}}if("circle"===t){var p={remove:g.identity},c=function(){var t=n[0].coord||n[0],i=n[1].coord||n[1],o=z.distanceToPoint(t,i);p.remove(),p=e.circle(t,o,g.extend({stroke:H.DYNAMIC,"stroke-width":2},r.normalStyle))};return c(),n[1].remove&&!r.editable&&n[1].remove(),{update:c,remove:function(){p.remove()}}}if("point"===t)return{update:null,remove:null};throw new Error("Invalid shape type "+t)},_combine:function(e,t){return{type:e,coords:t}},polygon:{equal:h},line:{equal:j.equal},lineSegment:{equal:h},angle:{equal:function(e,t){if(!z.equal(e[1],t[1]))return!1;var n=[e[1],e[0]],r=[e[1],e[2]],i=[t[1],t[0]],o=[t[1],t[2]],s=B.equal(n,i)&&B.equal(r,o),a=B.equal(n,o)&&B.equal(r,i);return s||a},defaultOptions:{reflex:!1}},circle:{equal:function(e,t){var n=z.distanceToPoint(e[0],e[1]),r=z.distanceToPoint(t[0],t[1]);return z.equal(e[0],t[0])&&F.equal(n,r)}},point:{equal:z.equal}},ee=J.ListItem,te=f.createClass({displayName:"TransformationList",render:function(){if("static"===this.props.mode)return f.createElement("span",null);var e=g.map(this.props.transformations,function(e,t){return f.createElement(ee,{ref:"transformation"+t,key:"transformation"+t,transform:e,mode:this.props.mode,onChange:this.handleChange,onFocus:g.partial(this.props.onFocus,""+t),onBlur:g.partial(this.props.onBlur,""+t),keypadElement:this.props.keypadElement,apiOptions:this.props.apiOptions})},this);return f.createElement("div",{className:"perseus-transformation-list"},e)},_transformationRefs:function(){var e=this;return g.times(this.props.transformations.length,function(t){return e.refs["transformation"+t]})},value:function(){return g.invoke(this._transformationRefs(),"value")},handleChange:function(e,t){this.props.onChange(this.value(),t)},focusLast:function(){var e=this._transformationRefs();0!==e.length&&g.last(e).focus()}}),ne=f.createClass({displayName:"ToolButton",render:function(){var e=this.props.toggled?"simple-button exercise-orange toggled highlighted-tool-button":"simple-button";return f.createElement("button",{type:"button",className:e,disabled:this.props.disabled,onClick:this.props.onClick,onTouchStart:L},this.props.children)}}),re=f.createClass({displayName:"ToolsBar",getInitialState:function(){return{selected:null}},render:function(){var e=g.map(Q,function(e,t){if(this.props.enabled[t])return f.createElement(ne,{key:t,disabled:this.props.apiOptions.readOnly,toggled:this.state.selected===t,onClick:this.changeSelected.bind(this,t)},e.verbName)},this);return f.createElement("div",{className:"transformer-tools-bar"},f.createElement("span",{className:"simple-button-group"},e),f.createElement("button",{className:"transformer-undo-button simple-button",type:"button",disabled:this.props.apiOptions.readOnly,onClick:this.props.onUndoClick,onTouchStart:L},f.createElement(y,I)," ","Undo"),f.createElement("div",{className:"clear"}))},changeSelected:function(e){this.props.removeTool(this.state.selected),e&&e!==this.state.selected?(this.props.addTool(e),this.setState({selected:e})):this.setState({selected:null})}}),ie=f.createClass({displayName:"AddTransformBar",render:function(){var e=g.map(Q,function(e,t){if(this.props.enabled[t])return f.createElement(ne,{key:t,toggled:!1,disabled:this.props.apiOptions.readOnly,onClick:this.changeSelected.bind(this,t)},f.createElement(y,A)," ",e.nounName)},this);return f.createElement("div",{className:"transformer-tools-bar"},e,f.createElement("button",{className:"transformer-undo-button simple-button",type:"button",onClick:this.props.onUndoClick,disabled:this.props.apiOptions.readOnly,onTouchStart:L},f.createElement(y,I)," ","Undo"),f.createElement("div",{className:"clear"}))},changeSelected:function(e){e&&this.props.addTool(e)}}),oe=f.createClass({displayName:"Transformer",propTypes:{apiOptions:w.propTypes,keypadElement:C,trackInteraction:f.PropTypes.func.isRequired},getDefaultProps:function(){return g.defaults({transformations:[]},K)},render:function(){var e=g.extend(Y(this.props.graph,V),this.props.graph),t="interactive"===this.props.graphMode,n=t?re:ie,i=f.createElement("div",{style:{width:e.box[0]}},f.createElement(n,{ref:"toolsBar",enabled:r(this.props.tools,"enabled"),apiOptions:this.props.apiOptions,addTool:this.addTool,removeTool:this.removeTool,onUndoClick:this.handleUndoClick}));return f.createElement("div",{className:"perseus-widget perseus-widget-transformer"},f.createElement(v,{ref:"graph",box:e.box,range:e.range,labels:e.labels,step:e.step,gridStep:e.gridStep,markings:e.markings,backgroundImage:e.backgroundImage,showProtractor:e.showProtractor,onGraphieUpdated:this.setupGraphie,setDrawingAreaAvailable:this.props.apiOptions.setDrawingAreaAvailable}),!t&&"Add transformations below:","static"===this.props.graphMode&&[f.createElement("br",{key:"static-br"}),f.createElement("em",{key:"static-nomove"}," ","Note: For this question, the shape will not move."," ")],t&&i,f.createElement(te,{ref:"transformationList",mode:this.props.listMode,transformations:this.props.transformations,onChange:this.setTransformationProps,onFocus:this._handleFocus,onBlur:this._handleBlur,keypadElement:this.props.keypadElement,apiOptions:this.props.apiOptions}),!t&&i)},componentDidMount:function(){this.setupGraphie(this.graphie())},componentDidUpdate:function(e){this.shouldSetupGraphie(this.props,e)?this.refs.graph.reset():R(this.props.transformations,this.transformations)||this.setTransformations(this.props.transformations)},shouldSetupGraphie:function(e,t){return!R(t.starting,e.starting)||(t.graphMode!==e.graphMode||(t.listMode!==e.listMode||(t.drawSolutionShape!==e.drawSolutionShape||(!(!e.drawSolutionShape||R(t.correct.shape,e.correct.shape))||!R(this.tools,e.tools)))))},graphie:function(){return this.refs.graph.graphie()},setupGraphie:function(e){this.props.drawSolutionShape&&this.props.correct.shape&&this.props.correct.shape.coords&&Z.addShape(e,{fixed:!0,shape:this.props.correct.shape,normalStyle:{stroke:H.GRAY,"stroke-dasharray":"","stroke-width":2}}),this.currentTool=null,this.refs.toolsBar.changeSelected(null),this.addTransformerShape(this.props.starting.shape,!1),this.setTransformations(this.props.transformations),this.tools={translation:g.clone(this.props.tools.translation),rotation:g.clone(this.props.tools.rotation),reflection:g.clone(this.props.tools.reflection),dilation:g.clone(this.props.tools.dilation)}},setTransformations:function(e){this.resetCoords(),this.transformations=g.clone(e),g.each(this.transformations,this.applyTransform)},addTransformerShape:function(e,t){var n=this,r=this.graphie();this.shape=Z.addMovableShape(r,{shape:e,editable:!1,showPoints:"static"!==this.props.graphMode,translatable:t,onMove:function(e,t){return e=W.roundToNearest(r.snap[0],e),t=W.roundToNearest(r.snap[1],t),n.addTransform({type:"translation",vector:[e,t]}),[e,t]},normalPointStyle:{fill:t?H.INTERACTIVE:H.DYNAMIC,stroke:t?H.INTERACTIVE:H.DYNAMIC},highlightPointStyle:{fill:H.INTERACTING,stroke:H.INTERACTING}})},addTool:function(e){var t=this;if("interactive"===this.props.graphMode)if("translation"===e)this.currentTool=this.addTranslationTool();else if("rotation"===e)this.currentTool=this.addRotationTool();else if("reflection"===e)this.currentTool=this.addReflectionTool();else{if("dilation"!==e)throw new Error("Invalid tool id: "+e);this.currentTool=this.addDilationTool()}else{var n;if("translation"===e)n={type:e,vector:[null,null]};else if("rotation"===e)n={type:e,center:[null,null],angleDeg:null};else if("reflection"===e)n={type:e,line:[[null,null],[null,null]]};else{if("dilation"!==e)throw new Error("Invalid tool id: "+e);n={type:e,center:[null,null],scale:null}}this.doTransform(n,function(){t.refs.transformationList.focusLast()})}},removeTool:function(e){this.currentTool&&this.currentTool.remove(),this.currentTool=null},addTranslationTool:function(){var e=this;return this.shape.remove(),this.addTransformerShape(this.shape.toJSON(),!0),{remove:function(){e.shape.remove(),e.addTransformerShape(e.shape.toJSON(),!1)}}},snapCoord:function(e){var t=this.graphie();return g.map(e,function(e,n){return W.roundToNearest(t.snap[n],e)})},normalizeReflectionCoords:function(e){var t=this.snapCoord(j.midpoint(e)),n=q.polarDegFromCart(q.subtract(e[0],e[1])),r=[1,W.roundToNearest(45,n[1])],i=q.cartFromPolarDeg(r),o=g.map([-1,1],function(e){var n=q.add(t,q.scale(i,e*this.scaleToCurrentRange(M)));return this.snapCoord(n)},this);return o},addReflectionTool:function(){var e=this.props.tools.reflection;if(e.enabled){var t,n=this,r=this.refs.graph.graphie(),o=function(){n.changeTool("reflection",{coords:g.pluck(a,"coord")})},s=this.normalizeReflectionCoords(e.coords),a=g.map(s,function(e){return r.addMovablePoint({coord:e,visible:!1})},this),l=i(e);r.style({},function(){t=r.addMovableLineSegment({fixed:e.constraints.fixed,constraints:e.constraints,pointA:a[0],pointZ:a[1],snapX:r.snap[0],snapY:r.snap[1],extendLine:!0,normalStyle:{stroke:l,"stroke-width":2,"stroke-dasharray":"- "},highlightStyle:{stroke:H.INTERACTING,"stroke-width":2,"stroke-dasharray":"- "},movePointsWithLine:!0,onMoveEnd:o})});var p=r.addReflectButton({fixed:e.constraints.fixed,line:t,size:this.scaleToCurrentRange(_),onClick:function(){n.doTransform({type:"reflection",line:g.pluck(a,"coord")}),c&&(c.setCoord(q.add(p.coord,q.subtract(p.coord,c.coord))),c.update())},normalStyle:{stroke:l,"stroke-width":2,fill:l},highlightStyle:{stroke:H.INTERACTING,"stroke-width":3,fill:H.INTERACTING},onMoveEnd:o}),c=null;if(!e.constraints.fixed){var u=q.polarDegFromCart(q.subtract(a[1].coord,a[0].coord))[1]+90;c=r.addRotateHandle({center:p,radius:this.scaleToCurrentRange(M),angleDeg:u,width:this.scaleToCurrentRange(.24),hoverWidth:this.scaleToCurrentRange(.4),lengthAngle:17,onMove:function(e){return W.roundToNearest(45,e)},onMoveEnd:o})}return $(t).on("move",function(){p.update(),$(p).trigger("move")}),c&&$(c).on("move",function(){var e=n.snapCoord(c.coord),r=q.subtract(e,p.coord),i=p.isFlipped()?1:0;a[i].setCoord(q.add(p.coord,q.rotateDeg(r,90))),a[1-i].setCoord(q.add(p.coord,q.rotateDeg(r,-90))),t.transform(!0),p.update()}),{remove:function(){p.remove(),c&&c.remove(),t.remove(),a[0].remove(),a[1].remove()}}}},scaleToCurrentRange:function(e){return o(e,this.refs.graph.props.range)},addRotationTool:function(){var e=this.props.tools.rotation;if(e.enabled){var t=this,n=this.refs.graph.graphie(),r=i(e);return this.rotatePoint=n.addMovablePoint({constraints:e.constraints,coord:e.coord,snapX:n.snap[0],snapY:n.snap[1],normalStyle:{"stroke-dasharray":"",stroke:r,fill:r},highlightStyle:{"stroke-dasharray":"",stroke:H.INTERACTING,fill:H.INTERACTING}}),this.rotateHandle=n.addRotateHandle({center:this.rotatePoint,radius:this.scaleToCurrentRange(N),width:this.scaleToCurrentRange(.24),hoverWidth:this.scaleToCurrentRange(.4),onMove:function(e,n){var r=t.getRotationTransformFromAngle(t.rotatePoint.coord,e-n);return t.doTransform(r),n+r.angleDeg}}),this.rotatePoint.onMoveEnd=function(e,n){t.changeTool("rotation",{coord:[e,n]})},{remove:function(){t.rotateHandle.remove(),t.rotatePoint.remove()}}}},addDilationTool:function(){var e=this.props.tools.dilation;if(e.enabled){var t=this,n=this.refs.graph.graphie(),r=i(e);t.dilationCircle=n.addCircleGraph({centerConstraints:e.constraints,center:e.coord,radius:t.scaleToCurrentRange(2),snapX:n.snap[0],snapY:n.snap[1],minRadius:t.scaleToCurrentRange(1),snapRadius:t.scaleToCurrentRange(.5),onResize:function(e,n){t.doTransform({type:"dilation",center:t.dilationCircle.centerPoint.coord,scale:e/n})},circleNormalStyle:{stroke:r,"stroke-width":2,"stroke-dasharray":"- ","fill-opacity":0},circleHighlightStyle:{stroke:H.INTERACTING,"stroke-width":2,"stroke-dasharray":"",fill:H.INTERACTING,"fill-opacity":.05},centerNormalStyle:{stroke:r,fill:r,"stroke-width":2,"stroke-dasharray":""},centerHighlightStyle:{stroke:r,fill:r,"stroke-width":2,"stroke-dasharray":""}});var o=this.dilationCircle.centerPoint.onMoveEnd;return this.dilationCircle.centerPoint.onMoveEnd=function(){o&&o.apply(this,g.toArray(arguments)),t.changeTool("dilation",{coord:t.dilationCircle.centerPoint.coord})},{remove:function(){t.dilationCircle.remove()}}}},getRotationTransformFromAngle:function(e,t){t=(t+360)%360,t>180&&(t-=360);var n=Math.round(t/P)*P;return{type:"rotation",center:e,angleDeg:n}},doTransform:function(e,t){this.applyTransform(e),this.addTransform(e,t)},applyTransform:function(e){if("static"!==this.props.graphMode){var t=J.apply(e);this.applyCoordTransformation(t)}},applyCoordTransformation:function(e){g.each(this.shape.points,function(t){var n=e(t.coord);t.setCoord(n)}),this.shape.update()},resetCoords:function(){var e=this.props.starting.shape.coords;g.each(this.shape.points,function(t,n){t.setCoord(e[n])}),this.shape.update()},handleUndoClick:function(){this.refs.toolsBar.changeSelected(null),this.props.transformations.length&&this.props.onChange({transformations:g.initial(this.props.transformations)})},setTransformationProps:function(e,t){this.props.onChange({transformations:e},t)},addTransform:function(e,t){this.transformations=J.append(this.transformations,e),this.props.onChange({transformations:g.clone(this.transformations)},t)},changeTool:function(e,t){var n=g.clone(this.props.tools);n[e]=g.extend({},this.props.tools[e],t),this.tools[e]=g.clone(n[e]),this.props.onChange({tools:n}),this.props.trackInteraction()},simpleValidate:function(e){return oe.validate(this.getUserInput(),e)},getCoords:function(){var e=this.props.starting.shape.coords,t=this.props.transformations;return g.reduce(t,function(e,t){return g.map(e,J.apply(t))},e)},getEditorJSON:function(){var e=g.pick(this.props,"grading","starting","graphMode","listMode","tools","drawSolutionShape","gradeEmpty");return e.graph=this.refs.graph.toJSON(),e.version=1.2,e.answer=this.getUserInput(),e},getUserInput:function(){return{transformations:this.props.transformations,shape:{type:this.shape.type,coords:this.getCoords(),options:this.shape.getOptions()}}},_handleFocus:function(){var e=Array.prototype.slice.call(arguments);this.props.onFocus(e)},_handleBlur:function(){var e=Array.prototype.slice.call(arguments);this.props.onBlur(e)},_getTransformationForID:function(e){var t=["transformationList","transformation"+e],n=this;return g.each(t,function(e){n=n.refs[e]}),n},getInputPaths:function(){var e=this;if("static"===this.props.listMode)return[];var t=[];return g.each(this.props.transformations,function(n,r){var n=e._getTransformationForID(r),i=n.getInputPaths(),o=g.map(i,function(e){return[""+r].concat(e)});t=t.concat(o)}),t},_passToInner:function(e,t){if(t&&t.length){var n=g.rest(t),r=[n].concat(g.rest(arguments,2)),i=g.head(t),o=this._getTransformationForID(i);return o[e].apply(o,r)}},focus:function(){var e=this.getInputPaths();return e.length>0&&(this.focusInputPath(e[0]),!0)},focusInputPath:function(e){return 0!==e.length&&(U(e.length>=2),this._passToInner("focusInputPath",e))},blurInputPath:function(e){return 0!==e.length&&(U(e.length>=2),this._passToInner("blurInputPath",e))},setInputValue:function(e,t,n){return U(e.length>=2),this._passToInner("setInputValue",e,t,n)},getDOMNodeForPath:function(e){return U(e.length>=2),this._passToInner("getDOMNodeForPath",e)},getGrammarTypeForPath:function(e){return U(e.length>=2),this._passToInner("getGrammarTypeForPath",e)}});g.extend(oe,{validate:function(e,t){for(var n in Q)if(t.tools[n].required){var r=g.any(g.map(e.transformations,function(e){return e.type===n&&!J.isEmpty(e)&&!J.isNoOp(e)}));if(!r)return{type:"invalid",message:i18n._("Your transformation must use a %(type)s.",{type:Q[n].lowerNounName})}}return Z.equal(e.shape,t.correct.shape)?{type:"points",earned:1,total:1,message:null}:!t.gradeEmpty&&R(e.shape.coords,t.starting.shape.coords)?{type:"invalid",message:i18n._("Use the interactive graph to define a correct transformation.")}:{type:"points",earned:0,total:1,message:null}}}),e.exports={name:"transformer",displayName:"Transformer",widget:oe}},function(e,t,n){"use strict";function r(e){return a.reduce(e,function(e,t){return e+t},0)}function i(e,t){var n=t[0][1]-t[0][0],r=t[1][1]-t[1][0];return e*Math.max(n,r)/20}function o(e,t){return e=a.clone(e).sort(y.compare),t=a.clone(t).sort(y.compare),a.all(a.map(e,function(e,n){var r=t[n];return y.equal(e,r)}))}var s=n(34),a=n(57),l=n(11).Options,p=n(201),c=n(198),u=n(89),h=n(45),d=n(147).widget,f=n(12).deepEq,m=n(12).getGridStep,g=n(221).line,v=n(221).number,y=n(221).point,b=n(221).ray,E=n(221).vector,T=n(197),x={url:null},w=function(e,t){e=e||{};var n=e.labels||["x","y"],r=e.range||[[-10,10],[-10,10]],i=e.step||[1,1],o=e.gridStep||m(r,i,t);return{box:[t,t],labels:n,range:r,step:i,gridStep:o,valid:!0,backgroundImage:x,markings:"grid",showProtractor:!1}},C={apiOptions:l.defaults,gradeEmpty:!1,graphMode:"interactive",listMode:"dynamic",graph:{},tools:{translation:{enabled:!0,required:!1,constraints:{}},rotation:{enabled:!0,required:!1,constraints:{fixed:!1},coord:[1,6]},reflection:{enabled:!0,required:!1,constraints:{fixed:!1},coords:[[2,-4],[2,2]]},dilation:{enabled:!0,required:!1,constraints:{fixed:!1},coord:[6,6]}},drawSolutionShape:!0,starting:{shape:{type:"polygon-3",coords:[[2,2],[2,6],[7,2]]},transformations:[]},correct:{shape:{type:"polygon-3",coords:[[2,2],[2,6],[7,2]]},transformations:[]}},P=s.createClass({displayName:"ToolSettings",getDefaultProps:function(){return{allowFixed:!0}},render:function(){return s.createElement("div",null,this.props.name,":"," "," ",s.createElement(h,{label:"enabled:",enabled:this.props.settings.enabled,onChange:this.props.onChange})," ",this.props.settings.enabled&&s.createElement(h,{label:"required:",required:this.props.settings.required,onChange:this.props.onChange}),this.props.settings.enabled&&s.createElement(u,null,"'Required' will only grade the answer as correct if the student has used at least one such transformation.")," ",this.props.allowFixed&&this.props.settings.enabled&&s.createElement(h,{label:"fixed:",fixed:this.props.settings.constraints.fixed,onChange:this.changeConstraints}),this.props.allowFixed&&this.props.settings.enabled&&s.createElement(u,null,"Enable 'fixed' to prevent the student from repositioning the tool. The tool will appear in the position at which it is placed in the editor below."))},changeConstraints:function(e){var t=a.extend({},this.props.constraints,e);this.props.onChange({constraints:t})}}),S=s.createClass({displayName:"TransformationExplorerSettings",render:function(){return s.createElement("div",{className:"transformer-settings"},s.createElement("div",null," ","Mode:"," ",s.createElement("select",{value:this.getMode(),onChange:this.changeMode},s.createElement("option",{value:"interactive,dynamic"}," ","Exploration with text"," "),s.createElement("option",{value:"interactive,static"}," ","Exploration without text"," "),s.createElement("option",{value:"dynamic,interactive"}," ","Formal with movement"," "),s.createElement("option",{value:"static,interactive"}," ","Formal without movement"," ")),s.createElement(u,null,s.createElement("ul",null,s.createElement("li",null,s.createElement("b",null,"Exploration:")," Students create transformations with tools on the graph."," "),s.createElement("li",null,s.createElement("b",null,"Formal with movement:")," Students specify transformations mathematically in the transformation list. Graph shows the results of these transformations."," "),s.createElement("li",null,s.createElement("b",null,"Formal without movement:")," Students specify transformations mathematically in the transformation list. Graph does not update."," ")))),s.createElement(P,{name:"Translations",settings:this.props.tools.translation,allowFixed:!1,onChange:this.changeHandlerFor("translation")}),s.createElement(P,{name:"Rotations",settings:this.props.tools.rotation,onChange:this.changeHandlerFor("rotation")}),s.createElement(P,{name:"Reflections",settings:this.props.tools.reflection,onChange:this.changeHandlerFor("reflection")}),s.createElement(P,{name:"Dilations",settings:this.props.tools.dilation,onChange:this.changeHandlerFor("dilation")}),s.createElement(h,{label:"Draw Solution:",drawSolutionShape:this.props.drawSolutionShape,onChange:this.props.onChange}))},getMode:function(){return this.props.graphMode+","+this.props.listMode},changeMode:function(e){var t=e.target.value,n=t.split(",");this.props.onChange({graphMode:n[0],listMode:n[1]})},changeHandlerFor:function(e){var t=this;return function(n){var r=a.clone(t.props.tools);r[e]=a.extend({},t.props.tools[e],n),t.props.onChange({tools:r})}}}),k={getPointCountForType:function(e){var t=e.split("-");return"polygon"===t[0]?t[1]||3:"line"===t[0]||"lineSegment"===t[0]?2:"angle"===t[0]?3:"circle"===t[0]?2:"point"===t[0]?1:void 0},addMovableShape:function(e,t){if(t.editable&&t.translatable)throw new Error("It doesn't make sense to have a movable shape where you can stretch the points and translate them simultaneously. options: "+JSON.stringify(t));var n,r=a.map(t.shape.coords,function(i){var o,s=!1,l=i,p=function(e,i){s||(l=o.coord,s=!0);var p=E.subtract([e,i],o.coord);t.onMove&&(p=t.onMove(p[0],p[1])),t.translatable&&a.each(r,function(e){e!==o&&e.setCoord(E.add(e.coord,p))});var c=o.coord,u=E.add(o.coord,p);return o.coord=u,n.update(),o.coord=c,u},c=function(){if(t.onMoveEnd&&s){s=!1;var e=E.subtract(o.coord,l);t.onMoveEnd(e[0],e[1])}n.update()};return o=e.addMovablePoint({coord:i,normalStyle:t.normalPointStyle,highlightStyle:t.highlightPointStyle,constraints:{fixed:!t.translatable&&!t.editable},visible:t.showPoints,snapX:t.snap&&t.snap[0]||0,snapY:t.snap&&t.snap[1]||0,bounded:!1,onMove:p,onMoveEnd:c}),o.bounded=!0,o});n=k.addShape(e,t,r);var i=n.remove;return n.remove=function(){i.apply(n),a.invoke(r,"remove")},n},addShape:function(e,t,n){n=n||t.shape.coords;var r=k._typesOf(t.shape),i=t.shape.options||k.defaultOptions(r),o=k._mapTypes(r,n,function(n,r,o){var s=a.extend({},t,i[o]);return k._addType(e,n,r,s)}),s=a.filter(a.pluck(o,"update"),a.identity),l=function(){a.invoke(s,"call")},p=a.filter(a.pluck(o,"remove"),a.identity),c=function(){a.invoke(p,"call")},u=function(){return a.map(o,function(e){return e.getOptions?e.getOptions():{}})},h=function(){var e=a.map(n,function(e){return a.isArray(e)?e:e.coord});return{type:r,coords:e,options:u()}};return{type:r,points:n,update:l,remove:c,toJSON:h,getOptions:u}},equal:function(e,t){var n=k._typesOf(e),r=k._typesOf(t);if(n.length!==r.length)return!1;var i=k._mapTypes(n,e.coords,k._combine),o=k._mapTypes(r,t.coords,k._combine);return a.all(a.map(i,function(e,t){var n=o[t];return e.type===n.type&&k._forType(e.type).equal(e.coords,n.coords)}))},_typesOf:function(e){var t=e.type;return a.isArray(t)||(t=[t]),a.map(t,function(e){return"polygon"===e?"polygon-3":e})},defaultOptions:function(e){return a.map(e,function(e){var t=k._forType(e).defaultOptions;return a.extend({},t)})},_forType:function(e){var t=e.split("-")[0];return k[t]},_mapTypes:function(e,t,n,r){return a.map(e,function(e,i){var o=k.getPointCountForType(e),s=a.first(t,o);return t=a.rest(t,o),n.call(r,e,s,i)})},_addType:function(e,t,n,r){var i=a.isArray(n[0])?{coordA:n[0],coordZ:n[1]}:{pointA:n[0],pointZ:n[1]};if(t=t.split("-")[0],"polygon"===t){var o=e.addMovablePolygon(a.extend({},r,{fixed:!r.editable,snapX:r.snap&&r.snap[0]||0,snapY:r.snap&&r.snap[1]||0,points:n,constrainToGraph:!1}));return{update:o.transform.bind(o),remove:o.remove.bind(o)}}if("line"===t||"lineSegment"===t){var s=e.addMovableLineSegment(a.extend({},r,i,{movePointsWithLine:!0,fixed:!0,constraints:{fixed:!0},extendLine:"line"===t}));return{update:s.transform.bind(s,!0),remove:s.remove.bind(s)}}if("angle"===t){var l=!!r.editable&&null,p=e.addMovableAngle({angleLabel:"$deg0",fixed:!0,points:n,normalStyle:r.normalStyle,reflex:r.reflex});return a.isArray(n[0])||r.editable||(n[0].remove(),n[2].remove()),{update:p.update.bind(p,l),remove:p.remove.bind(p),getOptions:function(){return{reflex:p.isReflex()}}}}if("circle"===t){var c={remove:a.identity},u=function(){var t=n[0].coord||n[0],i=n[1].coord||n[1],o=y.distanceToPoint(t,i);c.remove(),c=e.circle(t,o,a.extend({stroke:T.DYNAMIC,"stroke-width":2},r.normalStyle))};return u(),n[1].remove&&!r.editable&&n[1].remove(),{update:u,remove:function(){c.remove()}}}if("point"===t)return{update:null,remove:null};throw new Error("Invalid shape type "+t)},_combine:function(e,t){return{type:e,coords:t}},polygon:{equal:o},line:{equal:g.equal},lineSegment:{equal:o},angle:{equal:function(e,t){if(!y.equal(e[1],t[1]))return!1;var n=[e[1],e[0]],r=[e[1],e[2]],i=[t[1],t[0]],o=[t[1],t[2]],s=b.equal(n,i)&&b.equal(r,o),a=b.equal(n,o)&&b.equal(r,i);return s||a},defaultOptions:{reflex:!1}},circle:{equal:function(e,t){var n=y.distanceToPoint(e[0],e[1]),r=y.distanceToPoint(t[0],t[1]);return y.equal(e[0],t[0])&&v.equal(n,r)}},point:{equal:y.equal}},N=s.createClass({displayName:"TransformationsShapeEditor",
render:function(){return s.createElement("div",null,s.createElement(p,{ref:"graph",box:this.props.graph.box,range:this.props.graph.range,labels:this.props.graph.labels,step:this.props.graph.step,gridStep:this.props.graph.gridStep,markings:this.props.graph.markings,backgroundImage:this.props.graph.backgroundImage,onGraphieUpdated:this.setupGraphie}),s.createElement("select",{key:"type-select",value:this.getTypeString(this.props.shape.type),onChange:this.changeType},s.createElement("option",{value:"polygon-3"},"Triangle"),s.createElement("option",{value:"polygon-4"},"Quadrilateral"),s.createElement("option",{value:"polygon-5"},"Pentagon"),s.createElement("option",{value:"polygon-6"},"Hexagon"),s.createElement("option",{value:"line"},"Line"),s.createElement("option",{value:"line,line"},"2 lines"),s.createElement("option",{value:"lineSegment"},"Line segment"),s.createElement("option",{value:"lineSegment,lineSegment"}," ","2 line segments"," "),s.createElement("option",{value:"angle"},"Angle"),s.createElement("option",{value:"circle"},"Circle")))},getTypeString:function(e){return a.isArray(e)?a.map(e,this.getTypeString).join(","):"polygon"===e?"polygon-"+this.props.shape.coords.length:e},changeType:function(e){var t=String(e.target.value).split(","),n=r(a.map(t,k.getPointCountForType)),o=i(4,this.refs.graph.props.range),s=180*(.5-1/n),l=a.times(n,function(e){return y.rotateDeg([o,0],360*e/n+s)});this.props.onChange({shape:{type:t,coords:l,options:k.defaultOptions(t)}})},componentDidMount:function(){this.setupGraphie(this.refs.graph.graphie())},componentDidUpdate:function(e){f(e.shape,this.props.shape)||this.refs.graph.reset()},updateCoords:function(){this.props.onChange({shape:this.shape.toJSON()})},setupGraphie:function(e){this.shape=k.addMovableShape(e,{editable:!0,snap:e.snap,shape:this.props.shape,onMoveEnd:this.updateCoords})}}),M=s.createClass({displayName:"TransformerEditor",getDefaultProps:function(){return C},render:function(){var e=a.extend(w(this.props.graph,340),this.props.graph);return s.createElement("div",null,s.createElement("div",null,s.createElement(h,{label:"Grade empty answers as wrong:",gradeEmpty:this.props.gradeEmpty,onChange:this.props.onChange}),s.createElement(u,null,s.createElement("p",null,"We generally do not grade empty answers. This usually works well, but sometimes can result in giving away part of an answer in a multi-part question."),s.createElement("p",null,"If this is a multi-part question (there is another widget), you probably want to enable this option. Otherwise, you should leave it disabled."),s.createElement("p",null,"Confused? Talk to Elizabeth."))),s.createElement("div",null,"Graph settings:"),s.createElement(c,{box:e.box,labels:e.labels,range:e.range,step:e.step,gridStep:e.gridStep,valid:e.valid,backgroundImage:e.backgroundImage,markings:e.markings,showProtractor:e.showProtractor,onChange:this.changeGraph}),s.createElement("div",null,"Transformation settings:"),s.createElement(S,{ref:"transformationSettings",graphMode:this.props.graphMode,listMode:this.props.listMode,tools:this.props.tools,drawSolutionShape:this.props.drawSolutionShape,onChange:this.props.onChange}),s.createElement("div",null,"Starting location:"),s.createElement(N,{ref:"shapeEditor",graph:e,shape:this.props.starting.shape,onChange:this.changeStarting,setDrawingAreaAvailable:this.props.apiOptions.setDrawingAreaAvailable}),s.createElement("div",null,"Solution transformations:"),s.createElement(d,{ref:"explorer",graph:e,graphMode:this.props.graphMode,listMode:this.props.listMode,gradeEmpty:this.props.gradeEmpty,tools:this.props.tools,drawSolutionShape:this.props.drawSolutionShape,starting:this.props.starting,correct:this.props.starting,transformations:this.props.correct.transformations,onChange:this.changeTransformer,trackInteraction:function(){}}))},changeGraph:function(e,t){var n=a.extend({},this.props.graph,e);this.props.onChange({graph:n},t)},changeStarting:function(e){var t=a.extend({},this.props.starting,e);this.props.onChange({starting:t})},changeTransformer:function(e,t){e.transformations&&(e.correct={transformations:e.transformations},delete e.transformations),this.props.onChange(e,t)},serialize:function(){var e=this.refs.explorer.getEditorJSON();return e.correct=e.answer,delete e.answer,e}});e.exports=M},function(e,t,n){"use strict";var r=n(193),i=n(34),o=n(35),s=n(57),a=n(11).ClassNames,l=n(11).Options,p=n(172),c=n(202),u=n(204),h=u.SignificantFigures,d=u.displaySigFigs,f="all",m=10,g=function(e){return new h(e).sigFigs},v=function(e,t){return d(e,t,-m,!1)},y=i.createClass({displayName:"OldUnitInput",mixins:[p],propTypes:{value:i.PropTypes.string},getDefaultProps:function(){return{apiOptions:l.defaults,value:""}},render:function(){var e=this.props.apiOptions.staticRender?i.createFactory(c):i.DOM.input,t=e({onChange:this.handleChange,ref:"input",className:a.INTERACTIVE,value:this.props.value,onFocus:this.handleFocus,onBlur:this.handleBlur});return i.createElement("div",{className:"old-unit-input"},t,i.createElement("div",{ref:"error",className:"error",style:{display:"none"}},i18n._("I don't understand that")))},_errorTimeout:null,_showError:function(){if(""!==this.props.value){var e=$(o.findDOMNode(this.refs.error));e.is(":visible")||e.css({top:50,opacity:.1}).show().animate({top:0,opacity:1},300)}},_hideError:function(){var e=$(o.findDOMNode(this.refs.error));e.is(":visible")&&e.animate({top:50,opacity:.1},300,function(){$(this).hide()})},componentDidUpdate:function(){clearTimeout(this._errorTimeout),KAS.unitParse(this.props.value).parsed?this._hideError():this._errorTimeout=setTimeout(this._showError,2e3)},componentWillUnmount:function(){clearTimeout(this._errorTimeout)},handleBlur:function(){this.props.onBlur([]),clearTimeout(this._errorTimeout),KAS.unitParse(this.props.value).parsed||this._showError()},handleChange:function(e){this._hideError(),this.props.onChange({value:e.target.value})},simpleValidate:function(e,t){return t=t||function(){},y.validate(this.getUserInput(),e)},getUserInput:function(){return this.props.value},getInputPaths:function(){return[[]]},focusInputPath:function(e){o.findDOMNode(this.refs.input).focus()},handleFocus:function(){this.props.onFocus([])},blurInputPath:function(e){o.findDOMNode(this.refs.input).blur()},setInputValue:function(e,t,n){this.props.onChange({value:t},n)},getDOMNodeForPath:function(){return o.findDOMNode(this.refs.input)},getGrammarTypeForPath:function(e){return"unit"}}),b=function(e){return e.simplify().asMul().partition()[1].flatten().simplify()};s.extend(y,{validate:function(e,t){var n=KAS.unitParse(t.value).expr,r=KAS.unitParse(e);if(!r.parsed)return{type:"invalid",message:i18n._("I couldn't understand those units.")};var i=null,o=t.sigfigs,a=g(r.coefficient)===o;a||(i=i18n._("Check your significant figures."));var l;try{var p=new KAS.Var("x"),c=new KAS.Eq(n.simplify(),"=",new KAS.Mul(p,r.expr.simplify())),u=c.solveLinearEquationForVariable(p);l=Number(u.eval()).toPrecision(o)===Number(1).toPrecision(o)}catch(e){l=!1}l||(i=i18n._("That answer is numerically incorrect."));var h,d=b(r.expr.simplify()),m=b(n.simplify());if(h=t.accepting===f?KAS.compare(d,m).equal:s(t.acceptingUnits).any(function(e){var t=b(KAS.unitParse(e).unit.simplify());return KAS.compare(t,d).equal}),!h)var i=i18n._("Check your units.");var v=h&&l&&a;return{type:"points",earned:v?1:0,total:1,message:i}}}),e.exports={name:"unit-input",displayName:"Unit",defaultAlignment:"inline-block",widget:y,transform:function(e){return r(e).del(["value"]).freeze()},version:{major:0,minor:1},countSigfigs:g,sigfigPrint:v,hidden:!0}},function(e,t,n){"use strict";var r=n(34),i=n(57),o=n(172),s=n(173),a=n(42),l=n(175),p=n(41),c=p.iconOk,u=p.iconRemove,h=n(204),d=h.displaySigFigs,f="all",m="some",g=10,v=function(e,t){return d(e,t,-g,!1)},y=function(e){return e.simplify().asMul().partition()[1].flatten().simplify()},b=r.createClass({displayName:"UnitExample",render:function(){var e;return e=this.state.valid?r.createElement("span",null,r.createElement("span",{className:"unit-example-okay"},r.createElement(a,c)),this.state.solvedExample):r.createElement("span",{className:"unit-example-not-okay"},r.createElement(a,u)),r.createElement("div",null,e," ",this.props.name)},componentWillReceiveProps:function(e){this._checkValidity(e)},componentWillMount:function(){this._checkValidity(this.props)},_checkValidity:function(e){var t=e.name,n=e.original,r=e.sigfigs,i=KAS.unitParse(t),o="",s=!0;if(i.parsed&&n){var a=new KAS.Var("x"),l=i.unit,p=new KAS.Eq(n,"=",new KAS.Mul(a,l));try{var c=p.solveLinearEquationForVariable(a);o=v(c.eval(),r),s=KAS.compare(y(n),y(l)).equal}catch(e){s=!1}}else s=!1;this.setState({valid:s,solvedExample:o})}}),E=r.createClass({displayName:"UnitInputEditor",mixins:[o,s],propTypes:{value:r.PropTypes.string,acceptingUnits:r.PropTypes.arrayOf(r.PropTypes.string),accepting:r.PropTypes.oneOf([f,m]),sigfigs:r.PropTypes.number},getDefaultProps:function(){return{value:"5x10^5 kg m / s^2",accepting:f,sigfigs:3}},render:function(){var e=this,t=this.props,n=t.acceptingUnits,i=t.accepting;n=n||[];var o=null;if(i===m){var s=n.map(function(t,n){return r.createElement(b,{name:t,original:e.original||null,sigfigs:e.props.sigfigs,key:n})});o=r.createElement("div",null,r.createElement("input",{type:"text",defaultValue:n.join(", "),onChange:this.handleAcceptingUnitsChange})," ","(comma-separated)",s)}return r.createElement("div",{className:"unit-editor"},r.createElement("div",null,r.createElement("input",{value:this.props.value,className:"unit-editor-canonical",onBlur:this._handleBlur,onKeyPress:this._handleBlur,onChange:this.onChange})," ",this.parsed?r.createElement("span",{className:"unit-example-okay"},r.createElement(a,c)):r.createElement("span",{className:"unit-example-not-okay"},r.createElement(a,u))),r.createElement("div",null,"Significant Figures:"," ",r.createElement(l,{value:this.props.sigfigs,onChange:this.handleSigfigChange,checkValidity:this._checkSigfigValidity,useArrowKeys:!0})),r.createElement("div",null,r.createElement("label",null,r.createElement("input",{type:"radio",name:this.groupId,onChange:function(){return e._setAccepting(f)},checked:this.props.accepting===f})," Any equivalent unit "),r.createElement("label",null,r.createElement("input",{type:"radio",name:this.groupId,onChange:function(){return e._setAccepting(m)},checked:this.props.accepting===m})," Only these units ")),o)},handleAcceptingUnitsChange:function(e){var t=e.target.value.split(",").map(function(e){return e.trim()}).filter(function(e){return""!==e});this.change({acceptingUnits:t})},handleSigfigChange:function(e){this.change({sigfigs:e})},_checkSigfigValidity:function(e){return e>0&&e<=g},_setAccepting:function(e){this.change({accepting:e})},componentWillMount:function(){this.groupId=i.uniqueId("accepting"),this._doOriginal(this.props)},componentWillReceiveProps:function(e){this._doOriginal(e)},_doOriginal:function(e){var t=KAS.unitParse(e.value);this.parsed=!1,t.parsed&&"unitMagnitude"===t.type&&(this.original=t.expr,this.parsed=!0)},onChange:function(e){this.props.onChange({value:e.target.value})},getSaveWarnings:function(){var e=this.props,t=e.value,n=e.accepting,r=e.acceptingUnits,i=[],o=KAS.unitParse(t);return o.parsed||i.push("Answer did not parse"),n===m&&0===r.length&&i.push("There are no accepted units"),i}});e.exports=E},function(e,t,n){"use strict";var r=n(34),i=n(57),o=n(172),s=n(85),a=1280,l=720,p="https://{hostname}/embed_video?slug={slug}&internal_video_only=1",c=/^https?:\/\//,u=/khanacademy\.org/,h=r.createClass({displayName:"Video",propTypes:{alignment:r.PropTypes.string,location:r.PropTypes.string},mixins:[o],getUserInput:function(){return null},simpleValidate:function(e){return h.validate(null,e)},render:function(){var e=this.props.location;if(!e)return r.createElement("div",null);var t;if(c.test(e))t=e;else{t=p.replace("{slug}",e);var n=document.location.hostname,i="www.khanacademy.org";u.test(n)&&(i=n),t=t.replace("{hostname}",i)}return r.createElement(s,{width:a,height:l,key:e+this.props.alignment},r.createElement("iframe",{className:"perseus-video-widget",sandbox:"allow-same-origin allow-scripts",width:a,height:l,src:t,allowFullScreen:!0}))}});i.extend(h,{validate:function(e,t){return{type:"points",earned:0,total:0,message:null}}}),e.exports={name:"video",displayName:"Video",defaultAlignment:"block",supportedAlignments:["block","float-left","float-right","full-width"],widget:h}},function(e,t,n){"use strict";function r(e){var t=p.exec(e);return t?t[1]:e}var i=n(34),o=(n(57),n(172)),s=n(173),a=n(89),l=n(171),p=/khanacademy\.org\/.*\/v\/(.*)$/,c=i.createClass({displayName:"VideoEditor",propTypes:{location:i.PropTypes.string,onChange:i.PropTypes.func},mixins:[o,s],getDefaultProps:function(){return{location:""}},_handleUrlChange:function(e){this.props.onChange({location:r(e)})},render:function(){return i.createElement("div",null,i.createElement("label",null,"URL or KA Video Slug:"," ",i.createElement(l,{name:"location",value:this.props.location,style:{width:290},onChange:this._handleUrlChange}),i.createElement(a,null,"You can paste any URL here. KA video URLs will be converted to just the slug.")))}});e.exports=c},function(e,t,n){"use strict";var r=n(34),i=n(57),o=n(11).Options,s=n(12),a=n(172),l=n(194),p=n(86),c=p.MovablePoint,u=(n(221).number,n(221).point),h=r.createClass({displayName:"ExampleGraphieWidget",mixins:[a,l],propTypes:{apiOptions:o.propTypes,graph:r.PropTypes.object.isRequired,coord:r.PropTypes.arrayOf(r.PropTypes.number)},getDefaultProps:function(){return{coord:null,graph:{box:[400,400],labels:["x","y"],range:[[-10,10],[-10,10]],step:[1,1],gridStep:[1,1],valid:!0,backgroundImage:null,markings:"grid",showProtractor:!1}}},render:function(){return r.createElement(p,{ref:"graphie",box:this.props.graph.box,range:this.props.graph.range,options:this.props.graph,setup:this.setupGraphie,setDrawingAreaAvailable:this.props.apiOptions.setDrawingAreaAvailable},r.createElement(c,{pointSize:5,coord:this.props.coord||[0,0],constraints:[c.constraints.snap(),c.constraints.bound()],onMove:this.movePoint}))},movePoint:function(e){this.change({coord:e})},_getGridConfig:function(e){return i.map(e.step,function(t,n){return s.gridDimensionConfig(t,e.range[n],e.box[n],e.gridStep[n])})},setupGraphie:function(e,t){var n=this._getGridConfig(t);e.graphInit({range:t.range,scale:i.pluck(n,"scale"),axisArrows:"<->",labelFormat:function(e){return"\\small{"+e+"}"},gridStep:t.gridStep,tickStep:i.pluck(n,"tickStep"),labelStep:1,unityLabels:i.pluck(n,"unityLabel")}),e.label([0,t.range[1][1]],t.labels[1],"above")},simpleValidate:function(e){return h.validate(this.getUserInput(),e)}});i.extend(h,{validate:function(e,t){return null==e.coord?{type:"invalid",message:null}:u.equal(e.coord,t.correct)?{type:"points",earned:1,total:1,message:null}:{type:"points",earned:0,total:1,message:null}}}),e.exports={name:"example-graphie-widget",displayName:"Example Graphie Widget",hidden:!0,widget:h}},function(e,t,n){"use strict";var r=n(34),i=n(172),o=n(173),s=n(153).widget,a=r.createClass({displayName:"ExampleGraphieWidgetEditor",mixins:[i,o],getDefaultProps:function(){return{correct:[4,4],graph:{box:[340,340],labels:["x","y"],range:[[-10,10],[-10,10]],step:[1,1],gridStep:[1,1],valid:!0,backgroundImage:null,markings:"grid",showProtractor:!1}}},render:function(){return r.createElement("div",null,r.createElement(s,{graph:this.props.graph,coord:this.props.correct,onChange:this.handleChange,apiOptions:this.props.apiOptions}))},handleChange:function(e){e.coord&&this.change({correct:e.coord})}});e.exports=a},function(e,t,n){"use strict";var r=n(34),i=n(172),o=n(57),s=r.createClass({displayName:"TextInput",render:function(){return r.createElement("input",{ref:"input",value:this.props.value||"",onChange:this.changeValue})},focus:function(){return this.refs.input.focus(),!0},changeValue:function(e){this.props.onChange(e.target.value)}}),a=r.createClass({displayName:"ExampleWidget",propTypes:{value:r.PropTypes.string},getDefaultProps:function(){return{value:""}},mixins:[i],render:function(){return r.createElement(s,{ref:"input",value:this.props.value,onChange:this.change("value")})},getUserInput:function(){return this.props.value},focus:function(){return this.refs.input.focus(),!0},simpleValidate:function(e){return a.validate(this.getUserInput(),e)}});o.extend(a,{validate:function(e,t){return""===e?{type:"invalid",message:"It looks like you haven't answered all of the question yet."}:e===t.correct?{type:"points",earned:1,total:1,message:null}:{type:"points",earned:0,total:1,message:null}}}),e.exports={name:"example-widget",displayName:"Example Widget",defaultAlignment:"inline-block",hidden:!0,widget:a}},function(e,t,n){"use strict";var r=n(34),i=n(172),o=n(173),s=r.createClass({displayName:"ExampleWidgetEditor",mixins:[i,o],getDefaultProps:function(){return{correct:""}},handleAnswerChange:function(e){this.change({correct:e.target.value})},render:function(){return r.createElement("div",null,r.createElement("label",null,"Correct answer:",r.createElement("input",{value:this.props.correct,onChange:this.handleAnswerChange,ref:"input"})))},focus:function(){return this.refs.input.focus(),!0}});e.exports=s},function(e,t,n){"use strict";var r=n(34),i=n(57),o=n(172),s=n(40),a=s.parse,l=s.basicOutput,p=r.createClass({displayName:"SimpleMarkdownTester",propTypes:{value:r.PropTypes.string},getDefaultProps:function(){return{value:""}},mixins:[o],toJSON:function(){return{}},render:function(){var e=a(this.props.value),t=l(e);return r.createElement("div",null,t)},focus:function(){return this.refs.input.focus(),!0},simpleValidate:function(e){return p.validate(this.toJSON(),e)}});i.extend(p,{validate:function(e,t){return{type:"points",earned:0,total:0,message:null}}}),e.exports={name:"simple-markdown-tester",displayName:"Simple Markdown Tester",hidden:!0,widget:p,transform:i.identity}},function(e,t,n){"use strict";var r=n(34),i=n(172),o=n(173),s=r.createClass({displayName:"TextArea",render:function(){return r.createElement("textarea",{ref:"input",value:this.props.value||"",onChange:this.changeValue})},focus:function(){return this.refs.input.focus(),!0},changeValue:function(e){this.props.onChange(e.target.value)}}),a=r.createClass({displayName:"SimpleMarkdownTesterEditor",mixins:[i,o],getDefaultProps:function(){return{value:""}},render:function(){return r.createElement("div",null,r.createElement("label",null,r.createElement("div",null,"Simple markdown contents:"),r.createElement("div",null,r.createElement(s,{value:this.props.value,onChange:this.change("value"),ref:"input"}))))},focus:function(){return this.refs.input.focus(),!0}});e.exports=a},function(e,t,n){"use strict";var r=n(78),i=r.interactiveSizes,o=n(34),s=512,a=688,l={SMALL:"small",MEDIUM:"medium",LARGE:"large",XLARGE:"xlarge"};e.exports={containerSizeClass:l,containerSizeClassPropType:o.PropTypes.oneOf(Object.values(l)),getClassFromWidth:function(e){return e?e<=s?l.SMALL:e<=a?l.MEDIUM:l.LARGE:l.MEDIUM},getInteractiveBoxFromSizeClass:function(e){return e===l.SMALL?[i.defaultBoxSizeSmall,i.defaultBoxSizeSmall]:[i.defaultBoxSize,i.defaultBoxSize]}}},function(e,t,n){"use strict";var r={Keypad:n(217),KeypadInput:n(219)},i=n(205),o=i.KeypadTypes,s={KeypadTypes:o},a=n(218),l=a.keypadConfigurationPropType,p=a.keypadElementPropType,c={keypadConfigurationPropType:l,keypadElementPropType:p};e.exports={components:r,consts:s,propTypes:c}},function(e,t,n){var r=function(){function e(e){return{newPos:e.newPos,components:e.components.slice(0)}}function t(e){for(var t=[],n=0;n<e.length;n++)e[n]&&t.push(e[n]);return t}function n(e){var t=e;return t=t.replace(/&/g,"&amp;"),t=t.replace(/</g,"&lt;"),t=t.replace(/>/g,"&gt;"),t=t.replace(/"/g,"&quot;")}var r=function(e){this.ignoreWhitespace=e};r.prototype={diff:function(t,n){if(n===t)return[{value:n}];if(!n)return[{value:t,removed:!0}];if(!t)return[{value:n,added:!0}];n=this.tokenize(n),t=this.tokenize(t);var r=n.length,i=t.length,o=r+i,s=[{newPos:-1,components:[]}],a=this.extractCommon(s[0],n,t,0);if(s[0].newPos+1>=r&&a+1>=i)return s[0].components;for(var l=1;l<=o;l++)for(var p=-1*l;p<=l;p+=2){var c,u=s[p-1],h=s[p+1];a=(h?h.newPos:0)-p,u&&(s[p-1]=void 0);var d=u&&u.newPos+1<r,f=h&&0<=a&&a<i;if(d||f){!d||f&&u.newPos<h.newPos?(c=e(h),this.pushComponent(c.components,t[a],void 0,!0)):(c=e(u),c.newPos++,this.pushComponent(c.components,n[c.newPos],!0,void 0));var a=this.extractCommon(c,n,t,p);if(c.newPos+1>=r&&a+1>=i)return c.components;s[p]=c}else s[p]=void 0}},pushComponent:function(e,t,n,r){var i=e[e.length-1];i&&i.added===n&&i.removed===r?e[e.length-1]={value:this.join(i.value,t),added:n,removed:r}:e.push({value:t,added:n,removed:r})},extractCommon:function(e,t,n,r){for(var i=t.length,o=n.length,s=e.newPos,a=s-r;s+1<i&&a+1<o&&this.equals(t[s+1],n[a+1]);)s++,a++,this.pushComponent(e.components,t[s],void 0,void 0);return e.newPos=s,a},equals:function(e,t){var n=/\S/;return!(!this.ignoreWhitespace||n.test(e)||n.test(t))||e===t},join:function(e,t){return e+t},tokenize:function(e){return e}};var i=new r,o=new r((!0)),s=new r;o.tokenize=s.tokenize=function(e){return t(e.split(/(\s+|\b)/))};var a=new r((!0));a.tokenize=function(e){return t(e.split(/([{}:;,]|\s+)/))};var l=new r;return l.tokenize=function(e){for(var t=[],n=e.split(/^/m),r=0;r<n.length;r++){var i=n[r],o=n[r-1];"\n"==i&&o&&"\r"===o[o.length-1]?t[t.length-1]+="\n":i&&t.push(i)}return t},{Diff:r,diffChars:function(e,t){return i.diff(e,t)},diffWords:function(e,t){return o.diff(e,t)},diffWordsWithSpace:function(e,t){return s.diff(e,t)},diffLines:function(e,t){return l.diff(e,t)},diffCss:function(e,t){return a.diff(e,t)},createPatch:function(e,t,n,r,i){function o(e){return e.map(function(e){return" "+e})}function s(e,t,n){var r=p[p.length-2],i=t===p.length-2,o=t===p.length-3&&(n.added!==r.added||n.removed!==r.removed);/\n$/.test(n.value)||!i&&!o||e.push("\\ No newline at end of file")}var a=[];a.push("Index: "+e),a.push("==================================================================="),a.push("--- "+e+("undefined"==typeof r?"":"\t"+r)),a.push("+++ "+e+("undefined"==typeof i?"":"\t"+i));var p=l.diff(t,n);p[p.length-1].value||p.pop(),p.push({value:"",lines:[]});for(var c=0,u=0,h=[],d=1,f=1,m=0;m<p.length;m++){var g=p[m],v=g.lines||g.value.replace(/\n$/,"").split("\n");if(g.lines=v,g.added||g.removed){if(!c){var y=p[m-1];c=d,u=f,y&&(h=o(y.lines.slice(-4)),c-=h.length,u-=h.length)}h.push.apply(h,v.map(function(e){return(g.added?"+":"-")+e})),s(h,m,g),g.added?f+=v.length:d+=v.length}else{if(c)if(v.length<=8&&m<p.length-2)h.push.apply(h,o(v));else{var b=Math.min(v.length,4);a.push("@@ -"+c+","+(d-c+b)+" +"+u+","+(f-u+b)+" @@"),a.push.apply(a,h),a.push.apply(a,o(v.slice(0,b))),v.length<=4&&s(a,m,g),c=0,u=0,h=[]}d+=v.length,f+=v.length}}return a.join("\n")+"\n"},applyPatch:function(e,t){for(var n=t.split("\n"),r=[],i=!1,o=!1,s="I"===n[0][0]?4:0;s<n.length;s++)if("@"===n[s][0]){var a=n[s].split(/@@ -(\d+),(\d+) \+(\d+),(\d+) @@/);r.unshift({start:a[3],oldlength:a[2],oldlines:[],newlength:a[4],newlines:[]})}else"+"===n[s][0]?r[0].newlines.push(n[s].substr(1)):"-"===n[s][0]?r[0].oldlines.push(n[s].substr(1)):" "===n[s][0]?(r[0].newlines.push(n[s].substr(1)),r[0].oldlines.push(n[s].substr(1))):"\\"===n[s][0]&&("+"===n[s-1][0]?i=!0:"-"===n[s-1][0]&&(o=!0));for(var l=e.split("\n"),s=r.length-1;s>=0;s--){for(var p=r[s],c=0;c<p.oldlength;c++)if(l[p.start-1+c]!==p.oldlines[c])return!1;Array.prototype.splice.apply(l,[p.start-1,+p.oldlength].concat(p.newlines))}if(i)for(;!l[l.length-1];)l.pop();else o&&l.push("");return l.join("\n")},convertChangesToXML:function(e){for(var t=[],r=0;r<e.length;r++){var i=e[r];i.added?t.push("<ins>"):i.removed&&t.push("<del>"),t.push(n(i.value)),i.added?t.push("</ins>"):i.removed&&t.push("</del>")}return t.join("")},convertChangesToDMP:function(e){for(var t,n=[],r=0;r<e.length;r++)t=e[r],n.push([t.added?1:t.removed?-1:0,t.value]);return n}}}();e.exports=r},function(e,t,n){"use strict";var r=n(57),i=function(e){var t=[],n=[];return r.each(e,function(e){var i=e.value.split("\n");r.each(i,function(i,o){var s=o>0;s&&(t.push(n),n=[]);var a=r.extend({},e,{value:i});n.push(a)})}),n.length&&t.push(n),t};e.exports=i},function(e,t,n){"use strict";var r=n(161),i=n(57),o=function(e){return e.added?"added":e.removed?"removed":"unchanged"},s=function(e){return i.map(e.value,function(t){return{value:t,status:o(e)}})},a=function(e,t){return i.flatten(i.map(e,t),!0)},l=new r.Diff;l.tokenize=function(e){return i.map(e,function(e){return[e]})},l.join=function(e,t){return e.concat(t)},l.equals=i.isEqual;var p=function(e){return a(e,s)},c=function(e,t){var n=l.diff(e,t),r=p(n);return{before:i.filter(r,function(e){return"added"!==e.status}),after:i.filter(r,function(e){return"removed"!==e.status})}};e.exports=c},function(e,t,n){"use strict";var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol?"symbol":typeof e},i=n(57),o="unchanged",s="changed",a="added",l="removed",p=function(e,t,n){var r;return r=e===t?o:void 0===e?a:void 0===t?l:s,{after:JSON.stringify(t),before:JSON.stringify(e),children:[],key:n,status:r}},c=function(e,t,n){var r,p=i.isObject(e)?i(e).keys():[],c=i.isObject(t)?i(t).keys():[],h=i.union(p,c),d=i.map(h,function(n){return u((e||{})[n],(t||{})[n],n)});if(void 0===e)r=a;else if(void 0===t)r=l;else{var f=i.any(d,function(e){return e.status!==o});r=f?s:o}return{after:"",before:"",children:d,key:n,status:r}},u=function(e,t,n){return"object"===("undefined"==typeof e?"undefined":r(e))||"object"===("undefined"==typeof t?"undefined":r(t))?c(e,t,n):p(e,t,n)};e.exports=u},function(e,t,n){"use strict";var r=n(57),i=n(221).number,o={cleanMath:function(e){return"string"==typeof e?e.replace(/\+\s*-/g,"- ").replace(/-\s*-/g,"+ ").replace(/\^1/g,""):e},bound:function(e){return 0===e?e:e<0?-o.bound(-e):Math.max(1e-6,Math.min(e,1e20))},factorial:function(e){return e<=1?e:e*o.factorial(e-1)},getGCD:function(e,t){if(arguments.length>2){var n=[].slice.call(arguments,1);return o.getGCD(e,o.getGCD.apply(o,n))}var r=void 0;for(e=Math.abs(e),t=Math.abs(t);t;)r=e%t,e=t,t=r;return e},getLCM:function(e,t){if(arguments.length>2){var n=[].slice.call(arguments,1);return o.getLCM(e,o.getLCM.apply(o,n))}return Math.abs(e*t)/o.getGCD(e,t)},primes:[2,3,5,7,11,13,17,19,23,29,31,37,41,43,47,53,59,61,67,71,73,79,83,89,97],isPrime:function(e){if(e<=1)return!1;if(e<101)return!!$.grep(o.primes,function(t,n){return Math.abs(t-e)<=.5}).length;if(e<=1||e>2&&e%2===0)return!1;for(var t=3,n=Math.sqrt(e);t<=n;t+=2)if(e%t===0)return!1;return!0},getPrimeFactorization:function(e){if(1===e)return[];if(o.isPrime(e))return[e];for(var t=Math.sqrt(e),n=2;n<=t;n++)if(e%n===0)return $.merge(o.getPrimeFactorization(n),o.getPrimeFactorization(e/n))},roundToNearest:function(e,t){return Math.round(t/e)*e},roundTo:function(e,t){var n=Math.pow(10,e).toFixed(5);return Math.round((t*n).toFixed(5))/n},toFixedApprox:function(e,t){var n=e.toFixed(t);return i.equal(+n,e)?n:"\\approx "+n},roundToApprox:function(e,t){var n=o.roundTo(t,e);return i.equal(n,e)?String(n):o.toFixedApprox(e,t)},toFraction:function(e,t){if(null==t&&(t=Math.pow(2,-46)),e<0||e>1){var n=e%1;n+=n<0?1:0;var r=o.toFraction(n,t);return r[0]+=Math.round(e-n)*r[1],r}if(Math.abs(Math.round(Number(e))-e)<=t)return[Math.round(e),1];for(var i=0,s=1,a=1,l=1,p=1,c=2;;){if(Math.abs(Number(p/c)-e)<=t)return[p,c];p/c<e?(i=p,s=c):(a=p,l=c),p=i+a,c=s+l}},getNumericFormat:function(e){if(e=$.trim(e),e=e.replace(/\u2212/,"-").replace(/([+-])\s+/g,"$1"),e.match(/^[+-]?\d+$/))return"integer";if(e.match(/^[+-]?\d+\s+\d+\s*\/\s*\d+$/))return"mixed";var t=e.match(/^[+-]?(\d+)\s*\/\s*(\d+)$/);return t?parseFloat(t[1])>parseFloat(t[2])?"improper":"proper":e.replace(/[,. ]/g,"").match(/^\d+$/)?"decimal":e.match(/(pi?|\u03c0|t(?:au)?|\u03c4|pau)/)?"pi":null},toNumericString:function(e,t){if(null==e)return"";if(0===e)return"0";if("percent"===t)return 100*e+"%";if("pi"===t){var n=i.toFraction(e/Math.PI),o=Math.abs(n[0]),s=n[1];if(i.isInteger(o)){var a=e<0?"-":"",l="π";return a+(1===o?"":o)+l+(1===s?"":"/"+s)}}if(r(["proper","improper","mixed","fraction"]).contains(t)){var p=i.toFraction(e),c=Math.abs(p[0]),u=p[1],h=e<0?"-":"";if(1===u)return h+c;if("mixed"===t){var d=c%u,f=(c-d)/u;return h+(f?f+" ":"")+d+"/"+u}return h+c+"/"+u}return String(e)}};e.exports=o},function(e,t,n){"use strict";var r=n(34),i=n(57),o=n(28),s=n(131),a=n(12),l=n(181),p=r.createClass({displayName:"Radio",propTypes:{apiOptions:l.propTypes.apiOptions,choices:l.propTypes.choices,deselectEnabled:r.PropTypes.bool,displayCount:r.PropTypes.any,interWidgets:r.PropTypes.func,multipleSelect:r.PropTypes.bool,onChange:r.PropTypes.func.isRequired,onePerLine:l.propTypes.onePerLine,questionCompleted:r.PropTypes.bool,reviewModeRubric:l.propTypes.reviewModeRubric,trackInteraction:r.PropTypes.func.isRequired,values:r.PropTypes.arrayOf(r.PropTypes.bool)},getDefaultProps:function(){return{choices:[{}],displayCount:null,multipleSelect:!1,deselectEnabled:!1}},_renderRenderer:function(e){e=e||"";var t=1,n={},i=e.replace(/\{\{passage-ref (\d+) (\d+)(?: "([^"]*)")?\}\}/g,function(e,r,i,o){var l="passage-ref "+t;return t++,n[l]={type:"passage-ref",graded:!1,options:{passageNumber:parseInt(r),referenceNumber:parseInt(i),summaryText:o},version:s.version},"[["+a.snowman+" "+l+"]]"});return r.createElement(o,{key:"choiceContentRenderer",content:i,widgets:n,interWidgets:this._interWidgets,alwaysUpdate:!0})},_interWidgets:function(e,t){return t.length?t:this.props.interWidgets(e)},focus:function(e){return this.refs.baseRadio.focus(e)},onCheckedChange:function(e){this.props.onChange({values:e}),this.props.trackInteraction()},getUserInput:function(){if(this.props.values){for(var e=null,t=!1,n=this.props.values.slice(),r=0;r<this.props.values.length;r++){var o=this.props.choices[r].originalIndex;n[o]=this.props.values[r],this.props.choices[r].isNoneOfTheAbove&&(e=o,n[r]&&(t=!0))}return{values:n,noneOfTheAboveIndex:e,noneOfTheAboveSelected:t}}return{values:i.map(this.props.choices,function(){return!1})}},simpleValidate:function(e){return p.validate(this.getUserInput(),e)},enforceOrdering:function(e){var t=i.pluck(e,"content");return i.isEqual(t,[i18n._("False"),i18n._("True")])||i.isEqual(t,[i18n._("No"),i18n._("Yes")])?[e[1]].concat([e[0]]):e},render:function(){var e=this,t=this.props.choices,n=this.props.values||i.map(t,function(){return!1});return t=i.map(t,function(t,r){var i=t.isNoneOfTheAbove&&!t.content?i18n._("None of the above"):t.content;return{content:e._renderRenderer(i),checked:n[r],correct:e.props.questionCompleted&&n[r],clue:e._renderRenderer(t.clue),isNoneOfTheAbove:t.isNoneOfTheAbove}}),t=this.enforceOrdering(t),r.createElement(l,{ref:"baseRadio",labelWrap:!0,onePerLine:this.props.onePerLine,multipleSelect:this.props.multipleSelect,choices:t,onCheckedChange:this.onCheckedChange,reviewModeRubric:this.props.reviewModeRubric,deselectEnabled:this.props.deselectEnabled,apiOptions:this.props.apiOptions})}});i.extend(p,{validate:function(e,t){var n=i.reduce(e.values,function(e,t){return e+(t?1:0)},0);if(0===n)return{type:"invalid",message:null};if(e.noneOfTheAboveSelected&&n>1)return{type:"invalid",message:i18n._("'None of the above' may not be selected when other answers are selected.")};var r=i.all(e.values,function(n,r){var o=void 0;return o=e.noneOfTheAboveIndex===r?i.all(t.choices,function(e,t){return r===t||!e.correct}):!!t.choices[r].correct,o===n});return{type:"points",earned:r?1:0,total:1,message:null}}}),e.exports=p},function(e,t,n){"use strict";var r=n(34),i=n(177),o=n(57),s=n(11).ClassNames,a=n(178),l=n(28),p=n(176),c=n(202),u=n(12).captureScratchpadTouchStart,h="math",d="text",f="tex",m=r.createClass({displayName:"InputWithExamples",propTypes:{type:r.PropTypes.oneOf([h,d,f]),value:r.PropTypes.string,onChange:r.PropTypes.func.isRequired,className:r.PropTypes.string,examples:r.PropTypes.arrayOf(r.PropTypes.string).isRequired,shouldShowExamples:r.PropTypes.bool,
convertDotToTimes:r.PropTypes.bool,buttonSet:r.PropTypes.string,buttonsVisible:r.PropTypes.oneOf(["always","never","focused"]),labelText:r.PropTypes.string,onFocus:r.PropTypes.func,onBlur:r.PropTypes.func,disabled:r.PropTypes.bool,id:r.PropTypes.string.isRequired},getDefaultProps:function(){return{type:d,shouldShowExamples:!0,onFocus:function(){},onBlur:function(){},disabled:!1}},getInitialState:function(){return{focused:!1,showExamples:!1}},_getUniqueId:function(){return"input-with-examples-"+btoa(this.props.id).replace(/=/g,"")},_getInputClassName:function(){if(this.props.type===f)return this.props.className;var e=s.INPUT+" "+s.INTERACTIVE;return this.state.focused&&(e+=" "+s.FOCUSED),this.props.className&&(e+=" "+this.props.className),e},_getPropsForInputType:function(){var e={"aria-describedby":this._getUniqueId(),ref:"input",className:this._getInputClassName(),labelText:this.props.labelText,value:this.props.value,onFocus:this._handleFocus,onBlur:this._handleBlur,disabled:this.props.disabled};return this.props.type===f?e:(o.extend(e,{buttonSet:this.props.buttonSet,buttonsVisible:this.props.buttonsVisible,onChange:this.props.onChange,onTouchStart:u}),this.props.type===h?o.extend({convertDotToTimes:this.props.convertDotToTimes},e):this.props.type===d?o.extend({autoCapitalize:"off",autoComplete:"off",autoCorrect:"off",spellCheck:"false"},e):void 0)},_getComponentForInputType:function(){switch(this.props.type){case f:return c;case h:return a;case d:return p;default:return null}},_renderInput:function(){var e=this._getPropsForInputType(),t=this._getComponentForInputType();return r.createElement(t,e)},render:function(){var e=this._renderInput();if(this.props.type===f)return e;var t=o.map(this.props.examples,function(e){return"- "+e}).join("\n"),n=this.props.shouldShowExamples&&this.state.showExamples;return r.createElement(i,{ref:"tooltip",className:"perseus-formats-tooltip preview-measure",horizontalPosition:"left",horizontalAlign:"left",verticalPosition:"bottom",arrowSize:10,borderColor:"#ccc",show:n},e,r.createElement("div",{id:this._getUniqueId()},r.createElement(l,{content:t})))},_handleFocus:function(){this.props.onFocus(),this.setState({focused:!0,showExamples:!0})},show:function(){this.setState({showExamples:!0})},hide:function(){this.setState({showExamples:!1})},_handleBlur:function(){this.props.onBlur(),this.setState({focused:!1,showExamples:!1})},focus:function(){this.refs.input.focus()},blur:function(){this.refs.input.blur()},handleChange:function(e){this.props.onChange(e.target.value)}});e.exports=m},function(e,t,n){"use strict";function r(e,t){var n={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n}var i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},o=n(34),s=n(160).components.KeypadInput,a=n(160).consts.KeypadTypes,l=n(160).propTypes.keypadElementPropType,p=o.createClass({displayName:"SimpleKeypadInput",propTypes:{keypadElement:l,onFocus:o.PropTypes.func,value:o.PropTypes.oneOfType([o.PropTypes.string,o.PropTypes.number])},focus:function(){this.refs.input.focus()},blur:function(){this.refs.input.blur()},getValue:function(){return this.props.value},render:function(){var e=this,t=this.props,n=t.keypadElement,l=t.onFocus,p=t.value,c=r(t,["keypadElement","onFocus","value"]);return o.createElement(s,i({ref:"input",keypadElement:n,onFocus:function(){n?n.configure({keypadType:a.FRACTION},function(){e.isMounted()&&l&&l()}):l&&l()},value:null==p?"":""+p},c))}});e.exports=p},function(e,t,n){"use strict";function r(e,t){for(var n=0,r=t,i=e.length;r<i;r++){var o=e[r];if("{"===o?n++:"}"===o&&n--,n<0)return r}return e.length}function i(e,t,n){var i=e.indexOf("{",t),o=i+1,a=r(e,o),l=e.substring(o,a),p=s(l,n);return{endpoint:a,expression:p}}function o(e,t){var n="\\dfrac",r="\\frac",i=e.indexOf(r,t),o=e.indexOf(n,t);return i>-1&&o>-1?Math.min(i,o):i>-1?i:o>-1?o:-1}function s(e,t){for(var n="",r=0,s=o(e,r);s>-1;){n+=e.substring(r,s),r=s;var a=i(e,r,t);r=a.endpoint+1;var l=i(e,r,t);r=l.endpoint+1,n.length&&(n+=" "),n+=t(a.expression,l.expression),s=o(e,r)}return n+=e.slice(r)}function a(e){function t(e){return e.indexOf("\\frac")>-1||e.indexOf("\\dfrac")>-1}var n=function(e,n){var r;return r=t(e)||t(n)?"\\dfrac":"\\frac",r+" {"+e+"}{"+n+"}"};return s(e,n)}function l(e){var t=function(e,t){return e+"/"+t};return s(e,t)}e.exports={parseTex:l,modifyTex:a}},function(e,t,n){"use strict";var r=n(34),i=n(57),o=r.createClass({displayName:"PossibleAnswers",propTypes:{answers:r.PropTypes.arrayOf(r.PropTypes.string)},render:function(){var e=i.uniq(this.props.answers),t=i.map(e,function(e){return r.createElement("dd",{key:e},e)});return r.createElement("dl",{className:"perseus-possible-answers"},r.createElement("dt",null,"Correct Answer"),t)}});e.exports=o},function(e,t,n){"use strict";var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},i=n(34),o=i.createClass({displayName:"BlurInput",propTypes:{value:i.PropTypes.string.isRequired,onChange:i.PropTypes.func.isRequired},getInitialState:function(){return{value:this.props.value}},render:function(){return i.createElement("input",r({},this.props,{type:"text",value:this.state.value,onChange:this.handleChange,onBlur:this.handleBlur}))},componentWillReceiveProps:function(e){this.setState({value:e.value})},handleChange:function(e){this.setState({value:e.target.value})},handleBlur:function(e){this.props.onChange(e.target.value)}});e.exports=o},function(e,t,n){"use strict";var r=n(34),i=n(57),o=n(64),s='Usage:\n  this.change({propName: 5}, callback);\n  this.change("propName", 5, callback);\n  this.change("propName")',a=function(e,t,n){var r=i.omit(e.props,o),s=i.extend(r,t);e.props.onChange(s,n)},l=function e(t,n,r,o){if(void 0===r)return i.partial(e,t,n);var s={};s[n]=r,a(t,s,o)},p=function(e,t,n){if(i.isObject(e)&&void 0===n)return n=t,a(this,e,n);if(i.isString(e))return l(this,e,t,n);throw new Error("Invalid types sent to this.change(): "+i.toArray(arguments).join()+"\n"+s)},c={propTypes:{onChange:r.PropTypes.func.isRequired},change:p};e.exports=c},function(e,t,n){"use strict";var r=n(57),i=n(64),o={serialize:function(){return r.omit(this.props,i)}};e.exports=o},function(e,t,n){"use strict";var r=n(34),i=n(35),o=n(57),s=n(183),a=n(82).css,l=r.createClass({displayName:"MultiButtonGroup",propTypes:{values:r.PropTypes.arrayOf(r.PropTypes.any),buttons:r.PropTypes.arrayOf(r.PropTypes.shape({value:r.PropTypes.any.isRequired,content:r.PropTypes.node,title:r.PropTypes.string})).isRequired,onChange:r.PropTypes.func.isRequired,allowEmpty:r.PropTypes.bool},getDefaultProps:function(){return{values:[],allowEmpty:!0}},render:function(){var e=this,t=this.props.values,n=o(this.props.buttons).map(function(n,i){var l=o.contains(t,n.value);return r.createElement("button",{title:n.title,type:"button",id:""+i,key:""+i,ref:"button"+i,className:a(s.button.buttonStyle,l&&s.button.selectedStyle),onClick:e.toggleSelect.bind(e,n.value)},n.content||""+n.value)}),i={display:"inline-block"};return r.createElement("div",{style:i},n)},focus:function(){return i.findDOMNode(this).focus(),!0},toggleSelect:function(e){var t=this.props.values,n=this.props.allowEmpty;o.contains(t,e)&&(t.length>1||n)?this.props.onChange(o.without(t,e)):this.props.onChange(o.union(t,[e]))}});e.exports=l},function(e,t,n){"use strict";var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},i=n(83),o=n(34),s=n(35),a=n(57),l=n(12).firstNumericalParse,p=n(12).captureScratchpadTouchStart,c=n(221).number,u=n(165),h=u.toNumericString,d=u.getNumericFormat,f=o.createClass({displayName:"NumberInput",propTypes:{value:o.PropTypes.number,format:o.PropTypes.string,placeholder:o.PropTypes.oneOfType([o.PropTypes.string,o.PropTypes.number]),onChange:o.PropTypes.func.isRequired,onFormatChange:o.PropTypes.func,checkValidity:o.PropTypes.func,size:o.PropTypes.string,label:o.PropTypes.oneOf(["put your labels outside your inputs!"])},getDefaultProps:function(){return{value:null,placeholder:null,format:null,onFormatChange:function(){return null},checkValidity:function(){return!0},useArrowKeys:!1}},getInitialState:function(){return{format:this.props.format}},render:function(){var e=i({"number-input":!0,"invalid-input":!this._checkValidity(this.props.value),mini:"mini"===this.props.size,small:"small"===this.props.size,normal:"normal"===this.props.size});return null!=this.props.className&&(e=e+" "+this.props.className),o.createElement("input",r({},this.props,{className:e,type:"text",ref:"input",onChange:this._handleChange,onFocus:this._handleFocus,onBlur:this._handleBlur,onKeyPress:this._handleBlur,onKeyDown:this._onKeyDown,onTouchStart:p,defaultValue:h(this.props.value,this.state.format),value:void 0}))},componentDidUpdate:function(e){c.equal(this.getValue(),this.props.value)||this._setValue(this.props.value,this.state.format)},getValue:function(){return this.parseInputValue(s.findDOMNode(this.refs.input).value)},getStringValue:function(){return s.findDOMNode(this.refs.input).value.toString()},parseInputValue:function(e){if(""===e){var t=this.props.placeholder;return a.isFinite(t)?+t:null}var n=l(e);return a.isFinite(n)?n:this.props.value},focus:function(){s.findDOMNode(this.refs.input).focus(),this._handleFocus()},blur:function(){s.findDOMNode(this.refs.input).blur(),this._handleBlur()},setSelectionRange:function(e,t){s.findDOMNode(this).setSelectionRange(e,t)},getSelectionStart:function(){return s.findDOMNode(this).selectionStart},getSelectionEnd:function(){return s.findDOMNode(this).selectionEnd},_checkValidity:function(e){if(null==e)return!0;var t=l(e),n=this.props.checkValidity;return a.isFinite(t)&&n(t)},_handleChange:function(e){var t=e.target.value,n=this.parseInputValue(t),r=d(t);this.props.onChange(n),r&&(this.props.onFormatChange(n,r),this.setState({format:r}))},_handleFocus:function(){this.props.onFocus&&this.props.onFocus()},_handleBlur:function(e){e&&"keypress"===e.type&&13!==e.keyCode||(this._setValue(this.props.value,this.state.format),this.props.onBlur&&this.props.onBlur())},_onKeyDown:function(e){if(this.props.onKeyDown&&this.props.onKeyDown(e),this.props.useArrowKeys&&a.contains(["ArrowUp","ArrowDown"],e.key)){var t=this.getValue();t===Math.floor(t)&&("ArrowUp"===e.key?t+=1:"ArrowDown"===e.key&&(t-=1),this._checkValidity(t)&&this.props.onChange(t))}},_setValue:function(e,t){$(s.findDOMNode(this.refs.input)).val(h(e,t))}});e.exports=f},function(e,t,n){"use strict";var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},i=n(34),o=n(35),s=i.createClass({displayName:"TextInput",propTypes:{value:i.PropTypes.string,onChange:i.PropTypes.func.isRequired,className:i.PropTypes.string,labelText:i.PropTypes.string,onFocus:i.PropTypes.func,onBlur:i.PropTypes.func,disabled:i.PropTypes.bool},getDefaultProps:function(){return{value:"",disabled:!1}},render:function(){var e=this;return i.createElement("input",r({},this.props,{type:"text",disabled:this.props.disabled,"aria-label":this.props.labelText,onChange:function(t){return e.props.onChange(t.target.value)}}))},focus:function(){o.findDOMNode(this).focus()},blur:function(){o.findDOMNode(this).blur()},getValue:function(){return o.findDOMNode(this).value},getStringValue:function(){return o.findDOMNode(this).value.toString()},setSelectionRange:function(e,t){o.findDOMNode(this).setSelectionRange(e,t)},getSelectionStart:function(){return o.findDOMNode(this).selectionStart},getSelectionEnd:function(){return o.findDOMNode(this).selectionEnd}});e.exports=s},function(e,t,n){"use strict";var r=n(34),i=n(35),o=n(57),s=10,a=r.createClass({displayName:"Triangle",propTypes:{color:r.PropTypes.string.isRequired,left:r.PropTypes.number.isRequired,top:r.PropTypes.number.isRequired,width:r.PropTypes.number.isRequired,height:r.PropTypes.number.isRequired,horizontalDirection:r.PropTypes.oneOf(["left","right"]).isRequired,verticalDirection:r.PropTypes.oneOf(["top","bottom"]).isRequired},render:function(){var e,t,n,i,o=this.props.width+"px solid transparent";"right"===this.props.horizontalDirection?e=o:t=o;var s=this.props.height+"px solid "+this.props.color;return"top"===this.props.verticalDirection?n=s:i=s,r.createElement("div",{style:{display:"block",height:0,width:0,position:"absolute",left:this.props.left,top:this.props.top,borderLeft:e,borderRight:t,borderTop:n,borderBottom:i}})}}),l=r.createClass({displayName:"TooltipArrow",propTypes:{position:r.PropTypes.string,visibility:r.PropTypes.string,left:r.PropTypes.number,top:r.PropTypes.number,color:r.PropTypes.string.isRequired,border:r.PropTypes.string.isRequired,width:r.PropTypes.number.isRequired,height:r.PropTypes.number.isRequired,horizontalDirection:r.PropTypes.oneOf(["left","right"]).isRequired,verticalDirection:r.PropTypes.oneOf(["top","bottom"]).isRequired},getDefaultProps:function(){return{position:"relative",visibility:"visible",left:0,top:0}},render:function(){var e="top"===this.props.verticalDirection,t=e?0:1,n=e?0:-1;return r.createElement("div",{style:{display:"block",position:this.props.position,visibility:this.props.visibility,left:this.props.left,top:this.props.top,width:this.props.width+2,height:this.props.height+1,marginTop:-1,marginBottom:-2,zIndex:s}},r.createElement(a,{horizontalDirection:this.props.horizontalDirection,verticalDirection:this.props.verticalDirection,color:this.props.border,left:0,top:n,width:this.props.width+2,height:this.props.height+2}),r.createElement(a,{horizontalDirection:this.props.horizontalDirection,verticalDirection:this.props.verticalDirection,color:this.props.color,left:1,top:t,width:this.props.width,height:this.props.height}))}}),p={top:{top:"-100%"},bottom:{top:0}},c={left:{targetLeft:0},right:{targetLeft:"100%"}},u={left:{tooltipLeft:0,arrowLeft:function(e){return 0}},right:{tooltipLeft:"-100%",arrowLeft:function(e){return-e-2}}},h=r.createClass({displayName:"Tooltip",propTypes:{show:r.PropTypes.bool.isRequired,className:r.PropTypes.string,arrowSize:r.PropTypes.number,borderColor:r.PropTypes.string,verticalPosition:r.PropTypes.oneOf(o.keys(p)),horizontalPosition:r.PropTypes.oneOf(o.keys(c)),horizontalAlign:r.PropTypes.oneOf(o.keys(u)),children:r.PropTypes.arrayOf(r.PropTypes.element).isRequired},getDefaultProps:function(){return{className:"",arrowSize:10,borderColor:"#ccc",verticalPosition:"bottom",horizontalPosition:"left",horizontalAlign:"left"}},getInitialState:function(){return{height:null}},componentWillReceiveProps:function(){this.setState({height:null})},render:function(){var e="top"===this.props.verticalPosition;return r.createElement("span",null,e&&this._renderToolTipDiv(e),r.createElement("div",null,o.first(this.props.children)),!e&&this._renderToolTipDiv())},_renderToolTipDiv:function(e){var t,n,i=o.extend({},c[this.props.horizontalPosition],u[this.props.horizontalAlign],p[this.props.verticalPosition]);return e?(t=r.createElement(l,{verticalDirection:"top",horizontalDirection:this.props.horizontalAlign,position:"absolute",color:"white",border:this.props.borderColor,left:i.arrowLeft(this.props.arrowSize),top:-this.props.arrowSize+2,width:this.props.arrowSize,height:this.props.arrowSize,zIndex:s}),n=r.createElement(l,{verticalDirection:"top",horizontalDirection:this.props.horizontalAlign,visibility:"hidden",color:"white",border:this.props.borderColor,left:i.arrowLeft(this.props.arrowSize),top:-1,width:this.props.arrowSize,height:this.props.arrowSize,zIndex:s})):(t=r.createElement(l,{verticalDirection:"bottom",horizontalDirection:this.props.horizontalAlign,color:"white",border:this.props.borderColor,left:i.arrowLeft(this.props.arrowSize),top:-1,width:this.props.arrowSize,height:this.props.arrowSize,zIndex:s}),n=null),r.createElement("div",{style:{position:"relative",height:0,display:this.props.show?"block":"none"}},r.createElement("div",{ref:"tooltipContainer",className:"tooltipContainer",style:{position:"absolute",height:this.state.height||void 0,left:i.targetLeft}},t,r.createElement("div",{className:this.props.className,ref:"tooltipContent",style:{position:"relative",top:i.top,left:i.tooltipLeft,border:"1px solid "+this.props.borderColor,WebkitBoxShadow:"0 1px 3px "+this.props.borderColor,MozBoxShadow:"0 1px 3px "+this.props.borderColor,boxShadow:"0 1px 3px "+this.props.borderColor,zIndex:s-1}},o.rest(this.props.children)),n))},componentDidMount:function(){this._updateHeight()},componentDidUpdate:function(){this._updateHeight()},_updateHeight:function(){var e=i.findDOMNode(this.refs.tooltipContainer).offsetHeight;e!==this.state.height&&this.setState({height:e})}});e.exports=h},function(e,t,n){"use strict";var r=n(83),i=n(34),o=n(35),s=n(57),a=n(179),l=window.MathQuill,p=i.PropTypes,c=i.createClass({displayName:"MathInput",propTypes:{value:p.string,onChange:p.func.isRequired,convertDotToTimes:p.bool,buttonsVisible:p.oneOf(["always","never","focused"]),buttonSets:a.buttonSetsType.isRequired,labelText:i.PropTypes.string,onFocus:p.func,onBlur:p.func},render:function(){var e=r({"perseus-math-input":!0,"mq-editable-field":!0,"mq-math-mode":!0});this.props.className&&(e=e+" "+this.props.className);var t=null;return this._shouldShowButtons()&&(t=i.createElement(a,{sets:this.props.buttonSets,className:"math-input-buttons absolute",convertDotToTimes:this.props.convertDotToTimes,onInsert:this.insert})),i.createElement("div",{style:{display:"inline-block"}},i.createElement("div",{style:{display:"inline-block"}},i.createElement("span",{className:e,ref:"mathinput","aria-label":this.props.labelText,onFocus:this.handleFocus,onBlur:this.handleBlur})),i.createElement("div",{style:{position:"relative"}},t))},handleFocus:function(){this.setState({focused:!0})},handleMouseDown:function(e){var t=o.findDOMNode(this).contains(e.target);this.mouseDown=t,t||this.setState({focused:!1})},handleMouseUp:function(){this.mouseDown&&this.focus(),this.mouseDown=!1},handleBlur:function(){this.mouseDown||this.setState({focused:!1})},_shouldShowButtons:function(){return"always"===this.props.buttonsVisible||"never"!==this.props.buttonsVisible&&this.state.focused},getDefaultProps:function(){return{value:"",convertDotToTimes:!1,buttonsVisible:"focused"}},getInitialState:function(){return{focused:!1}},insert:function(e){var t=this.mathField();s(e).isFunction()?e(t):"\\"===e[0]?t.cmd(e).focus():t.write(e).focus(),t.focus()},mathField:function(e){var t=l.getInterface(2);return t.MathField(o.findDOMNode(this.refs.mathinput),e)},componentWillUnmount:function(){window.removeEventListener("mousedown",this.handleMouseDown),window.removeEventListener("mouseup",this.handleMouseUp)},componentDidMount:function(){var e=this;window.addEventListener("mousedown",this.handleMouseDown),window.addEventListener("mouseup",this.handleMouseUp);var t=!1;this.mathField({autoCommands:"pi theta phi sqrt nthroot",charsThatBreakOutOfSupSub:"+-*/=<>≠≤≥",supSubsRequireOperand:!0,spaceBehavesLikeTab:!0,handlers:{edited:function(n){var r=n.latex();if(r=r.replace(/<>/g,"\\ne"),e.props.convertDotToTimes){r=r.replace(/\\cdot/g,"\\times");var i=n.__controller.cursor[l.L];i&&"\\cdot "===i.ctrlSeq&&(n.__controller.backspace(),n.cmd("\\times"))}else r=r.replace(/\\times/g,"\\cdot");t&&e.props.value!==r&&e.props.onChange(r)},enter:function(){$(o.findDOMNode(e.refs.mathinput)).submit()},upOutOf:function(e){e.typedText("^")}}}),this.mathField().latex(this.props.value),t=!0},componentDidUpdate:function(){s.isEqual(this.mathField().latex(),this.props.value)||this.mathField().latex(this.props.value)},focus:function(){this.mathField().focus(),this.setState({focused:!0})},blur:function(){this.mathField().blur(),this.setState({focused:!1})}});e.exports=c},function(e,t,n){"use strict";var r=n(34),i=n(57),o=n(80),s={fontSize:"150%"},a={fontSize:"120%"},l={fontSize:"130%"},p=[function(){return[r.createElement("span",{key:"plus",style:a},"+"),"+"]},function(){return[r.createElement("span",{key:"minus",style:s},"-"),"-"]},function(e){return e.convertDotToTimes?[r.createElement(o,{key:"times",style:s},"\\times"),"\\times"]:[r.createElement(o,{key:"times",style:s},"\\cdot"),"\\cdot"]},function(){return[r.createElement(o,{key:"frac",style:s},"\\frac{□}{□}"),function(e){var t=e.latex();e.typedText("/"),e.latex()===t&&e.cmd("\\frac")}]}],c={basic:p,"basic+div":p.concat([function(){return[r.createElement(o,{key:"div"},"\\div"),"\\div"]}]),trig:[function(){return[r.createElement(o,{key:"sin"},"\\sin"),"\\sin"]},function(){return[r.createElement(o,{key:"cos"},"\\cos"),"\\cos"]},function(){return[r.createElement(o,{key:"tan"},"\\tan"),"\\tan"]},function(){return[r.createElement(o,{key:"theta",style:l},"\\theta"),"\\theta"]},function(){return[r.createElement(o,{key:"pi",style:l},"\\phi"),"\\phi"]}],prealgebra:[function(){return[r.createElement(o,{key:"sqrt"},"\\sqrt{x}"),"\\sqrt"]},function(){return[r.createElement(o,{key:"nthroot"},"\\sqrt[3]{x}"),function(e){e.typedText("nthroot3"),e.keystroke("Right")}]},function(){return[r.createElement(o,{key:"pow",style:a},"□^a"),function(e){var t=e.latex();e.typedText("^"),e.latex()===t&&e.typedText("a^b")}]},function(){return[r.createElement(o,{key:"pi",style:a},"\\pi"),"\\pi"]}],logarithms:[function(){return[r.createElement(o,{key:"log"},"\\log"),"\\log"]},function(){return[r.createElement(o,{key:"ln"},"\\ln"),"\\ln"]},function(){return[r.createElement(o,{key:"log_b"},"\\log_b"),function(e){e.typedText("log_"),e.keystroke("Right"),e.typedText("("),e.keystroke("Left"),e.keystroke("Left")}]}],"basic relations":[function(){return[r.createElement(o,{key:"eq"},"="),"="]},function(){return[r.createElement(o,{key:"lt"},"\\lt"),"\\lt"]},function(){return[r.createElement(o,{key:"gt"},"\\gt"),"\\gt"]}],"advanced relations":[function(){return[r.createElement(o,{key:"neq"},"\\neq"),"\\neq"]},function(){return[r.createElement(o,{key:"leq"},"\\leq"),"\\leq"]},function(){return[r.createElement(o,{key:"geq"},"\\geq"),"\\geq"]}]},u=r.PropTypes.arrayOf(r.PropTypes.oneOf(i(c).keys())),h=r.createClass({displayName:"TexButtons",propTypes:{sets:u.isRequired,onInsert:r.PropTypes.func.isRequired},render:function(){var e=this,t=i.sortBy(this.props.sets,function(e){return i.keys(c).indexOf(e)}),n=i(t).map(function(e){return c[e]}),o=i(n).map(function(t){return t.map(function(t){var n=t(e.props);return r.createElement("button",{onClick:function(){return e.props.onInsert(n[1])},className:"tex-button",key:n[0].key,tabIndex:-1,type:"button"},n[0])})}),s=i(o).map(function(t,n){return r.createElement("div",{className:"clearfix tex-button-row",key:e.props.sets[n]},t)});return r.createElement("div",{className:this.props.className+" preview-measure"},s)},statics:{buttonSets:c,buttonSetsType:u}});e.exports=h},function(e,t,n){"use strict";var r=n(34),i=n(35),o=n(57),s=r.PropTypes,a=r.createClass({displayName:"SortableArea",propTypes:{components:s.arrayOf(s.node).isRequired,onReorder:s.func.isRequired,verify:s.func},render:function(){var e=this,t=o(this.state.components).map(function(t,n){return r.createElement(l,{index:n,component:t,area:e,key:t.key,draggable:t.props.draggable,dragging:n===e.state.dragging})});return r.createElement("ol",{className:this.props.className,style:this.props.style},t)},getDefaultProps:function(){return{verify:function(){return!0}}},getInitialState:function(){return{dragging:null,components:this.props.components}},componentWillReceiveProps:function(e){this.setState({components:e.components})},onDragStart:function(e){this.setState({dragging:e})},onDrop:function(){this.setState({dragging:null}),this.props.onReorder(this.state.components)},onDragEnter:function(e){if(this.state.dragging!==e){var t=this.state.components.slice(),n=t.splice(this.state.dragging,1);t.splice(e,0,n[0]);var r=this.props.verify(t);return r&&this.setState({dragging:e,components:t}),r}},componentDidMount:function(){this._setDragEvents()},componentDidUpdate:function(){this._setDragEvents()},_listenEvent:function(e){e.dataTransfer.setData("hackhackhack","because browsers!")},_cancelEvent:function(e){e.preventDefault()},_setDragEvents:function(){var e=this;this._dragItems=this._dragItems||[];var t=i.findDOMNode(this).querySelectorAll("[draggable=true]"),n=o(this._dragItems).difference(t),r=o(t).difference(this._dragItems);o(r).each(function(t){t.addEventListener("dragstart",e._listenEvent),t.addEventListener("drop",e._cancelEvent)}),o(n).each(function(t){t.removeEventListener("dragstart",e._listenEvent),t.removeEventListener("drop",e._cancelEvent)})}}),l=r.createClass({displayName:"SortableItem",propTypes:{},render:function(){var e="sortable-disabled";return this.props.dragging?e="sortable-dragging":this.props.draggable&&(e="sortable-enabled"),r.createElement("li",{draggable:this.props.draggable,className:e,onDragStart:this.handleDragStart,onDrop:this.handleDrop,onDragEnter:this.handleDragEnter,onDragOver:this.handleDragOver},this.props.component)},handleDragStart:function(e){e.nativeEvent.dataTransfer.effectAllowed="move",this.props.area.onDragStart(this.props.index)},handleDrop:function(){this.props.area.onDrop(this.props.index)},handleDragEnter:function(e){var t=this.props.area.onDragEnter(this.props.index);e.nativeEvent.dataTransfer.effectAllowed=t?"move":"none"},handleDragOver:function(e){e.preventDefault()}});e.exports=a},function(e,t,n){"use strict";var r,i,o,s,a,l=n(82),p=l.StyleSheet,c=l.css,u=n(83),h=n(34),d=n(35),f=n(57),m=n(11).ClassNames,g=n(28),v=n(77),y=n(78),b=n(76),E=n(12).captureScratchpadTouchStart,T=n(206),x=h.createClass({displayName:"ChoiceNoneAbove",propTypes:{className:h.PropTypes.string,content:h.PropTypes.node,showContent:h.PropTypes.bool},getDefaultProps:function(){return{showContent:!0}},render:function(){var e=f.extend({},this.props,{className:u(this.props.className,"none-of-above"),content:this.props.showContent?this.props.content:h.createElement(g,{key:"noneOfTheAboveRenderer",content:i18n._("None of the above")})});return h.createElement(T,e)}}),w=h.PropTypes.arrayOf(h.PropTypes.shape({checked:h.PropTypes.bool,content:h.PropTypes.node,clue:h.PropTypes.node,correct:h.PropTypes.bool,originalIndex:h.PropTypes.number,isNoneOfTheAbove:h.PropTypes.bool})),C=y.radioBorderColor,P=y.checkedColor,S="1px 16px",k="0px 15px",N=h.createClass({displayName:"BaseRadio",propTypes:{apiOptions:h.PropTypes.shape({readOnly:h.PropTypes.bool,satStyling:h.PropTypes.bool,isMobile:h.PropTypes.bool}),choices:w,deselectEnabled:h.PropTypes.bool,labelWrap:h.PropTypes.bool,multipleSelect:h.PropTypes.bool,onCheckedChange:h.PropTypes.func,onePerLine:h.PropTypes.bool,reviewModeRubric:h.PropTypes.shape({choices:w})},statics:{styles:p.create({instructions:{display:"block",color:y.gray17,fontStyle:"normal",fontWeight:"bold",margin:"8px 0"},radio:{width:"100%"},responsiveRadio:(r={},r[b.lgOrSmaller]={borderBottom:"1px solid "+C,borderTop:"1px solid "+C,width:"auto"},r[b.smOrSmaller]={marginLeft:y.negativePhoneMargin,marginRight:y.negativePhoneMargin},r),responsiveMobileRadio:(i={},i[b.lgOrSmaller]={width:"auto"},i),satRadio:{background:"none",marginLeft:0,userSelect:"none"},satRadioOption:{margin:0,padding:0},satReviewRadioOption:{pointerEvents:"none"},item:{padding:"7px 0",marginLeft:20},inlineItem:{display:"inline-block",paddingLeft:20,verticalAlign:"top"},responsiveItem:(o={},o[b.lgOrSmaller]={marginLeft:0,padding:0,":active":{backgroundColor:y.grayLight},":not(:last-child)":{borderBottom:"1px solid "+C}},o),responsiveMobileItem:(s={backgroundColor:"#FFFFFF"},s[b.lgOrSmaller]={border:"1px solid "+C,borderRadius:"4px",margin:0,minHeight:48,padding:S,":active":{border:"2px solid "+C,padding:k},":not(:last-child)":{marginBottom:"16px"}},s),responsiveSelected:(a={},a[b.lgOrSmaller]={border:"2px solid "+P,padding:k},a),responsiveContainer:{overflow:"auto",marginLeft:y.negativePhoneMargin,marginRight:y.negativePhoneMargin,paddingLeft:y.phoneMargin},responsiveFieldset:{paddingRight:y.phoneMargin}})},getDefaultProps:function(){return{onePerLine:!0}},checkOption:function(e,t){var n=void 0;n=this.props.multipleSelect?f.map(this.props.choices,function(n,r){return r===e?t:n.checked}):f.map(this.props.choices,function(n,r){return r===e&&t}),this.props.onCheckedChange(n)},focus:function(e){return d.findDOMNode(this.refs["radio"+(e||0)]).focus(),!0},getInstructionsText:function(){return this.props.apiOptions.isMobile?this.props.multipleSelect?i18n._("Choose all answers that apply."):i18n._("Choose 1 answer."):this.props.multipleSelect?i18n._("Select all that apply."):i18n._("Please choose from one of the following options.")},showOnePerLine:function(){return this.props.apiOptions.isMobile||this.props.onePerLine},deselectEnabled:function(){return this.props.apiOptions.isMobile||this.props.deselectEnabled},render:function(){var e=f.uniqueId("perseus_radio_"),t=this.props.multipleSelect?"checkbox":"radio",n=this.props.reviewModeRubric,r=N.styles,i=this.props.apiOptions.satStyling,o=this.props.apiOptions.isMobile,s=u("perseus-widget-radio",c(v.aboveScratchpad,!o&&v.blankBackground,r.radio,!i&&(o?r.responsiveMobileRadio:r.responsiveRadio),i&&r.satRadio)),a="instructions "+c(r.instructions,v.responsiveLabel),l=this.getInstructionsText(),p=o||this.props.multipleSelect,d=c(r.responsiveFieldset),g=h.createElement("fieldset",{className:"perseus-widget-radio-fieldset "+d},h.createElement("legend",{className:"perseus-sr-only"},l),p&&h.createElement("div",{className:a},l),h.createElement("ul",{className:s},this.props.choices.map(function(s,a){var l=this,p=!(!n||!n.choices[a].clue),d=T,g={ref:"radio"+a,apiOptions:this.props.apiOptions,checked:s.checked,reviewMode:!!n,correct:n&&n.choices[a].correct,clue:s.clue,content:s.content,disabled:this.props.apiOptions.readOnly,groupName:e,isLastChoice:a===this.props.choices.length-1,showClue:p,type:t,pos:a,deselectEnabled:this.deselectEnabled(),onChecked:function(e){l.checkOption(a,e)}};s.isNoneOfTheAbove&&(d=x,f.extend(g,{showContent:s.correct}));var v=function(e,t){return c(r.item,!l.showOnePerLine()&&r.inlineItem,!i&&(t?r.responsiveMobileItem:r.responsiveItem),e&&t&&r.responsiveSelected,i&&r.satRadioOption,i&&e&&r.satRadioSelected,i&&n&&r.satReviewRadioOption)};v(!0,o);var y=u(v(s.checked,o),m.RADIO.OPTION,!this.showOnePerLine()&&"inline",s.checked&&m.RADIO.SELECTED,n&&n.choices[a].correct&&m.CORRECT,n&&!n.choices[a].correct&&m.INCORRECT);return h.createElement("li",{className:y,key:a,onTouchStart:this.props.labelWrap?E:null},h.createElement(d,g))},this)));return h.createElement("div",{className:c(!i&&r.responsiveContainer)},g)}});e.exports=N},function(e,t,n){"use strict";var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol?"symbol":typeof e},i=n(57),o={"(":"left parenthesis",")":"right parenthesis","[":"open bracket","]":"close bracket","\\{":"left brace","\\}":"right brace","\\lvert":"open vertical bar","\\rvert":"close vertical bar","|":"vertical bar","\\uparrow":"up arrow","\\Uparrow":"up arrow","\\downarrow":"down arrow","\\Downarrow":"down arrow","\\updownarrow":"up down arrow","\\leftarrow":"left arrow","\\Leftarrow":"left arrow","\\rightarrow":"right arrow","\\Rightarrow":"right arrow","\\langle":"open angle","\\rangle":"close angle","\\lfloor":"open floor","\\rfloor":"close floor","\\int":"integral","\\intop":"integral","\\lim":"limit","\\ln":"natural log","\\log":"log","\\sin":"sine","\\cos":"cosine","\\tan":"tangent","\\cot":"cotangent","\\sum":"sum","/":"slash",",":"comma",".":"point","-":"negative","+":"plus","~":"tilde",":":"colon","?":"question mark","'":"apostrophe","\\%":"percent"," ":"space","\\ ":"space","\\$":"dollar sign","\\angle":"angle","\\degree":"degree","\\circ":"circle","\\vec":"vector","\\triangle":"triangle","\\pi":"pi","\\prime":"prime","\\infty":"infinity",
"\\alpha":"alpha","\\beta":"beta","\\gamma":"gamma","\\omega":"omega","\\theta":"theta","\\sigma":"sigma","\\lambda":"lambda","\\tau":"tau","\\Delta":"delta","\\delta":"delta","\\mu":"mu","\\rho":"rho","\\nabla":"del","\\ell":"ell","\\ldots":"dots"},s={"\\prime":"prime","\\degree":"degree","\\circ":"degree"},a={"|":"open vertical bar",".":""},l={"|":"close vertical bar",".":""},p={"+":"plus","-":"minus","\\pm":"plus minus","\\cdot":"dot","*":"times","/":"divided by","\\times":"times","\\div":"divided by","\\circ":"circle","\\bullet":"bullet"},c={"=":"equals","\\approx":"approximately equals","\\neq":"does not equal","\\ne":"does not equal","\\geq":"is greater than or equal to","\\ge":"is greater than or equal to","\\leq":"is less than or equal to","\\le":"is less than or equal to",">":"is greater than","<":"is less than","\\leftarrow":"left arrow","\\Leftarrow":"left arrow","\\rightarrow":"right arrow","\\Rightarrow":"right arrow",":":"colon"},u=function(e,t,n){if(e){var r;if(r="open"===t?e in a?a[e]:o[e]||e:"close"===t?e in l?l[e]:o[e]||e:"bin"===t?p[e]||e:"rel"===t?c[e]||e:o[e]||e,r===e&&!/^\w+$/.test(e))throw"KaTeX a11y "+t+" string not found: "+e;/^\d+$/.test(r)&&n.length>0&&/^\d+$/.test(n[n.length-1])?n[n.length-1]+=r:r&&n.push(r)}},h=function(e,t){var n=[];e.push(n),t(n)},d={accent:function(e,t){h(t,function(t){f(e.value.base,t),t.push("with"),f(e.value.accent,t),t.push("on top")})},bin:function(e,t){u(e.value,"bin",t)},close:function(e,t){u(e.value,"close",t)},color:function e(t,n){var e=t.value.color.replace(/katex-/,"");h(n,function(n){n.push("start color "+e),f(t.value.value,n),n.push("end color "+e)})},delimsizing:function(e,t){e.value.value&&"."!==e.value.value&&u(e.value.value,"normal",t)},genfrac:function(e,t){h(t,function(t){e.value.hasBarLine?(t.push("start fraction"),u(e.value.leftDelim,"open",t),f(e.value.numer,t),t.push("divided by"),f(e.value.denom,t),u(e.value.rightDelim,"close",t),t.push("end fraction")):(t.push("start binomial"),u(e.value.leftDelim,"open",t),f(e.value.numer,t),t.push("over"),f(e.value.denom,t),u(e.value.rightDelim,"close",t),t.push("end binomial"))})},katex:function(e,t){t.push("KaTeX")},leftright:function(e,t){h(t,function(t){u(e.value.left,"open",t),f(e.value.body,t),u(e.value.right,"close",t)})},llap:function(e,t){f(e.value.body,t)},mathord:function(e,t){f(e.value,t)},op:function(e,t){u(e.value.body,"normal",t)},open:function(e,t){u(e.value,"open",t)},ordgroup:function(e,t){f(e.value,t)},overline:function(e,t){h(t,function(t){t.push("start overline"),f(e.value.body,t),t.push("end overline")})},phantom:function(e,t){t.push("empty space")},punct:function(e,t){u(e.value,"punct",t)},rel:function(e,t){u(e.value,"rel",t)},rlap:function(e,t){f(e.value.body,t)},rule:function(e,t){t.push("rule")},sizing:function(e,t){f(e.value.value,t)},spacing:function(e,t){t.push("space")},styling:function(e,t){f(e.value.value,t)},sqrt:function(e,t){h(t,function(t){e.value.index&&(t.push("root"),t.push("start index"),f(e.value.index,t),t.push("end index")),t.push("square root of"),f(e.value.body,t),t.push("end square root")})},supsub:function(e,t){e.value.base&&f(e.value.base,t),e.value.sub&&h(t,function(t){t.push("start subscript"),f(e.value.sub,t),t.push("end subscript")});var n=e.value.sup;if(n){var i=s[n],o=n.value;!i&&o&&(i="object"===("undefined"==typeof o?"undefined":r(o))&&1===o.length?s[o[0].value]:s[o]),h(t,function(t){return i?void t.push(i):(t.push("start superscript"),f(e.value.sup,t),void t.push("end superscript"))})}},text:function(e,t){"string"!=typeof e.value?f(e.value.body,t):u(e,"normal",t)},textord:function(e,t){f(e.value,t)}},f=function e(t,n){if(n=n||[],"string"==typeof t)u(t,"normal",n);else if(t.constructor===Array)for(var r=0;r<t.length;r++)e(t[r],n);else{if(!(t.type&&t.type in d))throw"KaTeX a11y un-recognized type: "+t.type;d[t.type](t,n)}return n},m=function e(t,n){for(var r=n.ownerDocument,i=0;i<t.length;i++){var o=t[i];if(i>0&&n.appendChild(r.createTextNode(", ")),"string"==typeof o)n.appendChild(r.createTextNode(o));else{var s=r.createElement("span");n.appendChild(s),e(o,s)}}},g=function(e){return katex.__parse(e)},v=function(e,t){var n=g(e),r=f(n);m(r,t)},y=function(e){var t=g(e),n=f(t);return i.flatten(n).join(", ")};e.exports={render:v,renderString:y,parseMath:g}},function(e,t,n){"use strict";var r=n(82).StyleSheet,i=r.create({buttonStyle:{backgroundColor:"white",border:"1px solid #ccc",borderLeft:"0",cursor:"pointer",margin:"0",padding:"5px 10px",position:"relative",":first-child":{borderLeft:"1px solid #ccc",borderTopLeftRadius:"3px",borderBottomLeftRadius:"3px"},":last-child":{borderRight:"1px solid #ccc",borderTopRightRadius:"3px",borderBottomRightRadius:"3px"},":hover":{backgroundColor:"#ccc"},":focus":{zIndex:"2"}},selectedStyle:{backgroundColor:"#ddd"}});e.exports={button:i}},function(e,t,n){"use strict";function r(e,t){return e+t.charAt(0).toUpperCase()+t.substring(1)}function i(e){for(var t=e.length,n=t,r=0,i=void 0;t>=4;)i=255&e.charCodeAt(r)|(255&e.charCodeAt(++r))<<8|(255&e.charCodeAt(++r))<<16|(255&e.charCodeAt(++r))<<24,i=1540483477*(65535&i)+((1540483477*(i>>>16)&65535)<<16),i^=i>>>24,i=1540483477*(65535&i)+((1540483477*(i>>>16)&65535)<<16),n=1540483477*(65535&n)+((1540483477*(n>>>16)&65535)<<16)^i,t-=4,++r;switch(t){case 3:n^=(255&e.charCodeAt(r+2))<<16;case 2:n^=(255&e.charCodeAt(r+1))<<8;case 1:n^=255&e.charCodeAt(r),n=1540483477*(65535&n)+((1540483477*(n>>>16)&65535)<<16)}return n^=n>>>13,n=1540483477*(65535&n)+((1540483477*(n>>>16)&65535)<<16),n^=n>>>15,(n>>>0).toString(36)}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){var n=[],r=!0,i=!1,o=void 0;try{for(var s,a=e[Symbol.iterator]();!(r=(s=a.next()).done)&&(n.push(s.value),!t||n.length!==t);r=!0);}catch(e){i=!0,o=e}finally{try{!r&&a.return&&a.return()}finally{if(i)throw o}}return n}return function(t,n){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},a=function(e){return Object.keys(e).map(function(t){return[t,e[t]]})};t.objectToPairs=a;var l=function(e){var t={};return e.forEach(function(e){var n=o(e,2),r=n[0],i=n[1];t[r]=i}),t},p=function(e,t){return l(a(e).map(t))};t.mapObj=p;var c=function(e){return e.reduce(function(e,t){return e.concat(t)},[])};t.flatten=c;var u=/([A-Z])/g,h=/^ms-/,d=function(e){return e.replace(u,"-$1").toLowerCase()},f=function(e){return d(e).replace(h,"-ms-")};t.kebabifyStyleName=f;var m=function e(t,n){if("object"!=typeof t)return n;var r=s({},t);return Object.keys(n).forEach(function(i){r.hasOwnProperty(i)?r[i]=e(t[i],n[i]):r[i]=n[i]}),r};t.recursiveMerge=m;var g={animationIterationCount:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridRow:!0,gridColumn:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},v=["Webkit","ms","Moz","O"];Object.keys(g).forEach(function(e){v.forEach(function(t){g[r(t,e)]=g[e]})});var y=function(e,t){return"number"==typeof t?g[e]?""+t:t+"px":t};t.stringifyValue=y;var b=function(e){return i(JSON.stringify(e))};t.hashObject=b;var E=/^([^:]+:.*?)( !important)?;$/,T=function(e){return e.replace(E,function(e,t,n){return t+" !important;"})};t.importantify=T},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n(246),o=r(i),s=n(220),a=n(184),l=null,p=function(e){if(null==l&&(l=document.querySelector("style[data-aphrodite]"),null==l)){var t=document.head||document.getElementsByTagName("head")[0];l=document.createElement("style"),l.type="text/css",l.setAttribute("data-aphrodite",""),t.appendChild(l)}l.styleSheet?l.styleSheet.cssText+=e:l.appendChild(document.createTextNode(e))},c={fontFamily:function e(t){return Array.isArray(t)?t.map(e).join(","):"object"==typeof t?(m(t.fontFamily,"@font-face",[t],!1),'"'+t.fontFamily+'"'):t},animationName:function(e){if("object"!=typeof e)return e;var t="keyframe_"+(0,a.hashObject)(e),n="@keyframes "+t+"{";return Object.keys(e).forEach(function(t){n+=(0,s.generateCSS)(t,[e[t]],c,!1)}),n+="}",f(t,n),t}},u={},h="",d=!1,f=function(e,t){if(!u[e]){if(!d){if("undefined"==typeof document)throw new Error("Cannot automatically buffer without a document");d=!0,(0,o.default)(b)}h+=t,u[e]=!0}},m=function(e,t,n,r){if(!u[e]){var i=(0,s.generateCSS)(t,n,c,r);f(e,i)}};t.injectStyleOnce=m;var g=function(){h="",u={},d=!1,l=null};t.reset=g;var v=function(){if(d)throw new Error("Cannot buffer while already buffering");d=!0};t.startBuffering=v;var y=function(){d=!1;var e=h;return h="",e};t.flushToString=y;var b=function(){var e=y();e.length>0&&p(e)};t.flushToStyleTag=b;var E=function(){return Object.keys(u)};t.getRenderedClassNames=E;var T=function(e){e.forEach(function(e){u[e]=!0})};t.addRenderedClassNames=T},function(e,t,n){e.exports=n(34).__internalAddons.PureRenderMixin},function(e,t,n){"use strict";function r(e){a.extend(this,e)}var i=n(12),o=i.nestedMap,s=i.deepEq,a=n(57),l=function(){throw new Error("Abstract method! Must be implemented by Graphie Movable"+this.constructor.displayName)};a.extend(r.prototype,{movableProps:[],add:l,modify:l,remove:l,toFront:function(){}});var p=function(e,t){return a.extend({},e,{children:a.filter(a.flatten(t),a.identity)})},c=function(e){var t=function e(t){if(!(this instanceof e))throw new Error("Use createElement or JSX with graphie movables");return this.props=p(t,t.children||[]),this};return e.displayName=e.displayName||a.uniqueId("GraphieClass"),t.displayName=e.displayName,t.prototype=new r(e),t.prototype.constructor=t,t},u=function(e){return c({displayName:e.name||a.uniqueId("GraphieSimpleClass"),movableProps:["children"],add:function(t){this._elements=e(t,this.props),this._prevProps=this.props},modify:function(e){if(!s(this.props,this._prevProps))return this.remove(),this.add(e),this._prevProps=this.props,"reordered"},remove:function(){o(this._elements,function(e){e&&e.remove()}),this._elements=null,this._prevProps=null},toFront:function(){o(this._elements,function(e){a.isFunction(e.toFront)&&e.toFront()})}})};e.exports={GraphieMovable:r,createClass:c,createSimpleClass:u}},function(e,t,n){"use strict";var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},i=n(57),o=n(187),s=n(195),a=n(189),l=n(197),p=(a.assert,o.createClass({displayName:"MovablePoint",movableProps:["children"],_getProps:function(){if(this.props.isMobile){var e=this.props.isMobile,t=e?{stroke:"#ffffff","stroke-width":3,fill:l.INTERACTIVE}:{stroke:l.INTERACTIVE,fill:l.INTERACTIVE},n=e?Object.assign(t,this.props.mobileStyleOverride||{}):Object.assign(t,this.props.normalStyle),i=e?r({},t,{"stroke-width":0,scale:.75}):this.props.highlightStyle,o=Object.assign({normalStyle:n,highlightStyle:i,shadow:e,tooltip:e&&this.props.showTooltips},e?{pointSize:7}:{});return Object.assign(this.props,o)}return this.props},add:function(e){this.point=s.addMovablePoint(e,this._getProps())},modify:function(){this.point.modify(this._getProps())},remove:function(){this.point.remove()},toFront:function(){this.point.toFront()},grab:function(e){this.point.grab(e)}}));i.extend(p,s.MovablePoint);var c=o.createClass({displayName:"MovableLine",movableProps:["children"],add:function(e){var t=i.pluck(this.props.children,"point"),n=i.extend({},this.props,{points:t});this.line=s.addMovableLine(e,n)},modify:function(){var e=i.pluck(this.props.children,"point"),t=i.extend({},this.props,{points:e});this.line.modify(t)},remove:function(){this.line.remove()},toFront:function(){this.line.toFront()}});i.extend(c,s.MovableLine);var u=o.createSimpleClass(function(e,t){var n=t.coord;return t.unscaled&&(n=e.unscalePoint(n)),e.label(n,t.text,t.direction,t.tex,t.style)}),h=o.createClass({displayName:"Line",movableProps:["children"],add:function(e){var t=this.props;this.graphie=e,this.line=this.graphie.line(t.start,t.end,t.style)},modify:function(){var e=this.props,t=this.graphie.svgPath([e.start,e.end]);this.line.attr(i.extend({},e.style,{path:t}))},remove:function(){this.line.remove()},toFront:function(){this.line.toFront()}}),d=o.createClass({displayName:"Parabola",movableProps:["children"],add:function(e){var t=this.props;this.graphie=e,this.parabola=this.graphie.parabola(t.a,t.b,t.c,t.style)},modify:function(){var e=this.props,t=this.graphie.svgParabolaPath(e.a,e.b,e.c);this.parabola.attr(i.extend({},e.style,{path:t}))},remove:function(){this.parabola.remove()},toFront:function(){this.parabola.toFront()}}),f=o.createClass({displayName:"Sinusoid",movableProps:["children"],add:function(e){var t=this.props;this.graphie=e,this.sinusoid=this.graphie.sinusoid(t.a,t.b,t.c,t.d,t.style)},modify:function(){var e=this.props,t=this.graphie.svgSinusoidPath(e.a,e.b,e.c,e.d);this.sinusoid.attr(i.extend({},e.style,{path:t}))},remove:function(){this.sinusoid.remove()},toFront:function(){this.sinusoid.toFront()}}),m=o.createSimpleClass(function(e,t){return e.plot(t.fn,t.range,t.style)}),g=o.createSimpleClass(function(e,t){return e.plotParametric(t.fn,t.range,t.style)}),v=o.createSimpleClass(function(e,t){return e.ellipse(t.coord,e.unscaleVector([4,4]),{fill:t.color||l.BLACK,stroke:t.color||l.BLACK})}),y=o.createClass({displayName:"Path",movableProps:["children"],add:function(e){var t=this.props;this.graphie=e,this.path=this.graphie.path(t.coords,t.style)},modify:function(){var e=this.props,t=this.graphie.svgPath(e.coords);this.path.attr({path:t})},remove:function(){this.path.remove()},toFront:function(){this.path.toFront()}}),b=o.createSimpleClass(function(e,t){var n=t.center,r=t.radius;return t.unscaled&&(n=e.unscalePoint(n),r=e.unscaleVector(r)),e.arc(n,r,t.startAngle,t.endAngle,t.sector,t.style)}),E=o.createSimpleClass(function(e,t){return e.circle(t.center,t.radius,t.style)}),T=o.createSimpleClass(function(e,t){return e.rect(t.x,t.y,t.width,t.height,t.style)});e.exports={Arc:b,Circle:E,Label:u,Line:h,MovableLine:c,MovablePoint:p,Parabola:d,Path:y,Plot:m,PlotParametric:g,Point:v,Sinusoid:f,Rect:T}},function(e,t,n){"use strict";function r(){var e=document.createElement("div"),t=["transform","msTransform","MozTransform","WebkitTransform","OTransform"],n=null;return o.each(t,function(t){"undefined"!=typeof e.style[t]&&(n=t)}),n}function i(){var e=document.createElement("div"),t=p.getPrefixedTransform();return e.style[t]="translateZ(0px)",!!e.style[t]}var o=n(57),s=n(222),a=null,l=null,p={assert:function(e,t){if(!e)throw new Error("Assertion Error"+(t?": "+t:""))},createGettersFor:function(e,t){o.each(o.keys(t),function(t){void 0===e.prototype[t]&&(e.prototype[t]=function(){return this.state[t]})})},addMovableHelperMethodsTo:function(e){o.each(s,function(t,n){void 0===e.prototype[n]&&(e.prototype[n]=t)})},arrayify:function(e){return null==e?[]:o.isArray(e)?o.filter(o.flatten(e),o.identity):[e]},normalizeOptions:function(e,t){var n=o.clone(t);return o.each(e,function(e){var r=t[e];if(void 0!==r){var i=p.arrayify(r);n[e]=i}}),n},getPrefixedTransform:function(){return a=a||r()},getCanUse3dTransform:function(){return null==l&&(l=i()),l}};e.exports=p},function(e,t,n){"use strict";var r=n(223);n(224),e.exports=r},function(e,t,n){(function(t){!function(){var n=/\r\n?/g,r=/\t/g,i=/\f/g,o=function(e){return e.replace(n,"\n").replace(i,"").replace(r,"    ")},s=function(e){var t=Object.keys(e);t.sort(function(t,n){var r=e[t].order,i=e[n].order;return r!==i?r-i:t<n?-1:t>n?1:0});var n=function(r,i){var o=[];i=i||{};for(var s="";r;){for(var a=0;a<t.length;){var l,p=t[a],c=e[p];if(l=c.match?c.match(r,i,s):c.regex.exec(r)){var u=l[0];r=r.substring(u.length);var h=c.parse(l,n,i);null==h.type&&(h.type=p),o.push(h),s=u;break}a++}if(a===t.length)throw new Error("could not find rule to match content: "+r)}return o},r=function(e,t){return n(o(e),t)};return r},a=function(e){var t=function(t,n){return n.inline?e.exec(t):null};return t.regex=e,t},l=function(e){var t=function(t,n){return n.inline?null:e.exec(t)};return t.regex=e,t},p=function(e){var t=function(t,n){return e.exec(t)};return t.regex=e,t},c=function(e){var t=function(n,r){if(r=r||{},Array.isArray(n)){for(var i=r.key,o=[],s=!1,a=0;a<n.length;a++){r.key=a;var l=t(n[a],r),p="string"==typeof l;p&&s?o[o.length-1]+=l:o.push(l),s=p}return r.key=i,o}return e(n,t,r)};return t},u=function(e){var t=function(n,r){return r=r||{},Array.isArray(n)?n.map(function(e){return t(e,r)}).join(""):e(n,t,r)};return t},h="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103,d=function(e){return e._store={validated:!0,originalProps:e.props},e},f=function(e,t,n,r){n=n||{},r="undefined"==typeof r||r;var i="";for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&n[o]&&(i+=" "+o+'="'+n[o]+'"');var s="<"+e+i+">";return r?s+t+"</"+e+">":s},m={},g=function(e){if(null==e)return null;try{var t=decodeURIComponent(e).replace(/[^A-Za-z0-9/:]/g,"").toLowerCase();if(0===t.indexOf("javascript:"))return null}catch(e){return null}return e},v=function(e,t,n){var r=n.inline||!1;n.inline=!0;var i=e(t,n);return n.inline=r,i},y=function(e,t,n){var r=n.inline||!1;n.inline=!1;var i=e(t+"\n\n",n);return n.inline=r,i},b=function(e,t,n){return{content:v(t,e[1],n)}},E=function(){return{}},T="(?:[*+-]|\\d+\\.)",x="( *)("+T+") +",w=new RegExp("^"+x),C=new RegExp(x+"[^\\n]*(?:\\n(?!\\1"+T+" )[^\\n]*)*(\n|$)","gm"),P=/\n{2,}$/,S=P,k=/ *\n+$/,N=new RegExp("^( *)("+T+") [\\s\\S]+?(?:\n{2,}(?! )(?!\\1"+T+" )\\n*|\\s*\n*$)"),M=/^$|\n *$/,_=function(){var e=/^ *| *\| *$/g,t=/^ *|\| *$/g,n=/(?: *\| *)?\n$/,r=/\n$/,i=/^ *\| *| *\| *$/g,o=/ *\| */,s=/^ *-+: *$/,a=/^ *:-+: *$/,l=/^ *:-+ *$/,p=function(e){return s.test(e)?"right":a.test(e)?"center":l.test(e)?"left":null},c=function(t,n,r){var i=t[1].replace(e,"").split(o);return i.map(function(e){return n(e,r)})},u=function(e,n,r){var i=e[2].replace(t,"").split(o);return i.map(p)},h=function(e,t,r){var s=e[3].replace(n,"").split("\n");return s.map(function(e){var n=e.replace(i,"").split(o);return n.map(function(e){return t(e,r)})})},d=function(e,t,n){var i=e[3].replace(r,"").split("\n");return i.map(function(e){var r=e.split(o);return r.map(function(e){return t(e,n)})})},f=function(e,t,n){n.inline=!0;var r=c(e,t,n),i=u(e,t,n),o=h(e,t,n);return n.inline=!1,{type:"table",header:r,align:i,cells:o}},m=function(e,t,n){n.inline=!0;var r=c(e,t,n),i=u(e,t,n),o=d(e,t,n);return n.inline=!1,{type:"table",header:r,align:i,cells:o}};return{parseTable:f,parseNpTable:m,NPTABLE_REGEX:/^ *(\S.*\|.*)\n *([-:]+ *\|[-| :]*)\n((?:.*\|.*(?:\n|$))*)\n*/}}(),O="(?:\\[[^\\]]*\\]|[^\\]]|\\](?=[^\\[]*\\]))*",A="\\s*<?([^\\s]*?)>?(?:\\s+['\"]([\\s\\S]*?)['\"])?\\s*",I=/mailto:/i,R=function(e,t,n){var r=(e[2]||e[1]).replace(/\s+/g," ").toLowerCase();if(t._defs&&t._defs[r]){var i=t._defs[r];n.target=i.target,n.title=i.title}return t._refs=t._refs||{},t._refs[r]=t._refs[r]||[],t._refs[r].push(n),n},D={heading:{match:l(/^ *(#{1,6}) *([^\n]+?) *#* *(?:\n *)+\n/),parse:function(e,t,n){return{level:e[1].length,content:v(t,e[2],n)}},react:function(e,t,n){return d({type:"h"+e.level,key:n.key,props:{children:t(e.content,n)},$$typeof:h,_store:null})},html:function(e,t,n){return f("h"+e.level,t(e.content,n))}},nptable:{match:l(_.NPTABLE_REGEX),regex:_.NPTABLE_REGEX,parse:_.parseNpTable},lheading:{match:l(/^([^\n]+)\n *(=|-){3,} *(?:\n *)+\n/),parse:function(e,t,n){return{type:"heading",level:"="===e[2]?1:2,content:v(t,e[1],n)}}},hr:{match:l(/^( *[-*_]){3,} *(?:\n *)+\n/),parse:E,react:function(e,t,n){return d({type:"hr",key:n.key,props:m,$$typeof:h,_store:null})},html:function(e,t,n){return"<hr>"}},codeBlock:{match:l(/^(?:    [^\n]+\n*)+(?:\n *)+\n/),parse:function(e,t,n){var r=e[0].replace(/^    /gm,"").replace(/\n+$/,"");return{lang:void 0,content:r}},react:function(e,t,n){var r=e.lang?"markdown-code-"+e.lang:void 0;return d({type:"pre",key:n.key,props:{children:d({type:"code",props:{className:r,children:e.content},$$typeof:h,_store:null})},$$typeof:h,_store:null})},html:function(e,t,n){var r=e.lang?"markdown-code-"+e.lang:void 0,i=f("code",e.content,{class:r});return f("pre",i)}},fence:{match:l(/^ *(`{3,}|~{3,}) *(\S+)? *\n([\s\S]+?)\s*\1 *(?:\n *)+\n/),parse:function(e,t,n){return{type:"codeBlock",lang:e[2]||void 0,content:e[3]}}},blockQuote:{match:l(/^( *>[^\n]+(\n[^\n]+)*\n*)+\n{2,}/),parse:function(e,t,n){var r=e[0].replace(/^ *> ?/gm,"");return{content:t(r,n)}},react:function(e,t,n){return d({type:"blockquote",key:n.key,props:{children:t(e.content,n)},$$typeof:h,_store:null})},html:function(e,t,n){return f("blockquote",t(e.content,n))}},list:{match:function(e,t,n){var r=M.test(n),i=t._list||!t.inline;return r&&i?N.exec(e):null},parse:function(e,t,n){var r=e[2],i=r.length>1,o=i?+r:void 0,s=e[0].replace(S,"\n").match(C),a=!1,l=s.map(function(e,r){var i=w.exec(e)[0].length,o=new RegExp("^ {1,"+i+"}","gm"),l=e.replace(o,"").replace(w,""),p=r===s.length-1,c=l.indexOf("\n\n")!==-1,u=c||p&&a;a=u;var h=n.inline,d=n._list;n._list=!0;var f;u?(n.inline=!1,f=l.replace(k,"\n\n")):(n.inline=!0,f=l.replace(k,""));var m=t(f,n);return n.inline=h,n._list=d,m});return{ordered:i,start:o,items:l}},react:function(e,t,n){var r=e.ordered?"ol":"ul";return d({type:r,key:n.key,props:{start:e.start,children:e.items.map(function(e,r){return d({type:"li",key:r,props:{children:t(e,n)},$$typeof:h,_store:null})})},$$typeof:h,_store:null})},html:function(e,t,n){var r=e.items.map(function(e){return f("li",t(e,n))}).join(""),i=e.ordered?"ol":"ul",o={start:e.start};return f(i,r,o)}},def:{match:l(/^ *\[([^\]]+)\]: *<?([^\s>]*)>?(?: +["(]([^\n]+)[")])? *\n(?: *\n)?/),parse:function(e,t,n){var r=e[1].replace(/\s+/g," ").toLowerCase(),i=e[2],o=e[3];return n._refs&&n._refs[r]&&n._refs[r].forEach(function(e){e.target=i,e.title=o}),n._defs=n._defs||{},n._defs[r]={target:i,title:o},{def:r,target:i,title:o}},react:function(){return null},html:function(){return null}},table:{match:l(/^ *\|(.+)\n *\|( *[-:]+[-| :]*)\n((?: *\|.*(?:\n|$))*)\n*/),parse:_.parseTable,react:function(e,t,n){var r=function(t){return null==e.align[t]?{}:{textAlign:e.align[t]}},i=e.header.map(function(e,i){return d({type:"th",key:i,props:{style:r(i),children:t(e,n)},$$typeof:h,_store:null})}),o=e.cells.map(function(e,i){return d({type:"tr",key:i,props:{children:e.map(function(e,i){return d({type:"td",key:i,props:{style:r(i),children:t(e,n)},$$typeof:h,_store:null})})},$$typeof:h,_store:null})});return d({type:"table",key:n.key,props:{children:[d({type:"thead",key:"thead",props:{children:d({type:"tr",props:{children:i},$$typeof:h,_store:null})},$$typeof:h,_store:null}),d({type:"tbody",key:"tbody",props:{children:o},$$typeof:h,_store:null})]},$$typeof:h,_store:null})},html:function(e,t,n){var r=function(t){return null==e.align[t]?"":"text-align:"+e.align[t]+";"},i=e.header.map(function(e,i){return f("th",t(e,n),{style:r(i)})}).join(""),o=e.cells.map(function(e){var i=e.map(function(e,i){return f("td",t(e,n),{style:r(i)})}).join("");return f("tr",i)}).join(""),s=f("thead",f("tr",i)),a=f("tbody",o);return f("table",s+a)}},newline:{match:l(/^(?:\n *)*\n/),parse:E,react:function(e,t,n){return"\n"},html:function(e,t,n){return"\n"}},paragraph:{match:l(/^((?:[^\n]|\n(?! *\n))+)(?:\n *)+\n/),parse:b,react:function(e,t,n){return d({type:"div",key:n.key,props:{className:"paragraph",children:t(e.content,n)},$$typeof:h,_store:null})},html:function(e,t,n){var r={class:"paragraph"};return f("div",t(e.content,n),r)}},escape:{match:a(/^\\([^0-9A-Za-z\s])/),parse:function(e,t,n){return{type:"text",content:e[1]}}},autolink:{match:a(/^<([^ >]+:\/[^ >]+)>/),parse:function(e,t,n){return{type:"link",content:[{type:"text",content:e[1]}],target:e[1]}}},mailto:{match:a(/^<([^ >]+@[^ >]+)>/),parse:function(e,t,n){var r=e[1],i=e[1];return I.test(i)||(i="mailto:"+i),{type:"link",content:[{type:"text",content:r}],target:i}}},url:{match:a(/^(https?:\/\/[^\s<]+[^<.,:;"')\]\s])/),parse:function(e,t,n){return{type:"link",content:[{type:"text",content:e[1]}],target:e[1],title:void 0}}},link:{match:a(new RegExp("^\\[("+O+")\\]\\("+A+"\\)")),parse:function(e,t,n){var r={content:t(e[1],n),target:e[2],title:e[3]};return r},react:function(e,t,n){return d({type:"a",key:n.key,props:{href:g(e.target),title:e.title,children:t(e.content,n)},$$typeof:h,_store:null})},html:function(e,t,n){var r={href:g(e.target),title:e.title};return f("a",t(e.content,n),r)}},image:{match:a(new RegExp("^!\\[("+O+")\\]\\("+A+"\\)")),parse:function(e,t,n){var r={alt:e[1],target:e[2],title:e[3]};return r},react:function(e,t,n){return d({type:"img",key:n.key,props:{src:g(e.target),alt:e.alt,title:e.title},$$typeof:h,_store:null})},html:function(e,t,n){var r={src:g(e.target),alt:e.alt,title:e.title};return f("img","",r,!1)}},reflink:{match:a(new RegExp("^\\[("+O+")\\]\\s*\\[([^\\]]*)\\]")),parse:function(e,t,n){return R(e,n,{type:"link",content:t(e[1],n)})}},refimage:{match:a(new RegExp("^!\\[("+O+")\\]\\s*\\[([^\\]]*)\\]")),parse:function(e,t,n){return R(e,n,{type:"image",alt:e[1]})}},strong:{match:a(/^\*\*([\s\S]+?)\*\*(?!\*)/),parse:b,react:function(e,t,n){return d({type:"strong",key:n.key,props:{children:t(e.content,n)},$$typeof:h,_store:null})},html:function(e,t,n){return f("strong",t(e.content,n))}},u:{match:a(/^__([\s\S]+?)__(?!_)/),parse:b,react:function(e,t,n){return d({type:"u",key:n.key,props:{children:t(e.content,n)},$$typeof:h,_store:null})},html:function(e,t,n){return f("u",t(e.content,n))}},em:{match:a(new RegExp("^\\b_((?:__|[\\s\\S])+?)_\\b|^\\*(?=\\S)((?:\\*\\*|\\s+[^\\*\\s]|[^\\s\\*])*?[^\\s\\*])\\*(?!\\*)")),parse:function(e,t,n){return{content:t(e[2]||e[1],n)}},react:function(e,t,n){return d({type:"em",key:n.key,props:{children:t(e.content,n)},$$typeof:h,_store:null})},html:function(e,t,n){return f("em",t(e.content,n))}},del:{match:a(/^~~(?=\S)([\s\S]*?\S)~~/),parse:b,react:function(e,t,n){return d({type:"del",key:n.key,props:{children:t(e.content,n)},$$typeof:h,_store:null})},html:function(e,t,n){return f("del",t(e.content,n))}},inlineCode:{match:a(/^(`+)\s*([\s\S]*?[^`])\s*\1(?!`)/),parse:function(e,t,n){return{content:e[2]}},react:function(e,t,n){return d({type:"code",key:n.key,props:{children:e.content},$$typeof:h,_store:null})},html:function(e,t,n){return f("code",e.content)}},br:{match:p(/^ {2,}\n/),parse:E,react:function(e,t,n){return d({type:"br",key:n.key,props:m,$$typeof:h,_store:null})},html:function(e,t,n){return"<br>"}},text:{match:a(/^[\s\S]+?(?=[^0-9A-Za-z\s\u00ff-\uffff]|\n\n| {2,}\n|\w+:\S|$)/),parse:function(e,t,n){return{content:e[0]}},react:function(e,t,n){return e.content},html:function(e,t,n){return e.content}}};Object.keys(D).forEach(function(e,t){D[e].order=t});var L=function(e,t){t||"undefined"==typeof console||console.warn("simple-markdown ruleOutput should take 'react' or 'html' as the second argument."),t=t||"react";var n=function(n,r,i){return e[n.type][t](n,r,i)};return n},F=s(D),q=function(e){return F(e+"\n\n",{inline:!1})},z=function(e){return F(e,{inline:!0})},B=function(e){return F(e,{inline:!P.test(e)})},j=c(L(D,"react")),W=u(L(D,"html")),H={defaultRules:D,parserFor:s,ruleOutput:L,reactFor:c,htmlFor:u,inlineRegex:a,blockRegex:l,anyScopeRegex:p,parseInline:v,parseBlock:y,defaultRawParse:F,defaultBlockParse:q,defaultInlineParse:z,defaultImplicitParse:B,defaultReactOutput:j,defaultHtmlOutput:W,preprocess:o,sanitizeUrl:g,defaultParse:B,outputFor:c,defaultOutput:j};"undefined"!=typeof e&&e.exports?e.exports=H:"undefined"!=typeof t?t.SimpleMarkdown=H:window.SimpleMarkdown=H}()}).call(t,function(){return this}())},function(e,t,n){"use strict";var r=n(82),i=r.StyleSheet,o=r.css,s=n(34),a=n(57),l={grayLight:"#aaa",basicBorderColor:"#ccc",white:"#fff"},p={borderBottom:"9px solid transparent",borderTop:"9px solid transparent",content:'" "',height:"0",position:"absolute",top:"0",width:"0"},c=i.create({infoTip:{display:"inline-block",marginLeft:"5px",position:"relative"},infoTipContainer:{position:"absolute",top:"-12px",left:"22px",zIndex:"1000"},infoTipTriangle:{height:"10px",left:"0",position:"absolute",top:"8px",width:"0",zIndex:"1",":before":a.extend({},p,{borderRight:"9px solid #bbb",right:"0"}),":after":a.extend({},p,{borderRight:"9px solid "+l.white,right:"-1px"})},verticalShadow:{border:"1px solid "+l.basicBorderColor,boxShadow:"0 1px 3px "+l.basicBorderColor,borderBottom:"1px solid "+l.grayLight},infoTipContentContainer:{background:l.white,padding:"5px 10px",width:"240px"}}),u="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAoAAAAKCAYAAACNMs+9AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAA3NpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNS1jMDIxIDc5LjE1NDkxMSwgMjAxMy8xMC8yOS0xMTo0NzoxNiAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wTU09Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9tbS8iIHhtbG5zOnN0UmVmPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VSZWYjIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtcE1NOk9yaWdpbmFsRG9jdW1lbnRJRD0ieG1wLmRpZDo2N2M3NTAxYS04YmVlLTQ0M2MtYmRiNS04OGM2N2IxN2NhYzEiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6OUJCRTk4Qjc4NjAwMTFFMzg3QUJDNEI4Mzk2QTRGQkQiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6OUJCRTk4QjY4NjAwMTFFMzg3QUJDNEI4Mzk2QTRGQkQiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIChNYWNpbnRvc2gpIj4gPHhtcE1NOkRlcml2ZWRGcm9tIHN0UmVmOmluc3RhbmNlSUQ9InhtcC5paWQ6NGE5ZDI0OTMtODk1NC00OGFkLTlhMTgtZDAwM2MwYWNjNDJlIiBzdFJlZjpkb2N1bWVudElEPSJ4bXAuZGlkOjY3Yzc1MDFhLThiZWUtNDQzYy1iZGI1LTg4YzY3YjE3Y2FjMSIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/Pqm89uYAAADMSURBVHjaXJA9DoJAEIUH1M4TUHIFsCMGen9OwCGw1YRGW2ntKel0exsojHIBC0ouQAyUviFDstmXfNmZeS+zm7XSNCXRFiRgJf0bXIHixpbhGdxBBJYC1w/xaA424MhNEATkui71fU9KqfEU78UbD9PdbJRlOdae55GmhIP+1NV1TcMwkOM41DSNHvRtMhTHMRVFQW3b6mOLgx99kue5GRp/gIOZuZGvNpTNwjD8oliANU+qqqKu6/TQBdymN57AHjzBT+B6Jx79BRgAvc49kQA4yxgAAAAASUVORK5CYII=",h=s.createClass({displayName:"InfoTip",getInitialState:function(){return{hover:!1}},render:function(){return s.createElement("div",{className:o(c.infoTip)},s.createElement("img",{width:10,height:10,src:u,onMouseEnter:this.handleMouseEnter,onMouseLeave:this.handleMouseLeave}),s.createElement("div",{className:o(c.infoTipContainer),style:{display:this.state.hover?"block":"none"}},s.createElement("div",{className:o(c.infoTipTriangle)}),s.createElement("div",{className:o(c.verticalShadow,c.infoTipContentContainer)},this.props.children)))},handleMouseEnter:function(){this.setState({hover:!0})},handleMouseLeave:function(){this.setState({hover:!1})}});e.exports=h},function(e,t,n){var r=n(225),i=r.clone,o=r.isObject,s=r.merge,a=n(226),l=n(227),p=n(228),c=function(e){return Array.isArray(e)?a:o(e)?l:"string"==typeof e?p:void 0},u=function(e){if(e instanceof u)return e;if(!(this instanceof u))return new u(e);var t=c(e);this._wrapped=t.thaw?t.thaw(e):e};u.prototype.freeze=function(){var e=this._wrapped,t=c(e);return t.freeze?t.freeze(e):e},u.prototype.zoom=function(e){return void 0===this._zoomStack&&(this._zoomStack=[]),this._zoomStack.push({zoom:e,wrapped:this._wrapped}),this._wrapped=u(this._wrapped).get(e),this},u.prototype.deZoom=function(){var e=this._zoomStack.pop();return this._wrapped=u(e.wrapped).set(e.zoom,this._wrapped).freeze(),this},u.prototype.get=function(e){for(var t=this._wrapped,n=0;n<e.length;n++)t=c(t).get(t,e[n]);return t},u.prototype.mod=function(e,t){var n=this._wrapped,r=i(n),o=c(n);if(0===e.length)this._wrapped=t(this._wrapped);else if(1===e.length)this._wrapped=o.mod(r,e[0],t);else{
var s=e[0],a=e.slice(1);r[s]=u(n[s]).mod(a,t).freeze(),this._wrapped=r}return this},u.prototype.merge=function(e,t){return this._wrapped=u(this._wrapped).mod(e,function(e){return s(e,t)}).freeze(),this},u.prototype.del=function(e){var t=this._wrapped,n=c(t);if(1===e.length)this._wrapped=n.del(t,e[0]);else{var r=e[0],i=e.slice(1),o=n.get(t,r);this._wrapped=n.set(t,r,n.del(o,i))}return this},u.prototype.set=function(e,t){return this.mod(e,function(){return t})},e.exports=u},function(e,t,n){"use strict";var r=n(64),i=n(57),o={getUserInput:function(){return i.omit(this.props,r)}};e.exports=o},function(e,t,n){"use strict";var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},i=n(229),o=n(230),s=n(231),a=n(232),l=n(197),p={MovablePoint:o,addMovablePoint:function(e,t){var n=new i(e,{});return new o(e,n,t)},MovableLine:s,addMovableLine:function(e,t){var n=new i(e,{});return new s(e,n,t)},MovablePolygon:a,addMovablePolygon:function(e,t){var n=new i(e,{});return new a(e,n,t)},addMaybeMobileMovablePoint:function(e,t){var n=e.props.apiOptions.isMobile,i=n?{stroke:"#ffffff","stroke-width":3,fill:l.INTERACTIVE}:{stroke:l.INTERACTIVE,fill:l.INTERACTIVE},o=Object.assign(i,t.normalStyle),s=Object.assign(n?r({},i,{"stroke-width":0,scale:.75}):{},t.highlightStyle),a=Object.assign({normalStyle:o,highlightStyle:s,shadow:n,tooltip:n&&e.props.showTooltips,showHairlines:e.showHairlines,hideHairlines:e.hideHairlines},n?{pointSize:7}:{});return p.addMovablePoint(e.graphie,Object.assign(t,a))}};e.exports=p},function(e,t,n){"use strict";var r=n(57),i=n(189),o=n(233),s=n(221).point,a=n(221).vector,l=n(165),p={thickness:2,mouselayer:!1},c=function(e,t,n,i){i=r.extend({},p,i);var o=[e.range[0][0],0],a=[e.range[0][1],0];r.extend(this,e.fixedLine(o,a,i.thickness)),this.visibleShape.attr(i.normalStyle),r.extend(this,{graphie:e,initialPoint:e.scalePoint(o),initialLength:s.distanceToPoint(e.scalePoint(o),e.scalePoint(a))}),i.mouselayer?this.graphie.addToMouseLayerWrapper(this.wrapper):this.graphie.addToVisibleLayerWrapper(this.wrapper),this.moveTo(t,n)};r.extend(c.prototype,o,{getMouseTarget:function(){return this.wrapper},moveTo:function(e,t){var n=this.graphie.scalePoint(e),r=this.graphie.scalePoint(t),o=a.polarDegFromCart(a.subtract(r,n)),s=o[0],p=l.bound(o[1]),c=a.subtract(n,this.initialPoint),u=l.bound(s/this.initialLength),h=i.getCanUse3dTransform(),d="translateX("+c[0]+"px) translateY("+c[1]+"px) "+(h?" translateZ(0)":"")+"rotate("+p+"deg) scaleX("+u+") scaleY(1)";this.transform(d)}}),e.exports=c},function(e,t,n){"use strict";var r={BLUE:"#6495ED",ORANGE:"#FFA500",PINK:"#FF00AF",GREEN:"#28AE7B",PURPLE:"#9D38BD",RED:"#DF0030",GRAY:"gray",BLACK:"black",LIGHT_BLUE:"#9AB8ED",LIGHT_ORANGE:"#EDD19B",LIGHT_PINK:"#ED9BD3",LIGHT_GREEN:"#9BEDCE",LIGHT_PURPLE:"#DA9BED",LIGHT_RED:"#ED9AAC",LIGHT_GRAY:"#ED9B9B",LIGHT_BLACK:"#ED9B9B",GRAY10:"#D6D6D6",GRAY20:"#CDCDCD",GRAY30:"#B3B3B3",GRAY40:"#9A9A9A",GRAY50:"#808080",GRAY60:"#666666",GRAY70:"#4D4D4D",GRAY80:"#333333",GRAY90:"#1A1A1A",BLUE_A:"#CCFAFF",BLUE_B:"#80F6FF",BLUE_C:"#63D9EA",BLUE_D:"#11ACCD",BLUE_E:"#0C7F99",TEAL_A:"#94FFF5",TEAL_B:"#26EDD5",TEAL_C:"#01D1C1",TEAL_D:"#01A995",TEAL_E:"#208170",GREEN_A:"#B6FFB0",GREEN_B:"#8AF281",GREEN_C:"#74CF70",GREEN_D:"#1FAB54",GREEN_E:"#0D923F",GOLD_A:"#FFD0A9",GOLD_B:"#FFBB71",GOLD_C:"#FF9C39",GOLD_D:"#E07D10",GOLD_E:"#A75A05",RED_A:"#FCA9A9",RED_B:"#FF8482",RED_C:"#F9685D",RED_D:"#E84D39",RED_E:"#BC2612",MAROON_A:"#FFBDE0",MAROON_B:"#FF92C6",MAROON_C:"#ED5FA6",MAROON_D:"#CA337C",MAROON_E:"#9E034E",PURPLE_A:"#DDD7FF",PURPLE_B:"#C6B9FC",PURPLE_C:"#AA87FF",PURPLE_D:"#7854AB",PURPLE_E:"#543B78",MINT_A:"#F5F9E8",MINT_B:"#EDF2DF",MINT_C:"#E0E5CC",GRAY_A:"#F6F7F7",GRAY_B:"#F0F1F2",GRAY_C:"#E3E5E6",GRAY_D:"#D6D8DA",GRAY_E:"#BABEC2",GRAY_F:"#888D93",GRAY_G:"#626569",GRAY_H:"#3B3E40",GRAY_I:"#21242C",KA_BLUE:"#314453",KA_GREEN:"#71B307",_BACKGROUND:"#FDFDFD"};r.INTERACTING=r.KA_GREEN,r.INTERACTIVE=r.KA_GREEN,r.DYNAMIC=r.BLUE,e.exports=r},function(e,t,n){"use strict";function r(e,t){return Math.floor((e[1]-e[0])/t)}var i=n(34),o=n(35),s=n(57),a=n(172),l=n(81),p=n(89),c=n(45),u=n(200),h=n(80),d=n(12),f=n(165),m=n(78),g=m.interactiveSizes,v={url:null,width:0,height:0},y=i.createClass({displayName:"GraphSettings",mixins:[a],propTypes:{editableSettings:i.PropTypes.arrayOf(i.PropTypes.oneOf(["canvas","graph","snap","image","measure"])),box:i.PropTypes.arrayOf(i.PropTypes.number),labels:i.PropTypes.arrayOf(i.PropTypes.string),range:i.PropTypes.arrayOf(i.PropTypes.arrayOf(i.PropTypes.number)),step:i.PropTypes.arrayOf(i.PropTypes.number),gridStep:i.PropTypes.arrayOf(i.PropTypes.number),snapStep:i.PropTypes.arrayOf(i.PropTypes.number),valid:i.PropTypes.oneOfType([i.PropTypes.bool,i.PropTypes.string]),backgroundImage:i.PropTypes.object,markings:i.PropTypes.oneOf(["graph","grid","none"]),showProtractor:i.PropTypes.bool,showRuler:i.PropTypes.bool,showTooltips:i.PropTypes.bool,rulerLabel:i.PropTypes.string,rulerTicks:i.PropTypes.number},getInitialState:function(){return{labelsTextbox:this.props.labels,gridStepTextbox:this.props.gridStep,snapStepTextbox:this.props.snapStep,stepTextbox:this.props.step,rangeTextbox:this.props.range,backgroundImage:s.clone(this.props.backgroundImage)}},getDefaultProps:function(){return{editableSettings:["graph","snap","image","measure"],box:[g.defaultBoxSizeSmall,g.defaultBoxSizeSmall],labels:["x","y"],range:[[-10,10],[-10,10]],step:[1,1],gridStep:[1,1],snapStep:[1,1],valid:!0,backgroundImage:v,markings:"graph",showProtractor:!1,showRuler:!1,showTooltips:!1,rulerLabel:"",rulerTicks:10}},render:function(){var e=this,t=[f.roundTo(2,d.scaleFromExtent(this.props.range[0],this.props.box[0])),f.roundTo(2,d.scaleFromExtent(this.props.range[1],this.props.box[1]))];return i.createElement("div",null,s.contains(this.props.editableSettings,"canvas")&&i.createElement("div",{className:"graph-settings"},i.createElement("div",{className:"perseus-widget-row"},"Canvas size (x,y pixels)",i.createElement(u,{value:this.props.box,onChange:function(t){e.change({box:t})}})),i.createElement("div",{className:"perseus-widget-row"},"Scale (px per div): ",i.createElement(h,null,"("+t[0]+", "+t[1]+")"))),s.contains(this.props.editableSettings,"graph")&&i.createElement("div",{className:"graph-settings"},i.createElement("div",{className:"perseus-widget-row"},i.createElement("div",{className:"perseus-widget-left-col"}," x Label",i.createElement("input",{type:"text",className:"graph-settings-axis-label",ref:"labels-0",onChange:function(t){return e.changeLabel(0,t)},value:this.state.labelsTextbox[0]})),i.createElement("div",{className:"perseus-widget-right-col"},"y Label",i.createElement("input",{type:"text",className:"graph-settings-axis-label",ref:"labels-1",onChange:function(t){return e.changeLabel(1,t)},value:this.state.labelsTextbox[1]}))),i.createElement("div",{className:"perseus-widget-row"},i.createElement("div",{className:"perseus-widget-left-col"},"x Range",i.createElement(u,{value:this.state.rangeTextbox[0],onChange:function(t){return e.changeRange(0,t)}})),i.createElement("div",{className:"perseus-widget-right-col"},"y Range",i.createElement(u,{value:this.state.rangeTextbox[1],onChange:function(t){return e.changeRange(1,t)}}))),i.createElement("div",{className:"perseus-widget-row"},i.createElement("div",{className:"perseus-widget-left-col"},"Tick Step",i.createElement(u,{value:this.state.stepTextbox,onChange:this.changeStep})),i.createElement("div",{className:"perseus-widget-right-col"},"Grid Step",i.createElement(u,{value:this.state.gridStepTextbox,onChange:this.changeGridStep}))),s.contains(this.props.editableSettings,"snap")&&i.createElement("div",{className:"perseus-widget-row"},i.createElement("div",{className:"perseus-widget-left-col"},"Snap Step",i.createElement(u,{value:this.state.snapStepTextbox,onChange:this.changeSnapStep}))),i.createElement("div",{className:"perseus-widget-row"},i.createElement("label",null,"Markings:"," "," "),i.createElement(l,{value:this.props.markings,allowEmpty:!1,buttons:[{value:"graph",content:"Graph"},{value:"grid",content:"Grid"},{value:"none",content:"None"}],onChange:this.change("markings")})),i.createElement("div",{className:"perseus-widget-left-col"},i.createElement(c,{label:"Show tooltips",showTooltips:this.props.showTooltips,onChange:this.change}))),s.contains(this.props.editableSettings,"image")&&i.createElement("div",{className:"image-settings"},i.createElement("div",null,"Background image:"),i.createElement("div",null,"Url:"," ",i.createElement("input",{type:"text",className:"graph-settings-background-url",ref:"bg-url",defaultValue:this.state.backgroundImage.url,onKeyPress:this.changeBackgroundUrl,onBlur:this.changeBackgroundUrl}),i.createElement(p,null,i.createElement("p",null,'Create an image in graphie, or use the "Add image" function to create a background.')))),s.contains(this.props.editableSettings,"measure")&&i.createElement("div",{className:"misc-settings"},i.createElement("div",{className:"perseus-widget-row"},i.createElement("div",{className:"perseus-widget-left-col"},i.createElement(c,{label:"Show ruler",showRuler:this.props.showRuler,onChange:this.change})),i.createElement("div",{className:"perseus-widget-right-col"},i.createElement(c,{label:"Show protractor",showProtractor:this.props.showProtractor,onChange:this.change}))),this.props.showRuler&&i.createElement("div",null,i.createElement("div",null,i.createElement("label",null," ","Ruler label:"," ",i.createElement("select",{onChange:this.changeRulerLabel,value:this.props.rulerLabel},i.createElement("option",{value:""},"None"),i.createElement("optgroup",{label:"Metric"},this.renderLabelChoices([["milimeters","mm"],["centimeters","cm"],["meters","m"],["kilometers","km"]])),i.createElement("optgroup",{label:"Imperial"},this.renderLabelChoices([["inches","in"],["feet","ft"],["yards","yd"],["miles","mi"]]))))),i.createElement("div",null,i.createElement("label",null," ","Ruler ticks:"," ",i.createElement("select",{onChange:this.changeRulerTicks,value:this.props.rulerTicks},s.map([1,2,4,8,10,16],function(e){return i.createElement("option",{value:e},e)})))))))},renderLabelChoices:function(e){return s.map(e,function(e){return i.createElement("option",{value:e[1]},e[0])})},componentDidMount:function(){this.changeGraph=s.debounce(this.changeGraph,300)},validRange:function(e){var t=s.every(e,function(e){return s.isFinite(e)});return t?!(e[0]>=e[1])||"Range must have a higher number on the right":"Range must be a valid number"},validateStepValue:function(e){var t=e.step,n=e.range,i=e.name,o=e.minTicks,a=e.maxTicks;if(!s.isFinite(t))return i+" must be a valid number";var l=r(n,t);return l<o?i+" is too large, there must be at least "+o+" ticks.":!(l>a)||i+" is too small, there can be at most "+a+" ticks."},validSnapStep:function(e,t){return this.validateStepValue({step:e,range:t,name:"Snap step",minTicks:5,maxTicks:60})},validGridStep:function(e,t){return this.validateStepValue({step:e,range:t,name:"Grid step",minTicks:3,maxTicks:60})},validStep:function(e,t){return this.validateStepValue({step:e,range:t,name:"Step",minTicks:3,maxTicks:20})},validBackgroundImageSize:function(e){if(!e.url)return!0;var t=e.width<=450&&e.height<=450;return!!t||"Image must be smaller than 450px x 450px."},validateGraphSettings:function(e,t,n,r,i){var o=this,a=void 0,l=s.every(e,function(e){return a=o.validRange(e),a===!0});if(!l)return a;var p=s.every(t,function(t,n){return a=o.validStep(t,e[n]),a===!0});if(!p)return a;var c=s.every(n,function(t,n){return a=o.validGridStep(t,e[n]),a===!0});if(!c)return a;var u=s.every(r,function(t,n){return a=o.validSnapStep(t,e[n]),a===!0});if(!u)return a;var h=this.validBackgroundImageSize(i);return h===!0||(a=h)},changeLabel:function(e,t){var n=t.target.value,r=this.state.labelsTextbox.slice();r[e]=n,this.setState({labelsTextbox:r},this.changeGraph)},changeRange:function(e,t){var n=this.state.rangeTextbox.slice();n[e]=t;var r=this.state.stepTextbox.slice(),i=this.state.gridStepTextbox.slice(),o=this.state.snapStepTextbox.slice(),s=d.scaleFromExtent(n[e],this.props.box[e]);this.validRange(n[e])===!0&&(r[e]=d.tickStepFromExtent(n[e],this.props.box[e]),i[e]=d.gridStepFromTickStep(r[e],s),o[e]=i[e]/2),this.setState({stepTextbox:r,gridStepTextbox:i,snapStepTextbox:o,rangeTextbox:n},this.changeGraph)},changeStep:function(e){this.setState({stepTextbox:e},this.changeGraph)},changeSnapStep:function(e){this.setState({snapStepTextbox:e},this.changeGraph)},changeGridStep:function(e){this.setState({gridStepTextbox:e,snapStepTextbox:s.map(e,function(e){return e/2})},this.changeGraph)},changeGraph:function(){var e=this.state.labelsTextbox,t=s.map(this.state.rangeTextbox,function(e){return s.map(e,Number)}),n=s.map(this.state.stepTextbox,Number),r=this.state.gridStepTextbox,i=this.state.snapStepTextbox,o=this.state.backgroundImage,a=this.validateGraphSettings(t,n,r,i,o);a===!0?this.change({valid:!0,labels:e,range:t,step:n,gridStep:r,snapStep:i,backgroundImage:o}):this.change({valid:a})},changeBackgroundUrl:function(e){var t=this;if("keypress"!==e.type||"Enter"===e.key){var n=function(e,n,r){var i=s.clone(t.props.backgroundImage);i.url=e,i.width=n,i.height=r,t.setState({backgroundImage:i},t.changeGraph)},r=o.findDOMNode(this.refs["bg-url"]).value;r?d.getImageSize(r,function(e,i){t.isMounted()&&n(r,e,i)}):n(null,0,0)}},changeRulerLabel:function(e){this.change({rulerLabel:e.target.value})},changeRulerTicks:function(e){this.change({rulerTicks:+e.target.value})}});e.exports=y},function(e,t,n){"use strict";var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},i=n(34),o=n(11).Options,s=n(42),a=n(41),l=a.iconStar,p=a.iconTryAgain,c=n(78),u=c.boldFontFamily,h=c.gray68,d=c.gray76,f=c.gray85,m=c.gray95,g=c.kaGreen,v=c.phoneMargin,y=c.negativePhoneMargin,b={HIDDEN:Symbol("HIDDEN"),ACTIVE:Symbol("ACTIVE"),INACTIVE:Symbol("INACTIVE"),INCORRECT:Symbol("INCORRECT"),CORRECT:Symbol("CORRECT")},E=i.createClass({displayName:"GradedGroupAnswerBar",propTypes:{answerBarState:i.PropTypes.any.isRequired,apiOptions:o.propTypes,onCheckAnswer:i.PropTypes.func.isRequired},render:function(){var e=this.props,t=e.apiOptions,n=e.answerBarState,o=e.onCheckAnswer,a=r({},x.answerBar,{backgroundColor:n===b.CORRECT?m:"white",justifyContent:n===b.CORRECT?"center":"space-between"}),c=r({},x.button,{backgroundColor:n===b.ACTIVE?g:f}),u=r({},x.text,{color:n===b.CORRECT?g:h}),d=n===b.INCORRECT?i.createElement("span",{style:u},i.createElement("span",{style:x.tryAgainIcon},i.createElement(s,p)),i.createElement("span",{style:{marginLeft:8}},i18n._("Keep trying"))):i.createElement("span",null);if(n!==b.CORRECT){var v=n===b.INCORRECT?i18n._("Try again"):i18n._("Check");return i.createElement("div",{style:a},d,i.createElement("input",{type:"button",style:c,value:v,disabled:t.readOnly||n!==b.ACTIVE,onClick:o}))}return i.createElement("div",{style:a},i.createElement("span",{style:u},i.createElement("span",{style:{fontSize:28,color:"#FFB300"}},i.createElement(s,r({},l,{style:{marginBottom:5}}))),i.createElement("span",{style:{marginLeft:8}},"Correct")))}}),T=17,x={answerBar:{display:"flex",alignItems:"center",height:68,marginLeft:y,marginRight:y,marginBottom:y,marginTop:v,paddingLeft:v,paddingRight:10,borderTop:"1px solid "+d},button:{height:48,width:143,borderRadius:4,color:"white",fontFamily:u,fontSize:T,border:"none"},tryAgainIcon:{fontSize:28,color:"#63D9EA",transform:"scale(-1,1) rotate(-268deg)"},text:{display:"flex",flexDirection:"row",alignItems:"center",fontFamily:u,fontSize:T}};E.ANSWER_BAR_STATES=b,e.exports=E},function(e,t,n){"use strict";var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},i=n(34),o=n(175),s=function(){return!0},a=i.createClass({displayName:"RangeInput",propTypes:{value:i.PropTypes.array.isRequired,onChange:i.PropTypes.func.isRequired,placeholder:i.PropTypes.array,checkValidity:i.PropTypes.func},getDefaultProps:function(){return{placeholder:[null,null]}},render:function(){var e=this.props.value,t=this.props.checkValidity||s;return i.createElement("div",{className:"range-input"},i.createElement(o,r({},this.props,{value:e[0],checkValidity:function(n){return t([n,e[1]])},onChange:this.onChange.bind(this,0),placeholder:this.props.placeholder[0]})),i.createElement(o,r({},this.props,{value:e[1],checkValidity:function(n){return t([e[0],n])},onChange:this.onChange.bind(this,1),placeholder:this.props.placeholder[1]})))},onChange:function(e,t){var n=this.props.value;0===e?this.props.onChange([t,n[1]]):this.props.onChange([n[0],t])}});e.exports=a},function(e,t,n){"use strict";function r(e,t){return Math.floor((e[1]-e[0])/t)}var i=n(34),o=n(35),s=n(57),a=n(12),l=n(190),p=n(78),c=p.interactiveSizes,u=n(38),h={url:null},d={fontStyle:"italic",fontWeight:"bold",fontSize:"32px",width:"100%",height:"100%",textAlign:"center",backgroundColor:"white",position:"absolute",zIndex:1,transition:"opacity .25s ease-in-out","-moz-transition":"opacity .25s ease-in-out","-webkit-transition":"opacity .25s ease-in-out"},f={position:"relative",top:"25%"},m=i.createClass({displayName:"Graph",propTypes:{box:i.PropTypes.array.isRequired,labels:i.PropTypes.arrayOf(i.PropTypes.string),range:i.PropTypes.arrayOf(i.PropTypes.arrayOf(i.PropTypes.number)),step:i.PropTypes.arrayOf(i.PropTypes.number),gridStep:i.PropTypes.arrayOf(i.PropTypes.number),snapStep:i.PropTypes.arrayOf(i.PropTypes.number),markings:i.PropTypes.string,backgroundImage:i.PropTypes.shape({url:i.PropTypes.string}),showProtractor:i.PropTypes.bool,showRuler:i.PropTypes.bool,rulerLabel:i.PropTypes.string,rulerTicks:i.PropTypes.number,onGraphieUpdated:i.PropTypes.func,instructions:i.PropTypes.string,onClick:i.PropTypes.func,setDrawingAreaAvailable:i.PropTypes.func,isMobile:i.PropTypes.bool},getDefaultProps:function(){return{labels:["x","y"],range:[[-10,10],[-10,10]],step:[1,1],gridStep:[1,1],snapStep:[.5,.5],markings:"graph",backgroundImage:h,showProtractor:!1,showRuler:!1,rulerLabel:"",rulerTicks:10,instructions:null,onGraphieUpdated:null,onClick:null,onMouseDown:null,isMobile:!1}},render:function(){var e,t=this.props.backgroundImage;if(t.url){var n=this.props.box[0]/c.defaultBoxSize;e=i.createElement(u,{src:t.url,width:t.width,height:t.height,scale:n,responsive:!1})}else e=null;return i.createElement("div",{className:"graphie-container above-scratchpad",style:{width:this.props.box[0],height:this.props.box[1]},onMouseOut:this.onMouseOut,onMouseOver:this.onMouseOver,onClick:this.onClick},e,i.createElement("div",{className:"graphie",ref:"graphieDiv"}))},componentDidMount:function(){this._setupGraphie(!0)},componentDidUpdate:function(){this._hasSetupGraphieThisUpdate=!1,this._shouldSetupGraphie&&(this._setupGraphie(!1),this._shouldSetupGraphie=!1)},componentWillReceiveProps:function(e){var t=["labels","range","step","markings","showProtractor","showRuler","rulerLabel","rulerTicks","gridStep","snapStep"],n=this;s.each(t,function(t){s.isEqual(n.props[t],e[t])||(n._shouldSetupGraphie=!0)})},reset:function(){this._setupGraphie(!1)},graphie:function(){return this._graphie},pointsFromNormalized:function(e,t){var n=this;return s.map(e,function(e){return s.map(e,function(e,i){var o=n.props.range[i];if(t)return o[0]+(o[1]-o[0])*e;var s=n.props.step[i],a=r(o,s),l=Math.round(e*a);return o[0]+s*l})})},_setupGraphie:function(e){if(!this._hasSetupGraphieThisUpdate){var t=o.findDOMNode(this.refs.graphieDiv);$(t).empty();var n=this.props.labels,r=this.props.range,i=this._graphie=l.createGraphie(t),a=this._getGridConfig();i.snap=this.props.snapStep,"graph"===this.props.markings?(i.graphInit({range:r,scale:s.pluck(a,"scale"),axisArrows:"<->",labelFormat:function(e){return"\\small{"+e+"}"},gridStep:this.props.gridStep,tickStep:s.pluck(a,"tickStep"),labelStep:1,unityLabels:s.pluck(a,"unityLabel"),isMobile:this.props.isMobile}),i.label([0,r[1][1]],n[1],this.props.isMobile?"below right":"above"),i.label([r[0][1],0],n[0],this.props.isMobile?"above left":"right")):"grid"===this.props.markings?i.graphInit({range:r,scale:s.pluck(a,"scale"),gridStep:this.props.gridStep,axes:!1,ticks:!1,labels:!1,isMobile:this.props.isMobile}):"none"===this.props.markings&&i.init({range:r,scale:s.pluck(a,"scale"),isMobile:this.props.isMobile});var p,c=.5,u=0;if(this.props.instructions){var p=$("<div/>");s.each(d,function(e,t){p.css(t,e)}),p.css("opacity",c);var h=$("<span/>",{text:this.props.instructions});s.each(f,function(e,t){h.css(t,e)}),p.append(h),$(t).append(p)}else p=void 0;var m=p||this.props.onMouseDown?s.bind(function(e){p&&(p.remove(),p=null),this.props.onMouseDown(e)},this):null,g=p?function(){p&&p.css("opacity",u)}:null,v=p?function(){p&&p.css("opacity",c)}:null;i.addMouseLayer({onClick:this.props.onClick,onMouseDown:m,onMouseOver:g,onMouseOut:v,onMouseUp:this.props.onMouseUp,onMouseMove:this.props.onMouseMove,allowScratchpad:!0,setDrawingAreaAvailable:this.props.setDrawingAreaAvailable}),this._updateProtractor(),this._updateRuler(),this._hasSetupGraphieThisUpdate=!0,!e&&this.props.onGraphieUpdated&&this.props.onGraphieUpdated(i)}},_getGridConfig:function(){var e=this;return s.map(e.props.step,function(t,n){return a.gridDimensionConfig(t,e.props.range[n],e.props.box[n],e.props.gridStep[n])})},_updateProtractor:function(){if(this.protractor&&this.protractor.remove(),this.props.showProtractor){var e=this.pointsFromNormalized([[.5,.05]])[0];this.protractor=this._graphie.protractor(e)}},_updateRuler:function(){if(this.ruler&&this.ruler.remove(),this.props.showRuler){var e=this.pointsFromNormalized([[.5,.25]])[0],t=this._graphie.range[0][1]-this._graphie.range[0][0];this.ruler=this._graphie.ruler({center:e,label:this.props.rulerLabel,pixelsPerUnit:this._graphie.scale[0],ticksPerUnit:this.props.rulerTicks,units:Math.round(.8*t)})}},toJSON:function(){return s.pick(this.props,"range","step","markings","labels","backgroundImage","showProtractor","showRuler","rulerLabel","rulerTicks","gridStep","snapStep")}});e.exports=m},function(e,t,n){"use strict";var r=n(34),i=n(35),o=n(57),s=n(80),a=n(11).ClassNames,l=(n(177),n(169).modifyTex),p=r.createClass({displayName:"MathOutput",propTypes:{value:r.PropTypes.oneOfType([r.PropTypes.string,r.PropTypes.number]),className:r.PropTypes.string,labelText:r.PropTypes.string,onFocus:r.PropTypes.func,onBlur:r.PropTypes.func},getDefaultProps:function(){return{value:"",onFocus:function(){},onBlur:function(){}}},getInitialState:function(){return{focused:!1,selectorNamespace:o.uniqueId("math-output")}},_getInputClassName:function(){var e="math-output "+a.INPUT+" "+a.INTERACTIVE;return this.state.focused&&(e+=" "+a.FOCUSED),this.props.className&&(e+=" "+this.props.className),e},_getDisplayValue:function(e){var t;return t=null!=e?""+e:"",l(t)},render:function(){var e={textAlign:"center"};return r.createElement("span",{ref:"input",className:this._getInputClassName(),"aria-label":this.props.labelText,onMouseDown:this.focus,onTouchStart:this.focus},r.createElement("div",{style:e},r.createElement(s,null,this._getDisplayValue(this.props.value))))},getValue:function(){return this.props.value},focus:function(){this.state.focused||(this.props.onFocus(),this._bindBlurHandler(),this.setState({focused:!0}))},blur:function(){this.state.focused&&(this.props.onBlur(),this._unbindBlurHandler(),this.setState({focused:!1}))},_bindBlurHandler:function(){var e=this;$(document).bind("vclick."+this.state.selectorNamespace,function(t){var n=$(t.target).closest(i.findDOMNode(e));n.length||e.blur()})},_unbindBlurHandler:function(){$(document).unbind("."+this.state.selectorNamespace)},componentWillUnmount:function(){this._unbindBlurHandler()}});e.exports=p},function(e,t,n){"use strict";var r=n(34),i=n(35),o=n(57),s=n(12),a=n(28),l=n(11).ClassNames,p="perseus-sortable",c=r.createClass({displayName:"Placeholder",propTypes:{width:r.PropTypes.number.isRequired,height:r.PropTypes.number.isRequired},render:function(){var e=[p+"-card",p+"-placeholder"].join(" "),t={width:this.props.width,height:this.props.height};return null!=this.props.margin&&(t.margin=this.props.margin),r.createElement("li",{className:e,style:t})}}),u="static",h="dragging",d="animating",f="disabled",m=r.createClass({displayName:"Draggable",propTypes:{type:r.PropTypes.oneOf([u,h,d,f]),content:r.PropTypes.string.isRequired,endPosition:r.PropTypes.object.isRequired,onRender:r.PropTypes.func.isRequired,onMouseDown:r.PropTypes.func.isRequired,onMouseMove:r.PropTypes.func.isRequired,onMouseUp:r.PropTypes.func.isRequired,onAnimationEnd:r.PropTypes.func.isRequired},getDefaultProps:function(){return{type:u}},getInitialState:function(){return{startPosition:{left:0,top:0},startMouse:{left:0,top:0},mouse:{left:0,top:0}}},componentDidMount:function(){this.isMouseMoveUpBound=!1},componentWillUnmount:function(){this.isMouseMoveUpBound&&this.unbindMouseMoveUp()},getCurrentPosition:function(){return{left:this.state.startPosition.left+this.state.mouse.left-this.state.startMouse.left,top:this.state.startPosition.top+this.state.mouse.top-this.state.startMouse.top}},render:function(){var e=[p+"-card",p+"-draggable",p+"-"+this.props.type,l.INTERACTIVE].join(" "),t={position:"static"};return this.props.type!==h&&this.props.type!==d||o.extend(t,{position:"absolute"},this.getCurrentPosition()),this.props.width&&(t.width=this.props.width+1),this.props.height&&(t.height=this.props.height),null!=this.props.margin&&(t.margin=this.props.margin),r.createElement("li",{className:e,style:t,onMouseDown:this.onMouseDown,onTouchStart:this.onMouseDown,onTouchMove:this.onMouseMove,onTouchEnd:this.onMouseUp,onTouchCancel:this.onMouseUp},r.createElement(a,{content:this.props.content,onRender:this.props.onRender}))},componentDidUpdate:function(e){if(this.props.type!==e.type)if(this.props.type===d){var t=this.getCurrentPosition(),n=15*Math.sqrt(Math.sqrt(Math.pow(this.props.endPosition.left-t.left,2)+Math.pow(this.props.endPosition.top-t.top,2)));$(i.findDOMNode(this)).animate(this.props.endPosition,{duration:Math.max(n,1),complete:this.props.onAnimationEnd})}else this.props.type===u&&$(i.findDOMNode(this)).finish()},bindMouseMoveUp:function(){this.isMouseMoveUpBound=!0,$(document).on("mousemove",this.onMouseMove),$(document).on("mouseup",this.onMouseUp)},unbindMouseMoveUp:function(){this.isMouseMoveUpBound=!1,$(document).off("mousemove",this.onMouseMove),$(document).off("mouseup",this.onMouseUp)},onMouseDown:function(e){if(this.props.type===u&&(0===e.button||null!=e.touches&&1===e.touches.length)){e.preventDefault();var t=s.extractPointerLocation(e);t&&this.setState({startPosition:$(i.findDOMNode(this)).position(),startMouse:t,mouse:t},function(){this.bindMouseMoveUp(),this.props.onMouseDown()})}},onMouseMove:function(e){if(this.props.type===h){e.preventDefault();var t=s.extractPointerLocation(e);t&&this.setState({mouse:t},this.props.onMouseMove)}},onMouseUp:function(e){if(this.props.type===h){e.preventDefault();var t=s.extractPointerLocation(e);t&&(this.unbindMouseMoveUp(),this.props.onMouseUp())}}}),g="horizontal",v="vertical",y=r.createClass({displayName:"Sortable",propTypes:{options:r.PropTypes.array.isRequired,layout:r.PropTypes.oneOf([g,v]),padding:r.PropTypes.bool,disabled:r.PropTypes.bool,constraints:r.PropTypes.object,onMeasure:r.PropTypes.func,margin:r.PropTypes.number,onChange:r.PropTypes.func},getDefaultProps:function(){return{layout:g,padding:!0,disabled:!1,constraints:{},onMeasure:function(){},margin:5,onChange:function(){}}},getInitialState:function(){return{items:this.itemsFromProps(this.props)}},componentWillReceiveProps:function(e){var t=this.props;o.isEqual(e.options,t.options)?e.layout===t.layout&&e.padding===t.padding&&e.disabled===t.disabled&&o.isEqual(e.constraints,t.constraints)||this.setState({items:this.clearItemMeasurements(this.state.items)}):this.setState({items:this.itemsFromProps(e)})},componentDidUpdate:function(e){this.state.items.length&&!this.state.items[0].width&&this.measureItems()},itemsFromProps:function(e){var t=e.disabled?f:u;return o.map(e.options,function(e,n){return{option:e,key:n,type:t,endPosition:{},width:0,height:0}})},clearItemMeasurements:function(e){return o.map(e,function(e){return o.extend(e,{width:0,height:0})})},measureItems:function(){var e,t=this,n=o.clone(this.state.items),r=o.map(n,function(e){return $(i.findDOMNode(this.refs[e.key]))},this),s=o.invoke(r,"outerWidth"),a=o.invoke(r,"outerHeight"),l=this.props.constraints,p=this.props.layout;l.width?e=o.max(s.concat(l.width)):p===v&&(e=o.max(s));var c;l.height?c=o.max(a.concat(l.height)):p===g&&(c=o.max(a)),n=o.map(n,function(t,n){return t.width=e||s[n],t.height=c||a[n],t}),this.setState({items:n},function(){t.props.onMeasure({widths:s,heights:a})})},remeasureItems:o.debounce(function(){this.setState({items:this.clearItemMeasurements(this.state.items)},this.measureItems)},20),render:function(){var e=[p,"layout-"+this.props.layout].join(" "),t=[];return e+=this.props.padding?"":" unpadded",o.each(this.state.items,function(e,n,i){var o,s=n===i.length-1,a=e.type===u||e.type===f;this.props.layout===g?o="0 "+this.props.margin+"px 0 0":this.props.layout===v&&(o="0 0 "+this.props.margin+"px 0"),t.push(r.createElement(m,{content:e.option,key:e.key,type:e.type,ref:e.key,width:e.width,height:e.height,margin:s&&a?0:o,endPosition:e.endPosition,onRender:this.remeasureItems,onMouseDown:this.onMouseDown.bind(this,e.key),onMouseMove:this.onMouseMove.bind(this,e.key),onMouseUp:this.onMouseUp.bind(this,e.key),onTouchMove:this.onMouseMove.bind(this,e.key),onTouchEnd:this.onMouseUp.bind(this,e.key),onTouchCancel:this.onMouseUp.bind(this,e.key),onAnimationEnd:this.onAnimationEnd.bind(this,e.key)})),e.type!==h&&e.type!==d||t.push(r.createElement(c,{key:"placeholder_"+e.key,ref:"placeholder_"+e.key,width:e.width,height:e.height,margin:s?0:o}))},this),r.createElement("ul",{className:e},t)},onMouseDown:function(e){var t=o.map(this.state.items,function(t){return t.key===e&&(t.type=h),t});this.setState({items:t})},onMouseMove:function(e){var t=$(i.findDOMNode(this.refs[e])),n=$(i.findDOMNode(this)),r=o.clone(this.state.items),s=o.findWhere(this.state.items,{key:e}),a=this.props.margin,l=o.indexOf(r,s),p=0;if(r.splice(l,1),this.props.layout===g){var c,u=t.offset().left-n.offset().left,h=0;o.each(r,function(e){c=e.width,u>h+c/2&&(p+=1),h+=c+a})}else{var d,f=t.offset().top-n.offset().top,m=0;o.each(r,function(e){d=e.height,f>m+d/2&&(p+=1),m+=d+a})}p!==l&&(r.splice(p,0,s),this.setState({items:r}))},onMouseUp:function(e){var t=o.map(this.state.items,function(t){return t.key===e&&(t.type=d,t.endPosition=$(i.findDOMNode(this.refs["placeholder_"+e])).position()),t},this);this.setState({items:t}),this.props.onChange({})},onAnimationEnd:function(e){var t=o.map(this.state.items,function(t){return t.key===e&&(t.type=u),t});this.setState({items:t})},getOptions:function(){return o.pluck(this.state.items,"option")}});e.exports=y},function(e,t,n){"use strict";function r(e){this.order=l(e),this.mantissa=a(e),this.positive=s(e),this.sigFigs=this.mantissa.length,this.sigDecs=this.order-this.mantissa.length}function i(e,t,n,r){var i,c,u,h=""+e,d=l(h),f=a(h),m=s(h),g=!1;if(0==e||""==f||"0"==f){for(f="",w=0;w<t;w++)f+="0";d=t+n,n<0&&-n>=t&&(g=!0)}else{if(c=d-f.length-n,u=t-f.length,i=Math.min(u,c),i<0){var v=p(f,-i);v.length>f.length+i&&(d++,c>u&&(v=p(v,1))),f=v}else if(i>0)for(w=0;w<i;w++)f+="0";""!=f&&"0"!=f||(f="0",m=!0,d=1+n,0!=d&&(g=!0))}var y=r||f.length>20||d>4||d<-2||d-f.length>0&&o(f)>0||g,b="";if(m||(b+="-"),y)b+=f.charAt(0),f.length>1&&(b+="."+f.substring(1,f.length)),d-1!=0&&(b+=" x 10^"+(d-1));else{var E="",T="",x=!0;if(d>0)if(f.length>d)E=f.substring(0,d),T=f.substring(d,f.length);else{E=f,x=0!=o(f);for(var w=0;w<d-f.length;w++)E+="0"}else{for(w=0;w<-d;w++)T+="0";T+=f}b+=(""==E?"0":E)+(x?".":"")+T}return b}function o(e){for(var t=0,n=e.length-1;n>=0;n--){var r=e.charAt(n);
if("0"!=r)return t;t++}return t}function s(e){for(var t=!0,n=!1,r=!1,i="",o="",s="",a=0,l=0,p=!0,c=0;c<e.length;c++){var u=e.charAt(c);if(u>="1"&&u<="9")s+=i+u,i="",r=!0,n||(l++,a++),t=!1;else if("0"==u)n?r?(s+=i+u,i=""):(o+=u,a--):(l++,r?(o+=u,a++,i+=u):o+=u),t=!1;else if(n||"."!=u)if("e"==u||"E"==u&&c+1<e.length){var h=parseInt(e.substring(c+1,e.length));a+=h,l+=h,c=e.length}else!t||"+"!=u&&"-"!=u||"-"==u&&(p=!p);else s+=i,i="",n=!0,t=!1}return""==s||p}function a(e){for(var t=!0,n=!1,r=!1,i="",o="",s="",a=0,l=0,p=!0,c=0;c<e.length;c++){var u=e.charAt(c);if(u>="1"&&u<="9")s+=i+u,i="",r=!0,n||(l++,a++),t=!1;else if("0"==u)n?r?(s+=i+u,i=""):(o+=u,a--):(l++,r?(o+=u,a++,i+=u):o+=u),t=!1;else if(n||"."!=u)if("e"==u||"E"==u&&c+1<e.length){var h=parseInt(e.substring(c+1,e.length));a+=h,l+=h,c=e.length}else!t||"+"!=u&&"-"!=u||"-"==u&&(p=!p);else s+=i,i="",n=!0,t=!1}return""==s?o:s}function l(e){for(var t=!0,n=!1,r=!1,i="",o="",s="",a=0,l=0,p=!0,c=0;c<e.length;c++){var u=e.charAt(c);if(u>="1"&&u<="9")s+=i+u,i="",r=!0,n||(l++,a++),t=!1;else if("0"==u)n?r?(s+=i+u,i=""):(o+=u,a--):(l++,r?(o+=u,a++,i+=u):o+=u),t=!1;else if(n||"."!=u)if("e"==u||"E"==u&&c+1<e.length){var h=parseInt(e.substring(c+1,e.length));a+=h,l+=h,c=e.length}else!t||"+"!=u&&"-"!=u||"-"==u&&(p=!p);else s+=i,i="",n=!0,t=!1}return""==s?l:a}function p(e,t){var n=e.length-t-1;if(n<0)return"";if(n>=e.length-1)return e;var r=e.charAt(n+1),i=e.charAt(n),o=!1;if(r>"5")o=!0;else if("5"==r){for(var s=n+2;s<e.length;s++)"0"!=e.charAt(s)&&(o=!0);i%2==1&&(o=!0)}for(var a="",l=n;l>=0;l--){var p=e.charAt(l);if(o){var c;if("9"==p)c="0";else{switch(p){case"0":c="1";break;case"1":c="2";break;case"2":c="3";break;case"3":c="4";break;case"4":c="5";break;case"5":c="6";break;case"6":c="7";break;case"7":c="8";break;case"8":c="9"}o=!1}a=c+a}else a=p+a}return o&&(a="1"+a),a}e.exports={SignificantFigures:r,displaySigFigs:i}},function(e,t,n){"use strict";e.exports={KeypadTypes:{FRACTION:"FRACTION",EXPRESSION:"EXPRESSION"},KeyTypes:{EMPTY:"EMPTY",VALUE:"VALUE",OPERATOR:"OPERATOR",INPUT_NAVIGATION:"INPUT_NAVIGATION",KEYPAD_NAVIGATION:"KEYPAD_NAVIGATION",MANY:"MANY",ECHO:"ECHO"},DeviceOrientations:{LANDSCAPE:"LANDSCAPE",PORTRAIT:"PORTRAIT"},DeviceTypes:{PHONE:"PHONE",TABLET:"TABLET"},LayoutModes:{FULLSCREEN:"FULLSCREEN",COMPACT:"COMPACT"},BorderDirections:{LEFT:"LEFT",BOTTOM:"BOTTOM"},BorderStyles:{LEFT:["LEFT"],BOTTOM:["BOTTOM"],ALL:["LEFT","BOTTOM"],NONE:[]},IconTypes:{MATH:"MATH",SVG:"SVG",TEXT:"TEXT"},DecimalSeparators:{COMMA:"COMMA",PERIOD:"PERIOD"},EchoAnimationTypes:{SLIDE_AND_FADE:"SLIDE_AND_FADE",FADE_ONLY:"FADE_ONLY",LONG_FADE_ONLY:"LONG_FADE_ONLY"},DebugSwitcherTypes:{ENABLED:"ENABLED",DISABLED:"DISABLED"}}},function(e,t,n){"use strict";var r,i,o,s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},a=n(82),l=a.StyleSheet,p=a.css,c=(n(57),n(34)),u=n(83),h=n(11),d=h.ClassNames,f=n(77),m=n(78),g=n(76),v=n(234),y=m.checkedColor,b={backgroundColor:m.satSelectedBackgroundColor,borderTopColor:"transparent",borderBottomColor:"transparent",outline:"2px solid "+m.satBlue,zIndex:1},E=c.createClass({displayName:"Choice",propTypes:{apiOptions:c.PropTypes.shape({satStyling:c.PropTypes.bool,isMobile:c.PropTypes.bool}),checked:c.PropTypes.bool,className:c.PropTypes.string,clue:c.PropTypes.node,content:c.PropTypes.node,correct:c.PropTypes.bool,deselectEnabled:c.PropTypes.bool,disabled:c.PropTypes.bool,groupName:c.PropTypes.string,isLastChoice:c.PropTypes.bool,onChecked:c.PropTypes.func.isRequired,pos:c.PropTypes.number,reviewMode:c.PropTypes.bool,showClue:c.PropTypes.bool,type:c.PropTypes.string},statics:{styles:l.create({pos:{display:"none"},satDescription:{display:"block",position:"relative",borderTop:"1px solid #ccc",boxSizing:"border-box",cursor:"pointer",marginLeft:0,padding:"17px 14px","::after":{bottom:-1,content:'" "',height:1,left:0,position:"absolute",width:"100%",zIndex:1}},satDescriptionLastChoice:{borderBottom:"1px solid #ccc"},satDescriptionInputFocused:s({},b),satDescriptionInputActive:s({},b,{backgroundColor:m.satActiveBackgroundColor}),satDescriptionCorrect:{color:m.satCorrectColor,":focus":{borderColor:m.satCorrectColor,outlineColor:m.satCorrectColor}},satDescriptionCorrectChecked:{backgroundColor:m.satCorrectBackgroundColor,borderBottomColor:m.satCorrectBorderColor,borderTopColor:m.satCorrectBorderColor,":after":{backgroundColor:m.satCorrectBorderColor}},satDescriptionIncorrectChecked:{color:m.satIncorrectColor,backgroundColor:m.satIncorrectBackgroundColor,borderBottomColor:m.satIncorrectBorderColor,borderTopColor:m.satIncorrectBorderColor,":after":{backgroundColor:m.satIncorrectBorderColor},":focus":{borderColor:m.satIncorrectColor,outlineColor:m.satIncorrectColor}},input:{display:"inline-block",width:20,margin:3,marginLeft:-20,marginRight:0,float:"none"},satReviewInput:{pointerEvents:"none"},satRadioOptionContent:{userSelect:"text",display:"block",marginLeft:45,cursor:"inherit"},satReviewRadioOptionContent:{fontWeight:"bold"},responsiveCheckboxInput:(r={},r[g.lgOrSmaller]={border:"none",borderRadius:4,":checked":{backgroundColor:y,boxShadow:"none"},":checked::before":{display:"flex",alignItems:"center",justifyContent:"center",content:'"✓"',color:"white",fontFamily:"monospace",fontSize:17,height:m.circleSize,width:m.circleSize}},r),responsiveMobileCheckboxInput:(i={},i[g.lgOrSmaller]={display:"none"},i),satCheckboxOptionContent:{position:"absolute",display:"block",top:"50%",margin:"-16px 0 0 0",width:"auto"},satPosBack:{display:"block",borderRadius:25,border:"2px solid "+m.satBlue,content:"''",height:25,width:25,position:"absolute",top:1,left:1},satPosBackChecked:{background:m.satBlue},satPosBackCorrect:{borderColor:m.satCorrectColor},satPosBackCorrectChecked:{background:m.satCorrectColor},satPosBackIncorrectChecked:{borderColor:m.satIncorrectColor,background:m.satIncorrectColor},satPos:{display:"block",color:m.satBlue,fontFamily:m.boldFontFamily,fontSize:13,textAlign:"center",position:"absolute",left:0,top:7,width:32},satPosChecked:{color:"#fff"},satPosCorrect:{color:m.satCorrectColor},clue:{display:"block"},satReviewClue:{marginTop:13,marginLeft:45},label:{display:"block"},responsiveLabel:(o={},o[g.lgOrSmaller]={WebkitTapHighlightColor:"transparent",alignItems:"center",display:"flex",padding:"17px 0"},o),satLabel:{cursor:"pointer"}})},getDefaultProps:function(){return{checked:!1,classSet:{},disabled:!1,showClue:!1,type:"radio",pos:0}},getInitialState:function(){return{isInputFocused:!1,isInputActive:!1}},onInputFocus:function(){this.setState({isInputFocused:!0})},onInputBlur:function(){this.setState({isInputFocused:!1})},onInputMouseDown:function(){this.setState({isInputActive:!0}),this.props.apiOptions.satStyling&&this._input&&this._input.focus()},onInputMouseUp:function(){this.setState({isInputActive:!1}),this.props.apiOptions.satStyling&&this._input&&this._input.focus()},onInputMouseOut:function(){this.setState({isInputActive:!1})},inputRef:function(e){this._input=e},render:function(){var e=this,t=String.fromCharCode(65+this.props.pos),n=function(){return e.props.checked?"boolean"==typeof e.props.correct?e.props.correct?i18n._("(Choice %(letter)s, Checked, Correct)",{letter:t}):i18n._("(Choice %(letter)s, Checked, Incorrect)",{letter:t}):i18n._("(Choice %(letter)s, Checked)",{letter:t}):e.props.correct?i18n._("(Choice %(letter)s, Correct Answer)",{letter:t}):i18n._("(Choice %(letter)s)",{letter:t})},r=E.styles,i=this.props.apiOptions.satStyling,o=this.props.apiOptions.isMobile,a=u(this.props.className,"checkbox-label",p(r.label,o&&f.disableTextSelection,!i&&r.responsiveLabel,i&&r.satLabel)),l={type:this.props.type,name:this.props.groupName,checked:this.props.checked,disabled:this.props.disabled,onFocus:this.onInputFocus,onBlur:this.onInputBlur,className:p(f.perseusInteractive,r.input,f.responsiveInput,"radio"===this.props.type&&!i&&f.responsiveRadioInput,"radio"===this.props.type&&o&&!i&&f.responsiveMobileRadioInput,"checkbox"===this.props.type&&!i&&r.responsiveCheckboxInput,"checkbox"===this.props.type&&o&&!i&&r.responsiveMobileCheckboxInput,i&&"radio"===this.props.type&&f.perseusSrOnly,i&&"checkbox"===this.props.type&&r.satCheckboxInput,i&&this.props.reviewMode&&r.satReviewInput)},h=null;h="radio"===this.props.type&&this.props.deselectEnabled?c.createElement(v,s({onChecked:this.props.onChecked,inputRef:this.inputRef},l)):c.createElement("input",s({onChange:function(t){e.props.onChecked(t.target.checked)},ref:this.inputRef},l));var m=this.props,g=m.reviewMode,y=m.correct,b=m.checked,T=m.isLastChoice,x=i&&g&&y,w=i&&g&&!y&&b,C=u("description",x&&"sat-correct",w&&"sat-incorrect",p(i&&this.state.isInputFocused&&r.satDescriptionInputFocused,i&&this.state.isInputActive&&r.satDescriptionInputActive,i&&r.satDescription,x&&r.satDescriptionCorrect,x&&b&&r.satDescriptionCorrectChecked,w&&r.satDescriptionIncorrectChecked,i&&T&&r.satDescriptionLastChoice)),P="checkbox "+p(i&&f.perseusInteractive,i&&r.satCheckboxOptionContent),S="pos-back "+p(r.pos,i&&r.satPosBack,i&&(this.props.checked||this.state.isInputActive)&&r.satPosBackChecked,i&&g&&y&&r.satPosBackCorrect,i&&g&&y&&b&&r.satPosBackCorrectChecked,i&&g&&!y&&b&&r.satPosBackIncorrectChecked),k="pos "+p(r.pos,i&&r.satPos,i&&y&&r.satPosCorrect,i&&(this.props.checked||this.state.isInputActive)&&r.satPosChecked);return c.createElement("label",{className:a,style:{opacity:!i&&this.props.disabled?.5:1}},h,c.createElement("div",{className:C,onMouseDown:this.onInputMouseDown,onMouseUp:this.onInputMouseUp,onMouseOut:this.onInputMouseOut},c.createElement("div",{className:"checkbox-and-option"},c.createElement("span",{className:P},c.createElement("div",{className:S}),c.createElement("div",{className:k},c.createElement("span",{className:"perseus-sr-only"},n()),c.createElement("span",{"aria-hidden":"true"},t))),c.createElement("span",{className:u(d.RADIO.OPTION_CONTENT,d.INTERACTIVE,p(i&&r.satRadioOptionContent,i&&g&&r.satReviewRadioOptionContent)),style:{cursor:"default"}},c.createElement("div",null,this.props.content))),this.props.showClue&&c.createElement("div",{className:u("perseus-radio-clue",p(r.clue,g&&r.satReviewClue))},this.props.clue)))}});e.exports=E},function(e,t,n){"use strict";function r(e){var t=e[0],n=e[1],r=e[2],i=e[3];t<0&&(t*=-1,n*=-1,r*=-1);var o=2*Math.PI;for(n<0&&(n*=-1,r*=-1,r+=o/2);r>0;)r-=o;for(;r<0;)r+=o;return[t,n,r,i]}function i(e){var t=e[0],n=e[1],r=e[2],i=e[3];t<0&&(t*=-1,n*=-1,r*=-1);var o=Math.PI;for(n<0&&(n*=-1,r*=-1,r+=o/2);r>0;)r-=o;for(;r<0;)r+=o;return[t,n,r,i]}function o(e){return T[e]}function s(e){var t=e.charAt(0).toUpperCase()+e.substring(1);return{value:e,title:t,content:React.createElement("img",{src:o(e).url,alt:t})}}var a=n(57),l=n(12),p=n(86),c=p.Plot,u=n(221).point,h={url:null},d={areEqual:function(e,t){return l.deepEq(e,t)},Movable:c,getPropsForCoeffs:function(e){return{fn:a.partial(this.getFunctionForCoeffs,e)}}},f=a.extend({},d,{url:"https://ka-perseus-graphie.s3.amazonaws.com/67aaf581e6d9ef9038c10558a1f70ac21c11c9f8.png",defaultCoords:[[.25,.75],[.75,.75]],getCoefficients:function(e){var t=e[0],n=e[1],r=n[0]-t[0],i=n[1]-t[1];if(0!==r){var o=i/r,s=n[1]-o*n[0];return[o,s]}},getFunctionForCoeffs:function(e,t){var n=e[0],r=e[1];return n*t+r},getEquationString:function(e){var t=this.getCoefficients(e),n=t[0],r=t[1];return"y = "+n.toFixed(3)+"x + "+r.toFixed(3)}}),m=a.extend({},d,{url:"https://ka-perseus-graphie.s3.amazonaws.com/e23d36e6fc29ee37174e92c9daba2a66677128ab.png",defaultCoords:[[.5,.5],[.75,.75]],Movable:p.Parabola,getCoefficients:function(e){var t=e[0],n=e[1],r=t[0],i=t[1],o=(n[1]-i)/((n[0]-r)*(n[0]-r)),s=-2*r*o,a=o*r*r+i;return[o,s,a]},getFunctionForCoeffs:function(e,t){var n=e[0],r=e[1],i=e[2];return(n*t+r)*t+i},getPropsForCoeffs:function(e){return{a:e[0],b:e[1],c:e[2]}},getEquationString:function(e){var t=this.getCoefficients(e),n=t[0],r=t[1],i=t[2];return"y = "+n.toFixed(3)+"x^2 + "+r.toFixed(3)+"x + "+i.toFixed(3)}}),g=a.extend({},d,{url:"https://ka-perseus-graphie.s3.amazonaws.com/3d68e7718498475f53b206c2ab285626baf8857e.png",defaultCoords:[[.5,.5],[.6,.6]],Movable:p.Sinusoid,getCoefficients:function(e){var t=e[0],n=e[1],r=n[1]-t[1],i=Math.PI/(2*(n[0]-t[0])),o=t[0]*i,s=t[1];return[r,i,o,s]},getFunctionForCoeffs:function(e,t){var n=e[0],r=e[1],i=e[2],o=e[3];return n*Math.sin(r*t-i)+o},getPropsForCoeffs:function(e){return{a:e[0],b:e[1],c:e[2],d:e[3]}},getEquationString:function(e){var t=this.getCoefficients(e),n=t[0],r=t[1],i=t[2],o=t[3];return"y = "+n.toFixed(3)+" sin("+r.toFixed(3)+"x - "+i.toFixed(3)+") + "+o.toFixed(3)},areEqual:function(e,t){return l.deepEq(r(e),r(t))}}),v=a.extend({},d,{url:"https://ka-perseus-graphie.s3.amazonaws.com/7db80d23c35214f98659fe1cf0765811c1bbfbba.png",defaultCoords:[[.5,.5],[.75,.75]],getCoefficients:function(e){var t=e[0],n=e[1],r=n[1]-t[1],i=Math.PI/(4*(n[0]-t[0])),o=t[0]*i,s=t[1];return[r,i,o,s]},getFunctionForCoeffs:function(e,t){var n=e[0],r=e[1],i=e[2],o=e[3];return n*Math.tan(r*t-i)+o},getEquationString:function(e){var t=this.getCoefficients(e),n=t[0],r=t[1],i=t[2],o=t[3];return"y = "+n.toFixed(3)+" sin("+r.toFixed(3)+"x - "+i.toFixed(3)+") + "+o.toFixed(3)},areEqual:function(e,t){return l.deepEq(i(e),i(t))}}),y=a.extend({},d,{url:"https://ka-perseus-graphie.s3.amazonaws.com/9cbfad55525e3ce755a31a631b074670a5dad611.png",defaultCoords:[[.5,.55],[.75,.75]],defaultAsymptote:[[0,.5],[1,.5]],extraCoordConstraint:function(e,t,n,r,i){var o=a.head(r)[1];return a.all(n,function(e){return e[1]!==o})},extraAsymptoteConstraint:function(e,t,n,r,i){var o=e[1],s=a.all(n,function(e){return e[1]>o})||a.all(n,function(e){return e[1]<o});if(s)return[t[0],o];var l=t[1],p=a.all(n,function(e){return e[1]>l});if(p){var c=a.min(a.map(n,function(e){return e[1]}));return[t[0],c-i.snapStep[1]]}var u=a.max(a.map(n,function(e){return e[1]}));return[t[0],u+i.snapStep[1]]},allowReflectOverAsymptote:!0,getCoefficients:function(e,t){var n=e[0],r=e[1],i=a.head(t)[1],o=Math.log((n[1]-i)/(r[1]-i))/(n[0]-r[0]),s=(n[1]-i)/Math.exp(o*n[0]);return[s,o,i]},getFunctionForCoeffs:function(e,t){var n=e[0],r=e[1],i=e[2];return n*Math.exp(r*t)+i},getEquationString:function(e,t){if(!t)return null;var n=this.getCoefficients(e,t),r=n[0],i=n[1],o=n[2];return"y = "+r.toFixed(3)+"e^("+i.toFixed(3)+"x) + "+o.toFixed(3)}}),b=a.extend({},d,{url:"https://ka-perseus-graphie.s3.amazonaws.com/f6491e99d34af34d924bfe0231728ad912068dc3.png",defaultCoords:[[.55,.5],[.75,.75]],defaultAsymptote:[[.5,0],[.5,1]],extraCoordConstraint:function(e,t,n,r,i){var o=a.head(r)[0];return a.all(n,function(e){return e[0]!==o})&&n[0][1]!==n[1][1]},extraAsymptoteConstraint:function(e,t,n,r,i){var o=e[0],s=a.all(n,function(e){return e[0]>o})||a.all(n,function(e){return e[0]<o});if(s)return[o,t[1]];var l=t[0],p=a.all(n,function(e){return e[0]>l});if(p){var c=a.min(a.map(n,function(e){return e[0]}));return[c-i.snapStep[0],t[1]]}var u=a.max(a.map(n,function(e){return e[0]}));return[u+i.snapStep[0],t[1]]},allowReflectOverAsymptote:!0,getCoefficients:function(e,t){var n=function(e){return[e[1],e[0]]},r=y.getCoefficients(a.map(e,n),a.map(t,n)),i=-r[2]/r[0],o=1/r[0],s=1/r[1];return[s,o,i]},getFunctionForCoeffs:function(e,t,n){var r=e[0],i=e[1],o=e[2];return r*Math.log(i*t+o)},getEquationString:function(e,t){if(!t)return null;var n=this.getCoefficients(e,t),r=n[0],i=n[1],o=n[2];return"y = ln("+r.toFixed(3)+"x + "+i.toFixed(3)+") + "+o.toFixed(3)}}),E=a.extend({},d,{url:"https://ka-perseus-graphie.s3.amazonaws.com/8256a630175a0cb1d11de223d6de0266daf98721.png",defaultCoords:[[.5,.5],[.75,.75]],getCoefficients:function(e){var t=e[0],n=e[1],r=n[0]-t[0],i=n[1]-t[1];if(0!==r){var o=Math.abs(i/r);n[1]<t[1]&&(o*=-1);var s=t[0],a=t[1];return[o,s,a]}},getFunctionForCoeffs:function(e,t){var n=e[0],r=e[1],i=e[2];return n*Math.abs(t-r)+i},getEquationString:function(e){var t=this.getCoefficients(e),n=t[0],r=t[1],i=t[2];return"y = "+n.toFixed(3)+"| x - "+r.toFixed(3)+"| + "+i.toFixed(3)}}),T={linear:f,quadratic:m,sinusoid:g,tangent:v,exponential:y,logarithm:b,absolute_value:E},x=a.keys(T),w={validate:function(e,t){if(e.type!==t.correct.type)return{type:"points",earned:0,total:1,message:null};if(null==e.coords)return{type:"invalid",message:null};var n=o(e.type),r=n.getCoefficients(e.coords,e.asymptote),i=n.getCoefficients(t.correct.coords,t.correct.asymptote);return null==r||null==i?{type:"invalid",message:null}:n.areEqual(r,i)?{type:"points",earned:1,total:1,message:null}:{type:"points",earned:0,total:1,message:null}},getEquationString:function(e){var t=e.plot;if(t.type&&t.coords){var n=o(t.type),r=n.getEquationString(t.coords,t.asymptote);return r||""}return""},pointsFromNormalized:function(e,t,n,r){var i=function(e,t){return Math.floor((e[1]-e[0])/t)};return a.map(e,function(e){var o=a.map(e,function(e,r){var o=t[r],s=n[r],a=i(o,s),l=Math.round(e*a);return o[0]+s*l});return u.roundTo(o,r)})},maybePointsFromNormalized:function(e,t,n,r){return e?this.pointsFromNormalized(e,t,n,r):e},defaultPlotProps:function(e,t){var n=o(e),r=[1,1],i=l.snapStepFromGridStep(r);return{type:e,asymptote:this.maybePointsFromNormalized(n.defaultAsymptote,t.range,t.step,i),coords:null}},chooseType:a.first,getGridAndSnapSteps:function(e,t){var n=e.gridStep||l.getGridStep(e.range,e.step,t),r=e.snapStep||l.snapStepFromGridStep(n);return{gridStep:n,snapStep:r}}},C={};C.graph={labels:["x","y"],range:[[-10,10],[-10,10]],step:[1,1],backgroundImage:h,markings:"graph",rulerLabel:"",rulerTicks:10,valid:!0,showTooltips:!1},C.plot=w.defaultPlotProps("linear",C.graph),C.availableTypes=[C.plot.type],e.exports={GrapherUtil:w,allTypes:x,typeToButton:s,functionForType:o,DEFAULT_GRAPHER_PROPS:C,DEFAULT_BACKGROUND_IMAGE:h}},function(e,t,n){"use strict";var r=n(81),i=n(34),o=i.createClass({displayName:"ArrowPicker",propTypes:{value:i.PropTypes.string,onChange:i.PropTypes.func.isRequired},getDefaultProps:function(){return{value:""}},render:function(){return i.createElement(r,{value:this.props.value,allowEmpty:!1,buttons:[{value:"",content:i.createElement("span",null,"—")},{value:"->",content:i.createElement("span",null,"→")}],onChange:this.props.onChange})}});e.exports=o},function(e,t,n){"use strict";var r=n(81),i=n(34),o=n(57),s=n(197),a=i.createClass({displayName:"ColorPicker",COLORS:[s.BLACK,s.BLUE,s.GREEN,s.PINK,s.PURPLE,s.RED,s.GRAY],LIGHT_COLORS:[s.LIGHT_BLUE,s.LIGHT_ORANGE,s.LIGHT_PINK,s.LIGHT_GREEN,s.LIGHT_PURPLE,s.LIGHT_RED,"#fff"],propTypes:{value:i.PropTypes.string,lightColors:i.PropTypes.bool,onChange:i.PropTypes.func.isRequired},getDefaultProps:function(){return{value:s.BLACK,lightColors:!1}},render:function(){var e=this.props.lightColors?this.LIGHT_COLORS:this.COLORS;return i.createElement(r,{value:this.props.value,allowEmpty:!1,buttons:o.map(e,function(e){return{value:e,content:i.createElement("span",null,i.createElement("span",{className:"colorpicker-circle",style:{background:e}})," ")}}),onChange:this.props.onChange})}});e.exports=a},function(e,t,n){"use strict";var r=n(34),i=n(80),o=n(81),s=n(172),a=n(178),l=n(175),p=r.createClass({displayName:"ConstraintEditor",mixins:[s],propTypes:{constraint:r.PropTypes.string,snap:r.PropTypes.number,constraintFn:r.PropTypes.string,onChange:r.PropTypes.func.isRequired,constraintXMin:r.PropTypes.string,constraintXMax:r.PropTypes.string,constraintYMin:r.PropTypes.string,constraintYMax:r.PropTypes.string},getDefaultProps:function(){return{constraint:"none",snap:.5,constraintFn:"0",constraintXMin:"-10",constraintXMax:"10",constraintYMin:"-10",constraintYMax:"10"}},render:function(){return r.createElement("div",null,r.createElement("div",{className:"perseus-widget-row"},"Constraint: ",r.createElement(o,{value:this.props.constraint,allowEmpty:!1,buttons:[{value:"none",content:"None"},{value:"snap",content:"Snap"},{value:"x",content:"x="},{value:"y",content:"y="}],onChange:this.change("constraint")})),"snap"===this.props.constraint&&r.createElement("div",{className:"perseus-widget-row"},"Snap: ",r.createElement(l,{value:this.props.snap,placeholder:0,onChange:this.change("snap")})),"x"===this.props.constraint&&r.createElement("div",{className:"graph-settings"},r.createElement("div",{className:"perseus-widget-row"},r.createElement(i,null,"x=")," ",r.createElement(a,{buttonSets:[],buttonsVisible:"never",value:this.props.constraintFn,onChange:this.change("constraintFn")}))),"y"===this.props.constraint&&r.createElement("div",{className:"graph-settings"},r.createElement("div",{className:"perseus-widget-row"},r.createElement(i,null,"y=")," ",r.createElement(a,{buttonSets:[],buttonsVisible:"never",value:this.props.constraintFn,onChange:this.change("constraintFn")}))),"Ensure these are set so nothing can be dragged off the canvas:",r.createElement("div",{className:"perseus-widget-row"},r.createElement("div",{className:"perseus-widget-row"},r.createElement(i,null,"x \\in \\Large[")," ",r.createElement(a,{buttonSets:[],buttonsVisible:"never",value:this.props.constraintXMin,onChange:this.change("constraintXMin")}),r.createElement(i,null,", ")," ",r.createElement(a,{buttonSets:[],buttonsVisible:"never",value:this.props.constraintXMax,onChange:this.change("constraintXMax")})," ",r.createElement(i,null,"\\Large]"))),r.createElement("div",{className:"perseus-widget-row"},r.createElement("div",{className:"perseus-widget-row"},r.createElement(i,null,"y \\in \\Large[")," ",r.createElement(a,{buttonSets:[],buttonsVisible:"never",value:this.props.constraintYMin,onChange:this.change("constraintYMin")}),r.createElement(i,null,", ")," ",r.createElement(a,{buttonSets:[],buttonsVisible:"never",value:this.props.constraintYMax,onChange:this.change("constraintYMax")})," ",r.createElement(i,null,"\\Large]"))))}});e.exports=p},function(e,t,n){"use strict";var r=n(81),i=n(34),o=i.createClass({displayName:"DashPicker",propTypes:{value:i.PropTypes.string,onChange:i.PropTypes.func.isRequired},getDefaultProps:function(){return{value:""}},render:function(){return i.createElement(r,{value:this.props.value,allowEmpty:!1,buttons:[{value:"",content:i.createElement("span",null,"—")},{value:"-",content:i.createElement("span",null,"–––")},{value:"- ",content:i.createElement("span",null,"–  –")},{value:".",content:i.createElement("span",null,"····")},{value:". ",content:i.createElement("span",null,"· · ·")}],onChange:this.props.onChange})}});e.exports=o},function(e,t,n){"use strict";var r=n(34),i=n(41),o=i.iconChevronDown,s=i.iconChevronRight,a=i.iconCircleArrowDown,l=i.iconCircleArrowUp,p=i.iconTrash,c=n(42),u=r.createClass({displayName:"ElementContainer",propTypes:{initiallVisible:r.PropTypes.bool,title:r.PropTypes.node},getDefaultProps:function(){return{initiallyVisible:!1,title:"More"}},getInitialState:function(){return{show:this.props.initiallyVisible,title:"More",onUp:null,onDown:null,onDelete:null}},render:function(){return r.createElement("div",{className:"perseus-interaction-element"},r.createElement("a",{href:"#",className:"perseus-interaction-element-title "+(this.state.show?"open":"closed"),onClick:this.toggle},this.state.show?r.createElement(c,o):r.createElement(c,s),this.props.title),r.createElement("div",{className:"perseus-interaction-element-content "+(this.state.show?"enter":"leave")},this.props.children,(null!=this.props.onUp||null!=this.props.onDown||null!=this.props.onDelete)&&r.createElement("div",{className:"edit-controls"},null!=this.props.onUp&&r.createElement("button",{onClick:this.props.onUp},r.createElement(c,l)),null!=this.props.onDown&&r.createElement("button",{onClick:this.props.onDown},r.createElement(c,a)),null!=this.props.onDelete&&r.createElement("button",{onClick:this.props.onDelete},r.createElement(c,p)))))},toggle:function(e){e.preventDefault(),this.setState({show:!this.state.show})}});e.exports=u},function(e,t,n){"use strict";function r(e,t){null!==t.value&&(e.fillStyle=h.fgColor,e.font=h.font,e.fillText(t.value,t.pos[0]-h.fontSizePx/2+1,t.pos[1]+h.fontSizePx/2))}function i(e,t){var n=new Path2D;e.lineWidth=5*h.lineWidth,e.strokeStyle=h.fgColor,n.moveTo(t.startPos[0],t.startPos[1]),n.lineTo(t.endPos[0],t.endPos[1]),e.stroke(n),n=new Path2D,e.lineWidth=3*h.lineWidth,e.strokeStyle=h.bgColor,n.moveTo(t.startPos[0],t.startPos[1]),n.lineTo(t.endPos[0],t.endPos[1]),e.stroke(n)}function o(e,t){var n=new Path2D;e.lineWidth=7*h.lineWidth,e.strokeStyle=h.fgColor,n.moveTo(t.startPos[0],t.startPos[1]),n.lineTo(t.endPos[0],t.endPos[1]),e.stroke(n),n=new Path2D,e.lineWidth=5*h.lineWidth,e.strokeStyle=h.bgColor,n.moveTo(t.startPos[0],t.startPos[1]),n.lineTo(t.endPos[0],t.endPos[1]),e.stroke(n),s(e,t)}function s(e,t){var n=new Path2D;e.lineWidth=h.lineWidth,e.strokeStyle=h.fgColor,n.moveTo(t.startPos[0],t.startPos[1]),n.lineTo(t.endPos[0],t.endPos[1]),e.stroke(n)}function a(e){return function(t){c[t.type](e,t)}}function l(e,t){return u[e.type]-u[t.type]}function p(e,t){t.sort(l).forEach(a(e))}var c={text:r,"line:single":s,"line:double":i,"line:triple":o},u={"line:single":0,"line:double":0,"line:triple":0,text:1},h={bgColor:"rgb(255, 255, 255)",fgColor:"rgb(0, 0, 0)",fontSizePx:12,lineWidth:1};h.font=h.fontSizePx+"px sans",e.exports=p},function(e,t,n){"use strict";function r(e,t,n){var r=e[0],i=e[1];return[r+Math.cos(2*t*Math.PI/360)*n,i+-1*Math.sin(2*t*Math.PI/360)*n]}function i(e,t,n,i){var o=e.symbol;if("C"===o&&1!==Object.keys(t).length&&(o=null),"1,0"===e.idx){var s=[0,0];return e.pos=s,e.baseAngle=-30+i,{type:"text",value:o,pos:s,idx:e.idx}}var a=t[e.connections.find(function(e){return t[e].pos})],l=a.connections.indexOf(e.idx),p=60,c=120;4===a.connections.length?(c=90,p=90):(n.find(function(t){return"triple"===t.bondType&&t.to===e.idx})||n.find(function(e){return"triple"===e.bondType&&e.to===a.idx}))&&(c=0,p=0);var u=0,d=a.idx.split(":"),f=d[d.length-1].split(",")[0];u=parseInt(f)%2!==0?a.baseAngle-(p-c*l):a.baseAngle+(p-c*l);var m=r(a.pos,u,h);return e.pos=m,e.baseAngle=u,{type:"text",value:o,pos:m,idx:e.idx}}function o(e,t){var n=.25,r=[e.pos[0],e.pos[1]],i=[t.pos[0],t.pos[1]];return"C"!==e.symbol&&(r=[t.pos[0]-(1-n)*(t.pos[0]-e.pos[0]),t.pos[1]-(1-n)*(t.pos[1]-e.pos[1])]),"C"!==t.symbol&&(i=[e.pos[0]-(1-n)*(e.pos[0]-t.pos[0]),e.pos[1]-(1-n)*(e.pos[1]-t.pos[1])]),[r,i]}function s(e,t){var n=t[e.from],r=t[e.to],i=o(n,r);return{type:"line:"+e.bondType,startPos:i[0],endPos:i[1]}}function a(e){return e.join(":")}function l(e,t,n){return null===n?[e,t]:("atom"===n.type&&!function(){var r=a(n.idx);e[r]={idx:r,symbol:n.symbol,connections:[]},n.bonds&&n.bonds.forEach(function(n){var i=a(n.to.idx);e[r].connections.push(i),t.push({from:r,to:i,bondType:n.bondType}),l(e,t,n.to),e[i].connections.push(r)})}(),[e,t])}function p(e,t,n,r,o){if(0===t.length)return e;var s=t.shift(),a=n[s];return a.connections.forEach(function(e){n[e].pos||t.push(e)}),p(e.concat(i(a,n,r,o)),t,n,r,o)}function c(e,t,n){return 0===n.length?e:c(e.concat(s(n[0],t)),t,n.slice(1))}function u(e,t){var n=l({},[],e),r=n[0],i=n[1],o=p([],["1,0"],r,i,t);return c(o,r,i)}var h=30;e.exports={layout:u,_atomLayout:i,_bondLayout:s,_bondLength:h,_convertTree:l}},function(e,t,n){"use strict";function r(e){this.message=e}function i(e,t,n){var r=t[0],o=t.slice(1),s=void 0;s=Array.isArray(e)?[].concat(e):m({},e||{});var a=n;return o.length>0&&(a=i(s[r],o,n)),s[r]=a,s}function o(e,t){var n=t.reduce(function(e,t){return e[t]},e);return i(e,t,n+1)}function s(e){return g.test(e)}function a(e,t){var n=e[0],o=e.slice(1);if("="===n)return f(o,i(t,["bond","bondType"],"double"));if("#"===n)return f(o,i(t,["bond","bondType"],"triple"));throw new r("Invalid character: "+n)}function l(e,t){if(0===t.length)return e;if(""===e)throw new r("Mismatched parentheses");var n=e[0],i=e.slice(1);return"("===n?l(i,t.concat(n)):")"===n?l(i,t.slice(1)):l(i,t)}function p(e,t){var n=e[0],i=e.slice(1);if("("===n){var s=m({},t,{parens:t.parens+"("});s=o(t,["idx",t.idx.length-1,1]);var a=-1;t.idx[t.idx.length-1][0]%2===0&&(a=0);var p=m({},s,{idx:s.idx.concat([[a,0]]),parens:s.parens.concat("(")}),c=f(i,p),u=f(l(i,["("]),s);return[c].concat(u)}if(")"===n){if("("!==t.parens[t.parens.length-1])throw new r("Mismatched parentheses");return null}throw new r("Invalid bare character: "+n)}function c(e,t){var n=null,r=null;if("["===e[0]){var i=e.indexOf("]");if(i===-1)return["",e];n=e.slice(1,i),r=e.slice(i+1)}else{var o=v.exec(e);n=o[1],r=e.slice(n.length)}return[n,r]}function u(e,t){var n=c(e,t),r=n[0];if(""===r)return["error","Unable to parse bracketed atom."];var o=n[1],s=i(t,["idx",t.idx.length-1],[1+t.idx[t.idx.length-1][0],0]),a=f(o,i(s,["bond","bondType"],"single"));!Array.isArray(a)&&a&&(a=[a]);var l={type:"atom",symbol:r,bonds:a,idx:s.idx};return t.bond?{type:"bond",bondType:t.bond.bondType,to:l}:l}function h(e){return v.test(e)}function d(e){return"="===e||"#"===e}function f(e,t){if(!s(e))throw new r("Invalid input.");return e&&0!==e.length?h(e)?u(e,t||{idx:[[0,0]],parens:[],stack:[],bondModifiers:[]}):d(e[0])?a(e,t):p(e,t):null}var m=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},g=new RegExp("^[A-Za-z\\[\\]()=#+-]*$"),v=new RegExp("^(Cl|Br|[CONPSFBI]|\\[)");e.exports={parse:f,ParseError:r}},function(e,t,n){"use strict";var r=n(34),i=n(191),o=n(57),s="start-ref-",a="end-ref-",l={display:"inline-block",width:0,visibility:"hidden"},p={display:"inline",whiteSpace:"nowrap"},c={display:"inline-block",color:"rgb(255, 255, 255)",backgroundColor:"rgb(90, 90, 90)",paddingLeft:10,paddingRight:10,userSelect:"none",WebkitUserSelect:"none"},u={display:"inline-block",color:"rgb(255, 255, 255)",backgroundColor:"rgb(90, 90, 90)",userSelect:"none",WebkitUserSelect:"none",width:22,height:22,borderRadius:"50%",textAlign:"center"},h=r.createClass({displayName:"RefStart",propTypes:{refContent:r.PropTypes.node.isRequired},render:function(){return r.createElement("span",{style:l},"_")},getRefContent:function(){return this.props.refContent}}),d=r.createClass({displayName:"RefEnd",render:function(){return r.createElement("span",{style:l},"_")}}),f={newline:i.defaultRules.newline,paragraph:i.defaultRules.paragraph,escape:i.defaultRules.escape,passageFootnote:{order:i.defaultRules.escape.order+.1,match:i.inlineRegex(/^\^/),parse:function(e,t,n){var r=n.lastFootnote.id+1,i={id:r,text:1===r?"*":""+r};return"*"===n.lastFootnote.text&&(n.lastFootnote.text=""+n.lastFootnote.id),n.lastFootnote=i,i},react:function(e,t,n){return r.createElement("sup",{key:n.key},e.text)}},refStart:{order:i.defaultRules.escape.order+.2,match:function(e,t){var n=/^\{\{/.exec(e);if(n){for(var r=2,i=0;r<e.length;){var o=e.slice(r,r+2);if("{{"===o)i++,r++;else if("}}"===o){if(!(i>0))break;i--,r++}r++}var s=e.slice(2,r);return[n[0],s]}return null},parse:function(e,t,n){if(!n.useRefs)return{ref:null,refContent:null};var r=n.lastRef+1;n.lastRef=r,n.currentRef.push(r);var i=t("(“"+e[1]+"”)\n\n",o.defaults({useRefs:!1},m));return{ref:r,refContent:i}},react:function(e,t,n){if(null==e.ref)return null;var i=t(e.refContent,{});return r.createElement(h,{ref:s+e.ref,key:s+e.ref,refContent:i})}},refEnd:{order:i.defaultRules.escape.order+.3,match:i.inlineRegex(/^\}\}/),parse:function(e,t,n){if(!n.useRefs)return{ref:null};var r=n.currentRef.pop()||null;return{ref:r}},react:function(e,t,n){return null!=e.ref?r.createElement(d,{ref:a+e.ref,key:a+e.ref}):null}},squareLabel:{order:i.defaultRules.escape.order+.4,match:i.inlineRegex(/^\[\[(\w+)\]\]( *)/),parse:function(e,t,n){return n.firstQuestionRef||(n.firstQuestionRef=e[1]),{content:e[1],space:e[2].length>0}},react:function(e,t,n){return[r.createElement("span",{key:"visual-square",className:"perseus-passage-square-label",style:p,"aria-hidden":"true"},r.createElement("span",{style:c},e.content)),r.createElement("span",{key:"alt-text",className:"perseus-sr-only"},$_({number:e.content},"[Marker for question %(number)s]")),e.space?" ":null]}},circleLabel:{order:i.defaultRules.escape.order+.5,match:i.inlineRegex(/^\(\((\w+)\)\)( *)/),parse:function(e,t,n){return{content:e[1],space:e[2].length>0}},react:function(e,t,n){
return[r.createElement("span",{key:"visual-circle",className:"perseus-passage-circle-label",style:p,"aria-hidden":!0},r.createElement("span",{style:u},e.content)),r.createElement("span",{key:"alt-text",className:"perseus-sr-only"},$_({number:e.content},"[Circle marker %(number)s]")),e.space?" ":null]}},squareBracketRef:{order:i.defaultRules.escape.order+.6,match:i.inlineRegex(/^\[(\d+)\]( *)/),parse:function(e,t,n){return n.firstSentenceRef||(n.firstSentenceRef=e[1]),{content:e[1],space:e[2].length>0}},react:function(e,t,n){return[r.createElement("span",{key:"visual-brackets",className:"perseus-passage-bracket-label","aria-hidden":"true"},"[",e.content,"]"),r.createElement("span",{key:"alt-text",className:"perseus-sr-only"},$_({number:e.content},"[Sentence %(number)s]")),e.space?" ":null]}},strong:i.defaultRules.strong,u:i.defaultRules.u,em:i.defaultRules.em,del:i.defaultRules.del,text:i.defaultRules.text},m={currentRef:[],useRefs:!0,lastRef:0,lastFootnote:{id:0,text:""}},g=i.parserFor(f),v=function(e,t){t=t||{};var n=e+"\n\n";return g(n,o.extend(t,m))};e.exports={parse:v,output:i.reactFor(i.ruleOutput(f,"react")),START_REF_PREFIX:s,END_REF_PREFIX:a,_rulesForTesting:f}},function(e,t,n){"use strict";function r(e,t){var n={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n}var i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},o=n(34),s=n(275),a=s.Provider,l=n(241),p=n(244),c=p.activateKeypad,u=p.dismissKeypad,h=p.configureKeypad,d=p.setCursor,f=p.setKeyHandler,m=n(245),g=o.createClass({displayName:"ProvidedKeypad",propTypes:{onElementMounted:o.PropTypes.func},componentWillMount:function(){this.store=m()},activate:function(){this.store.dispatch(c())},dismiss:function(){this.store.dispatch(u())},configure:function(e,t){this.store.dispatch(h(e)),setTimeout(function(){return t&&t()})},setCursor:function(e){this.store.dispatch(d(e))},setKeyHandler:function(e){this.store.dispatch(f(e))},render:function(){var e=this,t=this.props,n=t.onElementMounted,s=r(t,["onElementMounted"]);return o.createElement(a,{store:this.store},o.createElement(l,i({onElementMounted:function(t){var r=i({},t,{activate:e.activate,dismiss:e.dismiss,configure:e.configure,setCursor:e.setCursor,setKeyHandler:e.setKeyHandler});n&&n(r)}},s)))}});e.exports=g},function(e,t,n){"use strict";var r=n(34),i=n(242),o=n(235),s=n(205),a=s.BorderDirections,l=s.EchoAnimationTypes,p=s.IconTypes,c=s.KeyTypes,u=s.KeypadTypes,h=r.PropTypes.shape({type:r.PropTypes.oneOf(Object.keys(p)).isRequired,data:r.PropTypes.string.isRequired}),d=r.PropTypes.oneOf(Object.keys(i)),f=r.PropTypes.shape({ariaLabel:r.PropTypes.string,id:d.isRequired,type:r.PropTypes.oneOf(Object.keys(c)).isRequired,childKeyIds:r.PropTypes.arrayOf(d),icon:h.isRequired}),m=r.PropTypes.shape({keypadType:r.PropTypes.oneOf(Object.keys(u)).isRequired,extraKeys:r.PropTypes.arrayOf(d)}),g=r.PropTypes.shape({activate:r.PropTypes.func.isRequired,dismiss:r.PropTypes.func.isRequired,configure:r.PropTypes.func.isRequired,setCursor:r.PropTypes.func.isRequired,setKeyHandler:r.PropTypes.func.isRequired}),v=r.PropTypes.arrayOf(r.PropTypes.oneOf(Object.keys(a))),y=r.PropTypes.shape({height:r.PropTypes.number,width:r.PropTypes.number,top:r.PropTypes.number,right:r.PropTypes.number,bottom:r.PropTypes.number,left:r.PropTypes.number}),b=r.PropTypes.shape({animationId:r.PropTypes.string.isRequired,animationType:r.PropTypes.oneOf(Object.keys(l)).isRequired,borders:v,id:d.isRequired,initialBounds:y.isRequired}),E=r.PropTypes.oneOf(Object.keys(o)),T=r.PropTypes.shape({parentId:d.isRequired,bounds:y.isRequired,childKeyIds:r.PropTypes.arrayOf(d).isRequired}),x=r.PropTypes.oneOfType([r.PropTypes.arrayOf(r.PropTypes.node),r.PropTypes.node]);e.exports={keyConfigPropType:f,keyIdPropType:d,keypadConfigurationPropType:m,keypadElementPropType:g,bordersPropType:v,boundingBoxPropType:y,echoPropType:b,cursorContextPropType:E,popoverPropType:T,iconPropType:h,childrenPropType:x}},function(e,t,n){"use strict";var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},i=n(34),o=n(35),s=n(276),a=s.StyleSheet,l=n(243),p=l.View,c=n(236),u=n(237),h=n(238),d=n(239),f=n(240),m=f.cursorHandleRadiusPx,g=f.cursorHandleDistanceMultiplier,v=f.gray76,y=n(218),b=y.keypadElementPropType,E=n(240),T=E.brightGreen,x=E.gray17,w=.8,C=i.createClass({displayName:"MathInput",propTypes:{keypadElement:b,onBlur:i.PropTypes.func,onChange:i.PropTypes.func.isRequired,onFocus:i.PropTypes.func,scrollable:i.PropTypes.bool,style:i.PropTypes.any,value:i.PropTypes.string},getDefaultProps:function(){return{scrollable:!1,style:{},value:""}},getInitialState:function(){return{focused:!1,handle:{animateIntoPosition:!1,visible:!1,x:0,y:0}}},componentDidMount:function(){var e=this;this.mathField=new u(this._mathContainer,{},{onCursorMove:function(t){e.props.keypadElement&&e.props.keypadElement.setCursor(t)}}),this.mathField.mathField.__controller.container.unbind("mousedown.mathquill"),this.props.scrollable||(this.mathField.mathField.__controller.scrollHoriz=function(){}),this.mathField.setContent(this.props.value),this._container=o.findDOMNode(this),this._root=this._container.querySelector(".mq-root-block"),this._root.style.fontSize=P+"pt",this.touchStartInitialScroll=null,this.recordTouchStartOutside=function(t){if(e.state.focused&&!e._container.contains(t.target)){var n=!1;if(e.props.keypadElement)for(var r=o.findDOMNode(e.props.keypadElement),i=r.getBoundingClientRect(),s=0;s<t.changedTouches.length;s++){var a=t.changedTouches[s].clientX,l=t.changedTouches[s].clientY;if(i.left<=a&&i.right>=a&&i.top<=l&&i.bottom>=l||i.bottom<l){n=!0;break}}n||(e.didTouchOutside=!0,e.dragListener&&e.dragListener.detach(),e.dragListener=new d(function(){e.didScroll=!0,e.dragListener.detach()},t),e.dragListener.attach())}},this.blurOnTouchEndOutside=function(t){e.state.focused&&e.didTouchOutside&&!e.didScroll&&e.blur(),e.didTouchOutside=!1,e.didScroll=!1,e.dragListener&&(e.dragListener.detach(),e.removeListeners=null)},window.addEventListener("touchstart",this.recordTouchStartOutside),window.addEventListener("touchend",this.blurOnTouchEndOutside),window.addEventListener("touchcancel",this.blurOnTouchEndOutside)},componentDidUpdate:function(){this.mathField.getContent()!==this.props.value&&this.mathField.setContent(this.props.value)},componentWillUnmount:function(){window.removeEventListener("touchstart",this.recordTouchStartOutside),window.removeEventListener("touchend",this.blurOnTouchEndOutside),window.removeEventListener("touchcancel",this.blurOnTouchEndOutside)},_updateCursorHandle:function(e){var t=this._container.getBoundingClientRect(),n=this._container.querySelector(".mq-cursor"),r=n.getBoundingClientRect(),i=r.width,o=2;this.setState({handle:{visible:!0,animateIntoPosition:e,x:r.left+i/2-t.left,y:r.bottom+o-t.top}})},_hideCursorHandle:function(){this.setState({handle:{visible:!1,x:0,y:0}})},blur:function(){this.mathField.blur(),this.props.onBlur&&this.props.onBlur(),this.setState({focused:!1,handle:{visible:!1}});var e=new CustomEvent("KeyboardInputEventFocusLost");document.dispatchEvent(e)},focus:function(){var e=this;this.props.keypadElement.setKeyHandler(function(t){var n=e.mathField.pressKey(t),r=function(){e.setState({handle:{visible:!1}})},i=e.mathField.getContent();return e.props.value!==i?e.props.onChange(i,r):r(),n}),this.mathField.focus(),this.props.onFocus&&this.props.onFocus(),this.setState({focused:!0},function(){setTimeout(function(){if(e.isMounted()){var t=new CustomEvent("KeyboardInputEventFocus",{detail:{parent:e._container,maybeKeypadNode:n}});document.dispatchEvent(t);var n=e.props.keypadElement&&o.findDOMNode(e.props.keypadElement);h(e._container,n)}})})},_findHitNode:function(e,t,n,r,i){for(var o=this;n>=e.top&&n<=e.bottom;){n+=i;for(var s=[[t-r,n],[t,n],[t+r,n]],a=s.map(function(e){var t;return(t=document).elementFromPoint.apply(t,e)}).filter(function(e){return e&&o._root.contains(e)&&(!e.classList.contains("mq-root-block")&&!e.classList.contains("mq-non-leaf")||e.classList.contains("mq-empty")||e.classList.contains("mq-hasCursor"))}),l=null,p=[],c=[],u=0,h={},d={},f=a,m=Array.isArray(f),g=0,f=m?f:f[Symbol.iterator]();;){var v;if(m){if(g>=f.length)break;v=f[g++]}else{if(g=f.next(),g.done)break;v=g.value}var y=v,b=y.getAttribute("mathquill-command-id");null!=b?(p.push(y),h[b]=(h[b]||0)+1,d[b]=y):c.push(y)}for(var E=Object.entries(h),T=Array.isArray(E),x=0,E=T?E:E[Symbol.iterator]();;){var w;if(T){if(x>=E.length)break;w=E[x++]}else{if(x=E.next(),x.done)break;w=x.value}var C=w,P=C[0],S=C[1];S>u&&(u=S,l=d[P])}if(null==l&&c.length>0&&(l=c[0]),null!==l)return this.mathField.setCursorPosition(t,n,l),!0}return!1},_insertCursorAtClosestNode:function(e,t){var n=this.mathField.getCursor();if(!this._root.hasChildNodes())return void n.insAtLeftEnd(this.mathField.mathField.__controller.root);t>this._containerBounds.bottom?t=this._containerBounds.bottom:t<this._containerBounds.top&&(t=this._containerBounds.top+10);var r=void 0,i=void 0;if(i=-8,r=5,!this._findHitNode(this._containerBounds,e,t,r,i)&&(t=this._containerBounds.top,i=8,!this._findHitNode(this._containerBounds,e,t,r,i))){var o=this._root.firstChild.getBoundingClientRect(),s=this._root.lastChild.getBoundingClientRect(),a=o.left,l=s.right;Math.abs(e-l)<Math.abs(e-a)?n.insAtRightEnd(this.mathField.mathField.__controller.root):n.insAtLeftEnd(this.mathField.mathField.__controller.root),this.props.keypadElement&&this.props.keypadElement.setCursor({context:this.mathField.contextForCursor(n)})}},handleTouchStart:function(e){if(e.stopPropagation(),this._hideCursorHandle(),""!==this.mathField.getContent()){this._containerBounds=this._container.getBoundingClientRect();var t=e.changedTouches[0];this._insertCursorAtClosestNode(t.clientX,t.clientY)}this.state.focused||this.focus()},handleTouchMove:function(e){if(e.stopPropagation(),""!==this.mathField.getContent()){var t=e.changedTouches[0];this._insertCursorAtClosestNode(t.clientX,t.clientY)}},handleTouchEnd:function(e){e.stopPropagation(),""!==this.mathField.getContent()&&this._updateCursorHandle()},onCursorHandleTouchStart:function(e){e.stopPropagation(),e.preventDefault(),this._containerBounds=this._container.getBoundingClientRect()},_constrainToBound:function(e,t,n,r){return e<t?t+(e-t)*r:e>n?n+(e-n)*r:e},onCursorHandleTouchMove:function(e){e.stopPropagation();var t=e.changedTouches[0].clientX,n=e.changedTouches[0].clientY,r=t-this._containerBounds.left,i=n-2*m*g-this._containerBounds.top;this.setState({handle:{animateIntoPosition:!1,visible:!0,x:this._constrainToBound(r,0,this._containerBounds.width,w),y:this._constrainToBound(i,0,this._containerBounds.height,w)}});var o=22,s=n-o;this._insertCursorAtClosestNode(t,s)},onCursorHandleTouchEnd:function(e){e.stopPropagation(),this._updateCursorHandle(!0)},onCursorHandleTouchCancel:function(e){e.stopPropagation(),this._updateCursorHandle(!0)},render:function(){var e=this,t=this.state,n=t.focused,s=t.handle,a=this.props.style,l=1,u=2,h=this.state.focused?u:l,d=2,f=k-h-d,m=3,g=1,v={paddingTop:f-g,paddingRight:f,paddingBottom:f-m,paddingLeft:f},y=r({},O.innerContainer,{borderWidth:h},v,n?{borderColor:T}:{},a);return i.createElement(p,{style:_.input,onTouchStart:this.handleTouchStart,onTouchMove:this.handleTouchMove,onTouchEnd:this.handleTouchEnd,onClick:function(e){return e.stopPropagation()},role:"textbox",ariaLabel:i18n._("Math input box")},i.createElement("div",{className:"keypad-input"},i.createElement("div",{ref:function(t){e._mathContainer=o.findDOMNode(t)},style:y})),n&&s.visible&&i.createElement(c,r({},s,{onTouchStart:this.onCursorHandleTouchStart,onTouchMove:this.onCursorHandleTouchMove,onTouchEnd:this.onCursorHandleTouchEnd,onTouchCancel:this.onCursorHandleTouchCancel})))}}),P=18,S=20,k=8,N=S+2*k,M=64,_=a.create({input:{position:"relative",display:"inline-block",verticalAlign:"middle"}}),O={innerContainer:{backgroundColor:"white",display:"flex",minHeight:N,minWidth:M,boxSizing:"border-box",position:"relative",overflow:"hidden",borderStyle:"solid",borderColor:v,borderRadius:4,color:x}};e.exports=C},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){var n=[],r=!0,i=!1,o=void 0;try{for(var s,a=e[Symbol.iterator]();!(r=(s=a.next()).done)&&(n.push(s.value),!t||n.length!==t);r=!0);}catch(e){i=!0,o=e}finally{try{!r&&a.return&&a.return()}finally{if(i)throw o}}return n}return function(t,n){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),o=n(274),s=r(o),a=n(184),l=function e(t,n,r,i){var o=n.reduce(a.recursiveMerge),s={},l={},p={};return Object.keys(o).forEach(function(e){":"===e[0]?p[e]=o[e]:"@"===e[0]?l[e]=o[e]:s[e]=o[e]}),c(t,s,r,i)+Object.keys(p).map(function(e){return c(t+e,p[e],r,i)}).join("")+Object.keys(l).map(function(n){var o=e(t,[l[n]],r,i);return n+"{"+o+"}"}).join("")};t.generateCSS=l;var p=function(e,t){var n={};return Object.keys(e).forEach(function(r){t&&t.hasOwnProperty(r)?n[r]=t[r](e[r]):n[r]=e[r]}),n},c=function(e,t,n,r){var o=p(t,n),l=(0,s.default)(o),c=(0,a.flatten)((0,a.objectToPairs)(l).map(function(e){var t=i(e,2),n=t[0],r=t[1];if(Array.isArray(r)){var o=function(){var e=[],t=[];return r.forEach(function(n){0===n.indexOf("-")?e.push(n):t.push(n)}),e.sort(),t.sort(),{v:e.concat(t).map(function(e){return[n,e]})}}();if("object"==typeof o)return o.v}return[[n,r]]})),u=c.map(function(e){var t=i(e,2),n=t[0],o=t[1],s=(0,a.stringifyValue)(n,o),l=(0,a.kebabifyStyleName)(n)+":"+s+";";return r===!1?l:(0,a.importantify)(l)}).join("");return u?e+"{"+u+"}":""};t.generateCSSRuleset=c},function(e,t,n){e.exports={number:n(247),vector:n(248),point:n(249),line:n(250),ray:n(251)}},function(e,t,n){"use strict";function r(e,t){return e+":"+t}function i(e){return e.split(":")[0]}var o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},s=n(57),a=n(221).point,l={_fireEvent:function(e,t,n){s.invoke(e,"call",this,t,n)},_applyConstraints:function(e,t,n){var r=this,i=!1;return s.reduce(this.state.constraints,function(e,s){if(e===!1)return!1;if(i)return e;var l=s.call(r,e,t,o({onSkipRemaining:function(){i=!0}},n));if(l===!1)return!1;if(a.is(l,2))return l;if(l===!0||null==l)return e;throw new Error("Constraint returned invalid result: "+l)},e,this)},draw:function(){var e=this.cloneState();l._fireEvent.call(this,this.state.draw,e,this.prevState),this.prevState=e},listen:function(e,t,n){this._listenerMap=this._listenerMap||{};var i=r(e,t),o=this._listenerMap[i]=this._listenerMap[i]||this.state[e].length;this.state[e][o]=n},unlisten:function(e,t){this._listenerMap=this._listenerMap||{};var n=r(e,t),o=this._listenerMap[n];if(void 0!==o){this.state[e].splice(o,1),delete this._listenerMap[n];var a=s.keys(this._listenerMap);s.each(a,function(t){i(t)===e&&this._listenerMap[t]>o&&this._listenerMap[t]--},this)}}};e.exports=l},function(e,t,n){"use strict";function r(e,t){var n=Math.sqrt(Math.pow(e[0],2)+Math.pow(e[1],2)),r=Math.atan2(e[1],e[0]);return r<0&&(r+=2*Math.PI),t||(r=180*r/Math.PI),[n,r]}function i(e,t){return"number"==typeof e&&(e=[e,e]),t=t*Math.PI/180,[e[0]*Math.cos(t),e[1]*Math.sin(t)]}var o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol?"symbol":typeof e},a=n(221).point,l=n(221).vector,p=n(57);n(252);var c=n(165),u=n(253).processMath,h=n(197),d={unscaledSvgPath:function(e){return e[0]===!0?"":$.map(e,function(e,t){return e===!0?"z":(0===t?"M":"L")+e[0]+" "+e[1]}).join("")},getDistance:function(e,t){return a.distanceToPoint(e,t)},coordDiff:function(e,t){return p.map(t,function(n,r){return t[r]-e[r]})},snapCoord:function(e,t){return p.map(e,function(e,n){return c.roundToNearest(t[n],e)})},findAngle:function(e,t,n){if(void 0===n){var r=e[0]-t[0],i=e[1]-t[1];return r||i?(180+180*Math.atan2(-i,-r)/Math.PI+360)%360:0}return d.findAngle(e,n)-d.findAngle(t,n)},graphs:{}},f=d.Graphie=function(){};p.extend(f.prototype,{cartToPolar:r,polar:i});var m={center:[-.5,-.5],above:[-.5,-1],"above right":[0,-1],right:[0,-.5],"below right":[0,0],below:[-.5,0],"below left":[-1,0],left:[-1,-.5],"above left":[-1,-1]};d.createGraphie=function(e){var t=40,n=40,r=void 0,a=void 0;$(e).css("position","relative");var g=Raphael(e);$(e).children("div").css("position","absolute");var v={"stroke-width":2,fill:"none"},y=function e(r){if("number"==typeof r)return e([r,r]);var i=r[0],o=r[1];return[i*t,o*n]},b=function e(i){if("number"==typeof i)return e([i,i]);var o=i[0],s=i[1];return[(o-r[0])*t,(a[1]-s)*n]},E=function e(i){if("number"==typeof i)return e([i,i]);var o=i[0],s=i[1];return[o/t+r[0],a[1]-s/n]},T=function e(r){return"number"==typeof r?e([r,r]):[r[0]/t,r[1]/n]},x=function(e,t){var n=$(e),r=n.data("labelDirection");if(n.css("visibility",""),"number"==typeof r){var i=Math.cos(r),o=Math.sin(r),s=Math.min(t[0]/2/Math.abs(i),t[1]/2/Math.abs(o));n.css({marginLeft:-t[0]/2+i*s,marginTop:-t[1]/2-o*s})}else{var a=m[r||"center"];n.css({marginLeft:Math.round(t[0]*a[0]),marginTop:Math.round(t[1]*a[1])})}},w=function(e,t){return $.map(e,function(e,n){if(e===!0)return"z";var r=t?e:b(e);return(0===n?"M":"L")+c.bound(r[0])+" "+c.bound(r[1])}).join("")},C=function(e,t,n){var i=function(r){return(e*r+t)*r+n};if(0===e){var o=p.map(r,function(e){return[e,i(e)]});return w(o)}var s=-t/(2*e),a=Math.max(Math.abs(s-r[0]),Math.abs(s-r[1])),l=s+a,u=[s,i(s)],h=[l,i(l)],d=[u[0],u[1]-(h[1]-u[1])],f=Math.abs(u[0]-h[0]),m=[u[0]-f,h[1]],g=[u[0]+f,h[1]],v=p.map([m,d,g],b),y=p.map(p.flatten(v),c.bound);return"M"+y[0]+","+y[1]+" Q"+y[2]+","+y[3]+" "+y[4]+","+y[5]},P=function(e,t,n,i){var o=Math.abs(Math.PI/(2*t)),s=function(r){return e*Math.sin(t*r-n)+i},a=function(r){return e*t*Math.cos(n-t*r)},l=function(e,t){var n=e+o*t,r=n+o,i=[n,2*n/3+1*r/3,1*n/3+2*r/3,r],l=[s(n),s(n)+a(n)*(r-n)/3,s(r)-a(r)*(r-n)/3,s(r)];return p.map(p.zip(i,l),b)},c=r[1]-r[0],u=Math.ceil(c/o)+1,h=n/t,d=h-r[0];h-=o*Math.ceil(d/o);for(var f=l(h,0),m="M"+f[0][0]+","+f[0][1]+" C"+f[1][0]+","+f[1][1]+" "+f[2][0]+","+f[2][1]+" "+f[3][0]+","+f[3][1],g=1;g<u;g++)f=l(h,g),m+=" C"+f[1][0]+","+f[1][1]+" "+f[2][0]+","+f[2][1]+" "+f[3][0]+","+f[3][1];return m};d.svgPath=w;var S=function(e){var i={scale:function(e){"number"==typeof e&&(e=[e,e]),t=e[0],n=e[1],g.setSize((r[1]-r[0])*t,(a[1]-a[0])*n)},clipRect:function(e){var t=e[0],n=e[1];return t[1]+=n[1],{"clip-rect":b(t).concat(y(n)).join(" ")}},strokeWidth:function(e){return{"stroke-width":parseFloat(e)}},rx:function(e){return{rx:y([e,0])[0]}},ry:function(e){return{ry:y([0,e])[1]}},r:function(e){var t=y([e,e]);return{rx:t[0],ry:t[1]}}},o={};return $.each(e||{},function(e,t){var n=i[e];if("function"==typeof n)$.extend(o,n(t));else{var r=e.replace(/([A-Z]+)([A-Z][a-z])/g,"$1-$2").replace(/([a-z\d])([A-Z])/g,"$1-$2").toLowerCase();o[r]=t}}),o},k=function e(t){var n=t.constructor.prototype;if(n===Raphael.el){if("path"===t.type&&"undefined"==typeof t.arrowheadsDrawn){var r=t.attr("stroke-width"),i=.6+.4*r,o=t.getTotalLength(),s=g.set(),a=g.path(M.isMobile?"M-4,4 C-4,4 -0.25,0 -0.25,0 C-0.25,0 -4,-4 -4,-4":"M-3 4 C-2.75 2.5 0 0.25 0.75 0C0 -0.25 -2.75 -2.5 -3 -4"),l=t.getPointAtLength(o-.4),p=t.getPointAtLength(o-.75*i),c=180*Math.atan2(l.y-p.y,l.x-p.x)/Math.PI,u=t.attr();delete u.path;var h=t.getSubpath(0,o-.75*i);return h=g.path(h).attr(u),h.arrowheadsDrawn=!0,t.remove(),a.rotate(c,M.isMobile?1e-5:.75,0).scale(i,i,.75,0).translate(p.x,p.y).attr(u).attr({"stroke-linejoin":"round","stroke-linecap":"round"}),a.arrowheadsDrawn=!0,s.push(h),s.push(a),s}}else if(n===Raphael.st)for(var d=0,f=t.items.length;d<f;d++)e(t.items[d]);return t},N={circle:function(e,t){return g.ellipse.apply(g,b(e).concat(y([t,t])))},rect:function(e,t,n,r){var i=b([e,t+r]),o=y([n,r]),s=g.rect.apply(g,i.concat(o));return M.isMobile&&(s.node.style.shapeRendering="crispEdges"),s},ellipse:function(e,t){return g.ellipse.apply(g,b(e).concat(y(t)))},fixedEllipse:function(e,t,n,r){var i=b(e),o=y(t),s=2*o[0]*n+r,a=2*o[1]*n+r,l=i[0]-s/2,p=i[1]-a/2,c=document.createElement("div");$(c).css({position:"absolute",width:s+"px",height:a+"px",left:l+"px",top:p+"px"});var u=Raphael(c,s,a),h=u.ellipse(s/2,a/2,o[0],o[1]);return{wrapper:c,visibleShape:h}},arc:function(e,t,n,r,o){n=(n%360+360)%360,r=(r%360+360)%360;var s=b(e),a=y(t),l=i(t,n),p=i(t,r),c=b([e[0]+l[0],e[1]+l[1]]),u=b([e[0]+p[0],e[1]+p[1]]),h=((r-n)%360+360)%360>180;return g.path("M"+c.join(" ")+"A"+a.join(" ")+" 0 "+(h?1:0)+" 0 "+u.join(" ")+(o?"L"+s.join(" ")+"z":""))},path:function(e){var t=g.path(w(e));return t.graphiePath=e,t},fixedPath:function(e,t,n){e=p.map(e,b),t=t?b(t):null,n=n||w;var r=p.min(p.pluck(e,0)),i=p.max(p.pluck(e,0)),o=p.min(p.pluck(e,1)),s=p.max(p.pluck(e,1)),a=[4,4],c=[r,o];e=p.map(e,function(e){return l.add(l.subtract(e,c),l.scale(a,.5))});var u=i-r+a[0],h=s-o+a[1],d=c[0]-a[0]/2,f=c[1]-a[1]/2,m=document.createElement("div");$(m).css({position:"absolute",width:u+"px",height:h+"px",left:d+"px",top:f+"px",transformOrigin:t?u/2+t[0]+"px "+(h/2+t[1])+"px":null});var g=Raphael(m,u,h),v=g.path(n(e));return{wrapper:m,visibleShape:v}},scaledPath:function(e){var t=g.path(w(e,!0));return t.graphiePath=e,t},line:function(e,t){var n=this.path([e,t]);return M.isMobile&&(n.node.style.shapeRendering="crispEdges"),n},parabola:function(e,t,n){return g.path(C(e,t,n))},fixedLine:function(e,t,n){var r=[n,n];e=b(e),t=b(t);var i=[Math.min(e[0],t[0]),Math.min(e[1],t[1])];e=l.add(l.subtract(e,i),l.scale(r,.5)),t=l.add(l.subtract(t,i),l.scale(r,.5));var o=i[0]-r[0]/2,s=i[1]-r[1]/2,a=Math.abs(e[0]-t[0])+r[0],p=Math.abs(e[1]-t[1])+r[1],c=document.createElement("div");$(c).css({position:"absolute",width:a+"px",height:p+"px",left:o+"px",top:s+"px",transformOrigin:e[0]+"px "+e[1]+"px"});var u=Raphael(c,a,p),h="M"+e[0]+" "+e[1]+" L"+t[0]+" "+t[1],d=u.path(h);return d.graphiePath=[e,t],{wrapper:c,visibleShape:d}},sinusoid:function(e,t,n,r){return g.path(P(e,t,n,r))},grid:function(e,t){for(var n=v.step||[1,1],r=g.set(),i=n[0]*Math.ceil(e[0]/n[0]);i<=e[1];i+=n[0])r.push(this.line([i,t[0]],[i,t[1]]));for(var o=n[1]*Math.ceil(t[0]/n[1]);o<=t[1];o+=n[1])r.push(this.line([e[0],o],[e[1],o]));return r},label:function(t,n,r,i){i="undefined"==typeof i||i;var o=$("<span>").addClass("graphie-label"),s=v["label-distance"];o.css($.extend({},v,{position:"absolute",padding:(null!=s?s:7)+"px"})).data("labelDirection",r).appendTo(e),o.setPosition=function(e){var t=b(e);o.css({left:t[0],top:t[1]})},o.setPosition(t);var a=o[0];return o.processMath=function(e,t){u(a,e,t,function(){var e=a.scrollWidth,t=a.scrollHeight;x(a,[e,t])})},o.processText=function(e){o.html(e);var t=a.scrollWidth,n=a.scrollHeight;x(a,[t,n])},i?o.processMath(n,!1):o.processText(n),o},plotParametric:function(e,t,r,i){i=i||function(e){return[e,0]},v.strokeLinejoin||(v.strokeLinejoin="round"),v.strokeLinecap||(v.strokeLinecap="round");var o=t[0],s=t[1],a=(s-o)/(v["plot-points"]||800);0===a&&(a=1);for(var l=g.set(),p=[],c=d.coordDiff(e(o),i(o)),u=o,h=o;h<=s;h+=a){var f=e(h),m=i(h),y=d.coordDiff(f,m);if(y[1]<0!=c[1]<0&&Math.abs(y[1]-c[1])>2*n||Math.abs(y[1])>1e7||isNaN(y[1])){if(r){p.push(f);for(var b=h-a;b>=u;b-=a)p.push(i(b));u=h}l.push(this.path(p)),p=[],r&&p.push(f)}else p.push(f);c=y}if(r)for(var E=s-a;E>=u;E-=a)p.push(i(E));return l.push(this.path(p)),l},plotPolar:function(e,n){var r=n[0],o=n[1];return v["plot-points"]||(v["plot-points"]=2*(o-r)*t),this.plotParametric(function(t){return i(e(t),180*t/Math.PI)},n)},plot:function(e,n,r,i,o){var s=n[0],a=n[1];if(v["plot-points"]||(v["plot-points"]=2*(a-s)*t),r){if(o)throw new Error("Can't shade area between functions with swapped axes.");return this.plotParametric(function(t){return[e(t),t]},n,i)}if(o){if(i)return this.plotParametric(function(t){return[t,e(t)]},n,i,function(e){return[e,o(e)]});throw new Error("fn2 should only be set when 'shade' is True.")}return this.plotParametric(function(t){return[t,e(t)]},n,i)},plotPiecewise:function(e,t){var n=g.set(),r=this;return p.times(e.length,function(i){var o=e[i],s=t[i],a=r.plotParametric(function(e){return[e,o(e)]},s);p.each(a,function(e){n.push(e)})}),n},plotEndpointCircles:function(e){var t=g.set(),n=this;return p.each(e,function(e,r){t.push(n.circle(e,.15))}),t},plotAsymptotes:function(e,t){for(var r=t[0],i=t[1],o=(i-r)/(v["plot-points"]||800),s=g.set(),a=e(r),l=r;l<=i;l+=o){var p=e(l);p<0!=a<0&&Math.abs(p-a)>2*n&&s.push(this.line([l,n],[l,-n])),a=p}return s}},M=new f;return p.extend(M,{raphael:g,init:function(i){var o=i.scale||[40,40];if(o="number"==typeof o?[o,o]:o,t=o[0],n=o[1],null==i.range)return Khan.error("range should be specified in graph init");r=i.range[0],a=i.range[1];var s=(r[1]-r[0])*t,l=(a[1]-a[0])*n;return g.setSize(s,l),$(e).css({width:s,height:l}),this.range=i.range,this.scale=o,this.dimensions=[s,l],this.xpixels=s,this.ypixels=l,this.isMobile=i.isMobile,this},style:function(e,t){var n=S(e);if("function"==typeof t){var r=v;v=$.extend({},v,n);var i=t.call(M);return v=r,i}$.extend(v,n)},scalePoint:b,scaleVector:y,unscalePoint:E,unscaleVector:T,svgPath:w,svgParabolaPath:C,svgSinusoidPath:P}),$.each(N,function(e){M[e]=function(){var t=arguments[arguments.length-1],n=v,r=void 0;if("object"!==("undefined"==typeof t?"undefined":s(t))||p.isArray(t))v=$.extend({},v),r=N[e].apply(N,arguments);else{v=o({},v,S(t));var i=[].slice.call(arguments,0,arguments.length-1);r=N[e].apply(N,i)}var a=r.constructor.prototype;return a===Raphael.el||a===Raphael.st?(r.attr(v),v.arrows&&(r=k(r))):r instanceof $&&r.css(v),v=n,r}}),M.graphInit=function(e){var t=this;e=e||{},$.each(e,function(t,n){t.match(/.*Opacity$/)||"range"===t||"number"!=typeof n||(e[t]=[n,n]),"range"!==t&&"gridRange"!==t||(n.constructor===Array?n[0].constructor!==Array&&(e[t]=[[-n[0],n[0]],[-n[1],n[1]]]):"number"==typeof n&&(e[t]=[[-n,n],[-n,n]]))});var n=e.range||[[-10,10],[-10,10]],r=e.gridRange||e.range,i=e.scale||[20,20],o=null==e.grid||e.grid,s=e.gridOpacity||.1,a=e.gridStep||[1,1],l=null==e.axes||e.axes,c=e.axisArrows||"",u=e.axisOpacity||1,d=e.axisCenter||[Math.min(Math.max(n[0][0],0),n[0][1]),Math.min(Math.max(n[1][0],0),n[1][1])],f=null!=e.axisLabels&&e.axisLabels,m=null==e.ticks||e.ticks,g=e.tickStep||[2,2],v=e.tickLen||[5,5],y=e.tickOpacity||1,b=e.labels||e.labelStep||!1,E=e.labelStep||[1,1],T=e.labelOpacity||1,x=e.unityLabels||!1,w=e.labelFormat||function(e){return e},C=e.xLabelFormat||w,P=e.yLabelFormat||w,S=null==e.smartLabelPositioning||e.smartLabelPositioning,k=[[n[0][0]-(n[0][0]>0?1:0),n[0][1]+(n[0][1]<0?1:0)],[n[1][0]-(n[1][0]>0?1:0),n[1][1]+(n[1][1]<0?1:0)]];if(p.isArray(x)||(x=[x,x]),S){var N=function(e){return function(t){return(e(t)+"").replace(/-(\d)/g,"\\llap{-}$1")}};C=N(C),P=N(P)}this.init({range:k,scale:i,isMobile:e.isMobile}),o&&this.grid(r[0],r[1],{stroke:e.isMobile?h.GRAY_C:"#000000",opacity:e.isMobile?1:s,step:a,strokeWidth:e.isMobile?1:2}),l&&("<->"===c||c===!0?this.style({stroke:e.isMobile?h.GRAY_G:"#000000",opacity:e.isMobile?1:u,strokeWidth:e.isMobile?1:2,arrows:"->"},function(){n[1][0]<0&&n[1][1]>0&&(this.path([d,[r[0][0],d[1]]]),this.path([d,[r[0][1],d[1]]])),n[0][0]<0&&n[0][1]>0&&(this.path([d,[d[0],r[1][0]]]),this.path([d,[d[0],r[1][1]]]))}):"->"!==c&&""!==c||this.style({stroke:"#000000",opacity:u,strokeWidth:2,arrows:c},function(){this.path([[r[0][0],d[1]],[r[0][1],d[1]]]),this.path([[d[0],r[1][0]],[d[0],r[1][1]]])}),f&&2===f.length&&(this.label([r[0][1],d[1]],f[0],"right"),this.label([d[0],r[1][1]],f[1],"above"))),m&&!function(){var o=e.isMobile;t.style({stroke:e.isMobile?h.GRAY_G:"#000000",opacity:e.isMobile?1:y,strokeWidth:1},function(){var e=a[0]*g[0],t=v[0]/i[1],s=r[0][0],l=r[0][1];if(n[1][0]<0&&n[1][1]>0){for(var p=e+d[0];p<=l;p+=e)(p<l||!c)&&this.line([p,-t+d[1]],[p,o?0:t+d[1]]);for(var u=-e+d[0];u>=s;u-=e)(u>s||!c)&&this.line([u,-t+d[1]],[u,o?0:t+d[1]])}if(e=a[1]*g[1],t=v[1]/i[0],s=r[1][0],l=r[1][1],n[0][0]<0&&n[0][1]>0){for(var h=e+d[1];h<=l;h+=e)(h<l||!c)&&this.line([-t+d[0],h],[o?0:t+d[0],h]);for(var f=-e+d[1];f>=s;f-=e)(f>s||!c)&&this.line([-t+d[0],f],[o?0:t+d[0],f])}})}(),b&&this.style({stroke:e.isMobile?h.GRAY_G:"#000000",opacity:e.isMobile?1:T},function(){for(var e=a[0]*g[0]*E[0],t=r[0][0],n=r[0][1],i=d[0]<0?"above":"below",o=d[0]<0?"right":"left",s=0===d[0]&&0!==d[1],l=0!==d[0]&&0===d[1],p=0!==d[0]||0!==d[1],u=x[0]||p,h=x[1]||p,f=(s?0:e)+d[0];f<=n;f+=e)(f<n||!c)&&this.label([f,d[1]],C(f),i);for(var m=-e*(u?1:2)+d[0];m>=t;m-=e)(m>t||!c)&&this.label([m,d[1]],C(m),i);e=a[1]*g[1]*E[1],t=r[1][0],n=r[1][1];for(var v=(l?0:e)+d[1];v<=n;v+=e)(v<n||!c)&&this.label([d[0],v],P(v),o);for(var y=-e*(h?1:2)+d[1];y>=t;y-=e)(y>t||!c)&&this.label([d[0],y],P(y),o)})},M},e.exports=d},function(e,t,n){"use strict";function r(e){return f.reduce(e,function(e,t){return e+t},0)}function i(e){var t=f.zip(e,e.slice(1).concat(e.slice(0,1))),n=f.map(t,function(e){var t=e[0],n=e[1];return(n[0]-t[0])*(n[1]+t[1])});return r(n)>0}function o(){var e=f.toArray(arguments),t=f.zip.apply(f,e);return f.map(t,r)}function s(e){return f.map(e,function(e){return e*-1})}function a(e){var t=70.2941120352484,n=11.374597405497571,r=-.037587715462826674;return(t-n)*Math.exp(r*e)+n}function l(e,t){return[e*Math.cos(t),e*Math.sin(t)*-1]}function p(e,t){var n=t*Math.PI/180;return l(e,n)}function c(e,t){this.set=e.raphael.set(),this.cx=t[0],this.cy=t[1];var n=this,r=e.unscaleVector(180.5)[0],i=e.scalePoint([this.cx-r,this.cy+r-e.unscaleVector(10.5)[1]]);this.set.push(e.mouselayer.image("https://ka-perseus-graphie.s3.amazonaws.com/e9d032f2ab8b95979f674fbfa67056442ba1ff6a.png",i[0],i[1],360,180));var o=function(n,i){var o=e.scaleVector(r);o[0]-=16,o[1]-=16;var s=e.scalePoint(t),a=Math.sin((n+90)*Math.PI/180)*(o[0]+i)+s[0],l=Math.cos((n+90)*Math.PI/180)*(o[1]+i)+s[1];return a+","+l},s=e.raphael.path(" M"+o(180,6)+" L"+o(180,2)+" L"+o(183,10)+" L"+o(180,18)+" L"+o(180,14)+" A"+(e.scaleVector(r)[0]+10)+","+(e.scaleVector(r)[1]+10)+",0,0,1,"+o(170,14)+" L"+o(170,18)+" L"+o(167,10)+" L"+o(170,2)+" L"+o(170,6)+" A"+(e.scaleVector(r)[0]+10)+","+(e.scaleVector(r)[1]+10)+",0,0,0,"+o(180,6)+" Z").attr({stroke:null,fill:w.INTERACTIVE});this.set.push(s),this.centerPoint=e.addMovablePoint({coord:t,visible:!1}),this.rotateHandle=e.addMovablePoint({coord:[Math.sin(275*Math.PI/180)*(r+.5)+this.cx,Math.cos(275*Math.PI/180)*(r+.5)+this.cy],onMove:function(e,t){var r=180*Math.atan2(n.centerPoint.coord[1]-t,n.centerPoint.coord[0]-e)/Math.PI;n.rotate(-r-5,!0)}}),this.rotateHandle.constraints.fixedDistance.dist=r+.5,this.rotateHandle.constraints.fixedDistance.point=this.centerPoint,this.rotateHandle.visibleShape.remove(),this.rotateHandle.mouseTarget.attr({scale:2});var a=!1,l=!1,p=function(){return l||a},c=this,u=$(c.rotateHandle.mouseTarget.getMouseTarget());u.bind("vmousedown",function(e){a=!0,s.animate({scale:1.5,fill:w.INTERACTING},50),$(document).bind("vmouseup.rotateHandle",function(e){a=!1,p()||s.animate({scale:1,fill:w.INTERACTIVE},50),$(document).unbind("vmouseup.rotateHandle")})}),u.bind("vmouseover",function(e){l=!0,s.animate({scale:1.5,fill:w.INTERACTING},50)}),u.bind("vmouseout",function(e){l=!1,p()||s.animate({scale:1,fill:w.INTERACTIVE},50)});var h=$.map(this.set,function(e){return e.node});return this.makeTranslatable=function(){$(h).css("cursor","move"),$(h).bind("vmousedown",function(t){t.preventDefault();var r=t.pageX-$(e.raphael.canvas.parentNode).offset().left,i=t.pageY-$(e.raphael.canvas.parentNode).offset().top;$(document).bind("vmousemove.protractor",function(t){var o=t.pageX-$(e.raphael.canvas.parentNode).offset().left,s=t.pageY-$(e.raphael.canvas.parentNode).offset().top;
o=Math.max(10,Math.min(e.xpixels-10,o)),s=Math.max(10,Math.min(e.ypixels-10,s));var a=o-r,l=s-i;$.each(n.set.items,function(){this.translate(a,l)}),n.centerPoint.setCoord([n.centerPoint.coord[0]+a/e.scale[0],n.centerPoint.coord[1]-l/e.scale[1]]),n.rotateHandle.setCoord([n.rotateHandle.coord[0]+a/e.scale[0],n.rotateHandle.coord[1]-l/e.scale[1]]),r=o,i=s}),$(document).one("vmouseup",function(e){$(document).unbind("vmousemove.protractor")})})},this.rotation=0,this.rotate=function(t,n){var r=e.scalePoint(this.centerPoint.coord);return n&&(this.rotation=0),this.set.rotate(this.rotation+t,r[0],r[1]),this.rotation=this.rotation+t,this},this.moveTo=function(t,r){var i=e.scalePoint(n.centerPoint.coord),o=e.scalePoint([t,r]),s=2*m.getDistance(i,o);$({x:i[0],y:i[1]}).animate({x:o[0],y:o[1]},{duration:s,step:function(t,r){var i=0,o=0;"x"===r.prop?i=t-e.scalePoint(n.centerPoint.coord)[0]:"y"===r.prop&&(o=t-e.scalePoint(n.centerPoint.coord)[1]),$.each(n.set.items,function(){this.translate(i,o)}),n.centerPoint.setCoord([n.centerPoint.coord[0]+i/e.scale[0],n.centerPoint.coord[1]-o/e.scale[1]]),n.rotateHandle.setCoord([n.rotateHandle.coord[0]+i/e.scale[0],n.rotateHandle.coord[1]-o/e.scale[1]])}})},this.rotateTo=function(e){Math.abs(this.rotation-e)>180&&(this.rotation+=360);var t=5*Math.abs(this.rotation-e);$({0:this.rotation}).animate({0:e},{duration:t,step:function(e,t){n.rotate(e,!0),n.rotateHandle.setCoord([Math.sin((e+275)*Math.PI/180)*(r+.5)+n.centerPoint.coord[0],Math.cos((e+275)*Math.PI/180)*(r+.5)+n.centerPoint.coord[1]])}})},this.remove=function(){this.set.remove()},this.makeTranslatable(),this}function u(e,t){function n(e){for(var t=0;t<y.length;t++){var n=y[t];if(e%n===0)return h[n]}}f.defaults(t,{center:[0,0],pixelsPerUnit:40,ticksPerUnit:10,units:10,label:"",style:{fill:null,stroke:w.GRAY}});var r=f.extend({},t.style,{strokeWidth:1}),i=f.extend({},t.style,{strokeWidth:2}),o=t.units*t.pixelsPerUnit,s=50,a=e.unscalePoint(g.subtract(e.scalePoint(t.center),g.scale([o,-s],.5))),l=t.pixelsPerUnit/e.scale[0],p=s/e.scale[0],c=g.add(a,[t.units*l,p]),u=1,h=void 0;if(10===t.ticksPerUnit)h={10:u,5:.55*u,1:.35*u};else{var d=[1,.6,.45,.3];h={};for(var v=t.ticksPerUnit;v>=1;v/=2)h[v]=u*(d.shift()||.2)}var y=f.keys(h).sort(function(e,t){return t-e}),b=a[0],E=a[1],T=c[0],x=c[1],C=t.units*t.ticksPerUnit+1,P=e.raphael.set(),S=1/e.scale[0];P.push(e.line([b-S,E],[T+S,E],i)),P.push(e.line([b-S,x],[T+S,x],i)),f.times(C,function(o){var s=o/t.ticksPerUnit,a=b+s*l,c=n(o)*p,u=0===o||o===C-1?i:r;if(P.push(e.line([a,E],[a,E+c],u)),s%1===0){var h=e.scalePoint([a,x]),d=void 0,f=void 0;0===s?(d=t.label,f={mm:13,cm:11,m:8,km:11,in:8,ft:8,yd:10,mi:10}[d]||3*d.toString().length):(d=s,f=-3*(s.toString().length+1));var m=e.raphael.text(h[0]+f,h[1]+10,d);m.attr({"font-family":"KaTeX_Main","font-size":"12px",color:"#444"}),P.push(m)}});var k=e.mouselayer.path(m.svgPath([a,[b,x],c,[T,E],!0]));k.attr({fill:"#000",opacity:0,stroke:"#000","stroke-width":2}),P.push(k);var N=$.map(P,function(e){return e.node});$(N).css("cursor","move"),$(N).bind("vmousedown",function(t){t.preventDefault();var n=t.pageX-$(e.raphael.canvas.parentNode).offset().left,r=t.pageY-$(e.raphael.canvas.parentNode).offset().top;$(document).bind("vmousemove.ruler",function(t){var i=t.pageX-$(e.raphael.canvas.parentNode).offset().left,o=t.pageY-$(e.raphael.canvas.parentNode).offset().top;i=Math.max(10,Math.min(e.xpixels-10,i)),o=Math.max(10,Math.min(e.ypixels-10,o));var s=i-n,a=o-r;P.translate(s,a),M.setCoord([M.coord[0]+s/e.scale[0],M.coord[1]-a/e.scale[1]]),_.setCoord([_.coord[0]+s/e.scale[0],_.coord[1]-a/e.scale[1]]),n=i,r=o}),$(document).one("vmouseup",function(e){$(document).unbind("vmousemove.ruler")})});var M=e.addMovablePoint({coord:a,normalStyle:{fill:w.INTERACTIVE,"fill-opacity":0,stroke:w.INTERACTIVE},highlightStyle:{fill:w.INTERACTING,"fill-opacity":.1,stroke:w.INTERACTING},pointSize:6,onMove:function(t,n){var r=_.coord[1]-n,i=_.coord[0]-t,o=180*Math.atan2(r,i)/Math.PI,s=g.scale(g.add([t,n],_.coord),.5),a=e.scalePoint(s),l=g.scale(g.add(M.coord,_.coord),.5),p=e.scalePoint(l),c=g.subtract(a,p);P.rotate(-o,p[0],p[1]),P.translate(c[0],c[1])}}),_=e.addMovablePoint({coord:[T,E],normalStyle:{fill:w.INTERACTIVE,"fill-opacity":0,stroke:w.INTERACTIVE},highlightStyle:{fill:w.INTERACTING,"fill-opacity":.1,stroke:w.INTERACTING},pointSize:6,onMove:function(t,n){var r=n-M.coord[1],i=t-M.coord[0],o=180*Math.atan2(r,i)/Math.PI,s=g.scale(g.add([t,n],M.coord),.5),a=e.scalePoint(s),l=g.scale(g.add(M.coord,_.coord),.5),p=e.scalePoint(l),c=g.subtract(a,p);P.rotate(-o,p[0],p[1]),P.translate(c[0],c[1])}});return M.constraints.fixedDistance.dist=o/e.scale[0],M.constraints.fixedDistance.point=_,_.constraints.fixedDistance.dist=o/e.scale[0],_.constraints.fixedDistance.point=M,this.remove=function(){P.remove(),M.remove(),_.remove()},this}function h(e,t){if(this.graphie=e,f.extend(this,t),f.defaults(this,{normalStyle:{stroke:w.INTERACTIVE,"stroke-width":2,fill:w.INTERACTIVE},highlightStyle:{stroke:w.INTERACTING,"stroke-width":2,fill:w.INTERACTING},labelStyle:{stroke:w.DYNAMIC,"stroke-width":1,color:w.DYNAMIC},angleStyle:{stroke:w.DYNAMIC,"stroke-width":1,color:w.DYNAMIC},allowReflex:!0}),!this.points||3!==this.points.length)throw new Error("MovableAngle requires 3 points");this.points=f.map(t.points,function(t){return f.isArray(t)?e.addMovablePoint({coord:t,visible:!1,constraints:{fixed:!0},normalStyle:this.normalStyle}):t},this),this.coords=f.pluck(this.points,"coord"),null==this.reflex&&(this.allowReflex?this.reflex=this._getClockwiseAngle(this.coords)>180:this.reflex=!1),this.rays=f.map([0,2],function(t){return e.addMovableLineSegment({pointA:this.points[1],pointZ:this.points[t],fixed:!0,extendRay:!0})},this),this.temp=[],this.labeledAngle=e.label([0,0],"","center",this.labelStyle),this.fixed||(this.addMoveHandlers(),this.addHighlightHandlers()),this.update()}var d="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol?"symbol":typeof e},f=n(57);n(254);var m=n(223),g=n(221).vector,v=n(221).point,y=n(221).line,b=n(255),E=n(196),T=n(256),x=n(165),w=n(197),C=n(189),P=C.getCanUse3dTransform,S=!1,k={bogusShape:{animate:function(){},attr:function(){},remove:function(){}}};f.extend(m.Graphie.prototype,{addMouseLayer:function(e){var t=this;e=f.extend({allowScratchpad:!1,setDrawingAreaAvailable:function(){}},e);var n=2;t.mouselayer=Raphael(t.raphael.canvas.parentNode,t.xpixels,t.ypixels),$(t.mouselayer.canvas).css("z-index",n),(e.onClick||e.onMouseDown||e.onMouseMove||e.onMouseOver||e.onMouseOut)&&!function(){var n=t.mouselayer.rect(0,0,t.xpixels,t.ypixels).attr({fill:"#000",opacity:0}),r=!1;$(t.mouselayer.canvas).on("vmousedown",function(i){i.target===n[0]&&(e.onMouseDown&&e.onMouseDown(t.getMouseCoord(i)),r=!0,e.onMouseMove&&$(document).bind("vmousemove.mouseLayer",function(n){r&&(n.preventDefault(),e.onMouseMove(t.getMouseCoord(n)))}),$(document).bind("vmouseup.mouseLayer",function(n){$(document).unbind(".mouseLayer"),r&&e.onClick&&e.onClick(t.getMouseCoord(n)),r=!1}))}),e.onMouseOver&&$(t.mouselayer.canvas).on("vmouseover",function(n){e.onMouseOver(t.getMouseCoord(n))}),e.onMouseOut&&$(t.mouselayer.canvas).on("vmouseout",function(n){e.onMouseOut(t.getMouseCoord(n))})}(),e.allowScratchpad||e.setDrawingAreaAvailable(!1),t._mouselayerWrapper=document.createElement("div"),$(t._mouselayerWrapper).css({position:"absolute",left:0,top:0,zIndex:n}),t._visiblelayerWrapper=document.createElement("div"),$(t._visiblelayerWrapper).css({position:"absolute",left:0,top:0});var r=t.raphael.canvas.parentNode;r.appendChild(t._visiblelayerWrapper),r.appendChild(t._mouselayerWrapper),t.addToMouseLayerWrapper=function(e){this._mouselayerWrapper.appendChild(e)},t.addToVisibleLayerWrapper=function(e){this._visiblelayerWrapper.appendChild(e)}},getMousePx:function(e){var t=this,n=e.pageX-$(t.raphael.canvas.parentNode).offset().left,r=e.pageY-$(t.raphael.canvas.parentNode).offset().top;return[n,r]},getMouseCoord:function(e){return this.unscalePoint(this.getMousePx(e))},labelAngle:function(e){var t=this;f.defaults(e,{point1:[0,0],vertex:[0,0],point3:[0,0],label:null,numArcs:1,showRightAngleMarker:!0,pushOut:0,clockwise:!1,style:{}});var n=void 0===e.text?"":e.text,r=e.vertex,i=t.scalePoint(r),s=void 0,l=void 0;e.clockwise?(s=e.point1,l=e.point3):(s=e.point3,l=e.point1);var c=m.findAngle(s,r),u=m.findAngle(l,r),h=(u+360-c)%360,d=(c+h/2)%360,g=5*e.pushOut,v=g+a(h),y=[];if(Math.abs(h-90)<1e-9&&e.showRightAngleMarker?!function(){var n=o(i,p(v,c)),r=o(i,p(v,u));v*=Math.SQRT2;var s=o(i,p(v,d));f.each([n,r],function(n){y.push(t.scaledPath([n,s],e.style))})}():f.times(e.numArcs,function(n){y.push(t.arc(r,t.unscaleVector(v),c,u,e.style)),v+=3}),n){var b=n.match(/\$deg(\d)?/);if(b){var E=b[1]||1;n=n.replace(b[0],x.toFixedApprox(h,E)+"^{\\circ}")}var T=p(v+15,d),w=o(i,T),C=t.unscalePoint(w);e.label?(e.label.setPosition(C),e.label.processMath(n,!0)):t.label(C,n,"center",e.style)}return y},labelSide:function(e){var t=this;f.defaults(e,{point1:[0,0],point2:[0,0],label:null,text:"",numTicks:0,numArrows:0,clockwise:!1,style:{}});var n=void 0,r=void 0;e.clockwise?(n=e.point1,r=e.point2):(n=e.point2,r=e.point1);var i=[(n[0]+r[0])/2,(n[1]+r[1])/2],a=t.scalePoint(i),p=Math.atan2(r[1]-n[1],r[0]-n[0]),c=p+Math.PI/2,u=[],h=0;e.numTicks&&!function(){var n=e.numTicks,r=5,i=5,d=f.extend({},e.style,{strokeWidth:2});f.times(n,function(e){var h=r*(e-(n-1)/2),f=l(h,p),m=l(i,c),g=[o(a,f,m),o(a,f,s(m))];u.push(t.scaledPath(g,d))}),h+=r*(n-1)+15}(),e.numArrows&&!function(){var i=e.numArrows,c=[n,r].sort(function(e,t){return e[1]===t[1]?e[0]-t[0]:e[1]-t[1]})[0],d=t.scalePoint(c),m=f.extend({},e.style,{arrows:"->",strokeWidth:2}),g=5;f.times(i,function(e){var r=h+g*e,i=l(r,p);c!==n&&(i=s(i));var f=o(a,i);u.push(t.scaledPath([d,f],m))})}();var d=e.text;if(d){var g=d.match(/\$len(\d)?/);if(g){var v=m.getDistance(n,r),y=g[1]||1;d=d.replace(g[0],x.toFixedApprox(v,y))}var b=20,E=l(b,c),T=o(a,E),w=t.unscalePoint(T);e.label?(e.label.setPosition(w),e.label.processMath(d,!0)):t.label(w,d,"center",e.style)}return u},labelVertex:function(e){var t=this;if(f.defaults(e,{point1:null,vertex:[0,0],point3:null,label:null,text:"",clockwise:!1,style:{}}),e.text){var n=e.vertex,r=t.scalePoint(n),i=void 0,s=void 0;e.clockwise?(i=e.point1,s=e.point3):(i=e.point3,s=e.point1);var l=135,c=void 0;if(i&&s){var u=m.findAngle(i,n),h=m.findAngle(s,n);l=(h+360-u)%360,c=(u+l/2+180)%360}else if(i){var d=m.findAngle(n,i);c=d+90}else if(s){var g=m.findAngle(s,n);c=g+90}else c=135;var v=10+a(360-l),y=p(v,c),b=o(r,y),E=t.unscalePoint(b);e.label?(e.label.setPosition(E),e.label.processMath(e.text,!0)):t.label(E,e.text,"center",e.style)}},addMovablePoint:function(e){var t=$.extend(!0,{graph:this,coord:[0,0],snapX:0,snapY:0,pointSize:4,highlight:!1,dragging:!1,visible:!0,bounded:!0,constraints:{fixed:!1,constrainX:!1,constrainY:!1,fixedAngle:{},fixedDistance:{}},lineStarts:[],lineEnds:[],polygonVertices:[],normalStyle:{},highlightStyle:{fill:w.INTERACTING,stroke:w.INTERACTING},labelStyle:{color:w.INTERACTIVE},vertexLabel:"",mouseTarget:null},e),n=t.constraints.fixed?w.DYNAMIC:w.INTERACTIVE;t.normalStyle=f.extend({},{fill:n,stroke:n},e.normalStyle),void 0!==e.coordX&&(t.coord[0]=e.coordX),void 0!==e.coordY&&(t.coord[1]=e.coordY);var r=t.graph,i=function(e){t.visible&&t.bounded&&!t.constraints.fixed&&(e=r.constrainToBounds(e,10));var n=e[0],i=e[1];if(0!==t.snapX&&(n=Math.round(n/t.snapX)*t.snapX),0!==t.snapY&&(i=Math.round(i/t.snapY)*t.snapY),t.constraints.fixedDistance.snapPoints){var o=r.scalePoint(e),s=o[0],a=o[1],l=2*Math.PI/t.constraints.fixedDistance.snapPoints,p=t.constraints.fixedDistance.dist,c=t.constraints.fixedDistance.point,u=(c[0]-r.range[0][0])*r.scale[0],h=(-c[1]+r.range[1][1])*r.scale[1],d=s-u,f=-a+h,m=Math.atan(f/d),g=d<0;g&&(m+=Math.PI),m=Math.round(m/l)*l,d=p*Math.cos(m),f=p*Math.sin(m),s=d+u,a=-f+h,n=x.roundTo(5,s/r.scale[0]+r.range[0][0]),i=x.roundTo(5,r.range[1][1]-a/r.scale[1])}var v=t.applyConstraint([n,i]);return v};t.applyConstraint=function(e,n,r){var i=e.slice(),o={};if(r?$.extend(o,{fixed:!1,constrainX:!1,constrainY:!1,fixedAngle:{},fixedDistance:{}},n):$.extend(o,this.constraints,n),o.constrainX)i=[this.coord[0],e[1]];else if(o.constrainY)i=[e[0],this.coord[1]];else if("number"==typeof o.fixedAngle.angle&&"number"==typeof o.fixedDistance.dist){var s=o.fixedAngle.vertex.coord||o.fixedAngle.vertex,a=o.fixedAngle.ref.coord||o.fixedAngle.ref,l=o.fixedDistance.point.coord||o.fixedDistance.point,p=(o.fixedAngle.angle+m.findAngle(a,s))*Math.PI/180,c=o.fixedDistance.dist;i[0]=c*Math.cos(p)+l[0],i[1]=c*Math.sin(p)+l[1]}else if("number"==typeof o.fixedAngle.angle){var u=o.fixedAngle.vertex.coord||o.fixedAngle.vertex,h=o.fixedAngle.ref.coord||o.fixedAngle.ref,d=(o.fixedAngle.angle+m.findAngle(h,u))*Math.PI/180,f=m.findAngle(e,u)*Math.PI/180,g=m.getDistance(e,u),v=g*Math.cos(d-f);v=v<1?1:v,i[0]=v*Math.cos(d)+u[0],i[1]=v*Math.sin(d)+u[1]}else if("number"==typeof o.fixedDistance.dist){var y=o.fixedDistance.point.coord||o.fixedDistance.point,b=m.findAngle(e,y),E=o.fixedDistance.dist;b=b*Math.PI/180,i[0]=E*Math.cos(b)+y[0],i[1]=E*Math.sin(b)+y[1]}else o.fixed&&(i=t.coord);return i},t.coord=i(t.coord);var o=2;if(t.visible&&r.style(t.normalStyle,function(){var e=[t.pointSize/r.scale[0],t.pointSize/r.scale[1]],n={maxScale:o,padding:2};t.visibleShape=new b(r,t.coord,e,n),t.visibleShape.attr(f.omit(t.normalStyle,"scale")),t.visibleShape.toFront()}),t.normalStyle.scale=1,t.highlightStyle.scale=o,t.vertexLabel&&(t.labeledVertex=this.label([0,0],"","center",t.labelStyle)),t.drawLabel=function(){t.vertexLabel&&t.graph.labelVertex({vertex:t.coord,label:t.labeledVertex,text:t.vertexLabel,style:t.labelStyle})},t.drawLabel(),t.grab=function(e){e=e||[0,0],$(document).bind("vmousemove.point vmouseup.point",function(n){n.preventDefault(),t.dragging=!0,S=!0;var o=g.add(r.getMouseCoord(n),e);o=i(o);var s=o[0],a=o[1],l=void 0,p=void 0;if("vmousemove"===n.type){var c=!0;if(f.isFunction(t.onMove)){var u=t.onMove(s,a);u===!1&&(c=!1),f.isArray(u)&&(s=u[0],a=u[1])}if(l=(s-r.range[0][0])*r.scale[0],p=(-a+r.range[1][1])*r.scale[1],c){var h=r.unscalePoint([l,p]);t.visibleShape.moveTo(h),t.mouseTarget.moveTo(h),t.coord=[s,a],t.updateLineEnds(),$(t).trigger("move")}t.drawLabel()}else if("vmouseup"===n.type){if($(document).unbind(".point"),t.dragging=!1,S=!1,f.isFunction(t.onMoveEnd)){var d=t.onMoveEnd(s,a);if(f.isArray(d)){s=d[0],a=d[1],l=(s-r.range[0][0])*r.scale[0],p=(-a+r.range[1][1])*r.scale[1];var m=r.unscalePoint([l,p]);t.visibleShape.moveTo(m),t.mouseTarget.moveTo(m),t.coord=[s,a]}}t.highlight||(t.visibleShape.animate(t.normalStyle,50),t.onUnhighlight&&t.onUnhighlight())}})},t.visible&&!t.constraints.fixed){if(!t.mouseTarget){var s=r.unscaleVector(24),a={mouselayer:!0,padding:0};t.mouseTarget=new b(r,t.coord,s,a),t.mouseTarget.attr({fill:"#000",opacity:0})}var l=$(t.mouseTarget.getMouseTarget());l.css("cursor","move"),l.bind("vmousedown vmouseover vmouseout",function(e){if("vmouseover"===e.type)t.highlight=!0,S||(t.visibleShape.animate(t.highlightStyle,50),t.onHighlight&&t.onHighlight());else if("vmouseout"===e.type)t.highlight=!1,t.dragging||S||(t.visibleShape.animate(t.normalStyle,50),t.onUnhighlight&&t.onUnhighlight());else if("vmousedown"===e.type&&(1===e.which||0===e.which)){e.preventDefault();var n=t.coord,i=r.getMouseCoord(e),o=!("ontouchstart"in window),s=o?[0,0]:g.subtract(n,i);t.grab(s)}})}return t.moveTo=function(e,n,r){var i=m.getDistance(this.graph.scalePoint([e,n]),this.graph.scalePoint(this.coord)),o=5*i,s=r&&function(e){t.coord=e,t.updateLineEnds()};this.visibleShape.animateTo([e,n],o,s),this.mouseTarget.animateTo([e,n],o,s),this.coord=[e,n],f.isFunction(this.onMove)&&this.onMove(e,n)},t.updateLineEnds=function(){$(this.lineStarts).each(function(){this.coordA=t.coord,this.transform()}),$(this.lineEnds).each(function(){this.coordZ=t.coord,this.transform()}),$(this.polygonVertices).each(function(){this.transform()})},t.setCoord=function(e){this.visible&&(this.visibleShape.moveTo(e),null!=this.mouseTarget&&this.mouseTarget.moveTo(e)),this.coord=e.slice()},t.setCoordConstrained=function(e){this.setCoord(i(e))},t.toBack=function(){this.visible&&(null!=this.mouseTarget&&this.mouseTarget.toBack(),this.visibleShape.toBack())},t.toFront=function(){this.visible&&(null!=this.mouseTarget&&this.mouseTarget.toFront(),this.visibleShape.toFront())},t.remove=function(){this.visibleShape&&this.visibleShape.remove(),this.mouseTarget&&this.mouseTarget.remove(),this.labeledVertex&&this.labeledVertex.remove()},t},addMovableLineSegment:function(e){var t=$.extend({graph:this,coordA:[0,0],coordZ:[1,1],snapX:0,snapY:0,fixed:!1,ticks:0,normalStyle:{},highlightStyle:{stroke:w.INTERACTING,"stroke-width":6},labelStyle:{stroke:w.INTERACTIVE,color:w.INTERACTIVE},highlight:!1,dragging:!1,tick:[],extendLine:!1,extendRay:!1,constraints:{fixed:!1,constrainX:!1,constrainY:!1},sideLabel:"",vertexLabels:[],numArrows:0,numTicks:0,movePointsWithLine:!1},e),n=t.fixed?w.DYNAMIC:w.INTERACTIVE;t.normalStyle=f.extend({},{"stroke-width":2,stroke:n},e.normalStyle),t.arrowStyle=f.extend({},t.normalStyle,{color:t.normalStyle.stroke}),void 0!==e.pointA?(t.coordA=e.pointA.coord,t.pointA.lineStarts.push(t)):void 0!==e.coordA&&(t.coordA=e.coordA.slice()),void 0!==e.pointZ?(t.coordZ=e.pointZ.coord,t.pointZ.lineEnds.push(t)):void 0!==e.coordA&&(t.coordA=t.coordA.slice());var r=t.graph;r.style(t.normalStyle);for(var i=0;i<t.ticks;++i)t.tick[i]=k.bogusShape;for(var o=m.unscaledSvgPath([[0,0],[1,0]]),s=0;s<t.ticks;++s){var a=.5-(t.ticks-1+2*s)/r.scale[0];o+=m.unscaledSvgPath([[a,-7],[a,7]])}if(e={thickness:Math.max(t.normalStyle["stroke-width"],t.highlightStyle["stroke-width"])},t.visibleLine=new E(r,[0,0],[1,0],e),t.visibleLine.attr(t.normalStyle),!t.fixed){var l={thickness:30,mouselayer:!0};t.mouseTarget=new E(r,[0,0],[1,0],l),t.mouseTarget.attr({fill:"#000",opacity:0})}if(t.transform=function(e){e&&("object"===d(this.pointA)&&(this.coordA=this.pointA.coord),"object"===d(this.pointZ)&&(this.coordZ=this.pointZ.coord));var n=function(e){var t=e.graph.scalePoint(e.coordA),n=e.graph.scalePoint(e.coordZ);return g.polarDegFromCart(g.subtract(n,t))[1]},i=function(e,n,r){e=t.graph;var i=e.range[0][1]-e.range[0][0],o=e.range[1][1]-e.range[1][0],s=i+o,a=e.unscaleVector(g.cartFromPolarDeg([1,r])),l=g.scale(g.normalize(a),s),p=g.add(n,l),c=g.polarDegFromCart(a)[1],u=e.constrainToBoundsOnAngle(p,4,c*Math.PI/180);return u},o=n(this),s=this.coordA,a=this.coordZ;this.extendLine?(s=i(r,s,360-o),a=i(r,a,(540-o)%360)):this.extendRay&&(a=i(r,s,360-o));var l=[this.visibleLine];this.fixed||l.push(this.mouseTarget),f.each(l,function(e){e.moveTo(s,a)});var p=function(e,t){var n=[.75,0],r=[[-3,4],[-2.75,2.5],[0,.25],n,[0,-.25],[-2.75,-2.5],[-3,-4]],o=1.4;r=f.map(r,function(e){var t=g.subtract(e,n),r=g.scale(t,o);return g.add(n,r)});var s=function(e){for(var t="M"+e[0][0]+" "+e[0][1],n=1;n<e.length;n+=3)t+="C"+e[n][0]+" "+e[n][1]+" "+e[n+1][0]+" "+e[n+1][1]+" "+e[n+2][0]+" "+e[n+2][1];return t},a=f.map(r,e.unscalePoint),l={center:e.unscalePoint(n),createPath:s},p=new T(e,a,l);return p.attr(f.extend({"stroke-linejoin":"round","stroke-linecap":"round","stroke-dasharray":""},t)),p.toCoordAtAngle=function(t,r){var s=e.scalePoint(i(e,t,r)),a=P();p.transform("translateX("+(s[0]+o*n[0])+"px) translateY("+(s[1]+o*n[1])+"px) "+(a?"translateZ(0) ":"")+"rotate("+(360-x.bound(r))+"deg)")},p};null==this._arrows&&(this._arrows=[],this.extendLine?(this._arrows.push(p(r,this.normalStyle)),this._arrows.push(p(r,this.normalStyle))):this.extendRay&&this._arrows.push(p(r,this.normalStyle)));var c=[this.coordA,this.coordZ],u=[360-o,(540-o)%360];f.each(this._arrows,function(e,t){e.toCoordAtAngle(c[t],u[t])}),f.invoke(this.temp,"remove"),this.temp=[];var h=this.coordA[0]<this.coordZ[0]||this.coordA[0]===this.coordZ[0]&&this.coordA[1]>this.coordZ[1];this.sideLabel&&this.temp.push(this.graph.labelSide({point1:this.coordA,point2:this.coordZ,label:this.labeledSide,text:this.sideLabel,numArrows:this.numArrows,numTicks:this.numTicks,clockwise:h,style:this.labelStyle})),this.vertexLabels.length&&(this.graph.labelVertex({vertex:this.coordA,point3:this.coordZ,label:this.labeledVertices[0],text:this.vertexLabels[0],clockwise:h,style:this.labelStyle}),this.graph.labelVertex({point1:this.coordA,vertex:this.coordZ,label:this.labeledVertices[1],text:this.vertexLabels[1],clockwise:h,style:this.labelStyle})),this.temp=f.flatten(this.temp)},t.toBack=function(){t.fixed||t.mouseTarget.toBack(),t.visibleLine.toBack()},t.toFront=function(){t.fixed||t.mouseTarget.toFront(),t.visibleLine.toFront()},t.remove=function(){t.fixed||t.mouseTarget.remove(),t.visibleLine.remove(),t.labeledSide&&t.labeledSide.remove(),t.labeledVertices&&f.invoke(t.labeledVertices,"remove"),t._arrows&&f.invoke(t._arrows,"remove"),t.temp.length&&f.invoke(t.temp,"remove")},t.hide=function(){t.visibleLine.hide(),t.temp.length&&f.invoke(t.temp,"hide"),t._arrows&&f.invoke(t._arrows,"hide")},t.show=function(){t.visibleLine.show(),t.temp.length&&f.invoke(t.temp,"show"),t._arrows&&f.invoke(t._arrows,"show")},t.sideLabel&&(t.labeledSide=this.label([0,0],"","center",t.labelStyle)),t.vertexLabels.length&&(t.labeledVertices=f.map(t.vertexLabels,function(e){return this.label([0,0],"","center",t.labelStyle)},this)),!t.fixed&&!t.constraints.fixed){var p=$(t.mouseTarget.getMouseTarget());p.css("cursor","move"),p.bind("vmousedown vmouseover vmouseout",function(e){"vmouseover"===e.type?S||(t.highlight=!0,t.visibleLine.animate(t.highlightStyle,50),t.arrowStyle=f.extend({},t.arrowStyle,{color:t.highlightStyle.stroke,stroke:t.highlightStyle.stroke}),t.transform()):"vmouseout"===e.type?(t.highlight=!1,t.dragging||(t.visibleLine.animate(t.normalStyle,50),t.arrowStyle=f.extend({},t.arrowStyle,{color:t.normalStyle.stroke,stroke:t.normalStyle.stroke}),t.transform())):"vmousedown"!==e.type||1!==e.which&&0!==e.which||!function(){e.preventDefault();var n=(e.pageX-$(r.raphael.canvas.parentNode).offset().left)/r.scale[0]+r.range[0][0],i=r.range[1][1]-(e.pageY-$(r.raphael.canvas.parentNode).offset().top)/r.scale[1];t.snapX>0&&(n=Math.round(n/t.snapX)*t.snapX),t.snapY>0&&(i=Math.round(i/t.snapY)*t.snapY);var o=[t.coordA[0]-n,t.coordA[1]-i],s=[t.coordZ[0]-n,t.coordZ[1]-i],a=-Math.min(r.scaleVector(o)[0],r.scaleVector(s)[0]),l=Math.max(r.scaleVector(o)[0],r.scaleVector(s)[0]),p=Math.max(r.scaleVector(o)[1],r.scaleVector(s)[1]),c=-Math.min(r.scaleVector(o)[1],r.scaleVector(s)[1]);$(document).bind("vmousemove.lineSegment vmouseup.lineSegment",function(e){e.preventDefault(),t.dragging=!0,S=!0;var n=e.pageX-$(r.raphael.canvas.parentNode).offset().left,i=e.pageY-$(r.raphael.canvas.parentNode).offset().top;n=Math.max(a+10,Math.min(r.xpixels-10-l,n)),i=Math.max(p+10,Math.min(r.ypixels-10-c,i));var u=n/r.scale[0]+r.range[0][0],h=r.range[1][1]-i/r.scale[1];if(t.snapX>0&&(u=Math.round(u/t.snapX)*t.snapX),t.snapY>0&&(h=Math.round(h/t.snapY)*t.snapY),"vmousemove"===e.type){t.constraints.constrainX&&(u=t.coordA[0]-o[0]),t.constraints.constrainY&&(h=t.coordA[1]-o[1]);var m=u+o[0]-t.coordA[0],g=h+o[1]-t.coordA[1];t.coordA=[u+o[0],h+o[1]],t.coordZ=[u+s[0],h+s[1]],t.transform(),t.movePointsWithLine&&("object"===d(t.pointA)&&t.pointA.setCoord([t.pointA.coord[0]+m,t.pointA.coord[1]+g]),"object"===d(t.pointZ)&&t.pointZ.setCoord([t.pointZ.coord[0]+m,t.pointZ.coord[1]+g])),f.isFunction(t.onMove)&&t.onMove(m,g)}else"vmouseup"===e.type&&($(document).unbind(".lineSegment"),t.dragging=!1,S=!1,t.highlight||(t.visibleLine.animate(t.normalStyle,50),t.arrowStyle=f.extend({},t.arrowStyle,{color:t.normalStyle.stroke,stroke:t.normalStyle.stroke}),t.transform()),f.isFunction(t.onMoveEnd)&&t.onMoveEnd());$(t).trigger("move")})}()})}return void 0!==t.pointA&&t.pointA.toFront(),void 0!==t.pointZ&&t.pointZ.toFront(),t.transform(),t},addMovablePolygon:function(e){var t=this,n=$.extend({snapX:0,snapY:0,fixed:!1,constrainToGraph:!0,normalStyle:{},highlightStyle:{stroke:w.INTERACTING,"stroke-width":2,fill:w.INTERACTING,"fill-opacity":.05},pointHighlightStyle:{fill:w.INTERACTING,stroke:w.INTERACTING},labelStyle:{stroke:w.DYNAMIC,"stroke-width":1,color:w.DYNAMIC},angleLabels:[],showRightAngleMarkers:[],sideLabels:[],vertexLabels:[],numArcs:[],numArrows:[],numTicks:[],updateOnPointMove:!0,closed:!0},f.omit(e,"points")),r=n.fixed?w.DYNAMIC:w.INTERACTIVE;n.normalStyle=f.extend({"stroke-width":2,"fill-opacity":0,fill:r,stroke:r},e.normalStyle),n.points=e.points;var o=function(e){return!f.isArray(e)};if(n.update=function(){var e=n.points.length;n.coords=f.map(n.points,function(e,t){return o(e)?e.coord:e}),n.left=f.min(f.pluck(n.coords,0)),n.right=f.max(f.pluck(n.coords,0)),n.top=f.max(f.pluck(n.coords,1)),n.bottom=f.min(f.pluck(n.coords,1));var r=f.map(n.coords,function(e){return t.scalePoint(e)});n.closed?r.push(!0):r=r.concat(f.clone(r).reverse()),n.path=m.unscaledSvgPath(r),f.invoke(n.temp,"remove"),n.temp=[];var s=i(n.coords);(n.angleLabels.length||n.showRightAngleMarkers.length)&&f.each(n.labeledAngles,function(r,i){n.temp.push(t.labelAngle({point1:n.coords[(i-1+e)%e],vertex:n.coords[i],point3:n.coords[(i+1)%e],label:r,text:n.angleLabels[i],showRightAngleMarker:n.showRightAngleMarkers[i],numArcs:n.numArcs[i],clockwise:s,style:n.labelStyle}))}),n.sideLabels.length&&f.each(n.labeledSides,function(r,i){n.temp.push(t.labelSide({point1:n.coords[i],point2:n.coords[(i+1)%e],label:r,text:n.sideLabels[i],numArrows:n.numArrows[i],numTicks:n.numTicks[i],clockwise:s,style:n.labelStyle}))}),n.vertexLabels.length&&f.each(n.labeledVertices,function(r,i){t.labelVertex({point1:n.coords[(i-1+e)%e],vertex:n.coords[i],point3:n.coords[(i+1)%e],label:r,text:n.vertexLabels[i],clockwise:s,style:n.labelStyle})}),n.temp=f.flatten(n.temp)},n.transform=function(){n.update(),n.visibleShape.attr({path:n.path}),n.fixed||n.mouseTarget.attr({path:n.path})},n.remove=function(){n.visibleShape.remove(),n.fixed||n.mouseTarget.remove(),n.labeledAngles&&f.invoke(n.labeledAngles,"remove"),n.labeledSides&&f.invoke(n.labeledSides,"remove"),n.labeledVertices&&f.invoke(n.labeledVertices,"remove"),n.temp.length&&f.invoke(n.temp,"remove")},n.toBack=function(){n.fixed||n.mouseTarget.toBack(),n.visibleShape.toBack()},n.toFront=function(){n.fixed||n.mouseTarget.toFront(),n.visibleShape.toFront()},n.updateOnPointMove&&f.each(f.filter(n.points,o),function(e){e.polygonVertices.push(n)}),n.coords=new Array(n.points.length),n.angleLabels.length){var s=Math.max(n.angleLabels.length,n.showRightAngleMarkers.length);n.labeledAngles=f.times(s,function(){return this.label([0,0],"","center",n.labelStyle)},this)}return n.sideLabels.length&&(n.labeledSides=f.map(n.sideLabels,function(e){return this.label([0,0],"","center",n.labelStyle)},this)),n.vertexLabels.length&&(n.labeledVertices=f.map(n.vertexLabels,function(e){return this.label([0,0],"","center",n.labelStyle)},this)),n.update(),n.visibleShape=t.raphael.path(n.path),n.visibleShape.attr(n.normalStyle),n.fixed||(n.mouseTarget=t.mouselayer.path(n.path),n.mouseTarget.attr({fill:"#000",opacity:0,cursor:"move"}),$(n.mouseTarget[0]).bind("vmousedown vmouseover vmouseout",function(e){if("vmouseover"===e.type)S&&!n.dragging||(n.highlight=!0,n.visibleShape.animate(n.highlightStyle,50),f.each(f.filter(n.points,o),function(e){e.visibleShape.animate(n.pointHighlightStyle,50)}));else if("vmouseout"===e.type){if(n.highlight=!1,!n.dragging){n.visibleShape.animate(n.normalStyle,50);var r=f.filter(n.points,o);f.any(f.pluck(r,"dragging"))||f.each(r,function(e){e.visibleShape.animate(e.normalStyle,50)})}}else"vmousedown"!==e.type||1!==e.which&&0!==e.which||!function(){e.preventDefault(),f.each(f.filter(n.points,o),function(e){e.dragging=!0});var r=(e.pageX-$(t.raphael.canvas.parentNode).offset().left)/t.scale[0]+t.range[0][0],i=t.range[1][1]-(e.pageY-$(t.raphael.canvas.parentNode).offset().top)/t.scale[1];n.snapX>0&&(r=Math.round(r/n.snapX)*n.snapX),n.snapY>0&&(i=Math.round(i/n.snapY)*n.snapY);var s=r,a=i,l=n.coords.slice(),p=(r-n.left)*t.scale[0],c=(n.right-r)*t.scale[0],u=(n.top-i)*t.scale[1],h=(i-n.bottom)*t.scale[1];$(document).bind("vmousemove.polygon vmouseup.polygon",function(e){e.preventDefault(),n.dragging=!0,S=!0;var d=e.pageX-$(t.raphael.canvas.parentNode).offset().left,m=e.pageY-$(t.raphael.canvas.parentNode).offset().top;n.constrainToGraph&&(d=Math.max(p+10,Math.min(t.xpixels-10-c,d)),m=Math.max(u+10,Math.min(t.ypixels-10-h,m)));var g=d/t.scale[0]+t.range[0][0],v=t.range[1][1]-m/t.scale[1];if(n.snapX>0&&(g=Math.round(g/n.snapX)*n.snapX),n.snapY>0&&(v=Math.round(v/n.snapY)*n.snapY),"vmousemove"===e.type)!function(){var e=g-r,t=v-i,p=!0;if(f.isFunction(n.onMove)){var c=n.onMove(e,t);c===!1?p=!1:f.isArray(c)&&(e=c[0],t=c[1],g=r+e,v=i+t)}var u=function(n){return[l[n][0]+e,l[n][1]+t]};p&&(f.each(n.points,function(e,t){o(e)?e.setCoord(u(t)):n.points[t]=u(t)}),n.transform(),$(n).trigger("move"),s=g,a=v)}();else if("vmouseup"===e.type){$(document).unbind(".polygon");var y=f.filter(n.points,o);f.each(y,function(e){e.dragging=!1}),n.dragging=!1,S=!1,n.highlight||(n.visibleShape.animate(n.normalStyle,50),f.each(y,function(e){e.visibleShape.animate(e.normalStyle,50)})),f.isFunction(n.onMoveEnd)&&n.onMoveEnd(s-r,a-i)}})}()})),f.invoke(f.filter(n.points,o),"toFront"),n},constrainToBounds:function(e,t){var n=this.unscalePoint([t,this.ypixels-t]),r=this.unscalePoint([this.xpixels-t,t]),i=Math.max(n[0],Math.min(r[0],e[0])),o=Math.max(n[1],Math.min(r[1],e[1]));return[i,o]},constrainToBoundsOnAngle:function(e,t,n){var r=this.unscalePoint([t,this.ypixels-t]),i=this.unscalePoint([this.xpixels-t,t]),o=e.slice();return o[0]<r[0]?o=[r[0],o[1]+(r[0]-o[0])*Math.tan(n)]:o[0]>i[0]&&(o=[i[0],o[1]-(o[0]-i[0])*Math.tan(n)]),o[1]<r[1]?o=[o[0]+(r[1]-o[1])/Math.tan(n),r[1]]:o[1]>i[1]&&(o=[o[0]-(o[1]-i[1])/Math.tan(n),i[1]]),o},addMovableAngle:function(e){return new h(this,e)},addCircleGraph:function(e){var t=this,n=$.extend({center:[0,0],radius:2,snapX:.5,snapY:.5,snapRadius:.5,minRadius:1,centerConstraints:{},centerNormalStyle:{},centerHighlightStyle:{stroke:w.INTERACTING,fill:w.INTERACTING},circleNormalStyle:{stroke:w.INTERACTIVE,"fill-opacity":0},circleHighlightStyle:{stroke:w.INTERACTING,fill:w.INTERACTING,"fill-opacity":.05}},e),r=n.centerConstraints.fixed?w.DYNAMIC:w.INTERACTIVE,i=e?e.centerNormalStyle:null;return n.centerNormalStyle=f.extend({},{fill:r,stroke:r},i),n.centerPoint=t.addMovablePoint({graph:t,coord:n.center,normalStyle:n.centerNormalStyle,snapX:n.snapX,snapY:n.snapY,constraints:n.centerConstraints}),n.circ=t.circle(n.center,n.radius,n.circleNormalStyle),n.perim=t.mouselayer.circle(t.scalePoint(n.center)[0],t.scalePoint(n.center)[1],t.scaleVector(n.radius)[0]).attr({"stroke-width":20,opacity:.002}),n.centerConstraints.fixed||$(n.centerPoint.mouseTarget.getMouseTarget()).on("vmouseover vmouseout",function(e){n.centerPoint.highlight||n.centerPoint.dragging?n.circ.animate(n.circleHighlightStyle,50):n.circ.animate(n.circleNormalStyle,50)}),n.toFront=function(){n.circ.toFront(),n.perim.toFront(),n.centerPoint.visibleShape.toFront(),n.centerConstraints.fixed||n.centerPoint.mouseTarget.toFront()},n.centerPoint.onMove=function(e,r){n.toFront(),n.circ.attr({cx:t.scalePoint(e)[0],cy:t.scalePoint(r)[1]}),n.perim.attr({cx:t.scalePoint(e)[0],cy:t.scalePoint(r)[1]}),n.onMove&&n.onMove(e,r)},$(n.centerPoint).on("move",function(){n.center=this.coord,$(n).trigger("move")}),n.setCenter=function(e,t){n.centerPoint.setCoord([e,t]),n.centerPoint.onMove(e,t),n.center=[e,t]},n.setRadius=function(e){n.radius=e,n.perim.attr({r:t.scaleVector(e)[0]}),n.circ.attr({rx:t.scaleVector(e)[0],ry:t.scaleVector(e)[1]})},n.remove=function(){n.centerPoint.remove(),n.circ.remove(),n.perim.remove()},$(n.perim[0]).css("cursor","move"),$(n.perim[0]).on("vmouseover vmouseout vmousedown",function(e){"vmouseover"===e.type?(n.highlight=!0,S||(n.circ.animate(n.circleHighlightStyle,50),n.centerPoint.visibleShape.animate(n.centerHighlightStyle,50))):"vmouseout"===e.type?(n.highlight=!1,
n.dragging||n.centerPoint.dragging||(n.circ.animate(n.circleNormalStyle,50),n.centerPoint.visibleShape.animate(n.centerNormalStyle,50))):"vmousedown"!==e.type||1!==e.which&&0!==e.which||!function(){e.preventDefault(),n.toFront();var r=n.radius;$(document).on("vmousemove vmouseup",function(e){if(e.preventDefault(),n.dragging=!0,S=!0,"vmousemove"===e.type){var i=t.constrainToBounds(t.getMouseCoord(e),10),o=m.getDistance(n.centerPoint.coord,i);o=Math.max(n.minRadius,Math.round(o/n.snapRadius)*n.snapRadius);var s=n.radius,a=!0;if(n.onResize){var l=n.onResize(o,s);f.isNumber(l)?o=l:l===!1&&(a=!1)}a&&(n.setRadius(o),$(n).trigger("move"))}else"vmouseup"===e.type&&($(document).off("vmousemove vmouseup"),n.dragging=!1,S=!1,n.onResizeEnd&&n.onResizeEnd(n.radius,r))})}()}),n},addRotateHandle:function(){var e=function(e,t,n,r,i,o,s){var a=function(r,i){var s=n+i,a=g.cartFromPolarDeg([s,o+r]),l=g.add(t,a),p=e.scalePoint(l);return p[0]+","+p[1]},l=e.scaleVector(n-r),p=e.scaleVector(n+r);return e.raphael.path(" M"+a(i,-r)+" L"+a(i,-3*r)+" L"+a(2*i,0)+" L"+a(i,3*r)+" L"+a(i,r)+" A"+p[0]+","+p[1]+",0,0,1,"+a(-i,r)+" L"+a(-i,3*r)+" L"+a(-2*i,0)+" L"+a(-i,-3*r)+" L"+a(-i,-r)+" A"+l[0]+","+l[1]+",0,0,0,"+a(i,-r)+" Z").attr({stroke:null,fill:s?w.INTERACTING:w.INTERACTIVE})};return function(t){var n=this,r=t.center,i=t.radius,o=t.lengthAngle||30,s=t.hideArrow||!1,a=t.mouseTarget,l=f.uniqueId("rotateHandle");f.isArray(r)&&(r={coord:r});var p=n.addMovablePoint({coord:v.addVector(r.coord,g.cartFromPolarDeg(i,t.angleDeg||0)),constraints:{fixedDistance:{dist:i,point:r}},mouseTarget:a});r.toFront();var c=r.coord,u=p.coord,h=u,d=!1,m=!1,y=void 0,b=function(i){if(!s){var a=g.subtract(i,r.coord),l=g.polarDegFromCart(a),p=l[1];y&&y.remove(),y=e(n,r.coord,t.radius,d||m?t.hoverWidth/2:t.width/2,o,p,d||m)}};$(r).on("move."+l,function(){var e=g.subtract(r.coord,c);p.setCoord(g.add(p.coord,e)),b(p.coord),c=r.coord,p.constraints.fixedDistance.point=r,u=p.coord}),p.onMove=function(e,n){d||(h=u,d=!0);var i=[e,n];if(t.onMove){var o=g.polarDegFromCart(g.subtract(u,r.coord)),s=g.polarDegFromCart(g.subtract(i,r.coord)),a=o[1],l=s[1],p=t.onMove(l,a);null!=p&&p!==!0&&(p===!1&&(p=a),i=g.add(r.coord,g.cartFromPolarDeg([o[0],p])))}return b(i),u=i,i},p.onMoveEnd=function(){if(d=!1,b(p.coord),t.onMoveEnd){var e=g.polarDegFromCart(g.subtract(h,r.coord)),n=g.polarDegFromCart(g.subtract(p.coord,r.coord));t.onMoveEnd(n[1],e[1])}},p.visibleShape.remove(),a||p.mouseTarget.attr({scale:2});var E=$(p.mouseTarget.getMouseTarget());E.bind("vmouseover",function(e){m=!0,b(p.coord)}),E.bind("vmouseout",function(e){m=!1,b(p.coord)}),b(p.coord);var T=p.remove;return p.remove=function(){T.call(p),y&&y.remove(),$(r).off("move."+l)},p.update=function(){b(p.coord)},p}}(),addReflectButton:function(){var e=function(e,t,n,r,i,o,s){v.equal(n[0],n[1])&&(n=[n[0],v.addVector(n[0],[1,1])]);var a=g.normalize(g.subtract(n[1],n[0])),l=g.scale(a,r/2),p=g.scale(a,i),c=g.rotateDeg(p,90),u=g.rotateDeg(p,-90),h=g.negate(l),d=g.rotateDeg(l,90),f=g.rotateDeg(l,-90),m=v.addVectors(t,c),y=v.addVectors(t,u),b=v.addVectors(t,c,l,d),E=v.addVectors(t,c,h,d),T=v.addVectors(t,u,l,f),x=v.addVectors(t,u,h,f),w=e.path([m,b,E,!0],o),C=e.path([y,T,x,!0],s);return{remove:function(){w.remove(),C.remove()}}};return function(t){var n=this,r=t.line,i=n.addMovablePoint({constraints:t.constraints,coord:y.midpoint([r.pointA.coord,r.pointZ.coord]),snapX:n.snap[0],snapY:n.snap[1],onMove:function(e,t){return!1},onMoveEnd:function(e,n){t.onMoveEnd&&t.onMoveEnd.call(this,e,n)}}),o=!1,s=!1,a=void 0,l=function(){return o},p=f.map([0,1],function(e){var n=e?t.highlightStyle:t.normalStyle;return f.map([0,1],function(e){return f.defaults({"fill-opacity":e},n)})}),c=function(e){return s&&(e=!e),p[+l()][+e]},u=function(r,i){a&&a.remove(),a=e(n,r,i,l()?1.5*t.size:t.size,l()?.125*t.size:.25,c(0),c(1))},h=function(e,t){e=e||r.pointA.coord,t=t||r.pointZ.coord;var n=y.midpoint([e,t]);i.setCoord(n),u(n,[e,t])};$(r).on("move",f.bind(h,i,null,null));var d=$(i.mouseTarget.getMouseTarget());d.on("vclick",function(){var e=t.onClick();e!==!1&&(s=!s,u(i.coord,[r.pointA.coord,r.pointZ.coord]))}),r.pointA.toFront(),r.pointZ.toFront(),i.visibleShape.remove();var m=n.scaleVector(t.size)[0]/20;i.mouseTarget.attr({scale:1.5*m}),d.css("cursor","pointer"),d.bind("vmouseover",function(e){o=!0,u(i.coord,[r.pointA.coord,r.pointZ.coord])}),d.bind("vmouseout",function(e){o=!1,u(i.coord,[r.pointA.coord,r.pointZ.coord])});var g=i.remove;return i.remove=function(){a.remove(),g.call(i)},i.update=h,i.isFlipped=function(){return s},h(),i}}(),protractor:function(e){return new c(this,e)},ruler:function(e){return new u(this,e||{})},addPoints:o}),f.extend(h.prototype,{points:[],snapDegrees:0,snapOffsetDeg:0,angleLabel:"",numArcs:1,pushOut:0,fixed:!1,addMoveHandlers:function(){function e(e,n){var r=30,i=m.getDistance(t.scalePoint(e),t.scalePoint(n));return i<r}var t=this.graphie,n=this.points;n[1].onMove=function(r,i){var a=n[1].coord,l=[r,i],p=o(l,s(a)),c=!0,u={};return f.each([0,2],function(r){var i=n[r].coord,s=o(i,p),a=m.findAngle(l,s);a*=Math.PI/180,s=t.constrainToBoundsOnAngle(s,10,a),u[r]=s,e(l,s)&&(c=!1)}),c&&f.each(u,function(e,t){n[t].setCoord(e)}),c};var r=this.snapDegrees,i=this.snapOffsetDeg;f.each([0,2],function(s){n[s].onMove=function(s,a){var l=[s,a],p=n[1].coord;if(e(p,l))return!1;if(r){var c=m.findAngle(l,p);c=Math.round((c-i)/r)*r+i;var u=m.getDistance(l,p);return o(p,t.polar(u,c))}return!0}}),$(n).on("move",function(){this.update(),$(this).trigger("move")}.bind(this))},addHighlightHandlers:function(){var e=this.points[1];e.onHighlight=function(){f.each(this.points,function(e){e.visibleShape.animate(this.highlightStyle,50)},this),f.each(this.rays,function(e){e.visibleLine.animate(this.highlightStyle,50),e.arrowStyle=f.extend({},e.arrowStyle,{color:this.highlightStyle.stroke,stroke:this.highlightStyle.stroke})},this),this.angleStyle=f.extend({},this.angleStyle,{color:this.highlightStyle.stroke,stroke:this.highlightStyle.stroke}),this.update()}.bind(this),e.onUnhighlight=function(){f.each(this.points,function(e){e.visibleShape.animate(this.normalStyle,50)},this),f.each(this.rays,function(e){e.visibleLine.animate(e.normalStyle,50),e.arrowStyle=f.extend({},e.arrowStyle,{color:e.normalStyle.stroke,stroke:e.normalStyle.stroke})},this),this.angleStyle=f.extend({},this.angleStyle,{color:w.DYNAMIC,stroke:w.DYNAMIC}),this.update()}.bind(this)},_getClockwiseAngle:function(e){var t=(m.findAngle(e[2],e[0],e[1])+360)%360;return t},isReflex:function(){return this.reflex},isClockwise:function(){var e=this._getClockwiseAngle(this.coords)>180;return e===this.reflex},getClockwiseCoords:function(){return this.isClockwise()?f.clone(this.coords):f.clone(this.coords).reverse()},update:function(e){var t=this.coords;this.coords=f.pluck(this.points,"coord"),f.invoke(this.points,"updateLineEnds");var n=this._getClockwiseAngle(t),r=this._getClockwiseAngle(this.coords),i=n>180,o=r>180;this.allowReflex&&(null==e&&(e=i!==o&&Math.abs(r-n)<180),e&&(this.reflex=!this.reflex)),f.invoke(this.temp,"remove"),this.temp=this.graphie.labelAngle({point1:this.coords[0],vertex:this.coords[1],point3:this.coords[2],label:this.labeledAngle,text:this.angleLabel,numArcs:this.numArcs,pushOut:this.pushOut,clockwise:this.reflex===o,style:this.angleStyle})},remove:function(){f.invoke(this.rays,"remove"),f.invoke(this.temp,"remove"),this.labeledAngle.remove()}}),e.exports=k},function(e,t,n){var r=function(e){return e===Object(e)},i=function(){for(var e={},t=0;t<arguments.length;t++){var n=arguments[t];if(n)for(var r in n)e[r]=n[r]}return e},o=function(e){return r(e)?Array.isArray(e)?e.slice():i(e):e};e.exports={isObject:r,merge:i,clone:o}},function(e,t,n){var r=function(e,t){return e[t]},i=function(e,t,n){var r=e.splice();return r[t]=n,r},o=function(e,t,n){var r=e.slice();return r[t]=n(e[t]),r},s=function(e,t){var n=e.slice();return n.splice(t,1),n};e.exports={get:r,set:i,mod:o,del:s}},function(e,t,n){var r=n(225).clone,i=function(e,t){return e[t]},o=function(e,t,n){var i=r(e);return i[t]=n,i},s=function(e,t,n){var i=r(e);return i[t]=n(e[t]),i},a=function(e,t){var n=r(e);return delete n[t],n};e.exports={get:i,set:o,mod:s,del:a}},function(e,t,n){var r=function(e,t){return e[t]},i=function(e,t,n){var r=e.splice();return r[t]=n,r},o=function(e,t,n){var r=e.splice();return r[t]=n(e[t]),r},s=function(e,t){var n=e.slice();return n.splice(t),n};e.exports={get:r,set:i,mod:o,del:s}},function(e,t,n){"use strict";var r=n(57),i=n(189),o=i.normalizeOptions,s=i.assert,a=n(221).point,l=["add","modify","draw","remove","onMoveStart","onMove","onMoveEnd","onClick"],p={cursor:null},c={added:!1,isHovering:!1,isMouseOver:!1,isDragging:!1,mouseTarget:null},u=function(e,t){r.extend(this,{graphie:e,state:{id:r.uniqueId("movable")}}),this.modify(r.extend({},c,t))};i.createGettersFor(u,r.extend({},p,c)),i.addMovableHelperMethodsTo(u),r.extend(u.prototype,{cloneState:function(){return r.clone(this.state)},_createDefaultState:function(){return r.extend({id:this.state.id,add:[],modify:[],draw:[],remove:[],onMoveStart:[],onMove:[],onMoveEnd:[],onClick:[]},p)},modify:function(e){this.update(r.extend({},this._createDefaultState(),e))},grab:function(e){s(a.is(e));var t=this,n=t.graphie,r=t.state;r.isHovering=!0,r.isDragging=!0,n.isDragging=!0;var i=e,o=i;t._fireEvent(r.onMoveStart,i,i);var l=function(e){e.preventDefault();var i=n.getMouseCoord(e);t._fireEvent(r.onMove,i,o),t.draw(),o=i},p=function e(s){$(document).unbind("vmousemove",l),$(document).unbind("vmouseup",e),r.isHovering&&t._fireEvent(r.onClick,o,i),r.isHovering=t.state.isMouseOver,r.isDragging=!1,n.isDragging=!1,t._fireEvent(r.onMoveEnd,o,i),t.draw()};$(document).bind("vmousemove",l),$(document).bind("vmouseup",p)},update:function(e){var t=this,n=t.graphie,i=t.cloneState(),s=r.extend(t.state,o(l,e));if(s.mouseTarget&&!i.mouseTarget){var a;a=s.mouseTarget.getMouseTarget?$(s.mouseTarget.getMouseTarget()):$(s.mouseTarget[0]);var p=!("ontouchstart"in window);p&&(a.on("vmouseover",function(){s.isMouseOver=!0,n.isDragging||(s.isHovering=!0),t.state.added&&t.draw()}),a.on("vmouseout",function(){s.isMouseOver=!1,s.isDragging||(s.isHovering=!1),t.state.added&&t.draw()})),a.on("vmousedown",function(e){if(0===e.which||1===e.which){e.preventDefault();var r=n.getMouseCoord(e);t.grab(r)}})}if(s.mouseTarget&&void 0!==s.cursor){var a;a=s.mouseTarget.getMouseTarget?$(s.mouseTarget.getMouseTarget()):$(s.mouseTarget[0]),a.css("cursor",s.cursor||"")}s.added||(t._fireEvent(s.modify,t.cloneState(),{}),s.added=!0,t.prevState=t.cloneState()),t._fireEvent(s.modify,t.cloneState(),t.prevState)},remove:function(){this.state.added=!1,this._fireEvent(this.state.remove),this.state.mouseTarget&&($(this.state.mouseTarget).off(),this.state.mouseTarget.remove(),this.state.mouseTarget=null)},toBack:function(){this.state.mouseTarget&&this.state.mouseTarget.toBack()},toFront:function(){this.state.mouseTarget&&this.state.mouseTarget.toFront()}}),e.exports=u},function(e,t,n){"use strict";var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},i=n(57),o=n(257),s=n(255),a=n(189),l=n(67),p=a.assert,c=a.normalizeOptions,u=n(221).point,h=n(221).vector,d=n(197),f=n(253).processMath,m=n(41),g=m.iconTrash,v=n(34),y=n(35),b=n(42),E=i.keys(o),T={coord:[0,0],pointSize:4,static:!1,cursor:"move",normalStyle:null,highlightStyle:null,shadow:!1,tooltip:!1},x={added:!1,hasMoved:!1,visibleShape:null,outOfBounds:!1,mouseTarget:null,touchOffset:null},w=[],C=function(e,t,n){i.extend(this,{graphie:e,movable:t,state:{id:i.uniqueId("movablePoint")}}),this.modify(i.extend({},x,n))};i.extend(C,o),a.createGettersFor(C,i.extend({},T,x)),a.addMovableHelperMethodsTo(C),i.extend(C.prototype,{cloneState:function(){return i.extend(this.movable.cloneState(),this.state)},_createDefaultState:function(){return i.extend({id:this.state.id},c(E,l.pluck(o,"standard")),T)},modify:function(e){this.update(i.extend(this._createDefaultState(),e))},_showTooltip:function(e){var t=this;this._tooltip||(this._tooltip=document.createElement("div"),this._tooltip.className="tooltip-content",this.state.visibleShape.wrapper.className="tooltip",this.state.visibleShape.wrapper.appendChild(this._tooltip),w.push(function(){t.state.added&&t._hideTooltip()})),this._tooltip.firstChild&&this._tooltip.removeChild(this._tooltip.firstChild),this.state.visibleShape.wrapper.className="tooltip visible",this._tooltip.appendChild(document.createElement("span")),"string"==typeof e?f(this._tooltip.firstChild,e,!1):"function"==typeof e?e(this._tooltip.firstChild):this._tooltip.firstChild.appendChild(e)},_hideTooltip:function(){this._tooltip&&(this.state.visibleShape.wrapper.className="tooltip")},update:function(e){var t=this,n=this,o=n.graphie,a=i.extend(n.state,c(E,e));p(u.is(a.coord));var l=a.static?d.DYNAMIC:d.INTERACTIVE;if(a.normalStyle=i.extend({fill:l,stroke:l,scale:1},a.normalStyle),a.highlightStyle=i.extend({fill:d.INTERACTING,stroke:d.INTERACTING,scale:2},a.highlightStyle),!a.static&&!a.mouseTarget){var f=n.state.coord,m=o.unscaleVector(24),e={mouselayer:!0,padding:0};a.mouseTarget=new s(o,f,m,e),a.mouseTarget.attr({fill:"#000",opacity:0})}var T=function(){t._showTooltip(function(e){y.render(v.createElement("span",{style:{fontSize:"2em"}},v.createElement(b,r({},g,{style:{position:"static",color:d.INTERACTIVE,marginLeft:9,marginRight:9}}))),e)})},x=a.coord;n.movable.modify(i.extend({},a,{add:null,modify:null,draw:n.draw.bind(n),remove:null,onMoveStart:function(e){if(a.hasMoved=!1,x=a.coord,null==a.touchOffset){var r=!("ontouchstart"in window);a.touchOffset=r?[0,0]:h.subtract(x,e)}var i=a.visibleShape.wrapper;if(a.shadow){var o="none";i.style.webkitFilter=o,i.style.filter=o}if(a.showHairlines&&a.showHairlines(a.coord),w.forEach(function(e){return e()}),a.tooltip&&(a.xOnlyTooltip?t._showTooltip(""+a.coord[0]):t._showTooltip("("+a.coord[0]+", "+a.coord[1]+")"),a.shadow)){var s=i.getElementsByClassName("tooltip-content")[0],l="drop-shadow(0px 0px 5px rgba(0, 0, 0, 0.5))";s.style.webkitFilter=l,s.style.filter=l}n._fireEvent(a.onMoveStart,x,x),n.draw()},onMove:function(e,r){var i=h.add(e,a.touchOffset);n.moveTo(i),a.showHairlines&&(t.state.outOfBounds?a.hideHairlines():a.showHairlines(a.coord)),a.tooltip&&(t.state.outOfBounds||(a.xOnlyTooltip?t._showTooltip(""+a.coord[0]):t._showTooltip("("+a.coord[0]+", "+a.coord[1]+")"))),a.onRemove&&t.state.outOfBounds&&T()},onMoveEnd:function(){n.isHovering()&&!a.hasMoved&&n._fireEvent(a.onClick,a.coord,x);var e=a.visibleShape.wrapper;if(a.shadow){var r="drop-shadow(0px 0px 5px rgba(0, 0, 0, 0.5))";e.style.webkitFilter=r,e.style.filter=r}if(a.hideHairlines&&a.hideHairlines(),a.hasMoved)t._hideTooltip();else if(a.onRemove){T();var i=e.getElementsByClassName("tooltip-content")[0];i.style.webkitFilter="none",i.style.filter="none",t._tooltip.firstChild.addEventListener("touchstart",function(e){e.stopPropagation()},!0),t._tooltip.firstChild.addEventListener("touchend",function(e){a.onRemove(),e.stopPropagation()},!0)}else a.tooltip&&t._hideTooltip();a.outOfBounds&&a.onRemove(),n._fireEvent(a.onMoveEnd,a.coord,x),a.hasMoved=!1,a.touchOffset=null,n.draw()}})),a.added||(n.prevState={},n._fireEvent(a.add,n.cloneState(),n.prevState),a.added=!0,n.prevState=n.cloneState()),n._fireEvent(a.modify,n.cloneState(),n.prevState)},remove:function(){this.state.added=!1,this._fireEvent(this.state.remove),this.movable&&this.movable.remove(),this.state.mouseTarget=null},constrain:function(){var e=this._applyConstraints(this.coord(),this.coord());return u.is(e)&&this.setCoord(e),e!==!1},setCoord:function(e){p(u.is(e,2)),this.state.coord=i.clone(e),this.draw()},setCoordConstrained:function(e){p(u.is(e,2));var t=this._applyConstraints(e,this.coord());t!==!1&&(this.state.coord=i.clone(t),this.draw())},moveTo:function(e){var t=this,n=this.state;this.state.outOfBounds=!1;var r=this._applyConstraints(e,n.coord,n.onRemove?{onOutOfBounds:function(){t.state.outOfBounds=!0}}:{});if(r!==!1&&(u.is(r)&&(e=r),!u.equal(e,n.coord))){var i=n.coord;n.coord=e,n.hasMoved=!0,this._fireEvent(n.onMove,n.coord,i),this.draw()}},normalStyle:function(){return i.clone(this.state.normalStyle)},highlightStyle:function(){return i.clone(this.state.highlightStyle)},toBack:function(){this.movable.toBack(),this.state.visibleShape&&this.state.visibleShape.toBack()},toFront:function(){this.state.visibleShape&&this.state.visibleShape.toFront(),this.movable.toFront()},isHovering:function(){return this.movable.isHovering()},isDragging:function(){return this.movable.isDragging()},mouseTarget:function(){return this.movable.mouseTarget()},grab:function(e){this.state.touchOffset=[0,0],this.movable.grab(e),this.moveTo(e)}}),e.exports=C},function(e,t,n){"use strict";var r=n(57),i=n(258),o=n(196),s=n(189),a=n(67),l=s.assert,p=s.normalizeOptions,c=n(221).vector,u=n(197),h=["add","draw","remove","onMoveStart","constraints","onMove","onMoveEnd"],d={points:null,static:!1,cursor:"move",normalStyle:null,highlightStyle:null,extendLine:!1,extendRay:!1},f={visibleShape:null,mouseTarget:null},m=function(e,t,n){l(null!=e),l(null!=n),r.extend(this,{graphie:e,movable:t,state:{id:r.uniqueId("movableLine")}}),this.modify(r.extend({},f,n))};r.extend(m,i),s.createGettersFor(m,r.extend({},d,f)),s.addMovableHelperMethodsTo(m),r.extend(m.prototype,{cloneState:function(){return r.extend(this.movable.cloneState(),{coords:this.coords()},this.state)},_createDefaultState:function(){return r.extend({id:this.state.id},p(h,a.pluck(i,"standard")),d)},modify:function(e){this.update(r.extend(this._createDefaultState(),e))},update:function(e){var t=this,n=this.graphie,i=t.state=r.extend(t.state,p(h,e)),s=i.static?u.DYNAMIC:u.INTERACTIVE;if(i.normalStyle=r.extend({stroke:s,"stroke-width":2},i.normalStyle),i.highlightStyle=r.extend({stroke:u.INTERACTING,"stroke-width":3},i.highlightStyle),!i.static&&!i.mouseTarget){var e={thickness:30,mouselayer:!0};i.mouseTarget=new o(n,this.coord(0),this.coord(1),e),i.mouseTarget.attr({fill:"#000",opacity:0})}i.static&&i.mouseTarget&&(i.mouseTarget.remove(),i.mouseTarget=null),t.movable.modify(r.extend({},i,{mouseTarget:i.mouseTarget,add:null,modify:null,draw:t.draw.bind(t),remove:null,onMoveStart:function(){t._initialRefCoord=t.coord(0),t._prevRefCoord=t._initialRefCoord,t._totalDelta=[0,0],t._fireEvent(t.state.onMoveStart,t.coord(0),t.coord(0))},onMove:function(e,n){var r=c.subtract(e,n);t._totalDelta=c.add(t._totalDelta,r);var i=c.add(t._initialRefCoord,t._totalDelta);i=t._applyConstraints(i,t._prevRefCoord),i!==!1&&(t._fireEvent(t.state.onMove,i,t._prevRefCoord),t._prevRefCoord=i)},onMoveEnd:function(){t._fireEvent(t.state.onMoveEnd,t._prevRefCoord,t._initialRefCoord)}})),i.added||(t.prevState={},t._fireEvent(i.add,t.cloneState(),t.prevState),i.added=!0,r.invoke(i.points,"listen","onMove",i.id,t.draw.bind(t)),t.prevState=t.cloneState()),t._fireEvent(i.modify,t.cloneState(),t.prevState)},coords:function(){return r.invoke(this.state.points,"coord")},point:function(e){return this.state.points[e]},coord:function(e){return this.point(e).coord()},remove:function(){this.state.added=!1,this._fireEvent(this.state.remove),this.points&&r.invoke(this.points,"unlisten","onMove",this.state.id),this.movable&&this.movable.remove()},toBack:function(){this.movable.toBack(),this.state.visibleShape&&this.state.visibleShape.toBack()},toFront:function(){this.state.visibleShape&&this.state.visibleShape.toFront(),this.movable.toFront()},isHovering:function(){return this.movable.isHovering()},isDragging:function(){return this.movable.isDragging()},mouseTarget:function(){return this.movable.mouseTarget()}}),e.exports=m},function(e,t,n){"use strict";var r=n(221).vector,i=n(57),o=n(259),s=n(189),a=n(67),l=s.assert,p=s.normalizeOptions,c=n(197),u=n(190),h=i.keys(o),d={points:null,angleLabels:[],showRightAngleMarkers:[],sideLabels:[],vertexLabels:[],numArcs:[],numArrows:[],numTicks:[],closed:!0,static:!1,cursor:"move",normalStyle:null,highlightStyle:null,labelStyle:null},f={added:!1,hasMoved:!1,visibleShape:null,mouseTarget:null},m=function(e,t,n){l(null!=e),l(null!=n),i.extend(this,{graphie:e,movable:t,state:{id:i.uniqueId("movablePolygon")}}),this.modify(i.extend({},f,n))};i.extend(m,o),s.createGettersFor(m,i.extend({},d,f)),s.addMovableHelperMethodsTo(m),i.extend(m.prototype,{cloneState:function(){return i.extend(this.movable.cloneState(),this.state)},_createDefaultState:function(){return i.extend({id:this.state.id},p(h,a.pluck(o,"standard")),d)},modify:function(e){this.update(i.extend(this._createDefaultState(),e))},update:function(e){var t=this,n=t.graphie,o=i.extend(t.state,p(h,e)),s=o.static?c.DYNAMIC:c.INTERACTIVE;o.normalStyle=i.extend({},o.normalStyle,{"stroke-width":2,"fill-opacity":0,fill:s,stroke:s},e.normalStyle),o.highlightStyle=i.extend({},{stroke:c.INTERACTING,"stroke-width":2,fill:c.INTERACTING,"fill-opacity":.05},o.highlightStyle),o.labelStyle=i.extend({},{stroke:c.DYNAMIC,"stroke-width":1,color:c.DYNAMIC},o.labelStyle),o.static||o.mouseTarget||(o.mouseTarget=n.mouselayer.path(this.path()),o.mouseTarget.attr({fill:"#000",opacity:0,cursor:"move"})),t.movable.modify(i.extend({},o,{modify:null,draw:t.draw.bind(t),remove:null,onMoveStart:function(){t._initialRefCoord=t.coord(0),t._prevRefCoord=t._initialRefCoord,t._totalDelta=[0,0],t._fireEvent(t.state.onMoveStart,t.coord(0),t.coord(0))},onMove:function(e,n){var i=r.subtract(e,n);t._totalDelta=r.add(t._totalDelta,i);var o=r.add(t._initialRefCoord,t._totalDelta);o=t._applyConstraints(o,t._prevRefCoord),o!==!1&&(t._fireEvent(t.state.onMove,o,t._prevRefCoord),t._prevRefCoord=o)},onMoveEnd:function(){t._fireEvent(t.state.onMoveEnd,t._prevRefCoord,t._initialRefCoord)}})),i.invoke(o.points,"listen","onMove",o.id,t.draw.bind(t)),o.added||(t.prevState={},t._fireEvent(o.add,t.cloneState(),t.prevState),o.added=!0,t.prevState=t.cloneState()),t._fireEvent(o.modify,t.cloneState(),t.prevState)},path:function(e){var t=this.graphie;e=e||this.state;var n=i.map(e.points,function(e){return t.scalePoint(e.coord())});return e.closed?n.push(!0):n=n.concat(i.clone(n).reverse()),u.unscaledSvgPath(n)},coords:function(){return i.invoke(this.state.points,"coord")},point:function(e){return this.state.points[e]},coord:function(e){return this.point(e).coord()},remove:function(){this.state.added=!1,this._fireEvent(this.state.remove),this.state.points&&i.invoke(this.state.points,"unlisten","onMove",this.state.id),this.movable&&this.movable.remove(),this.state.mouseTarget=null},constrain:function(){if(null!=this.points&&0!==this.points.length){var e=this.coord(0),t=this._applyConstraints(e,e);t!==!1&&this._fireEvent(this.state.onMove,t,e)}},normalStyle:function(){return i.clone(this.state.normalStyle)},highlightStyle:function(){return i.clone(this.state.highlightStyle)},toBack:function(){this.movable.toBack(),this.state.visibleShape&&this.state.visibleShape.toBack()},toFront:function(){this.state.visibleShape&&this.state.visibleShape.toFront(),this.movable.toFront()},isHovering:function(){return this.movable.isHovering()},isDragging:function(){return this.movable.isDragging()},mouseTarget:function(){return this.movable.mouseTarget()}}),e.exports=m},function(e,t,n){"use strict";var r=n(57),i=n(189),o=n(67),s=n(221).vector,a=["attr","animate"],l=r.extend({transform:function(e){var t=i.getPrefixedTransform();this.wrapper.style[t]=e},toFront:function(){var e=this.wrapper.parentNode;e&&e.appendChild(this.wrapper)},toBack:function(){var e=this.wrapper.parentNode;e.firstChild!==this.wrapper&&e.insertBefore(this.wrapper,e.firstChild)},remove:function(){this.visibleShape.remove(),$(this.wrapper).remove()},getMouseTarget:function(){return this.visibleShape[0]},moveTo:function(e){var t=s.subtract(this.graphie.scalePoint(e),this.graphie.scalePoint(this.initialPoint)),n=i.getCanUse3dTransform(),r="translateX("+t[0]+"px) translateY("+t[1]+"px)"+(n?" translateZ(0)":"");this.transform(r)},hide:function(){this.visibleShape.hide()},show:function(){this.visibleShape.show()}},o.mapObjectFromArray(a,function(e){return function(){this.visibleShape[e].apply(this.visibleShape,arguments)}}));e.exports=l},function(e,t,n){"use strict";var r=n(34),i=n(57),o=r.createClass({displayName:"ToggleableRadioButton",propTypes:{checked:r.PropTypes.bool.isRequired,inputRef:r.PropTypes.func,onChecked:r.PropTypes.func.isRequired},handleClick:function(e){this.props.onChecked(!this.props.checked)},handleKeyUp:function(e){" "===e.key&&(this.props.onChecked(!this.props.checked),e.preventDefault())},handleChange:function(e){!this.props.checked&&e.target.checked&&this.props.onChecked(!0)},handleKeyDown:function(e){" "===e.key&&e.preventDefault()},render:function(){var e=i.extend({},this.props,{type:"radio",onChange:this.handleChange,onClick:this.handleClick,onKeyDown:this.handleKeyDown,onKeyUp:this.handleKeyUp,ref:this.props.inputRef});return r.createElement("input",e)}});e.exports=o},function(e,t,n){"use strict";e.exports={NONE:"NONE",IN_PARENS:"IN_PARENS",IN_SUPER_SCRIPT:"IN_SUPER_SCRIPT",IN_SUB_SCRIPT:"IN_SUB_SCRIPT",IN_NUMERATOR:"IN_NUMERATOR",IN_DENOMINATOR:"IN_DENOMINATOR",BEFORE_FRACTION:"BEFORE_FRACTION"}},function(e,t,n){"use strict";var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},i=n(34),o=n(240),s=o.cursorHandleRadiusPx,a=o.brightGreen,l=o.cursorHandleDistanceMultiplier,p=22,c=2*p,u=2*p,h=s,d=l*h+h,f=2*h,m=i.createClass({displayName:"CursorHandle",propTypes:{animateIntoPosition:i.PropTypes.bool,onTouchCancel:i.PropTypes.func.isRequired,onTouchEnd:i.PropTypes.func.isRequired,onTouchMove:i.PropTypes.func.isRequired,onTouchStart:i.PropTypes.func.isRequired,visible:i.PropTypes.bool.isRequired,x:i.PropTypes.number.isRequired,y:i.PropTypes.number.isRequired},getDefaultProps:function(){return{animateIntoPosition:!1,visible:!1,x:0,y:0}},render:function(){var e=this.props,t=e.x,n=e.y,o=e.animateIntoPosition,s=o?{msTransitionDuration:"100ms",WebkitTransitionDuration:"100ms",transitionDuration:"100ms",msTransitionProperty:"transform",WebkitTransitionProperty:"transform",transitionProperty:"transform"}:{},l="translate("+t+"px, "+n+"px)",m=r({position:"absolute",zIndex:4,left:-u/2,top:0,msTransform:l,WebkitTransform:l,transform:l,width:u,height:c},s),g={marginLeft:p-h};return i.createElement("span",{style:m,onTouchStart:this.props.onTouchStart,onTouchMove:this.props.onTouchMove,onTouchEnd:this.props.onTouchEnd,onTouchCancel:this.props.onTouchCancel},i.createElement("svg",{width:f,height:d,viewBox:"-"+h+" 0 "+f+" "+d,style:g},i.createElement("path",{d:"M 0 0\n                        L -"+.707*h+" "+.707*h+"\n                        A "+h+" "+h+", 0, 1, 0,\n                          "+.707*h+" "+.707*h+"\n                        Z",fill:a})))}});e.exports=m},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var i,o,s,a=n(282),l=window.MathQuill,p=n(260),c=n(235),u=n(205),h=u.DecimalSeparators,d=n(261),f=d.decimalSeparator,m=f===h.COMMA?",":".",g="write",v="cmd",y="keystroke",b=0,E=(i={},i[p.PLUS]={str:"+",fn:g},i[p.MINUS]={str:"-",fn:g},i[p.NEGATIVE]={str:"-",fn:g},i[p.TIMES]={str:"\\times",fn:g},i[p.DIVIDE]={str:"\\div",fn:g},i[p.DECIMAL]={str:m,fn:g},i[p.EQUAL]={str:"=",fn:g},i[p.NEQ]={str:"\\neq",fn:g},i[p.CDOT]={str:"\\cdot",fn:g},i[p.PERCENT]={str:"%",fn:g},i[p.LEFT_PAREN]={str:"(",fn:v},i[p.RIGHT_PAREN]={str:")",fn:v},i[p.SQRT]={str:"sqrt",fn:v},i[p.PI]={str:"pi",fn:v},i[p.THETA]={str:"theta",fn:v},i[p.RADICAL]={str:"nthroot",fn:v},i[p.LT]={str:"<",fn:g},i[p.LEQ]={str:"\\leq",fn:g},i[p.GT]={str:">",fn:g},i[p.GEQ]={str:"\\geq",fn:g},i[p.UP]={str:"Up",fn:y},i[p.DOWN]={str:"Down",fn:y},i[p.FRAC_INCLUSIVE]={str:"/",fn:v},i),T=(o={},o[p.LOG]="log",o[p.LN]="ln",o[p.SIN]="sin",o[p.COS]="cos",o[p.TAN]="tan",o),x=["+","-","\\cdot","\\times","\\div"],w=["=","\\neq","<","\\leq",">","\\geq"],C=["0","1","2","3","4","5","6","7","8","9"],P=["\\theta","\\pi"],S=["A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"],k=[].concat(C,P,S.map(function(e){return e.toLowerCase()}),S.map(function(e){return e.toUpperCase()})),N=(s={},s[c.IN_PARENS]=p.JUMP_OUT_PARENTHESES,s[c.IN_SUPER_SCRIPT]=p.JUMP_OUT_EXPONENT,s[c.IN_SUB_SCRIPT]=p.JUMP_OUT_BASE,s[c.BEFORE_FRACTION]=p.JUMP_INTO_NUMERATOR,s[c.IN_NUMERATOR]=p.JUMP_OUT_NUMERATOR,s[c.IN_DENOMINATOR]=p.JUMP_OUT_DENOMINATOR,s),M=function(){function e(t){var n=(arguments.length<=1||void 0===arguments[1]?{}:arguments[1],arguments.length<=2||void 0===arguments[2]?{}:arguments[2]);r(this,e),this.MQ=l.getInterface(2),this.mathField=this.MQ.MathField(t,{substituteTextarea:function(){return document.createElement("span")}}),this.callbacks=n}return e.prototype.focus=function(){var e=this.mathField.__controller;e.cursor.show(),e.blurred=!1},e.prototype.blur=function(){var e=this.mathField.__controller;e.cursor.hide(),e.blurred=!0},e.prototype._writeNormalFunction=function(e){this.mathField.write("\\"+e+"\\left(\\right)"),this.mathField.keystroke("Left")},e.prototype.pressKey=function(e){var t=this.mathField.__controller.cursor;if(e in E){var n=E[e],r=n.str,i=n.fn;r&&i&&this.mathField[i](r)}else if(Object.keys(T).includes(e))this._writeNormalFunction(T[e]);else if(e===p.FRAC_EXCLUSIVE){var o=t[this.MQ.L]===b;this.mathField.cmd("\\frac"),o&&this.mathField.keystroke("Left")}else e===p.LOG_N?(this.mathField.write("log_{ }\\left(\\right)"),this.mathField.keystroke("Left"),this.mathField.keystroke("Left"),this.mathField.keystroke("Left")):e===p.CUBE_ROOT?(this.mathField.write("\\sqrt[3]{}"),this.mathField.keystroke("Left")):e===p.EXP||e===p.EXP_2||e===p.EXP_3?this._handleExponent(t,e):e===p.TOGGLE_SIGN?this._handleToggleSign(t):e===p.JUMP_OUT_PARENTHESES||e===p.JUMP_OUT_EXPONENT||e===p.JUMP_OUT_BASE||e===p.JUMP_INTO_NUMERATOR||e===p.JUMP_OUT_NUMERATOR||e===p.JUMP_OUT_DENOMINATOR?this._handleJumpOut(t,e):e===p.BACKSPACE?this._handleBackspace(t):e===p.LEFT?this._handleLeftArrow(t):e===p.RIGHT||e===p.JUMP_OUT?this._handleRightArrow(t):/^[a-zA-Z]$/.test(e)?this.mathField[g](e):/^NUM_\d/.test(e)&&this.mathField[g](e[4]);return t.selection||t.show(),this.callbacks.onSelectionChanged&&this.callbacks.onSelectionChanged(t.selection),{context:this.contextForCursor(t)}},e.prototype.setCursorPosition=function(e,t,n){var r=n||document.elementFromPoint(e,t);if(r){var i=this.getCursor();if(r.hasAttribute("mq-root-block"))i.insAtRightEnd(this.mathField.__controller.root);else{var o=this.mathField.__controller,s=e-document.body.scrollLeft,l=t-document.body.scrollTop;o.seek(a(r),s,l).cursor.startSelection();var p=this._maybeFindCommand(i[this.MQ.L]);p&&p.endNode&&(i.insLeftOf(p.endNode),this.mathField.keystroke("Right"))}this.callbacks.onCursorMove&&this.callbacks.onCursorMove({context:this.contextForCursor(i)})}},e.prototype.getCursor=function(){return this.mathField.__controller.cursor},e.prototype.getSelection=function(){return this.getCursor().selection},e.prototype.getContent=function(){return this.mathField.latex()},e.prototype.setContent=function(e){this.mathField.latex(e)},e.prototype.isEmpty=function(){var e=this.getCursor();return 1===e.parent.id&&0===e[1]&&0===e[-1]},e.prototype._handleBackspaceInNthRoot=function(e){var t=e[this.MQ.L]===b,n=this._isInsideEmptyNode(e.parent.parent.blocks[0].ends);t?(this._selectNode(e.parent.parent,e),n&&this.mathField.keystroke("Backspace")):this.mathField.keystroke("Backspace")},e.prototype._handleJumpOut=function(e,t){var n=this.contextForCursor(e);if(N[n]===t)switch(n){case c.IN_PARENS:e.insRightOf(e.parent.parent);break;case c.BEFORE_FRACTION:for(var r=void 0,i=e;i[this.MQ.R]!==b;)this._isFraction(i[this.MQ.R])&&(r=i[this.MQ.R]),i=i[this.MQ.R];e.insLeftOf(r),this.mathField.keystroke("Right");break;case c.IN_NUMERATOR:for(var o=e.parent.parent.blocks[1];e.parent!==o;)this.mathField.keystroke("Right");break;case c.IN_DENOMINATOR:e.insRightOf(e.parent.parent);
break;case c.IN_SUB_SCRIPT:e.insRightOf(e.parent.parent),this._isParens(e[this.MQ.R])&&this.mathField.keystroke("Right");break;case c.IN_SUPER_SCRIPT:e.insRightOf(e.parent.parent);break;default:throw new Error("Attempted to 'Jump Out' from node, but found no appropriate cursor context: "+n)}},e.prototype._handleBackspace=function(e){if(e.selection)this.mathField.keystroke("Backspace");else{var t=e.parent,n=t.parent,r=e[this.MQ.L];this._isFraction(r)?this._selectNode(r,e):this._isSquareRoot(r)?this._selectNode(r,e):this._isNthRoot(r)?this._selectNode(r,e):this._isNthRootIndex(t)?this._handleBackspaceInRootIndex(e):"\\left("===r.ctrlSeq?this._handleBackspaceOutsideParens(e):"\\left("===n.ctrlSeq?this._handleBackspaceInsideParens(e):this._isInsideLogIndex(e)?this._handleBackspaceInLogIndex(e):"\\ge "===r.ctrlSeq||"\\le "===r.ctrlSeq?this._handleBackspaceAfterLigaturedSymbol(e):this._isNthRoot(n)&&r===b?this._handleBackspaceInNthRoot(e):this.mathField.keystroke("Backspace")}},e.prototype._handleLeftArrow=function(e){if(e[this.MQ.L]===b){var t=e.parent,n=t.parent;if("\\left("===n.ctrlSeq){var r=this._maybeFindCommandBeforeParens(n);if(r)return void e.insLeftOf(r.startNode)}}this.mathField.keystroke("Left")},e.prototype._handleRightArrow=function(e){var t=this._maybeFindCommand(e[this.MQ.R]);t?(e.insLeftOf(t.endNode),this.mathField.keystroke("Right")):this.mathField.keystroke("Right")},e.prototype._handleExponent=function(e,t){var n=[].concat(x,w),r=e[this.MQ.L],i=r===b||n.includes(r.ctrlSeq.trim());switch(i&&this.mathField.write("\\left(\\right)"),t){case p.EXP:this.mathField.cmd("^");break;case p.EXP_2:case p.EXP_3:this.mathField.write("^"+(t===p.EXP_2?2:3)),i&&(this.mathField.keystroke("Left"),this.mathField.keystroke("Left"),this.mathField.keystroke("Left"),this.mathField.keystroke("Left"));break;default:throw new Error("Invalid exponent key: "+t)}},e.prototype._maybeFindCommand=function(e){if(!e)return null;for(var t=/^[a-z]$/,n=/^\\[a-z]$/,r="\\left(",i=["\\log","\\ln","\\cos","\\sin","\\tan"],o="",s=void 0,a=void 0,l=e;0!==l;){var p=l.ctrlSeq.trim();if(!t.test(p)){if(n.test(p)){o=p+o,s=l;break}break}o=p+o,l=l[this.MQ.L]}if(s){for(l=e[this.MQ.R];0!==l;){var c=l.ctrlSeq.trim();if(t.test(c))o+=c;else if(c===r){a=l;break}l=l[this.MQ.R]}return i.includes(o)?{name:o,startNode:s,endNode:a}:null}return null},e.prototype._maybeFindCommandBeforeParens=function(e){return this._maybeFindCommand(e[this.MQ.L])},e.prototype._selectNode=function(e,t){t.insLeftOf(e),t.startSelection(),t.insRightOf(e),t.select(),t.endSelection()},e.prototype._isFraction=function(e){return e.jQ&&e.jQ.hasClass("mq-fraction")},e.prototype._isNumerator=function(e){return e.jQ&&e.jQ.hasClass("mq-numerator")},e.prototype._isDenominator=function(e){return e.jQ&&e.jQ.hasClass("mq-denominator")},e.prototype._isSubScript=function(e){return e.jQ&&(e.jQ.hasClass("mq-sub-only")||e.jQ.hasClass("mq-sub"))},e.prototype._isSuperScript=function(e){return e.jQ&&(e.jQ.hasClass("mq-sup-only")||e.jQ.hasClass("mq-sup"))},e.prototype._isParens=function(e){return e&&"\\left("===e.ctrlSeq},e.prototype._isLeaf=function(e){return e&&e.ctrlSeq&&k.includes(e.ctrlSeq.trim())},e.prototype._isSquareRoot=function(e){return e.blocks&&e.blocks[0].jQ&&e.blocks[0].jQ.hasClass("mq-sqrt-stem")},e.prototype._isNthRoot=function(e){return e.blocks&&e.blocks[0].jQ&&e.blocks[0].jQ.hasClass("mq-nthroot")},e.prototype._isNthRootIndex=function(e){return e.jQ&&e.jQ.hasClass("mq-nthroot")},e.prototype._isInsideLogIndex=function(e){var t=e.parent.parent;if(t&&t.jQ.hasClass("mq-supsub")){var n=this._maybeFindCommandBeforeParens(t);if(n&&"\\log"===n.name)return!0}return!1},e.prototype._isInsideEmptyNode=function(e){return e[this.MQ.L]===b&&e[this.MQ.R]===b},e.prototype._handleBackspaceInRootIndex=function(e){if(this._isInsideEmptyNode(e)){var t=e.parent.parent,n=t.latex(),r=t[this.MQ.L];this._selectNode(t,e);var i=""===t.blocks[1].jQ.text();i?this.mathField.keystroke("Backspace"):(this.mathField.keystroke("Backspace"),this.mathField.write(n.replace(/^\\sqrt\[\]/,"\\sqrt")),r===b?this.mathField.moveToDirEnd(this.MQ.L):e.insRightOf(r))}else e[this.MQ.L]!==b&&this.mathField.keystroke("Backspace")},e.prototype._handleBackspaceInLogIndex=function(e){if(this._isInsideEmptyNode(e)){var t=e.parent.parent,n=this._maybeFindCommandBeforeParens(t);e.insLeftOf(n.startNode),e.startSelection(),t[this.MQ.R]!==b?e.insRightOf(t[this.MQ.R]):e.insRightOf(t),e.select(),e.endSelection();var r=""===t[this.MQ.R].contentjQ.text();r&&this.mathField.keystroke("Backspace")}else this.mathField.keystroke("Backspace")},e.prototype._handleBackspaceOutsideParens=function(e){var t=e[this.MQ.L],n=e[this.MQ.R],r=this._maybeFindCommandBeforeParens(t);r&&r.startNode?(e.insLeftOf(r.startNode),e.startSelection(),n===b?e.insAtRightEnd(e.parent):e.insLeftOf(n),e.select(),e.endSelection()):(e.startSelection(),e.insLeftOf(t),e.select(),e.endSelection())},e.prototype._handleBackspaceInsideParens=function(e){if(e[this.MQ.L]!==b)return void this.mathField.keystroke("Backspace");var t=e.parent.parent;if(t[this.MQ.L].sub&&t[this.MQ.L].sub.jQ.text())return void e.insAtRightEnd(t[this.MQ.L].sub);var n=this._isInsideEmptyNode(e),r=this._maybeFindCommandBeforeParens(t);e.insLeftOf(r&&r.startNode||t),e.startSelection(),e.insRightOf(t),e.select(),e.endSelection(),n&&this.mathField.keystroke("Backspace")},e.prototype._handleToggleSign=function(e){var t=e[this.MQ.L],n=e.parent,r=this._isAtTopLevel(e),i=e.selection&&e.selection.ends[this.MQ.L],o=e.selection&&e.selection.ends[this.MQ.R],s=this.getContent(),a="-";s.charAt(0)===a?(this.mathField.moveToDirEnd(this.MQ.L),this.mathField.keystroke("Right"),this.mathField.keystroke("Backspace")):(this.mathField.moveToDirEnd(this.MQ.L),this.mathField.write(a)),i&&o&&(e.insLeftOf(i),e.startSelection(),e.insRightOf(o),e.select(),e.endSelection()),t!==b||r?t!==b&&t.latex()!==a&&e.insRightOf(t):e.insAtLeftEnd(n)},e.prototype._handleBackspaceAfterLigaturedSymbol=function(e){this.mathField.keystroke("Backspace"),this.mathField.keystroke("Backspace")},e.prototype.contextForCursor=function(e){for(var t=e;t[this.MQ.R]!==b;){if(this._isFraction(t[this.MQ.R]))return c.BEFORE_FRACTION;if(!this._isLeaf(t[this.MQ.R]))break;t=t[this.MQ.R]}return this._isParens(e.parent&&e.parent.parent)?c.IN_PARENS:this._isNumerator(e.parent)?c.IN_NUMERATOR:this._isDenominator(e.parent)?c.IN_DENOMINATOR:this._isSubScript(e.parent)?c.IN_SUB_SCRIPT:this._isSuperScript(e.parent)?c.IN_SUPER_SCRIPT:c.NONE},e.prototype._isAtTopLevel=function(e){return!e.parent.parent},e}();e.exports=M},function(e,t,n){"use strict";var r=n(240),i=r.toolbarHeightPx,o=function(e,t){var n=e.getBoundingClientRect(),r=n.bottom,o=n.top,s=16;if(t){var a=window.innerHeight,l=t.clientHeight,p=a-(l+i);if(r>p){var c=Math.min(r-p+s,o);return void(document.body.scrollTop+=c)}}o<s&&(document.body.scrollTop-=n.height+s)};e.exports=o},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var i=8,o=function(){function e(t,n){r(this,e),this._scrollListener=function(){t()};for(var o={},s=0;s<n.changedTouches.length;s++){var a=n.changedTouches[s];o[a.identifier]=[a.clientX,a.clientY]}this._moveListener=function(e){for(var n=0;n<e.changedTouches.length;n++){var r=e.changedTouches[n],s=o[r.identifier];if(s){var a=[r.clientX,r.clientY],l=a[0]-s[0],p=a[1]-s[1],c=l*l+p*p,u=i*i;c>u&&t()}}},this._endAndCancelListener=function(e){for(var t=0;t<e.changedTouches.length;t++)delete o[e.changedTouches[t].identifier]}}return e.prototype.attach=function(){window.addEventListener("scroll",this._scrollListener),window.addEventListener("touchmove",this._moveListener),window.addEventListener("touchend",this._endAndCancelListener),window.addEventListener("touchcancel",this._endAndCancelListener)},e.prototype.detach=function(){window.removeEventListener("scroll",this._scrollListener),window.removeEventListener("touchmove",this._moveListener),window.removeEventListener("touchend",this._endAndCancelListener),window.removeEventListener("touchcancel",this._endAndCancelListener)},e}();e.exports=o},function(e,t,n){"use strict";var r="#D6D8DA";e.exports={brightGreen:"#78C008",gray17:"#21242C",gray25:"#3B3E40",gray68:"#888D93",gray76:"#BABEC2",gray85:r,iconSizeHeightPx:48,iconSizeWidthPx:48,compactKeypadBorderRadiusPx:4,cursorHandleRadiusPx:11,cursorHandleDistanceMultiplier:1.41,valueGrey:"#FFF",operatorGrey:"#FAFAFA",controlGrey:"#F6F7F7",emptyGrey:"#F0F1F2",innerBorderColor:r,innerBorderStyle:"solid",innerBorderWidthPx:1,tabletCutoffPx:600,pageIndicatorHeightPx:16,navigationPadWidthPx:192,toolbarHeightPx:60}},function(e,t,n){"use strict";var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},i=n(34),o=n(275),s=o.connect,a=n(276),l=a.StyleSheet,p=n(243),c=p.View,u=n(262),h=n(263),d=n(264),f=n(265),m=n(244),g=m.setPageSize,v=n(218),y=v.keyIdPropType,b=n(205),E=b.KeypadTypes,T=b.LayoutModes,x=n(266),w=x.row,C=x.centered,P=x.fullWidth,S=n(240),k=S.innerBorderColor,N=S.innerBorderStyle,M=S.innerBorderWidthPx,_=S.compactKeypadBorderRadiusPx,O=i.createClass({displayName:"KeypadContainer",propTypes:{active:i.PropTypes.bool,extraKeys:i.PropTypes.arrayOf(y),keypadType:i.PropTypes.oneOf(Object.keys(E)).isRequired,layoutMode:i.PropTypes.oneOf(Object.keys(T)).isRequired,navigationPadEnabled:i.PropTypes.bool.isRequired,onDismiss:i.PropTypes.func,onElementMounted:i.PropTypes.func,onPageSizeChange:i.PropTypes.func.isRequired,style:i.PropTypes.any},getInitialState:function(){return{hasBeenActivated:!1,viewportWidth:"100vw"}},componentWillMount:function(){this.props.active&&this.setState({hasBeenActivated:this.props.active})},componentDidMount:function(){this._onResize(),window.addEventListener("resize",this._throttleResizeHandler),window.addEventListener("orientationchange",this._throttleResizeHandler)},componentWillReceiveProps:function(e){!this.state.hasBeenActivated&&e.active&&this.setState({hasBeenActivated:!0})},componentDidUpdate:function(e){e.active&&!this.props.active&&this.props.onDismiss&&this.props.onDismiss()},componentWillUnmount:function(){window.removeEventListener("resize",this._throttleResizeHandler),window.removeEventListener("orientationchange",this._throttleResizeHandler)},_throttleResizeHandler:function(){var e=this;null==this._resizeTimeout&&(this._resizeTimeout=setTimeout(function(){e._resizeTimeout=null,e._onResize()},66))},_onResize:function(){this.setState({viewportWidth:window.innerWidth}),this.props.onPageSizeChange(window.innerWidth,window.innerHeight)},renderKeypad:function(){var e=this.props,t=e.extraKeys,n=e.keypadType,r=e.layoutMode,o=e.navigationPadEnabled,s={extraKeys:t,roundTopLeft:r===T.COMPACT&&!o,roundTopRight:r===T.COMPACT};switch(n){case E.FRACTION:return i.createElement(u,s);case E.EXPRESSION:return i.createElement(h,s);default:throw new Error("Invalid keypad type: "+n)}},render:function(){var e=this,t=this.props,n=t.active,o=t.layoutMode,s=t.navigationPadEnabled,a=t.onElementMounted,l=t.style,p=this.state.hasBeenActivated,u=r({},n?D.active:D.hidden,n||p?{}:D.invisible),h=[w,C,P,R.keypadContainer].concat(Array.isArray(l)?l:[l]),f=[w,R.keypadBorder,o===T.FULLSCREEN?R.fullscreen:R.compact];return i.createElement(c,{style:h,dynamicStyle:u},i.createElement(c,{style:f,ref:function(t){!e.hasMounted&&t&&(e.hasMounted=!0,a(t))}},s&&i.createElement(d,{roundTopLeft:o===T.COMPACT,style:R.navigationPadContainer}),i.createElement(c,{style:R.keypadLayout},this.renderKeypad())))}}),A=300,I=1,R=l.create({keypadContainer:{bottom:0,left:0,right:0,position:"fixed",transition:A+"ms ease-out",transitionProperty:"transform",zIndex:f.keypad},keypadBorder:{boxShadow:"0 1px 4px 0 rgba(0, 0, 0, 0.1)",borderColor:"rgba(0, 0, 0, 0.2)",borderStyle:"solid"},fullscreen:{borderTopWidth:I},compact:{borderTopRightRadius:_,borderTopLeftRadius:_,borderTopWidth:I,borderRightWidth:I,borderLeftWidth:I},navigationPadContainer:{borderRight:M+"px "+N+" "+k,boxSizing:"content-box"},keypadLayout:{flexGrow:1,flexBasis:"0%"}}),D={invisible:{visibility:"hidden"},hidden:{msTransform:"translate3d(0, 100%, 0)",WebkitTransform:"translate3d(0, 100%, 0)",transform:"translate3d(0, 100%, 0)"},active:{msTransform:"translate3d(0, 0, 0)",WebkitTransform:"translate3d(0, 0, 0)",transform:"translate3d(0, 0, 0)"}},L=function(e){return r({},e.keypad,{layoutMode:e.layout.layoutMode,navigationPadEnabled:e.layout.navigationPadEnabled})},F=function(e){return{onPageSizeChange:function(t,n){e(g(t,n))}}};e.exports=s(L,F)(O)},function(e,t,n){"use strict";var r,i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},o=n(260),s=n(205),a=s.DecimalSeparators,l=s.IconTypes,p=s.KeyTypes,c=n(261),u=c.decimalSeparator,h=(r={},r[o.PLUS]={type:p.OPERATOR,ariaLabel:i18n._("Plus")},r[o.MINUS]={type:p.OPERATOR,ariaLabel:i18n._("Minus")},r[o.NEGATIVE]={type:p.VALUE,ariaLabel:i18n._("Negative")},r[o.TOGGLE_SIGN]={type:p.OPERATOR,ariaLabel:i18n._("Toggle positive/negative")},r[o.TIMES]={type:p.OPERATOR,ariaLabel:i18n._("Multiply")},r[o.DIVIDE]={type:p.OPERATOR,ariaLabel:i18n._("Divide")},r[o.DECIMAL]={type:p.VALUE,ariaLabel:i18n._("Decimal"),icon:u===a.COMMA?{type:l.TEXT,data:","}:{type:l.SVG,data:o.PERIOD}},r[o.PERCENT]={type:p.OPERATOR,ariaLabel:i18n._("Percent")},r[o.CDOT]={type:p.OPERATOR,ariaLabel:i18n._("Multiply")},r[o.EQUAL]={type:p.OPERATOR,ariaLabel:i18n._("Equals sign")},r[o.NEQ]={type:p.OPERATOR,ariaLabel:i18n._("Not-equals sign")},r[o.GT]={type:p.OPERATOR,ariaLabel:i18n._("Greater than sign")},r[o.LT]={type:p.OPERATOR,ariaLabel:i18n._("Less than sign")},r[o.GEQ]={type:p.OPERATOR,ariaLabel:i18n._("Greater than or equal to sign")},r[o.LEQ]={type:p.OPERATOR,ariaLabel:i18n._("Less than or equal to sign")},r[o.FRAC_INCLUSIVE]={type:p.OPERATOR,ariaLabel:i18n._("Fraction, with current expression in numerator")},r[o.FRAC_EXCLUSIVE]={type:p.OPERATOR,ariaLabel:i18n._("Fraction, excluding the current expression")},r[o.EXP]={type:p.OPERATOR,ariaLabel:i18n._("Custom exponent")},r[o.EXP_2]={type:p.OPERATOR,ariaLabel:i18n._("Square")},r[o.EXP_3]={type:p.OPERATOR,ariaLabel:i18n._("Cube")},r[o.SQRT]={type:p.OPERATOR,ariaLabel:i18n._("Square root")},r[o.CUBE_ROOT]={type:p.OPERATOR,ariaLabel:i18n._("Cube root")},r[o.RADICAL]={type:p.OPERATOR,ariaLabel:i18n._("Radical with custom root")},r[o.LEFT_PAREN]={type:p.OPERATOR,ariaLabel:i18n._("Left parenthesis")},r[o.RIGHT_PAREN]={type:p.OPERATOR,ariaLabel:i18n._("Right parenthesis")},r[o.LN]={type:p.OPERATOR,ariaLabel:i18n._("Natural logarithm")},r[o.LOG]={type:p.OPERATOR,ariaLabel:i18n._("Logarithm with base 10")},r[o.LOG_N]={type:p.OPERATOR,ariaLabel:i18n._("Logarithm with custom base")},r[o.SIN]={type:p.OPERATOR,ariaLabel:i18n._("Sine")},r[o.COS]={type:p.OPERATOR,ariaLabel:i18n._("Cosine")},r[o.TAN]={type:p.OPERATOR,ariaLabel:i18n._("Tangent")},r[o.PI]={type:p.VALUE,ariaLabel:i18n._("Pi"),icon:{type:l.MATH,data:"\\pi"}},r[o.THETA]={type:p.VALUE,ariaLabel:i18n._("Theta"),icon:{type:l.MATH,data:"\\theta"}},r[o.NOOP]={type:p.EMPTY},r[o.UP]={type:p.INPUT_NAVIGATION,ariaLabel:i18n._("Up arrow")},r[o.RIGHT]={type:p.INPUT_NAVIGATION,ariaLabel:i18n._("Right arrow")},r[o.DOWN]={type:p.INPUT_NAVIGATION,ariaLabel:i18n._("Down arrow")},r[o.LEFT]={type:p.INPUT_NAVIGATION,ariaLabel:i18n._("Left arrow")},r[o.JUMP_OUT_PARENTHESES]={type:p.INPUT_NAVIGATION,ariaLabel:i18n._("Navigate right out of a set of parentheses")},r[o.JUMP_OUT_EXPONENT]={type:p.INPUT_NAVIGATION,ariaLabel:i18n._("Navigate right out of an exponent")},r[o.JUMP_OUT_BASE]={type:p.INPUT_NAVIGATION,ariaLabel:i18n._("Navigate right out of a base")},r[o.JUMP_INTO_NUMERATOR]={type:p.INPUT_NAVIGATION,ariaLabel:i18n._("Navigate right into the numerator of a fraction")},r[o.JUMP_OUT_NUMERATOR]={type:p.INPUT_NAVIGATION,ariaLabel:i18n._("Navigate right out of the numerator and into the denominator")},r[o.JUMP_OUT_DENOMINATOR]={type:p.INPUT_NAVIGATION,ariaLabel:i18n._("Navigate right out of the denominator of a fraction")},r[o.BACKSPACE]={type:p.INPUT_NAVIGATION,ariaLabel:i18n._("Delete")},r[o.DISMISS]={type:p.KEYPAD_NAVIGATION,ariaLabel:i18n._("Dismiss")},r);h[o.FRAC_MULTI]={childKeyIds:[o.FRAC_INCLUSIVE,o.FRAC_EXCLUSIVE]},h[o.MANY]={type:p.MANY};for(var d=[0,1,2,3,4,5,6,7,8,9],f=d,m=Array.isArray(f),g=0,f=m?f:f[Symbol.iterator]();;){var v;if(m){if(g>=f.length)break;v=f[g++]}else{if(g=f.next(),g.done)break;v=g.value}var y=v,b=""+y;h["NUM_"+y]={type:p.VALUE,ariaLabel:b,icon:{type:l.TEXT,data:b}}}for(var E=["A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"],T=E,x=Array.isArray(T),w=0,T=x?T:T[Symbol.iterator]();;){var C;if(x){if(w>=T.length)break;C=T[w++]}else{if(w=T.next(),w.done)break;C=w.value}for(var P=C,S=P.toLowerCase(),k=P.toUpperCase(),N=[S,k],M=0;M<N.length;M++){var _=N[M];h[_]={type:p.VALUE,ariaLabel:_,icon:{type:l.MATH,data:_}}}}for(var O=Object.keys(h),A=Array.isArray(O),I=0,O=A?O:O[Symbol.iterator]();;){var R;if(A){if(I>=O.length)break;R=O[I++]}else{if(I=O.next(),I.done)break;R=I.value}var D=R;h[D]=i({id:D,icon:{type:l.SVG,data:D}},h[D])}e.exports=h},function(e,t,n){"use strict";e.exports={Image:n(267),Text:n(268),View:n(269)}},function(e,t,n){"use strict";e.exports={dismissKeypad:function(){return{type:"DismissKeypad"}},activateKeypad:function(){return{type:"ActivateKeypad"}},configureKeypad:function(e){return{type:"ConfigureKeypad",configuration:e}},setPageSize:function(e,t){return{type:"SetPageSize",pageWidthPx:e,pageHeightPx:t}},removeEcho:function(e){return{type:"RemoveEcho",animationId:e}},setKeyHandler:function(e){return{type:"SetKeyHandler",keyHandler:e}},setCursor:function(e){return{type:"SetCursor",cursor:e}}}},function(e,t,n){"use strict";var r,i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},o=n(289),s=n(240),a=s.tabletCutoffPx,l=n(270),p=n(205),c=p.DeviceOrientations,u=p.DeviceTypes,h=p.EchoAnimationTypes,d=p.KeyTypes,f=p.KeypadTypes,m=p.LayoutModes,g=n(260),v=n(242),y=n(235),b=n(271),E=n(272),T=n(262),x=n(263),w=n(273),C=(r={},r[f.FRACTION]=T,r[f.EXPRESSION]=x,r),P=function(){var e={keyHandler:null,cursor:{context:y.NONE}},t=function(){var t=arguments.length<=0||void 0===arguments[0]?e:arguments[0],n=arguments[1];switch(n.type){case"SetKeyHandler":return i({},t,{keyHandler:n.keyHandler});case"PressKey":var r=v[n.key];return r.type!==d.KEYPAD_NAVIGATION?i({},t,{cursor:t.keyHandler(r.id)}):t;case"SetCursor":return i({},t,{cursor:n.cursor});default:return t}},n=w.keypadType,r={extraKeys:["x","y",g.THETA,g.PI],keypadType:n,active:!1},s=function e(){var t=arguments.length<=0||void 0===arguments[0]?r:arguments[0],n=arguments[1];switch(n.type){case"DismissKeypad":return i({},t,{active:!1});case"ActivateKeypad":return i({},t,{active:!0});case"ConfigureKeypad":return i({},t,{extraKeys:[]},n.configuration);case"PressKey":var o=v[n.key];return o.id===g.DISMISS?e(t,{type:"DismissKeypad"}):t;default:return t}},p=function(e){return e-1},f={animateToPosition:!1,currentPage:p(C[n].numPages),dx:0,numPages:C[n].numPages,pageWidthPx:0,velocityTracker:new E},T=function e(){var t=arguments.length<=0||void 0===arguments[0]?f:arguments[0],n=arguments[1];switch(n.type){case"ConfigureKeypad":var r=n.configuration.keypadType,o=C[r].numPages;return i({},t,{numPages:o,animateToPosition:!1,currentPage:p(o),dx:0});case"SetPageSize":return i({},t,{pageWidthPx:n.pageWidthPx});case"PressKey":var s=v[n.key];return s.type===d.VALUE||s.type===d.OPERATOR?e(t,{type:"ResetKeypadPage"}):t;case"ResetKeypadPage":return i({},t,{animateToPosition:!0,currentPage:p(t.numPages),dx:0});case"PageKeypadRight":var a=Math.min(t.currentPage+1,t.numPages-1);return i({},t,{animateToPosition:!0,currentPage:a,dx:0});case"PageKeypadLeft":var l=Math.max(t.currentPage-1,0);return i({},t,{animateToPosition:!0,currentPage:l,dx:0});case"OnSwipeChange":return t.velocityTracker.push(n.dx),i({},t,{animateToPosition:!1,dx:n.dx});case"OnSwipeEnd":var c=t.pageWidthPx,u=t.velocityTracker,h=n.dx,m=u.getVelocity(),g=.1,y=10,b=h<-c/2||m<-g&&h<-y,E=h>c/2||m>g&&h>y;return b?e(t,{type:"PageKeypadRight"}):E?e(t,{type:"PageKeypadLeft"}):i({},t,{animateToPosition:!0,dx:0});default:return t}},x=function(e){return new b({swipeEnabled:e},{onSwipeChange:function(e){R.dispatch({type:"OnSwipeChange",dx:e})},onSwipeEnd:function(e){R.dispatch({type:"OnSwipeEnd",dx:e})},onActiveNodesChanged:function(e){R.dispatch({type:"SetActiveNodes",activeNodes:e})},onClick:function(e,t,n){R.dispatch(i({type:"PressKey",key:e},t,{inPopover:n}))}},[],[g.BACKSPACE,g.UP,g.RIGHT,g.DOWN,g.LEFT])},P={popover:null,focus:null,gestureManager:x(C[n].numPages>1)},S=function(){var e=arguments.length<=0||void 0===arguments[0]?P:arguments[0],t=arguments[1];switch(t.type){case"DismissKeypad":return e.gestureManager.disableEventTracking(),e;case"ActivateKeypad":return e.gestureManager.enableEventTracking(),e;case"SetActiveNodes":return i({},e,t.activeNodes);case"ConfigureKeypad":var n=t.configuration.keypadType,r=C[n].numPages,o=r>1;return{popover:null,focus:null,gestureManager:x(o)};default:return e}},k=0,N={echoes:[]},M=function(){var e=arguments.length<=0||void 0===arguments[0]?N:arguments[0],t=arguments[1];switch(t.type){case"PressKey":var n=v[t.key];return n.type===d.VALUE||n.type===d.OPERATOR?i({},e,{echoes:[].concat(e.echoes,[{animationId:""+k++,animationType:t.inPopover?h.LONG_FADE_ONLY:h.FADE_ONLY,borders:t.borders,id:n.id,initialBounds:t.initialBounds}])}):e;case"RemoveEcho":var r=e.echoes.filter(function(e){return e.animationId!==t.animationId});return i({},e,{echoes:r});default:return e}},_={gridDimensions:{numRows:C[n].rows,numColumns:C[n].columns,numMaxVisibleRows:C[n].maxVisibleRows,numPages:C[n].numPages},buttonDimensions:{widthPx:48,heightPx:48},pageDimensions:{pageWidthPx:0,pageHeightPx:0},layoutMode:m.FULLSCREEN,paginationEnabled:!1,navigationPadEnabled:!1},O=function(e,t){var n=e.pageWidthPx,r=e.pageHeightPx,o=n>r?c.LANDSCAPE:c.PORTRAIT,s=Math.min(n,r)>a?u.TABLET:u.PHONE,p=s===u.TABLET,h=s===u.PHONE&&o===c.PORTRAIT,d={deviceOrientation:o,deviceType:s},f={navigationPadEnabled:p,paginationEnabled:h,toolbarEnabled:!0};return i({},l(t,e,d,f),{navigationPadEnabled:p,paginationEnabled:h})},A=function(){var e=arguments.length<=0||void 0===arguments[0]?_:arguments[0],t=arguments[1];switch(t.type){case"ConfigureKeypad":var n=t.configuration.keypadType,r={numRows:C[n].rows,numColumns:C[n].columns,numMaxVisibleRows:C[n].maxVisibleRows,numPages:C[n].numPages};return i({},e,O(e.pageDimensions,r),{gridDimensions:r});case"SetPageSize":var o=t.pageWidthPx,s=t.pageHeightPx,a={pageWidthPx:o,pageHeightPx:s};return i({},e,O(a,e.gridDimensions),{pageDimensions:a});default:return e}},I=o.combineReducers({input:t,keypad:s,pager:T,gestures:S,echoes:M,layout:A}),R=o.createStore(I);return R};e.exports=P},function(e,t,n){"use strict";function r(){if(l.length)throw l.shift()}function i(e){var t;t=a.length?a.pop():new o,t.task=e,s(t)}function o(){this.task=null}var s=n(277),a=[],l=[],p=s.makeRequestCallFromTimer(r);e.exports=i,o.prototype.call=function(){try{this.task.call()}catch(e){i.onerror?i.onerror(e):(l.push(e),p())}finally{this.task=null,a[a.length]=this}}},function(e,t,n){var r=n(57),i=1e-9,o=Math.pow(2,-42),s={DEFAULT_TOLERANCE:i,EPSILON:o,is:function(e){return r.isNumber(e)&&!r.isNaN(e)},equal:function(e,t,n){return null==e||null==t?e===t:e===t||(null==n&&(n=i),Math.abs(e-t)<n)},sign:function(e,t){return s.equal(e,0,t)?0:Math.abs(e)/e},isInteger:function(e,t){return s.equal(Math.round(e),e,t)},round:function(e,t){var n=Math.pow(10,t);return Math.round(e*n)/n},roundTo:function(e,t){return Math.round(e/t)*t},floorTo:function(e,t){return Math.floor(e/t)*t},ceilTo:function(e,t){return Math.ceil(e/t)*t},toFraction:function(e,t,n){n=n||1e3,t=t||o;for(var r=[1,0],i=[0,1],a=Math.floor(e),l=e-a;i[0]<=n;){if(s.equal(r[0]/i[0],e,t))return[r[0],i[0]];r=[a*r[0]+r[1],r[0]],i=[a*i[0]+i[1],i[0]],a=Math.floor(1/l),l=1/l-a}return[e,1]}};e.exports=s},function(e,t,n){function r(e){return o.reduce(e,function(e,t){return e+t},0)}function i(e){return o.reduce(e,function(e,t){return e*t},1)}var o=n(57),s=n(247),a={is:function(e,t){return!!o.isArray(e)&&((void 0===t||e.length===t)&&o.all(e,s.is))},normalize:function(e){return a.scale(e,1/a.length(e))},length:function(e){return Math.sqrt(a.dot(e,e))},dot:function(e,t){var n=o.toArray(arguments),s=o.zip.apply(o,n),a=o.map(s,i);return r(a)},add:function(){var e=o.toArray(arguments),t=o.zip.apply(o,e);return o.map(t,r)},subtract:function(e,t){return o.map(o.zip(e,t),function(e){return e[0]-e[1]})},negate:function(e){return o.map(e,function(e){return-e})},scale:function(e,t){return o.map(e,function(e){return e*t})},equal:function(e,t,n){return o.all(o.zip(e,t),function(e){return s.equal(e[0],e[1],n)})},codirectional:function(e,t,n){return!(!s.equal(a.length(e),0,n)&&!s.equal(a.length(t),0,n))||(e=a.normalize(e),t=a.normalize(t),a.equal(e,t,n))},collinear:function(e,t,n){return a.codirectional(e,t,n)||a.codirectional(e,a.negate(t),n)},polarRadFromCart:function(e){var t=a.length(e),n=Math.atan2(e[1],e[0]);return n<0&&(n+=2*Math.PI),[t,n]},polarDegFromCart:function(e){var t=a.polarRadFromCart(e);return[t[0],180*t[1]/Math.PI]},cartFromPolarRad:function(e,t){return o.isUndefined(t)&&(t=e[1],e=e[0]),[e*Math.cos(t),e*Math.sin(t)]},cartFromPolarDeg:function(e,t){return o.isUndefined(t)&&(t=e[1],e=e[0]),a.cartFromPolarRad(e,t*Math.PI/180)},rotateRad:function(e,t){var n=a.polarRadFromCart(e),r=n[1]+t;return a.cartFromPolarRad(n[0],r)},rotateDeg:function(e,t){var n=a.polarDegFromCart(e),r=n[1]+t;return a.cartFromPolarDeg(n[0],r)},angleRad:function(e,t){return Math.acos(a.dot(e,t)/(a.length(e)*a.length(t)))},angleDeg:function(e,t){return 180*a.angleRad(e,t)/Math.PI},projection:function(e,t){var n=a.dot(e,t)/a.dot(t,t);return a.scale(t,n)},round:function(e,t){return o.map(e,function(e,n){return s.round(e,t[n]||t)})},roundTo:function(e,t){return o.map(e,function(e,n){return s.roundTo(e,t[n]||t)})},floorTo:function(e,t){return o.map(e,function(e,n){return s.floorTo(e,t[n]||t)})},ceilTo:function(e,t){return o.map(e,function(e,n){return s.ceilTo(e,t[n]||t)})}};e.exports=a},function(e,t,n){var r=n(57),i=n(248),o=n(247),s={rotateRad:function(e,t,n){return void 0===n?i.rotateRad(e,t):i.add(n,i.rotateRad(i.subtract(e,n),t))},rotateDeg:function(e,t,n){return void 0===n?i.rotateDeg(e,t):i.add(n,i.rotateDeg(i.subtract(e,n),t))},distanceToPoint:function(e,t){return i.length(i.subtract(e,t))},distanceToLine:function(e,t){var n=i.subtract(t[1],t[0]),r=i.subtract(e,t[0]),o=i.projection(r,n),s=i.subtract(o,r);return i.length(s)},reflectOverLine:function(e,t){var n=i.subtract(t[1],t[0]),r=i.subtract(e,t[0]),o=i.projection(r,n),s=i.subtract(i.scale(o,2),r);return i.add(t[0],s)},compare:function(e,t,n){if(e.length!==t.length)return e.length-t.length;for(var r=0;r<e.length;r++)if(!o.equal(e[r],t[r],n))return e[r]-t[r];return 0}};r.extend(s,{is:i.is,addVector:i.add,addVectors:i.add,subtractVector:i.subtract,equal:i.equal,polarRadFromCart:i.polarRadFromCart,polarDegFromCart:i.polarDegFromCart,cartFromPolarRad:i.cartFromPolarRad,cartFromPolarDeg:i.cartFromPolarDeg,round:i.round,roundTo:i.roundTo,floorTo:i.floorTo,ceilTo:i.ceilTo}),e.exports=s},function(e,t,n){var r=n(249),i=n(248),o={distanceToPoint:function(e,t){return r.distanceToLine(t,e)},reflectPoint:function(e,t){return r.reflectOverLine(t,e)},midpoint:function(e){return[(e[0][0]+e[1][0])/2,(e[0][1]+e[1][1])/2]},equal:function(e,t,n){var o=i.subtract(e[1],e[0]),s=i.subtract(t[1],t[0]);if(!i.collinear(o,s,n))return!1;if(r.equal(e[0],t[0]))return!0;var a=i.subtract(t[0],e[0]);return i.collinear(o,a,n)}};e.exports=o},function(e,t,n){var r=n(248),i=n(249),o={equal:function(e,t,n){var o=r.subtract(e[1],e[0]),s=r.subtract(t[1],t[0]),a=i.equal(e[0],t[0]),l=r.codirectional(o,s,n);return a&&l}};e.exports=o},function(e,t,n){!function(){function e(){if(e.is(arguments[0],z)){for(var t=arguments[0],n=Xe[b](e,t.splice(0,3+e.is(t[0],F))),r=n.set(),i=0,o=t[M];i<o;i++){var s=t[i]||{};c[d](s.type)&&r[H](n[s.type]().attr(s))}return r}return Xe[b](e,arguments)}function t(){for(var e=[],t=0;t<32;t++)e[t]=(~~(16*O.random()))[B](16);return e[12]=4,e[16]=(3&e[16]|8)[B](16),"r-"+e[N]("")}function n(e,t,n){function r(){var i=Array[h].slice.call(arguments,0),o=i[N]("►"),s=r.cache=r.cache||{},a=r.count=r.count||[];return s[d](o)?n?n(s[o]):s[o]:(a[M]>=1e3&&delete s[a.shift()],a[H](o),s[o]=e[b](t,i),n?n(s[o]):s[o])}return r}function r(t,n,r,i,o){return o?e.format("M{0},{1}l{2},0a{3},{3},0,0,1,{3},{3}l0,{5}a{3},{3},0,0,1,{4},{3}l{6},0a{3},{3},0,0,1,{4},{4}l0,{7}a{3},{3},0,0,1,{3},{4}z",t+o,n,r-2*o,o,-o,i-2*o,2*o-r,2*o-i):e.format("M{0},{1}l{2},0,0,{3},{4},0z",t,n,r,i,-r)}function i(){return this.x+w+this.y}function o(t){return function(n,r,i,o){var s={back:t};return e.is(i,"function")?o=i:s.rot=i,n&&n.constructor==We&&(n=n.attrs.path),n&&(s.along=n),this.animate(s,r,o)}}function s(e,t,n,r,i,o){function s(e){return((u*e+c)*e+p)*e}function a(e,t){var n=l(e,t);return((f*n+d)*n+h)*n}function l(e,t){var n,r,i,o,a,l;for(i=e,l=0;l<8;l++){if(o=s(i)-e,R(o)<t)return i;if(a=(3*u*i+2*c)*i+p,R(a)<1e-6)break;i-=o/a}if(n=0,r=1,i=e,i<n)return n;if(i>r)return r;for(;n<r;){if(o=s(i),R(o-e)<t)return i;e>o?n=i:r=i,i=(r-n)/2+n}return i}var p=3*t,c=3*(r-t)-p,u=1-p-c,h=3*n,d=3*(i-n)-h,f=1-h-d;return a(e,1/(200*o))}var a;a="".trim?function(e,t,n){e.setAttribute(t,String(n).trim())}:function(e,t,n){e.setAttribute(t,String(n))},e.version="1.5.2";var l,p=/[, ]+/,c={circle:1,rect:1,path:1,ellipse:1,text:1,image:1},u=/\{(\d+)\}/g,h="prototype",d="hasOwnProperty",f=document,m=window,g={was:Object[h][d].call(m,"Raphael"),is:m.Raphael},v=function(){this.customAttributes={}},y="appendChild",b="apply",E="concat",T="createTouch"in f,x="",w=" ",C=String,P="split",S="click dblclick mousedown mousemove mouseout mouseover mouseup touchstart touchmove touchend orientationchange touchcancel gesturestart gesturechange gestureend"[P](w),k={mousedown:"touchstart",mousemove:"touchmove",mouseup:"touchend"},N="join",M="length",_=C[h].toLowerCase,O=Math,A=O.max,I=O.min,R=O.abs,D=O.pow,L=O.PI,F="number",q="string",z="array",B="toString",j="fill",W=Object[h][B],H="push",U=/^url\(['"]?([^\)]+?)['"]?\)$/i,V=/^\s*((#[a-f\d]{6})|(#[a-f\d]{3})|rgba?\(\s*([\d\.]+%?\s*,\s*[\d\.]+%?\s*,\s*[\d\.]+(?:%?\s*,\s*[\d\.]+)?)%?\s*\)|hsba?\(\s*([\d\.]+(?:deg|\xb0|%)?\s*,\s*[\d\.]+%?\s*,\s*[\d\.]+(?:%?\s*,\s*[\d\.]+)?)%?\s*\)|hsla?\(\s*([\d\.]+(?:deg|\xb0|%)?\s*,\s*[\d\.]+%?\s*,\s*[\d\.]+(?:%?\s*,\s*[\d\.]+)?)%?\s*\))\s*$/i,G={NaN:1,Infinity:1,"-Infinity":1},$=/^(?:cubic-)?bezier\(([^,]+),([^,]+),([^,]+),([^\)]+)\)/,Y=O.round,K=parseFloat,X=parseInt,J=" progid:DXImageTransform.Microsoft",Q=C[h].toUpperCase,Z={blur:0,"clip-rect":"0 0 1e9 1e9",cursor:"default",cx:0,cy:0,fill:"#fff","fill-opacity":1,font:'10px "Arial"',"font-family":'"Arial"',"font-size":"10","font-style":"normal","font-weight":400,gradient:0,height:0,href:"http://raphaeljs.com/",opacity:1,path:"M0,0",r:0,rotation:0,rx:0,ry:0,scale:"1 1",src:"",stroke:"#000","stroke-dasharray":"","stroke-linecap":"butt","stroke-linejoin":"butt","stroke-miterlimit":0,"stroke-opacity":1,"stroke-width":1,target:"_blank","text-anchor":"middle",title:"Raphael",translation:"0 0",width:0,x:0,y:0},ee={along:"along",blur:F,"clip-rect":"csv",cx:F,cy:F,fill:"colour","fill-opacity":F,"font-size":F,height:F,opacity:F,path:"path",r:F,rotation:"csv",rx:F,ry:F,scale:"csv",stroke:"colour","stroke-opacity":F,"stroke-width":F,translation:"csv",width:F,x:F,y:F},te="replace",ne=/^(from|to|\d+%?)$/,re=/\s*,\s*/,ie={hs:1,rg:1},oe=/,?([achlmqrstvxz]),?/gi,se=/([achlmqstvz])[\s,]*((-?\d*\.?\d*(?:e[-+]?\d+)?\s*,?\s*)+)/gi,ae=/(-?\d*\.?\d*(?:e[-+]?\d+)?)\s*,?\s*/gi,le=/^r(?:\(([^,]+?)\s*,\s*([^\)]+?)\))?/,pe=function(e,t){return e.key-t.key;
};if(e.type=m.SVGAngle||f.implementation.hasFeature("http://www.w3.org/TR/SVG11/feature#BasicStructure","1.1")?"SVG":"VML","VML"==e.type){var ce,ue=f.createElement("div");if(ue.innerHTML='<v:shape adj="1"/>',ce=ue.firstChild,ce.style.behavior="url(#default#VML)",!ce||"object"!=typeof ce.adj)return e.type=null;ue=null}e.svg=!(e.vml="VML"==e.type),v[h]=e[h],l=v[h],e._id=0,e._oid=0,e.fn={},e.is=function(e,t){return t=_.call(t),"finite"==t?!G[d](+e):"null"==t&&null===e||t==typeof e||"object"==t&&e===Object(e)||"array"==t&&Array.isArray&&Array.isArray(e)||W.call(e).slice(8,-1).toLowerCase()==t},e.angle=function(t,n,r,i,o,s){if(null==o){var a=t-r,l=n-i;return a||l?(180*(a<0)+180*O.atan(-l/-a)/L+360)%360:0}return e.angle(t,n,o,s)-e.angle(r,i,o,s)},e.rad=function(e){return e%360*L/180},e.deg=function(e){return 180*e/L%360},e.snapTo=function(t,n,r){if(r=e.is(r,"finite")?r:10,e.is(t,z)){for(var i=t.length;i--;)if(R(t[i]-n)<=r)return t[i]}else{t=+t;var o=n%t;if(o<r)return n-o;if(o>t-r)return n-o+t}return n},e.setWindow=function(e){m=e,f=m.document};var he=function(t){if(e.vml){var r,i=/^\s+|\s+$/g;try{var o=new ActiveXObject("htmlfile");o.write("<body>"),o.close(),r=o.body}catch(e){r=createPopup().document.body}var s=r.createTextRange();he=n(function(e){try{r.style.color=C(e)[te](i,x);var t=s.queryCommandValue("ForeColor");return t=(255&t)<<16|65280&t|(16711680&t)>>>16,"#"+("000000"+t[B](16)).slice(-6)}catch(e){return"none"}})}else{var a=f.createElement("i");a.title="Raphaël Colour Picker",a.style.display="none",f.body[y](a),he=n(function(e){return a.style.color=e,f.defaultView.getComputedStyle(a,x).getPropertyValue("color")})}return he(t)},de=function(){return"hsb("+[this.h,this.s,this.b]+")"},fe=function(){return"hsl("+[this.h,this.s,this.l]+")"},me=function(){return this.hex};e.hsb2rgb=function(t,n,r,i){return e.is(t,"object")&&"h"in t&&"s"in t&&"b"in t&&(r=t.b,n=t.s,t=t.h,i=t.o),e.hsl2rgb(t,n,r/2,i)},e.hsl2rgb=function(t,n,r,i){e.is(t,"object")&&"h"in t&&"s"in t&&"l"in t&&(r=t.l,n=t.s,t=t.h),(t>1||n>1||r>1)&&(t/=360,n/=100,r/=100);var o,s,a,l={},p=["r","g","b"];if(n){o=r<.5?r*(1+n):r+n-r*n,s=2*r-o;for(var c=0;c<3;c++)a=t+1/3*-(c-1),a<0&&a++,a>1&&a--,6*a<1?l[p[c]]=s+6*(o-s)*a:2*a<1?l[p[c]]=o:3*a<2?l[p[c]]=s+(o-s)*(2/3-a)*6:l[p[c]]=s}else l={r:r,g:r,b:r};return l.r*=255,l.g*=255,l.b*=255,l.hex="#"+(16777216|l.b|l.g<<8|l.r<<16).toString(16).slice(1),e.is(i,"finite")&&(l.opacity=i),l.toString=me,l},e.rgb2hsb=function(t,n,r){if(null==n&&e.is(t,"object")&&"r"in t&&"g"in t&&"b"in t&&(r=t.b,n=t.g,t=t.r),null==n&&e.is(t,q)){var i=e.getRGB(t);t=i.r,n=i.g,r=i.b}(t>1||n>1||r>1)&&(t/=255,n/=255,r/=255);var o,s,a=A(t,n,r),l=I(t,n,r),p=a;if(l==a)return{h:0,s:0,b:a,toString:de};var c=a-l;return s=c/a,o=t==a?(n-r)/c:n==a?2+(r-t)/c:4+(t-n)/c,o/=6,o<0&&o++,o>1&&o--,{h:o,s:s,b:p,toString:de}},e.rgb2hsl=function(t,n,r){if(null==n&&e.is(t,"object")&&"r"in t&&"g"in t&&"b"in t&&(r=t.b,n=t.g,t=t.r),null==n&&e.is(t,q)){var i=e.getRGB(t);t=i.r,n=i.g,r=i.b}(t>1||n>1||r>1)&&(t/=255,n/=255,r/=255);var o,s,a,l=A(t,n,r),p=I(t,n,r),c=(l+p)/2;if(p==l)a={h:0,s:0,l:c};else{var u=l-p;s=c<.5?u/(l+p):u/(2-l-p),o=t==l?(n-r)/u:n==l?2+(r-t)/u:4+(t-n)/u,o/=6,o<0&&o++,o>1&&o--,a={h:o,s:s,l:c}}return a.toString=fe,a},e._path2string=function(){return this.join(",")[te](oe,"$1")},e.getRGB=n(function(t){if(!t||(t=C(t)).indexOf("-")+1)return{r:-1,g:-1,b:-1,hex:"none",error:1};if("none"==t)return{r:-1,g:-1,b:-1,hex:"none"};!(ie[d](t.toLowerCase().substring(0,2))||"#"==t.charAt())&&(t=he(t));var n,r,i,o,s,a,l=t.match(V);return l?(l[2]&&(i=X(l[2].substring(5),16),r=X(l[2].substring(3,5),16),n=X(l[2].substring(1,3),16)),l[3]&&(i=X((s=l[3].charAt(3))+s,16),r=X((s=l[3].charAt(2))+s,16),n=X((s=l[3].charAt(1))+s,16)),l[4]&&(a=l[4][P](re),n=K(a[0]),"%"==a[0].slice(-1)&&(n*=2.55),r=K(a[1]),"%"==a[1].slice(-1)&&(r*=2.55),i=K(a[2]),"%"==a[2].slice(-1)&&(i*=2.55),"rgba"==l[1].toLowerCase().slice(0,4)&&(o=K(a[3])),a[3]&&"%"==a[3].slice(-1)&&(o/=100)),l[5]?(a=l[5][P](re),n=K(a[0]),"%"==a[0].slice(-1)&&(n*=2.55),r=K(a[1]),"%"==a[1].slice(-1)&&(r*=2.55),i=K(a[2]),"%"==a[2].slice(-1)&&(i*=2.55),("deg"==a[0].slice(-3)||"°"==a[0].slice(-1))&&(n/=360),"hsba"==l[1].toLowerCase().slice(0,4)&&(o=K(a[3])),a[3]&&"%"==a[3].slice(-1)&&(o/=100),e.hsb2rgb(n,r,i,o)):l[6]?(a=l[6][P](re),n=K(a[0]),"%"==a[0].slice(-1)&&(n*=2.55),r=K(a[1]),"%"==a[1].slice(-1)&&(r*=2.55),i=K(a[2]),"%"==a[2].slice(-1)&&(i*=2.55),("deg"==a[0].slice(-3)||"°"==a[0].slice(-1))&&(n/=360),"hsla"==l[1].toLowerCase().slice(0,4)&&(o=K(a[3])),a[3]&&"%"==a[3].slice(-1)&&(o/=100),e.hsl2rgb(n,r,i,o)):(l={r:n,g:r,b:i},l.hex="#"+(16777216|i|r<<8|n<<16).toString(16).slice(1),e.is(o,"finite")&&(l.opacity=o),l)):{r:-1,g:-1,b:-1,hex:"none",error:1}},e),e.getColor=function(e){var t=this.getColor.start=this.getColor.start||{h:0,s:1,b:e||.75},n=this.hsb2rgb(t.h,t.s,t.b);return t.h+=.075,t.h>1&&(t.h=0,t.s-=.2,t.s<=0&&(this.getColor.start={h:0,s:1,b:t.b})),n.hex},e.getColor.reset=function(){delete this.start},e.parsePathString=n(function(t){if(!t)return null;var n={a:7,c:6,h:1,l:2,m:2,q:4,s:4,t:2,v:1,z:0},r=[];return e.is(t,z)&&e.is(t[0],z)&&(r=ve(t)),r[M]||C(t)[te](se,function(e,t,i){var o=[],s=_.call(t);for(i[te](ae,function(e,t){t&&o[H](+t)}),"m"==s&&o[M]>2&&(r[H]([t][E](o.splice(0,2))),s="l",t="m"==t?"l":"L");o[M]>=n[s]&&(r[H]([t][E](o.splice(0,n[s]))),n[s]););}),r[B]=e._path2string,r}),e.findDotsAtSegment=function(e,t,n,r,i,o,s,a,l){var p=1-l,c=D(p,3)*e+3*D(p,2)*l*n+3*p*l*l*i+D(l,3)*s,u=D(p,3)*t+3*D(p,2)*l*r+3*p*l*l*o+D(l,3)*a,h=e+2*l*(n-e)+l*l*(i-2*n+e),d=t+2*l*(r-t)+l*l*(o-2*r+t),f=n+2*l*(i-n)+l*l*(s-2*i+n),m=r+2*l*(o-r)+l*l*(a-2*o+r),g=(1-l)*e+l*n,v=(1-l)*t+l*r,y=(1-l)*i+l*s,b=(1-l)*o+l*a,E=90-180*O.atan((h-f)/(d-m))/L;return(h>f||d<m)&&(E+=180),{x:c,y:u,m:{x:h,y:d},n:{x:f,y:m},start:{x:g,y:v},end:{x:y,y:b},alpha:E}};var ge=n(function(e){if(!e)return{x:0,y:0,width:0,height:0};e=Pe(e);for(var t,n=0,r=0,i=[],o=[],s=0,a=e[M];s<a;s++)if(t=e[s],"M"==t[0])n=t[1],r=t[2],i[H](n),o[H](r);else{var l=Ce(n,r,t[1],t[2],t[3],t[4],t[5],t[6]);i=i[E](l.min.x,l.max.x),o=o[E](l.min.y,l.max.y),n=t[5],r=t[6]}var p=I[b](0,i),c=I[b](0,o);return{x:p,y:c,width:A[b](0,i)-p,height:A[b](0,o)-c}}),ve=function(t){var n=[];e.is(t,z)&&e.is(t&&t[0],z)||(t=e.parsePathString(t));for(var r=0,i=t[M];r<i;r++){n[r]=[];for(var o=0,s=t[r][M];o<s;o++)n[r][o]=t[r][o]}return n[B]=e._path2string,n},ye=n(function(t){e.is(t,z)&&e.is(t&&t[0],z)||(t=e.parsePathString(t));var n=[],r=0,i=0,o=0,s=0,a=0;"M"==t[0][0]&&(r=t[0][1],i=t[0][2],o=r,s=i,a++,n[H](["M",r,i]));for(var l=a,p=t[M];l<p;l++){var c=n[l]=[],u=t[l];if(u[0]!=_.call(u[0]))switch(c[0]=_.call(u[0]),c[0]){case"a":c[1]=u[1],c[2]=u[2],c[3]=u[3],c[4]=u[4],c[5]=u[5],c[6]=+(u[6]-r).toFixed(3),c[7]=+(u[7]-i).toFixed(3);break;case"v":c[1]=+(u[1]-i).toFixed(3);break;case"m":o=u[1],s=u[2];default:for(var h=1,d=u[M];h<d;h++)c[h]=+(u[h]-(h%2?r:i)).toFixed(3)}else{c=n[l]=[],"m"==u[0]&&(o=u[1]+r,s=u[2]+i);for(var f=0,m=u[M];f<m;f++)n[l][f]=u[f]}var g=n[l][M];switch(n[l][0]){case"z":r=o,i=s;break;case"h":r+=+n[l][g-1];break;case"v":i+=+n[l][g-1];break;default:r+=+n[l][g-2],i+=+n[l][g-1]}}return n[B]=e._path2string,n},0,ve),be=n(function(t){e.is(t,z)&&e.is(t&&t[0],z)||(t=e.parsePathString(t));var n=[],r=0,i=0,o=0,s=0,a=0;"M"==t[0][0]&&(r=+t[0][1],i=+t[0][2],o=r,s=i,a++,n[0]=["M",r,i]);for(var l=a,p=t[M];l<p;l++){var c=n[l]=[],u=t[l];if(u[0]!=Q.call(u[0]))switch(c[0]=Q.call(u[0]),c[0]){case"A":c[1]=u[1],c[2]=u[2],c[3]=u[3],c[4]=u[4],c[5]=u[5],c[6]=+(u[6]+r),c[7]=+(u[7]+i);break;case"V":c[1]=+u[1]+i;break;case"H":c[1]=+u[1]+r;break;case"M":o=+u[1]+r,s=+u[2]+i;default:for(var h=1,d=u[M];h<d;h++)c[h]=+u[h]+(h%2?r:i)}else for(var f=0,m=u[M];f<m;f++)n[l][f]=u[f];switch(c[0]){case"Z":r=o,i=s;break;case"H":r=c[1];break;case"V":i=c[1];break;case"M":o=n[l][n[l][M]-2],s=n[l][n[l][M]-1];default:r=n[l][n[l][M]-2],i=n[l][n[l][M]-1]}}return n[B]=e._path2string,n},null,ve),Ee=function(e,t,n,r){return[e,t,n,r,n,r]},Te=function(e,t,n,r,i,o){var s=1/3,a=2/3;return[s*e+a*n,s*t+a*r,s*i+a*n,s*o+a*r,i,o]},xe=function(e,t,r,i,o,s,a,l,p,c){var u,h=120*L/180,d=L/180*(+o||0),f=[],m=n(function(e,t,n){var r=e*O.cos(n)-t*O.sin(n),i=e*O.sin(n)+t*O.cos(n);return{x:r,y:i}});if(c)S=c[0],k=c[1],w=c[2],C=c[3];else{u=m(e,t,-d),e=u.x,t=u.y,u=m(l,p,-d),l=u.x,p=u.y;var g=(O.cos(L/180*o),O.sin(L/180*o),(e-l)/2),v=(t-p)/2,y=g*g/(r*r)+v*v/(i*i);y>1&&(y=O.sqrt(y),r=y*r,i=y*i);var b=r*r,T=i*i,x=(s==a?-1:1)*O.sqrt(R((b*T-b*v*v-T*g*g)/(b*v*v+T*g*g))),w=x*r*v/i+(e+l)/2,C=x*-i*g/r+(t+p)/2,S=O.asin(((t-C)/i).toFixed(9)),k=O.asin(((p-C)/i).toFixed(9));S=e<w?L-S:S,k=l<w?L-k:k,S<0&&(S=2*L+S),k<0&&(k=2*L+k),a&&S>k&&(S-=2*L),!a&&k>S&&(k-=2*L)}var _=k-S;if(R(_)>h){var A=k,I=l,D=p;k=S+h*(a&&k>S?1:-1),l=w+r*O.cos(k),p=C+i*O.sin(k),f=xe(l,p,r,i,o,0,a,I,D,[k,A,w,C])}_=k-S;var F=O.cos(S),q=O.sin(S),z=O.cos(k),B=O.sin(k),j=O.tan(_/4),W=4/3*r*j,H=4/3*i*j,U=[e,t],V=[e+W*q,t-H*F],G=[l+W*B,p-H*z],$=[l,p];if(V[0]=2*U[0]-V[0],V[1]=2*U[1]-V[1],c)return[V,G,$][E](f);f=[V,G,$][E](f)[N]()[P](",");for(var Y=[],K=0,X=f[M];K<X;K++)Y[K]=K%2?m(f[K-1],f[K],d).y:m(f[K],f[K+1],d).x;return Y},we=function(e,t,n,r,i,o,s,a,l){var p=1-l;return{x:D(p,3)*e+3*D(p,2)*l*n+3*p*l*l*i+D(l,3)*s,y:D(p,3)*t+3*D(p,2)*l*r+3*p*l*l*o+D(l,3)*a}},Ce=n(function(e,t,n,r,i,o,s,a){var l,p=i-2*n+e-(s-2*i+n),c=2*(n-e)-2*(i-n),u=e-n,h=(-c+O.sqrt(c*c-4*p*u))/2/p,d=(-c-O.sqrt(c*c-4*p*u))/2/p,f=[t,a],m=[e,s];return R(h)>"1e12"&&(h=.5),R(d)>"1e12"&&(d=.5),h>0&&h<1&&(l=we(e,t,n,r,i,o,s,a,h),m[H](l.x),f[H](l.y)),d>0&&d<1&&(l=we(e,t,n,r,i,o,s,a,d),m[H](l.x),f[H](l.y)),p=o-2*r+t-(a-2*o+r),c=2*(r-t)-2*(o-r),u=t-r,h=(-c+O.sqrt(c*c-4*p*u))/2/p,d=(-c-O.sqrt(c*c-4*p*u))/2/p,R(h)>"1e12"&&(h=.5),R(d)>"1e12"&&(d=.5),h>0&&h<1&&(l=we(e,t,n,r,i,o,s,a,h),m[H](l.x),f[H](l.y)),d>0&&d<1&&(l=we(e,t,n,r,i,o,s,a,d),m[H](l.x),f[H](l.y)),{min:{x:I[b](0,m),y:I[b](0,f)},max:{x:A[b](0,m),y:A[b](0,f)}}}),Pe=n(function(e,t){for(var n=be(e),r=t&&be(t),i={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null},o={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null},s=(function(e,t){var n,r;if(!e)return["C",t.x,t.y,t.x,t.y,t.x,t.y];switch(!(e[0]in{T:1,Q:1})&&(t.qx=t.qy=null),e[0]){case"M":t.X=e[1],t.Y=e[2];break;case"A":e=["C"][E](xe[b](0,[t.x,t.y][E](e.slice(1))));break;case"S":n=t.x+(t.x-(t.bx||t.x)),r=t.y+(t.y-(t.by||t.y)),e=["C",n,r][E](e.slice(1));break;case"T":t.qx=t.x+(t.x-(t.qx||t.x)),t.qy=t.y+(t.y-(t.qy||t.y)),e=["C"][E](Te(t.x,t.y,t.qx,t.qy,e[1],e[2]));break;case"Q":t.qx=e[1],t.qy=e[2],e=["C"][E](Te(t.x,t.y,e[1],e[2],e[3],e[4]));break;case"L":e=["C"][E](Ee(t.x,t.y,e[1],e[2]));break;case"H":e=["C"][E](Ee(t.x,t.y,e[1],t.y));break;case"V":e=["C"][E](Ee(t.x,t.y,t.x,e[1]));break;case"Z":e=["C"][E](Ee(t.x,t.y,t.X,t.Y))}return e}),a=function(e,t){if(e[t][M]>7){e[t].shift();for(var i=e[t];i[M];)e.splice(t++,0,["C"][E](i.splice(0,6)));e.splice(t,1),c=A(n[M],r&&r[M]||0)}},l=function(e,t,i,o,s){e&&t&&"M"==e[s][0]&&"M"!=t[s][0]&&(t.splice(s,0,["M",o.x,o.y]),i.bx=0,i.by=0,i.x=e[s][1],i.y=e[s][2],c=A(n[M],r&&r[M]||0))},p=0,c=A(n[M],r&&r[M]||0);p<c;p++){n[p]=s(n[p],i),a(n,p),r&&(r[p]=s(r[p],o)),r&&a(r,p),l(n,r,i,o,p),l(r,n,o,i,p);var u=n[p],h=r&&r[p],d=u[M],f=r&&h[M];i.x=u[d-2],i.y=u[d-1],i.bx=K(u[d-4])||i.x,i.by=K(u[d-3])||i.y,o.bx=r&&(K(h[f-4])||o.x),o.by=r&&(K(h[f-3])||o.y),o.x=r&&h[f-2],o.y=r&&h[f-1]}return r?[n,r]:n},null,ve),Se=n(function(t){for(var n=[],r=0,i=t[M];r<i;r++){var o={},s=t[r].match(/^([^:]*):?([\d\.]*)/);if(o.color=e.getRGB(s[1]),o.color.error)return null;o.color=o.color.hex,s[2]&&(o.offset=s[2]+"%"),n[H](o)}for(r=1,i=n[M]-1;r<i;r++)if(!n[r].offset){for(var a=K(n[r-1].offset||0),l=0,p=r+1;p<i;p++)if(n[p].offset){l=n[p].offset;break}l||(l=100,p=i),l=K(l);for(var c=(l-a)/(p-r+1);r<p;r++)a+=c,n[r].offset=a+"%"}return n}),ke=function(t,n,r,i){var o;return e.is(t,q)||e.is(t,"object")?(o=e.is(t,q)?f.getElementById(t):t,o.tagName?null==n?{container:o,width:o.style.pixelWidth||o.offsetWidth,height:o.style.pixelHeight||o.offsetHeight}:{container:o,width:n,height:r}:void 0):{container:1,x:t,y:n,width:r,height:i}},Ne=function(e,t){var n=this;for(var r in t)if(t[d](r)&&!(r in e))switch(typeof t[r]){case"function":!function(t){e[r]=e===n?t:function(){return t[b](n,arguments)}}(t[r]);break;case"object":e[r]=e[r]||{},Ne.call(this,e[r],t[r]);break;default:e[r]=t[r]}},Me=function(e,t){e==t.top&&(t.top=e.prev),e==t.bottom&&(t.bottom=e.next),e.next&&(e.next.prev=e.prev),e.prev&&(e.prev.next=e.next)},_e=function(e,t){t.top!==e&&(Me(e,t),e.next=null,e.prev=t.top,t.top.next=e,t.top=e)},Oe=function(e,t){t.bottom!==e&&(Me(e,t),e.next=t.bottom,e.prev=null,t.bottom.prev=e,t.bottom=e)},Ae=function(e,t,n){Me(e,n),t==n.top&&(n.top=e),t.next&&(t.next.prev=e),e.next=t.next,e.prev=t,t.next=e},Ie=function(e,t,n){Me(e,n),t==n.bottom&&(n.bottom=e),t.prev&&(t.prev.next=e),e.prev=t.prev,t.prev=e,e.next=t},Re=function(e){return function(){throw new Error("Raphaël: you are calling to method “"+e+"” of removed object")}};if(e.pathToRelative=ye,e.svg){l.svgns="http://www.w3.org/2000/svg",l.xlink="http://www.w3.org/1999/xlink",Y=function(e){return+e+.5*(~~e===e)};var De=function(e,t){if(!t)return e=f.createElementNS(l.svgns,e),e.style.webkitTapHighlightColor="rgba(0,0,0,0)",e;for(var n in t)t[d](n)&&a(e,n,C(t[n]))};e[B]=function(){return"Your browser supports SVG.\nYou are running Raphaël "+this.version};var Le=function(e,t){var n=De("path");t.canvas&&t.canvas[y](n);var r=new We(n,t);return r.type="path",ze(r,{fill:"none",stroke:"#000",path:e}),r},Fe=function(e,n,r){var i="linear",o=.5,s=.5,a=e.style;if(n=C(n)[te](le,function(e,t,n){if(i="radial",t&&n){o=K(t),s=K(n);var r=2*(s>.5)-1;D(o-.5,2)+D(s-.5,2)>.25&&(s=O.sqrt(.25-D(o-.5,2))*r+.5)&&.5!=s&&(s=s.toFixed(5)-1e-5*r)}return x}),n=n[P](/\s*\-\s*/),"linear"==i){var l=n.shift();if(l=-K(l),isNaN(l))return null;var p=[0,0,O.cos(l*L/180),O.sin(l*L/180)],c=1/(A(R(p[2]),R(p[3]))||1);p[2]*=c,p[3]*=c,p[2]<0&&(p[0]=-p[2],p[2]=0),p[3]<0&&(p[1]=-p[3],p[3]=0)}var u=Se(n);if(!u)return null;var h=e.getAttribute(j);h=h.match(/^url\(#(.*)\)$/),h&&r.defs.removeChild(f.getElementById(h[1]));var d=De(i+"Gradient");d.id=t(),De(d,"radial"==i?{fx:o,fy:s}:{x1:p[0],y1:p[1],x2:p[2],y2:p[3]}),r.defs[y](d);for(var m=0,g=u[M];m<g;m++){var v=De("stop");De(v,{offset:u[m].offset?u[m].offset:m?"100%":"0%","stop-color":u[m].color||"#fff"}),d[y](v)}return De(e,{fill:"url(#"+d.id+")",opacity:1,"fill-opacity":1}),a.fill=x,a.opacity=1,a.fillOpacity=1,1},qe=function(t){var n=t.getBBox();De(t.pattern,{patternTransform:e.format("translate({0},{1})",n.x,n.y)})},ze=function(n,r){var i={"":[0],none:[0],"-":[3,1],".":[1,1],"-.":[3,1,1,1],"-..":[3,1,1,1,1,1],". ":[1,3],"- ":[4,3],"--":[8,3],"- .":[4,3,1,3],"--.":[8,3,1,3],"--..":[8,3,1,3,1,3]},o=n.node,s=n.attrs,l=n.rotate(),c=function(e,t){if(t=i[_.call(t)]){for(var n=e.attrs["stroke-width"]||"1",s={round:n,square:n,butt:0}[e.attrs["stroke-linecap"]||r["stroke-linecap"]]||0,a=[],l=t[M];l--;)a[l]=t[l]*n+(l%2?1:-1)*s;De(o,{"stroke-dasharray":a[N](",")})}};r[d]("rotation")&&(l=r.rotation);var u=C(l)[P](p);u.length-1?(u[1]=+u[1],u[2]=+u[2]):u=null,K(l)&&n.rotate(0,!0);for(var h in r)if(r[d](h)){if(!Z[d](h))continue;var m=r[h];switch(s[h]=m,h){case"blur":n.blur(m);break;case"rotation":n.rotate(m,!0);break;case"href":case"title":case"target":var g=o.parentNode;if("a"!=_.call(g.tagName)){var v=De("a");g.insertBefore(v,o),v[y](o),g=v}"target"==h&&"blank"==m?g.setAttributeNS(n.paper.xlink,"show","new"):g.setAttributeNS(n.paper.xlink,h,m);break;case"cursor":o.style.cursor=m;break;case"clip-rect":var b=C(m)[P](p);if(4==b[M]){n.clip&&n.clip.parentNode.parentNode.removeChild(n.clip.parentNode);var E=De("clipPath"),T=De("rect");E.id=t(),De(T,{x:b[0],y:b[1],width:b[2],height:b[3]}),E[y](T),n.paper.defs[y](E),De(o,{"clip-path":"url(#"+E.id+")"}),n.clip=T}if(!m){var S=f.getElementById(o.getAttribute("clip-path")[te](/(^url\(#|\)$)/g,x));S&&S.parentNode.removeChild(S),De(o,{"clip-path":x}),delete n.clip}break;case"path":"path"==n.type&&De(o,{d:m?s.path=be(m):"M0,0"});break;case"width":if(a(o,h,m),!s.fx)break;h="x",m=s.x;case"x":s.fx&&(m=-s.x-(s.width||0));case"rx":if("rx"==h&&"rect"==n.type)break;case"cx":u&&("x"==h||"cx"==h)&&(u[1]+=m-s[h]),a(o,h,m),n.pattern&&qe(n);break;case"height":if(a(o,h,m),!s.fy)break;h="y",m=s.y;case"y":s.fy&&(m=-s.y-(s.height||0));case"ry":if("ry"==h&&"rect"==n.type)break;case"cy":u&&("y"==h||"cy"==h)&&(u[2]+=m-s[h]),a(o,h,m),n.pattern&&qe(n);break;case"r":"rect"==n.type?De(o,{rx:m,ry:m}):a(o,h,m);break;case"src":"image"==n.type&&o.setAttributeNS(n.paper.xlink,"href",m);break;case"stroke-width":o.style.strokeWidth=m,a(o,h,m),s["stroke-dasharray"]&&c(n,s["stroke-dasharray"]);break;case"stroke-dasharray":c(n,m);break;case"translation":var k=C(m)[P](p);k[0]=+k[0]||0,k[1]=+k[1]||0,u&&(u[1]+=k[0],u[2]+=k[1]),St.call(n,k[0],k[1]);break;case"scale":k=C(m)[P](p),n.scale(+k[0]||1,+k[1]||+k[0]||1,isNaN(K(k[2]))?null:+k[2],isNaN(K(k[3]))?null:+k[3]);break;case j:var O=C(m).match(U);if(O){E=De("pattern");var A=De("image");E.id=t(),De(E,{x:0,y:0,patternUnits:"userSpaceOnUse",height:1,width:1}),De(A,{x:0,y:0}),A.setAttributeNS(n.paper.xlink,"href",O[1]),E[y](A);var I=f.createElement("img");I.style.cssText="position:absolute;left:-9999em;top-9999em",I.onload=function(){De(E,{width:this.offsetWidth,height:this.offsetHeight}),De(A,{width:this.offsetWidth,height:this.offsetHeight}),f.body.removeChild(this),n.paper.safari()},f.body[y](I),I.src=O[1],n.paper.defs[y](E),o.style.fill="url(#"+E.id+")",De(o,{fill:"url(#"+E.id+")"}),n.pattern=E,n.pattern&&qe(n);break}var R=e.getRGB(m);if(R.error){if(({circle:1,ellipse:1}[d](n.type)||"r"!=C(m).charAt())&&Fe(o,m,n.paper)){s.gradient=m,s.fill="none";break}}else delete r.gradient,delete s.gradient,!e.is(s.opacity,"undefined")&&e.is(r.opacity,"undefined")&&De(o,{opacity:s.opacity}),!e.is(s["fill-opacity"],"undefined")&&e.is(r["fill-opacity"],"undefined")&&De(o,{"fill-opacity":s["fill-opacity"]});R[d]("opacity")&&De(o,{"fill-opacity":R.opacity>1?R.opacity/100:R.opacity});case"stroke":R=e.getRGB(m),a(o,h,R.hex),"stroke"==h&&R[d]("opacity")&&De(o,{"stroke-opacity":R.opacity>1?R.opacity/100:R.opacity});break;case"gradient":(({circle:1,ellipse:1})[d](n.type)||"r"!=C(m).charAt())&&Fe(o,m,n.paper);break;case"opacity":s.gradient&&!s[d]("stroke-opacity")&&De(o,{"stroke-opacity":m>1?m/100:m});case"fill-opacity":if(s.gradient){var D=f.getElementById(o.getAttribute(j)[te](/^url\(#|\)$/g,x));if(D){var L=D.getElementsByTagName("stop");a(L[L[M]-1],"stop-opacity",m)}break}default:"font-size"==h&&(m=X(m,10)+"px");var F=h[te](/(\-.)/g,function(e){return Q.call(e.substring(1))});o.style[F]=m,a(o,h,m)}}je(n,r),u?n.rotate(u.join(w)):K(l)&&n.rotate(l,!0)},Be=1.2,je=function(t,n){if("text"==t.type&&(n[d]("text")||n[d]("font")||n[d]("font-size")||n[d]("x")||n[d]("y"))){var r=t.attrs,i=t.node,o=i.firstChild?X(f.defaultView.getComputedStyle(i.firstChild,x).getPropertyValue("font-size"),10):10;if(n[d]("text")){for(r.text=n.text;i.firstChild;)i.removeChild(i.firstChild);for(var s=C(n.text)[P]("\n"),a=0,l=s[M];a<l;a++)if(s[a]){var p=De("tspan");a&&De(p,{dy:o*Be,x:r.x}),p[y](f.createTextNode(s[a])),i[y](p)}}else for(s=i.getElementsByTagName("tspan"),a=0,l=s[M];a<l;a++)a&&De(s[a],{dy:o*Be,x:r.x});De(i,{y:r.y});var c=t.getBBox(),u=r.y-(c.y+c.height/2);u&&e.is(u,"finite")&&De(i,{y:r.y+u})}},We=function(t,n){this[0]=t,this.id=e._oid++,this.node=t,t.raphael=this,this.paper=n,this.attrs=this.attrs||{},this.transformations=[],this._={tx:0,ty:0,rt:{deg:0,cx:0,cy:0},sx:1,sy:1},!n.bottom&&(n.bottom=this),this.prev=n.top,n.top&&(n.top.next=this),n.top=this,this.next=null},He=We[h];We[h].rotate=function(t,n,r){if(this.removed)return this;if(null==t)return this._.rt.cx?[this._.rt.deg,this._.rt.cx,this._.rt.cy][N](w):this._.rt.deg;var i=this.getBBox();return t=C(t)[P](p),t[M]-1&&(n=K(t[1]),r=K(t[2])),t=K(t[0]),null!=n&&n!==!1?this._.rt.deg=t:this._.rt.deg+=t,null==r&&(n=null),this._.rt.cx=n,this._.rt.cy=r,n=null==n?i.x+i.width/2:n,r=null==r?i.y+i.height/2:r,this._.rt.deg?(this.transformations[0]=e.format("rotate({0} {1} {2})",this._.rt.deg,n,r),this.clip&&De(this.clip,{transform:e.format("rotate({0} {1} {2})",-this._.rt.deg,n,r)})):(this.transformations[0]=x,this.clip&&De(this.clip,{transform:x})),De(this.node,{transform:this.transformations[N](w)}),this},We[h].hide=function(){return!this.removed&&(this.node.style.display="none"),this},We[h].show=function(){return!this.removed&&(this.node.style.display=""),this},We[h].remove=function(){if(!this.removed){Me(this,this.paper),this.node.parentNode.removeChild(this.node);for(var e in this)delete this[e];this.removed=!0}},We[h].getBBox=function(){if(this.removed)return this;if("path"==this.type)return ge(this.attrs.path);if("none"==this.node.style.display){this.show();var e=!0}var t={};try{t=this.node.getBBox()}catch(e){}finally{t=t||{}}if("text"==this.type){t={x:t.x,y:1/0,width:0,height:0};for(var n=0,r=this.node.getNumberOfChars();n<r;n++){var i=this.node.getExtentOfChar(n);i.y<t.y&&(t.y=i.y),i.y+i.height-t.y>t.height&&(t.height=i.y+i.height-t.y),i.x+i.width-t.x>t.width&&(t.width=i.x+i.width-t.x)}}return e&&this.hide(),t},We[h].attr=function(t,n){if(this.removed)return this;if(null==t){var r={};for(var i in this.attrs)this.attrs[d](i)&&(r[i]=this.attrs[i]);return this._.rt.deg&&(r.rotation=this.rotate()),(1!=this._.sx||1!=this._.sy)&&(r.scale=this.scale()),r.gradient&&"none"==r.fill&&(r.fill=r.gradient)&&delete r.gradient,r}if(null==n&&e.is(t,q))return"translation"==t?St.call(this):"rotation"==t?this.rotate():"scale"==t?this.scale():t==j&&"none"==this.attrs.fill&&this.attrs.gradient?this.attrs.gradient:this.attrs[t];if(null==n&&e.is(t,z)){for(var o={},s=0,a=t.length;s<a;s++)o[t[s]]=this.attr(t[s]);return o}if(null!=n){var l={};l[t]=n}else null!=t&&e.is(t,"object")&&(l=t);for(var p in this.paper.customAttributes)if(this.paper.customAttributes[d](p)&&l[d](p)&&e.is(this.paper.customAttributes[p],"function")){var c=this.paper.customAttributes[p].apply(this,[][E](l[p]));this.attrs[p]=l[p];for(var u in c)c[d](u)&&(l[u]=c[u])}return ze(this,l),this},We[h].toFront=function(){if(this.removed)return this;this.node.parentNode[y](this.node);var e=this.paper;return e.top!=this&&_e(this,e),this},We[h].toBack=function(){if(this.removed)return this;if(this.node.parentNode.firstChild!=this.node){this.node.parentNode.insertBefore(this.node,this.node.parentNode.firstChild),Oe(this,this.paper);this.paper}return this},We[h].insertAfter=function(e){if(this.removed)return this;var t=e.node||e[e.length-1].node;return t.nextSibling?t.parentNode.insertBefore(this.node,t.nextSibling):t.parentNode[y](this.node),Ae(this,e,this.paper),this},We[h].insertBefore=function(e){if(this.removed)return this;var t=e.node||e[0].node;return t.parentNode.insertBefore(this.node,t),Ie(this,e,this.paper),this},We[h].blur=function(e){var n=this;if(0!==+e){var r=De("filter"),i=De("feGaussianBlur");n.attrs.blur=e,r.id=t(),De(i,{stdDeviation:+e||1.5}),r.appendChild(i),n.paper.defs.appendChild(r),n._blur=r,De(n.node,{filter:"url(#"+r.id+")"})}else n._blur&&(n._blur.parentNode.removeChild(n._blur),delete n._blur,delete n.attrs.blur),n.node.removeAttribute("filter")};var Ue=function(e,t,n,r){var i=De("circle");e.canvas&&e.canvas[y](i);var o=new We(i,e);return o.attrs={cx:t,cy:n,r:r,fill:"none",stroke:"#000"},o.type="circle",De(i,o.attrs),o},Ve=function(e,t,n,r,i,o){var s=De("rect");e.canvas&&e.canvas[y](s);var a=new We(s,e);return a.attrs={x:t,y:n,width:r,height:i,r:o||0,rx:o||0,ry:o||0,fill:"none",stroke:"#000"},a.type="rect",De(s,a.attrs),a},Ge=function(e,t,n,r,i){var o=De("ellipse");e.canvas&&e.canvas[y](o);var s=new We(o,e);return s.attrs={cx:t,cy:n,rx:r,ry:i,fill:"none",stroke:"#000"},s.type="ellipse",De(o,s.attrs),s},$e=function(e,t,n,r,i,o){var s=De("image");De(s,{x:n,y:r,width:i,height:o,preserveAspectRatio:"none"}),s.setAttributeNS(e.xlink,"href",t),e.canvas&&e.canvas[y](s);var a=new We(s,e);return a.attrs={x:n,y:r,width:i,height:o,src:t},a.type="image",a},Ye=function(e,t,n,r){var i=De("text");De(i,{x:t,y:n,"text-anchor":"middle"}),e.canvas&&e.canvas[y](i);var o=new We(i,e);return o.attrs={x:t,y:n,"text-anchor":"middle",text:r,font:Z.font,stroke:"none",fill:"#000"},o.type="text",ze(o,o.attrs),o},Ke=function(e,t){return this.width=e||this.width,this.height=t||this.height,a(this.canvas,"width",this.width),a(this.canvas,"height",this.height),this},Xe=function(){var t=ke[b](0,arguments),n=t&&t.container,r=t.x,i=t.y,o=t.width,s=t.height;if(!n)throw new Error("SVG container not found.");var a=De("svg");return r=r||0,i=i||0,o=o||512,s=s||342,De(a,{xmlns:"http://www.w3.org/2000/svg",version:1.1,width:o,height:s}),1==n?(a.style.cssText="position:absolute;left:"+r+"px;top:"+i+"px",f.body[y](a)):n.firstChild?n.insertBefore(a,n.firstChild):n[y](a),n=new v,n.width=o,n.height=s,n.canvas=a,Ne.call(n,n,e.fn),n.clear(),n};l.clear=function(){for(var e=this.canvas;e.firstChild;)e.removeChild(e.firstChild);this.bottom=this.top=null,(this.desc=De("desc"))[y](f.createTextNode("Created with Raphaël")),e[y](this.desc),e[y](this.defs=De("defs"))},l.remove=function(){this.canvas.parentNode&&this.canvas.parentNode.removeChild(this.canvas);for(var e in this)this[e]=Re(e)}}if(e.vml){var Je={M:"m",L:"l",C:"c",Z:"x",m:"t",l:"r",c:"v",z:"x"},Qe=/([clmz]),?([^clmz]*)/gi,Ze=/ progid:\S+Blur\([^\)]+\)/g,et=/-?[^,\s-]+/g,tt=1e3+w+1e3,nt=10,rt={path:1,rect:1},it=function(e){var t=/[ahqstv]/gi,n=be;if(C(e).match(t)&&(n=Pe),t=/[clmz]/g,n==be&&!C(e).match(t)){var r=C(e)[te](Qe,function(e,t,n){var r=[],i="m"==_.call(t),o=Je[t];return n[te](et,function(e){i&&2==r[M]&&(o+=r+Je["m"==t?"l":"L"],r=[]),r[H](Y(e*nt))}),o+r});return r}var i,o,s=n(e);r=[];for(var a=0,l=s[M];a<l;a++){i=s[a],o=_.call(s[a][0]),"z"==o&&(o="x");for(var p=1,c=i[M];p<c;p++)o+=Y(i[p]*nt)+(p!=c-1?",":x);r[H](o)}return r[N](w)};e[B]=function(){return"Your browser doesn’t support SVG. Falling down to VML.\nYou are running Raphaël "+this.version},Le=function(e,t){var n=ot("group");n.style.cssText="position:absolute;left:0;top:0;width:"+t.width+"px;height:"+t.height+"px",n.coordsize=t.coordsize,n.coordorigin=t.coordorigin;var r=ot("shape"),i=r.style;i.width=t.width+"px",i.height=t.height+"px",r.coordsize=tt,r.coordorigin=t.coordorigin,n[y](r);var o=new We(r,n,t),s={fill:"none",stroke:"#000"};return e&&(s.path=e),o.type="path",o.path=[],o.Path=x,ze(o,s),t.canvas[y](n),o},ze=function(t,n){t.attrs=t.attrs||{};var i,o=t.node,s=t.attrs,a=o.style,l=(n.x!=s.x||n.y!=s.y||n.width!=s.width||n.height!=s.height||n.r!=s.r)&&"rect"==t.type,c=t;for(var u in n)n[d](u)&&(s[u]=n[u]);if(l&&(s.path=r(s.x,s.y,s.width,s.height,s.r),t.X=s.x,t.Y=s.y,t.W=s.width,t.H=s.height),n.href&&(o.href=n.href),n.title&&(o.title=n.title),n.target&&(o.target=n.target),n.cursor&&(a.cursor=n.cursor),"blur"in n&&t.blur(n.blur),(n.path&&"path"==t.type||l)&&(o.path=it(s.path)),null!=n.rotation&&t.rotate(n.rotation,!0),n.translation&&(i=C(n.translation)[P](p),St.call(t,i[0],i[1]),null!=t._.rt.cx&&(t._.rt.cx+=+i[0],t._.rt.cy+=+i[1],t.setBox(t.attrs,i[0],i[1]))),n.scale&&(i=C(n.scale)[P](p),t.scale(+i[0]||1,+i[1]||+i[0]||1,+i[2]||null,+i[3]||null)),"clip-rect"in n){var h=C(n["clip-rect"])[P](p);if(4==h[M]){h[2]=+h[2]+ +h[0],h[3]=+h[3]+ +h[1];var m=o.clipRect||f.createElement("div"),g=m.style,v=o.parentNode;g.clip=e.format("rect({1}px {2}px {3}px {0}px)",h),o.clipRect||(g.position="absolute",g.top=0,g.left=0,g.width=t.paper.width+"px",g.height=t.paper.height+"px",v.parentNode.insertBefore(m,v),m[y](v),o.clipRect=m)}n["clip-rect"]||o.clipRect&&(o.clipRect.style.clip=x)}if("image"==t.type&&n.src&&(o.src=n.src),"image"==t.type&&n.opacity&&(o.filterOpacity=J+".Alpha(opacity="+100*n.opacity+")",a.filter=(o.filterMatrix||x)+(o.filterOpacity||x)),n.font&&(a.font=n.font),n["font-family"]&&(a.fontFamily='"'+n["font-family"][P](",")[0][te](/^['"]+|['"]+$/g,x)+'"'),n["font-size"]&&(a.fontSize=n["font-size"]),n["font-weight"]&&(a.fontWeight=n["font-weight"]),n["font-style"]&&(a.fontStyle=n["font-style"]),null!=n.opacity||null!=n["stroke-width"]||null!=n.fill||null!=n.stroke||null!=n["stroke-width"]||null!=n["stroke-opacity"]||null!=n["fill-opacity"]||null!=n["stroke-dasharray"]||null!=n["stroke-miterlimit"]||null!=n["stroke-linejoin"]||null!=n["stroke-linecap"]){o=t.shape||o;var b=o.getElementsByTagName(j)&&o.getElementsByTagName(j)[0],E=!1;if(!b&&(E=b=ot(j)),"fill-opacity"in n||"opacity"in n){var T=((+s["fill-opacity"]+1||2)-1)*((+s.opacity+1||2)-1)*((+e.getRGB(n.fill).o+1||2)-1);T=I(A(T,0),1),b.opacity=T}if(n.fill&&(b.on=!0),null!=b.on&&"none"!=n.fill||(b.on=!1),b.on&&n.fill){var w=n.fill.match(U);w?(b.src=w[1],b.type="tile"):(b.color=e.getRGB(n.fill).hex,b.src=x,b.type="solid",e.getRGB(n.fill).error&&(c.type in{circle:1,ellipse:1}||"r"!=C(n.fill).charAt())&&Fe(c,n.fill)&&(s.fill="none",s.gradient=n.fill))}E&&o[y](b);var S=o.getElementsByTagName("stroke")&&o.getElementsByTagName("stroke")[0],k=!1;!S&&(k=S=ot("stroke")),(n.stroke&&"none"!=n.stroke||n["stroke-width"]||null!=n["stroke-opacity"]||n["stroke-dasharray"]||n["stroke-miterlimit"]||n["stroke-linejoin"]||n["stroke-linecap"])&&(S.on=!0),("none"==n.stroke||null==S.on||0==n.stroke||0==n["stroke-width"])&&(S.on=!1);var N=e.getRGB(n.stroke);S.on&&n.stroke&&(S.color=N.hex),T=((+s["stroke-opacity"]+1||2)-1)*((+s.opacity+1||2)-1)*((+N.o+1||2)-1);var _=.75*(K(n["stroke-width"])||1);if(T=I(A(T,0),1),null==n["stroke-width"]&&(_=s["stroke-width"]),n["stroke-width"]&&(S.weight=_),_&&_<1&&(T*=_)&&(S.weight=1),S.opacity=T,n["stroke-linejoin"]&&(S.joinstyle=n["stroke-linejoin"]||"miter"),S.miterlimit=n["stroke-miterlimit"]||8,n["stroke-linecap"]&&(S.endcap="butt"==n["stroke-linecap"]?"flat":"square"==n["stroke-linecap"]?"square":"round"),n["stroke-dasharray"]){var O={"-":"shortdash",".":"shortdot","-.":"shortdashdot","-..":"shortdashdotdot",". ":"dot","- ":"dash","--":"longdash","- .":"dashdot","--.":"longdashdot","--..":"longdashdotdot"};S.dashstyle=O[d](n["stroke-dasharray"])?O[n["stroke-dasharray"]]:x}k&&o[y](S)}if("text"==c.type)switch(a=c.paper.span.style,s.font&&(a.font=s.font),s["font-family"]&&(a.fontFamily=s["font-family"]),s["font-size"]&&(a.fontSize=s["font-size"]),s["font-weight"]&&(a.fontWeight=s["font-weight"]),s["font-style"]&&(a.fontStyle=s["font-style"]),c.node.string&&(c.paper.span.innerHTML=C(c.node.string)[te](/</g,"&#60;")[te](/&/g,"&#38;")[te](/\n/g,"<br>")),c.W=s.w=c.paper.span.offsetWidth,c.H=s.h=c.paper.span.offsetHeight,c.X=s.x,c.Y=s.y+Y(c.H/2),s["text-anchor"]){case"start":c.node.style["v-text-align"]="left",c.bbx=Y(c.W/2);break;case"end":c.node.style["v-text-align"]="right",c.bbx=-Y(c.W/2);break;default:c.node.style["v-text-align"]="center"}},Fe=function(e,t){e.attrs=e.attrs||{};var n,r=(e.attrs,"linear"),i=".5 .5";if(e.attrs.gradient=t,t=C(t)[te](le,function(e,t,n){return r="radial",t&&n&&(t=K(t),n=K(n),D(t-.5,2)+D(n-.5,2)>.25&&(n=O.sqrt(.25-D(t-.5,2))*(2*(n>.5)-1)+.5),i=t+w+n),x}),t=t[P](/\s*\-\s*/),"linear"==r){var o=t.shift();if(o=-K(o),isNaN(o))return null}var s=Se(t);if(!s)return null;if(e=e.shape||e.node,n=e.getElementsByTagName(j)[0]||ot(j),!n.parentNode&&e.appendChild(n),s[M]){n.on=!0,n.method="none",n.color=s[0].color,n.color2=s[s[M]-1].color;for(var a=[],l=0,p=s[M];l<p;l++)s[l].offset&&a[H](s[l].offset+w+s[l].color);n.colors&&(n.colors.value=a[M]?a[N]():"0% "+n.color),"radial"==r?(n.type="gradientradial",n.focus="100%",n.focussize=i,n.focusposition=i):(n.type="gradient",n.angle=(270-o)%360)}return 1},We=function(t,n,r){this[0]=t,this.id=e._oid++,this.node=t,t.raphael=this,this.X=0,this.Y=0,this.attrs={},this.Group=n,this.paper=r,this._={tx:0,ty:0,rt:{deg:0},sx:1,sy:1},!r.bottom&&(r.bottom=this),this.prev=r.top,r.top&&(r.top.next=this),r.top=this,this.next=null},He=We[h],He.rotate=function(e,t,n){return this.removed?this:null==e?this._.rt.cx?[this._.rt.deg,this._.rt.cx,this._.rt.cy][N](w):this._.rt.deg:(e=C(e)[P](p),e[M]-1&&(t=K(e[1]),n=K(e[2])),e=K(e[0]),null!=t?this._.rt.deg=e:this._.rt.deg+=e,null==n&&(t=null),this._.rt.cx=t,this._.rt.cy=n,this.setBox(this.attrs,t,n),this.Group.style.rotation=this._.rt.deg,this)},He.setBox=function(e,t,n){if(this.removed)return this;var r=this.Group.style,i=this.shape&&this.shape.style||this.node.style;
e=e||{};for(var o in e)e[d](o)&&(this.attrs[o]=e[o]);t=t||this._.rt.cx,n=n||this._.rt.cy;var s,a,l,p,c=this.attrs;switch(this.type){case"circle":s=c.cx-c.r,a=c.cy-c.r,l=p=2*c.r;break;case"ellipse":s=c.cx-c.rx,a=c.cy-c.ry,l=2*c.rx,p=2*c.ry;break;case"image":s=+c.x,a=+c.y,l=c.width||0,p=c.height||0;break;case"text":this.textpath.v=["m",Y(c.x),", ",Y(c.y-2),"l",Y(c.x)+1,", ",Y(c.y-2)][N](x),s=c.x-Y(this.W/2),a=c.y-this.H/2,l=this.W,p=this.H;break;case"rect":case"path":if(this.attrs.path){var u=ge(this.attrs.path);s=u.x,a=u.y,l=u.width,p=u.height}else s=0,a=0,l=this.paper.width,p=this.paper.height;break;default:s=0,a=0,l=this.paper.width,p=this.paper.height}t=null==t?s+l/2:t,n=null==n?a+p/2:n;var h,f=t-this.paper.width/2,m=n-this.paper.height/2;r.left!=(h=f+"px")&&(r.left=h),r.top!=(h=m+"px")&&(r.top=h),this.X=rt[d](this.type)?-f:s,this.Y=rt[d](this.type)?-m:a,this.W=l,this.H=p,rt[d](this.type)?(i.left!=(h=-f*nt+"px")&&(i.left=h),i.top!=(h=-m*nt+"px")&&(i.top=h)):"text"==this.type?(i.left!=(h=-f+"px")&&(i.left=h),i.top!=(h=-m+"px")&&(i.top=h)):(r.width!=(h=this.paper.width+"px")&&(r.width=h),r.height!=(h=this.paper.height+"px")&&(r.height=h),i.left!=(h=s-f+"px")&&(i.left=h),i.top!=(h=a-m+"px")&&(i.top=h),i.width!=(h=l+"px")&&(i.width=h),i.height!=(h=p+"px")&&(i.height=h))},He.hide=function(){return!this.removed&&(this.Group.style.display="none"),this},He.show=function(){return!this.removed&&(this.Group.style.display="block"),this},He.getBBox=function(){return this.removed?this:rt[d](this.type)?ge(this.attrs.path):{x:this.X+(this.bbx||0),y:this.Y,width:this.W,height:this.H}},He.remove=function(){if(!this.removed){Me(this,this.paper),this.node.parentNode.removeChild(this.node),this.Group.parentNode.removeChild(this.Group),this.shape&&this.shape.parentNode.removeChild(this.shape);for(var e in this)delete this[e];this.removed=!0}},He.attr=function(t,n){if(this.removed)return this;if(null==t){var r={};for(var i in this.attrs)this.attrs[d](i)&&(r[i]=this.attrs[i]);return this._.rt.deg&&(r.rotation=this.rotate()),(1!=this._.sx||1!=this._.sy)&&(r.scale=this.scale()),r.gradient&&"none"==r.fill&&(r.fill=r.gradient)&&delete r.gradient,r}if(null==n&&e.is(t,"string"))return"translation"==t?St.call(this):"rotation"==t?this.rotate():"scale"==t?this.scale():t==j&&"none"==this.attrs.fill&&this.attrs.gradient?this.attrs.gradient:this.attrs[t];if(this.attrs&&null==n&&e.is(t,z)){var o,s={};for(i=0,o=t[M];i<o;i++)s[t[i]]=this.attr(t[i]);return s}var a;if(null!=n&&(a={},a[t]=n),null==n&&e.is(t,"object")&&(a=t),a){for(var l in this.paper.customAttributes)if(this.paper.customAttributes[d](l)&&a[d](l)&&e.is(this.paper.customAttributes[l],"function")){var p=this.paper.customAttributes[l].apply(this,[][E](a[l]));this.attrs[l]=a[l];for(var c in p)p[d](c)&&(a[c]=p[c])}a.text&&"text"==this.type&&(this.node.string=a.text),ze(this,a),a.gradient&&({circle:1,ellipse:1}[d](this.type)||"r"!=C(a.gradient).charAt())&&Fe(this,a.gradient),(!rt[d](this.type)||this._.rt.deg)&&this.setBox(this.attrs)}return this},He.toFront=function(){return!this.removed&&this.Group.parentNode[y](this.Group),this.paper.top!=this&&_e(this,this.paper),this},He.toBack=function(){return this.removed?this:(this.Group.parentNode.firstChild!=this.Group&&(this.Group.parentNode.insertBefore(this.Group,this.Group.parentNode.firstChild),Oe(this,this.paper)),this)},He.insertAfter=function(e){return this.removed?this:(e.constructor==kt&&(e=e[e.length-1]),e.Group.nextSibling?e.Group.parentNode.insertBefore(this.Group,e.Group.nextSibling):e.Group.parentNode[y](this.Group),Ae(this,e,this.paper),this)},He.insertBefore=function(e){return this.removed?this:(e.constructor==kt&&(e=e[0]),e.Group.parentNode.insertBefore(this.Group,e.Group),Ie(this,e,this.paper),this)},He.blur=function(t){var n=this.node.runtimeStyle,r=n.filter;r=r.replace(Ze,x),0!==+t?(this.attrs.blur=t,n.filter=r+w+J+".Blur(pixelradius="+(+t||1.5)+")",n.margin=e.format("-{0}px 0 0 -{0}px",Y(+t||1.5))):(n.filter=r,n.margin=0,delete this.attrs.blur)},Ue=function(e,t,n,r){var i=ot("group"),o=ot("oval");o.style;i.style.cssText="position:absolute;left:0;top:0;width:"+e.width+"px;height:"+e.height+"px",i.coordsize=tt,i.coordorigin=e.coordorigin,i[y](o);var s=new We(o,i,e);return s.type="circle",ze(s,{stroke:"#000",fill:"none"}),s.attrs.cx=t,s.attrs.cy=n,s.attrs.r=r,s.setBox({x:t-r,y:n-r,width:2*r,height:2*r}),e.canvas[y](i),s},Ve=function(e,t,n,i,o,s){var a=r(t,n,i,o,s),l=e.path(a),p=l.attrs;return l.X=p.x=t,l.Y=p.y=n,l.W=p.width=i,l.H=p.height=o,p.r=s,p.path=a,l.type="rect",l},Ge=function(e,t,n,r,i){var o=ot("group"),s=ot("oval");s.style;o.style.cssText="position:absolute;left:0;top:0;width:"+e.width+"px;height:"+e.height+"px",o.coordsize=tt,o.coordorigin=e.coordorigin,o[y](s);var a=new We(s,o,e);return a.type="ellipse",ze(a,{stroke:"#000"}),a.attrs.cx=t,a.attrs.cy=n,a.attrs.rx=r,a.attrs.ry=i,a.setBox({x:t-r,y:n-i,width:2*r,height:2*i}),e.canvas[y](o),a},$e=function(e,t,n,r,i,o){var s=ot("group"),a=ot("image");s.style.cssText="position:absolute;left:0;top:0;width:"+e.width+"px;height:"+e.height+"px",s.coordsize=tt,s.coordorigin=e.coordorigin,a.src=t,s[y](a);var l=new We(a,s,e);return l.type="image",l.attrs.src=t,l.attrs.x=n,l.attrs.y=r,l.attrs.w=i,l.attrs.h=o,l.setBox({x:n,y:r,width:i,height:o}),e.canvas[y](s),l},Ye=function(t,n,r,i){var o=ot("group"),s=ot("shape"),a=s.style,l=ot("path"),p=(l.style,ot("textpath"));o.style.cssText="position:absolute;left:0;top:0;width:"+t.width+"px;height:"+t.height+"px",o.coordsize=tt,o.coordorigin=t.coordorigin,l.v=e.format("m{0},{1}l{2},{1}",Y(10*n),Y(10*r),Y(10*n)+1),l.textpathok=!0,a.width=t.width,a.height=t.height,p.string=C(i),p.on=!0,s[y](p),s[y](l),o[y](s);var c=new We(p,o,t);return c.shape=s,c.textpath=l,c.type="text",c.attrs.text=i,c.attrs.x=n,c.attrs.y=r,c.attrs.w=1,c.attrs.h=1,ze(c,{font:Z.font,stroke:"none",fill:"#000"}),c.setBox(),t.canvas[y](o),c},Ke=function(e,t){var n=this.canvas.style;return e==+e&&(e+="px"),t==+t&&(t+="px"),n.width=e,n.height=t,n.clip="rect(0 "+e+" "+t+" 0)",this};var ot;f.createStyleSheet().addRule(".rvml","behavior:url(#default#VML)");try{!f.namespaces.rvml&&f.namespaces.add("rvml","urn:schemas-microsoft-com:vml"),ot=function(e){return f.createElement("<rvml:"+e+' class="rvml">')}}catch(e){ot=function(e){return f.createElement("<"+e+' xmlns="urn:schemas-microsoft.com:vml" class="rvml">')}}Xe=function(){var t=ke[b](0,arguments),n=t.container,r=t.height,i=t.width,o=t.x,s=t.y;if(!n)throw new Error("VML container not found.");var a=new v,l=a.canvas=f.createElement("div"),p=l.style;return o=o||0,s=s||0,i=i||512,r=r||342,i==+i&&(i+="px"),r==+r&&(r+="px"),a.width=1e3,a.height=1e3,a.coordsize=1e3*nt+w+1e3*nt,a.coordorigin="0 0",a.span=f.createElement("span"),a.span.style.cssText="position:absolute;left:-9999em;top:-9999em;padding:0;margin:0;line-height:1;display:inline;",l[y](a.span),p.cssText=e.format("top:0;left:0;width:{0};height:{1};display:inline-block;position:relative;clip:rect(0 {0} {1} 0);overflow:hidden",i,r),1==n?(f.body[y](l),p.left=o+"px",p.top=s+"px",p.position="absolute"):n.firstChild?n.insertBefore(l,n.firstChild):n[y](l),Ne.call(a,a,e.fn),a},l.clear=function(){this.canvas.innerHTML=x,this.span=f.createElement("span"),this.span.style.cssText="position:absolute;left:-9999em;top:-9999em;padding:0;margin:0;line-height:1;display:inline;",this.canvas[y](this.span),this.bottom=this.top=null},l.remove=function(){this.canvas.parentNode.removeChild(this.canvas);for(var e in this)this[e]=Re(e);return!0}}var st=navigator.userAgent.match(/Version\/(.*?)\s/);"Apple Computer, Inc."==navigator.vendor&&(st&&st[1]<4||"iP"==navigator.platform.slice(0,2))?l.safari=function(){var e=this.rect(-99,-99,this.width+99,this.height+99).attr({stroke:"none"});m.setTimeout(function(){e.remove()})}:l.safari=function(){};for(var at=function(){this.returnValue=!1},lt=function(){return this.originalEvent.preventDefault()},pt=function(){this.cancelBubble=!0},ct=function(){return this.originalEvent.stopPropagation()},ut=function(){return f.addEventListener?function(e,t,n,r){var i=T&&k[t]?k[t]:t,o=function(i){if(T&&k[d](t))for(var o=0,s=i.targetTouches&&i.targetTouches.length;o<s;o++)if(i.targetTouches[o].target==e){var a=i;i=i.targetTouches[o],i.originalEvent=a,i.preventDefault=lt,i.stopPropagation=ct;break}return n.call(r,i)};return e.addEventListener(i,o,!1),function(){return e.removeEventListener(i,o,!1),!0}}:f.attachEvent?function(e,t,n,r){var i=function(e){return e=e||m.event,e.preventDefault=e.preventDefault||at,e.stopPropagation=e.stopPropagation||pt,n.call(r,e)};e.attachEvent("on"+t,i);var o=function(){return e.detachEvent("on"+t,i),!0};return o}:void 0}(),ht=[],dt=function(e){for(var t,n=e.clientX,r=e.clientY,i=f.documentElement.scrollTop||f.body.scrollTop,o=f.documentElement.scrollLeft||f.body.scrollLeft,s=ht.length;s--;){if(t=ht[s],T){for(var a,l=e.touches.length;l--;)if(a=e.touches[l],a.identifier==t.el._drag.id){n=a.clientX,r=a.clientY,(e.originalEvent?e.originalEvent:e).preventDefault();break}}else e.preventDefault();n+=o,r+=i,t.move&&t.move.call(t.move_scope||t.el,n-t.el._drag.x,r-t.el._drag.y,n,r,e)}},ft=function(t){e.unmousemove(dt).unmouseup(ft);for(var n,r=ht.length;r--;)n=ht[r],n.el._drag={},n.end&&n.end.call(n.end_scope||n.start_scope||n.move_scope||n.el,t);ht=[]},mt=S[M];mt--;)!function(t){e[t]=We[h][t]=function(n,r){return e.is(n,"function")&&(this.events=this.events||[],this.events.push({name:t,f:n,unbind:ut(this.shape||this.node||f,t,n,r||this)})),this},e["un"+t]=We[h]["un"+t]=function(e){for(var n=this.events,r=n[M];r--;)if(n[r].name==t&&n[r].f==e)return n[r].unbind(),n.splice(r,1),!n.length&&delete this.events,this;return this}}(S[mt]);He.hover=function(e,t,n,r){return this.mouseover(e,n).mouseout(t,r||n)},He.unhover=function(e,t){return this.unmouseover(e).unmouseout(t)},He.drag=function(t,n,r,i,o,s){return this._drag={},this.mousedown(function(a){(a.originalEvent||a).preventDefault();var l=f.documentElement.scrollTop||f.body.scrollTop,p=f.documentElement.scrollLeft||f.body.scrollLeft;this._drag.x=a.clientX+p,this._drag.y=a.clientY+l,this._drag.id=a.identifier,n&&n.call(o||i||this,a.clientX+p,a.clientY+l,a),!ht.length&&e.mousemove(dt).mouseup(ft),ht.push({el:this,move:t,end:r,move_scope:i,start_scope:o,end_scope:s})}),this},He.undrag=function(t,n,r){for(var i=ht.length;i--;)ht[i].el==this&&ht[i].move==t&&ht[i].end==r&&ht.splice(i++,1);!ht.length&&e.unmousemove(dt).unmouseup(ft)},l.circle=function(e,t,n){return Ue(this,e||0,t||0,n||0)},l.rect=function(e,t,n,r,i){return Ve(this,e||0,t||0,n||0,r||0,i||0)},l.ellipse=function(e,t,n,r){return Ge(this,e||0,t||0,n||0,r||0)},l.path=function(t){return t&&!e.is(t,q)&&!e.is(t[0],z)&&(t+=x),Le(e.format[b](e,arguments),this)},l.image=function(e,t,n,r,i){return $e(this,e||"about:blank",t||0,n||0,r||0,i||0)},l.text=function(e,t,n){return Ye(this,e||0,t||0,C(n))},l.set=function(e){return arguments[M]>1&&(e=Array[h].splice.call(arguments,0,arguments[M])),new kt(e)},l.setSize=Ke,l.top=l.bottom=null,l.raphael=e,He.resetScale=function(){return this.removed?this:(this._.sx=1,this._.sy=1,void(this.attrs.scale="1 1"))},He.scale=function(e,t,n,r){if(this.removed)return this;if(null==e&&null==t)return{x:this._.sx,y:this._.sy,toString:i};t=t||e,!+t&&(t=e);var o,s,l=this.attrs;if(0!=e){var p=this.getBBox(),c=p.x+p.width/2,u=p.y+p.height/2,h=R(e/this._.sx),d=R(t/this._.sy);n=+n||0==n?n:c,r=+r||0==r?r:u;var f=this._.sx>0,m=this._.sy>0,g=~~(e/R(e)),v=~~(t/R(t)),y=h*g,b=d*v,T=this.node.style,C=n+R(c-n)*y*(c>n==f?1:-1),P=r+R(u-r)*b*(u>r==m?1:-1),S=e*g>t*v?d:h;switch(this.type){case"rect":case"image":var k=l.width*h,_=l.height*d;this.attr({height:_,r:l.r*S,width:k,x:C-k/2,y:P-_/2});break;case"circle":case"ellipse":this.attr({rx:l.rx*h,ry:l.ry*d,r:l.r*S,cx:C,cy:P});break;case"text":this.attr({x:C,y:P});break;case"path":for(var O=ye(l.path),A=!0,I=f?y:h,D=m?b:d,L=0,F=O[M];L<F;L++){var q=O[L],z=Q.call(q[0]);if("M"!=z||!A)if(A=!1,"A"==z)q[O[L][M]-2]*=I,q[O[L][M]-1]*=D,q[1]*=h,q[2]*=d,q[5]=+(g+v?!!+q[5]:!+q[5]);else if("H"==z)for(var B=1,j=q[M];B<j;B++)q[B]*=I;else if("V"==z)for(B=1,j=q[M];B<j;B++)q[B]*=D;else for(B=1,j=q[M];B<j;B++)q[B]*=B%2?I:D}var W=ge(O);o=C-W.x-W.width/2,s=P-W.y-W.height/2,O[0][1]+=o,O[0][2]+=s,this.attr({path:O})}this.type in{text:1,image:1}&&(1!=g||1!=v)?this.transformations?(this.transformations[2]="scale("[E](g,",",v,")"),a(this.node,"transform",this.transformations[N](w)),o=g==-1?-l.x-(k||0):l.x,s=v==-1?-l.y-(_||0):l.y,this.attr({x:o,y:s}),l.fx=g-1,l.fy=v-1):(this.node.filterMatrix=J+".Matrix(M11="[E](g,", M12=0, M21=0, M22=",v,", Dx=0, Dy=0, sizingmethod='auto expand', filtertype='bilinear')"),T.filter=(this.node.filterMatrix||x)+(this.node.filterOpacity||x)):this.transformations?(this.transformations[2]=x,a(this.node,"transform",this.transformations[N](w)),l.fx=0,l.fy=0):(this.node.filterMatrix=x,T.filter=(this.node.filterMatrix||x)+(this.node.filterOpacity||x)),l.scale=[e,t,n,r][N](w),this._.sx=e,this._.sy=t}return this},He.clone=function(){if(this.removed)return null;var e=this.attr();return delete e.scale,delete e.translation,this.paper[this.type]().attr(e)};var gt={},vt=function(t,n,r,i,o,s,a,l,p){if(t===r&&n===i&&o===a&&s==l){var c=a-t,u=l-n,h=Math.sqrt(c*c+u*u);if(null==p)return h;var d=p/h;return{start:{x:t,y:n},m:{x:t,y:n},n:{x:a,y:l},end:{x:a,y:l},x:t+d*c,y:n+d*u,alpha:90-180*O.atan(c/u)/L}}var f,m,g=0,v=100,y=[t,n,r,i,o,s,a,l].join(),b=gt[y];if(!b&&(gt[y]=b={data:[]}),b.timer&&clearTimeout(b.timer),b.timer=setTimeout(function(){delete gt[y]},2e3),null!=p){var E=vt(t,n,r,i,o,s,a,l);v=10*~~E}for(var T=0;T<v+1;T++){if(b.data[p]>T?m=b.data[T*v]:(m=e.findDotsAtSegment(t,n,r,i,o,s,a,l,T/v),b.data[T]=m),T&&(g+=D(D(f.x-m.x,2)+D(f.y-m.y,2),.5)),null!=p&&g>=p)return m;f=m}if(null==p)return g},yt=function(t,n){return function(r,i,o){r=Pe(r);for(var s,a,l,p,c,u="",h={},d=0,f=0,m=r.length;f<m;f++){if(l=r[f],"M"==l[0])s=+l[1],a=+l[2];else{if(p=vt(s,a,l[1],l[2],l[3],l[4],l[5],l[6]),d+p>i){if(n&&!h.start){if(c=vt(s,a,l[1],l[2],l[3],l[4],l[5],l[6],i-d),u+=["C",c.start.x,c.start.y,c.m.x,c.m.y,c.x,c.y],o)return u;h.start=u,u=["M",c.x,c.y+"C",c.n.x,c.n.y,c.end.x,c.end.y,l[5],l[6]][N](),d+=p,s=+l[5],a=+l[6];continue}if(!t&&!n)return c=vt(s,a,l[1],l[2],l[3],l[4],l[5],l[6],i-d),{x:c.x,y:c.y,alpha:c.alpha}}d+=p,s=+l[5],a=+l[6]}u+=l}return h.end=u,c=t?d:n?h:e.findDotsAtSegment(s,a,l[1],l[2],l[3],l[4],l[5],l[6],1),c.alpha&&(c={x:c.x,y:c.y,alpha:c.alpha}),c}},bt=yt(1),Et=yt(),Tt=yt(0,1);He.getTotalLength=function(){if("path"==this.type)return this.node.getTotalLength?this.node.getTotalLength():bt(this.attrs.path)},He.getPointAtLength=function(e){if("path"==this.type)return Et(this.attrs.path,e)},He.getSubpath=function(e,t){if("path"==this.type){if(R(this.getTotalLength()-t)<"1e-6")return Tt(this.attrs.path,e).end;var n=Tt(this.attrs.path,t,1);return e?Tt(n,e).end:n}},e.easing_formulas={linear:function(e){return e},"<":function(e){return D(e,3)},">":function(e){return D(e-1,3)+1},"<>":function(e){return e=2*e,e<1?D(e,3)/2:(e-=2,(D(e,3)+2)/2)},backIn:function(e){var t=1.70158;return e*e*((t+1)*e-t)},backOut:function(e){e-=1;var t=1.70158;return e*e*((t+1)*e+t)+1},elastic:function(e){if(0==e||1==e)return e;var t=.3,n=t/4;return D(2,-10*e)*O.sin((e-n)*(2*L)/t)+1},bounce:function(e){var t,n=7.5625,r=2.75;return e<1/r?t=n*e*e:e<2/r?(e-=1.5/r,t=n*e*e+.75):e<2.5/r?(e-=2.25/r,t=n*e*e+.9375):(e-=2.625/r,t=n*e*e+.984375),t}};var xt=[],wt=function(){for(var t=+new Date,n=0;n<xt[M];n++){var r=xt[n];if(!r.stop&&!r.el.removed){var i,o=t-r.start,s=r.ms,a=r.easing,l=r.from,p=r.diff,c=r.to,u=r.t,h=r.el,f={};if(o<s){var m=a(o/s);for(var g in l)if(l[d](g)){switch(ee[g]){case"along":i=m*s*p[g],c.back&&(i=c.len-i);var v=Et(c[g],i);h.translate(p.sx-p.x||0,p.sy-p.y||0),p.x=v.x,p.y=v.y,h.translate(v.x-p.sx,v.y-p.sy),c.rot&&h.rotate(p.r+v.alpha,v.x,v.y);break;case F:i=+l[g]+m*s*p[g];break;case"colour":i="rgb("+[Pt(Y(l[g].r+m*s*p[g].r)),Pt(Y(l[g].g+m*s*p[g].g)),Pt(Y(l[g].b+m*s*p[g].b))][N](",")+")";break;case"path":i=[];for(var y=0,b=l[g][M];y<b;y++){i[y]=[l[g][y][0]];for(var E=1,T=l[g][y][M];E<T;E++)i[y][E]=+l[g][y][E]+m*s*p[g][y][E];i[y]=i[y][N](w)}i=i[N](w);break;case"csv":switch(g){case"translation":var C=m*s*p[g][0]-u.x,P=m*s*p[g][1]-u.y;u.x+=C,u.y+=P,i=C+w+P;break;case"rotation":i=+l[g][0]+m*s*p[g][0],l[g][1]&&(i+=","+l[g][1]+","+l[g][2]);break;case"scale":i=[+l[g][0]+m*s*p[g][0],+l[g][1]+m*s*p[g][1],2 in c[g]?c[g][2]:x,3 in c[g]?c[g][3]:x][N](w);break;case"clip-rect":for(i=[],y=4;y--;)i[y]=+l[g][y]+m*s*p[g][y]}break;default:var S=[].concat(l[g]);for(i=[],y=h.paper.customAttributes[g].length;y--;)i[y]=+S[y]+m*s*p[g][y]}f[g]=i}h.attr(f),h._run&&h._run.call(h)}else c.along&&(v=Et(c.along,c.len*!c.back),h.translate(p.sx-(p.x||0)+v.x-p.sx,p.sy-(p.y||0)+v.y-p.sy),c.rot&&h.rotate(p.r+v.alpha,v.x,v.y)),(u.x||u.y)&&h.translate(-u.x,-u.y),c.scale&&(c.scale+=x),h.attr(c),xt.splice(n--,1)}}e.svg&&h&&h.paper&&h.paper.safari(),xt[M]&&setTimeout(wt)},Ct=function(t,n,r,i,o){var s=r-i;n.timeouts.push(setTimeout(function(){e.is(o,"function")&&o.call(n),n.animate(t,s,t.easing)},i))},Pt=function(e){return A(I(e,255),0)},St=function(e,t){if(null==e)return{x:this._.tx,y:this._.ty,toString:i};switch(this._.tx+=+e,this._.ty+=+t,this.type){case"circle":case"ellipse":this.attr({cx:+e+this.attrs.cx,cy:+t+this.attrs.cy});break;case"rect":case"image":case"text":this.attr({x:+e+this.attrs.x,y:+t+this.attrs.y});break;case"path":var n=ye(this.attrs.path);n[0][1]+=+e,n[0][2]+=+t,this.attr({path:n})}return this};He.animateWith=function(e,t,n,r,i){for(var o=0,s=xt.length;o<s;o++)xt[o].el.id==e.id&&(t.start=xt[o].start);return this.animate(t,n,r,i)},He.animateAlong=o(),He.animateAlongBack=o(1),He.onAnimation=function(e){return this._run=e||0,this},He.animate=function(t,n,r,i){var o=this;if(o.timeouts=o.timeouts||[],!e.is(r,"function")&&r||(i=r||null),o.removed)return i&&i.call(o),o;var a={},l={},c=!1,u={};for(var h in t)if(t[d](h)&&(ee[d](h)||o.paper.customAttributes[d](h)))switch(c=!0,a[h]=o.attr(h),null==a[h]&&(a[h]=Z[h]),l[h]=t[h],ee[h]){case"along":var f=bt(t[h]),m=Et(t[h],f*!!t.back),g=o.getBBox();u[h]=f/n,u.tx=g.x,u.ty=g.y,u.sx=m.x,u.sy=m.y,l.rot=t.rot,l.back=t.back,l.len=f,t.rot&&(u.r=K(o.rotate())||0);break;case F:u[h]=(l[h]-a[h])/n;break;case"colour":a[h]=e.getRGB(a[h]);var v=e.getRGB(l[h]);u[h]={r:(v.r-a[h].r)/n,g:(v.g-a[h].g)/n,b:(v.b-a[h].b)/n};break;case"path":var y=Pe(a[h],l[h]);a[h]=y[0];var b=y[1];u[h]=[];for(var E=0,T=a[h][M];E<T;E++){u[h][E]=[0];for(var x=1,w=a[h][E][M];x<w;x++)u[h][E][x]=(b[E][x]-a[h][E][x])/n}break;case"csv":var S=C(t[h])[P](p),k=C(a[h])[P](p);switch(h){case"translation":a[h]=[0,0],u[h]=[S[0]/n,S[1]/n];break;case"rotation":a[h]=k[1]==S[1]&&k[2]==S[2]?k:[0,S[1],S[2]],u[h]=[(S[0]-a[h][0])/n,0,0];break;case"scale":t[h]=S,a[h]=C(a[h])[P](p),u[h]=[(S[0]-a[h][0])/n,(S[1]-a[h][1])/n,0,0];break;case"clip-rect":for(a[h]=C(a[h])[P](p),u[h]=[],E=4;E--;)u[h][E]=(S[E]-a[h][E])/n}l[h]=S;break;default:for(S=[].concat(t[h]),k=[].concat(a[h]),u[h]=[],E=o.paper.customAttributes[h][M];E--;)u[h][E]=((S[E]||0)-(k[E]||0))/n}if(c){var N=e.easing_formulas[r];if(!N)if(N=C(r).match($),N&&5==N[M]){var _=N;N=function(e){return s(e,+_[1],+_[2],+_[3],+_[4],n)}}else N=function(e){return e};xt.push({start:t.start||+new Date,ms:n,easing:N,from:a,diff:u,to:l,el:o,t:{x:0,y:0}}),e.is(i,"function")&&(o._ac=setTimeout(function(){i.call(o)},n)),1==xt[M]&&setTimeout(wt)}else{var O,A=[];for(var I in t)t[d](I)&&ne.test(I)&&(h={value:t[I]},"from"==I&&(I=0),"to"==I&&(I=100),h.key=X(I,10),A.push(h));for(A.sort(pe),A[0].key&&A.unshift({key:0,value:o.attrs}),E=0,T=A[M];E<T;E++)Ct(A[E].value,o,n/100*A[E].key,n/100*(A[E-1]&&A[E-1].key||0),A[E-1]&&A[E-1].value.callback);O=A[A[M]-1].value.callback,O&&o.timeouts.push(setTimeout(function(){O.call(o)},n))}return this},He.stop=function(){for(var e=0;e<xt.length;e++)xt[e].el.id==this.id&&xt.splice(e--,1);for(e=0,ii=this.timeouts&&this.timeouts.length;e<ii;e++)clearTimeout(this.timeouts[e]);return this.timeouts=[],clearTimeout(this._ac),delete this._ac,this},He.translate=function(e,t){return this.attr({translation:e+" "+t})},He[B]=function(){return"Raphaël’s object"},e.ae=xt;var kt=function(e){if(this.items=[],this[M]=0,this.type="set",e)for(var t=0,n=e[M];t<n;t++)!e[t]||e[t].constructor!=We&&e[t].constructor!=kt||(this[this.items[M]]=this.items[this.items[M]]=e[t],this[M]++)};kt[h][H]=function(){for(var e,t,n=0,r=arguments[M];n<r;n++)e=arguments[n],!e||e.constructor!=We&&e.constructor!=kt||(t=this.items[M],this[t]=this.items[t]=e,this[M]++);return this},kt[h].pop=function(){return delete this[this[M]--],this.items.pop()};for(var Nt in He)He[d](Nt)&&(kt[h][Nt]=function(e){return function(){for(var t=0,n=this.items[M];t<n;t++)this.items[t][e][b](this.items[t],arguments);return this}}(Nt));kt[h].attr=function(t,n){if(t&&e.is(t,z)&&e.is(t[0],"object"))for(var r=0,i=t[M];r<i;r++)this.items[r].attr(t[r]);else for(var o=0,s=this.items[M];o<s;o++)this.items[o].attr(t,n);return this},kt[h].animate=function(t,n,r,i){(e.is(r,"function")||!r)&&(i=r||null);var o,s,a=this.items[M],l=a,p=this;for(i&&(s=function(){!--a&&i.call(p)}),r=e.is(r,q)?r:s,o=this.items[--l].animate(t,n,r,s);l--;)this.items[l]&&!this.items[l].removed&&this.items[l].animateWith(o,t,n,r,s);return this},kt[h].insertAfter=function(e){for(var t=this.items[M];t--;)this.items[t].insertAfter(e);return this},kt[h].getBBox=function(){for(var e=[],t=[],n=[],r=[],i=this.items[M];i--;){var o=this.items[i].getBBox();e[H](o.x),t[H](o.y),n[H](o.x+o.width),r[H](o.y+o.height)}return e=I[b](0,e),t=I[b](0,t),{x:e,y:t,width:A[b](0,n)-e,height:A[b](0,r)-t}},kt[h].clone=function(e){e=new kt;for(var t=0,n=this.items[M];t<n;t++)e[H](this.items[t].clone());return e},e.registerFont=function(e){if(!e.face)return e;this.fonts=this.fonts||{};var t={w:e.w,face:{},glyphs:{}},n=e.face["font-family"];for(var r in e.face)e.face[d](r)&&(t.face[r]=e.face[r]);if(this.fonts[n]?this.fonts[n][H](t):this.fonts[n]=[t],!e.svg){t.face["units-per-em"]=X(e.face["units-per-em"],10);for(var i in e.glyphs)if(e.glyphs[d](i)){var o=e.glyphs[i];if(t.glyphs[i]={w:o.w,k:{},d:o.d&&"M"+o.d[te](/[mlcxtrv]/g,function(e){return{l:"L",c:"C",x:"z",t:"m",r:"l",v:"c"}[e]||"M"})+"z"},o.k)for(var s in o.k)o[d](s)&&(t.glyphs[i].k[s]=o.k[s])}}return e},l.getFont=function(t,n,r,i){if(i=i||"normal",r=r||"normal",n=+n||{normal:400,bold:700,lighter:300,bolder:800}[n]||400,e.fonts){var o=e.fonts[t];if(!o){var s=new RegExp("(^|\\s)"+t[te](/[^\w\d\s+!~.:_-]/g,x)+"(\\s|$)","i");for(var a in e.fonts)if(e.fonts[d](a)&&s.test(a)){o=e.fonts[a];break}}var l;if(o)for(var p=0,c=o[M];p<c&&(l=o[p],l.face["font-weight"]!=n||l.face["font-style"]!=r&&l.face["font-style"]||l.face["font-stretch"]!=i);p++);return l}},l.print=function(t,n,r,i,o,s,a){s=s||"middle",a=A(I(a||0,1),-1);var l,c=this.set(),u=C(r)[P](x),h=0;if(e.is(i,r)&&(i=this.getFont(i)),i){l=(o||16)/i.face["units-per-em"];for(var d=i.face.bbox.split(p),f=+d[0],m=+d[1]+("baseline"==s?d[3]-d[1]+ +i.face.descent:(d[3]-d[1])/2),g=0,v=u[M];g<v;g++){var y=g&&i.glyphs[u[g-1]]||{},b=i.glyphs[u[g]];h+=g?(y.w||i.w)+(y.k&&y.k[u[g]]||0)+i.w*a:0,b&&b.d&&c[H](this.path(b.d).attr({fill:"#000",stroke:"none",translation:[h,0]}))}c.scale(l,l,f,m).translate(t-f,n-m)}return c},e.format=function(t,n){var r=e.is(n,z)?[0][E](n):arguments;return t&&e.is(t,q)&&r[M]-1&&(t=t[te](u,function(e,t){return null==r[++t]?x:r[t]})),t||x},e.ninja=function(){return g.was?m.Raphael=g.is:delete Raphael,e},e.el=He,e.st=kt[h],g.was?m.Raphael=e:Raphael=e}()},function(e,t,n){"use strict";function r(e,t){var n=$(e).find("."+t);return 0===n.length?$("<span>").addClass(t).appendTo($(e)):n}function i(e,t){var n=0;!function r(){var i=e.scrollHeight;i>18||n>=10?t():(n++,setTimeout(r,100))}()}var o=n(165);e.exports={processMath:function(e,t,n,s){var a=$(e);if(null==a.attr("data-math-formula")||n){var l=r(a,"katex-holder"),p=r(a,"mathjax-holder"),c=p.find("script[type='math/tex']")[0];if(null==t&&(a.attr("data-math-formula")?t=a.attr("data-math-formula"):c&&(t=c.text||c.textContent)),t=null!=t?t+"":"",t=o.cleanMath(t),a.attr("data-math-formula",t),Exercises.useKatex)try{if(katex.render(t,l[0]),"mathjax"===a.attr("data-math-type")){var u=MathJax.Hub.getJaxFor(c);if(u){var h=u.SourceElement();h.previousSibling&&h.previousSibling.className&&u.Remove()}}return a.attr("data-math-type","katex"),void(s&&i(e,s))}catch(e){if(e.__proto__!==katex.ParseError.prototype)throw e}a.attr("data-math-type","mathjax"),c?"text"in c?c.text=t:c.textContent=t:p.append("<script type='math/tex'>"+t.replace(/<\//g,"< /")+"</script>"),"undefined"!=typeof MathJax&&(MathJax.Hub.Queue(["Reprocess",MathJax.Hub,p[0]]),MathJax.Hub.Queue(function(){KhanUtil.debugLog("MathJax done typesetting ("+t+")")}),s&&MathJax.Hub.Queue(function(){var t=MathJax.Callback(function(){});return i(e,function(){s(),t()}),t}))}},processAllMath:function(e,t){var n=$(e);n.filter("code").add(n.find("code")).each(function(){var e=$(this),n=e.attr("data-math-formula");null==n&&(n=e.text(),e.empty()),KhanUtil.processMath(this,n,t)})},cleanupMath:function(e){var t=$(e);if(t.attr("data-math-formula")){if("undefined"!=typeof MathJax){var n=MathJax.Hub.getJaxFor(t.find("script")[0]);if(n){var r=n.SourceElement();r.previousSibling&&r.previousSibling.className&&n.Remove()}}t.text(t.attr("data-math-formula")),t.attr("data-math-formula",null),t.attr("data-math-type",null)}return e},retrieveMathFormula:function(e){return $(e).attr("data-math-formula")}}},function(e,t,n){!function(e,t,n,r){function i(e){for(;e&&"undefined"!=typeof e.originalEvent;)e=e.originalEvent;return e}function o(t,n){var o,s,a,l,p,c,u,h,d=t.type;if(t=e.Event(t),t.type=n,o=t.originalEvent,s=e.event.props,d.search(/mouse/)>-1&&(s=N),o)for(u=s.length,l;u;)l=s[--u],t[l]=o[l];if(d.search(/mouse(down|up)|click/)>-1&&!t.which&&(t.which=1),d.search(/^touch/)!==-1&&(a=i(o),d=a.touches,p=a.changedTouches,c=d&&d.length?d[0]:p&&p.length?p[0]:r))for(h=0,len=S.length;h<len;h++)l=S[h],t[l]=c[l];return t}function s(t){for(var n,r,i={};t;){n=e.data(t,w);for(r in n)n[r]&&(i[r]=i.hasVirtualBinding=!0);t=t.parentNode}return i}function a(t,n){for(var r;t;){if(r=e.data(t,w),r&&(!n||r[n]))return t;t=t.parentNode}return null}function l(){L=!1}function p(){L=!0}function c(){B=0,R.length=0,D=!1,p()}function u(){l()}function h(){d(),_=setTimeout(function(){_=0,c()},e.vmouse.resetTimerDuration)}function d(){_&&(clearTimeout(_),_=0)}function f(t,n,r){var i;return(r&&r[t]||!r&&a(n.target,t))&&(i=o(n,t),e(n.target).trigger(i)),i}function m(t){var n=e.data(t.target,C);if(!(D||B&&B===n)){var r=f("v"+t.type,t);r&&(r.isDefaultPrevented()&&t.preventDefault(),r.isPropagationStopped()&&t.stopPropagation(),r.isImmediatePropagationStopped()&&t.stopImmediatePropagation())}}function g(t){var n,r,o=i(t).touches;if(o&&1===o.length&&(n=t.target,r=s(n),r.hasVirtualBinding)){B=z++,e.data(n,C,B),d(),u(),I=!1;var a=i(t).touches[0];O=a.pageX,A=a.pageY,f("vmouseover",t,r),f("vmousedown",t,r)}}function v(e){L||(I||f("vmousecancel",e,s(e.target)),I=!0,h())}function y(t){if(!L){var n=i(t).touches[0],r=I,o=e.vmouse.moveDistanceThreshold;I=I||Math.abs(n.pageX-O)>o||Math.abs(n.pageY-A)>o,flags=s(t.target),I&&!r&&f("vmousecancel",t,flags),f("vmousemove",t,flags),h()}}function b(e){if(!L){p();var t,n=s(e.target);if(f("vmouseup",e,n),!I){var r=f("vclick",e,n);r&&r.isDefaultPrevented()&&(t=i(e).changedTouches[0],R.push({touchID:B,x:t.clientX,y:t.clientY}),D=!0)}f("vmouseout",e,n),I=!1,h()}}function E(t){var n,r=e.data(t,w);if(r)for(n in r)if(r[n])return!0;return!1}function T(){}function x(t){var n=t.substr(1);return{setup:function(r,i){E(this)||e.data(this,w,{});var o=e.data(this,w);o[t]=!0,M[t]=(M[t]||0)+1,1===M[t]&&q.bind(n,m),e(this).bind(n,T),F&&(M.touchstart=(M.touchstart||0)+1,1===M.touchstart&&q.bind("touchstart",g).bind("touchend",b).bind("touchmove",y).bind("scroll",v))},teardown:function(r,i){--M[t],M[t]||q.unbind(n,m),F&&(--M.touchstart,M.touchstart||q.unbind("touchstart",g).unbind("touchmove",y).unbind("touchend",b).unbind("scroll",v));var o=e(this),s=e.data(this,w);s&&(s[t]=!1),o.unbind(n,T),E(this)||o.removeData(w)}}}var w="virtualMouseBindings",C="virtualTouchID",P="vmouseover vmousedown vmousemove vmouseup vclick vmouseout vmousecancel".split(" "),S="clientX clientY pageX pageY screenX screenY".split(" "),k=e.event.mouseHooks?e.event.mouseHooks.props:[],N=e.event.props.concat(k),M={},_=0,O=0,A=0,I=!1,R=[],D=!1,L=!1,F="addEventListener"in n,q=e(n),z=1,B=0;e.vmouse={moveDistanceThreshold:10,clickDistanceThreshold:10,resetTimerDuration:1500};for(var j=0;j<P.length;j++)e.event.special[P[j]]=x(P[j]);F&&n.addEventListener("click",function(t){var n,r,i,o,s,a,l=R.length,p=t.target;if(l)for(n=t.clientX,r=t.clientY,threshold=e.vmouse.clickDistanceThreshold,i=p;i;){for(o=0;o<l;o++)if(s=R[o],a=0,i===p&&Math.abs(s.x-n)<threshold&&Math.abs(s.y-r)<threshold||e.data(i,C)===s.touchID)return t.preventDefault(),void t.stopPropagation();i=i.parentNode}},!0)}(jQuery,window,document)},function(e,t,n){"use strict";var r=n(57),i=n(233),o=n(189),s=n(221).vector,a={maxScale:1,mouselayer:!1,shadow:!1},l=function(e,t,n,i){i=r.extend({},a,i);var l=e.fixedEllipse(t,n,i.maxScale,i.padding);if(r.extend(this,l,{graphie:e,initialPoint:t}),i.mouselayer?this.graphie.addToMouseLayerWrapper(this.wrapper):this.graphie.addToVisibleLayerWrapper(this.wrapper),i.shadow){var p="drop-shadow(0px 0px 5px rgba(0, 0, 0, 0.5))",c=this.wrapper;c.style.webkitFilter=p,c.style.filter=p,this.moveTo=function(e){var t=s.subtract(this.graphie.scalePoint(e),this.graphie.scalePoint(this.initialPoint)),n=o.getCanUse3dTransform(),r="translateX("+Math.round(t[0])+"px) translateY("+Math.round(t[1])+"px)"+(n?" translateZ(0)":"");this.transform(r)}}};r.extend(l.prototype,i),e.exports=l},function(e,t,n){"use strict";var r=n(57),i=n(233),o={center:null,createPath:null,mouselayer:!1},s=function(e,t,n){n=r.extend({},o,n),r.extend(this,e.fixedPath(t,n.center,n.createPath)),r.extend(this,{graphie:e,initialPoint:e.scalePoint(r.head(t))}),n.mouselayer?this.graphie.addToMouseLayerWrapper(this.wrapper):this.graphie.addToVisibleLayerWrapper(this.wrapper)};r.extend(s.prototype,i),e.exports=s},function(e,t,n){"use strict";var r=n(57),i=n(255),o=n(221).point,s={constrain:function(){this.constrain()}};s.standard=[s.constrain];var a={draw:function(){this.draw()}};a.standard=[a.draw];var l={basic:function(e,t){var n=this.graphie;if(!this.state.visibleShape){var o=[this.pointSize()/n.scale[0],this.pointSize()/n.scale[1]],s={maxScale:Math.max(this.highlightStyle().scale,this.normalStyle().scale),padding:10,shadow:e.shadow};this.state.visibleShape=new i(n,this.coord(),o,s),this.state.visibleShape.attr(r.omit(this.normalStyle(),"scale")),this.state.visibleShape.toFront(),this.mouseTarget()&&this.mouseTarget().toFront()}e.normalStyle===t.normalStyle||r.isEqual(e.normalStyle,t.normalStyle)||this.state.visibleShape.attr(this.normalStyle()),this.state.visibleShape.moveTo(this.coord()),this.mouseTarget()&&this.mouseTarget().moveTo(this.coord())},highlight:function(e,t){e.isHovering&&!t.isHovering?e.visibleShape.animate(this.highlightStyle(),50):!e.isHovering&&t.isHovering&&e.visibleShape.animate(this.normalStyle(),50)}};l.standard=[l.basic,l.highlight];var p={basic:function(){this.state.visibleShape&&(this.state.visibleShape.remove(),this.state.visibleShape=null)}};p.standard=p.basic;var c={fixed:function(){return function(){return!1}},snap:function(e){return function(t){return null===e||(e=e||this.graphie.snap,o.roundTo(t,e))}},bound:function(e,t,n){return void 0===n&&(n=void 0===e?10:0),function(r,i,s){var a=this.graphie;e=e||a.range,void 0===t&&(t=a.snap);var l=a.unscalePoint([n,a.ypixels-n]),p=a.unscalePoint([a.xpixels-n,n]);if(t&&(l=o.ceilTo(l,t),p=o.floorTo(p,t)),s&&s.onOutOfBounds)return(r[0]>p[0]||r[0]<l[0]||r[1]>p[1]||r[1]<l[1])&&(s.onSkipRemaining(),s.onOutOfBounds()),r;var c=Math.max(l[0],Math.min(p[0],r[0])),u=Math.max(l[1],Math.min(p[1],r[1]));return[c,u]}}};c.standard=null,e.exports={add:s,modify:a,draw:l,remove:p,onMoveStart:{standard:null},constraints:c,onMove:{standard:null
},onMoveEnd:{standard:null},onClick:{standard:null}}},function(e,t,n){"use strict";var r=n(57),i=n(196),o=n(256),s=n(221).vector,a=n(221).point,l=n(165),p=function(e){var t=e.graphie.scalePoint(e.coord(0)),n=e.graphie.scalePoint(e.coord(1));return s.polarDegFromCart(s.subtract(n,t))[1]},c=function(e,t,n){var r=e.range[0][1]-e.range[0][0],i=e.range[1][1]-e.range[1][0],o=r+i,a=e.unscaleVector(s.cartFromPolarDeg([1,n])),l=s.scale(s.normalize(a),o),p=s.add(t,l),c=s.polarDegFromCart(a)[1],u=e.constrainToBoundsOnAngle(p,4,c*Math.PI/180);return u},u=function(e,t){var n=[.75,0],i=[[-3,4],[-2.75,2.5],[0,.25],n,[0,-.25],[-2.75,-2.5],[-3,-4]],a=1.4;i=r.map(i,function(e){var t=s.subtract(e,n),r=s.scale(t,a);return s.add(n,r)});var p=function(e){for(var t="M"+e[0][0]+" "+e[0][1],n=1;n<e.length;n+=3)t+="C"+e[n][0]+" "+e[n][1]+" "+e[n+1][0]+" "+e[n+1][1]+" "+e[n+2][0]+" "+e[n+2][1];return t},u=r.map(i,e.unscalePoint),h={center:e.unscalePoint(n),createPath:p},d=new o(e,u,h);return d.attr(r.extend({"stroke-linejoin":"round","stroke-linecap":"round","stroke-dasharray":""},t)),d.toCoordAtAngle=function(t,r){var i=e.scalePoint(c(e,t,r));d.transform("translateX("+(i[0]+a*n[0])+"px) translateY("+(i[1]+a*n[1])+"px) translateZ(0) rotate("+(360-l.bound(r))+"deg)")},d},h={draw:function(){this.draw()},pointsToFront:function(e){r.invoke(e.points,"toFront")}};h.standard=[h.draw,h.pointsToFront];var d={draw:function(){this.draw()}};d.standard=[d.draw];var f={basic:function(e){var t=this.graphie,n=this.coord(0),o=this.coord(1);if(!this.state.visibleShape){var s={thickness:10};this.state.visibleShape=new i(t,n,o,s),this.state.visibleShape.attr(this.normalStyle()),this.state.visibleShape.toFront(),this.mouseTarget()&&this.mouseTarget().toFront()}var a=p(this);e.extendLine?(n=c(t,n,360-a),o=c(t,o,(540-a)%360)):e.extendRay&&(o=c(t,o,360-a));var l=[this.state.visibleShape];this.mouseTarget()&&l.push(this.mouseTarget()),r.each(l,function(e){e.moveTo(n,o)})},arrows:function(e){null==this._arrows&&(this._arrows=[],e.extendLine?(this._arrows.push(u(this.graphie,this.normalStyle())),this._arrows.push(u(this.graphie,this.normalStyle()))):e.extendRay&&this._arrows.push(u(this.graphie,this.normalStyle())));var t=p(this),n=[360-t,(540-t)%360];r.each(this._arrows,function(e,t){e.toCoordAtAngle(this.coord(t),n[t])},this)},highlight:function(e,t){e.isHovering&&!t.isHovering?e.visibleShape.animate(e.highlightStyle,50):!e.isHovering&&t.isHovering&&e.visibleShape.animate(e.normalStyle,50)}};f.standard=[f.basic,f.arrows,f.highlight];var m={basic:function(){this.state.visibleShape&&this.state.visibleShape.remove()},arrows:function(){null!=this._arrows&&r.invoke(this._arrows,"remove"),this._arrows=null}};m.standard=[m.basic,m.arrows];var g={fixed:function(){return function(){return!1}},snap:function(e){return function(t,n){if(null===e)return!0;var r=s.subtract(t,n);return e=e||this.graphie.snap,r=a.roundTo(r,e),s.add(n,r)}},bound:function(e,t,n){return void 0===n&&(n=void 0===e?10:0),function(e,i){var o=this.graphie,l=s.subtract(e,i),p=p||o.range;void 0===t&&(t=o.snap);var c=o.unscalePoint([n,o.ypixels-n]),u=o.unscalePoint([o.xpixels-n,n]);t&&(c=a.ceilTo(c,t),u=a.floorTo(u,t));var h=r.map(this.coords(),function(e,t){var n=s.subtract(u,e),r=s.subtract(c,e);return[r,n]}),d=r.reduce(h,function(e,t){var n=t[0],r=t[1],i=Math.max(n[0],Math.min(r[0],e[0])),o=Math.max(n[1],Math.min(r[1],e[1]));return[i,o]},l);return s.add(i,d)}}};g.standard=null;var v={updatePoints:function(e,t){var n=s.subtract(e,t);r.each(this.state.points,function(e){e.setCoord(s.add(e.coord(),n))})}};v.standard=null,e.exports={add:h,modify:d,draw:f,remove:m,onMoveStart:{standard:null},constraints:g,onMove:v,onMoveEnd:{standard:null}}},function(e,t,n){"use strict";function r(e){return o.reduce(e,function(e,t){return e+t},0)}function i(e){var t=o.zip(e,e.slice(1).concat(e.slice(0,1))),n=o.map(t,function(e){var t=e[0],n=e[1];return(n[0]-t[0])*(n[1]+t[1])});return r(n)>0}var o=n(57),s=n(221).point,a=n(221).vector,l={constrain:function(){this.constrain()},pointsToFront:function(e){o.invoke(e.points,"toFront")}};l.standard=[l.constrain,l.pointsToFront];var p={draw:function(){this.draw()}};p.standard=[p.draw];var c={basic:function(e,t){var n=this.graphie,r=this.path(e);this.state.visibleShape||(this.state.visibleShape=n.raphael.path(r),this.state.visibleShape.attr(this.normalStyle())),e.normalStyle===t.normalStyle||o.isEqual(e.normalStyle,t.normalStyle)||this.state.visibleShape.attr(this.normalStyle()),this.state.visibleShape.attr({path:r}),this.mouseTarget()&&this.mouseTarget().attr({path:r})},labels:function(e,t){var n=this.graphie,r=this,s=o.invoke(e.points,"coord"),a=i(s),l=s.length;null!=r.state._labelCache&&o.invoke(r.state._labelCache,"remove"),r.state._labelCache=[],(e.angleLabels.length||e.showRightAngleMarkers.length)&&(null==r.state._labeledAngles&&(r.state._labeledAngles=o.times(Math.max(e.angleLabels.length,e.showRightAngleMarkers.length),function(){return n.label([0,0],"","center",e.labelStyle)})),o.each(r.state._labeledAngles,function(t,i){r.state._labelCache.push(n.labelAngle({point1:s[(i-1+l)%l],vertex:s[i],point3:s[(i+1)%l],label:t,text:e.angleLabels[i],showRightAngleMarker:e.showRightAngleMarkers[i],numArcs:e.numArcs[i],clockwise:a,style:e.labelStyle}))})),e.sideLabels.length&&(null==r.state._labeledSides&&(r.state._labeledSides=o.map(e.sideLabels,function(t){return n.label([0,0],"","center",e.labelStyle)})),o.each(r.state._labeledSides,function(t,i){r.state._labelCache.push(n.labelSide({point1:s[i],point2:s[(i+1)%l],label:t,text:e.sideLabels[i],numArrows:e.numArrows[i],numTicks:e.numTicks[i],clockwise:a,style:e.labelStyle}))})),e.vertexLabels.length&&(null==r.state._labeledVertices&&(r.state._labeledVertices=o.map(e.vertexLabels,function(t){return n.label([0,0],"","center",e.labelStyle)})),o.each(r.state._labeledVertices,function(t,i){r.state._labelCache.push(n.labelVertex({point1:s[(i-1+l)%l],vertex:s[i],point3:s[(i+1)%l],label:t,text:e.vertexLabels[i],clockwise:a,style:e.labelStyle}))})),r.state._labelCache=o.flatten(r.state._labelCache)},highlight:function(e,t){e.isHovering&&!t.isHovering?e.visibleShape.animate(this.highlightStyle(),50):!e.isHovering&&t.isHovering&&e.visibleShape.animate(this.normalStyle(),50)}};c.standard=[c.basic,c.labels,c.highlight];var u={basic:function(){this.state.visibleShape&&this.state.visibleShape.remove()},labels:function e(){var e=[this.state._labeledSides,this.state._labeledVertices,this.state._labeledAngles,this.state._labelCache];o.each(e,function(e){null!=e&&e.length&&o.invoke(e,"remove")})}};u.standard=[u.basic,u.labels];var h={fixed:function(){return function(){return!1}},snap:function(e){return function(t){return null===e||(e=e||this.graphie.snap,s.roundTo(t,e))}},bound:function(e,t,n){return void 0===n&&(n=void 0===e?10:0),function(e,r){var i=this.graphie,l=a.subtract(e,r),p=p||i.range;void 0===t&&(t=i.snap);var c=i.unscalePoint([n,i.ypixels-n]),u=i.unscalePoint([i.xpixels-n,n]);t&&(c=s.ceilTo(c,t),u=s.floorTo(u,t));var h=o.map(this.coords(),function(e,t){var n=a.subtract(u,e),r=a.subtract(c,e);return[r,n]}),d=o.reduce(h,function(e,t){var n=t[0],r=t[1],i=Math.max(n[0],Math.min(r[0],e[0])),o=Math.max(n[1],Math.min(r[1],e[1]));return[i,o]},l);return a.add(r,d)}}};h.standard=null;var d={updatePoints:function(e,t){var n=a.subtract(e,t);o.each(this.state.points,function(e){e.setCoord(a.add(e.coord(),n))})}};d.standard=null,e.exports={add:l,modify:p,draw:c,remove:u,onMoveStart:{standard:null},constraints:h,onMove:d,onMoveEnd:{standard:null},onClick:{standard:null}}},function(e,t,n){"use strict";var r={PLUS:"PLUS",MINUS:"MINUS",NEGATIVE:"NEGATIVE",TOGGLE_SIGN:"TOGGLE_SIGN",TIMES:"TIMES",DIVIDE:"DIVIDE",DECIMAL:"DECIMAL",PERIOD:"PERIOD",PERCENT:"PERCENT",CDOT:"CDOT",EQUAL:"EQUAL",NEQ:"NEQ",GT:"GT",LT:"LT",GEQ:"GEQ",LEQ:"LEQ",FRAC_INCLUSIVE:"FRAC_INCLUSIVE",FRAC_EXCLUSIVE:"FRAC_EXCLUSIVE",EXP:"EXP",EXP_2:"EXP_2",EXP_3:"EXP_3",SQRT:"SQRT",CUBE_ROOT:"CUBE_ROOT",RADICAL:"RADICAL",LEFT_PAREN:"LEFT_PAREN",RIGHT_PAREN:"RIGHT_PAREN",LN:"LN",LOG:"LOG",LOG_N:"LOG_N",SIN:"SIN",COS:"COS",TAN:"TAN",PI:"PI",THETA:"THETA",UP:"UP",RIGHT:"RIGHT",DOWN:"DOWN",LEFT:"LEFT",BACKSPACE:"BACKSPACE",DISMISS:"DISMISS",JUMP_OUT_PARENTHESES:"JUMP_OUT_PARENTHESES",JUMP_OUT_EXPONENT:"JUMP_OUT_EXPONENT",JUMP_OUT_BASE:"JUMP_OUT_BASE",JUMP_INTO_NUMERATOR:"JUMP_INTO_NUMERATOR",JUMP_OUT_NUMERATOR:"JUMP_OUT_NUMERATOR",JUMP_OUT_DENOMINATOR:"JUMP_OUT_DENOMINATOR",NOOP:"NOOP",FRAC_MULTI:"FRAC_MULTI",MANY:"MANY"};e.exports=r},function(e,t,n){"use strict";var r=n(205),i=r.DecimalSeparators,o=void 0;o=window.icu&&","===window.icu.getDecimalFormatSymbols().decimal_separator?i.COMMA:i.PERIOD,e.exports={decimalSeparator:o}},function(e,t,n){"use strict";var r=n(34),i=n(275),o=i.connect,s=n(243),a=s.View,l=n(278),p=n(279),c=n(266),u=c.row,h=c.roundedTopLeft,d=c.roundedTopRight,f=n(205),m=f.BorderStyles,g=n(235),v=n(218),y=v.cursorContextPropType,b=n(242),E=r.createClass({displayName:"FractionKeypad",propTypes:{cursorContext:y.isRequired,dynamicJumpOut:r.PropTypes.bool,roundTopLeft:r.PropTypes.bool,roundTopRight:r.PropTypes.bool},statics:{rows:4,columns:4,maxVisibleRows:5,numPages:1},render:function(){var e=this.props,t=e.cursorContext,n=e.dynamicJumpOut,i=e.roundTopLeft,o=e.roundTopRight,s=void 0;if(n)switch(t){case g.IN_PARENS:s=b.JUMP_OUT_PARENTHESES;break;case g.IN_SUPER_SCRIPT:s=b.JUMP_OUT_EXPONENT;break;case g.IN_SUB_SCRIPT:s=b.JUMP_OUT_BASE;break;case g.BEFORE_FRACTION:s=b.JUMP_INTO_NUMERATOR;break;case g.IN_NUMERATOR:s=b.JUMP_OUT_NUMERATOR;break;case g.IN_DENOMINATOR:s=b.JUMP_OUT_DENOMINATOR;break;case g.NONE:default:s=b.DISMISS}else s=b.DISMISS;return r.createElement(l,null,r.createElement(a,{style:u},r.createElement(p,{keyConfig:b.NUM_7,borders:m.NONE,style:i&&h}),r.createElement(p,{keyConfig:b.NUM_8,borders:m.NONE}),r.createElement(p,{keyConfig:b.NUM_9,borders:m.NONE}),r.createElement(p,{keyConfig:b.FRAC_MULTI,disabled:t===g.IN_NUMERATOR||t===g.IN_DENOMINATOR,style:o&&d})),r.createElement(a,{style:u},r.createElement(p,{keyConfig:b.NUM_4,borders:m.NONE}),r.createElement(p,{keyConfig:b.NUM_5,borders:m.NONE}),r.createElement(p,{keyConfig:b.NUM_6,borders:m.NONE}),r.createElement(p,{keyConfig:b.PERCENT})),r.createElement(a,{style:u},r.createElement(p,{keyConfig:b.NUM_1,borders:m.BOTTOM}),r.createElement(p,{keyConfig:b.NUM_2,borders:m.NONE}),r.createElement(p,{keyConfig:b.NUM_3,borders:m.BOTTOM}),r.createElement(p,{keyConfig:b.BACKSPACE,borders:m.LEFT})),r.createElement(a,{style:u},r.createElement(p,{keyConfig:b.NEGATIVE,borders:m.NONE}),r.createElement(p,{keyConfig:b.NUM_0,borders:m.LEFT}),r.createElement(p,{keyConfig:b.DECIMAL,borders:m.LEFT}),r.createElement(p,{keyConfig:s,borders:m.LEFT})))}}),T=function(e){return{cursorContext:e.input.cursor.context,dynamicJumpOut:!e.layout.navigationPadEnabled}};e.exports=o(T)(E)},function(e,t,n){"use strict";var r=n(34),i=n(275),o=i.connect,s=n(276),a=s.StyleSheet,l=n(243),p=l.View,c=n(280),u=n(281),h=n(279),d=n(266),f=d.row,m=d.column,g=d.oneColumn,v=d.fullWidth,y=d.roundedTopLeft,b=d.roundedTopRight,E=n(205),T=E.BorderStyles,x=n(240),w=x.valueGrey,C=x.controlGrey,P=n(218),S=P.cursorContextPropType,k=P.keyIdPropType,N=n(242),M=n(235),_=r.createClass({displayName:"ExpressionKeypad",propTypes:{currentPage:r.PropTypes.number.isRequired,cursorContext:S.isRequired,dynamicJumpOut:r.PropTypes.bool,extraKeys:r.PropTypes.arrayOf(k),roundTopLeft:r.PropTypes.bool,roundTopRight:r.PropTypes.bool},statics:{rows:4,columns:5,maxVisibleRows:4,numPages:2},render:function(){var e=this.props,t=e.currentPage,n=e.cursorContext,i=e.dynamicJumpOut,o=e.extraKeys,s=e.roundTopLeft,a=e.roundTopRight,l=void 0;if(i)switch(n){case M.IN_PARENS:l=N.JUMP_OUT_PARENTHESES;break;case M.IN_SUPER_SCRIPT:l=N.JUMP_OUT_EXPONENT;break;case M.IN_SUB_SCRIPT:l=N.JUMP_OUT_BASE;break;case M.BEFORE_FRACTION:l=N.JUMP_INTO_NUMERATOR;break;case M.IN_NUMERATOR:l=N.JUMP_OUT_NUMERATOR;break;case M.IN_DENOMINATOR:l=N.JUMP_OUT_DENOMINATOR;break;case M.NONE:default:l=N.DISMISS}else l=N.DISMISS;var d=[f,v,O.rightPage,a&&b],E=r.createElement(p,{style:d},r.createElement(p,{style:[m,g]},r.createElement(h,{keyConfig:N.NUM_7,borders:T.NONE}),r.createElement(h,{keyConfig:N.NUM_4,borders:T.NONE}),r.createElement(h,{keyConfig:N.NUM_1,borders:T.BOTTOM}),r.createElement(u,{keys:o,borders:T.NONE})),r.createElement(p,{style:[m,g]},r.createElement(h,{keyConfig:N.NUM_8,borders:T.NONE}),r.createElement(h,{keyConfig:N.NUM_5,borders:T.NONE}),r.createElement(h,{keyConfig:N.NUM_2,borders:T.NONE}),r.createElement(h,{keyConfig:N.NUM_0,borders:T.LEFT})),r.createElement(p,{style:[m,g]},r.createElement(h,{keyConfig:N.NUM_9,borders:T.NONE}),r.createElement(h,{keyConfig:N.NUM_6,borders:T.NONE}),r.createElement(h,{keyConfig:N.NUM_3,borders:T.BOTTOM}),r.createElement(h,{keyConfig:N.DECIMAL,borders:T.LEFT})),r.createElement(p,{style:[m,g]},r.createElement(h,{keyConfig:N.DIVIDE,borders:T.LEFT}),r.createElement(h,{keyConfig:N.TIMES,borders:T.LEFT}),r.createElement(h,{keyConfig:N.MINUS,borders:T.LEFT}),r.createElement(h,{keyConfig:N.PLUS,borders:T.LEFT})),r.createElement(p,{style:[m,g]},r.createElement(h,{keyConfig:N.FRAC_INCLUSIVE,style:a&&b}),r.createElement(h,{keyConfig:N.CDOT}),r.createElement(h,{keyConfig:N.BACKSPACE,borders:T.LEFT}),r.createElement(h,{keyConfig:l,borders:T.LEFT}))),x=[f,v,O.leftPage,s&&y],w=r.createElement(p,{style:x},r.createElement(p,{style:[m,g]},r.createElement(h,{keyConfig:N.EXP_2,borders:T.NONE,style:s&&y}),r.createElement(h,{keyConfig:N.SQRT,borders:T.NONE}),r.createElement(h,{keyConfig:N.LOG,borders:T.BOTTOM}),r.createElement(h,{keyConfig:N.SIN,borders:T.NONE})),r.createElement(p,{style:[m,g]},r.createElement(h,{keyConfig:N.EXP_3,borders:T.NONE}),r.createElement(h,{keyConfig:N.CUBE_ROOT,borders:T.NONE}),r.createElement(h,{keyConfig:N.LN,borders:T.BOTTOM}),r.createElement(h,{keyConfig:N.COS,borders:T.NONE})),r.createElement(p,{style:[m,g]},r.createElement(h,{keyConfig:N.EXP,borders:T.NONE}),r.createElement(h,{keyConfig:N.RADICAL,borders:T.NONE}),r.createElement(h,{keyConfig:N.LOG_N,borders:T.BOTTOM}),r.createElement(h,{keyConfig:N.TAN,borders:T.NONE})),r.createElement(p,{style:[m,g]},r.createElement(h,{keyConfig:N.GEQ,borders:T.LEFT}),r.createElement(h,{keyConfig:N.EQUAL,borders:T.LEFT}),r.createElement(h,{keyConfig:N.LEQ}),r.createElement(h,{keyConfig:N.LEFT_PAREN,borders:T.LEFT})),r.createElement(p,{style:[m,g]},r.createElement(h,{keyConfig:N.GT,borders:T.NONE}),r.createElement(h,{keyConfig:N.NEQ,borders:T.NONE}),r.createElement(h,{keyConfig:N.LT,borders:T.BOTTOM}),r.createElement(h,{keyConfig:N.RIGHT_PAREN,borders:T.NONE})));return r.createElement(c,{currentPage:t,rightPage:E,leftPage:w})}}),O=a.create({rightPage:{backgroundColor:w},leftPage:{backgroundColor:C}}),A=function(e){return{currentPage:e.pager.currentPage,cursorContext:e.input.cursor.context,dynamicJumpOut:!e.layout.navigationPadEnabled}};e.exports=o(A)(_)},function(e,t,n){"use strict";var r=n(34),i=n(276),o=i.StyleSheet,s=n(243),a=s.View,l=n(279),p=n(266),c=p.row,u=p.column,h=p.centered,d=p.stretch,f=p.roundedTopLeft,m=n(240),g=m.navigationPadWidthPx,v=m.controlGrey,y=m.valueGrey,b=m.gray85,E=n(205),T=E.BorderStyles,x=n(242),w=r.createClass({displayName:"NavigationPad",propTypes:{roundTopLeft:r.PropTypes.bool,style:r.PropTypes.any},render:function(){var e=this.props,t=e.roundTopLeft,n=e.style,i=[u,h,k.container,t&&f].concat(Array.isArray(n)?n:[n]);return r.createElement(a,{style:i},r.createElement(a,{style:[c,h]},r.createElement(l,{keyConfig:x.UP,borders:T.NONE,style:[k.navigationKey,k.topArrow]})),r.createElement(a,{style:[c,h,d]},r.createElement(l,{keyConfig:x.LEFT,borders:T.NONE,style:[k.navigationKey,k.leftArrow]}),r.createElement(a,{style:k.horizontalSpacer}),r.createElement(l,{keyConfig:x.RIGHT,borders:T.NONE,style:[k.navigationKey,k.rightArrow]})),r.createElement(a,{style:[c,h]},r.createElement(l,{keyConfig:x.DOWN,borders:T.NONE,style:[k.navigationKey,k.bottomArrow]})))}}),C=48,P=4,S=1,k=o.create({container:{backgroundColor:v,width:g},navigationKey:{borderColor:b,backgroundColor:y,width:C,height:C,boxSizing:"content-box"},topArrow:{borderTopWidth:S,borderLeftWidth:S,borderRightWidth:S,borderTopLeftRadius:P,borderTopRightRadius:P},rightArrow:{borderTopWidth:S,borderRightWidth:S,borderBottomWidth:S,borderTopRightRadius:P,borderBottomRightRadius:P},bottomArrow:{borderBottomWidth:S,borderLeftWidth:S,borderRightWidth:S,borderBottomLeftRadius:P,borderBottomRightRadius:P},leftArrow:{borderTopWidth:S,borderBottomWidth:S,borderLeftWidth:S,borderTopLeftRadius:P,borderBottomLeftRadius:P},horizontalSpacer:{background:y,width:C}});e.exports=w},function(e,t,n){"use strict";e.exports={popover:1,echo:2,keypad:1060}},function(e,t,n){"use strict";var r=n(276),i=r.StyleSheet,o=n(240),s=o.compactKeypadBorderRadiusPx;e.exports=i.create({row:{flexDirection:"row"},column:{flexDirection:"column"},oneColumn:{flexGrow:1},fullWidth:{width:"100%"},stretch:{alignItems:"stretch"},centered:{justifyContent:"center",alignItems:"center"},centeredText:{textAlign:"center"},roundedTopLeft:{borderTopLeftRadius:s},roundedTopRight:{borderTopRightRadius:s}})},function(e,t,n){"use strict";var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol?"symbol":typeof e},i=n(34),o=n(276),s=o.StyleSheet,a=o.css,l=n(269),p="ERRORED",c="LOADED",u="LOADING",h="PENDING",d="IDLE",f=function(e){return("object"===("undefined"==typeof e?"undefined":r(e))?e.uri:e)||null},m={contain:"contain",cover:"cover",none:"none",stretch:"stretch"},g=i.PropTypes.oneOfType([i.PropTypes.shape({uri:i.PropTypes.string.isRequired}),i.PropTypes.string]),v=i.createClass({displayName:"Image",propTypes:{children:i.PropTypes.any,defaultSource:g,onError:i.PropTypes.func,onLoad:i.PropTypes.func,onLoadEnd:i.PropTypes.func,onLoadStart:i.PropTypes.func,resizeMode:i.PropTypes.oneOf(["contain","cover","none","stretch"]),source:g,style:i.PropTypes.any},getInitialState:function(){var e=f(this.props.source);return{status:e?h:d}},componentDidMount:function(){this.state.status===h&&this._createImageLoader()},componentWillReceiveProps:function(e){var t=f(e.source);f(this.props.source)!==t&&this.setState({status:t?h:d})},componentDidUpdate:function(){this.state.status!==h||this.image||this._createImageLoader()},componentWillUnmount:function(){this._destroyImageLoader()},_createImageLoader:function(){var e=f(this.props.source);this._destroyImageLoader(),this.image=new window.Image,this.image.onerror=this._onError,this.image.onload=this._onLoad,this.image.src=e,this._onLoadStart()},_destroyImageLoader:function(){this.image&&(this.image.onerror=null,this.image.onload=null,this.image=null)},_onError:function(e){var t=this.props.onError,n={nativeEvent:e};this._destroyImageLoader(),this.setState({status:p}),this._onLoadEnd(),t&&t(n)},_onLoad:function(e){var t=this.props.onLoad,n={nativeEvent:e};this._destroyImageLoader(),this.setState({status:c}),t&&t(n),this._onLoadEnd()},_onLoadEnd:function(){var e=this.props.onLoadEnd;e&&e()},_onLoadStart:function(){var e=this.props.onLoadStart;this.setState({status:u}),e&&e()},render:function(){var e=this.props,t=e.children,n=e.defaultSource,r=e.source,o=e.style,p=this.state.status===c,u=f(p?r:n),h=u?'url("'+u+'")':null,d=this.props.resizeMode||m.cover,g=s.create({showBackgroundImage:{backgroundImage:h}});return i.createElement(l,{accessibilityRole:"img",style:[y.initial,g.showBackgroundImage].concat(Array.isArray(o)?o:[o],[b[d]])},i.createElement("img",{src:u,className:a(y.img)}),t?i.createElement(l,{children:t,pointerEvents:"box-none",style:y.children}):null)}}),y=s.create({initial:{alignSelf:"flex-start",backgroundColor:"transparent",backgroundPosition:"center",backgroundRepeat:"no-repeat",backgroundSize:"cover"},img:{borderWidth:0,height:"auto",maxHeight:"100%",maxWidth:"100%",opacity:0},children:{bottom:0,left:0,position:"absolute",right:0,top:0}}),b=s.create({contain:{backgroundSize:"contain"},cover:{backgroundSize:"cover"},none:{backgroundSize:"auto"},stretch:{backgroundSize:"100% 100%"}});e.exports=v},function(e,t,n){"use strict";var r=n(34),i=n(276),o=i.StyleSheet,s=i.css,a=r.createClass({displayName:"Text",propTypes:{children:r.PropTypes.oneOfType([r.PropTypes.arrayOf(r.PropTypes.node),r.PropTypes.node]),dynamicStyle:r.PropTypes.any,numberOfLines:r.PropTypes.number,style:r.PropTypes.any},render:function(){var e=this.props,t=e.numberOfLines,n=e.style,i=s.apply(void 0,[l.initial].concat(Array.isArray(n)?n:[n],[1===t&&l.singleLineStyle]));return r.createElement("span",{className:i,style:this.props.dynamicStyle},this.props.children)}}),l=o.create({initial:{color:"inherit",display:"inline",font:"inherit",margin:0,padding:0,textDecorationLine:"none",wordWrap:"break-word"},singleLineStyle:{maxWidth:"100%",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"}});e.exports=a},function(e,t,n){"use strict";var r=n(34),i=n(276),o=i.StyleSheet,s=i.css,a=r.createClass({displayName:"View",propTypes:{ariaLabel:r.PropTypes.string,children:r.PropTypes.oneOfType([r.PropTypes.arrayOf(r.PropTypes.node),r.PropTypes.node]),dynamicStyle:r.PropTypes.any,numberOfLines:r.PropTypes.number,onClick:r.PropTypes.func,onTouchCancel:r.PropTypes.func,onTouchEnd:r.PropTypes.func,onTouchMove:r.PropTypes.func,onTouchStart:r.PropTypes.func,role:r.PropTypes.string,style:r.PropTypes.any},statics:{styles:o.create({initial:{alignItems:"stretch",borderWidth:0,borderStyle:"solid",boxSizing:"border-box",display:"flex",flexBasis:"auto",flexDirection:"column",margin:0,padding:0,position:"relative",backgroundColor:"transparent",color:"inherit",font:"inherit",textAlign:"inherit",textDecorationLine:"none",listStyle:"none",maxWidth:"100%",minHeight:0,minWidth:0}})},render:function(){var e=s.apply(void 0,[a.styles.initial].concat(Array.isArray(this.props.style)?this.props.style:[this.props.style]));return r.createElement("div",{className:e,style:this.props.dynamicStyle,onClick:this.props.onClick,onTouchCancel:this.props.onTouchCancel,onTouchEnd:this.props.onTouchEnd,onTouchMove:this.props.onTouchMove,onTouchStart:this.props.onTouchStart,"aria-label":this.props.ariaLabel,role:this.props.role},this.props.children)}});e.exports=a},function(e,t,n){"use strict";var r=n(205),i=r.DeviceTypes,o=r.DeviceOrientations,s=r.LayoutModes,a=n(240),l=a.pageIndicatorHeightPx,p=a.toolbarHeightPx,c=a.navigationPadWidthPx,u=a.innerBorderWidthPx,h=48,d=64,f=32,m=44,g=64,v=44,y=m+v,b=v+(g-m),E=320/(480-m),T=function(e,t,n,r){var a=e.numColumns,m=e.numMaxVisibleRows,g=e.numPages,v=t.pageWidthPx,T=t.pageHeightPx,x=n.deviceOrientation,w=n.deviceType,C=r.navigationPadEnabled,P=r.paginationEnabled,S=r.toolbarEnabled,k=P?a:a*g,N=void 0;if(w===i.PHONE){var M=x===o.LANDSCAPE,_=M?y:b,O=f+_+(S?p:0)+(P?l:0),A=v,I=M?T:v/E,R=I-O,D=Math.max(Math.min(R/m,d),h),L=void 0;if(g>1){var F=P?a:a*g;L=A/F}else L=M?d:A/a;N={widthPx:L,heightPx:D}}else{if(w!==i.TABLET)throw new Error("Invalid device type: "+w);N={widthPx:d,heightPx:d}}var q=(C?1:0)+(P?0:g-1),z=k*N.widthPx+(C?c:0)+q*u;return{buttonDimensions:N,layoutMode:z>=v?s.FULLSCREEN:s.COMPACT}};e.exports=T},function(e,t,n){"use strict";function r(e,t){var n={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},s=n(283),a=n(284),l=n(285),p=function(e){return[e.changedTouches[0].clientX,e.changedTouches[0].clientY]},c=function(){function e(t,n,p,c){var u=this;i(this,e);var h=t.swipeEnabled;this.swipeEnabled=h,this.trackEvents=!1,this.nodeManager=new s,this.popoverStateMachine=new a({onActiveNodesChanged:function(e){var t=e.popover,i=r(e,["popover"]);n.onActiveNodesChanged(o({popover:t&&{parentId:t.parentId,bounds:u.nodeManager.layoutPropsForId(t.parentId).initialBounds,childKeyIds:t.childIds}},i))},onClick:function(e,t,r){n.onClick(e,u.nodeManager.layoutPropsForId(t),r)}}),this.gestureStateMachine=new l({onFocus:function(e){u.popoverStateMachine.onFocus(e)},onLongPress:function(e){u.popoverStateMachine.onLongPress(e)},onTouchEnd:function(e){u.popoverStateMachine.onTouchEnd(e)},onBlur:function(){u.popoverStateMachine.onBlur()},onSwipeChange:n.onSwipeChange,onSwipeEnd:n.onSwipeEnd,onTrigger:function(e){u.popoverStateMachine.onTrigger(e)}},{},p,c)}return e.prototype.onTouchStart=function(e,t){if(this.trackEvents){for(var n=p(e),r=n[0],i=0;i<e.changedTouches.length;i++)this.gestureStateMachine.onTouchStart(function(){return t},e.changedTouches[i].identifier,r);e.preventDefault()}},e.prototype.onTouchMove=function(e){var t=this;if(this.trackEvents)for(var n=this.popoverStateMachine.isPopoverVisible(),r=this.swipeEnabled&&!n,i=p(e),o=i[0],s=i[1],a=0;a<e.changedTouches.length;a++)this.gestureStateMachine.onTouchMove(function(){return t.nodeManager.idForCoords(o,s)},e.changedTouches[a].identifier,o,r)},e.prototype.onTouchEnd=function(e){var t=this;if(this.trackEvents)for(var n=p(e),r=n[0],i=n[1],o=0;o<e.changedTouches.length;o++)this.gestureStateMachine.onTouchEnd(function(){return t.nodeManager.idForCoords(r,i)},e.changedTouches[o].identifier,r)},e.prototype.onTouchCancel=function(e){if(this.trackEvents)for(var t=0;t<e.changedTouches.length;t++)this.gestureStateMachine.onTouchCancel(e.changedTouches[t].identifier)},e.prototype.registerDOMNode=function(e,t,n,r){this.nodeManager.registerDOMNode(e,t,n,r),this.popoverStateMachine.registerPopover(e,n)},e.prototype.unregisterDOMNode=function(e){this.nodeManager.unregisterDOMNode(e),this.popoverStateMachine.unregisterPopover(e)},e.prototype.enableEventTracking=function(){this.trackEvents=!0},e.prototype.disableEventTracking=function(){this.trackEvents=!1},e}();e.exports=c},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},o=n(315),s=function(){function e(t){r(this,e),this.options=i({velocityTimeout:100},t),this._events=[]}return e.prototype.push=function(e){this._events.push({x:e,t:o()})},e.prototype.getVelocity=function(){var e=this._getEvents();if(e.length<2)return 0;var t=e[e.length-1],n=e[0],r=t.t-n.t;return(t.x-n.x)/r},e.prototype._getEvents=function(){var e=o()-this.options.velocityTimeout,t=this._events.filter(function(t){return t.t>e});return this._events=[],t},e}();e.exports=s},function(e,t,n){"use strict";for(var r=n(308),i=n(205),o=i.KeypadTypes,s=i.EchoAnimationTypes,a=i.DebugSwitcherTypes,l="undefined"==typeof location?"":location.search,p=r.parse(l),c=Object.keys(p).length>0,u={keypadType:o.EXPRESSION,echoAnimation:s.FADE_ONLY,iconStyle:"fancy",debugSwitcher:c?a.DISABLED:a.ENABLED,holdIntervalMs:250},h={keypadType:p.keypad_type||u.keypadType,echoAnimation:p.echo_animation||u.echoAnimation,iconStyle:p.icon_style||u.iconStyle,debugSwitcher:p.debug_switcher||u.debugSwitcher,holdIntervalMs:parseInt(p.hold_interval_ms)||u.holdIntervalMs},d=Object.entries(h),f=Array.isArray(d),m=0,d=f?d:d[Symbol.iterator]();;){var g;if(f){if(m>=d.length)break;g=d[m++]}else{if(m=d.next(),m.done)break;g=m.value}var v=g,y=v[0],b=v[1];"number"!=typeof b&&(h[y]=b.toUpperCase())}e.exports=h},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e){return Object.keys(e).reduce(function(t,n){var r=e[n];return r instanceof Object&&!Array.isArray(r)?t[n]=i(r):(Object.keys(s.default).forEach(function(e){var i=s.default[e];i[n]&&(t[e+(0,l.default)(n)]=r)}),k.forEach(function(e){return(0,c.default)(t,e(n,r))})),t},e)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=i;var o=n(286),s=r(o),a=n(290),l=r(a),p=n(291),c=r(p),u=n(292),h=r(u),d=n(293),f=r(d),m=n(294),g=r(m),v=n(295),y=r(v),b=n(296),E=r(b),T=n(297),x=r(T),w=n(298),C=r(w),P=n(299),S=r(P),k=[h.default,f.default,y.default,E.default,x.default,C.default,S.default,g.default];e.exports=t.default},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}t.__esModule=!0,t.connect=t.Provider=void 0;var i=n(300),o=r(i),s=n(301),a=r(s);t.Provider=o.default,t.connect=a.default},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){var n=[],r=!0,i=!1,o=void 0;try{for(var s,a=e[Symbol.iterator]();!(r=(s=a.next()).done)&&(n.push(s.value),!t||n.length!==t);r=!0);}catch(e){i=!0,o=e}finally{try{!r&&a.return&&a.return()}finally{if(i)throw o}}return n}return function(t,n){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),i=n(287),o=n(288),s={create:function(e){return(0,i.mapObj)(e,function(e){var t=r(e,2),n=t[0],o=t[1];return[n,{_name:n+"_"+(0,i.hashObject)(o),_definition:o}]})},rehydrate:function(){var e=arguments.length<=0||void 0===arguments[0]?[]:arguments[0];(0,o.addRenderedClassNames)(e)}},a={renderStatic:function(e){(0,o.reset)(),(0,o.startBuffering)();var t=e(),n=(0,o.flushToString)();return{html:t,css:{content:n,renderedClassNames:(0,o.getRenderedClassNames)()}}}},l=function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=t.filter(function(e){return e});if(0===r.length)return"";var i=r.map(function(e){return e._name}).join("-o_O-");return(0,o.injectStyleOnce)(i,"."+i,r.map(function(e){return e._definition})),i};t.default={StyleSheet:s,StyleSheetServer:a,css:l},e.exports=t.default},function(e,t,n){(function(t){"use strict";function n(e){a.length||(s(),l=!0),a[a.length]=e}function r(){for(;p<a.length;){var e=p;if(p+=1,a[e].call(),p>c){for(var t=0,n=a.length-p;t<n;t++)a[t]=a[t+p];a.length-=p,p=0}}a.length=0,p=0,l=!1}function i(e){var t=1,n=new u(e),r=document.createTextNode("");return n.observe(r,{characterData:!0}),function(){t=-t,r.data=t}}function o(e){return function(){function t(){clearTimeout(n),clearInterval(r),e()}var n=setTimeout(t,0),r=setInterval(t,50)}}e.exports=n;var s,a=[],l=!1,p=0,c=1024,u=t.MutationObserver||t.WebKitMutationObserver;s="function"==typeof u?i(r):o(r),n.requestFlush=s,n.makeRequestCallFromTimer=o}).call(t,function(){return this}())},function(e,t,n){"use strict";function r(e,t){var n={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n}var i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},o=n(34),s=n(35),a=n(275),l=a.connect,p=n(244),c=p.removeEcho,u=n(243),h=u.View,d=n(306),f=n(307),m=n(218),g=m.echoPropType,v=m.popoverPropType,y=o.createClass({displayName:"Keypad",propTypes:{active:o.PropTypes.bool,children:o.PropTypes.oneOfType([o.PropTypes.arrayOf(o.PropTypes.node),o.PropTypes.node]),echoes:o.PropTypes.arrayOf(g).isRequired,popover:v,removeEcho:o.PropTypes.func.isRequired,style:o.PropTypes.any},componentDidMount:function(){window.addEventListener("resize",this._onResize),this._updateSizeAndPosition()},componentWillReceiveProps:function(e){this._container||!e.popover&&!e.echoes.length||this._computeContainer()},componentWillUnmount:function(){window.removeEventListener("resize",this._onResize)},_computeContainer:function(){var e=s.findDOMNode(this);this._container=e.getBoundingClientRect()},_updateSizeAndPosition:function(){this._container=null},_onResize:function(){var e=this;null==this._resizeTimeout&&(this._resizeTimeout=setTimeout(function(){e._resizeTimeout=null,e.isMounted()&&e._updateSizeAndPosition()},66))},render:function(){var e=this,t=this.props,n=t.children,s=t.echoes,a=t.removeEcho,l=t.popover,p=t.style,c=s.map(function(t){var n=t.initialBounds,o=r(t,["initialBounds"]);return i({},o,{initialBounds:{top:n.top-e._container.top,right:n.right-e._container.left,
bottom:n.bottom-e._container.top,left:n.left-e._container.left,width:n.width,height:n.height}})}),u=l&&i({},l,{bounds:{bottom:this._container.height-(l.bounds.bottom-this._container.top),left:l.bounds.left-this._container.left,width:l.bounds.width}});return o.createElement(h,{style:p},n,o.createElement(d,{echoes:c,onAnimationFinish:a}),o.createElement(f,{popover:u}))}}),b=function(e){return i({},e.echoes,{active:e.keypad.active,popover:e.gestures.popover})},E=function(e){return{removeEcho:function(t){e(c(t))}}};e.exports=l(b,E)(y)},function(e,t,n){"use strict";function r(e,t){var n={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n}var i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},o=n(34),s=n(35),a=n(275),l=a.connect,p=n(302),c=n(242),u=n(271),h=n(218),d=h.bordersPropType,f=h.keyIdPropType,m=n(205),g=m.KeyTypes,v=o.createClass({displayName:"TouchableKeypadButton",propTypes:{borders:d,childKeyIds:o.PropTypes.arrayOf(f),disabled:o.PropTypes.bool,focused:o.PropTypes.bool,gestureManager:o.PropTypes.instanceOf(u),id:f.isRequired,popoverEnabled:o.PropTypes.bool,style:o.PropTypes.any,type:o.PropTypes.oneOf(Object.keys(g)).isRequired},shouldComponentUpdate:function(e){return e.id!==this.props.id||e.gestureManager!==this.props.gestureManager||e.focused!==this.props.focused||e.disabled!==this.props.disabled||e.popoverEnabled!==this.props.popoverEnabled||e.type!==this.props.type||!!e.style},componentWillUnmount:function(){var e=this.props,t=e.gestureManager,n=e.id;t.unregisterDOMNode(n)},render:function(){var e=this.props,t=e.borders,n=e.childKeyIds,a=e.disabled,l=e.gestureManager,c=e.id,u=r(e,["borders","childKeyIds","disabled","gestureManager","id"]),h=a?{onTouchStart:function(e){return e.preventDefault()}}:{onTouchStart:function(e){return l.onTouchStart(e,c)},onTouchEnd:function(e){return l.onTouchEnd(e)},onTouchMove:function(e){return l.onTouchMove(e)},onTouchCancel:function(e){return l.onTouchCancel(e)}};return o.createElement(p,i({ref:function(e){return l.registerDOMNode(c,s.findDOMNode(e),n,t)},borders:t,disabled:a},h,u))}}),y=function(e){var t=e.ariaLabel,n=e.icon,r=e.type;return{ariaLabel:t,icon:n,type:r}},b=function(e,t){var n=e.gestures,o=t.keyConfig,s=r(t,["keyConfig"]),a=o.id,l=o.childKeyIds,p=o.type,u=l&&l.map(function(e){return c[e]}),h=p!==g.MANY&&u&&u.length>0;return i({},s,{childKeyIds:l,gestureManager:n.gestureManager,id:a,focused:n.focus===a,popoverEnabled:n.popover&&n.popover.parentId===a,childKeys:u},y(h?u[0]:o))};e.exports=l(b)(v)},function(e,t,n){"use strict";var r=n(34),i=n(275),o=i.connect,s=n(276),a=s.StyleSheet,l=n(278),p=n(303),c=n(304),u=n(243),h=u.View,d=n(266),f=d.column,m=d.row,g=d.fullWidth,v=n(240),y=v.innerBorderColor,b=v.innerBorderStyle,E=v.innerBorderWidthPx,T=v.gray85,x=r.createClass({displayName:"TwoPageKeypad",propTypes:{currentPage:r.PropTypes.oneOf([0,1]).isRequired,leftPage:r.PropTypes.node.isRequired,paginationEnabled:r.PropTypes.bool.isRequired,rightPage:r.PropTypes.node.isRequired},render:function(){var e=this.props,t=e.currentPage,n=e.leftPage,i=e.paginationEnabled,o=e.rightPage;return i?r.createElement(l,{style:[f,w.keypad]},r.createElement(c,{numPages:2,currentPage:t}),r.createElement(h,{style:w.borderTop},r.createElement(p,null,n,o))):r.createElement(l,{style:w.keypad},r.createElement(h,{style:m},r.createElement(h,{style:g},n),r.createElement(h,{style:[w.borderLeft,g]},o)))}}),w=a.create({keypad:{backgroundColor:T},borderTop:{borderTop:E+"px "+b+" "+y},borderLeft:{borderLeft:E+"px "+b+" "+y,boxSizing:"content-box"}}),C=function(e){return{paginationEnabled:e.layout.paginationEnabled}};e.exports=o(C)(x)},function(e,t,n){"use strict";function r(e,t){var n={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n}var i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},o=n(34),s=n(305),a=n(279),l=n(260),p=n(242),c=n(205),u=c.KeyTypes,h=n(218),d=h.keyIdPropType,f=o.createClass({displayName:"ManyKeypadButton",propTypes:{keys:o.PropTypes.arrayOf(d).isRequired},render:function(){var e=this.props,t=e.keys,n=r(e,["keys"]);if(0===t.length)return o.createElement(s,n);if(1===t.length){var c=p[t[0]];return o.createElement(a,i({keyConfig:c},n))}var h={id:l.MANY,type:u.MANY,childKeyIds:t};return o.createElement(a,i({keyConfig:h},n))}});e.exports=f},function(e,t,n){var r,i;(function(e){"use strict";var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol?"symbol":typeof e};!function(t,r){"object"===n(e)&&"object"===n(e.exports)?e.exports=t.document?r(t,!0):function(e){if(!e.document)throw new Error("jQuery requires a window with a document");return r(e)}:r(t)}("undefined"!=typeof window?window:void 0,function(o,s){function a(e){var t=!!e&&"length"in e&&e.length,n=ye.type(e);return"function"!==n&&!ye.isWindow(e)&&("array"===n||0===t||"number"==typeof t&&t>0&&t-1 in e)}function l(e,t,n){if(ye.isFunction(t))return ye.grep(e,function(e,r){return!!t.call(e,r,e)!==n});if(t.nodeType)return ye.grep(e,function(e){return e===t!==n});if("string"==typeof t){if(Ne.test(t))return ye.filter(t,e,n);t=ye.filter(t,e)}return ye.grep(e,function(e){return ye.inArray(e,t)>-1!==n})}function p(e,t){do e=e[t];while(e&&1!==e.nodeType);return e}function c(e){var t={};return ye.each(e.match(Re)||[],function(e,n){t[n]=!0}),t}function u(){le.addEventListener?(le.removeEventListener("DOMContentLoaded",h),o.removeEventListener("load",h)):(le.detachEvent("onreadystatechange",h),o.detachEvent("onload",h))}function h(){(le.addEventListener||"load"===o.event.type||"complete"===le.readyState)&&(u(),ye.ready())}function d(e,t,n){if(void 0===n&&1===e.nodeType){var r="data-"+t.replace(ze,"-$1").toLowerCase();if(n=e.getAttribute(r),"string"==typeof n){try{n="true"===n||"false"!==n&&("null"===n?null:+n+""===n?+n:qe.test(n)?ye.parseJSON(n):n)}catch(e){}ye.data(e,t,n)}else n=void 0}return n}function f(e){var t;for(t in e)if(("data"!==t||!ye.isEmptyObject(e[t]))&&"toJSON"!==t)return!1;return!0}function m(e,t,r,i){if(Fe(e)){var o,s,a=ye.expando,l=e.nodeType,p=l?ye.cache:e,c=l?e[a]:e[a]&&a;if(c&&p[c]&&(i||p[c].data)||void 0!==r||"string"!=typeof t)return c||(c=l?e[a]=ae.pop()||ye.guid++:a),p[c]||(p[c]=l?{}:{toJSON:ye.noop}),"object"!==("undefined"==typeof t?"undefined":n(t))&&"function"!=typeof t||(i?p[c]=ye.extend(p[c],t):p[c].data=ye.extend(p[c].data,t)),s=p[c],i||(s.data||(s.data={}),s=s.data),void 0!==r&&(s[ye.camelCase(t)]=r),"string"==typeof t?(o=s[t],null==o&&(o=s[ye.camelCase(t)])):o=s,o}}function g(e,t,n){if(Fe(e)){var r,i,o=e.nodeType,s=o?ye.cache:e,a=o?e[ye.expando]:ye.expando;if(s[a]){if(t&&(r=n?s[a]:s[a].data)){ye.isArray(t)?t=t.concat(ye.map(t,ye.camelCase)):t in r?t=[t]:(t=ye.camelCase(t),t=t in r?[t]:t.split(" ")),i=t.length;for(;i--;)delete r[t[i]];if(n?!f(r):!ye.isEmptyObject(r))return}(n||(delete s[a].data,f(s[a])))&&(o?ye.cleanData([e],!0):ge.deleteExpando||s!=s.window?delete s[a]:s[a]=void 0)}}}function v(e,t,n,r){var i,o=1,s=20,a=r?function(){return r.cur()}:function(){return ye.css(e,t,"")},l=a(),p=n&&n[3]||(ye.cssNumber[t]?"":"px"),c=(ye.cssNumber[t]||"px"!==p&&+l)&&je.exec(ye.css(e,t));if(c&&c[3]!==p){p=p||c[3],n=n||[],c=+l||1;do o=o||".5",c/=o,ye.style(e,t,c+p);while(o!==(o=a()/l)&&1!==o&&--s)}return n&&(c=+c||+l||0,i=n[1]?c+(n[1]+1)*n[2]:+n[2],r&&(r.unit=p,r.start=c,r.end=i)),i}function y(e){var t=Ke.split("|"),n=e.createDocumentFragment();if(n.createElement)for(;t.length;)n.createElement(t.pop());return n}function b(e,t){var n,r,i=0,o="undefined"!=typeof e.getElementsByTagName?e.getElementsByTagName(t||"*"):"undefined"!=typeof e.querySelectorAll?e.querySelectorAll(t||"*"):void 0;if(!o)for(o=[],n=e.childNodes||e;null!=(r=n[i]);i++)!t||ye.nodeName(r,t)?o.push(r):ye.merge(o,b(r,t));return void 0===t||t&&ye.nodeName(e,t)?ye.merge([e],o):o}function E(e,t){for(var n,r=0;null!=(n=e[r]);r++)ye._data(n,"globalEval",!t||ye._data(t[r],"globalEval"))}function T(e){Ve.test(e.type)&&(e.defaultChecked=e.checked)}function x(e,t,n,r,i){for(var o,s,a,l,p,c,u,h=e.length,d=y(t),f=[],m=0;m<h;m++)if(s=e[m],s||0===s)if("object"===ye.type(s))ye.merge(f,s.nodeType?[s]:s);else if(Je.test(s)){for(l=l||d.appendChild(t.createElement("div")),p=(Ge.exec(s)||["",""])[1].toLowerCase(),u=Xe[p]||Xe._default,l.innerHTML=u[1]+ye.htmlPrefilter(s)+u[2],o=u[0];o--;)l=l.lastChild;if(!ge.leadingWhitespace&&Ye.test(s)&&f.push(t.createTextNode(Ye.exec(s)[0])),!ge.tbody)for(s="table"!==p||Qe.test(s)?"<table>"!==u[1]||Qe.test(s)?0:l:l.firstChild,o=s&&s.childNodes.length;o--;)ye.nodeName(c=s.childNodes[o],"tbody")&&!c.childNodes.length&&s.removeChild(c);for(ye.merge(f,l.childNodes),l.textContent="";l.firstChild;)l.removeChild(l.firstChild);l=d.lastChild}else f.push(t.createTextNode(s));for(l&&d.removeChild(l),ge.appendChecked||ye.grep(b(f,"input"),T),m=0;s=f[m++];)if(r&&ye.inArray(s,r)>-1)i&&i.push(s);else if(a=ye.contains(s.ownerDocument,s),l=b(d.appendChild(s),"script"),a&&E(l),n)for(o=0;s=l[o++];)$e.test(s.type||"")&&n.push(s);return l=null,d}function w(){return!0}function C(){return!1}function P(){try{return le.activeElement}catch(e){}}function S(e,t,r,i,o,s){var a,l;if("object"===("undefined"==typeof t?"undefined":n(t))){"string"!=typeof r&&(i=i||r,r=void 0);for(l in t)S(e,l,r,i,t[l],s);return e}if(null==i&&null==o?(o=r,i=r=void 0):null==o&&("string"==typeof r?(o=i,i=void 0):(o=i,i=r,r=void 0)),o===!1)o=C;else if(!o)return e;return 1===s&&(a=o,o=function(e){return ye().off(e),a.apply(this,arguments)},o.guid=a.guid||(a.guid=ye.guid++)),e.each(function(){ye.event.add(this,t,o,i,r)})}function k(e,t){return ye.nodeName(e,"table")&&ye.nodeName(11!==t.nodeType?t:t.firstChild,"tr")?e.getElementsByTagName("tbody")[0]||e.appendChild(e.ownerDocument.createElement("tbody")):e}function N(e){return e.type=(null!==ye.find.attr(e,"type"))+"/"+e.type,e}function M(e){var t=pt.exec(e.type);return t?e.type=t[1]:e.removeAttribute("type"),e}function _(e,t){if(1===t.nodeType&&ye.hasData(e)){var n,r,i,o=ye._data(e),s=ye._data(t,o),a=o.events;if(a){delete s.handle,s.events={};for(n in a)for(r=0,i=a[n].length;r<i;r++)ye.event.add(t,n,a[n][r])}s.data&&(s.data=ye.extend({},s.data))}}function O(e,t){var n,r,i;if(1===t.nodeType){if(n=t.nodeName.toLowerCase(),!ge.noCloneEvent&&t[ye.expando]){i=ye._data(t);for(r in i.events)ye.removeEvent(t,r,i.handle);t.removeAttribute(ye.expando)}"script"===n&&t.text!==e.text?(N(t).text=e.text,M(t)):"object"===n?(t.parentNode&&(t.outerHTML=e.outerHTML),ge.html5Clone&&e.innerHTML&&!ye.trim(t.innerHTML)&&(t.innerHTML=e.innerHTML)):"input"===n&&Ve.test(e.type)?(t.defaultChecked=t.checked=e.checked,t.value!==e.value&&(t.value=e.value)):"option"===n?t.defaultSelected=t.selected=e.defaultSelected:"input"!==n&&"textarea"!==n||(t.defaultValue=e.defaultValue)}}function A(e,t,n,r){t=ce.apply([],t);var i,o,s,a,l,p,c=0,u=e.length,h=u-1,d=t[0],f=ye.isFunction(d);if(f||u>1&&"string"==typeof d&&!ge.checkClone&&lt.test(d))return e.each(function(i){var o=e.eq(i);f&&(t[0]=d.call(this,i,o.html())),A(o,t,n,r)});if(u&&(p=x(t,e[0].ownerDocument,!1,e,r),i=p.firstChild,1===p.childNodes.length&&(p=i),i||r)){for(a=ye.map(b(p,"script"),N),s=a.length;c<u;c++)o=p,c!==h&&(o=ye.clone(o,!0,!0),s&&ye.merge(a,b(o,"script"))),n.call(e[c],o,c);if(s)for(l=a[a.length-1].ownerDocument,ye.map(a,M),c=0;c<s;c++)o=a[c],$e.test(o.type||"")&&!ye._data(o,"globalEval")&&ye.contains(l,o)&&(o.src?ye._evalUrl&&ye._evalUrl(o.src):ye.globalEval((o.text||o.textContent||o.innerHTML||"").replace(ct,"")));p=i=null}return e}function I(e,t,n){for(var r,i=t?ye.filter(t,e):e,o=0;null!=(r=i[o]);o++)n||1!==r.nodeType||ye.cleanData(b(r)),r.parentNode&&(n&&ye.contains(r.ownerDocument,r)&&E(b(r,"script")),r.parentNode.removeChild(r));return e}function R(e,t){var n=ye(t.createElement(e)).appendTo(t.body),r=ye.css(n[0],"display");return n.detach(),r}function D(e){var t=le,n=ft[e];return n||(n=R(e,t),"none"!==n&&n||(dt=(dt||ye("<iframe frameborder='0' width='0' height='0'/>")).appendTo(t.documentElement),t=(dt[0].contentWindow||dt[0].contentDocument).document,t.write(),t.close(),n=R(e,t),dt.detach()),ft[e]=n),n}function L(e,t){return{get:function(){return e()?void delete this.get:(this.get=t).apply(this,arguments)}}}function F(e){if(e in Mt)return e;for(var t=e.charAt(0).toUpperCase()+e.slice(1),n=Nt.length;n--;)if(e=Nt[n]+t,e in Mt)return e}function q(e,t){for(var n,r,i,o=[],s=0,a=e.length;s<a;s++)r=e[s],r.style&&(o[s]=ye._data(r,"olddisplay"),n=r.style.display,t?(o[s]||"none"!==n||(r.style.display=""),""===r.style.display&&He(r)&&(o[s]=ye._data(r,"olddisplay",D(r.nodeName)))):(i=He(r),(n&&"none"!==n||!i)&&ye._data(r,"olddisplay",i?n:ye.css(r,"display"))));for(s=0;s<a;s++)r=e[s],r.style&&(t&&"none"!==r.style.display&&""!==r.style.display||(r.style.display=t?o[s]||"":"none"));return e}function z(e,t,n){var r=Pt.exec(t);return r?Math.max(0,r[1]-(n||0))+(r[2]||"px"):t}function B(e,t,n,r,i){for(var o=n===(r?"border":"content")?4:"width"===t?1:0,s=0;o<4;o+=2)"margin"===n&&(s+=ye.css(e,n+We[o],!0,i)),r?("content"===n&&(s-=ye.css(e,"padding"+We[o],!0,i)),"margin"!==n&&(s-=ye.css(e,"border"+We[o]+"Width",!0,i))):(s+=ye.css(e,"padding"+We[o],!0,i),"padding"!==n&&(s+=ye.css(e,"border"+We[o]+"Width",!0,i)));return s}function j(e,t,n){var r=!0,i="width"===t?e.offsetWidth:e.offsetHeight,o=bt(e),s=ge.boxSizing&&"border-box"===ye.css(e,"boxSizing",!1,o);if(i<=0||null==i){if(i=Et(e,t,o),(i<0||null==i)&&(i=e.style[t]),gt.test(i))return i;r=s&&(ge.boxSizingReliable()||i===e.style[t]),i=parseFloat(i)||0}return i+B(e,t,n||(s?"border":"content"),r,o)+"px"}function W(e,t,n,r,i){return new W.prototype.init(e,t,n,r,i)}function H(){return o.setTimeout(function(){_t=void 0}),_t=ye.now()}function U(e,t){var n,r={height:e},i=0;for(t=t?1:0;i<4;i+=2-t)n=We[i],r["margin"+n]=r["padding"+n]=e;return t&&(r.opacity=r.width=e),r}function V(e,t,n){for(var r,i=(Y.tweeners[t]||[]).concat(Y.tweeners["*"]),o=0,s=i.length;o<s;o++)if(r=i[o].call(n,t,e))return r}function G(e,t,n){var r,i,o,s,a,l,p,c,u=this,h={},d=e.style,f=e.nodeType&&He(e),m=ye._data(e,"fxshow");n.queue||(a=ye._queueHooks(e,"fx"),null==a.unqueued&&(a.unqueued=0,l=a.empty.fire,a.empty.fire=function(){a.unqueued||l()}),a.unqueued++,u.always(function(){u.always(function(){a.unqueued--,ye.queue(e,"fx").length||a.empty.fire()})})),1===e.nodeType&&("height"in t||"width"in t)&&(n.overflow=[d.overflow,d.overflowX,d.overflowY],p=ye.css(e,"display"),c="none"===p?ye._data(e,"olddisplay")||D(e.nodeName):p,"inline"===c&&"none"===ye.css(e,"float")&&(ge.inlineBlockNeedsLayout&&"inline"!==D(e.nodeName)?d.zoom=1:d.display="inline-block")),n.overflow&&(d.overflow="hidden",ge.shrinkWrapBlocks()||u.always(function(){d.overflow=n.overflow[0],d.overflowX=n.overflow[1],d.overflowY=n.overflow[2]}));for(r in t)if(i=t[r],At.exec(i)){if(delete t[r],o=o||"toggle"===i,i===(f?"hide":"show")){if("show"!==i||!m||void 0===m[r])continue;f=!0}h[r]=m&&m[r]||ye.style(e,r)}else p=void 0;if(ye.isEmptyObject(h))"inline"===("none"===p?D(e.nodeName):p)&&(d.display=p);else{m?"hidden"in m&&(f=m.hidden):m=ye._data(e,"fxshow",{}),o&&(m.hidden=!f),f?ye(e).show():u.done(function(){ye(e).hide()}),u.done(function(){var t;ye._removeData(e,"fxshow");for(t in h)ye.style(e,t,h[t])});for(r in h)s=V(f?m[r]:0,r,u),r in m||(m[r]=s.start,f&&(s.end=s.start,s.start="width"===r||"height"===r?1:0))}}function $(e,t){var n,r,i,o,s;for(n in e)if(r=ye.camelCase(n),i=t[r],o=e[n],ye.isArray(o)&&(i=o[1],o=e[n]=o[0]),n!==r&&(e[r]=o,delete e[n]),s=ye.cssHooks[r],s&&"expand"in s){o=s.expand(o),delete e[r];for(n in o)n in e||(e[n]=o[n],t[n]=i)}else t[r]=i}function Y(e,t,n){var r,i,o=0,s=Y.prefilters.length,a=ye.Deferred().always(function(){delete l.elem}),l=function(){if(i)return!1;for(var t=_t||H(),n=Math.max(0,p.startTime+p.duration-t),r=n/p.duration||0,o=1-r,s=0,l=p.tweens.length;s<l;s++)p.tweens[s].run(o);return a.notifyWith(e,[p,o,n]),o<1&&l?n:(a.resolveWith(e,[p]),!1)},p=a.promise({elem:e,props:ye.extend({},t),opts:ye.extend(!0,{specialEasing:{},easing:ye.easing._default},n),originalProperties:t,originalOptions:n,startTime:_t||H(),duration:n.duration,tweens:[],createTween:function(t,n){var r=ye.Tween(e,p.opts,t,n,p.opts.specialEasing[t]||p.opts.easing);return p.tweens.push(r),r},stop:function(t){var n=0,r=t?p.tweens.length:0;if(i)return this;for(i=!0;n<r;n++)p.tweens[n].run(1);return t?(a.notifyWith(e,[p,1,0]),a.resolveWith(e,[p,t])):a.rejectWith(e,[p,t]),this}}),c=p.props;for($(c,p.opts.specialEasing);o<s;o++)if(r=Y.prefilters[o].call(p,e,c,p.opts))return ye.isFunction(r.stop)&&(ye._queueHooks(p.elem,p.opts.queue).stop=ye.proxy(r.stop,r)),r;return ye.map(c,V,p),ye.isFunction(p.opts.start)&&p.opts.start.call(e,p),ye.fx.timer(ye.extend(l,{elem:e,anim:p,queue:p.opts.queue})),p.progress(p.opts.progress).done(p.opts.done,p.opts.complete).fail(p.opts.fail).always(p.opts.always)}function K(e){return ye.attr(e,"class")||""}function X(e){return function(t,n){"string"!=typeof t&&(n=t,t="*");var r,i=0,o=t.toLowerCase().match(Re)||[];if(ye.isFunction(n))for(;r=o[i++];)"+"===r.charAt(0)?(r=r.slice(1)||"*",(e[r]=e[r]||[]).unshift(n)):(e[r]=e[r]||[]).push(n)}}function J(e,t,n,r){function i(a){var l;return o[a]=!0,ye.each(e[a]||[],function(e,a){var p=a(t,n,r);return"string"!=typeof p||s||o[p]?s?!(l=p):void 0:(t.dataTypes.unshift(p),i(p),!1)}),l}var o={},s=e===rn;return i(t.dataTypes[0])||!o["*"]&&i("*")}function Q(e,t){var n,r,i=ye.ajaxSettings.flatOptions||{};for(r in t)void 0!==t[r]&&((i[r]?e:n||(n={}))[r]=t[r]);return n&&ye.extend(!0,e,n),e}function Z(e,t,n){for(var r,i,o,s,a=e.contents,l=e.dataTypes;"*"===l[0];)l.shift(),void 0===i&&(i=e.mimeType||t.getResponseHeader("Content-Type"));if(i)for(s in a)if(a[s]&&a[s].test(i)){l.unshift(s);break}if(l[0]in n)o=l[0];else{for(s in n){if(!l[0]||e.converters[s+" "+l[0]]){o=s;break}r||(r=s)}o=o||r}if(o)return o!==l[0]&&l.unshift(o),n[o]}function ee(e,t,n,r){var i,o,s,a,l,p={},c=e.dataTypes.slice();if(c[1])for(s in e.converters)p[s.toLowerCase()]=e.converters[s];for(o=c.shift();o;)if(e.responseFields[o]&&(n[e.responseFields[o]]=t),!l&&r&&e.dataFilter&&(t=e.dataFilter(t,e.dataType)),l=o,o=c.shift())if("*"===o)o=l;else if("*"!==l&&l!==o){if(s=p[l+" "+o]||p["* "+o],!s)for(i in p)if(a=i.split(" "),a[1]===o&&(s=p[l+" "+a[0]]||p["* "+a[0]])){s===!0?s=p[i]:p[i]!==!0&&(o=a[0],c.unshift(a[1]));break}if(s!==!0)if(s&&e.throws)t=s(t);else try{t=s(t)}catch(e){return{state:"parsererror",error:s?e:"No conversion from "+l+" to "+o}}}return{state:"success",data:t}}function te(e){return e.style&&e.style.display||ye.css(e,"display")}function ne(e){if(!ye.contains(e.ownerDocument||le,e))return!0;for(;e&&1===e.nodeType;){if("none"===te(e)||"hidden"===e.type)return!0;e=e.parentNode}return!1}function re(e,t,r,i){var o;if(ye.isArray(t))ye.each(t,function(t,o){r||pn.test(e)?i(e,o):re(e+"["+("object"===("undefined"==typeof o?"undefined":n(o))&&null!=o?t:"")+"]",o,r,i)});else if(r||"object"!==ye.type(t))i(e,t);else for(o in t)re(e+"["+o+"]",t[o],r,i)}function ie(){try{return new o.XMLHttpRequest}catch(e){}}function oe(){try{return new o.ActiveXObject("Microsoft.XMLHTTP")}catch(e){}}function se(e){return ye.isWindow(e)?e:9===e.nodeType&&(e.defaultView||e.parentWindow)}var ae=[],le=o.document,pe=ae.slice,ce=ae.concat,ue=ae.push,he=ae.indexOf,de={},fe=de.toString,me=de.hasOwnProperty,ge={},ve="1.12.4",ye=function e(t,n){return new e.fn.init(t,n)},be=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,Ee=/^-ms-/,Te=/-([\da-z])/gi,xe=function(e,t){return t.toUpperCase()};ye.fn=ye.prototype={jquery:ve,constructor:ye,selector:"",length:0,toArray:function(){return pe.call(this)},get:function(e){return null!=e?e<0?this[e+this.length]:this[e]:pe.call(this)},pushStack:function(e){var t=ye.merge(this.constructor(),e);return t.prevObject=this,t.context=this.context,t},each:function(e){return ye.each(this,e)},map:function(e){return this.pushStack(ye.map(this,function(t,n){return e.call(t,n,t)}))},slice:function(){return this.pushStack(pe.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(e){var t=this.length,n=+e+(e<0?t:0);return this.pushStack(n>=0&&n<t?[this[n]]:[])},end:function(){return this.prevObject||this.constructor()},push:ue,sort:ae.sort,splice:ae.splice},ye.extend=ye.fn.extend=function(){var e,t,r,i,o,s,a=arguments[0]||{},l=1,p=arguments.length,c=!1;for("boolean"==typeof a&&(c=a,a=arguments[l]||{},l++),"object"===("undefined"==typeof a?"undefined":n(a))||ye.isFunction(a)||(a={}),l===p&&(a=this,l--);l<p;l++)if(null!=(o=arguments[l]))for(i in o)e=a[i],r=o[i],a!==r&&(c&&r&&(ye.isPlainObject(r)||(t=ye.isArray(r)))?(t?(t=!1,s=e&&ye.isArray(e)?e:[]):s=e&&ye.isPlainObject(e)?e:{},a[i]=ye.extend(c,s,r)):void 0!==r&&(a[i]=r));return a},ye.extend({expando:"jQuery"+(ve+Math.random()).replace(/\D/g,""),isReady:!0,error:function(e){throw new Error(e)},noop:function(){},isFunction:function(e){return"function"===ye.type(e)},isArray:Array.isArray||function(e){return"array"===ye.type(e)},isWindow:function(e){return null!=e&&e==e.window},isNumeric:function(e){var t=e&&e.toString();return!ye.isArray(e)&&t-parseFloat(t)+1>=0},isEmptyObject:function(e){var t;for(t in e)return!1;return!0},isPlainObject:function(e){var t;if(!e||"object"!==ye.type(e)||e.nodeType||ye.isWindow(e))return!1;try{if(e.constructor&&!me.call(e,"constructor")&&!me.call(e.constructor.prototype,"isPrototypeOf"))return!1}catch(e){return!1}if(!ge.ownFirst)for(t in e)return me.call(e,t);for(t in e);return void 0===t||me.call(e,t)},type:function(e){return null==e?e+"":"object"===("undefined"==typeof e?"undefined":n(e))||"function"==typeof e?de[fe.call(e)]||"object":"undefined"==typeof e?"undefined":n(e)},globalEval:function(e){e&&ye.trim(e)&&(o.execScript||function(e){o.eval.call(o,e)})(e)},camelCase:function(e){return e.replace(Ee,"ms-").replace(Te,xe)},nodeName:function(e,t){return e.nodeName&&e.nodeName.toLowerCase()===t.toLowerCase()},each:function(e,t){var n,r=0;if(a(e))for(n=e.length;r<n&&t.call(e[r],r,e[r])!==!1;r++);else for(r in e)if(t.call(e[r],r,e[r])===!1)break;return e},trim:function(e){return null==e?"":(e+"").replace(be,"")},makeArray:function(e,t){var n=t||[];return null!=e&&(a(Object(e))?ye.merge(n,"string"==typeof e?[e]:e):ue.call(n,e)),n},inArray:function(e,t,n){var r;if(t){if(he)return he.call(t,e,n);for(r=t.length,n=n?n<0?Math.max(0,r+n):n:0;n<r;n++)if(n in t&&t[n]===e)return n}return-1},merge:function(e,t){for(var n=+t.length,r=0,i=e.length;r<n;)e[i++]=t[r++];if(n!==n)for(;void 0!==t[r];)e[i++]=t[r++];return e.length=i,e},grep:function(e,t,n){for(var r,i=[],o=0,s=e.length,a=!n;o<s;o++)r=!t(e[o],o),r!==a&&i.push(e[o]);return i},map:function(e,t,n){var r,i,o=0,s=[];if(a(e))for(r=e.length;o<r;o++)i=t(e[o],o,n),null!=i&&s.push(i);else for(o in e)i=t(e[o],o,n),null!=i&&s.push(i);return ce.apply([],s)},guid:1,proxy:function e(t,n){var r,e,i;if("string"==typeof n&&(i=t[n],n=t,t=i),ye.isFunction(t))return r=pe.call(arguments,2),e=function(){return t.apply(n||this,r.concat(pe.call(arguments)))},e.guid=t.guid=t.guid||ye.guid++,e},now:function(){return+new Date},support:ge}),"function"==typeof Symbol&&(ye.fn[Symbol.iterator]=ae[Symbol.iterator]),ye.each("Boolean Number String Function Array Date RegExp Object Error Symbol".split(" "),function(e,t){de["[object "+t+"]"]=t.toLowerCase()});var we=function(e){function t(e,t,n,r){var i,o,s,a,l,p,u,d,f=t&&t.ownerDocument,m=t?t.nodeType:9;if(n=n||[],"string"!=typeof e||!e||1!==m&&9!==m&&11!==m)return n;if(!r&&((t?t.ownerDocument||t:B)!==A&&O(t),t=t||A,R)){if(11!==m&&(p=ve.exec(e)))if(i=p[1]){if(9===m){if(!(s=t.getElementById(i)))return n;if(s.id===i)return n.push(s),n}else if(f&&(s=f.getElementById(i))&&q(t,s)&&s.id===i)return n.push(s),n}else{if(p[2])return Q.apply(n,t.getElementsByTagName(e)),n;if((i=p[3])&&T.getElementsByClassName&&t.getElementsByClassName)return Q.apply(n,t.getElementsByClassName(i)),n}if(T.qsa&&!V[e+" "]&&(!D||!D.test(e))){if(1!==m)f=t,d=e;else if("object"!==t.nodeName.toLowerCase()){for((a=t.getAttribute("id"))?a=a.replace(be,"\\$&"):t.setAttribute("id",a=z),u=P(e),o=u.length,l=he.test(a)?"#"+a:"[id='"+a+"']";o--;)u[o]=l+" "+h(u[o]);d=u.join(","),f=ye.test(e)&&c(t.parentNode)||t}if(d)try{return Q.apply(n,f.querySelectorAll(d)),n}catch(e){}finally{a===z&&t.removeAttribute("id")}}}return k(e.replace(ae,"$1"),t,n,r)}function n(){function e(n,r){return t.push(n+" ")>x.cacheLength&&delete e[t.shift()],e[n+" "]=r}var t=[];return e}function r(e){return e[z]=!0,e}function i(e){var t=A.createElement("div");try{return!!e(t)}catch(e){return!1}finally{t.parentNode&&t.parentNode.removeChild(t),t=null}}function o(e,t){for(var n=e.split("|"),r=n.length;r--;)x.attrHandle[n[r]]=t}function s(e,t){var n=t&&e,r=n&&1===e.nodeType&&1===t.nodeType&&(~t.sourceIndex||$)-(~e.sourceIndex||$);if(r)return r;if(n)for(;n=n.nextSibling;)if(n===t)return-1;return e?1:-1}function a(e){return function(t){var n=t.nodeName.toLowerCase();return"input"===n&&t.type===e}}function l(e){return function(t){var n=t.nodeName.toLowerCase();return("input"===n||"button"===n)&&t.type===e}}function p(e){return r(function(t){return t=+t,r(function(n,r){for(var i,o=e([],n.length,t),s=o.length;s--;)n[i=o[s]]&&(n[i]=!(r[i]=n[i]))})})}function c(e){return e&&"undefined"!=typeof e.getElementsByTagName&&e}function u(){}function h(e){for(var t=0,n=e.length,r="";t<n;t++)r+=e[t].value;return r}function d(e,t,n){var r=t.dir,i=n&&"parentNode"===r,o=W++;return t.first?function(t,n,o){for(;t=t[r];)if(1===t.nodeType||i)return e(t,n,o)}:function(t,n,s){var a,l,p,c=[j,o];if(s){for(;t=t[r];)if((1===t.nodeType||i)&&e(t,n,s))return!0}else for(;t=t[r];)if(1===t.nodeType||i){if(p=t[z]||(t[z]={}),l=p[t.uniqueID]||(p[t.uniqueID]={}),(a=l[r])&&a[0]===j&&a[1]===o)return c[2]=a[2];if(l[r]=c,c[2]=e(t,n,s))return!0}}}function f(e){return e.length>1?function(t,n,r){for(var i=e.length;i--;)if(!e[i](t,n,r))return!1;return!0}:e[0]}function m(e,n,r){for(var i=0,o=n.length;i<o;i++)t(e,n[i],r);return r}function g(e,t,n,r,i){for(var o,s=[],a=0,l=e.length,p=null!=t;a<l;a++)(o=e[a])&&(n&&!n(o,r,i)||(s.push(o),p&&t.push(a)));return s}function v(e,t,n,i,o,s){return i&&!i[z]&&(i=v(i)),o&&!o[z]&&(o=v(o,s)),r(function(r,s,a,l){var p,c,u,h=[],d=[],f=s.length,v=r||m(t||"*",a.nodeType?[a]:a,[]),y=!e||!r&&t?v:g(v,h,e,a,l),b=n?o||(r?e:f||i)?[]:s:y;if(n&&n(y,b,a,l),i)for(p=g(b,d),i(p,[],a,l),c=p.length;c--;)(u=p[c])&&(b[d[c]]=!(y[d[c]]=u));if(r){if(o||e){if(o){for(p=[],c=b.length;c--;)(u=b[c])&&p.push(y[c]=u);o(null,b=[],p,l)}for(c=b.length;c--;)(u=b[c])&&(p=o?ee(r,u):h[c])>-1&&(r[p]=!(s[p]=u))}}else b=g(b===s?b.splice(f,b.length):b),o?o(null,s,b,l):Q.apply(s,b)})}function y(e){for(var t,n,r,i=e.length,o=x.relative[e[0].type],s=o||x.relative[" "],a=o?1:0,l=d(function(e){return e===t},s,!0),p=d(function(e){return ee(t,e)>-1},s,!0),c=[function(e,n,r){var i=!o&&(r||n!==N)||((t=n).nodeType?l(e,n,r):p(e,n,r));return t=null,i}];a<i;a++)if(n=x.relative[e[a].type])c=[d(f(c),n)];else{if(n=x.filter[e[a].type].apply(null,e[a].matches),n[z]){for(r=++a;r<i&&!x.relative[e[r].type];r++);return v(a>1&&f(c),a>1&&h(e.slice(0,a-1).concat({value:" "===e[a-2].type?"*":""})).replace(ae,"$1"),n,a<r&&y(e.slice(a,r)),r<i&&y(e=e.slice(r)),r<i&&h(e))}c.push(n)}return f(c)}function b(e,n){var i=n.length>0,o=e.length>0,s=function(r,s,a,l,p){var c,u,h,d=0,f="0",m=r&&[],v=[],y=N,b=r||o&&x.find.TAG("*",p),E=j+=null==y?1:Math.random()||.1,T=b.length;for(p&&(N=s===A||s||p);f!==T&&null!=(c=b[f]);f++){if(o&&c){for(u=0,s||c.ownerDocument===A||(O(c),a=!R);h=e[u++];)if(h(c,s||A,a)){l.push(c);break}p&&(j=E)}i&&((c=!h&&c)&&d--,r&&m.push(c))}if(d+=f,i&&f!==d){for(u=0;h=n[u++];)h(m,v,s,a);if(r){if(d>0)for(;f--;)m[f]||v[f]||(v[f]=X.call(l));v=g(v)}Q.apply(l,v),p&&!r&&v.length>0&&d+n.length>1&&t.uniqueSort(l)}return p&&(j=E,N=y),m};return i?r(s):s}var E,T,x,w,C,P,S,k,N,M,_,O,A,I,R,D,L,F,q,z="sizzle"+1*new Date,B=e.document,j=0,W=0,H=n(),U=n(),V=n(),G=function(e,t){return e===t&&(_=!0),0},$=1<<31,Y={}.hasOwnProperty,K=[],X=K.pop,J=K.push,Q=K.push,Z=K.slice,ee=function(e,t){for(var n=0,r=e.length;n<r;n++)if(e[n]===t)return n;return-1},te="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",ne="[\\x20\\t\\r\\n\\f]",re="(?:\\\\.|[\\w-]|[^\\x00-\\xa0])+",ie="\\["+ne+"*("+re+")(?:"+ne+"*([*^$|!~]?=)"+ne+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+re+"))|)"+ne+"*\\]",oe=":("+re+")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+ie+")*)|.*)\\)|)",se=new RegExp(ne+"+","g"),ae=new RegExp("^"+ne+"+|((?:^|[^\\\\])(?:\\\\.)*)"+ne+"+$","g"),le=new RegExp("^"+ne+"*,"+ne+"*"),pe=new RegExp("^"+ne+"*([>+~]|"+ne+")"+ne+"*"),ce=new RegExp("="+ne+"*([^\\]'\"]*?)"+ne+"*\\]","g"),ue=new RegExp(oe),he=new RegExp("^"+re+"$"),de={ID:new RegExp("^#("+re+")"),CLASS:new RegExp("^\\.("+re+")"),TAG:new RegExp("^("+re+"|[*])"),ATTR:new RegExp("^"+ie),PSEUDO:new RegExp("^"+oe),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+ne+"*(even|odd|(([+-]|)(\\d*)n|)"+ne+"*(?:([+-]|)"+ne+"*(\\d+)|))"+ne+"*\\)|)","i"),bool:new RegExp("^(?:"+te+")$","i"),needsContext:new RegExp("^"+ne+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+ne+"*((?:-\\d)?\\d*)"+ne+"*\\)|)(?=[^-]|$)","i")},fe=/^(?:input|select|textarea|button)$/i,me=/^h\d$/i,ge=/^[^{]+\{\s*\[native \w/,ve=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,ye=/[+~]/,be=/'|\\/g,Ee=new RegExp("\\\\([\\da-f]{1,6}"+ne+"?|("+ne+")|.)","ig"),Te=function(e,t,n){var r="0x"+t-65536;return r!==r||n?t:r<0?String.fromCharCode(r+65536):String.fromCharCode(r>>10|55296,1023&r|56320)},xe=function(){O()};try{Q.apply(K=Z.call(B.childNodes),B.childNodes),K[B.childNodes.length].nodeType}catch(e){Q={apply:K.length?function(e,t){J.apply(e,Z.call(t))}:function(e,t){for(var n=e.length,r=0;e[n++]=t[r++];);e.length=n-1}}}T=t.support={},C=t.isXML=function(e){var t=e&&(e.ownerDocument||e).documentElement;return!!t&&"HTML"!==t.nodeName},O=t.setDocument=function(e){var t,n,r=e?e.ownerDocument||e:B;return r!==A&&9===r.nodeType&&r.documentElement?(A=r,I=A.documentElement,R=!C(A),(n=A.defaultView)&&n.top!==n&&(n.addEventListener?n.addEventListener("unload",xe,!1):n.attachEvent&&n.attachEvent("onunload",xe)),T.attributes=i(function(e){return e.className="i",!e.getAttribute("className")}),T.getElementsByTagName=i(function(e){return e.appendChild(A.createComment("")),!e.getElementsByTagName("*").length}),T.getElementsByClassName=ge.test(A.getElementsByClassName),T.getById=i(function(e){return I.appendChild(e).id=z,!A.getElementsByName||!A.getElementsByName(z).length}),T.getById?(x.find.ID=function(e,t){if("undefined"!=typeof t.getElementById&&R){var n=t.getElementById(e);return n?[n]:[]}},x.filter.ID=function(e){var t=e.replace(Ee,Te);return function(e){return e.getAttribute("id")===t}}):(delete x.find.ID,x.filter.ID=function(e){var t=e.replace(Ee,Te);return function(e){var n="undefined"!=typeof e.getAttributeNode&&e.getAttributeNode("id");return n&&n.value===t}}),x.find.TAG=T.getElementsByTagName?function(e,t){return"undefined"!=typeof t.getElementsByTagName?t.getElementsByTagName(e):T.qsa?t.querySelectorAll(e):void 0}:function(e,t){var n,r=[],i=0,o=t.getElementsByTagName(e);if("*"===e){for(;n=o[i++];)1===n.nodeType&&r.push(n);return r}return o},x.find.CLASS=T.getElementsByClassName&&function(e,t){if("undefined"!=typeof t.getElementsByClassName&&R)return t.getElementsByClassName(e)},L=[],D=[],(T.qsa=ge.test(A.querySelectorAll))&&(i(function(e){I.appendChild(e).innerHTML="<a id='"+z+"'></a><select id='"+z+"-\r\\' msallowcapture=''><option selected=''></option></select>",e.querySelectorAll("[msallowcapture^='']").length&&D.push("[*^$]="+ne+"*(?:''|\"\")"),e.querySelectorAll("[selected]").length||D.push("\\["+ne+"*(?:value|"+te+")"),e.querySelectorAll("[id~="+z+"-]").length||D.push("~="),
e.querySelectorAll(":checked").length||D.push(":checked"),e.querySelectorAll("a#"+z+"+*").length||D.push(".#.+[+~]")}),i(function(e){var t=A.createElement("input");t.setAttribute("type","hidden"),e.appendChild(t).setAttribute("name","D"),e.querySelectorAll("[name=d]").length&&D.push("name"+ne+"*[*^$|!~]?="),e.querySelectorAll(":enabled").length||D.push(":enabled",":disabled"),e.querySelectorAll("*,:x"),D.push(",.*:")})),(T.matchesSelector=ge.test(F=I.matches||I.webkitMatchesSelector||I.mozMatchesSelector||I.oMatchesSelector||I.msMatchesSelector))&&i(function(e){T.disconnectedMatch=F.call(e,"div"),F.call(e,"[s!='']:x"),L.push("!=",oe)}),D=D.length&&new RegExp(D.join("|")),L=L.length&&new RegExp(L.join("|")),t=ge.test(I.compareDocumentPosition),q=t||ge.test(I.contains)?function(e,t){var n=9===e.nodeType?e.documentElement:e,r=t&&t.parentNode;return e===r||!(!r||1!==r.nodeType||!(n.contains?n.contains(r):e.compareDocumentPosition&&16&e.compareDocumentPosition(r)))}:function(e,t){if(t)for(;t=t.parentNode;)if(t===e)return!0;return!1},G=t?function(e,t){if(e===t)return _=!0,0;var n=!e.compareDocumentPosition-!t.compareDocumentPosition;return n?n:(n=(e.ownerDocument||e)===(t.ownerDocument||t)?e.compareDocumentPosition(t):1,1&n||!T.sortDetached&&t.compareDocumentPosition(e)===n?e===A||e.ownerDocument===B&&q(B,e)?-1:t===A||t.ownerDocument===B&&q(B,t)?1:M?ee(M,e)-ee(M,t):0:4&n?-1:1)}:function(e,t){if(e===t)return _=!0,0;var n,r=0,i=e.parentNode,o=t.parentNode,a=[e],l=[t];if(!i||!o)return e===A?-1:t===A?1:i?-1:o?1:M?ee(M,e)-ee(M,t):0;if(i===o)return s(e,t);for(n=e;n=n.parentNode;)a.unshift(n);for(n=t;n=n.parentNode;)l.unshift(n);for(;a[r]===l[r];)r++;return r?s(a[r],l[r]):a[r]===B?-1:l[r]===B?1:0},A):A},t.matches=function(e,n){return t(e,null,null,n)},t.matchesSelector=function(e,n){if((e.ownerDocument||e)!==A&&O(e),n=n.replace(ce,"='$1']"),T.matchesSelector&&R&&!V[n+" "]&&(!L||!L.test(n))&&(!D||!D.test(n)))try{var r=F.call(e,n);if(r||T.disconnectedMatch||e.document&&11!==e.document.nodeType)return r}catch(e){}return t(n,A,null,[e]).length>0},t.contains=function(e,t){return(e.ownerDocument||e)!==A&&O(e),q(e,t)},t.attr=function(e,t){(e.ownerDocument||e)!==A&&O(e);var n=x.attrHandle[t.toLowerCase()],r=n&&Y.call(x.attrHandle,t.toLowerCase())?n(e,t,!R):void 0;return void 0!==r?r:T.attributes||!R?e.getAttribute(t):(r=e.getAttributeNode(t))&&r.specified?r.value:null},t.error=function(e){throw new Error("Syntax error, unrecognized expression: "+e)},t.uniqueSort=function(e){var t,n=[],r=0,i=0;if(_=!T.detectDuplicates,M=!T.sortStable&&e.slice(0),e.sort(G),_){for(;t=e[i++];)t===e[i]&&(r=n.push(i));for(;r--;)e.splice(n[r],1)}return M=null,e},w=t.getText=function(e){var t,n="",r=0,i=e.nodeType;if(i){if(1===i||9===i||11===i){if("string"==typeof e.textContent)return e.textContent;for(e=e.firstChild;e;e=e.nextSibling)n+=w(e)}else if(3===i||4===i)return e.nodeValue}else for(;t=e[r++];)n+=w(t);return n},x=t.selectors={cacheLength:50,createPseudo:r,match:de,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(e){return e[1]=e[1].replace(Ee,Te),e[3]=(e[3]||e[4]||e[5]||"").replace(Ee,Te),"~="===e[2]&&(e[3]=" "+e[3]+" "),e.slice(0,4)},CHILD:function(e){return e[1]=e[1].toLowerCase(),"nth"===e[1].slice(0,3)?(e[3]||t.error(e[0]),e[4]=+(e[4]?e[5]+(e[6]||1):2*("even"===e[3]||"odd"===e[3])),e[5]=+(e[7]+e[8]||"odd"===e[3])):e[3]&&t.error(e[0]),e},PSEUDO:function(e){var t,n=!e[6]&&e[2];return de.CHILD.test(e[0])?null:(e[3]?e[2]=e[4]||e[5]||"":n&&ue.test(n)&&(t=P(n,!0))&&(t=n.indexOf(")",n.length-t)-n.length)&&(e[0]=e[0].slice(0,t),e[2]=n.slice(0,t)),e.slice(0,3))}},filter:{TAG:function(e){var t=e.replace(Ee,Te).toLowerCase();return"*"===e?function(){return!0}:function(e){return e.nodeName&&e.nodeName.toLowerCase()===t}},CLASS:function(e){var t=H[e+" "];return t||(t=new RegExp("(^|"+ne+")"+e+"("+ne+"|$)"))&&H(e,function(e){return t.test("string"==typeof e.className&&e.className||"undefined"!=typeof e.getAttribute&&e.getAttribute("class")||"")})},ATTR:function(e,n,r){return function(i){var o=t.attr(i,e);return null==o?"!="===n:!n||(o+="","="===n?o===r:"!="===n?o!==r:"^="===n?r&&0===o.indexOf(r):"*="===n?r&&o.indexOf(r)>-1:"$="===n?r&&o.slice(-r.length)===r:"~="===n?(" "+o.replace(se," ")+" ").indexOf(r)>-1:"|="===n&&(o===r||o.slice(0,r.length+1)===r+"-"))}},CHILD:function(e,t,n,r,i){var o="nth"!==e.slice(0,3),s="last"!==e.slice(-4),a="of-type"===t;return 1===r&&0===i?function(e){return!!e.parentNode}:function(t,n,l){var p,c,u,h,d,f,m=o!==s?"nextSibling":"previousSibling",g=t.parentNode,v=a&&t.nodeName.toLowerCase(),y=!l&&!a,b=!1;if(g){if(o){for(;m;){for(h=t;h=h[m];)if(a?h.nodeName.toLowerCase()===v:1===h.nodeType)return!1;f=m="only"===e&&!f&&"nextSibling"}return!0}if(f=[s?g.firstChild:g.lastChild],s&&y){for(h=g,u=h[z]||(h[z]={}),c=u[h.uniqueID]||(u[h.uniqueID]={}),p=c[e]||[],d=p[0]===j&&p[1],b=d&&p[2],h=d&&g.childNodes[d];h=++d&&h&&h[m]||(b=d=0)||f.pop();)if(1===h.nodeType&&++b&&h===t){c[e]=[j,d,b];break}}else if(y&&(h=t,u=h[z]||(h[z]={}),c=u[h.uniqueID]||(u[h.uniqueID]={}),p=c[e]||[],d=p[0]===j&&p[1],b=d),b===!1)for(;(h=++d&&h&&h[m]||(b=d=0)||f.pop())&&((a?h.nodeName.toLowerCase()!==v:1!==h.nodeType)||!++b||(y&&(u=h[z]||(h[z]={}),c=u[h.uniqueID]||(u[h.uniqueID]={}),c[e]=[j,b]),h!==t)););return b-=i,b===r||b%r===0&&b/r>=0}}},PSEUDO:function(e,n){var i,o=x.pseudos[e]||x.setFilters[e.toLowerCase()]||t.error("unsupported pseudo: "+e);return o[z]?o(n):o.length>1?(i=[e,e,"",n],x.setFilters.hasOwnProperty(e.toLowerCase())?r(function(e,t){for(var r,i=o(e,n),s=i.length;s--;)r=ee(e,i[s]),e[r]=!(t[r]=i[s])}):function(e){return o(e,0,i)}):o}},pseudos:{not:r(function(e){var t=[],n=[],i=S(e.replace(ae,"$1"));return i[z]?r(function(e,t,n,r){for(var o,s=i(e,null,r,[]),a=e.length;a--;)(o=s[a])&&(e[a]=!(t[a]=o))}):function(e,r,o){return t[0]=e,i(t,null,o,n),t[0]=null,!n.pop()}}),has:r(function(e){return function(n){return t(e,n).length>0}}),contains:r(function(e){return e=e.replace(Ee,Te),function(t){return(t.textContent||t.innerText||w(t)).indexOf(e)>-1}}),lang:r(function(e){return he.test(e||"")||t.error("unsupported lang: "+e),e=e.replace(Ee,Te).toLowerCase(),function(t){var n;do if(n=R?t.lang:t.getAttribute("xml:lang")||t.getAttribute("lang"))return n=n.toLowerCase(),n===e||0===n.indexOf(e+"-");while((t=t.parentNode)&&1===t.nodeType);return!1}}),target:function(t){var n=e.location&&e.location.hash;return n&&n.slice(1)===t.id},root:function(e){return e===I},focus:function(e){return e===A.activeElement&&(!A.hasFocus||A.hasFocus())&&!!(e.type||e.href||~e.tabIndex)},enabled:function(e){return e.disabled===!1},disabled:function(e){return e.disabled===!0},checked:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&!!e.checked||"option"===t&&!!e.selected},selected:function(e){return e.parentNode&&e.parentNode.selectedIndex,e.selected===!0},empty:function(e){for(e=e.firstChild;e;e=e.nextSibling)if(e.nodeType<6)return!1;return!0},parent:function(e){return!x.pseudos.empty(e)},header:function(e){return me.test(e.nodeName)},input:function(e){return fe.test(e.nodeName)},button:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&"button"===e.type||"button"===t},text:function(e){var t;return"input"===e.nodeName.toLowerCase()&&"text"===e.type&&(null==(t=e.getAttribute("type"))||"text"===t.toLowerCase())},first:p(function(){return[0]}),last:p(function(e,t){return[t-1]}),eq:p(function(e,t,n){return[n<0?n+t:n]}),even:p(function(e,t){for(var n=0;n<t;n+=2)e.push(n);return e}),odd:p(function(e,t){for(var n=1;n<t;n+=2)e.push(n);return e}),lt:p(function(e,t,n){for(var r=n<0?n+t:n;--r>=0;)e.push(r);return e}),gt:p(function(e,t,n){for(var r=n<0?n+t:n;++r<t;)e.push(r);return e})}},x.pseudos.nth=x.pseudos.eq;for(E in{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})x.pseudos[E]=a(E);for(E in{submit:!0,reset:!0})x.pseudos[E]=l(E);return u.prototype=x.filters=x.pseudos,x.setFilters=new u,P=t.tokenize=function(e,n){var r,i,o,s,a,l,p,c=U[e+" "];if(c)return n?0:c.slice(0);for(a=e,l=[],p=x.preFilter;a;){r&&!(i=le.exec(a))||(i&&(a=a.slice(i[0].length)||a),l.push(o=[])),r=!1,(i=pe.exec(a))&&(r=i.shift(),o.push({value:r,type:i[0].replace(ae," ")}),a=a.slice(r.length));for(s in x.filter)!(i=de[s].exec(a))||p[s]&&!(i=p[s](i))||(r=i.shift(),o.push({value:r,type:s,matches:i}),a=a.slice(r.length));if(!r)break}return n?a.length:a?t.error(e):U(e,l).slice(0)},S=t.compile=function(e,t){var n,r=[],i=[],o=V[e+" "];if(!o){for(t||(t=P(e)),n=t.length;n--;)o=y(t[n]),o[z]?r.push(o):i.push(o);o=V(e,b(i,r)),o.selector=e}return o},k=t.select=function(e,t,n,r){var i,o,s,a,l,p="function"==typeof e&&e,u=!r&&P(e=p.selector||e);if(n=n||[],1===u.length){if(o=u[0]=u[0].slice(0),o.length>2&&"ID"===(s=o[0]).type&&T.getById&&9===t.nodeType&&R&&x.relative[o[1].type]){if(t=(x.find.ID(s.matches[0].replace(Ee,Te),t)||[])[0],!t)return n;p&&(t=t.parentNode),e=e.slice(o.shift().value.length)}for(i=de.needsContext.test(e)?0:o.length;i--&&(s=o[i],!x.relative[a=s.type]);)if((l=x.find[a])&&(r=l(s.matches[0].replace(Ee,Te),ye.test(o[0].type)&&c(t.parentNode)||t))){if(o.splice(i,1),e=r.length&&h(o),!e)return Q.apply(n,r),n;break}}return(p||S(e,u))(r,t,!R,n,!t||ye.test(e)&&c(t.parentNode)||t),n},T.sortStable=z.split("").sort(G).join("")===z,T.detectDuplicates=!!_,O(),T.sortDetached=i(function(e){return 1&e.compareDocumentPosition(A.createElement("div"))}),i(function(e){return e.innerHTML="<a href='#'></a>","#"===e.firstChild.getAttribute("href")})||o("type|href|height|width",function(e,t,n){if(!n)return e.getAttribute(t,"type"===t.toLowerCase()?1:2)}),T.attributes&&i(function(e){return e.innerHTML="<input/>",e.firstChild.setAttribute("value",""),""===e.firstChild.getAttribute("value")})||o("value",function(e,t,n){if(!n&&"input"===e.nodeName.toLowerCase())return e.defaultValue}),i(function(e){return null==e.getAttribute("disabled")})||o(te,function(e,t,n){var r;if(!n)return e[t]===!0?t.toLowerCase():(r=e.getAttributeNode(t))&&r.specified?r.value:null}),t}(o);ye.find=we,ye.expr=we.selectors,ye.expr[":"]=ye.expr.pseudos,ye.uniqueSort=ye.unique=we.uniqueSort,ye.text=we.getText,ye.isXMLDoc=we.isXML,ye.contains=we.contains;var Ce=function(e,t,n){for(var r=[],i=void 0!==n;(e=e[t])&&9!==e.nodeType;)if(1===e.nodeType){if(i&&ye(e).is(n))break;r.push(e)}return r},Pe=function(e,t){for(var n=[];e;e=e.nextSibling)1===e.nodeType&&e!==t&&n.push(e);return n},Se=ye.expr.match.needsContext,ke=/^<([\w-]+)\s*\/?>(?:<\/\1>|)$/,Ne=/^.[^:#\[\.,]*$/;ye.filter=function(e,t,n){var r=t[0];return n&&(e=":not("+e+")"),1===t.length&&1===r.nodeType?ye.find.matchesSelector(r,e)?[r]:[]:ye.find.matches(e,ye.grep(t,function(e){return 1===e.nodeType}))},ye.fn.extend({find:function(e){var t,n=[],r=this,i=r.length;if("string"!=typeof e)return this.pushStack(ye(e).filter(function(){for(t=0;t<i;t++)if(ye.contains(r[t],this))return!0}));for(t=0;t<i;t++)ye.find(e,r[t],n);return n=this.pushStack(i>1?ye.unique(n):n),n.selector=this.selector?this.selector+" "+e:e,n},filter:function(e){return this.pushStack(l(this,e||[],!1))},not:function(e){return this.pushStack(l(this,e||[],!0))},is:function(e){return!!l(this,"string"==typeof e&&Se.test(e)?ye(e):e||[],!1).length}});var Me,_e=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]*))$/,Oe=ye.fn.init=function(e,t,n){var r,i;if(!e)return this;if(n=n||Me,"string"==typeof e){if(r="<"===e.charAt(0)&&">"===e.charAt(e.length-1)&&e.length>=3?[null,e,null]:_e.exec(e),!r||!r[1]&&t)return!t||t.jquery?(t||n).find(e):this.constructor(t).find(e);if(r[1]){if(t=t instanceof ye?t[0]:t,ye.merge(this,ye.parseHTML(r[1],t&&t.nodeType?t.ownerDocument||t:le,!0)),ke.test(r[1])&&ye.isPlainObject(t))for(r in t)ye.isFunction(this[r])?this[r](t[r]):this.attr(r,t[r]);return this}if(i=le.getElementById(r[2]),i&&i.parentNode){if(i.id!==r[2])return Me.find(e);this.length=1,this[0]=i}return this.context=le,this.selector=e,this}return e.nodeType?(this.context=this[0]=e,this.length=1,this):ye.isFunction(e)?"undefined"!=typeof n.ready?n.ready(e):e(ye):(void 0!==e.selector&&(this.selector=e.selector,this.context=e.context),ye.makeArray(e,this))};Oe.prototype=ye.fn,Me=ye(le);var Ae=/^(?:parents|prev(?:Until|All))/,Ie={children:!0,contents:!0,next:!0,prev:!0};ye.fn.extend({has:function(e){var t,n=ye(e,this),r=n.length;return this.filter(function(){for(t=0;t<r;t++)if(ye.contains(this,n[t]))return!0})},closest:function(e,t){for(var n,r=0,i=this.length,o=[],s=Se.test(e)||"string"!=typeof e?ye(e,t||this.context):0;r<i;r++)for(n=this[r];n&&n!==t;n=n.parentNode)if(n.nodeType<11&&(s?s.index(n)>-1:1===n.nodeType&&ye.find.matchesSelector(n,e))){o.push(n);break}return this.pushStack(o.length>1?ye.uniqueSort(o):o)},index:function(e){return e?"string"==typeof e?ye.inArray(this[0],ye(e)):ye.inArray(e.jquery?e[0]:e,this):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(e,t){return this.pushStack(ye.uniqueSort(ye.merge(this.get(),ye(e,t))))},addBack:function(e){return this.add(null==e?this.prevObject:this.prevObject.filter(e))}}),ye.each({parent:function e(t){var e=t.parentNode;return e&&11!==e.nodeType?e:null},parents:function(e){return Ce(e,"parentNode")},parentsUntil:function(e,t,n){return Ce(e,"parentNode",n)},next:function(e){return p(e,"nextSibling")},prev:function(e){return p(e,"previousSibling")},nextAll:function(e){return Ce(e,"nextSibling")},prevAll:function(e){return Ce(e,"previousSibling")},nextUntil:function(e,t,n){return Ce(e,"nextSibling",n)},prevUntil:function(e,t,n){return Ce(e,"previousSibling",n)},siblings:function(e){return Pe((e.parentNode||{}).firstChild,e)},children:function(e){return Pe(e.firstChild)},contents:function(e){return ye.nodeName(e,"iframe")?e.contentDocument||e.contentWindow.document:ye.merge([],e.childNodes)}},function(e,t){ye.fn[e]=function(n,r){var i=ye.map(this,t,n);return"Until"!==e.slice(-5)&&(r=n),r&&"string"==typeof r&&(i=ye.filter(r,i)),this.length>1&&(Ie[e]||(i=ye.uniqueSort(i)),Ae.test(e)&&(i=i.reverse())),this.pushStack(i)}});var Re=/\S+/g;ye.Callbacks=function(e){e="string"==typeof e?c(e):ye.extend({},e);var t,n,r,i,o=[],s=[],a=-1,l=function(){for(i=e.once,r=t=!0;s.length;a=-1)for(n=s.shift();++a<o.length;)o[a].apply(n[0],n[1])===!1&&e.stopOnFalse&&(a=o.length,n=!1);e.memory||(n=!1),t=!1,i&&(o=n?[]:"")},p={add:function(){return o&&(n&&!t&&(a=o.length-1,s.push(n)),function t(n){ye.each(n,function(n,r){ye.isFunction(r)?e.unique&&p.has(r)||o.push(r):r&&r.length&&"string"!==ye.type(r)&&t(r)})}(arguments),n&&!t&&l()),this},remove:function(){return ye.each(arguments,function(e,t){for(var n;(n=ye.inArray(t,o,n))>-1;)o.splice(n,1),n<=a&&a--}),this},has:function(e){return e?ye.inArray(e,o)>-1:o.length>0},empty:function(){return o&&(o=[]),this},disable:function(){return i=s=[],o=n="",this},disabled:function(){return!o},lock:function(){return i=!0,n||p.disable(),this},locked:function(){return!!i},fireWith:function(e,n){return i||(n=n||[],n=[e,n.slice?n.slice():n],s.push(n),t||l()),this},fire:function(){return p.fireWith(this,arguments),this},fired:function(){return!!r}};return p},ye.extend({Deferred:function(e){var t=[["resolve","done",ye.Callbacks("once memory"),"resolved"],["reject","fail",ye.Callbacks("once memory"),"rejected"],["notify","progress",ye.Callbacks("memory")]],n="pending",r={state:function(){return n},always:function(){return i.done(arguments).fail(arguments),this},then:function(){var e=arguments;return ye.Deferred(function(n){ye.each(t,function(t,o){var s=ye.isFunction(e[t])&&e[t];i[o[1]](function(){var e=s&&s.apply(this,arguments);e&&ye.isFunction(e.promise)?e.promise().progress(n.notify).done(n.resolve).fail(n.reject):n[o[0]+"With"](this===r?n.promise():this,s?[e]:arguments)})}),e=null}).promise()},promise:function(e){return null!=e?ye.extend(e,r):r}},i={};return r.pipe=r.then,ye.each(t,function(e,o){var s=o[2],a=o[3];r[o[1]]=s.add,a&&s.add(function(){n=a},t[1^e][2].disable,t[2][2].lock),i[o[0]]=function(){return i[o[0]+"With"](this===i?r:this,arguments),this},i[o[0]+"With"]=s.fireWith}),r.promise(i),e&&e.call(i,i),i},when:function(e){var t,n,r,i=0,o=pe.call(arguments),s=o.length,a=1!==s||e&&ye.isFunction(e.promise)?s:0,l=1===a?e:ye.Deferred(),p=function(e,n,r){return function(i){n[e]=this,r[e]=arguments.length>1?pe.call(arguments):i,r===t?l.notifyWith(n,r):--a||l.resolveWith(n,r)}};if(s>1)for(t=new Array(s),n=new Array(s),r=new Array(s);i<s;i++)o[i]&&ye.isFunction(o[i].promise)?o[i].promise().progress(p(i,n,t)).done(p(i,r,o)).fail(l.reject):--a;return a||l.resolveWith(r,o),l.promise()}});var De;ye.fn.ready=function(e){return ye.ready.promise().done(e),this},ye.extend({isReady:!1,readyWait:1,holdReady:function(e){e?ye.readyWait++:ye.ready(!0)},ready:function(e){(e===!0?--ye.readyWait:ye.isReady)||(ye.isReady=!0,e!==!0&&--ye.readyWait>0||(De.resolveWith(le,[ye]),ye.fn.triggerHandler&&(ye(le).triggerHandler("ready"),ye(le).off("ready"))))}}),ye.ready.promise=function(e){if(!De)if(De=ye.Deferred(),"complete"===le.readyState||"loading"!==le.readyState&&!le.documentElement.doScroll)o.setTimeout(ye.ready);else if(le.addEventListener)le.addEventListener("DOMContentLoaded",h),o.addEventListener("load",h);else{le.attachEvent("onreadystatechange",h),o.attachEvent("onload",h);var t=!1;try{t=null==o.frameElement&&le.documentElement}catch(e){}t&&t.doScroll&&!function e(){if(!ye.isReady){try{t.doScroll("left")}catch(t){return o.setTimeout(e,50)}u(),ye.ready()}}()}return De.promise(e)},ye.ready.promise();var Le;for(Le in ye(ge))break;ge.ownFirst="0"===Le,ge.inlineBlockNeedsLayout=!1,ye(function(){var e,t,n,r;n=le.getElementsByTagName("body")[0],n&&n.style&&(t=le.createElement("div"),r=le.createElement("div"),r.style.cssText="position:absolute;border:0;width:0;height:0;top:0;left:-9999px",n.appendChild(r).appendChild(t),"undefined"!=typeof t.style.zoom&&(t.style.cssText="display:inline;margin:0;border:0;padding:1px;width:1px;zoom:1",ge.inlineBlockNeedsLayout=e=3===t.offsetWidth,e&&(n.style.zoom=1)),n.removeChild(r))}),function(){var e=le.createElement("div");ge.deleteExpando=!0;try{delete e.test}catch(e){ge.deleteExpando=!1}e=null}();var Fe=function(e){var t=ye.noData[(e.nodeName+" ").toLowerCase()],n=+e.nodeType||1;return(1===n||9===n)&&(!t||t!==!0&&e.getAttribute("classid")===t)},qe=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,ze=/([A-Z])/g;ye.extend({cache:{},noData:{"applet ":!0,"embed ":!0,"object ":"clsid:D27CDB6E-AE6D-11cf-96B8-444553540000"},hasData:function(e){return e=e.nodeType?ye.cache[e[ye.expando]]:e[ye.expando],!!e&&!f(e)},data:function(e,t,n){return m(e,t,n)},removeData:function(e,t){return g(e,t)},_data:function(e,t,n){return m(e,t,n,!0)},_removeData:function(e,t){return g(e,t,!0)}}),ye.fn.extend({data:function e(t,r){var i,o,e,s=this[0],a=s&&s.attributes;if(void 0===t){if(this.length&&(e=ye.data(s),1===s.nodeType&&!ye._data(s,"parsedAttrs"))){for(i=a.length;i--;)a[i]&&(o=a[i].name,0===o.indexOf("data-")&&(o=ye.camelCase(o.slice(5)),d(s,o,e[o])));ye._data(s,"parsedAttrs",!0)}return e}return"object"===("undefined"==typeof t?"undefined":n(t))?this.each(function(){ye.data(this,t)}):arguments.length>1?this.each(function(){ye.data(this,t,r)}):s?d(s,t,ye.data(s,t)):void 0},removeData:function(e){return this.each(function(){ye.removeData(this,e)})}}),ye.extend({queue:function e(t,n,r){var e;if(t)return n=(n||"fx")+"queue",e=ye._data(t,n),r&&(!e||ye.isArray(r)?e=ye._data(t,n,ye.makeArray(r)):e.push(r)),e||[]},dequeue:function(e,t){t=t||"fx";var n=ye.queue(e,t),r=n.length,i=n.shift(),o=ye._queueHooks(e,t),s=function(){ye.dequeue(e,t)};"inprogress"===i&&(i=n.shift(),r--),i&&("fx"===t&&n.unshift("inprogress"),delete o.stop,i.call(e,s,o)),!r&&o&&o.empty.fire()},_queueHooks:function(e,t){var n=t+"queueHooks";return ye._data(e,n)||ye._data(e,n,{empty:ye.Callbacks("once memory").add(function(){ye._removeData(e,t+"queue"),ye._removeData(e,n)})})}}),ye.fn.extend({queue:function(e,t){var n=2;return"string"!=typeof e&&(t=e,e="fx",n--),arguments.length<n?ye.queue(this[0],e):void 0===t?this:this.each(function(){var n=ye.queue(this,e,t);ye._queueHooks(this,e),"fx"===e&&"inprogress"!==n[0]&&ye.dequeue(this,e)})},dequeue:function(e){return this.each(function(){ye.dequeue(this,e)})},clearQueue:function(e){return this.queue(e||"fx",[])},promise:function(e,t){var n,r=1,i=ye.Deferred(),o=this,s=this.length,a=function(){--r||i.resolveWith(o,[o])};for("string"!=typeof e&&(t=e,e=void 0),e=e||"fx";s--;)n=ye._data(o[s],e+"queueHooks"),n&&n.empty&&(r++,n.empty.add(a));return a(),i.promise(t)}}),function(){var e;ge.shrinkWrapBlocks=function(){if(null!=e)return e;e=!1;var t,n,r;return n=le.getElementsByTagName("body")[0],n&&n.style?(t=le.createElement("div"),r=le.createElement("div"),r.style.cssText="position:absolute;border:0;width:0;height:0;top:0;left:-9999px",n.appendChild(r).appendChild(t),"undefined"!=typeof t.style.zoom&&(t.style.cssText="-webkit-box-sizing:content-box;-moz-box-sizing:content-box;box-sizing:content-box;display:block;margin:0;border:0;padding:1px;width:1px;zoom:1",t.appendChild(le.createElement("div")).style.width="5px",e=3!==t.offsetWidth),n.removeChild(r),e):void 0}}();var Be=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,je=new RegExp("^(?:([+-])=|)("+Be+")([a-z%]*)$","i"),We=["Top","Right","Bottom","Left"],He=function(e,t){return e=t||e,"none"===ye.css(e,"display")||!ye.contains(e.ownerDocument,e)},Ue=function e(t,n,r,i,o,s,a){var l=0,p=t.length,c=null==r;if("object"===ye.type(r)){o=!0;for(l in r)e(t,n,l,r[l],!0,s,a)}else if(void 0!==i&&(o=!0,ye.isFunction(i)||(a=!0),c&&(a?(n.call(t,i),n=null):(c=n,n=function(e,t,n){return c.call(ye(e),n)})),n))for(;l<p;l++)n(t[l],r,a?i:i.call(t[l],l,n(t[l],r)));return o?t:c?n.call(t):p?n(t[0],r):s},Ve=/^(?:checkbox|radio)$/i,Ge=/<([\w:-]+)/,$e=/^$|\/(?:java|ecma)script/i,Ye=/^\s+/,Ke="abbr|article|aside|audio|bdi|canvas|data|datalist|details|dialog|figcaption|figure|footer|header|hgroup|main|mark|meter|nav|output|picture|progress|section|summary|template|time|video";!function(){var e=le.createElement("div"),t=le.createDocumentFragment(),n=le.createElement("input");e.innerHTML="  <link/><table></table><a href='/a'>a</a><input type='checkbox'/>",ge.leadingWhitespace=3===e.firstChild.nodeType,ge.tbody=!e.getElementsByTagName("tbody").length,ge.htmlSerialize=!!e.getElementsByTagName("link").length,ge.html5Clone="<:nav></:nav>"!==le.createElement("nav").cloneNode(!0).outerHTML,n.type="checkbox",n.checked=!0,t.appendChild(n),ge.appendChecked=n.checked,e.innerHTML="<textarea>x</textarea>",ge.noCloneChecked=!!e.cloneNode(!0).lastChild.defaultValue,t.appendChild(e),n=le.createElement("input"),n.setAttribute("type","radio"),n.setAttribute("checked","checked"),n.setAttribute("name","t"),e.appendChild(n),ge.checkClone=e.cloneNode(!0).cloneNode(!0).lastChild.checked,ge.noCloneEvent=!!e.addEventListener,e[ye.expando]=1,ge.attributes=!e.getAttribute(ye.expando)}();var Xe={option:[1,"<select multiple='multiple'>","</select>"],legend:[1,"<fieldset>","</fieldset>"],area:[1,"<map>","</map>"],param:[1,"<object>","</object>"],thead:[1,"<table>","</table>"],tr:[2,"<table><tbody>","</tbody></table>"],col:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:ge.htmlSerialize?[0,"",""]:[1,"X<div>","</div>"]};Xe.optgroup=Xe.option,Xe.tbody=Xe.tfoot=Xe.colgroup=Xe.caption=Xe.thead,Xe.th=Xe.td;var Je=/<|&#?\w+;/,Qe=/<tbody/i;!function(){var e,t,n=le.createElement("div");for(e in{submit:!0,change:!0,focusin:!0})t="on"+e,(ge[e]=t in o)||(n.setAttribute(t,"t"),ge[e]=n.attributes[t].expando===!1);n=null}();var Ze=/^(?:input|select|textarea)$/i,et=/^key/,tt=/^(?:mouse|pointer|contextmenu|drag|drop)|click/,nt=/^(?:focusinfocus|focusoutblur)$/,rt=/^([^.]*)(?:\.(.+)|)/;ye.event={global:{},add:function(e,t,n,r,i){var o,s,a,l,p,c,u,h,d,f,m,g=ye._data(e);if(g){for(n.handler&&(l=n,n=l.handler,i=l.selector),n.guid||(n.guid=ye.guid++),(s=g.events)||(s=g.events={}),(c=g.handle)||(c=g.handle=function(e){return"undefined"==typeof ye||e&&ye.event.triggered===e.type?void 0:ye.event.dispatch.apply(c.elem,arguments)},c.elem=e),t=(t||"").match(Re)||[""],a=t.length;a--;)o=rt.exec(t[a])||[],d=m=o[1],f=(o[2]||"").split(".").sort(),d&&(p=ye.event.special[d]||{},d=(i?p.delegateType:p.bindType)||d,p=ye.event.special[d]||{},u=ye.extend({type:d,origType:m,data:r,handler:n,guid:n.guid,selector:i,needsContext:i&&ye.expr.match.needsContext.test(i),namespace:f.join(".")},l),(h=s[d])||(h=s[d]=[],h.delegateCount=0,p.setup&&p.setup.call(e,r,f,c)!==!1||(e.addEventListener?e.addEventListener(d,c,!1):e.attachEvent&&e.attachEvent("on"+d,c))),p.add&&(p.add.call(e,u),u.handler.guid||(u.handler.guid=n.guid)),i?h.splice(h.delegateCount++,0,u):h.push(u),ye.event.global[d]=!0);e=null}},remove:function(e,t,n,r,i){var o,s,a,l,p,c,u,h,d,f,m,g=ye.hasData(e)&&ye._data(e);if(g&&(c=g.events)){for(t=(t||"").match(Re)||[""],p=t.length;p--;)if(a=rt.exec(t[p])||[],d=m=a[1],f=(a[2]||"").split(".").sort(),d){for(u=ye.event.special[d]||{},d=(r?u.delegateType:u.bindType)||d,h=c[d]||[],a=a[2]&&new RegExp("(^|\\.)"+f.join("\\.(?:.*\\.|)")+"(\\.|$)"),l=o=h.length;o--;)s=h[o],!i&&m!==s.origType||n&&n.guid!==s.guid||a&&!a.test(s.namespace)||r&&r!==s.selector&&("**"!==r||!s.selector)||(h.splice(o,1),s.selector&&h.delegateCount--,u.remove&&u.remove.call(e,s));l&&!h.length&&(u.teardown&&u.teardown.call(e,f,g.handle)!==!1||ye.removeEvent(e,d,g.handle),delete c[d])}else for(d in c)ye.event.remove(e,d+t[p],n,r,!0);ye.isEmptyObject(c)&&(delete g.handle,ye._removeData(e,"events"))}},trigger:function(e,t,r,i){var s,a,l,p,c,u,h,d=[r||le],f=me.call(e,"type")?e.type:e,m=me.call(e,"namespace")?e.namespace.split("."):[];if(l=u=r=r||le,3!==r.nodeType&&8!==r.nodeType&&!nt.test(f+ye.event.triggered)&&(f.indexOf(".")>-1&&(m=f.split("."),f=m.shift(),m.sort()),a=f.indexOf(":")<0&&"on"+f,e=e[ye.expando]?e:new ye.Event(f,"object"===("undefined"==typeof e?"undefined":n(e))&&e),e.isTrigger=i?2:3,e.namespace=m.join("."),e.rnamespace=e.namespace?new RegExp("(^|\\.)"+m.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,e.result=void 0,e.target||(e.target=r),t=null==t?[e]:ye.makeArray(t,[e]),c=ye.event.special[f]||{},i||!c.trigger||c.trigger.apply(r,t)!==!1)){if(!i&&!c.noBubble&&!ye.isWindow(r)){for(p=c.delegateType||f,nt.test(p+f)||(l=l.parentNode);l;l=l.parentNode)d.push(l),u=l;u===(r.ownerDocument||le)&&d.push(u.defaultView||u.parentWindow||o)}for(h=0;(l=d[h++])&&!e.isPropagationStopped();)e.type=h>1?p:c.bindType||f,s=(ye._data(l,"events")||{})[e.type]&&ye._data(l,"handle"),s&&s.apply(l,t),s=a&&l[a],s&&s.apply&&Fe(l)&&(e.result=s.apply(l,t),e.result===!1&&e.preventDefault());if(e.type=f,!i&&!e.isDefaultPrevented()&&(!c._default||c._default.apply(d.pop(),t)===!1)&&Fe(r)&&a&&r[f]&&!ye.isWindow(r)){u=r[a],u&&(r[a]=null),ye.event.triggered=f;try{r[f]()}catch(e){}ye.event.triggered=void 0,u&&(r[a]=u)}return e.result}},dispatch:function(e){e=ye.event.fix(e);var t,n,r,i,o,s=[],a=pe.call(arguments),l=(ye._data(this,"events")||{})[e.type]||[],p=ye.event.special[e.type]||{};if(a[0]=e,e.delegateTarget=this,!p.preDispatch||p.preDispatch.call(this,e)!==!1){for(s=ye.event.handlers.call(this,e,l),t=0;(i=s[t++])&&!e.isPropagationStopped();)for(e.currentTarget=i.elem,n=0;(o=i.handlers[n++])&&!e.isImmediatePropagationStopped();)e.rnamespace&&!e.rnamespace.test(o.namespace)||(e.handleObj=o,e.data=o.data,r=((ye.event.special[o.origType]||{}).handle||o.handler).apply(i.elem,a),void 0!==r&&(e.result=r)===!1&&(e.preventDefault(),e.stopPropagation()));return p.postDispatch&&p.postDispatch.call(this,e),e.result}},handlers:function(e,t){var n,r,i,o,s=[],a=t.delegateCount,l=e.target;if(a&&l.nodeType&&("click"!==e.type||isNaN(e.button)||e.button<1))for(;l!=this;l=l.parentNode||this)if(1===l.nodeType&&(l.disabled!==!0||"click"!==e.type)){for(r=[],n=0;n<a;n++)o=t[n],i=o.selector+" ",void 0===r[i]&&(r[i]=o.needsContext?ye(i,this).index(l)>-1:ye.find(i,this,null,[l]).length),r[i]&&r.push(o);r.length&&s.push({elem:l,handlers:r})}return a<t.length&&s.push({elem:this,handlers:t.slice(a)}),s},fix:function(e){if(e[ye.expando])return e;var t,n,r,i=e.type,o=e,s=this.fixHooks[i];for(s||(this.fixHooks[i]=s=tt.test(i)?this.mouseHooks:et.test(i)?this.keyHooks:{}),r=s.props?this.props.concat(s.props):this.props,e=new ye.Event(o),t=r.length;t--;)n=r[t],e[n]=o[n];return e.target||(e.target=o.srcElement||le),3===e.target.nodeType&&(e.target=e.target.parentNode),e.metaKey=!!e.metaKey,s.filter?s.filter(e,o):e},props:"altKey bubbles cancelable ctrlKey currentTarget detail eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),fixHooks:{},keyHooks:{props:"char charCode key keyCode".split(" "),filter:function(e,t){return null==e.which&&(e.which=null!=t.charCode?t.charCode:t.keyCode),e}},mouseHooks:{props:"button buttons clientX clientY fromElement offsetX offsetY pageX pageY screenX screenY toElement".split(" "),filter:function(e,t){var n,r,i,o=t.button,s=t.fromElement;return null==e.pageX&&null!=t.clientX&&(r=e.target.ownerDocument||le,i=r.documentElement,n=r.body,e.pageX=t.clientX+(i&&i.scrollLeft||n&&n.scrollLeft||0)-(i&&i.clientLeft||n&&n.clientLeft||0),e.pageY=t.clientY+(i&&i.scrollTop||n&&n.scrollTop||0)-(i&&i.clientTop||n&&n.clientTop||0)),!e.relatedTarget&&s&&(e.relatedTarget=s===e.target?t.toElement:s),e.which||void 0===o||(e.which=1&o?1:2&o?3:4&o?2:0),e}},special:{load:{noBubble:!0},focus:{trigger:function(){if(this!==P()&&this.focus)try{return this.focus(),!1}catch(e){}},delegateType:"focusin"},blur:{trigger:function(){if(this===P()&&this.blur)return this.blur(),!1},delegateType:"focusout"},click:{trigger:function(){if(ye.nodeName(this,"input")&&"checkbox"===this.type&&this.click)return this.click(),!1},_default:function(e){return ye.nodeName(e.target,"a")}},beforeunload:{postDispatch:function(e){void 0!==e.result&&e.originalEvent&&(e.originalEvent.returnValue=e.result)}}},simulate:function(e,t,n){var r=ye.extend(new ye.Event,n,{type:e,isSimulated:!0});ye.event.trigger(r,null,t),r.isDefaultPrevented()&&n.preventDefault()}},ye.removeEvent=le.removeEventListener?function(e,t,n){e.removeEventListener&&e.removeEventListener(t,n)}:function(e,t,n){var r="on"+t;e.detachEvent&&("undefined"==typeof e[r]&&(e[r]=null),e.detachEvent(r,n))},ye.Event=function(e,t){return this instanceof ye.Event?(e&&e.type?(this.originalEvent=e,this.type=e.type,this.isDefaultPrevented=e.defaultPrevented||void 0===e.defaultPrevented&&e.returnValue===!1?w:C):this.type=e,t&&ye.extend(this,t),this.timeStamp=e&&e.timeStamp||ye.now(),void(this[ye.expando]=!0)):new ye.Event(e,t)},ye.Event.prototype={constructor:ye.Event,isDefaultPrevented:C,isPropagationStopped:C,isImmediatePropagationStopped:C,preventDefault:function(){var e=this.originalEvent;this.isDefaultPrevented=w,e&&(e.preventDefault?e.preventDefault():e.returnValue=!1)},stopPropagation:function(){var e=this.originalEvent;this.isPropagationStopped=w,e&&!this.isSimulated&&(e.stopPropagation&&e.stopPropagation(),e.cancelBubble=!0)},stopImmediatePropagation:function(){var e=this.originalEvent;this.isImmediatePropagationStopped=w,e&&e.stopImmediatePropagation&&e.stopImmediatePropagation(),this.stopPropagation()}},ye.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(e,t){ye.event.special[e]={delegateType:t,bindType:t,handle:function(e){var n,r=this,i=e.relatedTarget,o=e.handleObj;return i&&(i===r||ye.contains(r,i))||(e.type=o.origType,n=o.handler.apply(this,arguments),e.type=t),n}}}),ge.submit||(ye.event.special.submit={setup:function(){return!ye.nodeName(this,"form")&&void ye.event.add(this,"click._submit keypress._submit",function(e){var t=e.target,n=ye.nodeName(t,"input")||ye.nodeName(t,"button")?ye.prop(t,"form"):void 0;n&&!ye._data(n,"submit")&&(ye.event.add(n,"submit._submit",function(e){e._submitBubble=!0}),ye._data(n,"submit",!0))})},postDispatch:function(e){e._submitBubble&&(delete e._submitBubble,this.parentNode&&!e.isTrigger&&ye.event.simulate("submit",this.parentNode,e))},teardown:function(){return!ye.nodeName(this,"form")&&void ye.event.remove(this,"._submit");
}}),ge.change||(ye.event.special.change={setup:function(){return Ze.test(this.nodeName)?("checkbox"!==this.type&&"radio"!==this.type||(ye.event.add(this,"propertychange._change",function(e){"checked"===e.originalEvent.propertyName&&(this._justChanged=!0)}),ye.event.add(this,"click._change",function(e){this._justChanged&&!e.isTrigger&&(this._justChanged=!1),ye.event.simulate("change",this,e)})),!1):void ye.event.add(this,"beforeactivate._change",function(e){var t=e.target;Ze.test(t.nodeName)&&!ye._data(t,"change")&&(ye.event.add(t,"change._change",function(e){!this.parentNode||e.isSimulated||e.isTrigger||ye.event.simulate("change",this.parentNode,e)}),ye._data(t,"change",!0))})},handle:function(e){var t=e.target;if(this!==t||e.isSimulated||e.isTrigger||"radio"!==t.type&&"checkbox"!==t.type)return e.handleObj.handler.apply(this,arguments)},teardown:function(){return ye.event.remove(this,"._change"),!Ze.test(this.nodeName)}}),ge.focusin||ye.each({focus:"focusin",blur:"focusout"},function(e,t){var n=function(e){ye.event.simulate(t,e.target,ye.event.fix(e))};ye.event.special[t]={setup:function(){var r=this.ownerDocument||this,i=ye._data(r,t);i||r.addEventListener(e,n,!0),ye._data(r,t,(i||0)+1)},teardown:function(){var r=this.ownerDocument||this,i=ye._data(r,t)-1;i?ye._data(r,t,i):(r.removeEventListener(e,n,!0),ye._removeData(r,t))}}}),ye.fn.extend({on:function(e,t,n,r){return S(this,e,t,n,r)},one:function(e,t,n,r){return S(this,e,t,n,r,1)},off:function(e,t,r){var i,o;if(e&&e.preventDefault&&e.handleObj)return i=e.handleObj,ye(e.delegateTarget).off(i.namespace?i.origType+"."+i.namespace:i.origType,i.selector,i.handler),this;if("object"===("undefined"==typeof e?"undefined":n(e))){for(o in e)this.off(o,t,e[o]);return this}return t!==!1&&"function"!=typeof t||(r=t,t=void 0),r===!1&&(r=C),this.each(function(){ye.event.remove(this,e,r,t)})},trigger:function(e,t){return this.each(function(){ye.event.trigger(e,t,this)})},triggerHandler:function(e,t){var n=this[0];if(n)return ye.event.trigger(e,t,n,!0)}});var it=/ jQuery\d+="(?:null|\d+)"/g,ot=new RegExp("<(?:"+Ke+")[\\s/>]","i"),st=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:-]+)[^>]*)\/>/gi,at=/<script|<style|<link/i,lt=/checked\s*(?:[^=]|=\s*.checked.)/i,pt=/^true\/(.*)/,ct=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g,ut=y(le),ht=ut.appendChild(le.createElement("div"));ye.extend({htmlPrefilter:function(e){return e.replace(st,"<$1></$2>")},clone:function e(t,n,r){var i,o,e,s,a,l=ye.contains(t.ownerDocument,t);if(ge.html5Clone||ye.isXMLDoc(t)||!ot.test("<"+t.nodeName+">")?e=t.cloneNode(!0):(ht.innerHTML=t.outerHTML,ht.removeChild(e=ht.firstChild)),!(ge.noCloneEvent&&ge.noCloneChecked||1!==t.nodeType&&11!==t.nodeType||ye.isXMLDoc(t)))for(i=b(e),a=b(t),s=0;null!=(o=a[s]);++s)i[s]&&O(o,i[s]);if(n)if(r)for(a=a||b(t),i=i||b(e),s=0;null!=(o=a[s]);s++)_(o,i[s]);else _(t,e);return i=b(e,"script"),i.length>0&&E(i,!l&&b(t,"script")),i=a=o=null,e},cleanData:function(e,t){for(var n,r,i,o,s=0,a=ye.expando,l=ye.cache,p=ge.attributes,c=ye.event.special;null!=(n=e[s]);s++)if((t||Fe(n))&&(i=n[a],o=i&&l[i])){if(o.events)for(r in o.events)c[r]?ye.event.remove(n,r):ye.removeEvent(n,r,o.handle);l[i]&&(delete l[i],p||"undefined"==typeof n.removeAttribute?n[a]=void 0:n.removeAttribute(a),ae.push(i))}}}),ye.fn.extend({domManip:A,detach:function(e){return I(this,e,!0)},remove:function(e){return I(this,e)},text:function(e){return Ue(this,function(e){return void 0===e?ye.text(this):this.empty().append((this[0]&&this[0].ownerDocument||le).createTextNode(e))},null,e,arguments.length)},append:function(){return A(this,arguments,function(e){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var t=k(this,e);t.appendChild(e)}})},prepend:function(){return A(this,arguments,function(e){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var t=k(this,e);t.insertBefore(e,t.firstChild)}})},before:function(){return A(this,arguments,function(e){this.parentNode&&this.parentNode.insertBefore(e,this)})},after:function(){return A(this,arguments,function(e){this.parentNode&&this.parentNode.insertBefore(e,this.nextSibling)})},empty:function(){for(var e,t=0;null!=(e=this[t]);t++){for(1===e.nodeType&&ye.cleanData(b(e,!1));e.firstChild;)e.removeChild(e.firstChild);e.options&&ye.nodeName(e,"select")&&(e.options.length=0)}return this},clone:function(e,t){return e=null!=e&&e,t=null==t?e:t,this.map(function(){return ye.clone(this,e,t)})},html:function(e){return Ue(this,function(e){var t=this[0]||{},n=0,r=this.length;if(void 0===e)return 1===t.nodeType?t.innerHTML.replace(it,""):void 0;if("string"==typeof e&&!at.test(e)&&(ge.htmlSerialize||!ot.test(e))&&(ge.leadingWhitespace||!Ye.test(e))&&!Xe[(Ge.exec(e)||["",""])[1].toLowerCase()]){e=ye.htmlPrefilter(e);try{for(;n<r;n++)t=this[n]||{},1===t.nodeType&&(ye.cleanData(b(t,!1)),t.innerHTML=e);t=0}catch(e){}}t&&this.empty().append(e)},null,e,arguments.length)},replaceWith:function(){var e=[];return A(this,arguments,function(t){var n=this.parentNode;ye.inArray(this,e)<0&&(ye.cleanData(b(this)),n&&n.replaceChild(t,this))},e)}}),ye.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(e,t){ye.fn[e]=function(e){for(var n,r=0,i=[],o=ye(e),s=o.length-1;r<=s;r++)n=r===s?this:this.clone(!0),ye(o[r])[t](n),ue.apply(i,n.get());return this.pushStack(i)}});var dt,ft={HTML:"block",BODY:"block"},mt=/^margin/,gt=new RegExp("^("+Be+")(?!px)[a-z%]+$","i"),vt=function(e,t,n,r){var i,o,s={};for(o in t)s[o]=e.style[o],e.style[o]=t[o];i=n.apply(e,r||[]);for(o in t)e.style[o]=s[o];return i},yt=le.documentElement;!function(){function e(){var e,c,u=le.documentElement;u.appendChild(l),p.style.cssText="-webkit-box-sizing:border-box;box-sizing:border-box;position:relative;display:block;margin:auto;border:1px;padding:1px;top:1%;width:50%",t=r=a=!1,n=s=!0,o.getComputedStyle&&(c=o.getComputedStyle(p),t="1%"!==(c||{}).top,a="2px"===(c||{}).marginLeft,r="4px"===(c||{width:"4px"}).width,p.style.marginRight="50%",n="4px"===(c||{marginRight:"4px"}).marginRight,e=p.appendChild(le.createElement("div")),e.style.cssText=p.style.cssText="-webkit-box-sizing:content-box;-moz-box-sizing:content-box;box-sizing:content-box;display:block;margin:0;border:0;padding:0",e.style.marginRight=e.style.width="0",p.style.width="1px",s=!parseFloat((o.getComputedStyle(e)||{}).marginRight),p.removeChild(e)),p.style.display="none",i=0===p.getClientRects().length,i&&(p.style.display="",p.innerHTML="<table><tr><td></td><td>t</td></tr></table>",p.childNodes[0].style.borderCollapse="separate",e=p.getElementsByTagName("td"),e[0].style.cssText="margin:0;border:0;padding:0;display:none",i=0===e[0].offsetHeight,i&&(e[0].style.display="",e[1].style.display="none",i=0===e[0].offsetHeight)),u.removeChild(l)}var t,n,r,i,s,a,l=le.createElement("div"),p=le.createElement("div");p.style&&(p.style.cssText="float:left;opacity:.5",ge.opacity="0.5"===p.style.opacity,ge.cssFloat=!!p.style.cssFloat,p.style.backgroundClip="content-box",p.cloneNode(!0).style.backgroundClip="",ge.clearCloneStyle="content-box"===p.style.backgroundClip,l=le.createElement("div"),l.style.cssText="border:0;width:8px;height:0;top:0;left:-9999px;padding:0;margin-top:1px;position:absolute",p.innerHTML="",l.appendChild(p),ge.boxSizing=""===p.style.boxSizing||""===p.style.MozBoxSizing||""===p.style.WebkitBoxSizing,ye.extend(ge,{reliableHiddenOffsets:function(){return null==t&&e(),i},boxSizingReliable:function(){return null==t&&e(),r},pixelMarginRight:function(){return null==t&&e(),n},pixelPosition:function(){return null==t&&e(),t},reliableMarginRight:function(){return null==t&&e(),s},reliableMarginLeft:function(){return null==t&&e(),a}}))}();var bt,Et,Tt=/^(top|right|bottom|left)$/;o.getComputedStyle?(bt=function(e){var t=e.ownerDocument.defaultView;return t&&t.opener||(t=o),t.getComputedStyle(e)},Et=function(e,t,n){var r,i,o,s,a=e.style;return n=n||bt(e),s=n?n.getPropertyValue(t)||n[t]:void 0,""!==s&&void 0!==s||ye.contains(e.ownerDocument,e)||(s=ye.style(e,t)),n&&!ge.pixelMarginRight()&&gt.test(s)&&mt.test(t)&&(r=a.width,i=a.minWidth,o=a.maxWidth,a.minWidth=a.maxWidth=a.width=s,s=n.width,a.width=r,a.minWidth=i,a.maxWidth=o),void 0===s?s:s+""}):yt.currentStyle&&(bt=function(e){return e.currentStyle},Et=function(e,t,n){var r,i,o,s,a=e.style;return n=n||bt(e),s=n?n[t]:void 0,null==s&&a&&a[t]&&(s=a[t]),gt.test(s)&&!Tt.test(t)&&(r=a.left,i=e.runtimeStyle,o=i&&i.left,o&&(i.left=e.currentStyle.left),a.left="fontSize"===t?"1em":s,s=a.pixelLeft+"px",a.left=r,o&&(i.left=o)),void 0===s?s:s+""||"auto"});var xt=/alpha\([^)]*\)/i,wt=/opacity\s*=\s*([^)]*)/i,Ct=/^(none|table(?!-c[ea]).+)/,Pt=new RegExp("^("+Be+")(.*)$","i"),St={position:"absolute",visibility:"hidden",display:"block"},kt={letterSpacing:"0",fontWeight:"400"},Nt=["Webkit","O","Moz","ms"],Mt=le.createElement("div").style;ye.extend({cssHooks:{opacity:{get:function(e,t){if(t){var n=Et(e,"opacity");return""===n?"1":n}}}},cssNumber:{animationIterationCount:!0,columnCount:!0,fillOpacity:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{float:ge.cssFloat?"cssFloat":"styleFloat"},style:function e(t,r,i,o){if(t&&3!==t.nodeType&&8!==t.nodeType&&t.style){var s,a,l,p=ye.camelCase(r),e=t.style;if(r=ye.cssProps[p]||(ye.cssProps[p]=F(p)||p),l=ye.cssHooks[r]||ye.cssHooks[p],void 0===i)return l&&"get"in l&&void 0!==(s=l.get(t,!1,o))?s:e[r];if(a="undefined"==typeof i?"undefined":n(i),"string"===a&&(s=je.exec(i))&&s[1]&&(i=v(t,r,s),a="number"),null!=i&&i===i&&("number"===a&&(i+=s&&s[3]||(ye.cssNumber[p]?"":"px")),ge.clearCloneStyle||""!==i||0!==r.indexOf("background")||(e[r]="inherit"),!(l&&"set"in l&&void 0===(i=l.set(t,i,o)))))try{e[r]=i}catch(e){}}},css:function(e,t,n,r){var i,o,s,a=ye.camelCase(t);return t=ye.cssProps[a]||(ye.cssProps[a]=F(a)||a),s=ye.cssHooks[t]||ye.cssHooks[a],s&&"get"in s&&(o=s.get(e,!0,n)),void 0===o&&(o=Et(e,t,r)),"normal"===o&&t in kt&&(o=kt[t]),""===n||n?(i=parseFloat(o),n===!0||isFinite(i)?i||0:o):o}}),ye.each(["height","width"],function(e,t){ye.cssHooks[t]={get:function(e,n,r){if(n)return Ct.test(ye.css(e,"display"))&&0===e.offsetWidth?vt(e,St,function(){return j(e,t,r)}):j(e,t,r)},set:function(e,n,r){var i=r&&bt(e);return z(e,n,r?B(e,t,r,ge.boxSizing&&"border-box"===ye.css(e,"boxSizing",!1,i),i):0)}}}),ge.opacity||(ye.cssHooks.opacity={get:function(e,t){return wt.test((t&&e.currentStyle?e.currentStyle.filter:e.style.filter)||"")?.01*parseFloat(RegExp.$1)+"":t?"1":""},set:function(e,t){var n=e.style,r=e.currentStyle,i=ye.isNumeric(t)?"alpha(opacity="+100*t+")":"",o=r&&r.filter||n.filter||"";n.zoom=1,(t>=1||""===t)&&""===ye.trim(o.replace(xt,""))&&n.removeAttribute&&(n.removeAttribute("filter"),""===t||r&&!r.filter)||(n.filter=xt.test(o)?o.replace(xt,i):o+" "+i)}}),ye.cssHooks.marginRight=L(ge.reliableMarginRight,function(e,t){if(t)return vt(e,{display:"inline-block"},Et,[e,"marginRight"])}),ye.cssHooks.marginLeft=L(ge.reliableMarginLeft,function(e,t){if(t)return(parseFloat(Et(e,"marginLeft"))||(ye.contains(e.ownerDocument,e)?e.getBoundingClientRect().left-vt(e,{marginLeft:0},function(){return e.getBoundingClientRect().left}):0))+"px"}),ye.each({margin:"",padding:"",border:"Width"},function(e,t){ye.cssHooks[e+t]={expand:function(n){for(var r=0,i={},o="string"==typeof n?n.split(" "):[n];r<4;r++)i[e+We[r]+t]=o[r]||o[r-2]||o[0];return i}},mt.test(e)||(ye.cssHooks[e+t].set=z)}),ye.fn.extend({css:function(e,t){return Ue(this,function(e,t,n){var r,i,o={},s=0;if(ye.isArray(t)){for(r=bt(e),i=t.length;s<i;s++)o[t[s]]=ye.css(e,t[s],!1,r);return o}return void 0!==n?ye.style(e,t,n):ye.css(e,t)},e,t,arguments.length>1)},show:function(){return q(this,!0)},hide:function(){return q(this)},toggle:function(e){return"boolean"==typeof e?e?this.show():this.hide():this.each(function(){He(this)?ye(this).show():ye(this).hide()})}}),ye.Tween=W,W.prototype={constructor:W,init:function(e,t,n,r,i,o){this.elem=e,this.prop=n,this.easing=i||ye.easing._default,this.options=t,this.start=this.now=this.cur(),this.end=r,this.unit=o||(ye.cssNumber[n]?"":"px")},cur:function(){var e=W.propHooks[this.prop];return e&&e.get?e.get(this):W.propHooks._default.get(this)},run:function(e){var t,n=W.propHooks[this.prop];return this.options.duration?this.pos=t=ye.easing[this.easing](e,this.options.duration*e,0,1,this.options.duration):this.pos=t=e,this.now=(this.end-this.start)*t+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),n&&n.set?n.set(this):W.propHooks._default.set(this),this}},W.prototype.init.prototype=W.prototype,W.propHooks={_default:{get:function(e){var t;return 1!==e.elem.nodeType||null!=e.elem[e.prop]&&null==e.elem.style[e.prop]?e.elem[e.prop]:(t=ye.css(e.elem,e.prop,""),t&&"auto"!==t?t:0)},set:function(e){ye.fx.step[e.prop]?ye.fx.step[e.prop](e):1!==e.elem.nodeType||null==e.elem.style[ye.cssProps[e.prop]]&&!ye.cssHooks[e.prop]?e.elem[e.prop]=e.now:ye.style(e.elem,e.prop,e.now+e.unit)}}},W.propHooks.scrollTop=W.propHooks.scrollLeft={set:function(e){e.elem.nodeType&&e.elem.parentNode&&(e.elem[e.prop]=e.now)}},ye.easing={linear:function(e){return e},swing:function(e){return.5-Math.cos(e*Math.PI)/2},_default:"swing"},ye.fx=W.prototype.init,ye.fx.step={};var _t,Ot,At=/^(?:toggle|show|hide)$/,It=/queueHooks$/;ye.Animation=ye.extend(Y,{tweeners:{"*":[function(e,t){var n=this.createTween(e,t);return v(n.elem,e,je.exec(t),n),n}]},tweener:function(e,t){ye.isFunction(e)?(t=e,e=["*"]):e=e.match(Re);for(var n,r=0,i=e.length;r<i;r++)n=e[r],Y.tweeners[n]=Y.tweeners[n]||[],Y.tweeners[n].unshift(t)},prefilters:[G],prefilter:function(e,t){t?Y.prefilters.unshift(e):Y.prefilters.push(e)}}),ye.speed=function(e,t,r){var i=e&&"object"===("undefined"==typeof e?"undefined":n(e))?ye.extend({},e):{complete:r||!r&&t||ye.isFunction(e)&&e,duration:e,easing:r&&t||t&&!ye.isFunction(t)&&t};return i.duration=ye.fx.off?0:"number"==typeof i.duration?i.duration:i.duration in ye.fx.speeds?ye.fx.speeds[i.duration]:ye.fx.speeds._default,null!=i.queue&&i.queue!==!0||(i.queue="fx"),i.old=i.complete,i.complete=function(){ye.isFunction(i.old)&&i.old.call(this),i.queue&&ye.dequeue(this,i.queue)},i},ye.fn.extend({fadeTo:function(e,t,n,r){return this.filter(He).css("opacity",0).show().end().animate({opacity:t},e,n,r)},animate:function(e,t,n,r){var i=ye.isEmptyObject(e),o=ye.speed(t,n,r),s=function(){var t=Y(this,ye.extend({},e),o);(i||ye._data(this,"finish"))&&t.stop(!0)};return s.finish=s,i||o.queue===!1?this.each(s):this.queue(o.queue,s)},stop:function(e,t,n){var r=function(e){var t=e.stop;delete e.stop,t(n)};return"string"!=typeof e&&(n=t,t=e,e=void 0),t&&e!==!1&&this.queue(e||"fx",[]),this.each(function(){var t=!0,i=null!=e&&e+"queueHooks",o=ye.timers,s=ye._data(this);if(i)s[i]&&s[i].stop&&r(s[i]);else for(i in s)s[i]&&s[i].stop&&It.test(i)&&r(s[i]);for(i=o.length;i--;)o[i].elem!==this||null!=e&&o[i].queue!==e||(o[i].anim.stop(n),t=!1,o.splice(i,1));!t&&n||ye.dequeue(this,e)})},finish:function(e){return e!==!1&&(e=e||"fx"),this.each(function(){var t,n=ye._data(this),r=n[e+"queue"],i=n[e+"queueHooks"],o=ye.timers,s=r?r.length:0;for(n.finish=!0,ye.queue(this,e,[]),i&&i.stop&&i.stop.call(this,!0),t=o.length;t--;)o[t].elem===this&&o[t].queue===e&&(o[t].anim.stop(!0),o.splice(t,1));for(t=0;t<s;t++)r[t]&&r[t].finish&&r[t].finish.call(this);delete n.finish})}}),ye.each(["toggle","show","hide"],function(e,t){var n=ye.fn[t];ye.fn[t]=function(e,r,i){return null==e||"boolean"==typeof e?n.apply(this,arguments):this.animate(U(t,!0),e,r,i)}}),ye.each({slideDown:U("show"),slideUp:U("hide"),slideToggle:U("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(e,t){ye.fn[e]=function(e,n,r){return this.animate(t,e,n,r)}}),ye.timers=[],ye.fx.tick=function(){var e,t=ye.timers,n=0;for(_t=ye.now();n<t.length;n++)e=t[n],e()||t[n]!==e||t.splice(n--,1);t.length||ye.fx.stop(),_t=void 0},ye.fx.timer=function(e){ye.timers.push(e),e()?ye.fx.start():ye.timers.pop()},ye.fx.interval=13,ye.fx.start=function(){Ot||(Ot=o.setInterval(ye.fx.tick,ye.fx.interval))},ye.fx.stop=function(){o.clearInterval(Ot),Ot=null},ye.fx.speeds={slow:600,fast:200,_default:400},ye.fn.delay=function(e,t){return e=ye.fx?ye.fx.speeds[e]||e:e,t=t||"fx",this.queue(t,function(t,n){var r=o.setTimeout(t,e);n.stop=function(){o.clearTimeout(r)}})},function(){var e,t=le.createElement("input"),n=le.createElement("div"),r=le.createElement("select"),i=r.appendChild(le.createElement("option"));n=le.createElement("div"),n.setAttribute("className","t"),n.innerHTML="  <link/><table></table><a href='/a'>a</a><input type='checkbox'/>",e=n.getElementsByTagName("a")[0],t.setAttribute("type","checkbox"),n.appendChild(t),e=n.getElementsByTagName("a")[0],e.style.cssText="top:1px",ge.getSetAttribute="t"!==n.className,ge.style=/top/.test(e.getAttribute("style")),ge.hrefNormalized="/a"===e.getAttribute("href"),ge.checkOn=!!t.value,ge.optSelected=i.selected,ge.enctype=!!le.createElement("form").enctype,r.disabled=!0,ge.optDisabled=!i.disabled,t=le.createElement("input"),t.setAttribute("value",""),ge.input=""===t.getAttribute("value"),t.value="t",t.setAttribute("type","radio"),ge.radioValue="t"===t.value}();var Rt=/\r/g,Dt=/[\x20\t\r\n\f]+/g;ye.fn.extend({val:function(e){var t,n,r,i=this[0];{if(arguments.length)return r=ye.isFunction(e),this.each(function(n){var i;1===this.nodeType&&(i=r?e.call(this,n,ye(this).val()):e,null==i?i="":"number"==typeof i?i+="":ye.isArray(i)&&(i=ye.map(i,function(e){return null==e?"":e+""})),t=ye.valHooks[this.type]||ye.valHooks[this.nodeName.toLowerCase()],t&&"set"in t&&void 0!==t.set(this,i,"value")||(this.value=i))});if(i)return t=ye.valHooks[i.type]||ye.valHooks[i.nodeName.toLowerCase()],t&&"get"in t&&void 0!==(n=t.get(i,"value"))?n:(n=i.value,"string"==typeof n?n.replace(Rt,""):null==n?"":n)}}}),ye.extend({valHooks:{option:{get:function(e){var t=ye.find.attr(e,"value");return null!=t?t:ye.trim(ye.text(e)).replace(Dt," ")}},select:{get:function(e){for(var t,n,r=e.options,i=e.selectedIndex,o="select-one"===e.type||i<0,s=o?null:[],a=o?i+1:r.length,l=i<0?a:o?i:0;l<a;l++)if(n=r[l],(n.selected||l===i)&&(ge.optDisabled?!n.disabled:null===n.getAttribute("disabled"))&&(!n.parentNode.disabled||!ye.nodeName(n.parentNode,"optgroup"))){if(t=ye(n).val(),o)return t;s.push(t)}return s},set:function(e,t){for(var n,r,i=e.options,o=ye.makeArray(t),s=i.length;s--;)if(r=i[s],ye.inArray(ye.valHooks.option.get(r),o)>-1)try{r.selected=n=!0}catch(e){r.scrollHeight}else r.selected=!1;return n||(e.selectedIndex=-1),i}}}}),ye.each(["radio","checkbox"],function(){ye.valHooks[this]={set:function(e,t){if(ye.isArray(t))return e.checked=ye.inArray(ye(e).val(),t)>-1}},ge.checkOn||(ye.valHooks[this].get=function(e){return null===e.getAttribute("value")?"on":e.value})});var Lt,Ft,qt=ye.expr.attrHandle,zt=/^(?:checked|selected)$/i,Bt=ge.getSetAttribute,jt=ge.input;ye.fn.extend({attr:function(e,t){return Ue(this,ye.attr,e,t,arguments.length>1)},removeAttr:function(e){return this.each(function(){ye.removeAttr(this,e)})}}),ye.extend({attr:function(e,t,n){var r,i,o=e.nodeType;if(3!==o&&8!==o&&2!==o)return"undefined"==typeof e.getAttribute?ye.prop(e,t,n):(1===o&&ye.isXMLDoc(e)||(t=t.toLowerCase(),i=ye.attrHooks[t]||(ye.expr.match.bool.test(t)?Ft:Lt)),void 0!==n?null===n?void ye.removeAttr(e,t):i&&"set"in i&&void 0!==(r=i.set(e,n,t))?r:(e.setAttribute(t,n+""),n):i&&"get"in i&&null!==(r=i.get(e,t))?r:(r=ye.find.attr(e,t),null==r?void 0:r))},attrHooks:{type:{set:function(e,t){if(!ge.radioValue&&"radio"===t&&ye.nodeName(e,"input")){var n=e.value;return e.setAttribute("type",t),n&&(e.value=n),t}}}},removeAttr:function(e,t){var n,r,i=0,o=t&&t.match(Re);if(o&&1===e.nodeType)for(;n=o[i++];)r=ye.propFix[n]||n,ye.expr.match.bool.test(n)?jt&&Bt||!zt.test(n)?e[r]=!1:e[ye.camelCase("default-"+n)]=e[r]=!1:ye.attr(e,n,""),e.removeAttribute(Bt?n:r)}}),Ft={set:function(e,t,n){return t===!1?ye.removeAttr(e,n):jt&&Bt||!zt.test(n)?e.setAttribute(!Bt&&ye.propFix[n]||n,n):e[ye.camelCase("default-"+n)]=e[n]=!0,n}},ye.each(ye.expr.match.bool.source.match(/\w+/g),function(e,t){var n=qt[t]||ye.find.attr;jt&&Bt||!zt.test(t)?qt[t]=function(e,t,r){var i,o;return r||(o=qt[t],qt[t]=i,i=null!=n(e,t,r)?t.toLowerCase():null,qt[t]=o),i}:qt[t]=function(e,t,n){if(!n)return e[ye.camelCase("default-"+t)]?t.toLowerCase():null}}),jt&&Bt||(ye.attrHooks.value={set:function(e,t,n){return ye.nodeName(e,"input")?void(e.defaultValue=t):Lt&&Lt.set(e,t,n)}}),Bt||(Lt={set:function(e,t,n){var r=e.getAttributeNode(n);if(r||e.setAttributeNode(r=e.ownerDocument.createAttribute(n)),r.value=t+="","value"===n||t===e.getAttribute(n))return t}},qt.id=qt.name=qt.coords=function(e,t,n){var r;if(!n)return(r=e.getAttributeNode(t))&&""!==r.value?r.value:null},ye.valHooks.button={get:function(e,t){var n=e.getAttributeNode(t);if(n&&n.specified)return n.value},set:Lt.set},ye.attrHooks.contenteditable={set:function(e,t,n){Lt.set(e,""!==t&&t,n)}},ye.each(["width","height"],function(e,t){ye.attrHooks[t]={set:function(e,n){if(""===n)return e.setAttribute(t,"auto"),n}}})),ge.style||(ye.attrHooks.style={get:function(e){return e.style.cssText||void 0},set:function(e,t){return e.style.cssText=t+""}});var Wt=/^(?:input|select|textarea|button|object)$/i,Ht=/^(?:a|area)$/i;ye.fn.extend({prop:function(e,t){return Ue(this,ye.prop,e,t,arguments.length>1)},removeProp:function(e){return e=ye.propFix[e]||e,this.each(function(){try{this[e]=void 0,delete this[e]}catch(e){}})}}),ye.extend({prop:function(e,t,n){var r,i,o=e.nodeType;if(3!==o&&8!==o&&2!==o)return 1===o&&ye.isXMLDoc(e)||(t=ye.propFix[t]||t,i=ye.propHooks[t]),void 0!==n?i&&"set"in i&&void 0!==(r=i.set(e,n,t))?r:e[t]=n:i&&"get"in i&&null!==(r=i.get(e,t))?r:e[t]},propHooks:{tabIndex:{get:function(e){var t=ye.find.attr(e,"tabindex");return t?parseInt(t,10):Wt.test(e.nodeName)||Ht.test(e.nodeName)&&e.href?0:-1}}},propFix:{for:"htmlFor",class:"className"}}),ge.hrefNormalized||ye.each(["href","src"],function(e,t){ye.propHooks[t]={get:function(e){return e.getAttribute(t,4)}}}),ge.optSelected||(ye.propHooks.selected={get:function(e){var t=e.parentNode;return t&&(t.selectedIndex,t.parentNode&&t.parentNode.selectedIndex),null},set:function(e){var t=e.parentNode;t&&(t.selectedIndex,t.parentNode&&t.parentNode.selectedIndex)}}),ye.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){ye.propFix[this.toLowerCase()]=this}),ge.enctype||(ye.propFix.enctype="encoding");var Ut=/[\t\r\n\f]/g;ye.fn.extend({addClass:function(e){var t,n,r,i,o,s,a,l=0;if(ye.isFunction(e))return this.each(function(t){ye(this).addClass(e.call(this,t,K(this)))});if("string"==typeof e&&e)for(t=e.match(Re)||[];n=this[l++];)if(i=K(n),r=1===n.nodeType&&(" "+i+" ").replace(Ut," ")){for(s=0;o=t[s++];)r.indexOf(" "+o+" ")<0&&(r+=o+" ");a=ye.trim(r),i!==a&&ye.attr(n,"class",a)}return this},removeClass:function(e){var t,n,r,i,o,s,a,l=0;if(ye.isFunction(e))return this.each(function(t){ye(this).removeClass(e.call(this,t,K(this)))});if(!arguments.length)return this.attr("class","");if("string"==typeof e&&e)for(t=e.match(Re)||[];n=this[l++];)if(i=K(n),r=1===n.nodeType&&(" "+i+" ").replace(Ut," ")){for(s=0;o=t[s++];)for(;r.indexOf(" "+o+" ")>-1;)r=r.replace(" "+o+" "," ");a=ye.trim(r),i!==a&&ye.attr(n,"class",a)}return this},toggleClass:function(e,t){var r="undefined"==typeof e?"undefined":n(e);return"boolean"==typeof t&&"string"===r?t?this.addClass(e):this.removeClass(e):ye.isFunction(e)?this.each(function(n){ye(this).toggleClass(e.call(this,n,K(this),t),t)}):this.each(function(){var t,n,i,o;if("string"===r)for(n=0,i=ye(this),o=e.match(Re)||[];t=o[n++];)i.hasClass(t)?i.removeClass(t):i.addClass(t);else void 0!==e&&"boolean"!==r||(t=K(this),t&&ye._data(this,"__className__",t),ye.attr(this,"class",t||e===!1?"":ye._data(this,"__className__")||""))})},hasClass:function(e){var t,n,r=0;for(t=" "+e+" ";n=this[r++];)if(1===n.nodeType&&(" "+K(n)+" ").replace(Ut," ").indexOf(t)>-1)return!0;return!1}}),ye.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu".split(" "),function(e,t){ye.fn[t]=function(e,n){return arguments.length>0?this.on(t,null,e,n):this.trigger(t)}}),ye.fn.extend({hover:function(e,t){return this.mouseenter(e).mouseleave(t||e)}});var Vt=o.location,Gt=ye.now(),$t=/\?/,Yt=/(,)|(\[|{)|(}|])|"(?:[^"\\\r\n]|\\["\\\/bfnrt]|\\u[\da-fA-F]{4})*"\s*:?|true|false|null|-?(?!0\d)\d+(?:\.\d+|)(?:[eE][+-]?\d+|)/g;ye.parseJSON=function(e){if(o.JSON&&o.JSON.parse)return o.JSON.parse(e+"");var t,n=null,r=ye.trim(e+"");return r&&!ye.trim(r.replace(Yt,function(e,r,i,o){return t&&r&&(n=0),0===n?e:(t=i||r,n+=!o-!i,"")}))?Function("return "+r)():ye.error("Invalid JSON: "+e)},ye.parseXML=function(e){var t,n;if(!e||"string"!=typeof e)return null;try{o.DOMParser?(n=new o.DOMParser,t=n.parseFromString(e,"text/xml")):(t=new o.ActiveXObject("Microsoft.XMLDOM"),t.async="false",t.loadXML(e))}catch(e){t=void 0}return t&&t.documentElement&&!t.getElementsByTagName("parsererror").length||ye.error("Invalid XML: "+e),t};var Kt=/#.*$/,Xt=/([?&])_=[^&]*/,Jt=/^(.*?):[ \t]*([^\r\n]*)\r?$/gm,Qt=/^(?:about|app|app-storage|.+-extension|file|res|widget):$/,Zt=/^(?:GET|HEAD)$/,en=/^\/\//,tn=/^([\w.+-]+:)(?:\/\/(?:[^\/?#]*@|)([^\/?#:]*)(?::(\d+)|)|)/,nn={},rn={},on="*/".concat("*"),sn=Vt.href,an=tn.exec(sn.toLowerCase())||[];ye.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:sn,type:"GET",isLocal:Qt.test(an[1]),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":on,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/\bxml\b/,html:/\bhtml/,json:/\bjson\b/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":ye.parseJSON,"text xml":ye.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(e,t){return t?Q(Q(e,ye.ajaxSettings),t):Q(ye.ajaxSettings,e)},ajaxPrefilter:X(nn),ajaxTransport:X(rn),ajax:function(e,t){function r(e,t,n,r){var i,s,h,b,E,x=t;2!==T&&(T=2,p&&o.clearTimeout(p),u=void 0,l=r||"",w.readyState=e>0?4:0,i=e>=200&&e<300||304===e,n&&(b=Z(d,w,n)),b=ee(d,b,w,i),i?(d.ifModified&&(E=w.getResponseHeader("Last-Modified"),E&&(ye.lastModified[a]=E),E=w.getResponseHeader("etag"),E&&(ye.etag[a]=E)),204===e||"HEAD"===d.type?x="nocontent":304===e?x="notmodified":(x=b.state,s=b.data,h=b.error,i=!h)):(h=x,!e&&x||(x="error",e<0&&(e=0))),w.status=e,w.statusText=(t||x)+"",i?g.resolveWith(f,[s,x,w]):g.rejectWith(f,[w,x,h]),w.statusCode(y),y=void 0,c&&m.trigger(i?"ajaxSuccess":"ajaxError",[w,d,i?s:h]),v.fireWith(f,[w,x]),c&&(m.trigger("ajaxComplete",[w,d]),--ye.active||ye.event.trigger("ajaxStop")))}"object"===("undefined"==typeof e?"undefined":n(e))&&(t=e,e=void 0),t=t||{};var i,s,a,l,p,c,u,h,d=ye.ajaxSetup({},t),f=d.context||d,m=d.context&&(f.nodeType||f.jquery)?ye(f):ye.event,g=ye.Deferred(),v=ye.Callbacks("once memory"),y=d.statusCode||{},b={},E={},T=0,x="canceled",w={readyState:0,getResponseHeader:function(e){var t;if(2===T){if(!h)for(h={};t=Jt.exec(l);)h[t[1].toLowerCase()]=t[2];t=h[e.toLowerCase()]}return null==t?null:t},getAllResponseHeaders:function(){return 2===T?l:null},setRequestHeader:function(e,t){var n=e.toLowerCase();return T||(e=E[n]=E[n]||e,b[e]=t),this},overrideMimeType:function(e){return T||(d.mimeType=e),this},statusCode:function(e){var t;if(e)if(T<2)for(t in e)y[t]=[y[t],e[t]];else w.always(e[w.status]);return this},abort:function(e){var t=e||x;return u&&u.abort(t),r(0,t),this}};if(g.promise(w).complete=v.add,w.success=w.done,w.error=w.fail,d.url=((e||d.url||sn)+"").replace(Kt,"").replace(en,an[1]+"//"),d.type=t.method||t.type||d.method||d.type,d.dataTypes=ye.trim(d.dataType||"*").toLowerCase().match(Re)||[""],null==d.crossDomain&&(i=tn.exec(d.url.toLowerCase()),d.crossDomain=!(!i||i[1]===an[1]&&i[2]===an[2]&&(i[3]||("http:"===i[1]?"80":"443"))===(an[3]||("http:"===an[1]?"80":"443")))),d.data&&d.processData&&"string"!=typeof d.data&&(d.data=ye.param(d.data,d.traditional)),J(nn,d,t,w),2===T)return w;c=ye.event&&d.global,c&&0===ye.active++&&ye.event.trigger("ajaxStart"),d.type=d.type.toUpperCase(),d.hasContent=!Zt.test(d.type),a=d.url,d.hasContent||(d.data&&(a=d.url+=($t.test(a)?"&":"?")+d.data,delete d.data),d.cache===!1&&(d.url=Xt.test(a)?a.replace(Xt,"$1_="+Gt++):a+($t.test(a)?"&":"?")+"_="+Gt++)),d.ifModified&&(ye.lastModified[a]&&w.setRequestHeader("If-Modified-Since",ye.lastModified[a]),ye.etag[a]&&w.setRequestHeader("If-None-Match",ye.etag[a])),(d.data&&d.hasContent&&d.contentType!==!1||t.contentType)&&w.setRequestHeader("Content-Type",d.contentType),w.setRequestHeader("Accept",d.dataTypes[0]&&d.accepts[d.dataTypes[0]]?d.accepts[d.dataTypes[0]]+("*"!==d.dataTypes[0]?", "+on+"; q=0.01":""):d.accepts["*"]);for(s in d.headers)w.setRequestHeader(s,d.headers[s]);if(d.beforeSend&&(d.beforeSend.call(f,w,d)===!1||2===T))return w.abort();x="abort";for(s in{success:1,error:1,complete:1})w[s](d[s]);if(u=J(rn,d,t,w)){if(w.readyState=1,c&&m.trigger("ajaxSend",[w,d]),2===T)return w;d.async&&d.timeout>0&&(p=o.setTimeout(function(){w.abort("timeout")},d.timeout));try{T=1,u.send(b,r)}catch(e){if(!(T<2))throw e;r(-1,e)}}else r(-1,"No Transport");return w},getJSON:function(e,t,n){return ye.get(e,t,n,"json")},getScript:function(e,t){return ye.get(e,void 0,t,"script")}}),ye.each(["get","post"],function(e,t){ye[t]=function(e,n,r,i){return ye.isFunction(n)&&(i=i||r,r=n,n=void 0),ye.ajax(ye.extend({url:e,type:t,dataType:i,data:n,success:r},ye.isPlainObject(e)&&e))}}),ye._evalUrl=function(e){return ye.ajax({url:e,type:"GET",dataType:"script",cache:!0,async:!1,global:!1,throws:!0})},ye.fn.extend({wrapAll:function(e){if(ye.isFunction(e))return this.each(function(t){ye(this).wrapAll(e.call(this,t))});if(this[0]){var t=ye(e,this[0].ownerDocument).eq(0).clone(!0);this[0].parentNode&&t.insertBefore(this[0]),t.map(function(){for(var e=this;e.firstChild&&1===e.firstChild.nodeType;)e=e.firstChild;return e}).append(this)}return this},wrapInner:function(e){return ye.isFunction(e)?this.each(function(t){ye(this).wrapInner(e.call(this,t))}):this.each(function(){var t=ye(this),n=t.contents();n.length?n.wrapAll(e):t.append(e)})},wrap:function(e){var t=ye.isFunction(e);return this.each(function(n){ye(this).wrapAll(t?e.call(this,n):e)})},unwrap:function(){return this.parent().each(function(){ye.nodeName(this,"body")||ye(this).replaceWith(this.childNodes)}).end()}}),ye.expr.filters.hidden=function(e){return ge.reliableHiddenOffsets()?e.offsetWidth<=0&&e.offsetHeight<=0&&!e.getClientRects().length:ne(e)},ye.expr.filters.visible=function(e){return!ye.expr.filters.hidden(e)};var ln=/%20/g,pn=/\[\]$/,cn=/\r?\n/g,un=/^(?:submit|button|image|reset|file)$/i,hn=/^(?:input|select|textarea|keygen)/i;ye.param=function(e,t){var n,r=[],i=function(e,t){t=ye.isFunction(t)?t():null==t?"":t,r[r.length]=encodeURIComponent(e)+"="+encodeURIComponent(t)};if(void 0===t&&(t=ye.ajaxSettings&&ye.ajaxSettings.traditional),ye.isArray(e)||e.jquery&&!ye.isPlainObject(e))ye.each(e,function(){i(this.name,this.value)});else for(n in e)re(n,e[n],t,i);return r.join("&").replace(ln,"+")},ye.fn.extend({serialize:function(){return ye.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var e=ye.prop(this,"elements");return e?ye.makeArray(e):this}).filter(function(){var e=this.type;return this.name&&!ye(this).is(":disabled")&&hn.test(this.nodeName)&&!un.test(e)&&(this.checked||!Ve.test(e))}).map(function(e,t){var n=ye(this).val();return null==n?null:ye.isArray(n)?ye.map(n,function(e){return{name:t.name,value:e.replace(cn,"\r\n")}}):{name:t.name,value:n.replace(cn,"\r\n")}}).get()}}),ye.ajaxSettings.xhr=void 0!==o.ActiveXObject?function(){return this.isLocal?oe():le.documentMode>8?ie():/^(get|post|head|put|delete|options)$/i.test(this.type)&&ie()||oe();
}:ie;var dn=0,fn={},mn=ye.ajaxSettings.xhr();o.attachEvent&&o.attachEvent("onunload",function(){for(var e in fn)fn[e](void 0,!0)}),ge.cors=!!mn&&"withCredentials"in mn,mn=ge.ajax=!!mn,mn&&ye.ajaxTransport(function(e){if(!e.crossDomain||ge.cors){var t;return{send:function(n,r){var i,s=e.xhr(),a=++dn;if(s.open(e.type,e.url,e.async,e.username,e.password),e.xhrFields)for(i in e.xhrFields)s[i]=e.xhrFields[i];e.mimeType&&s.overrideMimeType&&s.overrideMimeType(e.mimeType),e.crossDomain||n["X-Requested-With"]||(n["X-Requested-With"]="XMLHttpRequest");for(i in n)void 0!==n[i]&&s.setRequestHeader(i,n[i]+"");s.send(e.hasContent&&e.data||null),t=function(n,i){var o,l,p;if(t&&(i||4===s.readyState))if(delete fn[a],t=void 0,s.onreadystatechange=ye.noop,i)4!==s.readyState&&s.abort();else{p={},o=s.status,"string"==typeof s.responseText&&(p.text=s.responseText);try{l=s.statusText}catch(e){l=""}o||!e.isLocal||e.crossDomain?1223===o&&(o=204):o=p.text?200:404}p&&r(o,l,p,s.getAllResponseHeaders())},e.async?4===s.readyState?o.setTimeout(t):s.onreadystatechange=fn[a]=t:t()},abort:function(){t&&t(void 0,!0)}}}}),ye.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/\b(?:java|ecma)script\b/},converters:{"text script":function(e){return ye.globalEval(e),e}}}),ye.ajaxPrefilter("script",function(e){void 0===e.cache&&(e.cache=!1),e.crossDomain&&(e.type="GET",e.global=!1)}),ye.ajaxTransport("script",function(e){if(e.crossDomain){var t,n=le.head||ye("head")[0]||le.documentElement;return{send:function(r,i){t=le.createElement("script"),t.async=!0,e.scriptCharset&&(t.charset=e.scriptCharset),t.src=e.url,t.onload=t.onreadystatechange=function(e,n){(n||!t.readyState||/loaded|complete/.test(t.readyState))&&(t.onload=t.onreadystatechange=null,t.parentNode&&t.parentNode.removeChild(t),t=null,n||i(200,"success"))},n.insertBefore(t,n.firstChild)},abort:function(){t&&t.onload(void 0,!0)}}}});var gn=[],vn=/(=)\?(?=&|$)|\?\?/;ye.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var e=gn.pop()||ye.expando+"_"+Gt++;return this[e]=!0,e}}),ye.ajaxPrefilter("json jsonp",function(e,t,n){var r,i,s,a=e.jsonp!==!1&&(vn.test(e.url)?"url":"string"==typeof e.data&&0===(e.contentType||"").indexOf("application/x-www-form-urlencoded")&&vn.test(e.data)&&"data");if(a||"jsonp"===e.dataTypes[0])return r=e.jsonpCallback=ye.isFunction(e.jsonpCallback)?e.jsonpCallback():e.jsonpCallback,a?e[a]=e[a].replace(vn,"$1"+r):e.jsonp!==!1&&(e.url+=($t.test(e.url)?"&":"?")+e.jsonp+"="+r),e.converters["script json"]=function(){return s||ye.error(r+" was not called"),s[0]},e.dataTypes[0]="json",i=o[r],o[r]=function(){s=arguments},n.always(function(){void 0===i?ye(o).removeProp(r):o[r]=i,e[r]&&(e.jsonpCallback=t.jsonpCallback,gn.push(r)),s&&ye.isFunction(i)&&i(s[0]),s=i=void 0}),"script"}),ye.parseHTML=function(e,t,n){if(!e||"string"!=typeof e)return null;"boolean"==typeof t&&(n=t,t=!1),t=t||le;var r=ke.exec(e),i=!n&&[];return r?[t.createElement(r[1])]:(r=x([e],t,i),i&&i.length&&ye(i).remove(),ye.merge([],r.childNodes))};var yn=ye.fn.load;ye.fn.load=function(e,t,r){if("string"!=typeof e&&yn)return yn.apply(this,arguments);var i,o,s,a=this,l=e.indexOf(" ");return l>-1&&(i=ye.trim(e.slice(l,e.length)),e=e.slice(0,l)),ye.isFunction(t)?(r=t,t=void 0):t&&"object"===("undefined"==typeof t?"undefined":n(t))&&(o="POST"),a.length>0&&ye.ajax({url:e,type:o||"GET",dataType:"html",data:t}).done(function(e){s=arguments,a.html(i?ye("<div>").append(ye.parseHTML(e)).find(i):e)}).always(r&&function(e,t){a.each(function(){r.apply(this,s||[e.responseText,t,e])})}),this},ye.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(e,t){ye.fn[t]=function(e){return this.on(t,e)}}),ye.expr.filters.animated=function(e){return ye.grep(ye.timers,function(t){return e===t.elem}).length},ye.offset={setOffset:function(e,t,n){var r,i,o,s,a,l,p,c=ye.css(e,"position"),u=ye(e),h={};"static"===c&&(e.style.position="relative"),a=u.offset(),o=ye.css(e,"top"),l=ye.css(e,"left"),p=("absolute"===c||"fixed"===c)&&ye.inArray("auto",[o,l])>-1,p?(r=u.position(),s=r.top,i=r.left):(s=parseFloat(o)||0,i=parseFloat(l)||0),ye.isFunction(t)&&(t=t.call(e,n,ye.extend({},a))),null!=t.top&&(h.top=t.top-a.top+s),null!=t.left&&(h.left=t.left-a.left+i),"using"in t?t.using.call(e,h):u.css(h)}},ye.fn.extend({offset:function(e){if(arguments.length)return void 0===e?this:this.each(function(t){ye.offset.setOffset(this,e,t)});var t,n,r={top:0,left:0},i=this[0],o=i&&i.ownerDocument;if(o)return t=o.documentElement,ye.contains(t,i)?("undefined"!=typeof i.getBoundingClientRect&&(r=i.getBoundingClientRect()),n=se(o),{top:r.top+(n.pageYOffset||t.scrollTop)-(t.clientTop||0),left:r.left+(n.pageXOffset||t.scrollLeft)-(t.clientLeft||0)}):r},position:function(){if(this[0]){var e,t,n={top:0,left:0},r=this[0];return"fixed"===ye.css(r,"position")?t=r.getBoundingClientRect():(e=this.offsetParent(),t=this.offset(),ye.nodeName(e[0],"html")||(n=e.offset()),n.top+=ye.css(e[0],"borderTopWidth",!0),n.left+=ye.css(e[0],"borderLeftWidth",!0)),{top:t.top-n.top-ye.css(r,"marginTop",!0),left:t.left-n.left-ye.css(r,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){for(var e=this.offsetParent;e&&!ye.nodeName(e,"html")&&"static"===ye.css(e,"position");)e=e.offsetParent;return e||yt})}}),ye.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(e,t){var n=/Y/.test(t);ye.fn[e]=function(r){return Ue(this,function(e,r,i){var o=se(e);return void 0===i?o?t in o?o[t]:o.document.documentElement[r]:e[r]:void(o?o.scrollTo(n?ye(o).scrollLeft():i,n?i:ye(o).scrollTop()):e[r]=i)},e,r,arguments.length,null)}}),ye.each(["top","left"],function(e,t){ye.cssHooks[t]=L(ge.pixelPosition,function(e,n){if(n)return n=Et(e,t),gt.test(n)?ye(e).position()[t]+"px":n})}),ye.each({Height:"height",Width:"width"},function(e,t){ye.each({padding:"inner"+e,content:t,"":"outer"+e},function(n,r){ye.fn[r]=function(r,i){var o=arguments.length&&(n||"boolean"!=typeof r),s=n||(r===!0||i===!0?"margin":"border");return Ue(this,function(t,n,r){var i;return ye.isWindow(t)?t.document.documentElement["client"+e]:9===t.nodeType?(i=t.documentElement,Math.max(t.body["scroll"+e],i["scroll"+e],t.body["offset"+e],i["offset"+e],i["client"+e])):void 0===r?ye.css(t,n,s):ye.style(t,n,r,s)},t,o?r:void 0,o,null)}})}),ye.fn.extend({bind:function(e,t,n){return this.on(e,null,t,n)},unbind:function(e,t){return this.off(e,null,t)},delegate:function(e,t,n,r){return this.on(t,e,n,r)},undelegate:function(e,t,n){return 1===arguments.length?this.off(e,"**"):this.off(t,e||"**",n)}}),ye.fn.size=function(){return this.length},ye.fn.andSelf=ye.fn.addBack,r=[],i=function(){return ye}.apply(t,r),!(void 0!==i&&(e.exports=i));var bn=o.jQuery,En=o.$;return ye.noConflict=function(e){return o.$===ye&&(o.$=En),e&&o.jQuery===ye&&(o.jQuery=bn),ye},s||(o.jQuery=o.$=ye),ye})}).call(t,n(329)(e))},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var i=function(){function e(){var t=this;r(this,e),this._nodesById={},this._bordersById={},this._orderedIds=[],this._cachedBoundingBoxesById={},window.addEventListener("resize",function(){t._cachedBoundingBoxesById={}})}return e.prototype.registerDOMNode=function(e,t,n,r){this._nodesById[e]=t,this._bordersById[e]=r;for(var i=[].concat(n||[],[e],this._orderedIds),o=[],s={},a=i,l=Array.isArray(a),p=0,a=l?a:a[Symbol.iterator]();;){var c;if(l){if(p>=a.length)break;c=a[p++]}else{if(p=a.next(),p.done)break;c=p.value}var u=c;s[u]||(o.push(u),s[u]=!0)}this._orderedIds=o},e.prototype.unregisterDOMNode=function(e){delete this._nodesById[e]},e.prototype.idForCoords=function(e,t){for(var n=this._orderedIds,r=Array.isArray(n),i=0,n=r?n:n[Symbol.iterator]();;){var o;if(r){if(i>=n.length)break;o=n[i++]}else{if(i=n.next(),i.done)break;o=i.value}var s=o,a=this._nodesById[s];if(a){var l=a.getBoundingClientRect();if(l.left<=e&&l.right>e&&l.top<=t&&l.bottom>t)return this._cachedBoundingBoxesById[s]=l,s}}},e.prototype.layoutPropsForId=function(e){return this._cachedBoundingBoxesById[e]||(this._cachedBoundingBoxesById[e]=this._nodesById[e].getBoundingClientRect()),{initialBounds:this._cachedBoundingBoxesById[e],borders:this._bordersById[e]}},e}();e.exports=i},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var i=function(){function e(t){r(this,e),this.handlers=t,this.activePopover=null,this.popovers={}}return e.prototype.registerPopover=function(e,t){this.popovers[e]=t},e.prototype.unregisterPopover=function(e){delete this.popovers[e]},e.prototype.isPopoverVisible=function(){return null!=this.activePopover},e.prototype.onBlur=function(){this.activePopover=null,this.handlers.onActiveNodesChanged({popover:null,focus:null})},e.prototype.onFocus=function(e){this.activePopover?this._isNodeInsidePopover(this.activePopover,e)?this.handlers.onActiveNodesChanged({popover:{parentId:this.activePopover,childIds:this.popovers[this.activePopover]},focus:e}):this.handlers.onActiveNodesChanged({popover:{parentId:this.activePopover,childIds:this.popovers[this.activePopover]},focus:null}):(this.activePopover=null,this.handlers.onActiveNodesChanged({popover:null,focus:e}))},e.prototype.onLongPress=function(e){!this.activePopover&&this.popovers[e]&&(this.activePopover=e,this.handlers.onActiveNodesChanged({popover:{parentId:this.activePopover,childIds:this.popovers[this.activePopover]},focus:this._defaultNodeForPopover(this.activePopover)}))},e.prototype.onTrigger=function(e){this.handlers.onClick(e,e,!1)},e.prototype.onTouchEnd=function(e){var t=!!this.activePopover;if(t){if(this._isNodeInsidePopover(this.activePopover,e))this.handlers.onClick(e,e,t);else if(this.activePopover===e){var n=this._defaultNodeForPopover(e);this.handlers.onClick(n,n,t)}}else if(this.popovers[e]){var r=this._defaultNodeForPopover(e),i=e;this.handlers.onClick(r,i,t)}else null!=e&&this.onTrigger(e);this.onBlur()},e.prototype._isNodeInsidePopover=function(e,t){return this.popovers[e].includes(t)},e.prototype._defaultNodeForPopover=function(e){return this.popovers[e][0]},e}();e.exports=i},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},o=n(273),s=o.holdIntervalMs,a={longPressWaitTimeMs:50,swipeThresholdPx:20,holdIntervalMs:s},l=function(){function e(t,n,o,s){r(this,e),this.handlers=t,this.options=i({},a,n),this.swipeDisabledNodeIds=o||[],this.multiPressableKeys=s||[],this.touchState={},this.swipeState=null}return e.prototype._maybeCancelLongPressForTouch=function(e){var t=this.touchState[e].longPressTimeoutId;t&&(clearTimeout(t),this.touchState[e]=i({},this.touchState[e],{longPressTimeoutId:null}))},e.prototype._maybeCancelPressAndHoldForTouch=function(e){var t=this.touchState[e].pressAndHoldIntervalId;t&&(clearInterval(t),this.touchState[e]=i({},this.touchState[e],{pressAndHoldIntervalId:null}))},e.prototype._cleanupTouchEvent=function(e){this._maybeCancelLongPressForTouch(e),this._maybeCancelPressAndHoldForTouch(e),delete this.touchState[e]},e.prototype._onFocus=function(e,t){var n=this;this._maybeCancelLongPressForTouch(t),this._maybeCancelPressAndHoldForTouch(t),this.touchState[t]=i({},this.touchState[t],{activeNodeId:e}),this.handlers.onFocus(e),e&&(this.multiPressableKeys.includes(e)?(this.handlers.onTrigger(e),this.touchState[t]=i({},this.touchState[t],{pressAndHoldIntervalId:setInterval(function(){n.handlers.onTrigger(e)},this.options.holdIntervalMs)})):this.touchState[t]=i({},this.touchState[t],{longPressTimeoutId:setTimeout(function(){n.handlers.onLongPress(e),n.touchState[t]=i({},n.touchState[t],{longPressTimeoutId:null})},this.options.longPressWaitTimeMs)}))},e.prototype._onSwipeStart=function(){for(var e=Object.keys(this.touchState),t=Array.isArray(e),n=0,e=t?e:e[Symbol.iterator]();;){var r;if(t){if(n>=e.length)break;r=e[n++]}else{if(n=e.next(),n.done)break;r=n.value}var i=r;this._maybeCancelLongPressForTouch(i),this._maybeCancelPressAndHoldForTouch(i)}this.touchState={},this.handlers.onBlur()},e.prototype.onTouchStart=function(e,t,n){if(!this.swipeState&&!this.touchState[t]){var r=e();this.touchState[t]={swipeLocked:this.swipeDisabledNodeIds.includes(r),startX:n},this._onFocus(r,t)}},e.prototype.onTouchMove=function(e,t,n,r){if(this.swipeState)this.swipeState.touchId===t&&this.handlers.onSwipeChange(n-this.swipeState.startX);else if(this.touchState[t]){var i=this.touchState[t],o=i.activeNodeId,s=i.startX,a=i.swipeLocked,l=n-s,p=r&&!a&&Math.abs(l)>this.options.swipeThresholdPx;if(p)this._onSwipeStart(),this.swipeState={touchId:t,startX:s},this.handlers.onSwipeChange(n-this.swipeState.startX);else{var c=e();c!==o&&this._onFocus(c,t)}}},e.prototype.onTouchEnd=function(e,t,n){if(this.swipeState)this.swipeState.touchId===t&&(this.handlers.onSwipeEnd(n-this.swipeState.startX),this.swipeState=null);else if(this.touchState[t]){var r=this.touchState[t],i=r.activeNodeId,o=r.pressAndHoldIntervalId;this._cleanupTouchEvent(t);var s=!!o;s?this.handlers.onBlur():this.handlers.onTouchEnd(i)}},e.prototype.onTouchCancel=function(e){this.swipeState?this.swipeState.touchId===e&&(this.handlers.onSwipeEnd(0),this.swipeState=null):this.touchState[e]&&(this._cleanupTouchEvent(e),this.handlers.onBlur())},e}();e.exports=l},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={Webkit:{transform:!0,transformOrigin:!0,transformOriginX:!0,transformOriginY:!0,backfaceVisibility:!0,perspective:!0,perspectiveOrigin:!0,transformStyle:!0,transformOriginZ:!0,animation:!0,animationDelay:!0,animationDirection:!0,animationFillMode:!0,animationDuration:!0,animationIterationCount:!0,animationName:!0,animationPlayState:!0,animationTimingFunction:!0,appearance:!0,userSelect:!0,fontKerning:!0,textEmphasisPosition:!0,textEmphasis:!0,textEmphasisStyle:!0,textEmphasisColor:!0,boxDecorationBreak:!0,clipPath:!0,maskImage:!0,maskMode:!0,maskRepeat:!0,maskPosition:!0,maskClip:!0,maskOrigin:!0,maskSize:!0,maskComposite:!0,mask:!0,maskBorderSource:!0,maskBorderMode:!0,maskBorderSlice:!0,maskBorderWidth:!0,maskBorderOutset:!0,maskBorderRepeat:!0,maskBorder:!0,maskType:!0,textDecorationStyle:!0,textDecorationSkip:!0,textDecorationLine:!0,textDecorationColor:!0,filter:!0,fontFeatureSettings:!0,breakAfter:!0,breakBefore:!0,breakInside:!0,columnCount:!0,columnFill:!0,columnGap:!0,columnRule:!0,columnRuleColor:!0,columnRuleStyle:!0,columnRuleWidth:!0,columns:!0,columnSpan:!0,columnWidth:!0,flex:!0,flexBasis:!0,flexDirection:!0,flexGrow:!0,flexFlow:!0,flexShrink:!0,flexWrap:!0,alignContent:!0,alignItems:!0,alignSelf:!0,justifyContent:!0,order:!0,transition:!0,transitionDelay:!0,transitionDuration:!0,transitionProperty:!0,transitionTimingFunction:!0,backdropFilter:!0,scrollSnapType:!0,scrollSnapPointsX:!0,scrollSnapPointsY:!0,scrollSnapDestination:!0,scrollSnapCoordinate:!0,shapeImageThreshold:!0,shapeImageMargin:!0,shapeImageOutside:!0,hyphens:!0,flowInto:!0,flowFrom:!0,regionFragment:!0,textSizeAdjust:!0,borderImage:!0,borderImageOutset:!0,borderImageRepeat:!0,borderImageSlice:!0,borderImageSource:!0,borderImageWidth:!0,tabSize:!0,objectFit:!0,objectPosition:!0},Moz:{appearance:!0,userSelect:!0,boxSizing:!0,textAlignLast:!0,textDecorationStyle:!0,textDecorationSkip:!0,textDecorationLine:!0,textDecorationColor:!0,tabSize:!0,hyphens:!0,fontFeatureSettings:!0,breakAfter:!0,breakBefore:!0,breakInside:!0,columnCount:!0,columnFill:!0,columnGap:!0,columnRule:!0,columnRuleColor:!0,columnRuleStyle:!0,columnRuleWidth:!0,columns:!0,columnSpan:!0,columnWidth:!0},ms:{flex:!0,flexBasis:!1,flexDirection:!0,flexGrow:!1,flexFlow:!0,flexShrink:!1,flexWrap:!0,alignContent:!1,alignItems:!1,alignSelf:!1,justifyContent:!1,order:!1,transform:!0,transformOrigin:!0,transformOriginX:!0,transformOriginY:!0,userSelect:!0,wrapFlow:!0,wrapThrough:!0,wrapMargin:!0,scrollSnapType:!0,scrollSnapPointsX:!0,scrollSnapPointsY:!0,scrollSnapDestination:!0,scrollSnapCoordinate:!0,touchAction:!0,hyphens:!0,flowInto:!0,flowFrom:!0,breakBefore:!0,breakAfter:!0,breakInside:!0,regionFragment:!0,gridTemplateColumns:!0,gridTemplateRows:!0,gridTemplateAreas:!0,gridTemplate:!0,gridAutoColumns:!0,gridAutoRows:!0,gridAutoFlow:!0,grid:!0,gridRowStart:!0,gridColumnStart:!0,gridRowEnd:!0,gridRow:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnGap:!0,gridRowGap:!0,gridArea:!0,gridGap:!0,textSizeAdjust:!0}},e.exports=t.default},function(e,t,n){"use strict";function r(e,t){return e+t.charAt(0).toUpperCase()+t.substring(1)}function i(e){for(var t=e.length,n=t,r=0,i=void 0;t>=4;)i=255&e.charCodeAt(r)|(255&e.charCodeAt(++r))<<8|(255&e.charCodeAt(++r))<<16|(255&e.charCodeAt(++r))<<24,i=1540483477*(65535&i)+((1540483477*(i>>>16)&65535)<<16),i^=i>>>24,i=1540483477*(65535&i)+((1540483477*(i>>>16)&65535)<<16),n=1540483477*(65535&n)+((1540483477*(n>>>16)&65535)<<16)^i,t-=4,++r;switch(t){case 3:n^=(255&e.charCodeAt(r+2))<<16;case 2:n^=(255&e.charCodeAt(r+1))<<8;case 1:n^=255&e.charCodeAt(r),n=1540483477*(65535&n)+((1540483477*(n>>>16)&65535)<<16)}return n^=n>>>13,n=1540483477*(65535&n)+((1540483477*(n>>>16)&65535)<<16),n^=n>>>15,(n>>>0).toString(36)}var o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol?"symbol":typeof e};Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){var n=[],r=!0,i=!1,o=void 0;try{for(var s,a=e[Symbol.iterator]();!(r=(s=a.next()).done)&&(n.push(s.value),!t||n.length!==t);r=!0);}catch(e){i=!0,o=e}finally{try{!r&&a.return&&a.return()}finally{if(i)throw o}}return n}return function(t,n){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},l=function(e){return Object.keys(e).map(function(t){return[t,e[t]]})};t.objectToPairs=l;var p=function(e){var t={};return e.forEach(function(e){var n=s(e,2),r=n[0],i=n[1];t[r]=i}),t},c=function(e,t){return p(l(e).map(t))};t.mapObj=c;var u=/([A-Z])/g,h=/^ms-/,d=function(e){return e.replace(u,"-$1").toLowerCase()},f=function(e){return d(e).replace(h,"-ms-")};t.kebabifyStyleName=f;var m=function e(t,n){if("object"!==("undefined"==typeof t?"undefined":o(t)))return n;var r=a({},t);return Object.keys(n).forEach(function(i){r.hasOwnProperty(i)?r[i]=e(t[i],n[i]):r[i]=n[i]}),r};t.recursiveMerge=m;var g={animationIterationCount:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridRow:!0,gridColumn:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,stopOpacity:!0,strokeDashoffset:!0,strokeOpacity:!0,strokeWidth:!0},v=["Webkit","ms","Moz","O"];Object.keys(g).forEach(function(e){v.forEach(function(t){g[r(t,e)]=g[e]})});var y=function(e,t){return"number"==typeof t?g[e]?""+t:t+"px":t};t.stringifyValue=y;var b=function(e){return i(JSON.stringify(e))};t.hashObject=b;var E=/^([^:]+:.*?)( !important)?$/,T=function(e){return e.split(";").map(function(e){return e.replace(E,function(e,t,n){return t+" !important"})}).join(";")};t.importantify=T},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol?"symbol":typeof e};Object.defineProperty(t,"__esModule",{value:!0});var o=n(333),s=r(o),a=n(309),l=null,p=function(e){if(null==l&&(l=document.querySelector("style[data-aphrodite]"),null==l)){var t=document.head||document.getElementsByTagName("head")[0];l=document.createElement("style"),l.type="text/css",l.setAttribute("data-aphrodite",""),t.appendChild(l)}l.styleSheet?l.styleSheet.cssText+=e:l.appendChild(document.createTextNode(e))},c={fontFamily:function e(t){return Array.isArray(t)?t.map(e).join(","):"object"===("undefined"==typeof t?"undefined":i(t))?(f(t.fontFamily,"@font-face",[t],!1),'"'+t.fontFamily+'"'):t}},u={},h="",d=!1,f=function(e,t,n,r){if(!u[e]){var i=(0,a.generateCSS)(t,n,c,r);if(!d){if("undefined"==typeof document)throw new Error("Cannot automatically buffer without a document");d=!0,(0,s.default)(y)}h+=i,u[e]=!0}};t.injectStyleOnce=f;var m=function(){h="",u={},d=!1,l=null};t.reset=m;var g=function(){if(d)throw new Error("Cannot buffer while already buffering");d=!0};t.startBuffering=g;var v=function(){d=!1;var e=h;return h="",e};t.flushToString=v;var y=function(){var e=v();e.length>0&&p(e)};t.flushToStyleTag=y;var b=function(){return Object.keys(u)};t.getRenderedClassNames=b;var E=function(e){e.forEach(function(e){u[e]=!0})};t.addRenderedClassNames=E},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}t.__esModule=!0,t.compose=t.applyMiddleware=t.bindActionCreators=t.combineReducers=t.createStore=void 0;var i=n(310),o=r(i),s=n(311),a=r(s),l=n(312),p=r(l),c=n(313),u=r(c),h=n(314),d=r(h),f=n(319);r(f);t.createStore=o.default,t.combineReducers=a.default,t.bindActionCreators=p.default,t.applyMiddleware=u.default,t.compose=d.default},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return e.charAt(0).toUpperCase()+e.slice(1)},e.exports=t.default},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=arguments.length<=1||void 0===arguments[1]?{}:arguments[1];return Object.keys(t).reduce(function(n,r){return e[r]=t[r],n},{})},e.exports=t.default},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if("string"==typeof t&&t.indexOf("calc(")>-1){if((0,l.default)(t))return;return(0,s.default)(e,t,function(e,t){return t.replace(/calc\(/g,e+"calc(")})}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=i;var o=n(316),s=r(o),a=n(317),l=r(a);e.exports=t.default},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if("cursor"===e&&a[t])return(0,s.default)(e,t)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=i;var o=n(316),s=r(o),a={"zoom-in":!0,"zoom-out":!0,grab:!0,grabbing:!0};e.exports=t.default},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if("display"===e&&s[t])return{display:["-webkit-box","-moz-box","-ms-"+t+"box","-webkit-"+t,t]}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=i;var o=n(318),s=(r(o),{flex:!0,"inline-flex":!0});e.exports=t.default},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(a[e]&&l[t])return(0,s.default)(e,t)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=i;var o=n(316),s=r(o),a={maxHeight:!0,maxWidth:!0,width:!0,height:!0,columnWidth:!0,minWidth:!0,minHeight:!0},l={"min-content":!0,"max-content":!0,"fill-available":!0,"fit-content":!0,"contain-floats":!0};e.exports=t.default},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if("string"==typeof t&&null!==t.match(p)){if((0,l.default)(t))return;return(0,s.default)(e,t)}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=i;var o=n(316),s=r(o),a=n(317),l=r(a),p=/linear-gradient|radial-gradient|repeating-linear-gradient|repeating-radial-gradient/;e.exports=t.default},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(e,t){if("string"==typeof t&&m[e]){var n,r=s(t),o=r.split(",").filter(function(e){return null===e.match(/-moz-|-ms-/)}).join(",");return e.indexOf("Webkit")>-1?i({},e,o):(n={},i(n,"Webkit"+(0,c.default)(e),o),i(n,e,r),n)}}function s(e){if((0,h.default)(e))return e;var t=e.split(/,(?![^()]*(?:\([^()]*\))?\))/g);return t.forEach(function(e,n){t[n]=Object.keys(f.default).reduce(function(t,n){var r="-"+n.toLowerCase()+"-";return Object.keys(f.default[n]).forEach(function(n){var i=(0,l.default)(n);e.indexOf(i)>-1&&(t=e.replace(i,r+i)+","+t)}),t},e)}),t.join(",")}Object.defineProperty(t,"__esModule",{value:!0}),t.default=o;var a=n(318),l=r(a),p=n(290),c=r(p),u=n(317),h=r(u),d=n(286),f=r(d),m={transition:!0,transitionProperty:!0,WebkitTransition:!0,WebkitTransitionProperty:!0};e.exports=t.default},function(e,t,n){"use strict";function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function i(e,t){if(s[e])return r({},s[e],o[t]||t)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=i;var o={"space-around":"distribute","space-between":"justify","flex-start":"start","flex-end":"end"},s={alignContent:"msFlexLinePack",alignSelf:"msFlexItemAlign",alignItems:"msFlexAlign",justifyContent:"msFlexPack",order:"msFlexOrder",flexGrow:"msFlexPositive",flexShrink:"msFlexNegative",flexBasis:"msPreferredSize"};e.exports=t.default},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(e,t){return"flexDirection"===e?{WebkitBoxOrient:t.indexOf("column")>-1?"vertical":"horizontal",WebkitBoxDirection:t.indexOf("reverse")>-1?"reverse":"normal"}:l[e]?i({},l[e],a[t]||t):void 0}Object.defineProperty(t,"__esModule",{value:!0}),t.default=o;var s=n(318),a=(r(s),{"space-around":"justify","space-between":"justify","flex-start":"start","flex-end":"end","wrap-reverse":"multiple",wrap:"multiple"}),l={alignItems:"WebkitBoxAlign",justifyContent:"WebkitBoxPack",flexWrap:"WebkitBoxLines"};e.exports=t.default},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==("undefined"==typeof t?"undefined":a(t))&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+("undefined"==typeof t?"undefined":a(t)));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol?"symbol":typeof e};t.__esModule=!0,t.default=void 0;var l=n(34),p=n(320),c=r(p),u=n(321),h=(r(u),function(e){function t(n,r){i(this,t);var s=o(this,e.call(this,n,r));return s.store=n.store,s}return s(t,e),t.prototype.getChildContext=function(){return{store:this.store}},t.prototype.render=function(){var e=this.props.children;return l.Children.only(e)},t}(l.Component));t.default=h,h.propTypes={store:c.default.isRequired,children:l.PropTypes.element.isRequired},h.childContextTypes={store:c.default.isRequired}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==("undefined"==typeof t?"undefined":c(t))&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+("undefined"==typeof t?"undefined":c(t)));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function a(e){return e.displayName||e.name||"Component"}function l(e,t){try{return e.apply(t)}catch(e){return N.value=e,N}}function p(e,t,n){var r=arguments.length<=3||void 0===arguments[3]?{}:arguments[3],p=Boolean(e),c=e||P,d=void 0;d="function"==typeof t?t:t?(0,y.default)(t):S;var m=n||k,v=r.pure,b=void 0===v||v,E=r.withRef,T=void 0!==E&&E,w=b&&m!==k,_=M++;return function(e){function t(e,t,n){var r=m(e,t,n);return r}var n="Connect("+a(e)+")",r=function(r){function a(e,t){i(this,a);var s=o(this,r.call(this,e,t));s.version=_,s.store=e.store||t.store,(0,C.default)(s.store,'Could not find "store" in either the context or '+('props of "'+n+'". ')+"Either wrap the root component in a <Provider>, "+('or explicitly pass "store" as a prop to "'+n+'".'));var l=s.store.getState();return s.state={storeState:l},s.clearCache(),s}return s(a,r),a.prototype.shouldComponentUpdate=function(){return!b||this.haveOwnPropsChanged||this.hasStoreStateChanged},a.prototype.computeStateProps=function(e,t){if(!this.finalMapStateToProps)return this.configureFinalMapState(e,t);var n=e.getState(),r=this.doStatePropsDependOnOwnProps?this.finalMapStateToProps(n,t):this.finalMapStateToProps(n);return r},a.prototype.configureFinalMapState=function(e,t){var n=c(e.getState(),t),r="function"==typeof n;return this.finalMapStateToProps=r?n:c,this.doStatePropsDependOnOwnProps=1!==this.finalMapStateToProps.length,r?this.computeStateProps(e,t):n},a.prototype.computeDispatchProps=function(e,t){if(!this.finalMapDispatchToProps)return this.configureFinalMapDispatch(e,t);var n=e.dispatch,r=this.doDispatchPropsDependOnOwnProps?this.finalMapDispatchToProps(n,t):this.finalMapDispatchToProps(n);return r},a.prototype.configureFinalMapDispatch=function(e,t){var n=d(e.dispatch,t),r="function"==typeof n;return this.finalMapDispatchToProps=r?n:d,this.doDispatchPropsDependOnOwnProps=1!==this.finalMapDispatchToProps.length,r?this.computeDispatchProps(e,t):n},a.prototype.updateStatePropsIfNeeded=function(){var e=this.computeStateProps(this.store,this.props);return(!this.stateProps||!(0,g.default)(e,this.stateProps))&&(this.stateProps=e,!0)},a.prototype.updateDispatchPropsIfNeeded=function(){var e=this.computeDispatchProps(this.store,this.props);return(!this.dispatchProps||!(0,g.default)(e,this.dispatchProps))&&(this.dispatchProps=e,!0)},a.prototype.updateMergedPropsIfNeeded=function(){var e=t(this.stateProps,this.dispatchProps,this.props);return!(this.mergedProps&&w&&(0,g.default)(e,this.mergedProps))&&(this.mergedProps=e,!0)},a.prototype.isSubscribed=function(){return"function"==typeof this.unsubscribe},a.prototype.trySubscribe=function(){p&&!this.unsubscribe&&(this.unsubscribe=this.store.subscribe(this.handleChange.bind(this)),this.handleChange())},a.prototype.tryUnsubscribe=function(){this.unsubscribe&&(this.unsubscribe(),this.unsubscribe=null)},a.prototype.componentDidMount=function(){this.trySubscribe()},a.prototype.componentWillReceiveProps=function(e){b&&(0,g.default)(e,this.props)||(this.haveOwnPropsChanged=!0)},a.prototype.componentWillUnmount=function(){this.tryUnsubscribe(),this.clearCache()},a.prototype.clearCache=function(){this.dispatchProps=null,this.stateProps=null,this.mergedProps=null,this.haveOwnPropsChanged=!0,this.hasStoreStateChanged=!0,this.haveStatePropsBeenPrecalculated=!1,this.statePropsPrecalculationError=null,this.renderedElement=null,this.finalMapDispatchToProps=null,this.finalMapStateToProps=null},a.prototype.handleChange=function(){if(this.unsubscribe){var e=this.store.getState(),t=this.state.storeState;if(!b||t!==e){if(b&&!this.doStatePropsDependOnOwnProps){var n=l(this.updateStatePropsIfNeeded,this);if(!n)return;n===N&&(this.statePropsPrecalculationError=N.value),this.haveStatePropsBeenPrecalculated=!0}this.hasStoreStateChanged=!0,this.setState({
storeState:e})}}},a.prototype.getWrappedInstance=function(){return(0,C.default)(T,"To access the wrapped instance, you need to specify { withRef: true } as the fourth argument of the connect() call."),this.refs.wrappedInstance},a.prototype.render=function(){var t=this.haveOwnPropsChanged,n=this.hasStoreStateChanged,r=this.haveStatePropsBeenPrecalculated,i=this.statePropsPrecalculationError,o=this.renderedElement;if(this.haveOwnPropsChanged=!1,this.hasStoreStateChanged=!1,this.haveStatePropsBeenPrecalculated=!1,this.statePropsPrecalculationError=null,i)throw i;var s=!0,a=!0;b&&o&&(s=n||t&&this.doStatePropsDependOnOwnProps,a=t&&this.doDispatchPropsDependOnOwnProps);var l=!1,p=!1;r?l=!0:s&&(l=this.updateStatePropsIfNeeded()),a&&(p=this.updateDispatchPropsIfNeeded());var c=!0;return c=!!(l||p||t)&&this.updateMergedPropsIfNeeded(),!c&&o?o:(T?this.renderedElement=(0,h.createElement)(e,u({},this.mergedProps,{ref:"wrappedInstance"})):this.renderedElement=(0,h.createElement)(e,this.mergedProps),this.renderedElement)},a}(h.Component);return r.displayName=n,r.WrappedComponent=e,r.contextTypes={store:f.default},r.propTypes={store:f.default},(0,x.default)(r,e)}}var c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol?"symbol":typeof e},u=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e};t.__esModule=!0,t.default=p;var h=n(34),d=n(320),f=r(d),m=n(322),g=r(m),v=n(323),y=r(v),b=n(321),E=(r(b),n(331)),T=(r(E),n(330)),x=r(T),w=n(332),C=r(w),P=function(e){return{}},S=function(e){return{dispatch:e}},k=function(e,t,n){return u({},n,e,t)},N={value:null},M=0},function(e,t,n){"use strict";var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},i=n(34),o=n(186),s=n(275),a=s.connect,l=n(276),p=l.StyleSheet,c=l.css,u=n(243),h=u.View,d=n(324),f=n(325),m=n(326),g=n(205),v=g.KeyTypes,y=g.BorderDirections,b=g.BorderStyles,E=n(240),T=E.brightGreen,x=E.innerBorderColor,w=E.innerBorderStyle,C=E.innerBorderWidthPx,P=E.valueGrey,S=E.operatorGrey,k=E.controlGrey,N=E.emptyGrey,M=n(218),_=M.bordersPropType,O=M.iconPropType,A=M.keyConfigPropType,I=i.createClass({displayName:"KeypadButton",propTypes:{ariaLabel:i.PropTypes.string,borders:_,childKeys:i.PropTypes.arrayOf(A),disabled:i.PropTypes.bool,focused:i.PropTypes.bool,heightPx:i.PropTypes.number.isRequired,icon:O,onTouchCancel:i.PropTypes.func,onTouchEnd:i.PropTypes.func,onTouchMove:i.PropTypes.func,onTouchStart:i.PropTypes.func,popoverEnabled:i.PropTypes.bool,style:i.PropTypes.any,type:i.PropTypes.oneOf(Object.keys(v)).isRequired,widthPx:i.PropTypes.number.isRequired},mixins:[o],getDefaultProps:function(){return{borders:b.ALL,childKeys:[],disabled:!1,focused:!1,popoverEnabled:!1}},componentWillMount:function(){this.buttonSizeStyle=F(this.props.heightPx,this.props.widthPx)},componentDidMount:function(){this._preInjectStyles()},componentWillUpdate:function(e,t){e.heightPx===this.props.heightPx&&e.widthPx===this.props.widthPx||(this.buttonSizeStyle=F(e.heightPx,e.widthPx),this._preInjectStyles())},_preInjectStyles:function(){for(var e=Object.keys(v),t=Array.isArray(e),n=0,e=t?e:e[Symbol.iterator]();;){var r;if(t){if(n>=e.length)break;r=e[n++]}else{if(n=e.next(),n.done)break;r=n.value}var i=r;c.apply(void 0,[h.styles.initial].concat(this._getFocusStyle(i)));for(var o=Object.values(b),s=Array.isArray(o),a=0,o=s?o:o[Symbol.iterator]();;){var l;if(s){if(a>=o.length)break;l=o[a++]}else{if(a=o.next(),a.done)break;l=a.value}var p=l;c.apply(void 0,[h.styles.initial].concat(this._getButtonStyle(i,p)))}}},_getFocusStyle:function(e){var t=void 0;return t=e===v.INPUT_NAVIGATION||e===v.KEYPAD_NAVIGATION?L.light:L.bright,[L.focusBox,t]},_getButtonStyle:function(e,t,n){var r=void 0;switch(e){case v.EMPTY:r=L.empty;break;case v.MANY:case v.VALUE:r=L.value;break;case v.OPERATOR:r=L.operator;break;case v.INPUT_NAVIGATION:case v.KEYPAD_NAVIGATION:r=L.control;break;case v.ECHO:r=null}var i=[];return t.indexOf(y.LEFT)!==-1&&i.push(L.leftBorder),t.indexOf(y.BOTTOM)!==-1&&i.push(L.bottomBorder),[L.buttonBase,r].concat(i,[e===v.ECHO&&L.echo,this.buttonSizeStyle],Array.isArray(n)?n:[n])},render:function(){var e=this.props,t=e.ariaLabel,n=e.borders,o=e.childKeys,s=e.disabled,a=e.focused,l=e.icon,p=e.onTouchCancel,c=e.onTouchEnd,u=e.onTouchMove,g=e.onTouchStart,y=e.popoverEnabled,b=e.style,E=e.type,T=!s&&a||y||E===v.ECHO,x=this._getButtonStyle(E,n,b),w=this._getFocusStyle(E),C=[L.iconWrapper,s&&L.disabled],P={onTouchCancel:p,onTouchEnd:c,onTouchMove:u,onTouchStart:g},S=T&&i.createElement(h,{style:w}),k=!T&&!s&&o&&o.length>0&&i.createElement(m,{style:L.decalInset});if(E===v.EMPTY)return i.createElement(h,r({style:x},P));if(E===v.MANY){var N={role:"button",ariaLabel:o[0].ariaLabel},M=o.map(function(e){return e.icon});return i.createElement(h,r({style:x},P,N),S,i.createElement(h,{style:C},i.createElement(f,{icons:M,focused:T})),k)}var _={role:"button",ariaLabel:t};return i.createElement(h,r({style:x},P,_),S,i.createElement(h,{style:C},i.createElement(d,{icon:l,focused:T})),k)}}),R=4,D=0,L=p.create({buttonBase:{"-webkit-box-flex":"1",flex:1,cursor:"pointer",userSelect:"none",justifyContent:"center",alignItems:"center",borderColor:x,borderStyle:w,boxSizing:"border-box"},decalInset:{top:R,right:R},echo:{borderColor:"transparent"},value:{backgroundColor:P},operator:{backgroundColor:S},control:{backgroundColor:k},empty:{backgroundColor:N,cursor:"default"},bright:{backgroundColor:T},light:{backgroundColor:"rgba(33, 36, 44, 0.1)"},iconWrapper:{zIndex:D+1},focusBox:{position:"absolute",zIndex:D,left:R,right:R,bottom:R,top:R,borderRadius:1},disabled:{opacity:.3},leftBorder:{borderLeftWidth:C},bottomBorder:{borderBottomWidth:C}}),F=function(e,t){return p.create({buttonSize:{height:e,width:t,maxWidth:t}}).buttonSize},q=function(e){return e.layout.buttonDimensions};e.exports=a(q)(I)},function(e,t,n){"use strict";var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},i=n(34),o=n(275),s=o.connect,a=n(276),l=a.StyleSheet,p=n(243),c=p.View,u=n(266),h=u.row,d=n(218),f=d.childrenPropType,m=n(240),g=m.innerBorderColor,v=m.innerBorderStyle,y=m.innerBorderWidthPx,b=i.createClass({displayName:"ViewPager",propTypes:{animateToPosition:i.PropTypes.bool,children:f,pageWidthPx:i.PropTypes.number.isRequired,translateX:i.PropTypes.number.isRequired},getInitialState:function(){return{animationDurationMs:0}},componentWillReceiveProps:function(e){var t=void 0;if(e.animateToPosition){var n=e.translateX,r=this.props.translateX;t=Math.abs(n-r)}else t=0;this.setState({animationDurationMs:t})},render:function(){var e=this.props,t=e.children,n=e.pageWidthPx,o=e.translateX,s=this.state.animationDurationMs,a=[h,E.twoPagePager],l={msTransform:"translate3d("+o+"px, 0, 0)",WebkitTransform:"translate3d("+o+"px, 0, 0)",transform:"translate3d("+o+"px, 0, 0)"},p=s?{msTransitionProperty:"transform",WebkitTransitionProperty:"transform",transitionProperty:"transform",msTransitionDuration:s+"ms",WebkitTransitionDuration:s+"ms",transitionDuration:s+"ms",msTransitionTimingFunction:"ease-out",WebkitTransitionTimingFunction:"ease-out",transitionTimingFunction:"ease-out"}:{},u=r({},l,p),d={width:n};return i.createElement(c,{style:a,dynamicStyle:u},i.createElement(c,{dynamicStyle:d},t[0]),i.createElement(c,{style:E.rightPage,dynamicStyle:d},t[1]))}}),E=l.create({twoPagePager:{alignSelf:"flex-start",maxWidth:"250%"},rightPage:{borderLeft:y+"px "+v+" "+g,boxSizing:"content-box"}}),T=function(e){var t=e.pager,n=t.animateToPosition,r=t.currentPage,i=t.dx,o=t.pageWidthPx;return{animateToPosition:n,pageWidthPx:o,translateX:-r*(o+y)+i}};e.exports=s(T)(b)},function(e,t,n){"use strict";var r=n(34),i=n(276),o=i.StyleSheet,s=n(243),a=s.View,l=n(240),p=l.pageIndicatorHeightPx,c=l.gray68,u=l.gray85,h=r.createClass({displayName:"PagerIcon",propTypes:{active:r.PropTypes.bool,radiusPx:r.PropTypes.number},getDefaultProps:function(){return{active:!1,radiusPx:4}},render:function(){var e=this.props,t=e.active,n=e.radiusPx,i=t?c:u;return r.createElement("svg",{width:2*n,height:2*n},r.createElement("circle",{cx:n,cy:n,r:n,fill:i}))}}),d=r.createClass({displayName:"PagerIndicator",propTypes:{currentPage:r.PropTypes.number.isRequired,numPages:r.PropTypes.number.isRequired},render:function(){for(var e=this.props,t=e.currentPage,n=e.numPages,i=4,o=[],s=0;s<n;s++)o.push(r.createElement(h,{key:s,active:s===t,radiusPx:i}));var l=2*i*n,p=2*i*(n-1),c={width:l+p};return r.createElement(a,{style:f.indicatorStrip},r.createElement(a,{style:f.iconStrip,dynamicStyle:c},o))}}),f=o.create({indicatorStrip:{backgroundColor:"#F0F1F2",flexDirection:"row",justifyContent:"center",alignItems:"center",height:p},iconStrip:{flexDirection:"row",justifyContent:"space-between"}});e.exports=d},function(e,t,n){"use strict";function r(e,t){var n={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n}var i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},o=n(34),s=n(275),a=s.connect,l=n(271),p=n(242),c=n(302),u=o.createClass({displayName:"EmptyKeypadButton",propTypes:{gestureManager:o.PropTypes.instanceOf(l)},render:function(){var e=this.props,t=e.gestureManager,n=r(e,["gestureManager"]);return o.createElement(c,i({onTouchStart:function(e){return t.onTouchStart(e)},onTouchEnd:function(e){return t.onTouchEnd(e)},onTouchMove:function(e){return t.onTouchMove(e)},onTouchCancel:function(e){return t.onTouchCancel(e)}},p.NOOP,n))}}),h=function(e){var t=e.gestures;return{gestureManager:t.gestureManager}};e.exports=a(h)(u)},function(e,t,n){"use strict";var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},i=n(34),o=n(328),s=n(302),a=n(242),l=n(205),p=l.KeyTypes,c=l.EchoAnimationTypes,u=n(218),h=u.echoPropType,d=u.bordersPropType,f=u.boundingBoxPropType,m=u.keyIdPropType,g=n(265),v=i.createClass({displayName:"Echo",propTypes:{animationDurationMs:i.PropTypes.number.isRequired,borders:d,id:m.isRequired,initialBounds:f.isRequired,onAnimationFinish:i.PropTypes.func.isRequired},componentDidMount:function(){var e=this.props,t=e.animationDurationMs,n=e.onAnimationFinish;setTimeout(function(){return n()},t)},render:function(){var e=this.props,t=e.borders,n=e.id,o=e.initialBounds,l=a[n].icon,c=r({zIndex:g.echo,position:"absolute",pointerEvents:"none"},o);return i.createElement("div",{style:c},i.createElement(s,{name:n,icon:l,type:p.ECHO,borders:t}))}}),y=i.createClass({displayName:"EchoManager",propTypes:{echoes:i.PropTypes.arrayOf(h),onAnimationFinish:i.PropTypes.func.isRequired},_animationConfigForType:function(e){var t=void 0,n=void 0;switch(e){case c.SLIDE_AND_FADE:t=400,n="echo-slide-and-fade";break;case c.FADE_ONLY:t=300,n="echo-fade-only";break;case c.LONG_FADE_ONLY:t=400,n="echo-long-fade-only";break;default:throw new Error("Invalid echo animation type:",e)}return{animationDurationMs:t,animationTransitionName:n}},render:function(){var e=this,t=this.props,n=t.echoes,s=t.onAnimationFinish;return i.createElement("span",null,Object.keys(c).map(function(t){var a=e._animationConfigForType(t),l=a.animationDurationMs,p=a.animationTransitionName,c=n.filter(function(e){return e.animationType===t});return i.createElement(o,{transitionName:p,transitionEnter:!0,transitionLeave:!1,transitionEnterTimeout:l,key:t},c.map(function(e){var t=e.animationId;return i.createElement(v,r({key:t,animationDurationMs:l,onAnimationFinish:function(){return s(t)}},e))}))}))}});e.exports=y},function(e,t,n){"use strict";var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},i=n(34),o=n(328),s=n(242),a=n(327),l=n(218),p=l.boundingBoxPropType,c=l.keyConfigPropType,u=l.popoverPropType,h="popover",d=200,f=i.createClass({displayName:"PopoverContainer",propTypes:{bounds:p.isRequired,childKeys:i.PropTypes.arrayOf(c).isRequired},render:function(){var e=this.props,t=e.bounds,n=e.childKeys,o=r({position:"absolute"},t);return i.createElement("div",{style:o},i.createElement(a,{keys:n}))}}),m=i.createClass({displayName:"PopoverManager",propTypes:{popover:u},render:function(){var e=this.props.popover;return i.createElement(o,{transitionName:h,transitionEnter:!0,transitionLeave:!1,transitionEnterTimeout:d},e&&i.createElement(f,{key:e.childKeyIds[0],bounds:e.bounds,childKeys:e.childKeyIds.map(function(e){return s[e]})}))}});e.exports=m},function(e,t,n){"use strict";function r(e,t){return t.encode?t.strict?i(e):encodeURIComponent(e):e}var i=n(337),o=n(338);t.extract=function(e){return e.split("?")[1]||""},t.parse=function(e){var t=Object.create(null);return"string"!=typeof e?t:(e=e.trim().replace(/^(\?|#|&)/,""))?(e.split("&").forEach(function(e){var n=e.replace(/\+/g," ").split("="),r=n.shift(),i=n.length>0?n.join("="):void 0;r=decodeURIComponent(r),i=void 0===i?null:decodeURIComponent(i),void 0===t[r]?t[r]=i:Array.isArray(t[r])?t[r].push(i):t[r]=[t[r],i]}),t):t},t.stringify=function(e,t){var n={encode:!0,strict:!0};return t=o(n,t),e?Object.keys(e).sort().map(function(n){var i=e[n];if(void 0===i)return"";if(null===i)return r(n,t);if(Array.isArray(i)){var o=[];return i.slice().forEach(function(e){void 0!==e&&(null===e?o.push(r(n,t)):o.push(r(n,t)+"="+r(e,t)))}),o.join("&")}return r(n,t)+"="+r(i,t)}).filter(function(e){return e.length>0}).join("&"):""}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){var n=[],r=!0,i=!1,o=void 0;try{for(var s,a=e[Symbol.iterator]();!(r=(s=a.next()).done)&&(n.push(s.value),!t||n.length!==t);r=!0);}catch(e){i=!0,o=e}finally{try{!r&&a.return&&a.return()}finally{if(i)throw o}}return n}return function(t,n){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),o=n(341),s=r(o),a=n(287),l=function e(t,n,r,i){var o=n.reduce(a.recursiveMerge),s={},l={},p={};return Object.keys(o).forEach(function(e){":"===e[0]?p[e]=o[e]:"@"===e[0]?l[e]=o[e]:s[e]=o[e]}),c(t,s,r,i)+Object.keys(p).map(function(e){return c(t+e,p[e],r,i)}).join("")+Object.keys(l).map(function(n){var o=e(t,[l[n]],r,i);return n+"{"+o+"}"}).join("")};t.generateCSS=l;var p=function(e,t){var n={};return Object.keys(e).forEach(function(r){t&&t.hasOwnProperty(r)?n[r]=t[r](e[r]):n[r]=e[r]}),n},c=function(e,t,n,r){var o=p(t,n),l=s.default.prefixAll(o),c=(0,a.objectToPairs)(l).map(function(e){var t=i(e,2),n=t[0],o=t[1],s=(0,a.stringifyValue)(n,o),l=(0,a.kebabifyStyleName)(n)+":"+s+";";return r===!1?l:(0,a.importantify)(l)}).join("");return c?e+"{"+c+"}":""};t.generateCSSRuleset=c},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t,n){function r(){y===v&&(y=v.slice())}function s(){return g}function l(e){if("function"!=typeof e)throw new Error("Expected listener to be a function.");var t=!0;return r(),y.push(e),function(){if(t){t=!1,r();var n=y.indexOf(e);y.splice(n,1)}}}function u(e){if(!(0,a.default)(e))throw new Error("Actions must be plain objects. Use custom middleware for async actions.");if("undefined"==typeof e.type)throw new Error('Actions may not have an undefined "type" property. Have you misspelled a constant?');if(b)throw new Error("Reducers may not dispatch actions.");try{b=!0,g=m(g,e)}finally{b=!1}for(var t=v=y,n=0;n<t.length;n++)t[n]();return e}function h(e){if("function"!=typeof e)throw new Error("Expected the nextReducer to be a function.");m=e,u({type:c.INIT})}function d(){var e,t=l;return e={subscribe:function(e){function n(){e.next&&e.next(s())}if("object"!==("undefined"==typeof e?"undefined":o(e)))throw new TypeError("Expected the observer to be an object.");n();var r=t(n);return{unsubscribe:r}}},e[p.default]=function(){return this},e}var f;if("function"==typeof t&&"undefined"==typeof n&&(n=t,t=void 0),"undefined"!=typeof n){if("function"!=typeof n)throw new Error("Expected the enhancer to be a function.");return n(i)(e,t)}if("function"!=typeof e)throw new Error("Expected the reducer to be a function.");var m=e,g=t,v=[],y=v,b=!1;return u({type:c.INIT}),f={dispatch:u,subscribe:l,getState:s,replaceReducer:h},f[p.default]=d,f}var o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol?"symbol":typeof e};t.__esModule=!0,t.ActionTypes=void 0,t.default=i;var s=n(342),a=r(s),l=n(340),p=r(l),c=t.ActionTypes={INIT:"@@redux/INIT"}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){var n=t&&t.type,r=n&&'"'+n.toString()+'"'||"an action";return"Given action "+r+', reducer "'+e+'" returned undefined. To ignore an action, you must explicitly return the previous state.'}function o(e){Object.keys(e).forEach(function(t){var n=e[t],r=n(void 0,{type:a.ActionTypes.INIT});if("undefined"==typeof r)throw new Error('Reducer "'+t+'" returned undefined during initialization. If the state passed to the reducer is undefined, you must explicitly return the initial state. The initial state may not be undefined.');var i="@@redux/PROBE_UNKNOWN_ACTION_"+Math.random().toString(36).substring(7).split("").join(".");if("undefined"==typeof n(void 0,{type:i}))throw new Error('Reducer "'+t+'" returned undefined when probed with a random type. '+("Don't try to handle "+a.ActionTypes.INIT+' or other actions in "redux/*" ')+"namespace. They are considered private. Instead, you must return the current state for any unknown actions, unless it is undefined, in which case you must return the initial state, regardless of the action type. The initial state may not be undefined.")})}function s(e){for(var t=Object.keys(e),n={},r=0;r<t.length;r++){var s=t[r];"function"==typeof e[s]&&(n[s]=e[s])}var a,l=Object.keys(n);try{o(n)}catch(e){a=e}return function(){var e=arguments.length<=0||void 0===arguments[0]?{}:arguments[0],t=arguments[1];if(a)throw a;for(var r=!1,o={},s=0;s<l.length;s++){var p=l[s],c=n[p],u=e[p],h=c(u,t);if("undefined"==typeof h){var d=i(p,t);throw new Error(d)}o[p]=h,r=r||h!==u}return r?o:e}}t.__esModule=!0,t.default=s;var a=n(310),l=n(342),p=(r(l),n(319));r(p)},function(e,t,n){"use strict";function r(e,t){return function(){return t(e.apply(void 0,arguments))}}function i(e,t){if("function"==typeof e)return r(e,t);if("object"!==("undefined"==typeof e?"undefined":o(e))||null===e)throw new Error("bindActionCreators expected an object or a function, instead received "+(null===e?"null":"undefined"==typeof e?"undefined":o(e))+'. Did you write "import ActionCreators from" instead of "import * as ActionCreators from"?');for(var n=Object.keys(e),i={},s=0;s<n.length;s++){var a=n[s],l=e[a];"function"==typeof l&&(i[a]=r(l,t))}return i}var o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol?"symbol":typeof e};t.__esModule=!0,t.default=i},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return function(e){return function(n,r,i){var s=e(n,r,i),l=s.dispatch,p=[],c={getState:s.getState,dispatch:function(e){return l(e)}};return p=t.map(function(e){return e(c)}),l=a.default.apply(void 0,p)(s.dispatch),o({},s,{dispatch:l})}}}t.__esModule=!0;var o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e};t.default=i;var s=n(314),a=r(s)},function(e,t,n){"use strict";function r(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];if(0===t.length)return function(e){return e};var r=function(){var e=t[t.length-1],n=t.slice(0,-1);return{v:function(){return n.reduceRight(function(e,t){return t(e)},e.apply(void 0,arguments))}}}();return"object"===("undefined"==typeof r?"undefined":i(r))?r.v:void 0}var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol?"symbol":typeof e};t.__esModule=!0,t.default=r},function(e,t,n){(function(t){"use strict";(function(){var n,r,i;"undefined"!=typeof performance&&null!==performance&&performance.now?e.exports=function(){return performance.now()}:"undefined"!=typeof t&&null!==t&&t.hrtime?(e.exports=function(){return(n()-i)/1e6},r=t.hrtime,n=function(){var e;return e=r(),1e9*e[0]+e[1]},i=n()):Date.now?(e.exports=function(){return Date.now()-i},i=Date.now()):(e.exports=function(){return(new Date).getTime()-i},i=(new Date).getTime())}).call(void 0)}).call(t,n(339))},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}Object.defineProperty(t,"__esModule",{value:!0});var o=n(318);r(o);t.default=function(e,t){var n=arguments.length<=2||void 0===arguments[2]?function(e,t){return e+t}:arguments[2];return function(){return i({},e,["-webkit-","-moz-",""].map(function(e){return n(e,t)}))}()},e.exports=t.default},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return Array.isArray(e)&&(e=e.join(",")),null!==e.match(/-webkit-|-moz-|-ms-/)},e.exports=t.default},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return e.replace(/([a-z]|^)([A-Z])/g,function(e,t,n){return t+"-"+n.toLowerCase()}).replace("ms-","-ms-")},e.exports=t.default},function(e,t,n){"use strict";function r(e){"undefined"!=typeof console&&"function"==typeof console.error&&console.error(e);try{throw new Error(e)}catch(e){}}t.__esModule=!0,t.default=r},function(e,t,n){"use strict";t.__esModule=!0;var r=n(34);t.default=r.PropTypes.shape({subscribe:r.PropTypes.func.isRequired,dispatch:r.PropTypes.func.isRequired,getState:r.PropTypes.func.isRequired})},function(e,t,n){"use strict";function r(e){"undefined"!=typeof console&&"function"==typeof console.error&&console.error(e);try{throw new Error(e)}catch(e){}}t.__esModule=!0,t.default=r},function(e,t,n){"use strict";function r(e,t){if(e===t)return!0;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(var i=Object.prototype.hasOwnProperty,o=0;o<n.length;o++)if(!i.call(t,n[o])||e[n[o]]!==t[n[o]])return!1;return!0}t.__esModule=!0,t.default=r},function(e,t,n){"use strict";function r(e){return function(t){return(0,i.bindActionCreators)(e,t)}}t.__esModule=!0,t.default=r;var i=n(289)},function(e,t,n){"use strict";var r=n(34),i=n(186),o=n(276),s=o.StyleSheet,a=n(334),l=n(335),p=n(336),c=n(205),u=c.IconTypes,h=n(218),d=h.iconPropType,f=n(240),m=f.gray25,g="#FFF",v=m,y=r.createClass({displayName:"Icon",propTypes:{focused:r.PropTypes.bool,icon:d.isRequired,style:r.PropTypes.any},mixins:[i],render:function(){var e=this.props,t=e.focused,n=e.icon,i=e.style,o=[t?b.focused:b.unfocused].concat(Array.isArray(i)?i:[i]);switch(n.type){case u.MATH:return r.createElement(a,{math:n.data,style:o});case u.SVG:return r.createElement(l,{name:n.data,color:t?g:v});case u.TEXT:return r.createElement(p,{character:n.data,style:o})}throw new Error("No icon or symbol provided")}}),b=s.create({unfocused:{color:v},focused:{color:g}});e.exports=y},function(e,t,n){"use strict";var r=n(34),i=n(276),o=i.StyleSheet,s=n(243),a=s.View,l=n(324),p=n(205),c=p.IconTypes,u=n(218),h=u.iconPropType,d=n(266),f=d.row,m=d.column,g=d.centered,v=d.fullWidth,y=n(240),b=y.iconSizeHeightPx,E=y.iconSizeWidthPx,T=r.createClass({displayName:"MultiSymbolGrid",propTypes:{focused:r.PropTypes.bool,icons:r.PropTypes.arrayOf(h).isRequired},render:function(){var e=this.props,t=e.focused,n=e.icons;if(n.forEach(function(e){if(e.type!==c.MATH)throw new Error("Received invalid icon: type="+e.type+", data="+e.data)}),1===n.length)return r.createElement(l,{icon:n[0],focused:t});var i=C.base,o=[C.base,C.secondary];if(2===n.length)return r.createElement(a,{style:[f,C.size]},r.createElement(a,{style:[m,g,v,C.middleLeft]},r.createElement(l,{style:i,icon:n[0],focused:t})),r.createElement(a,{style:[m,g,v,C.middleRight]},r.createElement(l,{style:o,icon:n[1],focused:t})));if(n.length>=3)return r.createElement(a,{style:[m,C.size]},r.createElement(a,{style:f},r.createElement(a,{style:[g,v,C.topLeft]},r.createElement(l,{style:i,icon:n[0],focused:t})),r.createElement(a,{style:[g,v,C.topRight]},r.createElement(l,{style:o,icon:n[1],focused:t}))),r.createElement(a,{style:f},r.createElement(a,{style:[g,v,C.bottomLeft]},r.createElement(l,{style:o,icon:n[2],focused:t})),r.createElement(a,{style:[g,v,C.bottomRight]},n[3]&&r.createElement(l,{style:o,icon:n[3],focused:t}))));throw new Error("Invalid number of icons:",n.length)}}),x=2,w=4,C=o.create({size:{height:b,width:E},bottomLeft:{marginBottom:x,marginLeft:w},topLeft:{marginTop:x,marginLeft:w},topRight:{marginTop:x,marginRight:w},bottomRight:{marginBottom:x,marginRight:w},middleLeft:{marginLeft:w},middleRight:{marginRight:w},base:{fontSize:18},secondary:{opacity:.3}});e.exports=T},function(e,t,n){"use strict";var r=n(34),i=n(276),o=i.StyleSheet,s=n(243),a=s.View,l=n(240),p=l.gray25,c=r.createClass({displayName:"CornerDecal",propTypes:{style:r.PropTypes.any},render:function(){var e=this.props.style,t=[h.container].concat(Array.isArray(e)?e:[e]);return r.createElement(a,{style:t},r.createElement("svg",{width:u,height:u,viewBox:"4 4 8 8"},r.createElement("path",{fill:p,opacity:"0.3",d:"M5.29289322,5.70710678 L10.2928932,10.7071068 C10.9228581,11.3370716 12,10.8909049 12,10 L12,5 C12,4.44771525 11.5522847,4 11,4 L6,4 C5.10909515,4 4.66292836,5.07714192 5.29289322,5.70710678 Z"})))}}),u=7,h=o.create({container:{position:"absolute",top:0,right:0,width:u,height:u}});e.exports=c},function(e,t,n){"use strict";var r=n(34),i=n(276),o=i.StyleSheet,s=n(243),a=s.View,l=n(218),p=l.keyConfigPropType,c=n(205),u=c.BorderStyles,h=n(265),d=r.createClass({displayName:"MultiSymbolPopover",propTypes:{keys:r.PropTypes.arrayOf(p)},render:function(){var e=this.props.keys,t=n(279);return r.createElement(a,{style:f.container},e.map(function(e){return r.createElement(t,{key:e.id,keyConfig:e,borders:u.NONE})}))}}),f=o.create({container:{flexDirection:"column-reverse",position:"relative",width:"100%",borderRadius:2,boxShadow:"0 2px 6px rgba(0, 0, 0, 0.3)",zIndex:h.popover},popoverButton:{backgroundColor:"#FFF",borderWidth:0}});e.exports=d},function(e,t,n){e.exports=n(34).__internalAddons.CSSTransitionGroup},function(e,t,n){e.exports=function(e){return e.webpackPolyfill||(e.deprecate=function(){},e.paths=[],e.children=[],e.webpackPolyfill=1),e}},function(e,t,n){"use strict";var r={childContextTypes:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,mixins:!0,propTypes:!0,type:!0},i={name:!0,length:!0,prototype:!0,caller:!0,arguments:!0,arity:!0},o="function"==typeof Object.getOwnPropertySymbols;e.exports=function(e,t,n){if("string"!=typeof t){var s=Object.getOwnPropertyNames(t);o&&(s=s.concat(Object.getOwnPropertySymbols(t)));for(var a=0;a<s.length;++a)if(!(r[s[a]]||i[s[a]]||n&&n[s[a]]))try{e[s[a]]=t[s[a]]}catch(e){}}return e}},function(e,t,n){"use strict";function r(e){if(!s(e)||d.call(e)!=a||o(e))return!1;var t=i(e);if(null===t)return!0;var n=u.call(t,"constructor")&&t.constructor;return"function"==typeof n&&n instanceof n&&c.call(n)==h}var i=n(343),o=n(344),s=n(345),a="[object Object]",l=Function.prototype,p=Object.prototype,c=l.toString,u=p.hasOwnProperty,h=c.call(Object),d=p.toString;e.exports=r},function(e,t,n){"use strict";var r=function(e,t,n,r,i,o,s,a){if(!e){var l;if(void 0===t)l=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var p=[n,r,i,o,s,a],c=0;l=new Error(t.replace(/%s/g,function(){return p[c++]})),l.name="Invariant Violation"}throw l.framesToPop=1,l}};e.exports=r},function(e,t,n){"use strict";function r(){if(l.length)throw l.shift()}function i(e){var t;t=a.length?a.pop():new o,t.task=e,s(t)}function o(){this.task=null}var s=n(346),a=[],l=[],p=s.makeRequestCallFromTimer(r);e.exports=i,o.prototype.call=function(){try{this.task.call()}catch(e){i.onerror?i.onerror(e):(l.push(e),p())}finally{this.task=null,a[a.length]=this}}},function(e,t,n){"use strict";var r=n(34),i=n(35),o=n(276),s=o.StyleSheet,a=n(243),l=a.View,p=n(266),c=p.row,u=p.centered,h=n(240),d=h.iconSizeHeightPx,f=h.iconSizeWidthPx,m=r.createClass({displayName:"MathIcon",propTypes:{math:r.PropTypes.string.isRequired,style:r.PropTypes.any},componentDidMount:function(){this._renderMath()},componentDidUpdate:function(e){e.math!==this.props.math&&this._renderMath()},_renderMath:function(){var e=this.props.math;window.katex.render(e,i.findDOMNode(this))},render:function(){var e=this.props.style,t=[c,u,g.size,g.base].concat(Array.isArray(e)?e:[e]);return r.createElement(l,{style:t})}}),g=s.create({size:{height:d,width:f},base:{fontSize:25}});e.exports=m},function(e,t,n){"use strict";var r=n(34),i=n(35),o=n(347),s=r.createClass({displayName:"SvgIcon",propTypes:{color:r.PropTypes.string.isRequired,name:r.PropTypes.string.isRequired},componentDidMount:function(){this._addFillRule()},componentDidUpdate:function(e){e.name!==this.props.name&&this._addFillRule()},_addFillRule:function(){var e=i.findDOMNode(this);if(e instanceof SVGElement){var t=e.querySelector("g");t.setAttributeNS(null,"fill-rule","evenodd")}},render:function(){var e=this.props,t=e.color,n=e.name,i=o[n];return r.createElement(i,{color:t})}});e.exports=s},function(e,t,n){"use strict";var r=n(34),i=n(276),o=i.StyleSheet,s=n(243),a=s.View,l=s.Text,p=n(266),c=p.row,u=p.centered,h=n(240),d=h.iconSizeHeightPx,f=h.iconSizeWidthPx,m=r.createClass({displayName:"TextIcon",propTypes:{character:r.PropTypes.string.isRequired,style:r.PropTypes.any},render:function(){var e=this.props,t=e.character,n=e.style,i=[c,u,g.size,g.base].concat(Array.isArray(n)?n:[n]);return r.createElement(a,{style:i},r.createElement(l,null,t))}}),g=o.create({size:{height:d,width:f},base:{fontFamily:"Proxima Nova",fontSize:25}});e.exports=m},function(e,t,n){"use strict";e.exports=function(e){return encodeURIComponent(e).replace(/[!'()*]/g,function(e){return"%"+e.charCodeAt(0).toString(16).toUpperCase()})}},function(e,t,n){"use strict";function r(e){if(null===e||void 0===e)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}function i(){try{if(!Object.assign)return!1;var e=new String("abc");if(e[5]="de","5"===Object.getOwnPropertyNames(e)[0])return!1;for(var t={},n=0;n<10;n++)t["_"+String.fromCharCode(n)]=n;var r=Object.getOwnPropertyNames(t).map(function(e){return t[e]});if("0123456789"!==r.join(""))return!1;var i={};return"abcdefghijklmnopqrst".split("").forEach(function(e){i[e]=e}),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},i)).join("")}catch(e){return!1}}var o=Object.prototype.hasOwnProperty,s=Object.prototype.propertyIsEnumerable;e.exports=i()?Object.assign:function(e,t){for(var n,i,a=r(e),l=1;l<arguments.length;l++){n=Object(arguments[l]);for(var p in n)o.call(n,p)&&(a[p]=n[p]);if(Object.getOwnPropertySymbols){i=Object.getOwnPropertySymbols(n);for(var c=0;c<i.length;c++)s.call(n,i[c])&&(a[i[c]]=n[i[c]])}}return a}},function(e,t,n){function r(){if(!a){a=!0;for(var e,t=s.length;t;){e=s,s=[];for(var n=-1;++n<t;)e[n]();t=s.length}a=!1}}function i(){}var o=e.exports={},s=[],a=!1;o.nextTick=function(e){
s.push(e),a||setTimeout(r,0)},o.title="browser",o.browser=!0,o.env={},o.argv=[],o.version="",o.versions={},o.on=i,o.addListener=i,o.once=i,o.off=i,o.removeListener=i,o.removeAllListeners=i,o.emit=i,o.binding=function(e){throw new Error("process.binding is not supported")},o.cwd=function(){return"/"},o.chdir=function(e){throw new Error("process.chdir is not supported")},o.umask=function(){return 0}},function(e,t,n){(function(t){"use strict";e.exports=n(348)(t||window||void 0)}).call(t,function(){return this}())},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=n(355),a=r(s),l=n(356),p=r(l),c=n(357),u=r(c),h=n(349),d=r(h),f=n(350),m=r(f),g=d.default,v=(0,a.default)(),y=function(){function e(){i(this,e)}return o(e,null,[{key:"prefixAll",value:function(t){return t=(0,u.default)({},t),Object.keys(t).forEach(function(n){var r=t[n];if(r instanceof Object)t[n]=e.prefixAll(r);else{var i=Object.keys(v.prefixes);i.forEach(function(e){var i=v.prefixes[e];null!=g[n]&&(t[i.inline+(0,p.default)(n)]=r)}),m.default.forEach(function(e){var i=e({property:n,value:r,styles:t,prefix:{},keepUnprefixed:!0,requiresPrefix:g});(0,u.default)(t,i)})}}),t}}]),e}();t.default=y,e.exports=t.default},function(e,t,n){"use strict";function r(e){if(!s(e)||d.call(e)!=a||o(e))return!1;var t=i(e);if(null===t)return!0;var n=u.call(t,"constructor")&&t.constructor;return"function"==typeof n&&n instanceof n&&c.call(n)==h}var i=n(351),o=n(352),s=n(353),a="[object Object]",l=Function.prototype,p=Object.prototype,c=l.toString,u=p.hasOwnProperty,h=c.call(Object),d=p.toString;e.exports=r},function(e,t,n){"use strict";var r=n(354),i=r(Object.getPrototypeOf,Object);e.exports=i},function(e,t,n){"use strict";function r(e){var t=!1;if(null!=e&&"function"!=typeof e.toString)try{t=!!(e+"")}catch(e){}return t}e.exports=r},function(e,t,n){"use strict";function r(e){return!!e&&"object"==("undefined"==typeof e?"undefined":i(e))}var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol?"symbol":typeof e};e.exports=r},function(e,t,n){(function(t){"use strict";function n(e){a.length||(s(),l=!0),a[a.length]=e}function r(){for(;p<a.length;){var e=p;if(p+=1,a[e].call(),p>c){for(var t=0,n=a.length-p;t<n;t++)a[t]=a[t+p];a.length-=p,p=0}}a.length=0,p=0,l=!1}function i(e){var t=1,n=new u(e),r=document.createTextNode("");return n.observe(r,{characterData:!0}),function(){t=-t,r.data=t}}function o(e){return function(){function t(){clearTimeout(n),clearInterval(r),e()}var n=setTimeout(t,0),r=setInterval(t,50)}}e.exports=n;var s,a=[],l=!1,p=0,c=1024,u=t.MutationObserver||t.WebKitMutationObserver;s="function"==typeof u?i(r):o(r),n.requestFlush=s,n.makeRequestCallFromTimer=o}).call(t,function(){return this}())},function(e,t,n){"use strict";e.exports={COS:n(358),LOG:n(359),EQUAL:n(360),BACKSPACE:n(361),SQRT:n(362),EXP:n(363),NEQ:n(364),GEQ:n(365),LN:n(366),DISMISS:n(367),SIN:n(368),LT:n(369),CUBE_ROOT:n(370),PLUS:n(371),TAN:n(372),LEFT:n(373),UP:n(374),DOWN:n(375),LEFT_PAREN:n(376),RIGHT_PAREN:n(377),GT:n(378),DIVIDE:n(379),PERIOD:n(380),PERCENT:n(381),TIMES:n(382),TOGGLE_SIGN:n(383),EXP_3:n(384),EXP_2:n(385),RIGHT:n(386),CDOT:n(387),LOG_N:n(388),LEQ:n(389),MINUS:n(390),NEGATIVE:n(390),RADICAL:n(391),FRAC_INCLUSIVE:n(392),FRAC_EXCLUSIVE:n(393),JUMP_OUT_PARENTHESES:n(394),JUMP_OUT_EXPONENT:n(395),JUMP_OUT_BASE:n(396),JUMP_INTO_NUMERATOR:n(397),JUMP_OUT_NUMERATOR:n(398),JUMP_OUT_DENOMINATOR:n(399)}},function(e,t,n){"use strict";e.exports=function(e){var t,n=e.Symbol;return"function"==typeof n?n.observable?t=n.observable:(t=n("observable"),n.observable=t):t="@@observable",t}},function(e,t,n){"use strict";e.exports={transform:0,transformOrigin:0,transformOriginX:0,transformOriginY:0,backfaceVisibility:0,perspective:0,perspectiveOrigin:0,transformStyle:0,transformOriginZ:0,animation:0,animationDelay:0,animationDirection:0,animationFillMode:0,animationDuration:0,animationIterationCount:0,animationName:0,animationPlayState:0,animationTimingFunction:0,appearance:0,userSelect:0,fontKerning:0,textEmphasisPosition:0,textEmphasis:0,textEmphasisStyle:0,textEmphasisColor:0,boxDecorationBreak:0,clipPath:0,maskImage:0,maskMode:0,maskRepeat:0,maskPosition:0,maskClip:0,maskOrigin:0,maskSize:0,maskComposite:0,mask:0,maskBorderSource:0,maskBorderMode:0,maskBorderSlice:0,maskBorderWidth:0,maskBorderOutset:0,maskBorderRepeat:0,maskBorder:0,maskType:0,textDecorationStyle:0,textDecorationSkip:0,textDecorationLine:0,textDecorationColor:0,filter:0,fontFeatureSettings:0,breakAfter:0,breakBefore:0,breakInside:0,columnCount:0,columnFill:0,columnGap:0,columnRule:0,columnRuleColor:0,columnRuleStyle:0,columnRuleWidth:0,columns:0,columnSpan:0,columnWidth:0,flex:0,flexBasis:0,flexDirection:0,flexGrow:0,flexFlow:0,flexShrink:0,flexWrap:0,alignContent:0,alignItems:0,alignSelf:0,justifyContent:0,order:0,transition:0,transitionDelay:0,transitionDuration:0,transitionProperty:0,transitionTimingFunction:0,backdropFilter:0,scrollSnapType:0,scrollSnapPointsX:0,scrollSnapPointsY:0,scrollSnapDestination:0,scrollSnapCoordinate:0,shapeImageThreshold:0,shapeImageMargin:0,shapeImageOutside:0,hyphens:0,flowInto:0,flowFrom:0,regionFragment:0,boxSizing:0,textAlignLast:0,tabSize:0,grid:0,gridColumnStart:0,gridRow:0,gridTemplateColumns:0,gridRowStart:0,gridRowEnd:0,gridTemplateRows:0,gridAutoRows:0,wrapThrough:0,wrapFlow:0,gridColumnGap:0,touchAction:0,gridRowGap:0,gridAutoFlow:0,gridColumn:0,gridGap:0,gridTemplateAreas:0,gridTemplate:0,gridArea:0,wrapMargin:0,gridAutoColumns:0,gridColumnEnd:0,textSizeAdjust:0,borderImage:0,borderImageOutset:0,borderImageRepeat:0,borderImageSlice:0,borderImageSource:0,borderImageWidth:0,objectFit:0,objectPosition:0}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n(401),o=r(i),s=n(402),a=r(s),l=n(403),p=r(l),c=n(404),u=r(c),h=n(405),d=r(h),f=n(406),m=r(f),g=n(407),v=r(g),y=n(408),b=r(y);t.default=[o.default,a.default,u.default,d.default,m.default,v.default,b.default,p.default],e.exports=t.default},function(e,t,n){"use strict";var r=n(400),i=r(Object.getPrototypeOf,Object);e.exports=i},function(e,t,n){"use strict";function r(e){var t=!1;if(null!=e&&"function"!=typeof e.toString)try{t=!!(e+"")}catch(e){}return t}e.exports=r},function(e,t,n){"use strict";function r(e){return!!e&&"object"==("undefined"==typeof e?"undefined":i(e))}var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol?"symbol":typeof e};e.exports=r},function(e,t,n){"use strict";function r(e,t){return function(n){return e(t(n))}}e.exports=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r={Webkit:["chrome","safari","ios","android","phantom","opera","webos","blackberry","bada","tizen"],Moz:["firefox","seamonkey","sailfish"],ms:["msie","msedge"]},i={chrome:[["chrome"]],safari:[["safari"]],firefox:[["firefox"]],ie:[["msie"]],edge:[["msedge"]],opera:[["opera"]],ios_saf:[["ios","mobile"],["ios","tablet"]],ie_mob:[["windowsphone","mobile","msie"],["windowsphone","tablet","msie"],["windowsphone","mobile","msedge"],["windowsphone","tablet","msedge"]],op_mini:[["opera","mobile"],["opera","tablet"]],and_uc:[["android","mobile"],["android","tablet"]],android:[["android","mobile"],["android","tablet"]]},o=function(e){var t=void 0,n=void 0,o=void 0,s=void 0,a=void 0,l=void 0;t=Object.keys(r);for(var p=0;p<t.length;p++){n=t[p],o=r[n],s=i[e];for(var c=0;c<o.length;c++){a=o[c];for(var u=0;u<s.length;u++)if(l=s[u],l.indexOf(a)!==-1)return{inline:n,css:"-"+n.toLowerCase()+"-"}}}return{inline:"",css:""}};t.default=function(){var e={};return e.browsers=Object.keys(i),e.prefixes={},e.browsers.forEach(function(t){e.prefixes[t]=o(t)}),e},e.exports=t.default},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return e.charAt(0).toUpperCase()+e.slice(1)},e.exports=t.default},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=arguments.length<=1||void 0===arguments[1]?{}:arguments[1];return Object.keys(t).forEach(function(n){return e[n]=t[n]}),e},e.exports=t.default},function(e,t,n){"use strict";var r=n(34),i=r.createClass({displayName:"Cos",propTypes:{color:r.PropTypes.string.isRequired},render:function(){return r.createElement("svg",{width:"48",height:"48",viewBox:"0 0 48 48"},r.createElement("g",{fill:"none",fillRule:"evenodd"},r.createElement("path",{fill:"none",d:"M0 0h48v48H0z"}),r.createElement("path",{fill:"none",d:"M13 12h24v24H13z"}),r.createElement("path",{d:"M18.182 29.168c1.386 0 2.226-.602 2.674-1.232l-1.162-1.078a1.707 1.707 0 0 1-1.428.728c-1.078 0-1.834-.798-1.834-1.974s.756-1.96 1.834-1.96c.616 0 1.106.252 1.428.728l1.162-1.092c-.448-.616-1.288-1.218-2.674-1.218-2.086 0-3.584 1.47-3.584 3.542 0 2.086 1.498 3.556 3.584 3.556zm6.972 0c2.24 0 3.584-1.624 3.584-3.556 0-1.918-1.344-3.542-3.584-3.542-2.226 0-3.57 1.624-3.57 3.542 0 1.932 1.344 3.556 3.57 3.556zm0-1.582c-1.106 0-1.722-.91-1.722-1.974 0-1.05.616-1.96 1.722-1.96 1.106 0 1.736.91 1.736 1.96 0 1.064-.63 1.974-1.736 1.974zm7.336 1.582c1.876 0 2.926-.938 2.926-2.17 0-2.73-4.004-1.89-4.004-2.898 0-.378.42-.672 1.064-.672.826 0 1.596.35 2.002.784l.714-1.218c-.672-.532-1.582-.924-2.73-.924-1.778 0-2.772.994-2.772 2.128 0 2.66 4.018 1.75 4.018 2.87 0 .42-.364.728-1.134.728-.84 0-1.848-.462-2.338-.924l-.77 1.246c.714.658 1.848 1.05 3.024 1.05z",fill:this.props.color})))}});e.exports=i},function(e,t,n){"use strict";var r=n(34),i=r.createClass({displayName:"Log",propTypes:{color:r.PropTypes.string.isRequired},render:function(){return r.createElement("svg",{width:"48",height:"48",viewBox:"0 0 48 48"},r.createElement("g",{fill:"none",fillRule:"evenodd"},r.createElement("path",{fill:"none",d:"M0 0h48v48H0z"}),r.createElement("path",{d:"M16.776 29v-9.338h-1.778V29h1.778zm4.9.168c2.24 0 3.584-1.624 3.584-3.556 0-1.918-1.344-3.542-3.584-3.542-2.226 0-3.57 1.624-3.57 3.542 0 1.932 1.344 3.556 3.57 3.556zm0-1.582c-1.106 0-1.722-.91-1.722-1.974 0-1.05.616-1.96 1.722-1.96 1.106 0 1.736.91 1.736 1.96 0 1.064-.63 1.974-1.736 1.974zm7.672 4.158c1.666 0 3.654-.63 3.654-3.206v-6.3H31.21v.868c-.546-.686-1.274-1.036-2.086-1.036-1.708 0-2.982 1.232-2.982 3.444 0 2.254 1.288 3.444 2.982 3.444.826 0 1.554-.392 2.086-1.064v.686c0 1.33-1.008 1.708-1.862 1.708-.854 0-1.568-.238-2.114-.84l-.798 1.288c.854.742 1.75 1.008 2.912 1.008zm.336-4.368c-1.008 0-1.708-.7-1.708-1.862 0-1.162.7-1.862 1.708-1.862.588 0 1.232.322 1.526.77v2.184c-.294.434-.938.77-1.526.77z",fill:this.props.color})))}});e.exports=i},function(e,t,n){"use strict";var r=n(34),i=r.createClass({displayName:"Equal",propTypes:{color:r.PropTypes.string.isRequired},render:function(){return r.createElement("svg",{width:"48",height:"48",viewBox:"0 0 48 48"},r.createElement("g",{fill:"none",fillRule:"evenodd"},r.createElement("path",{fill:"none",d:"M0 0h48v48H0z"}),r.createElement("path",{fill:"none",d:"M12 12h24v24H12z"}),r.createElement("path",{d:"M16 21h17M16 27h17",stroke:this.props.color,strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})))}});e.exports=i},function(e,t,n){"use strict";var r=n(34),i=function(){return r.createElement("svg",{width:"48",height:"48",viewBox:"0 0 48 48"},r.createElement("g",{fill:"none",fillRule:"evenodd"},r.createElement("path",{fill:"none",d:"M0 0h48v48H0z"}),r.createElement("path",{d:"M13 24l6 6h14V18H19l-6 6zm-1.414-1.414l6-6A2 2 0 0 1 19 16h14a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H19a2 2 0 0 1-1.414-.586l-6-6a2 2 0 0 1 0-2.828z",fill:"#888D93"}),r.createElement("path",{d:"M23 21l6 6M29 21l-6 6",stroke:"#888D93",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})))};e.exports=i},function(e,t,n){"use strict";var r=n(34),i=r.createClass({displayName:"Sqrt",propTypes:{color:r.PropTypes.string.isRequired},render:function(){return r.createElement("svg",{width:"48",height:"48",viewBox:"0 0 48 48"},r.createElement("g",{fill:"none",fillRule:"evenodd"},r.createElement("path",{fill:"none",d:"M0 0h48v48H0z"}),r.createElement("path",{stroke:this.props.color,strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",d:"M14 29l4 6 9-14h7"})))}});e.exports=i},function(e,t,n){"use strict";var r=n(34),i=r.createClass({displayName:"Exp",propTypes:{color:r.PropTypes.string.isRequired},render:function(){return r.createElement("svg",{width:"48",height:"48",viewBox:"0 0 48 48"},r.createElement("g",{fill:"none",fillRule:"evenodd"},r.createElement("path",{fill:"none",d:"M0 0h48v48H0z"}),r.createElement("path",{d:"M28 16.997c0-.55.453-.997.997-.997h6.006c.55 0 .997.453.997.997v6.006c0 .55-.453.997-.997.997h-6.006c-.55 0-.997-.453-.997-.997v-6.006zM30 18h4v4h-4v-4zM14 21c0-.552.456-1 1.002-1h9.996A1 1 0 0 1 26 21v14c0 .552-.456 1-1.002 1h-9.996A1 1 0 0 1 14 35V21zm2 1h8v12h-8V22z",fill:this.props.color})))}});e.exports=i},function(e,t,n){"use strict";var r=n(34),i=r.createClass({displayName:"Neq",propTypes:{color:r.PropTypes.string.isRequired},render:function(){return r.createElement("svg",{width:"48",height:"48",viewBox:"0 0 48 48"},r.createElement("g",{fill:"none",fillRule:"evenodd"},r.createElement("path",{fill:"none",d:"M0 0h48v48H0z"}),r.createElement("path",{fill:"none",d:"M12 12h24v24H12z"}),r.createElement("path",{d:"M19 33l10-18M16 21h17M16 27h17",stroke:this.props.color,strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})))}});e.exports=i},function(e,t,n){"use strict";var r=n(34),i=r.createClass({displayName:"Geq",propTypes:{color:r.PropTypes.string.isRequired},render:function(){return r.createElement("svg",{width:"48",height:"48",viewBox:"0 0 48 48"},r.createElement("g",{fill:"none",fillRule:"evenodd"},r.createElement("path",{fill:"none",d:"M0 0h48v48H0z"}),r.createElement("path",{fill:"none",d:"M12 12h24v24H12z"}),r.createElement("path",{d:"M16 33h16M16 30l16-6-16-6",stroke:this.props.color,strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})))}});e.exports=i},function(e,t,n){"use strict";var r=n(34),i=r.createClass({displayName:"Ln",propTypes:{color:r.PropTypes.string.isRequired},render:function(){return r.createElement("svg",{width:"48",height:"48",viewBox:"0 0 48 48"},r.createElement("g",{fill:"none",fillRule:"evenodd"},r.createElement("path",{fill:"none",d:"M0 0h48v48H0z"}),r.createElement("path",{d:"M20.836 29v-9.338h-1.778V29h1.778zm8.106 0v-4.774c0-1.316-.714-2.156-2.198-2.156-1.106 0-1.932.532-2.366 1.05v-.882H22.6V29h1.778v-4.55c.294-.406.84-.798 1.54-.798.756 0 1.246.322 1.246 1.26V29h1.778z",fill:this.props.color})))}});e.exports=i},function(e,t,n){"use strict";var r=n(34),i=function(){return r.createElement("svg",{width:"48",height:"48",viewBox:"0 0 48 48"},r.createElement("g",{fill:"none",fillRule:"evenodd"},r.createElement("path",{fill:"none",d:"M0 0h48v48H0z"}),r.createElement("path",{d:"M18 21l6 6 6-6",strokeLinecap:"round",strokeWidth:"2",stroke:"#71B307",strokeLinejoin:"round"})))};e.exports=i},function(e,t,n){"use strict";var r=n(34),i=r.createClass({displayName:"Sin",propTypes:{color:r.PropTypes.string.isRequired},render:function(){return r.createElement("svg",{width:"48",height:"48",viewBox:"0 0 48 48"},r.createElement("g",{fill:"none",fillRule:"evenodd"},r.createElement("path",{fill:"none",d:"M0 0h48v48H0z"}),r.createElement("path",{fill:"none",d:"M12 12h24v24H12z"}),r.createElement("path",{d:"M18.655 29.168c1.876 0 2.926-.938 2.926-2.17 0-2.73-4.004-1.89-4.004-2.898 0-.378.42-.672 1.064-.672.826 0 1.596.35 2.002.784l.714-1.218c-.672-.532-1.582-.924-2.73-.924-1.778 0-2.772.994-2.772 2.128 0 2.66 4.018 1.75 4.018 2.87 0 .42-.364.728-1.134.728-.84 0-1.848-.462-2.338-.924l-.77 1.246c.714.658 1.848 1.05 3.024 1.05zm5.124-7.658c.588 0 1.064-.476 1.064-1.064 0-.588-.476-1.05-1.064-1.05a1.06 1.06 0 0 0-1.064 1.05c0 .588.49 1.064 1.064 1.064zm.896 7.49v-6.762h-1.778V29h1.778zm8.106 0v-4.774c0-1.316-.714-2.156-2.198-2.156-1.106 0-1.932.532-2.366 1.05v-.882h-1.778V29h1.778v-4.55c.294-.406.84-.798 1.54-.798.756 0 1.246.322 1.246 1.26V29h1.778z",fill:this.props.color})))}});e.exports=i},function(e,t,n){"use strict";var r=n(34),i=r.createClass({displayName:"Lt",propTypes:{color:r.PropTypes.string.isRequired},render:function(){return r.createElement("svg",{width:"48",height:"48",viewBox:"0 0 48 48"},r.createElement("g",{fill:"none",fillRule:"evenodd"},r.createElement("path",{fill:"none",d:"M0 0h48v48H0z"}),r.createElement("path",{fill:"none",d:"M12 12h24v24H12z"}),r.createElement("path",{stroke:this.props.color,strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",d:"M32 30l-16-6 16-6"})))}});e.exports=i},function(e,t,n){"use strict";var r=n(34),i=r.createClass({displayName:"CubeRoot",propTypes:{color:r.PropTypes.string.isRequired},render:function(){return r.createElement("svg",{width:"48",height:"48",viewBox:"0 0 48 48"},r.createElement("g",{fill:"none",fillRule:"evenodd"},r.createElement("path",{fill:"none",d:"M0 0h48v48H0z"}),r.createElement("path",{d:"M17.91 23.12c1.66 0 2.76-.81 2.76-1.98 0-.96-.86-1.51-1.57-1.58.79-.13 1.46-.72 1.46-1.5 0-1.1-.95-1.83-2.65-1.83-1.23 0-2.11.45-2.67 1.08l.83 1.08c.47-.42 1.05-.64 1.66-.64.64 0 1.12.19 1.12.61 0 .35-.39.52-1.08.52-.25 0-.77 0-.9-.01v1.53c.1-.01.61-.01.9-.01.91 0 1.19.18 1.19.56 0 .37-.38.65-1.12.65-.58 0-1.34-.23-1.82-.7l-.87 1.17c.52.6 1.48 1.05 2.76 1.05z",fill:this.props.color}),r.createElement("path",{stroke:this.props.color,strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",d:"M14 29l4 6 9-14h7"})))}});e.exports=i},function(e,t,n){"use strict";var r=n(34),i=r.createClass({displayName:"Plus",propTypes:{color:r.PropTypes.string.isRequired},render:function(){return r.createElement("svg",{width:"48",height:"48",viewBox:"0 0 48 48"},r.createElement("g",{fill:"none",fillRule:"evenodd"},r.createElement("path",{fill:"none",d:"M0 0h48v48H0z"}),r.createElement("path",{d:"M19 24h10M24 29V19",stroke:this.props.color,strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})))}});e.exports=i},function(e,t,n){"use strict";var r=n(34),i=r.createClass({displayName:"Tan",propTypes:{color:r.PropTypes.string.isRequired},render:function(){return r.createElement("svg",{width:"48",height:"48",viewBox:"0 0 48 48"},r.createElement("g",{fill:"none",fillRule:"evenodd"},r.createElement("path",{fill:"none",d:"M0 0h48v48H0z"}),r.createElement("path",{fill:"none",d:"M12 12h24v24H12z"}),r.createElement("path",{d:"M16.93 29.168c.742 0 1.218-.196 1.484-.434l-.378-1.344c-.098.098-.35.196-.616.196-.392 0-.616-.322-.616-.742v-3.052h1.372v-1.554h-1.372V20.39h-1.792v1.848h-1.12v1.554h1.12v3.528c0 1.204.672 1.848 1.918 1.848zM25.232 29v-4.368c0-1.946-1.414-2.562-2.954-2.562-1.064 0-2.128.336-2.954 1.064l.672 1.19c.574-.532 1.246-.798 1.974-.798.896 0 1.484.448 1.484 1.134v.91c-.448-.532-1.246-.826-2.142-.826-1.078 0-2.352.602-2.352 2.184 0 1.512 1.274 2.24 2.352 2.24.882 0 1.68-.322 2.142-.868v.7h1.778zm-3.206-1.036c-.7 0-1.274-.364-1.274-.994 0-.658.574-1.022 1.274-1.022.574 0 1.134.196 1.428.588v.84c-.294.392-.854.588-1.428.588zM33.338 29v-4.774c0-1.316-.714-2.156-2.198-2.156-1.106 0-1.932.532-2.366 1.05v-.882h-1.778V29h1.778v-4.55c.294-.406.84-.798 1.54-.798.756 0 1.246.322 1.246 1.26V29h1.778z",fill:this.props.color})))}});e.exports=i},function(e,t,n){"use strict";var r=n(34),i=n(409),o=function(){return r.createElement("svg",{width:"48",height:"48",viewBox:"0 0 48 48"},r.createElement(i,null))};e.exports=o},function(e,t,n){"use strict";var r=n(34),i=n(409),o=function(){return r.createElement("svg",{width:"48",height:"48",viewBox:"0 0 48 48"},r.createElement(i,{transform:"rotate(90 24 24)"}))};e.exports=o},function(e,t,n){"use strict";var r=n(34),i=n(409),o=function(){return r.createElement("svg",{width:"48",height:"48",viewBox:"0 0 48 48"},r.createElement(i,{transform:"rotate(270 24 24)"}))};e.exports=o},function(e,t,n){"use strict";var r=n(34),i=r.createClass({displayName:"LeftParen",propTypes:{color:r.PropTypes.string.isRequired},render:function(){return r.createElement("svg",{width:"48",height:"48",viewBox:"0 0 48 48"},r.createElement("g",{fill:"none",fillRule:"evenodd"},r.createElement("path",{fill:"none",d:"M0 0h48v48H0z"}),r.createElement("path",{fill:"none",d:"M12 12h24v24H12z"}),r.createElement("path",{d:"M26 14c-4 6-4 14 0 20",stroke:this.props.color,strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})))}});e.exports=i},function(e,t,n){"use strict";var r=n(34),i=r.createClass({displayName:"RightParen",propTypes:{color:r.PropTypes.string.isRequired},render:function(){return r.createElement("svg",{width:"48",height:"48",viewBox:"0 0 48 48"},r.createElement("g",{fill:"none",fillRule:"evenodd"},r.createElement("path",{fill:"none",d:"M0 0h48v48H0z"}),r.createElement("path",{fill:"none",d:"M12 12h24v24H12z"}),r.createElement("path",{d:"M23 14c4 6 4 14 0 20",stroke:this.props.color,strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})))}});e.exports=i},function(e,t,n){"use strict";var r=n(34),i=r.createClass({displayName:"Gt",propTypes:{color:r.PropTypes.string.isRequired},render:function(){return r.createElement("svg",{width:"48",height:"48",viewBox:"0 0 48 48"},r.createElement("g",{fill:"none",fillRule:"evenodd"},r.createElement("path",{fill:"none",d:"M0 0h48v48H0z"}),r.createElement("path",{fill:"none",d:"M12 12h24v24H12z"}),r.createElement("path",{stroke:this.props.color,strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",d:"M16 30l16-6-16-6"})))}});e.exports=i},function(e,t,n){"use strict";var r=n(34),i=r.createClass({displayName:"Divide",propTypes:{color:r.PropTypes.string.isRequired},render:function(){return r.createElement("svg",{width:"48",height:"48",viewBox:"0 0 48 48"},r.createElement("g",{fill:"none",fillRule:"evenodd"},r.createElement("path",{fill:"none",d:"M0 0h48v48H0z"}),r.createElement("path",{d:"M19 24h10",stroke:this.props.color,strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"}),r.createElement("circle",{fill:this.props.color,cx:"24",cy:"19.5",r:"1.5"}),r.createElement("circle",{fill:this.props.color,cx:"24",cy:"28.5",r:"1.5"})))}});e.exports=i},function(e,t,n){"use strict";var r=n(34),i=r.createClass({displayName:"Period",propTypes:{color:r.PropTypes.string.isRequired},render:function(){return r.createElement("svg",{width:"48",height:"48",viewBox:"0 0 48 48"},r.createElement("g",{fill:"none",fillRule:"evenodd"},r.createElement("path",{fill:"none",d:"M0 0h48v48H0z"}),r.createElement("circle",{fill:this.props.color,cx:"24",cy:"30",r:"2"})))}});e.exports=i},function(e,t,n){"use strict";var r=n(34),i=r.createClass({displayName:"Percent",propTypes:{color:r.PropTypes.string.isRequired},render:function(){return r.createElement("svg",{width:"48",height:"48",viewBox:"0 0 48 48"},r.createElement("g",{fill:"none",fillRule:"evenodd"},r.createElement("path",{fill:"none",d:"M0 0h48v48H0z"}),r.createElement("g",{transform:"translate(12 12)"},r.createElement("path",{fill:"none",d:"M0 0h24v24H0z"}),r.createElement("path",{d:"M16 4L8 20",stroke:this.props.color,strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"}),r.createElement("circle",{stroke:this.props.color,strokeWidth:"2",cx:"7",cy:"7",r:"3"}),r.createElement("circle",{stroke:this.props.color,strokeWidth:"2",cx:"17",cy:"17",r:"3"}))))}});e.exports=i},function(e,t,n){"use strict";var r=n(34),i=r.createClass({displayName:"Times",propTypes:{color:r.PropTypes.string.isRequired},render:function(){return r.createElement("svg",{width:"48",height:"48",viewBox:"0 0 48 48"},r.createElement("g",{fill:"none",fillRule:"evenodd"},r.createElement("path",{fill:"none",d:"M0 0h48v48H0z"}),r.createElement("path",{fill:"none",d:"M12 12h24v24H12z"}),r.createElement("path",{d:"M20 20l8 8M28 20l-8 8",stroke:this.props.color,strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})))}});e.exports=i},function(e,t,n){"use strict";var r=n(34),i=r.createClass({displayName:"ToggleSign",propTypes:{color:r.PropTypes.string.isRequired},render:function(){return r.createElement("svg",{width:"48",height:"48",viewBox:"0 0 48 48"},r.createElement("g",{fill:"none",fillRule:"evenodd"},r.createElement("path",{fill:"none",d:"M0 0h48v48H0z"}),r.createElement("path",{fill:"none",d:"M12 12h24v24H12z"}),r.createElement("path",{d:"M27 28h8M28 16l-8 16",stroke:this.props.color,strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"}),r.createElement("g",{stroke:this.props.color,strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},r.createElement("path",{d:"M13 20h8M17 16v8"}))))}});e.exports=i},function(e,t,n){"use strict";var r=n(34),i=r.createClass({displayName:"Exp3",propTypes:{color:r.PropTypes.string.isRequired},render:function(){return r.createElement("svg",{width:"48",height:"48",viewBox:"0 0 48 48"},r.createElement("g",{fill:"none",fillRule:"evenodd"},r.createElement("path",{fill:"none",d:"M0 0h48v48H0z"}),r.createElement("path",{d:"M14 21c0-.552.456-1 1.002-1h9.996A1 1 0 0 1 26 21v14c0 .552-.456 1-1.002 1h-9.996A1 1 0 0 1 14 35V21zm2 1h8v12h-8V22zM30.92 23.12c1.66 0 2.76-.81 2.76-1.98 0-.96-.86-1.51-1.57-1.58.79-.13 1.46-.72 1.46-1.5 0-1.1-.95-1.83-2.65-1.83-1.23 0-2.11.45-2.67 1.08l.83 1.08c.47-.42 1.05-.64 1.66-.64.64 0 1.12.19 1.12.61 0 .35-.39.52-1.08.52-.25 0-.77 0-.9-.01v1.53c.1-.01.61-.01.9-.01.91 0 1.19.18 1.19.56 0 .37-.38.65-1.12.65-.58 0-1.34-.23-1.82-.7l-.87 1.17c.52.6 1.48 1.05 2.76 1.05z",fill:this.props.color})))}});e.exports=i},function(e,t,n){"use strict";var r=n(34),i=r.createClass({displayName:"Exp2",propTypes:{color:r.PropTypes.string.isRequired},render:function(){return r.createElement("svg",{width:"48",height:"48",viewBox:"0 0 48 48"},r.createElement("g",{fill:"none",fillRule:"evenodd"},r.createElement("path",{fill:"none",d:"M0 0h48v48H0z"}),r.createElement("path",{d:"M14 21c0-.552.456-1 1.002-1h9.996A1 1 0 0 1 26 21v14c0 .552-.456 1-1.002 1h-9.996A1 1 0 0 1 14 35V21zm2 1h8v12h-8V22zM33.67 23v-1.5h-2.44c1.66-1.16 2.39-2.03 2.39-3.05 0-1.34-1.13-2.22-2.7-2.22-.93 0-1.99.33-2.7 1.11l.95 1.14c.48-.45 1.04-.73 1.78-.73.49 0 .92.24.92.7 0 .66-.54 1.12-3.43 3.21V23h5.23z",fill:this.props.color})))}});e.exports=i},function(e,t,n){"use strict";var r=n(34),i=n(409),o=function(){return r.createElement("svg",{width:"48",height:"48",viewBox:"0 0 48 48"},r.createElement(i,{transform:"rotate(180 24 24)"}))};e.exports=o},function(e,t,n){"use strict";var r=n(34),i=r.createClass({displayName:"Cdot",propTypes:{color:r.PropTypes.string.isRequired},render:function(){return r.createElement("svg",{width:"48",height:"48",viewBox:"0 0 48 48"},r.createElement("g",{fill:"none",fillRule:"evenodd"},r.createElement("path",{fill:"none",d:"M0 0h48v48H0z"}),r.createElement("g",{transform:"translate(12 12)"},r.createElement("path",{fill:"none",d:"M0 0h24v24H0z"}),r.createElement("circle",{fill:this.props.color,cx:"12",cy:"12",r:"3"}))))}});e.exports=i},function(e,t,n){"use strict";var r=n(34),i=r.createClass({displayName:"LogN",propTypes:{color:r.PropTypes.string.isRequired},render:function(){return r.createElement("svg",{width:"48",height:"48",viewBox:"0 0 48 48"},r.createElement("g",{fill:"none",fillRule:"evenodd"},r.createElement("path",{fill:"none",d:"M0 0h48v48H0z"}),r.createElement("path",{d:"M30 28.997c0-.55.453-.997.997-.997h6.006c.55 0 .997.453.997.997v6.006c0 .55-.453.997-.997.997h-6.006c-.55 0-.997-.453-.997-.997v-6.006zM32 30h4v4h-4v-4zM12.776 29v-9.338h-1.778V29h1.778zm4.9.168c2.24 0 3.584-1.624 3.584-3.556 0-1.918-1.344-3.542-3.584-3.542-2.226 0-3.57 1.624-3.57 3.542 0 1.932 1.344 3.556 3.57 3.556zm0-1.582c-1.106 0-1.722-.91-1.722-1.974 0-1.05.616-1.96 1.722-1.96 1.106 0 1.736.91 1.736 1.96 0 1.064-.63 1.974-1.736 1.974zm7.672 4.158c1.666 0 3.654-.63 3.654-3.206v-6.3H27.21v.868c-.546-.686-1.274-1.036-2.086-1.036-1.708 0-2.982 1.232-2.982 3.444 0 2.254 1.288 3.444 2.982 3.444.826 0 1.554-.392 2.086-1.064v.686c0 1.33-1.008 1.708-1.862 1.708-.854 0-1.568-.238-2.114-.84l-.798 1.288c.854.742 1.75 1.008 2.912 1.008zm.336-4.368c-1.008 0-1.708-.7-1.708-1.862 0-1.162.7-1.862 1.708-1.862.588 0 1.232.322 1.526.77v2.184c-.294.434-.938.77-1.526.77z",fill:this.props.color})))}});e.exports=i},function(e,t,n){"use strict";var r=n(34),i=r.createClass({displayName:"Leq",propTypes:{color:r.PropTypes.string.isRequired},render:function(){return r.createElement("svg",{width:"48",height:"48",viewBox:"0 0 48 48"},r.createElement("g",{fill:"none",fillRule:"evenodd"},r.createElement("path",{fill:"none",d:"M0 0h48v48H0z"}),r.createElement("path",{fill:"none",d:"M12 12h24v24H12z"}),r.createElement("path",{d:"M16 33h16M32 30l-16-6 16-6",stroke:this.props.color,strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})))}});e.exports=i},function(e,t,n){"use strict";var r=n(34),i=r.createClass({displayName:"Minus",propTypes:{color:r.PropTypes.string.isRequired},render:function(){return r.createElement("svg",{width:"48",height:"48",viewBox:"0 0 48 48"},r.createElement("g",{fill:"none",fillRule:"evenodd"},r.createElement("path",{fill:"none",d:"M0 0h48v48H0z"}),r.createElement("path",{d:"M19 24h10",stroke:this.props.color,strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})))}});e.exports=i},function(e,t,n){"use strict";var r=n(34),i=r.createClass({displayName:"Radical",propTypes:{color:r.PropTypes.string.isRequired},render:function(){return r.createElement("svg",{width:"48",height:"48",viewBox:"0 0 48 48"},r.createElement("g",{fill:"none",fillRule:"evenodd"},r.createElement("path",{fill:"none",d:"M0 0h48v48H0z"}),r.createElement("path",{d:"M13 16.997c0-.55.453-.997.997-.997h6.006c.55 0 .997.453.997.997v6.006c0 .55-.453.997-.997.997h-6.006c-.55 0-.997-.453-.997-.997v-6.006zM15 18h4v4h-4v-4z",fill:this.props.color}),r.createElement("path",{stroke:this.props.color,strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",d:"M14 29l4 6 9-14h7"})))}});e.exports=i},function(e,t,n){"use strict";var r=n(34),i=r.createClass({displayName:"FracInclusive",propTypes:{color:r.PropTypes.string.isRequired},render:function(){return r.createElement("svg",{width:"48",height:"48",viewBox:"0 0 48 48"},r.createElement("g",{fill:"none",fillRule:"evenodd"},r.createElement("path",{fill:"none",d:"M0 0h48v48H0z"}),r.createElement("g",{transform:"translate(12 12)"},r.createElement("path",{fill:"none",d:"M0 0h24v24H0z"}),r.createElement("path",{d:"M8 16.997c0-.55.453-.997.997-.997h6.006c.55 0 .997.453.997.997v6.006c0 .55-.453.997-.997.997H8.997c-.55 0-.997-.453-.997-.997v-6.006zM10 18h4v4h-4v-4z",fill:this.props.color}),r.createElement("rect",{fill:this.props.color,x:"2",y:"11",width:"20",height:"2",rx:"1"}),r.createElement("path",{d:"M8 .997C8 .447 8.453 0 8.997 0h6.006c.55 0 .997.453.997.997v6.006c0 .55-.453.997-.997.997H8.997C8.447 8 8 7.547 8 7.003V.997zM10 2h4v4h-4V2z",fill:this.props.color}))))}});e.exports=i},function(e,t,n){"use strict";var r=n(34),i=r.createClass({displayName:"FracExclusive",propTypes:{color:r.PropTypes.string.isRequired},render:function(){return r.createElement("svg",{width:"48",height:"48",viewBox:"0 0 48 48"},r.createElement("g",{fill:"none",fillRule:"evenodd"},r.createElement("path",{fill:"none",d:"M0 0h48v48H0z"}),r.createElement("g",{transform:"translate(12 12)"},r.createElement("path",{fill:"none",d:"M0 0h24v24H0z"}),r.createElement("path",{d:"M13 16.997c0-.55.453-.997.997-.997h6.006c.55 0 .997.453.997.997v6.006c0 .55-.453.997-.997.997h-6.006c-.55 0-.997-.453-.997-.997v-6.006zM15 18h4v4h-4v-4z",fill:this.props.color}),r.createElement("rect",{fill:this.props.color,x:"10",y:"11",width:"14",height:"2",rx:"1"}),r.createElement("path",{d:"M13 .997c0-.55.453-.997.997-.997h6.006c.55 0 .997.453.997.997v6.006c0 .55-.453.997-.997.997h-6.006c-.55 0-.997-.453-.997-.997V.997zM15 2h4v4h-4V2zM0 8.997C0 8.447.453 8 .997 8h6.006c.55 0 .997.453.997.997v6.006c0 .55-.453.997-.997.997H.997C.447 16 0 15.547 0 15.003V8.997zM2 10h4v4H2v-4z",
fill:this.props.color}))))}});e.exports=i},function(e,t,n){"use strict";var r=n(34),i=function(){return r.createElement("svg",{width:"48",height:"48",viewBox:"0 0 48 48"},r.createElement("g",{fill:"none",fillRule:"evenodd"},r.createElement("path",{fill:"none",d:"M0 0h48v48H0z"}),r.createElement("path",{fill:"none",d:"M12 12h24v24H12z"}),r.createElement("path",{d:"M24 18c3 3 3 9 0 12M18 18c-3 3-3 9 0 12",stroke:"#888D93",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"}),r.createElement("path",{stroke:"#78C008",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",d:"M32 27l3-3-3-3M22 24h12"})))};e.exports=i},function(e,t,n){"use strict";var r=n(34),i=function(){return r.createElement("svg",{width:"48",height:"48",viewBox:"0 0 48 48"},r.createElement("g",{fill:"none",fillRule:"evenodd"},r.createElement("path",{fill:"none",d:"M0 0h48v48H0z"}),r.createElement("path",{fill:"none",d:"M12 12h24v24H12z"}),r.createElement("path",{d:"M35 19v16M23 19l8 8M31 23v4h-4",stroke:"#78C008",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"}),r.createElement("path",{d:"M12 12.997c0-.55.453-.997.997-.997h6.006c.55 0 .997.453.997.997v6.006c0 .55-.453.997-.997.997h-6.006c-.55 0-.997-.453-.997-.997v-6.006zM14 14h4v4h-4v-4z",fill:"#888D93"})))};e.exports=i},function(e,t,n){"use strict";var r=n(34),i=function(){return r.createElement("svg",{width:"48",height:"48",viewBox:"0 0 48 48"},r.createElement("g",{fill:"none",fillRule:"evenodd"},r.createElement("path",{fill:"none",d:"M0 0h48v48H0z"}),r.createElement("path",{fill:"none",d:"M12 12h24v24H12z"}),r.createElement("path",{d:"M12 28.997c0-.55.453-.997.997-.997h6.006c.55 0 .997.453.997.997v6.006c0 .55-.453.997-.997.997h-6.006c-.55 0-.997-.453-.997-.997v-6.006zM14 30h4v4h-4v-4z",fill:"#888D93"}),r.createElement("path",{d:"M35 13v16M23 29l8-8M27 21h4v4",stroke:"#78C008",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})))};e.exports=i},function(e,t,n){"use strict";var r=n(34),i=function(){return r.createElement("svg",{width:"48",height:"48",viewBox:"0 0 48 48"},r.createElement("g",{fill:"none",fillRule:"evenodd"},r.createElement("path",{fill:"none",d:"M0 0h48v48H0z"}),r.createElement("path",{fill:"none",d:"M12 12h24v24H12z"}),r.createElement("path",{d:"M13 16v16M17 22l6-6M23 20v-4h-4",stroke:"#78C008",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"}),r.createElement("path",{d:"M26 27.997c0-.55.453-.997.997-.997h6.006c.55 0 .997.453.997.997v6.006c0 .55-.453.997-.997.997h-6.006c-.55 0-.997-.453-.997-.997v-6.006zM28 29h4v4h-4v-4z",fill:"#888D93"}),r.createElement("path",{d:"M35 24H25",stroke:"#888D93",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"}),r.createElement("path",{d:"M26 13.997c0-.55.453-.997.997-.997h6.006c.55 0 .997.453.997.997v6.006c0 .55-.453.997-.997.997h-6.006c-.55 0-.997-.453-.997-.997v-6.006zM28 15h4v4h-4v-4z",fill:"#78C008"})))};e.exports=i},function(e,t,n){"use strict";var r=n(34),i=function(){return r.createElement("svg",{width:"48",height:"48",viewBox:"0 0 48 48"},r.createElement("g",{fill:"none",fillRule:"evenodd"},r.createElement("path",{fill:"none",d:"M0 0h48v48H0z"}),r.createElement("path",{fill:"none",d:"M12 12h24v24H12z"}),r.createElement("path",{stroke:"#78C008",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",d:"M33 29l-3 3-3-3M30 18v14"}),r.createElement("path",{d:"M16 27.997c0-.55.453-.997.997-.997h6.006c.55 0 .997.453.997.997v6.006c0 .55-.453.997-.997.997h-6.006c-.55 0-.997-.453-.997-.997v-6.006zM18 29h4v4h-4v-4z",fill:"#78C008"}),r.createElement("path",{d:"M25 24H15",stroke:"#888D93",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"}),r.createElement("path",{d:"M16 13.997c0-.55.453-.997.997-.997h6.006c.55 0 .997.453.997.997v6.006c0 .55-.453.997-.997.997h-6.006c-.55 0-.997-.453-.997-.997v-6.006zM18 15h4v4h-4v-4z",fill:"#888D93"})))};e.exports=i},function(e,t,n){"use strict";var r=n(34),i=function(){return r.createElement("svg",{width:"48",height:"48",viewBox:"0 0 48 48"},r.createElement("g",{fill:"none",fillRule:"evenodd"},r.createElement("path",{d:"M0 0h48v48H0z"}),r.createElement("path",{d:"M12 12h24v24H12z"}),r.createElement("path",{d:"M35 16v16m-4-4v-4h-4m-2 6l6-6",stroke:"#78C008",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"}),r.createElement("path",{d:"M14 27.997c0-.55.453-.997.997-.997h6.006c.55 0 .997.453.997.997v6.006c0 .55-.453.997-.997.997h-6.006c-.55 0-.997-.453-.997-.997v-6.006zM16 29h4v4h-4v-4z",fill:"#888D93"}),r.createElement("path",{d:"M23 24H13",stroke:"#888D93",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"}),r.createElement("path",{d:"M14 13.997c0-.55.453-.997.997-.997h6.006c.55 0 .997.453.997.997v6.006c0 .55-.453.997-.997.997h-6.006c-.55 0-.997-.453-.997-.997v-6.006zM16 15h4v4h-4v-4z",fill:"#888D93"})))};e.exports=i},function(e,t,n){"use strict";function r(e,t){return function(n){return e(t(n))}}e.exports=r},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(e){var t=e.property,n=e.value,r=(e.prefix,e.keepUnprefixed);if("string"==typeof n&&n.indexOf("calc(")>-1){var o=(0,a.default)(t),s=["-webkit-","-moz-"].map(function(e){return n.replace(/calc\(/g,e+"calc(")}).join(";"+o+":");return i({},t,s+(r?";"+o+":"+n:""))}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=o;var s=n(410),a=r(s);e.exports=t.default},function(e,t,n){"use strict";function r(e){var t=e.property,n=e.value,r=(e.prefix,e.keepUnprefixed);if("cursor"===t&&i[n]){var o=["-webkit-","-moz-"].map(function(e){return e+n}).join(";"+t+":");return{cursor:o+(r?";"+t+":"+n:"")}}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=r;var i={"zoom-in":!0,"zoom-out":!0,grab:!0,grabbing:!0};e.exports=t.default},function(e,t,n){"use strict";function r(e){var t=e.property,n=e.value,r=(e.prefix,e.keepUnprefixed);if("display"===t&&i[n]){var o=["-webkit-box","-moz-box","-ms-"+n+"box","-webkit-"+n].join(";"+t+":");return{display:o+(r?";"+t+":"+n:"")}}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=r;var i={flex:!0,"inline-flex":!0};e.exports=t.default},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(e){var t=e.property,n=e.value,r=(e.prefix,e.keepUnprefixed);if(l[t]&&p[n]){var o=(0,a.default)(t),s=["-webkit-","-moz-"].map(function(e){return e+n}).join(";"+o+":");return i({},t,s+(r?";"+o+":"+n:""))}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=o;var s=n(410),a=r(s),l={maxHeight:!0,maxWidth:!0,width:!0,height:!0,columnWidth:!0,minWidth:!0,minHeight:!0},p={"min-content":!0,"max-content":!0,"fill-available":!0,"fit-content":!0,"contain-floats":!0};e.exports=t.default},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(e){var t=e.property,n=e.value,r=(e.prefix,e.keepUnprefixed);if("string"==typeof n&&null!==n.match(l)){var o=(0,a.default)(t),s=["-webkit-","-moz-"].map(function(e){return e+n}).join(";"+o+":");return i({},t,s+(r?";"+o+":"+n:""))}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=o;var s=n(410),a=r(s),l=/linear-gradient|radial-gradient|repeating-linear-gradient|repeating-radial-gradient/;e.exports=t.default},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(e){var t=e.property,n=e.value,r=(e.prefix,e.keepUnprefixed),o=e.requiresPrefix,a=void 0;if("string"==typeof n&&(a=t.match(u))){var p,h=function(){var e="transition"+a[2],t=Object.keys(o).map(function(e){return(0,l.default)(e)}),s=n,u=s.split(/,(?![^()]*(?:\([^()]*\))?\))/g);t.forEach(function(e){u.forEach(function(t,n){if(t.indexOf(e)>-1){var i=["-webkit-","-moz-","-ms-"].map(function(n){return t.replace(e,n+e)}).join(",");u[n]=i+(r?","+t:"")}})});var h=u.join(",");return{v:(p={},i(p,"Webkit"+(0,c.default)(e),h),i(p,"Moz"+(0,c.default)(e),h),i(p,"ms"+(0,c.default)(e),h),i(p,e,h),p)}}();if("object"===("undefined"==typeof h?"undefined":s(h)))return h.v}}var s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol?"symbol":typeof e};Object.defineProperty(t,"__esModule",{value:!0}),t.default=o;var a=n(410),l=r(a),p=n(356),c=r(p),u=/^(WebkitT|MozT|msT|t)ransition(Property|)$/;e.exports=t.default},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(e){var t=e.property,n=e.value,r=e.styles,o=(e.prefix,e.keepUnprefixed);if(u[t]){var s=(0,l.default)(t);if(o||delete r[t],c[t])return i({},c[t],p[n]||n);if(p[n])return i({},t,p[n]+(o?";"+s+":"+n:""))}}Object.defineProperty(t,"__esModule",{value:!0});var s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e};t.default=o;var a=n(410),l=r(a),p={"space-around":"distribute","space-between":"justify","flex-start":"start","flex-end":"end",flex:"-ms-flexbox","inline-flex":"-ms-inline-flexbox"},c={alignContent:"msFlexLinePack",alignSelf:"msFlexItemAlign",alignItems:"msFlexAlign",justifyContent:"msFlexPack",order:"msFlexOrder",flexGrow:"msFlexPositive",flexShrink:"msFlexNegative",flexBasis:"msPreferredSize"},u=Object.keys(c).concat("display").reduce(function(e,t){return s({},e,i({},t,!0))},{});e.exports=t.default},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(e){var t=e.property,n=e.value,r=e.styles,o=e.prefix,s=e.keepUnprefixed;if(u[t]){var a=(0,l.default)(t);if(s||delete r[t],"flexDirection"===t)return{WebkitBoxOrient:n.indexOf("column")>-1?"vertical":"horizontal",WebkitBoxDirection:n.indexOf("reverse")>-1?"reverse":"normal"};if("display"===t&&p[n])return{display:o.css+p[n]+(s?";"+a+":"+n:"")};if(c[t])return i({},c[t],p[n]||n);if(p[n])return i({},t,p[n]+(s?";"+a+":"+n:""))}}Object.defineProperty(t,"__esModule",{value:!0});var s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e};t.default=o;var a=n(410),l=r(a),p={"space-around":"justify","space-between":"justify","flex-start":"start","flex-end":"end","wrap-reverse":"multiple",wrap:"multiple",flex:"box","inline-flex":"inline-box"},c={alignItems:"WebkitBoxAlign",justifyContent:"WebkitBoxPack",flexWrap:"WebkitBoxLines"},u=Object.keys(c).concat(["alignContent","alignSelf","display","order","flexGrow","flexShrink","flexBasis","flexDirection"]).reduce(function(e,t){return s({},e,i({},t,!0))},{});e.exports=t.default},function(e,t,n){"use strict";var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},i=n(34),o=function(e){return i.createElement("g",r({fill:"none",fillRule:"evenodd"},e),i.createElement("path",{fill:"none",d:"M0 0h48v48H0z"}),i.createElement("path",{fill:"none",d:"M12 12h24v24H12z"}),i.createElement("path",{stroke:"#888D93",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",d:"M22 18l-6 6 6 6M16 24h16"}))};e.exports=o},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return e.replace(/([a-z]|^)([A-Z])/g,function(e,t,n){return t+"-"+n.toLowerCase()}).replace("ms-","-ms-")},e.exports=t.default}]);