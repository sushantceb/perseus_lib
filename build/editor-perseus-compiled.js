!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t(require("react"),require("underscore"),require("react-dom"),require("react-addons-create-fragment"),require("jquery"),require("classnames"),require("aphrodite"),require("react-addons-pure-render-mixin"),require("react-addons-css-transition-group")):"function"==typeof define&&define.amd?define(["react","underscore","react-dom","react-addons-create-fragment","jquery","classnames","aphrodite","react-addons-pure-render-mixin","react-addons-css-transition-group"],t):"object"==typeof exports?exports.Perseus=t(require("react"),require("underscore"),require("react-dom"),require("react-addons-create-fragment"),require("jquery"),require("classnames"),require("aphrodite"),require("react-addons-pure-render-mixin"),require("react-addons-css-transition-group")):e.Perseus=t(e.react,e.underscore,e["react-dom"],e["react-addons-create-fragment"],e.jquery,e.classnames,e.aphrodite,e["react-addons-pure-render-mixin"],e["react-addons-css-transition-group"])}(this,function(e,t,n,r,i,o,s,a,l){return function(e){function t(r){if(n[r])return n[r].exports;var i=n[r]={exports:{},id:r,loaded:!1};return e[r].call(i.exports,i,i.exports,t),i.loaded=!0,i.exports}var n={};return t.m=e,t.c=n,t.p="if you see this then you failed to preload the extra-widgets chunk from perseus. webpack is trying to load it for you",t(0)}([function(e,t,n){"use strict";var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},i=n(1);e.exports=r({itemVersion:n(2),RevisionDiff:n(14),StatefulArticleEditor:n(3),StatefulEditorPage:n(4),ClassNames:n(5).ClassNames,Util:n(6),ViewportResizer:n(15),DeviceFramer:n(16),renderability:n(7),accessibility:n(8),i18n:n(9),ArticleEditor:n(10),Editor:n(11),EditorPage:n(12),IframeContentRenderer:n(13)},i)},function(e,t,n){"use strict";var r=n(69),i=n(22),o=n(23);i.registerMany(o),e.exports={apiVersion:r.apiVersion,itemDataVersion:r.itemDataVersion,init:n(24),ArticleRenderer:n(25),ItemRenderer:n(26),ServerItemRenderer:n(27),HintsRenderer:n(28),Renderer:n(29)}},function(e,t,n){"use strict";var r=n(30),i=n(22),o=n(69);i.registerMany(r);var s=i.getVersionVector();s["::renderer::"]=o.itemDataVersion,e.exports=s},function(e,t,n){"use strict";var r=n(17),i=n(18),o=n(10),s=r.createClass({displayName:"StatefulArticleEditor",getInitialState:function(){return i({}).extend(this.props,{mode:"edit",onChange:this.handleChange,ref:"editor",screen:"desktop"})},componentWillReceiveProps:function(e){this.setState(i(e).omit("onChange","ref"))},getSaveWarnings:function(){return this.refs.editor.getSaveWarnings()},serialize:function(){return this.refs.editor.serialize()},handleChange:function(e,t){this.isMounted()&&this.setState(e,t)},scorePreview:function(){return this.refs.editor.scorePreview()},render:function(){var e=this,t=this.state,n=t.mode,i=t.screen;return r.createElement("div",null,r.createElement("div",{style:a.controlBar},r.createElement("span",{style:a.controls},"Mode:"," ",r.createElement("span",{onClick:function(){return e.setState({mode:"edit"})},style:"edit"===n?a.controlSelected:a.control},"EDIT")," | ",r.createElement("span",{onClick:function(){return e.setState({mode:"preview"})},style:"preview"===n?a.controlSelected:a.control},"PREVIEW")," | ",r.createElement("span",{onClick:function(){return e.setState({mode:"json"})},style:"json"===n?a.controlSelected:a.control},"JSON")),r.createElement("span",{style:a.controls},"Screen:"," ",r.createElement("span",{onClick:function(){return e.setState({screen:"phone"})},style:"phone"===i?a.controlSelected:a.control},"PHONE")," | ",r.createElement("span",{onClick:function(){return e.setState({screen:"tablet"})},style:"tablet"===i?a.controlSelected:a.control},"TABLET")," | ",r.createElement("span",{onClick:function(){return e.setState({screen:"desktop"})},style:"desktop"===i?a.controlSelected:a.control},"DESKTOP"))),r.createElement("div",{style:a.editor},r.createElement(o,this.state)))}}),a={controlBar:{marginBottom:25,marginTop:5},controls:{marginRight:10},controlSelected:{cursor:"default",fontWeight:700},control:{cursor:"pointer"},editor:{marginTop:-20}};e.exports=s},function(e,t,n){"use strict";var r=n(17),i=n(18),o=n(12),s=r.createClass({displayName:"StatefulEditorPage",propTypes:{componentClass:r.PropTypes.func},getDefaultProps:function(){return{componentClass:o}},render:function(){return r.createElement(this.props.componentClass,this.state)},getInitialState:function(){return i({}).extend(i.omit(this.props,"componentClass"),{onChange:this.handleChange,ref:"editor"})},componentWillReceiveProps:function(e){this.setState(i(e).pick("apiOptions","imageUploader","developerMode","problemNum","previewDevice","frameSource"))},getSaveWarnings:function(){return this.refs.editor.getSaveWarnings()},serialize:function(){return this.refs.editor.serialize()},handleChange:function(e,t){this.isMounted()&&this.setState(e,t)},scorePreview:function(){return this.refs.editor.scorePreview()}});e.exports=s},function(e,t,n){"use strict";var r=n(17),i=n(31);e.exports={Options:{propTypes:r.PropTypes.shape({isArticle:r.PropTypes.bool.isRequired,satStyling:r.PropTypes.bool.isRequired,onInputError:r.PropTypes.func.isRequired,onFocusChange:r.PropTypes.func.isRequired,staticRender:r.PropTypes.bool.isRequired,GroupMetadataEditor:r.PropTypes.func.isRequired,showAlignmentOptions:r.PropTypes.bool.isRequired,readOnly:r.PropTypes.bool.isRequired,answerableCallback:r.PropTypes.func,getAnotherHint:r.PropTypes.func,interactionCallback:r.PropTypes.func,groupAnnotator:r.PropTypes.func.isRequired,imagePlaceholder:r.PropTypes.node,widgetPlaceholder:r.PropTypes.node,baseElements:r.PropTypes.shape({Link:r.PropTypes.func}),imagePreloader:r.PropTypes.func,trackInteraction:r.PropTypes.func,customKeypad:r.PropTypes.bool,isMobile:r.PropTypes.bool,setDrawingAreaAvailable:r.PropTypes.func,useDraftEditor:r.PropTypes.bool}).isRequired,defaults:{isArticle:!1,isMobile:!1,satStyling:!1,onInputError:function(){},onFocusChange:function(){},staticRender:!1,GroupMetadataEditor:i,showAlignmentOptions:!1,readOnly:!1,groupAnnotator:function(){return null},baseElements:{Link:function(e){return r.createElement("a",e)}},setDrawingAreaAvailable:function(){},useDraftEditor:!0}},ClassNames:{RENDERER:"perseus-renderer",TWO_COLUMN_RENDERER:"perseus-renderer-two-columns",RESPONSIVE_RENDERER:"perseus-renderer-responsive",INPUT:"perseus-input",FOCUSED:"perseus-focused",RADIO:{OPTION:"perseus-radio-option",SELECTED:"perseus-radio-selected",OPTION_CONTENT:"perseus-radio-option-content"},INTERACTIVE:"perseus-interactive",CORRECT:"perseus-correct",INCORRECT:"perseus-incorrect",UNANSWERED:"perseus-unanswered",MOBILE:"perseus-mobile"}}},function(e,t,n){"use strict";var r=n(18),i=n(46),o=function e(t,n,i){return r.isArray(t)?r.map(t,function(t){return e(t,n)}):n.call(i,t)},s={inputPathsEqual:function(e,t){return null==e||null==t?null==e==(null==t):e.length===t.length&&e.every(function(e,n){return t[n]===e})},nestedMap:o,rWidgetParts:/^\[\[\u2603 (([a-z-]+) ([0-9]+))\]\]$/,rWidgetRule:/^\[\[\u2603 (([a-z-]+) ([0-9]+))\]\]/,rTypeFromWidgetId:/^([a-z-]+) ([0-9]+)$/,snowman:"☃",noScore:{type:"points",earned:0,total:0,message:null},seededRNG:function(e){var t=e;return function(){var e=t;return e=e+2127912214+(e<<12)&4294967295,e=4294967295&(3345072700^e^e>>>19),e=e+374761393+(e<<5)&4294967295,e=4294967295&(e+3550635116^e<<9),e=e+4251993797+(e<<3)&4294967295,e=4294967295&(3042594569^e^e>>>16),(t=268435455&e)/268435456}},shuffle:function(e,t,n){var i=r.clone(e);if(!i.length||r.all(i,function(e){return r.isEqual(e,i[0])}))return i;var o;o=r.isFunction(t)?t:s.seededRNG(t);do for(var a=i.length;a>0;a--){var l=Math.floor(o()*a),c=i[l];i[l]=i[a-1],i[a-1]=c}while(n&&r.isEqual(e,i));return i},split:"x".split(/(.)/g).length?function(e,t){return e.split(t)}:function(e,t){for(var n,r=[],i=t.lastIndex=0;n=t.exec(e);)r.push(e.slice(i,n.index)),r.push.apply(r,n.slice(1)),i=n.index+n[0].length;return r.push(e.slice(i)),r},combineScores:function(e,t){var n;return"points"===e.type&&"points"===t.type?(n=e.message&&t.message&&e.message!==t.message?null:e.message||t.message,{type:"points",earned:e.earned+t.earned,total:e.total+t.total,message:n}):"points"===e.type&&"invalid"===t.type?t:"invalid"===e.type&&"points"===t.type?e:"invalid"===e.type&&"invalid"===t.type?(n=e.message&&t.message&&e.message!==t.message?null:e.message||t.message,{type:"invalid",message:n}):void 0},keScoreFromPerseusScore:function(e,t){if("points"===e.type)return{empty:!1,correct:e.earned>=e.total,message:e.message,guess:t};if("invalid"===e.type)return{empty:!0,correct:!1,message:e.message,guess:t};throw new Error("Invalid score type: "+e.type)},firstNumericalParse:function(e){var t,n=i.predicate.createValidatorFunctional(function(e){return t=e,!0},{simplify:"optional",inexact:!0,forms:"integer, proper, improper, pi, log, mixed, decimal"});return n(e),t},stringArrayOfSize:function(e){return r(e).times(function(){return""})},gridDimensionConfig:function(e,t,n,r){var i=s.scaleFromExtent(t,n),o=e*i,a=o>30;return{scale:i,tickStep:e/r,unityLabel:a}},getGridStep:function(e,t,n){return r(2).times(function(r){var i=s.scaleFromExtent(e[r],n),o=s.gridStepFromTickStep(t[r],i);return o})},snapStepFromGridStep:function(e){return r.map(e,function(e){return e/2})},scaleFromExtent:function(e,t){var n=e[1]-e[0],r=t/n;return r},tickStepFromExtent:function(e,t){var n,r=e[1]-e[0];n=15<r&&r<=20?23:r>100||r<5?10:16;var i=t/500,o=n*i;return s.tickStepFromNumTicks(r,o)},gridStepFromTickStep:function(e,t){var n=e*t,r=e,i=Math.pow(10,Math.floor(Math.log(r)/Math.LN10)),o=Math.floor(r/i);return n<25?e:n<50?5===o?e:e/2:1===o?e/2:2===o?e/4:5===o?e/5:void 0},tickStepFromNumTicks:function(e,t){var n=Math.pow(10,Math.floor(Math.log(e/t)/Math.LN10)),r=t/e*n;return r<=.15?n*=10:r<=.35?n*=5:r<=.75&&(n*=2),n},constrainedTickStepsFromTickSteps:function(e,t){for(var n=[],r=0;r<2;r++){var i=t[r][1]-t[r][0],o=i/e[r];o<=10?n[r]=e[r]:o<=20?n[r]=2*e[r]:n[r]=s.tickStepFromNumTicks(i,10)}return n},DeprecationMixin:{componentWillMount:function(){var e={};r.each(this.deprecatedProps,function(t,n){r.has(this.props,n)&&r.extend(e,t(this.props))},this),r.isEmpty(e)||(r.extend(this.props,e),setTimeout(this.props.onChange,0,e))}},eq:function(e,t){return r.isNumber(e)&&r.isNumber(t)?Math.abs(e-t)<1e-9:e===t},deepEq:function(e,t){if(r.isArray(e)&&r.isArray(t)){if(e.length!==t.length)return!1;for(var n=0;n<e.length;n++)if(!s.deepEq(e[n],t[n]))return!1;return!0}return!r.isArray(e)&&!r.isArray(t)&&(r.isFunction(e)&&r.isFunction(t)?s.eq(e,t):!r.isFunction(e)&&!r.isFunction(t)&&(r.isObject(e)&&r.isObject(t)?e===t||r.all(e,function(e,n){return s.deepEq(t[n],e)})&&r.all(t,function(t,n){return s.deepEq(e[n],t)}):!r.isObject(e)&&!r.isObject(t)&&s.eq(e,t)))},parseQueryString:function(e){e=e||window.location.search.substring(1);for(var t,n={},r=/\+/g,i=/([^&=]+)=?([^&]*)/g,o=function(e){return decodeURIComponent(e.replace(r," "))};t=i.exec(e);)n[o(t[1])]=o(t[2]);return n},updateQueryString:function(e,t,n){n=encodeURIComponent(n);var r=new RegExp("([?&])"+t+"=.*?(&|$)","i"),i=e.indexOf("?")!==-1?"&":"?";return e.match(r)?e.replace(r,"$1"+t+"="+n+"$2"):e+i+t+"="+n},strongEncodeURIComponent:function(e){return encodeURIComponent(e).replace(/['()!]/g,window.escape).replace(/\*/g,"%2A")},widgetShouldHighlight:function(e){if(!e)return!1;var t=["measurer","protractor"];return!r.contains(t,e.type)},scoreIsEmpty:function(e){return"invalid"===e.type&&(!e.message||0===e.message.length)},touchHandlers:{pointerDown:!1,currentTouchIdentifier:null},resetTouchHandlers:function(){r.extend(s.touchHandlers,{pointerDown:!1,currentTouchIdentifier:null})},extractPointerLocation:function(e){var t;if(s.touchHandlers.pointerDown){if(null!=s.touchHandlers.currentTouchIdentifier)for(var n=e.changedTouches?e.changedTouches.length:0,r=0;r<n;r++)e.changedTouches[r].identifier===s.touchHandlers.currentTouchIdentifier&&(t=e.changedTouches[r]);else t=e;var i="touchend"===e.type||"touchcancel"===e.type;t&&i&&(s.touchHandlers.pointerDown=!1,s.touchHandlers.currentTouchIdentifier=null)}else s.touchHandlers.pointerDown=!0,e.changedTouches?(t=e.changedTouches[0],s.touchHandlers.currentTouchIdentifier=t.identifier):t=e;if(t)return{left:t.pageX,top:t.pageY}},captureScratchpadTouchStart:function(e){e.stopPropagation()},getImageSize:function(e,t){var i=new Image;i.onload=function(){0===i.width&&0===i.height?(document.body.appendChild(i),r.defer(function(){t(i.clientWidth,i.clientHeight),document.body.removeChild(i)})):t(i.width,i.height)};var o=n(32);i.src=o.getRealImageUrl(e)},textarea:{getWordBeforeCursor:function(e){var t=e.value,n=e.selectionStart-1,r=Math.max(t.lastIndexOf("\n",n),t.lastIndexOf(" ",n))+1;return{string:t.substring(r,n+1),pos:{start:r,end:n}}},moveCursor:function(e,t){e.selectionStart=t,e.selectionEnd=t}}};s.random=s.seededRNG(4294967295&(new Date).getTime()),e.exports=s},function(e,t,n){"use strict";var r=(n(18),n(33)),i=n(22),o=function(e,t){if(null==t)return!1;var n=e.version||{major:0,minor:0};return t.major>n.major||!(t.major<n.major)&&t.minor>=n.minor},s=function(e,t){if(null==e||null==e.type)return!0;var n=i.upgradeWidgetInfoToLatestVersion(e);return o(n,t[n.type])},a=function(e,t){var n=!0;return r.traverseRendererDeep(e,null,function(e){n=n&&s(e,t)}),n},l=function(e,t){if(null==e||null==t)throw new Error("missing parameter to Perseus.isRenderable.item");return a(e.question,t)};e.exports={isItemRenderableByVersion:l}},function(e,t,n){"use strict";var r=n(18),i=n(33),o=n(22);e.exports={violatingWidgets:function(e){var t=[];return i.traverseRendererDeep(e.question,null,function(e){e.type&&!o.isAccessible(e)&&t.push(e.type)}),r.uniq(t)}}},function(e,t,n){"use strict";function r(e,t){var n=u.parse(e);u.traverseContent(n,function(e){"image"===e.type&&t.push(e.target)})}function i(e,t){e&&e.backgroundImage&&e.backgroundImage.url&&t.push(e.backgroundImage.url)}function o(e,t){e.options&&("categorizer"===e.type?(c.each(e.options.items,function(e){r(e,t)}),c.each(e.options.categories,function(e){r(e,t)})):"image"===e.type?(r(e.options.title,t),r(e.options.caption,t)):"matcher"===e.type?(c.each(e.options.left,function(e){r(e,t)}),c.each(e.options.right,function(e){r(e,t)}),c.each(e.options.labels,function(e){r(e,t)})):"matrix"===e.type?(r(e.options.prefix,t),r(e.options.suffix,t)):"orderer"===e.type?c.each(e.options.options,function(e){r(e.content,t)}):"passage"===e.type?r(e.options.passageTitle,t):"radio"===e.type?c.each(e.options.choices,function(e){r(e.content,t)}):"sorter"===e.type?c.each(e.options.correct,function(e){r(e,t)}):"table"===e.type&&c.each(e.options.headers,function(e){r(e,t)}),"grapher"===e.type?i(e.options.graph,t):"image"===e.type?i(e.options,t):"interactive-graph"===e.type?i(e.options,t):"measurer"===e.type&&e.options.image?t.push(e.options.image.url):"plotter"===e.type?t.push(e.options.picUrl):"transformer"===e.type&&i(e.options.graph,t))}function s(e){var t=[];return c.each(e,function(e){p.traverseRendererDeep(e,function(e){r(e,t)},function(e){return o(e,t)})}),t}function a(e){var t=[e.question].concat(e.hints);return s(t)}function l(e){return s(e)}var c=n(18),p=n(33),u=n(34);e.exports={findImagesInArticles:l,findImagesInItemData:a}},function(e,t,n){"use strict";var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},i=n(17),o=n(18),s=n(5).Options,a=n(11),l=n(35),c=l.iconCircleArrowDown,p=l.iconCircleArrowUp,u=l.iconPlus,h=l.iconTrash,d=n(36),f=n(37),g=n(16),m=n(13),v=i.PropTypes.shape({content:i.PropTypes.string,widgets:i.PropTypes.object,images:i.PropTypes.object}),y=i.createClass({displayName:"SectionControlButton",propTypes:{icon:i.PropTypes.shape(d.propTypes).isRequired,onClick:i.PropTypes.func.isRequired,title:i.PropTypes.string.isRequired},render:function(){var e=this.props,t=e.icon,n=e.onClick,r=e.title;return i.createElement("a",{href:"#",className:"section-control-button simple-button simple-button--small orange",onClick:function(e){e.preventDefault(),n()},title:r},i.createElement(d,t))}}),b=i.createClass({displayName:"ArticleEditor",propTypes:{apiOptions:i.PropTypes.shape({}),frameSource:i.PropTypes.string.isRequired,imageUploader:i.PropTypes.func,json:i.PropTypes.oneOfType([v,i.PropTypes.arrayOf(v)]),mode:i.PropTypes.oneOf(["diff","edit","json","preview"]),onChange:i.PropTypes.func.isRequired,screen:i.PropTypes.oneOf(["phone","tablet","desktop"]),sectionImageUploadGenerator:i.PropTypes.func,useNewStyles:i.PropTypes.bool},getDefaultProps:function(){return{json:[{}],mode:"edit",screen:"desktop",sectionImageUploadGenerator:function(){return i.createElement("span",null)},useNewStyles:!1}},componentDidUpdate:function(){var e=this;"preview"===this.props.mode?this.refs["frame-all"].sendNewData({type:"article-all",data:this._sections().map(function(t){return e._apiOptionsForSection(t)})}):this._sections().forEach(function(t,n){e.refs["frame-"+n].sendNewData({type:"article",data:e._apiOptionsForSection(t)})})},_apiOptionsForSection:function(e){return{apiOptions:r({},s.defaults,this.props.apiOptions,{showAlignmentOptions:!0,isArticle:!0}),json:e,useNewStyles:this.props.useNewStyles}},_sections:function(){return o.isArray(this.props.json)?this.props.json:[this.props.json]},_renderEditor:function(){var e=this,t=this.props,n=t.imageUploader,l=t.sectionImageUploadGenerator,d=r({},s.defaults,this.props.apiOptions,{showAlignmentOptions:!0,isArticle:!0}),f=this._sections();return i.createElement("div",{className:"perseus-editor-table"},f.map(function(t,s){return[i.createElement("div",{className:"perseus-editor-row"},i.createElement("div",{className:"perseus-editor-left-cell"},i.createElement("div",{className:"pod-title"},"Section ",s+1,i.createElement("div",{style:{display:"inline-block",float:"right"}},l(s),i.createElement(y,{icon:u,onClick:function(){e._handleAddSectionAfter(s)},title:"Add a new section after this one"}),s+1<f.length&&i.createElement(y,{icon:c,onClick:function(){e._handleMoveSectionLater(s)},title:"Move this section down"}),s>0&&i.createElement(y,{icon:p,onClick:function(){e._handleMoveSectionEarlier(s)},title:"Move this section up"}),i.createElement(y,{icon:h,onClick:function(){var t="Are you sure you want to delete section "+(s+1)+"?";confirm(t)&&e._handleRemoveSection(s)},title:"Delete this section"}))),i.createElement(a,r({},t,{apiOptions:d,imageUploader:n,onChange:o.partial(e._handleEditorChange,s),placeholder:"Type your section text here...",ref:"editor"+s}))),i.createElement("div",{className:"editor-preview"},e._renderIframePreview(s,!0)))]}),this._renderAddSection())},_renderAddSection:function(){var e=this;return i.createElement("div",{className:"perseus-editor-row"},i.createElement("div",{className:"perseus-editor-left-cell"},i.createElement("a",{href:"#",className:"simple-button orange",onClick:function(){e._handleAddSectionAfter(e._sections().length-1)}},i.createElement(d,u)," Add a section")))},_renderIframePreview:function(e,t){var n="phone"===this.props.screen||"tablet"===this.props.screen;return i.createElement(g,{deviceType:this.props.screen,nochrome:t},i.createElement(m,{ref:"frame-"+e,key:this.props.screen,content:this.props.frameSource,datasetKey:"mobile",datasetValue:n,seamless:t}))},_renderPreviewMode:function(){return i.createElement("div",{className:"standalone-preview"},this._renderIframePreview("all",!1))},_handleJsonChange:function(e){this.props.onChange({json:e})},_handleEditorChange:function(e,t){var n=o.clone(this._sections());n[e]=o.extend({},n[e],t),this.props.onChange({json:n})},_handleMoveSectionEarlier:function(e){if(0!==e){var t=o.clone(this._sections()),n=t[e];t.splice(e,1),t.splice(e-1,0,n),this.props.onChange({json:t})}},_handleMoveSectionLater:function(e){var t=o.clone(this._sections());if(e+1!==t.length){var n=t[e];t.splice(e,1),t.splice(e+1,0,n),this.props.onChange({json:t})}},_handleAddSectionAfter:function(e){var t=o.clone(this.serialize()),n=e>=0?{widgets:t[e].widgets}:{};t.splice(e+1,0,n),this.props.onChange({json:t})},_handleRemoveSection:function(e){var t=o.clone(this._sections());t.splice(e,1),this.props.onChange({json:t})},serialize:function(){var e=this;if("edit"===this.props.mode)return this._sections().map(function(t,n){return e.refs["editor"+n].serialize()});if("preview"===this.props.mode||"json"===this.props.mode)return this.props.json;throw new Error("Could not serialize; mode "+this.props.mode+" not found")},render:function(){return i.createElement("div",{className:"framework-perseus perseus-article-editor"},"edit"===this.props.mode&&this._renderEditor(),"preview"===this.props.mode&&this._renderPreviewMode(),"json"===this.props.mode&&i.createElement("div",{className:"json-editor"},i.createElement("div",{className:"json-editor-warning"},i.createElement("span",null,"Warning: Editing in this mode can lead to broken articles!")),i.createElement(f,{multiLine:!0,onChange:this._handleJsonChange,value:this.props.json})))}});e.exports=b},function(e,t,n){"use strict";var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},i=n(17),o=n(19),s=n(20),a=n(21),l=n(18),c=n(5).Options,p=n(53),u=n(35),h=u.iconChevronDown,d=u.iconChevronRight,f=u.iconTrash,g=n(36),m=n(38),v=n(34),y=n(39),b=n(6),E=n(22),T=n(47),w=n(40),x=n(49),C="[[☃ {id}]]",S="(\\[\\[☃ {id}\\]\\])",P=new RegExp(S.replace("{id}","[a-z-]+ [0-9]+"),"g"),k=/^\[\[([a-z\-]+)$/,_=/(?:\n{2,}|^\n*)$/,M=/(\n*)$/,O=/^(\n*)/,N=function(e){var t=e.toString();return t.length>=5&&(t=t.replace(/(\d)(?=(\d{3})+$)/g,"$1{,}")),t},I=function(e){if(_.test(e))return e;var t=M.exec(e)[1];return e+"\n\n".slice(0,2-t.length)},A=function(e){var t=O.exec(e)[1];return"\n\n".slice(0,2-t.length)+e},R=i.createClass({displayName:"WidgetSelect",shouldComponentUpdate:function(){return!1},handleChange:function(e){var t=e.target.value;""!==t&&this.props.onChange&&this.props.onChange(t)},render:function(){var e=E.getPublicWidgets(),t=l.sortBy(l.keys(e),function(t){return e[t].displayName}),n="Add a widget…";return i.createElement("select",{value:"",onChange:this.handleChange},i.createElement("option",{value:""},n),i.createElement("option",{disabled:!0},"--"),l.map(t,function(t){return i.createElement("option",{key:t,value:t},e[t].displayName)}))}}),D=i.createClass({displayName:"WidgetEditor",propTypes:{id:i.PropTypes.string.isRequired,onChange:i.PropTypes.func.isRequired,onRemove:i.PropTypes.func.isRequired,apiOptions:c.propTypes,type:i.PropTypes.string.isRequired,alignment:i.PropTypes.string,static:i.PropTypes.bool,graded:i.PropTypes.bool,options:i.PropTypes.any,version:i.PropTypes.shape({major:i.PropTypes.number.isRequired,minor:i.PropTypes.number.isRequired})},getInitialState:function(){return{showWidget:!1}},componentWillMount:function(){this._upgradeWidgetInfo(this.props)},componentWillReceiveProps:function(e){this._upgradeWidgetInfo(e)},_upgradeWidgetInfo:function(e){var t=l.omit(e,x),n=E.upgradeWidgetInfoToLatestVersion(t);this.setState({widgetInfo:n})},_toggleWidget:function(e){e.preventDefault(),this.setState({showWidget:!this.state.showWidget})},_handleWidgetChange:function(e,t,n){var r=l.clone(this.state.widgetInfo);r.options=l.extend(this.refs.widget.serialize(),e),this.props.onChange(r,t,n)},_toggleStatic:function(e){e.preventDefault();var t=l.extend({},this.state.widgetInfo,{static:!this.state.widgetInfo.static});this.props.onChange(t)},_handleAlignmentChange:function(e){var t=e.target.value,n=l.clone(this.state.widgetInfo);n.alignment=t,this.props.onChange(n)},render:function(){var e,t=this,n=this.state.widgetInfo,o=E.getEditor(n.type);e=this.props.apiOptions.showAlignmentOptions?E.getSupportedAlignments(n.type):["default"];var s=E.supportsStaticMode(n.type),a="transformer"===n.type,l=i.createElement(y,{label:"Graded:",graded:n.graded,onChange:this.props.onChange});return i.createElement("div",{className:"perseus-widget-editor"},i.createElement("div",{className:"perseus-widget-editor-title "+(this.state.showWidget?"open":"closed")},i.createElement("a",{className:"perseus-widget-editor-title-id",href:"#",onClick:this._toggleWidget},this.props.id,this.state.showWidget?i.createElement(g,h):i.createElement(g,d)),s&&i.createElement("input",{type:"button",onClick:this._toggleStatic,className:"simple-button--small",value:n.static?"Unset as static":"Set as static"}),e.length>1&&i.createElement("select",{className:"alignment",value:n.alignment,onChange:this._handleAlignmentChange},e.map(function(e){return i.createElement("option",{key:e},e)})),i.createElement("a",{href:"#",className:"remove-widget simple-button simple-button--small orange",onClick:function(e){e.preventDefault(),t.props.onRemove()}},i.createElement(g,f))),i.createElement("div",{className:"perseus-widget-editor-content "+(this.state.showWidget?"enter":"leave")},a&&l,i.createElement(o,r({ref:"widget",onChange:this._handleWidgetChange,static:n.static,apiOptions:this.props.apiOptions},n.options))))},getSaveWarnings:function(){var e=this.refs.widget.getSaveWarnings;return e?e():[]},serialize:function(){var e=this.state.widgetInfo;return{type:e.type,alignment:e.alignment,static:e.static,graded:e.graded,options:this.refs.widget.serialize(),version:e.version}}}),L=/!\[[^\]]*\]\(([^\s\)]+)[^\)]*\)/g,F=function(e,t){for(var n=[];;){var r=e.exec(t);if(!r)break;n.push(r)}return n},B=function(e){return l.map(F(L,e),function(e){return e[1]})},z=i.createClass({displayName:"Editor",propTypes:{apiOptions:c.propTypes,imageUploader:i.PropTypes.func,onChange:i.PropTypes.func},getDefaultProps:function(){return{content:"",placeholder:"",widgets:{},images:{},disabled:!1,widgetEnabled:!0,immutableWidgets:!1,showWordCount:!1,warnNoPrompt:!1,warnNoWidgets:!1}},getInitialState:function(){return{showKatexErrors:!1}},getWidgetEditor:function(e,t){if(E.getEditor(t))return i.createElement(D,r({ref:e,id:e,type:t,onChange:this._handleWidgetEditorChange.bind(this,e),onRemove:this._handleWidgetEditorRemove.bind(this,e),apiOptions:this.props.apiOptions},this.props.widgets[e]))},_handleWidgetEditorChange:function(e,t,n,r){var i=l.clone(this.props.widgets);i[e]=l.extend({},i[e],t),this.props.apiOptions.useDraftEditor&&this.refs.textarea.updateWidget(e,t),this.props.onChange({widgets:i},n,r)},_handleWidgetEditorRemove:function(e){var t=this.refs.textarea;if(this.props.apiOptions.useDraftEditor)t.removeWidget(e);else{var n=new RegExp(S.replace("{id}",e),"gm");this.props.onChange({content:t.value.replace(n,"")})}},_sizeImages:function(e){var t=B(e.content),n=l.pick(e.images,t),r=l.filter(t,function(e){return!n[e]});l.each(r,function(t){b.getImageSize(t,function(r,i){n[t]={width:r,height:i},e.onChange({images:l.clone(n)},null,!0)})})},componentDidMount:function(){this._sizeImages(this.props),this.props.apiOptions.useDraftEditor||a(o.findDOMNode(this.refs.textarea)).on("copy cut",this._maybeCopyWidgets).on("paste",this._maybePasteWidgets)},componentDidUpdate:function(e){var t=o.findDOMNode(this.refs.textarea);t.value=this.props.content,this.props.content!==e.content&&this._sizeImages(this.props)},handleDrop:function(e){var t=this;if(!this.props.apiOptions.useDraftEditor){var n=this.props.content,r=e.nativeEvent.dataTransfer,i=r.files;if(0!==i.length)l(i).chain().map(function(e){if(!e.type.match("image.*"))return null;var t="☃ "+l.uniqueId("image_");return n+="\n\n![]("+t+")",{file:e,sentinel:t}}).reject(l.isNull).tap(function(){t.props.onChange({content:n})}).each(function(e){t.props.imageUploader(e.file,function(n){t.props.onChange({content:t.props.content.replace(e.sentinel,n)})})});else{var o=r.getData("URL");if(o){var s=n+"\n\n![]("+o+")";this.props.onChange({content:s})}}}},handleChange:function(){var e=o.findDOMNode(this.refs.textarea);this.props.onChange({content:e.value})},_handleKeyDown:function(e){if("Tab"===e.key){var t=o.findDOMNode(this.refs.textarea),n=b.textarea.getWordBeforeCursor(t),r=n.string.toLowerCase().match(k);if(null!=r){var i=r[1],s=E.getAllWidgetTypes(),a=l.filter(s,function(e){return e.substring(0,i.length)===i});if(1===a.length){var c=a[0];this._addWidgetToContent(this.props.content,[n.pos.start,n.pos.end+1],c)}e.preventDefault()}}},_maybeCopyWidgets:function(e){var t=e.target,n=t.value.substring(t.selectionStart,t.selectionEnd),r=l.map(n.match(P),function(e){return b.rWidgetParts.exec(e)[1]}),i=l.pick(this.serialize().widgets,r);localStorage.perseusLastCopiedText=n,localStorage.perseusLastCopiedWidgets=JSON.stringify(i),console.log("Widgets copied: "+localStorage.perseusLastCopiedWidgets)},_maybePasteWidgets:function(e){var t=localStorage.perseusLastCopiedWidgets,n=localStorage.perseusLastCopiedText,r=e.originalEvent.clipboardData.getData("text");if(t&&n===r){e.preventDefault();for(var i=JSON.parse(t),o=this._safeWidgetNameMapping(i),s={},a=Object.entries(i),c=Array.isArray(a),p=0,a=c?a:a[Symbol.iterator]();;){var u;if(c){if(p>=a.length)break;u=a[p++]}else{if(p=a.next(),p.done)break;u=p.value}var h=u,d=h[0],f=h[1];s[o[d]]=f}var g=l.extend(s,this.props.widgets),m=n.replace(P,function(e){var t=b.rWidgetParts.exec(e),n=t[0],r=t[1];return n.replace(r,o[r])}),v=e.target,y=v.selectionStart,E=this.props.content.substr(0,y)+m+this.props.content.substr(v.selectionEnd);this.props.onChange({content:E,widgets:g},function(){var e=y+m.length;b.textarea.moveCursor(v,e)})}},_safeWidgetNameMapping:function(e){var t=l.keys(e).map(function(e){return e.split(" ")}),n=l.uniq(t.map(function(e){return e[0]})),r=l.keys(this.props.widgets).map(function(e){return e.split(" ")}),i={};l.each(n,function(e){i[e]=l.chain(r).filter(function(t){return t[0]===e}).map(function(e){return+e[1]+1}).max().value(),i[e]=Math.max(i[e],1)});var o={};return l.each(t,function(e){var t=e.join(" "),n=e[0];o[t]=n+" "+i[n],i[n]++}),o},_addWidgetToContent:function(e,t,n){var r=o.findDOMNode(this.refs.textarea),i=l.map(e.match(P),function(e){var t=b.rWidgetParts.exec(e),n=t[2],r=+t[3];return[n,r]}),s=l.reduce(i,function(e,t){var r=t[0],i=t[1];return r===n?Math.max(i+1,e):e},1),a=n+" "+s,c=C.replace("{id}",a),p="block"===E.getDefaultAlignment(n),u=e.slice(0,t[0]),h=e.slice(t[1]),d=p?I(u):u,f=p?A(h):h,g=d+c+f,m=l.clone(this.props.widgets);m[a]={options:E.getEditor(n).defaultProps,type:n,version:E.getVersion(n)},this.props.onChange({content:g,widgets:m},function(){b.textarea.moveCursor(r,g.length-h.length)})},_addWidget:function(e){var t=this.refs.textarea;this.props.apiOptions.useDraftEditor?t.addWidget(e):(this._addWidgetToContent(this.props.content,[t.selectionStart,t.selectionEnd],e),t.focus())},addTemplate:function(e){var t=e.target.value;if(""!==t){if(e.target.value="",this.props.apiOptions.useDraftEditor)return void this.refs.textarea.addTemplate(t);var n=this.props.content;n=n.replace(/\n*$/,"\n\n");var r;if("table"===t)r="header 1 | header 2 | header 3\n- | - | -\ndata 1 | data 2 | data 3\ndata 4 | data 5 | data 6\ndata 7 | data 8 | data 9";else if("titledTable"===t)r="|| **Table title** ||\nheader 1 | header 2 | header 3\n- | - | -\ndata 1 | data 2 | data 3\ndata 4 | data 5 | data 6\ndata 7 | data 8 | data 9";else if("alignment"===t)r="$\\begin{align} x+5 &= 30 \\\\\nx+5-5 &= 30-5 \\\\\nx &= 25 \\end{align}$";else if("piecewise"===t)r="$f(x) = \\begin{cases}\n7 & \\text{if $x=1$} \\\\\nf(x-1)+5 & \\text{if $x > 1$}\n\\end{cases}$";else{if("allWidgets"!==t)throw new Error("Invalid template type: "+t);r=E.getAllWidgetTypes().map(function(e){return"[["+b.snowman+" "+e+" 1]]"}).join("\n\n")}var i=n+r;this.props.onChange({content:i},this.focusAndMoveToEnd)}},getSaveWarnings:function(){var e=this,t=v.parse(this.props.content),n=!1;v.traverseContent(t,function(e){"unescapedDollar"===e.type&&(n=!0)});var r=[];v.traverseContent(t,function(e){if("image"===e.type&&!e.alt){var t=e.target.length<9?e.target:e.target.slice(0,3)+"..."+e.target.slice(-3);r.push("Image '"+e.target+"' doesn't have alt text: ![add alt text here]("+t+")");
}});var i=l.intersection(this.widgetIds,l.keys(this.refs)),o=l(i).chain().map(function(t){var n=e.refs[t].getSaveWarnings,r=n?n():[];return l.map(r,function(e){return t+": "+e})}).flatten(!0).value(),s=r.concat(o);return n&&s.unshift('This content is UNTRANSLATABLE because there are "unescaped" $ signs outside of math expressions. Please substitute $ -> \\$ where appropriate.'),s},focus:function(){o.findDOMNode(this.refs.textarea).focus()},focusAndMoveToEnd:function(){this.focus();var e=o.findDOMNode(this.refs.textarea);e.selectionStart=e.value.length,e.selectionEnd=e.value.length},render:function(){var e,t,n,r,o,a,c,u=[];if(this.props.showWordCount){var h=v.characterCount(this.props.content),d=Math.floor(h/6);c=i.createElement("span",{className:"perseus-editor-word-count",title:"~"+N(d)+" words ("+N(h)+" characters)"},N(d))}if(this.props.widgetEnabled){e=b.split(this.props.content,P),t={},n=[];for(var f=0;f<e.length;f++)if(f%2===0){n.push(e[f]);var g=v.parse(e[f]);v.traverseContent(g,function(e){if("math"===e.type||"blockMath"===e.type){var t=T(e.content);try{katex.renderToString(t)}catch(e){u.push({math:t,message:e.message})}}})}else{var y=b.rWidgetParts.exec(e[f]),E=y[1],x=y[2],C=!1,S=E in t;t[E]=this.getWidgetEditor(E,x);var k=(S||!t[E]?"error ":"")+(C?"selected ":""),_=S?f:E;n.push(i.createElement("b",{className:k,key:_},e[f]))}this.widgetIds=l.keys(t),r=i.createElement(R,{ref:"widgetSelect",onChange:this._addWidget});var M="Insert template…";o=i.createElement("select",{onChange:this.addTemplate},i.createElement("option",{value:""},M),i.createElement("option",{disabled:!0},"--"),i.createElement("option",{value:"table"},"Table"),i.createElement("option",{value:"titledTable"},"Titled table"),i.createElement("option",{value:"alignment"},"Aligned equations"),i.createElement("option",{value:"piecewise"},"Piecewise function"),i.createElement("option",{disabled:!0},"--"),i.createElement("option",{value:"allWidgets"},"All widgets (for testing)")),this.props.immutableWidgets||(a=i.createElement("div",{className:"perseus-editor-widgets"},i.createElement("div",{className:"perseus-editor-widgets-selectors"},r,o,c),s(t)),c=null)}else n=[this.props.content];n.push(i.createElement("br",{key:"end"}));var O=[i.createElement("div",{className:"perseus-textarea-underlay",ref:"underlay",key:"underlay"},n),i.createElement("textarea",{ref:"textarea",key:"textarea",onChange:this.handleChange,onKeyDown:this._handleKeyDown,placeholder:this.props.placeholder,disabled:this.props.disabled,value:this.props.content})];this.props.apiOptions.useDraftEditor&&(O=i.createElement(w,{ref:"textarea",onChange:this.props.onChange,content:this.props.content,placeholder:this.props.placeholder,initialWidgets:this.props.widgets,imageUploader:this.props.imageUploader,widgetEnabled:this.props.widgetEnabled}));var I;I=this.props.imageUploader?i.createElement(p,{onDrop:this.handleDrop,className:"perseus-textarea-pair"},O):i.createElement("div",{className:"perseus-textarea-pair"},O);var A=this.props.content.replace(/\[\[\u2603 (([a-z-]+) ([0-9]+))\]\]/g,""),D=0===A.trim().length,L=!/\[\[\u2603 (([a-z-]+) ([0-9]+))\]\]/g.test(this.props.content),F={borderTop:"none",padding:4,backgroundColor:"pink"};return i.createElement("div",{className:"perseus-single-editor "+(this.props.className||"")},I,u.length>0&&i.createElement(m,{errorList:u}),this.props.warnNoPrompt&&D&&i.createElement("div",{style:F},"Graded Groups should contain a prompt"),this.props.warnNoWidgets&&L&&i.createElement("div",{style:F},"Graded Groups should contain at least one widget"),c,a)},serialize:function(e){var t=this,n={},r=l.intersection(this.widgetIds,l.keys(this.refs));return l.each(r,function(e){n[e]=t.refs[e].serialize()}),e&&e.keepDeletedWidgets&&l.chain(this.props.widgets).keys().reject(function(e){return l.contains(r,e)}).each(function(e){n[e]=t.props.widgets[e]}),{replace:this.props.replace,content:this.props.content,images:this.props.images,widgets:n}}});e.exports=z},function(e,t,n){"use strict";var r=n(17),i=n(18),o=n(5).ClassNames,s=n(50),a=n(41),l=n(48),c=n(42),p=n(37),u=n(15),h=r.createClass({displayName:"EditorPage",propTypes:{answerArea:r.PropTypes.any,developerMode:r.PropTypes.bool,frameSource:r.PropTypes.string.isRequired,hints:r.PropTypes.any,imageUploader:r.PropTypes.func,itemDataVersion:r.PropTypes.shape({major:r.PropTypes.number,minor:r.PropTypes.number}),jsonMode:r.PropTypes.bool,onChange:r.PropTypes.func,onPreviewDeviceChange:r.PropTypes.func,previewDevice:r.PropTypes.string,question:r.PropTypes.any},mixins:[s],getDefaultProps:function(){return{developerMode:!1,jsonMode:!1,onChange:function(){},ref:""}},getInitialState:function(){return{json:i.pick(this.props,"question","answerArea","hints","itemDataVersion"),gradeMessage:"",wasAnswered:!1}},handleCheckAnswer:function(){var e=this.scorePreview();this.setState({gradeMessage:e.message,wasAnswered:e.correct})},toggleJsonMode:function(){this.setState({json:this.serialize({keepDeletedWidgets:!0})},function(){this.props.onChange({jsonMode:!this.props.jsonMode})})},componentDidMount:function(){this.rendererMountNode=document.createElement("div"),this.updateRenderer()},componentDidUpdate:function(){this.updateRenderer()},updateRenderer:function(){var e=!this.props.developerMode||!this.props.jsonMode;if(this.isMounted()&&e){var t="phone"===this.props.previewDevice||"tablet"===this.props.previewDevice,n=Object.assign(this.getApiOptions(),{customKeypad:t,isMobile:t});this.refs.itemEditor.triggerPreviewUpdate({type:"question",data:i({item:this.serialize(),apiOptions:n,initialHintsVisible:0,device:this.props.previewDevice}).extend(i(this.props).pick("workAreaSelector","solutionAreaSelector","hintsAreaSelector","problemNum"))})}},handleChange:function(e,t,n){var r=i(this.props).pick("question","hints","answerArea");i(r).extend(e),this.props.onChange(r,t,n)},changeJSON:function(e){this.setState({json:e}),this.props.onChange(e)},_fixPassageRefs:function(){var e=this.serialize(),t=l(e);this.setState({json:t}),this.props.onChange(t)},scorePreview:function(){return this.renderer?this.renderer.scoreInput():null},render:function(){var e="framework-perseus",t="phone"===this.props.previewDevice||"tablet"===this.props.previewDevice,n=Object.assign(this.getApiOptions(),{customKeypad:t,isMobile:t});return n.isMobile&&(e+=" "+o.MOBILE),r.createElement("div",{id:"perseus",className:e},r.createElement("div",{style:{marginBottom:10}},this.props.developerMode&&r.createElement("span",null,r.createElement("label",null," ","Developer JSON Mode:"," ",r.createElement("input",{type:"checkbox",checked:this.props.jsonMode,onChange:this.toggleJsonMode}))," ",r.createElement("button",{type:"button",onClick:this._fixPassageRefs},"Fix passage-refs")," "),!this.props.jsonMode&&r.createElement(u,{deviceType:this.props.previewDevice,onViewportSizeChanged:this.props.onPreviewDeviceChange})),this.props.developerMode&&this.props.jsonMode&&r.createElement("div",null,r.createElement(p,{multiLine:!0,value:this.state.json,onChange:this.changeJSON})),(!this.props.developerMode||!this.props.jsonMode)&&r.createElement(c,{ref:"itemEditor",rendererOnly:this.props.jsonMode,question:this.props.question,answerArea:this.props.answerArea,imageUploader:this.props.imageUploader,onChange:this.handleChange,wasAnswered:this.state.wasAnswered,gradeMessage:this.state.gradeMessage,onCheckAnswer:this.handleCheckAnswer,deviceType:this.props.previewDevice,apiOptions:n,frameSource:this.props.frameSource}),(!this.props.developerMode||!this.props.jsonMode)&&r.createElement(a,{ref:"hintsEditor",hints:this.props.hints,imageUploader:this.props.imageUploader,onChange:this.handleChange,deviceType:this.props.previewDevice,apiOptions:n,frameSource:this.props.frameSource}))},getSaveWarnings:function(){var e=this.refs.itemEditor.getSaveWarnings(),t=this.refs.hintsEditor.getSaveWarnings();return e.concat(t)},serialize:function(e){return this.props.jsonMode?this.state.json:i.extend(this.refs.itemEditor.serialize(e),{hints:this.refs.hintsEditor.serialize(e)})}});e.exports=h},function(e,t,n){"use strict";var r=n(17),i=0,o={},s={};window.iframeDataStore={},window.addEventListener("message",function(e){"string"==typeof e.data?o[e.data]():e.data.id&&s[e.data.id](e.data.height)});var a=r.createClass({displayName:"IframeContentRenderer",propTypes:{content:r.PropTypes.string.isRequired,datasetKey:r.PropTypes.any,datasetValue:r.PropTypes.any,seamless:r.PropTypes.bool},componentDidMount:function(){var e=this;this.iframeID=i,i++,this._prepareFrame(),o[this.iframeID]=function(){e.sendNewData(e._lastData)},s[this.iframeID]=function(t){e._lastHeight=t,e.isMounted()&&e.props.seamless&&(e.refs.container.style.height=t+"px")}},shouldComponentUpdate:function(e){return e.content!==this.props.content||e.datasetValue!==this.props.datasetValue||e.seamless!==this.props.seamless},componentDidUpdate:function(e){this.props.seamless?this.refs.container.style.height=this._lastHeight+"px":this.refs.container.style.height="100%",e.content===this.props.content&&e.datasetValue===this.props.datasetValue||this._prepareFrame()},componentWillUnmount:function(){o[this.iframeID]=null,s[this.iframeID]=null},_prepareFrame:function(){var e=this;this._frame&&this.refs.container.removeChild(this._frame),this._frame=document.createElement("iframe"),this._frame.style.width="100%",this._frame.style.height="100%",this.props.datasetKey&&(this._frame.dataset[this.props.datasetKey]=this.props.datasetValue),this._frame.dataset.id=this.iframeID,this._frame.onload=function(){e._frame.onload=null,setTimeout(function(){e._frame.contentWindow.document.open(),e._frame.contentWindow.document.write(e.props.content),e._frame.contentWindow.document.close()})},this.refs.container.appendChild(this._frame)},sendNewData:function(e){this.isMounted()&&e&&(this._lastData=e,window.iframeDataStore[this.iframeID]=e,this._frame.contentWindow.postMessage(this.iframeID,"*"))},render:function(){return r.createElement("div",{ref:"container",style:{width:"100%",height:"100%"}})}});e.exports=a},function(e,t,n){"use strict";var r=n(17),i=n(18),o=n(43),s=n(44),a=function(e,t,n){var r=!1,o=i(t).reduce(function(e,t){return r||!e.hasOwnProperty(t)?(r=!0,n):e[t]},e);return o},l=function(e){var t=e.question||{},n=t.widgets||{};return i.keys(n)},c=function(e,t){var n=e.hints||[],r=n[t]||{},o=r.widgets||{};return i.keys(o)},p=function(e){return i.isObject(e)&&!("content"in e)},u=r.createClass({displayName:"RevisionDiff",propTypes:{beforeItem:r.PropTypes.object.isRequired,afterItem:r.PropTypes.object.isRequired},render:function(){var e=this.props.beforeItem,t=this.props.afterItem,n=0;i(e).has("hints")&&i(t).has("hints")&&(n=Math.max(e.hints.length,t.hints.length));var u=i.union(l(e),l(t)),h=[{title:"Question",path:["question"]},{title:"Question extras",path:["answerArea"]}].concat(i.times(n,function(e){return{title:"Hint #"+(e+1),path:["hints",e]}})).concat(i.map(u,function(e){return{title:e,path:["question","widgets",e,"options"]}})).concat(i.flatten(i.times(n,function(n){var r=i.union(c(e,n),c(t,n));return i.map(r,function(e){return{title:"Hint #"+(n+1)+"."+e,path:["hints",n,"widgets",e,"options"]}})}))),d=[];return i(h).each(function(n,i){var l,c=n.path,u=a(e,c,""),h=a(t,c,"");p(u)||p(h)?(p(u)||(u={}),p(h)||(h={}),l=r.createElement(s,{key:n.title,title:n.title,before:u,after:h})):l=r.createElement(o,{key:n.title,title:n.title,before:u.content,after:h.content}),d.push(r.createElement("div",{key:i},r.createElement("div",{className:"diff-header"},n.title),r.createElement("div",{className:"diff-header"},n.title),r.createElement("div",{className:"diff-body perseus-clearfix"},l)))}),r.createElement("div",null,d)}});e.exports=u},function(e,t,n){"use strict";var r=n(17),i=n(54),o=n(45),s=o.devices,a=n(35),l=a.iconDesktop,c=a.iconMobilePhone,p=a.iconTablet,u=n(36),h=r.createClass({displayName:"ViewportResizer",propTypes:{deviceType:r.PropTypes.string.isRequired,onViewportSizeChanged:r.PropTypes.func.isRequired},handleChange:function(e){this.props.onViewportSizeChanged(e)},render:function(){var e=r.createElement("span",null,r.createElement(u,c)," ","Phone"),t=r.createElement("span",null,r.createElement(u,p)," ","Tablet"),n=r.createElement("span",null,r.createElement(u,l)," ","Desktop");return r.createElement("span",{className:"viewport-resizer"},"Viewport:"," ",r.createElement(i,{value:this.props.deviceType,allowEmpty:!1,buttons:[{value:s.PHONE,content:e},{value:s.TABLET,content:t},{value:s.DESKTOP,content:n}],onChange:this.handleChange}))}});e.exports=h},function(e,t,n){"use strict";var r=n(17),i=n(45),o=i.devices,s={phone:{width:320,height:480,framedWidth:320},tablet:{width:750,height:920,framedWidth:525},desktop:{width:688,height:600,framedWidth:688}},a=r.createClass({displayName:"DeviceFramer",propTypes:{children:r.PropTypes.element.isRequired,deviceType:r.PropTypes.oneOf([o.PHONE,o.TABLET,o.DESKTOP]).isRequired,nochrome:r.PropTypes.bool},render:function(){var e=this.props.deviceType;if(this.props.nochrome)return r.createElement("div",null,r.createElement("div",{key:"screen",style:{border:"1px solid black",width:s[e].framedWidth}},r.createElement("div",null,this.props.children)));var t=s[e].framedWidth/s[e].width,n={backgroundColor:"white",color:"black",textAlign:"left",width:s[e].width,height:s[e].height,border:"solid 1px #CCC",margin:8,zoom:t};return r.createElement("div",{key:"screen",className:"screen",style:n},this.props.children)}});e.exports=a},function(t,n,r){t.exports=e},function(e,n,r){e.exports=t},function(e,t,r){e.exports=n},function(e,t,n){e.exports=r},function(e,t,n){e.exports=i},function(e,t,n){"use strict";var r=n(18),i="block",o=["default"],s=!1,a="",l={},c={},p={register:function(e,t,n){l[e]=t,c[e]=n},registerMany:function(e){var t=this;e.forEach(function(e){var n=e[0],r=e[1];n&&t.register(n.name,n,r)}),this.validateAlignments()},getWidget:function(e){return r.has(l,e)?l[e].getWidget?l[e].getWidget():l[e].widget:null},getEditor:function(e){return r.has(c,e)?c[e]:null},getTransform:function(e){return r.has(l,e)?l[e].transform||r.identity:null},getVersion:function(e){var t=l[e];return t?l[e].version||{major:0,minor:0}:null},getVersionVector:function(){var e={};return r.each(r.keys(l),function(t){e[t]=p.getVersion(t)}),e},getPublicWidgets:function(){return r.pick(l,r.reject(r.keys(l),function(e){return l[e].hidden}))},isAccessible:function(e){var t=l[e.type].accessible;return"function"==typeof t?t(e.options):!!t},getAllWidgetTypes:function(){return r.keys(l)},upgradeWidgetInfoToLatestVersion:function(e){var t=e.type;if(!r.isString(t))throw new Error("widget type must be a string, but was: "+t);var n=l[t];if(null==n)return e;var i=e.version||{major:0,minor:0},o=n.version||{major:0,minor:0};if(i.major>o.major||i.major===o.major&&i.minor>o.minor)return e;var a=r.clone(e.options)||{},u=n.propUpgrades||{};if(0!==r.keys(a).length)for(var h=i.major+1;h<=o.major;h++)u[h]?a=u[h](a):"undefined"!=typeof console&&console.warn&&console.warn("No upgrade found for widget `"+t+"` from major version `"+(h-1)+"` to major version `"+h+"` found. This is necessary to render this `"+t+"` correctly.");var d=c[t].defaultProps;a=r.extend({},d,a);var f=e.alignment;null!=f&&"default"!==f||(f=p.getSupportedAlignments(t)[0]);var g=e.static;return null==g&&(g=s),r.extend({},e,{version:o,graded:null==e.graded||e.graded,alignment:f,static:g,options:a})},getRendererPropsForWidgetInfo:function(e,t){var n=e.type,i=l[n];if(null==i)return e.options;var o;return(o=e.static?this.getStaticTransform(n)||r.identity:i.transform||r.identity)(e.options,t)},traverseChildWidgets:function(e,t){if(!t)throw new Error("traverseRenderer must be provided, but was not");if(!e||!e.type||!l[e.type])return e;var n=l[e.type],i=e.options;if(n.traverseChildWidgets&&i){var o=n.traverseChildWidgets(i,t);return r.extend({},e,{options:o})}return e},getSupportedAlignments:function(e){var t=l[e];return t&&t.supportedAlignments||o},getDefaultAlignment:function(e){var t,n=l[e];return n?(t=n.getDefaultAlignment?n.getDefaultAlignment():n.defaultAlignment,t||i):i},validAlignments:["block","inline-block","inline","float-left","float-right","full-width"],validateAlignments:function(){r.each(l,function(e){if(e.defaultAlignment&&!r.contains(p.validAlignments,e.defaultAlignment))throw new Error("Widget '"+e.displayName+"' has an invalid defaultAlignment value: "+e.defaultAlignment);if(e.supportedAlignments){var t=r.difference(e.supportedAlignments,p.validAlignments);if(t.length)throw new Error("Widget '"+e.displayName+"' has an invalid value for supportedAlignments: "+t.join(" "))}})},supportsStaticMode:function(e){var t=l[e];return t&&null!=t.staticTransform},getStaticTransform:function(e){var t=l[e];return t&&t.staticTransform},getTracking:function(e){var t=l[e];return t&&t.tracking||a}};e.exports=p},function(e,t,n){"use strict";e.exports=[[n(73),n(80)],[n(74),n(75)],[n(76),n(77)],[n(78),n(79)]]},function(e,t,n){"use strict";var r=function(e){var t=e.skipMathJax,r=$.Deferred();void 0===e.loadExtraWidgets||e.loadExtraWidgets?!function(){var e=n(22);!function(t){var i=n(56);e.registerMany(i),r.resolve()}(n)}():r.resolve();var i=$.Deferred();return t?i.resolve():(MathJax.Hub.Config({messageStyle:"none",skipStartupTypeset:"none","HTML-CSS":{availableFonts:["TeX"],imageFont:null,scale:100,showMathMenu:!1}}),MathJax.Hub.Configured(),MathJax.Hub.Queue(i.resolve)),r.then(function(){return i})};e.exports=r},function(e,t,n){"use strict";var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},i=n(17),o=n(19),s=n(51),a=n(6),l=n(5).Options,c=n(5).ClassNames,p=n(29),u=n(55),h=i.PropTypes.shape({content:i.PropTypes.string,widgets:i.PropTypes.object,images:i.PropTypes.object}),d=i.createClass({displayName:"ArticleRenderer",propTypes:{apiOptions:i.PropTypes.shape({onFocusChange:i.PropTypes.func,isMobile:i.PropTypes.bool}),json:i.PropTypes.oneOfType([h,i.PropTypes.arrayOf(h)]).isRequired,useNewStyles:i.PropTypes.bool},mixins:[u],getDefaultProps:function(){return{apiOptions:{},useNewStyles:!1}},componentDidMount:function(){this._currentFocus=null},shouldComponentUpdate:function(e,t){return e!==this.props||t!==this.state},_handleFocusChange:function(e,t){e?this._setCurrentFocus(e):this._onRendererBlur(t)},_setCurrentFocus:function(e){var t=this,n=this.keypadElement(),r=this._currentFocus;this._currentFocus=e;var i=!1;this._currentFocus&&!function(){var e=t._currentFocus,n=e[0],r=e.slice(1),o=t.refs[n].getInputPaths();i=o.some(function(e){return a.inputPathsEqual(e,r)})}(),null!=this.props.apiOptions.onFocusChange&&this.props.apiOptions.onFocusChange(this._currentFocus,r,i&&n&&o.findDOMNode(n)),n&&(i?n.activate():n.dismiss())},_onRendererBlur:function(e){var t=this,n=this._currentFocus;a.inputPathsEqual(e,n)&&setTimeout(function(){a.inputPathsEqual(t._currentFocus,n)&&t._setCurrentFocus(null)})},blur:function(){if(this._currentFocus){var e=this._currentFocus,t=e[0],n=e.slice(1);this.refs[t].blurPath(n)}},_sections:function(){return Array.isArray(this.props.json)?this.props.json:[this.props.json]},render:function(){var e,t=this,n=r({},l.defaults,this.props.apiOptions,{isArticle:!0}),o=s((e={"framework-perseus":!0,"perseus-article":!0,"bibliotron-article":this.props.useNewStyles},e[c.MOBILE]=n.isMobile,e)),a=this._sections().map(function(e,o){var s="section-"+o;return i.createElement("div",{key:o,className:"clearfix"},i.createElement(p,r({},e,{ref:s,key:o,key_:o,keypadElement:t.keypadElement(),apiOptions:r({},n,{onFocusChange:function(e,n){t._handleFocusChange(e&&[s].concat(e),n&&[s].concat(n))}})})))});return i.createElement("div",{className:o},a)}});e.exports=d},function(e,t,n){"use strict";var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},i=n(17),o=n(19),s=n(18),a=n(5).Options,l=n(28),c=n(29),p=n(55),u=n(6),h=n(81),d=h.mapObject,f=i.PropTypes,g=i.createClass({displayName:"ItemRenderer",propTypes:{apiOptions:f.shape({interactionCallback:f.func,onFocusChange:f.func,setDrawingAreaAvailable:f.func}),controlPeripherals:f.bool,hintsAreaSelector:f.string,initialHintsVisible:f.number,item:f.shape({answerArea:f.shape({calculator:f.bool,chi2Table:f.bool,periodicTable:f.bool,tTable:f.bool,zTable:f.bool}),hints:f.arrayOf(f.object),question:f.object}).isRequired,onShowCalculator:f.func,onShowChi2Table:f.func,onShowPeriodicTable:f.func,onShowTTable:f.func,onShowZTable:f.func,problemNum:f.number,savedState:f.any,workAreaSelector:f.string},mixins:[p],getDefaultProps:function(){return{apiOptions:{},controlPeripherals:!0,hintsAreaSelector:"#hintsarea",initialHintsVisible:0,workAreaSelector:"#workarea"}},getInitialState:function(){return{hintsVisible:this.props.initialHintsVisible,questionCompleted:!1,questionHighlightedWidgets:[]}},componentDidMount:function(){this.props.controlPeripherals&&this.props.apiOptions.setDrawingAreaAvailable&&this.props.apiOptions.setDrawingAreaAvailable(!0),this._currentFocus=null,this.update()},componentWillReceiveProps:function(e){this.setState({questionHighlightedWidgets:[]})},componentDidUpdate:function(){this.update()},componentWillUnmount:function(){if(o.unmountComponentAtNode(document.querySelector(this.props.workAreaSelector)),o.unmountComponentAtNode(document.querySelector(this.props.hintsAreaSelector)),this.props.controlPeripherals){var e=this.props.item.answerArea||{};e.calculator&&$("#calculator").hide(),e.periodicTable&&$(".periodic-table-info-box").hide(),e.zTable&&$(".z-table-info-box").hide(),e.tTable&&$(".t-table-info-box").hide(),e.chi2Table&&$(".chi2-table-info-box").hide()}},update:function(){var e=r({},a.defaults,this.props.apiOptions,{onFocusChange:this._handleFocusChange});this.questionRenderer=o.render(i.createElement(c,r({keypadElement:this.keypadElement(),problemNum:this.props.problemNum,onInteractWithWidget:this.handleInteractWithWidget,highlightedWidgets:this.state.questionHighlightedWidgets,apiOptions:e,questionCompleted:this.state.questionCompleted,savedState:this.props.savedState},this.props.item.question)),document.querySelector(this.props.workAreaSelector)),this.hintsRenderer=o.render(i.createElement(l,{hints:this.props.item.hints,hintsVisible:this.state.hintsVisible,apiOptions:e}),document.querySelector(this.props.hintsAreaSelector));var t=this.props.item.answerArea||{};if(this.props.controlPeripherals?($("#calculator").toggle(t.calculator||!1),$(".periodic-table-info-box").toggle(t.periodicTable||!1),$(".z-table-info-box").toggle(t.zTable||!1),$(".t-table-info-box").toggle(t.tTable||!1),$(".chi2-table-info-box").toggle(t.chi2Table||!1)):(t.calculator&&this.props.onShowCalculator&&this.props.onShowCalculator(),t.periodicTable&&this.props.onShowPeriodicTable&&this.props.onShowPeriodicTable(),t.zTable&&this.props.onShowZTable&&this.props.onShowZTable(),t.tTable&&this.props.onShowTTable&&this.props.onShowTTable(),t.chi2Table&&this.props.onShowChi2Table&&this.props.onShowChi2Table()),e.answerableCallback){var n=0===this.questionRenderer.emptyWidgets().length;e.answerableCallback(n)}},_handleFocusChange:function(e,t){null!=e?this._setCurrentFocus(e):this._onRendererBlur(t)},_setCurrentFocus:function(e){var t=this,n=this.keypadElement(),r=this._currentFocus;this._currentFocus=e;var i=this.getInputPaths(),s=this._currentFocus&&i.some(function(e){return u.inputPathsEqual(e,t._currentFocus)});null!=this.props.apiOptions.onFocusChange&&this.props.apiOptions.onFocusChange(this._currentFocus,r,s&&n&&o.findDOMNode(n)),n&&(s?n.activate():n.dismiss())},_onRendererBlur:function(e){var t=this,n=this._currentFocus;u.inputPathsEqual(e,n)&&setTimeout(function(){u.inputPathsEqual(t._currentFocus,n)&&t._setCurrentFocus(null)})},_setWidgetProps:function(e,t,n){this.questionRenderer._setWidgetProps(e,t,n)},_handleAPICall:function(e,t){var n=s.rest(arguments),r=this.questionRenderer;return r[e].apply(r,n)},setInputValue:function(e,t,n){return this._handleAPICall("setInputValue",e,t,n)},focusPath:function(e){return this._handleAPICall("focusPath",e)},blurPath:function(e){return this._handleAPICall("blurPath",e)},getDOMNodeForPath:function(e){return this._handleAPICall("getDOMNodeForPath",e)},getGrammarTypeForPath:function(e){return this._handleAPICall("getGrammarTypeForPath",e)},getInputPaths:function(){var e=this.questionRenderer.getInputPaths();return e},handleInteractWithWidget:function(e){var t=s.difference(this.state.questionHighlightedWidgets,[e]);this.setState({questionCompleted:!1,questionHighlightedWidgets:t}),this.props.apiOptions.interactionCallback&&this.props.apiOptions.interactionCallback()},focus:function(){return this.questionRenderer.focus()},blur:function(){this._currentFocus&&this.blurPath(this._currentFocus)},showHint:function(){this.state.hintsVisible<this.getNumHints()&&this.setState({hintsVisible:this.state.hintsVisible+1})},getNumHints:function(){return this.props.item.hints.length},scoreInput:function(){var e=this.questionRenderer.guessAndScore(),t=e[0],n=e[1],r=[t,[]],i=u.keScoreFromPerseusScore(n,r),o=this.questionRenderer.emptyWidgets();return this.setState({questionCompleted:i.correct,questionHighlightedWidgets:o}),i},getWidgetIds:function(){return this.questionRenderer.getWidgetIds()},scoreWidgets:function(){var e=this.questionRenderer.scoreWidgets(),t=this.questionRenderer.getUserInputForWidgets();return d(e,function(e,n){return u.keScoreFromPerseusScore(e,t[n])})},getSerializedState:function(){return{question:this.questionRenderer.getSerializedState(),hints:this.hintsRenderer.getSerializedState()}},restoreSerializedState:function(e,t){var n=2,r=function(){--n,t&&0===n&&t()};this.questionRenderer.restoreSerializedState(e.question,r),this.hintsRenderer.restoreSerializedState(e.hints,r)},render:function(){return i.createElement("div",null)}});e.exports=g},function(e,t,n){"use strict";var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},i=n(17),o=n(19),s=n(18),a=n(52),l=a.StyleSheet,c=a.css,p=n(5).Options,u=n(28),h=n(55),d=n(29),f=n(6),g=n(81),m=g.mapObject,v=i.PropTypes,y=i.createClass({displayName:"ItemRenderer",propTypes:{apiOptions:v.any,hintsVisible:v.number,item:v.shape({answerArea:v.shape({calculator:v.bool,chi2Table:v.bool,periodicTable:v.bool,tTable:v.bool,zTable:v.bool}),hints:v.arrayOf(v.object),question:v.object}).isRequired,problemNum:v.number,savedState:v.any},mixins:[h],getDefaultProps:function(){return{apiOptions:{}}},getInitialState:function(){return{questionCompleted:!1,questionHighlightedWidgets:[]}},componentDidMount:function(){this._currentFocus=null},componentWillReceiveProps:function(e){this.setState({questionHighlightedWidgets:[]})},componentDidUpdate:function(){if(this.props.apiOptions.answerableCallback){var e=0===this.questionRenderer.emptyWidgets().length;this.props.apiOptions.answerableCallback(e)}},_handleFocusChange:function(e,t){null!=e?this._setCurrentFocus(e):this._onRendererBlur(t)},_setCurrentFocus:function(e){var t=this,n=this.keypadElement(),r=this._currentFocus;this._currentFocus=e;var i=this.getInputPaths(),s=this._currentFocus&&i.some(function(e){return f.inputPathsEqual(e,t._currentFocus)});null!=this.props.apiOptions.onFocusChange&&this.props.apiOptions.onFocusChange(this._currentFocus,r,s&&n&&o.findDOMNode(n)),n&&(s?n.activate():n.dismiss())},_onRendererBlur:function(e){var t=this,n=this._currentFocus;s.isEqual(e,n)&&s.defer(function(){s.isEqual(t._currentFocus,n)&&t._setCurrentFocus(null)})},_setWidgetProps:function(e,t,n){this.questionRenderer._setWidgetProps(e,t,n)},_handleAPICall:function(e,t){var n=s.rest(arguments),r=this.questionRenderer;return r[e].apply(r,n)},setInputValue:function(e,t,n){return this._handleAPICall("setInputValue",e,t,n)},focusPath:function(e){return this._handleAPICall("focusPath",e)},blurPath:function(e){return this._handleAPICall("blurPath",e)},getDOMNodeForPath:function(e){return this._handleAPICall("getDOMNodeForPath",e)},getGrammarTypeForPath:function(e){return this._handleAPICall("getGrammarTypeForPath",e)},getInputPaths:function(){var e=this.questionRenderer.getInputPaths();return e},handleInteractWithWidget:function(e){var t=s.difference(this.state.questionHighlightedWidgets,[e]);this.setState({questionCompleted:!1,questionHighlightedWidgets:t}),this.props.apiOptions.interactionCallback&&this.props.apiOptions.interactionCallback()},focus:function(){return this.questionRenderer.focus()},blur:function(){this._currentFocus&&this.blurPath(this._currentFocus)},getNumHints:function(){return this.props.item.hints.length},scoreInput:function(){var e=this.questionRenderer.guessAndScore(),t=e[0],n=e[1],r=[t,[]],i=f.keScoreFromPerseusScore(n,r),o=this.questionRenderer.emptyWidgets();return this.setState({questionCompleted:i.correct,questionHighlightedWidgets:o}),i},getWidgetIds:function(){return this.questionRenderer.getWidgetIds()},scoreWidgets:function(){var e=this.questionRenderer.scoreWidgets(),t=this.questionRenderer.getUserInputForWidgets();return m(e,function(e,n){return f.keScoreFromPerseusScore(e,t[n])})},getSerializedState:function(){return{question:this.questionRenderer.getSerializedState(),hints:this.hintsRenderer.getSerializedState()}},restoreSerializedState:function(e,t){var n=2,r=function(){--n,t&&0===n&&t()};this.questionRenderer.restoreSerializedState(e.question,r),this.hintsRenderer.restoreSerializedState(e.hints,r)},render:function(){var e=this,t=r({},p.defaults,this.props.apiOptions,{onFocusChange:this._handleFocusChange}),n=i.createElement(d,r({keypadElement:this.keypadElement(),problemNum:this.props.problemNum,onInteractWithWidget:this.handleInteractWithWidget,highlightedWidgets:this.state.questionHighlightedWidgets,apiOptions:t,questionCompleted:this.state.questionCompleted,savedState:this.props.savedState,ref:function(t){return e.questionRenderer=t}},this.props.item.question)),o=i.createElement(u,{hints:this.props.item.hints,hintsVisible:this.props.hintsVisible,apiOptions:t,ref:function(t){return e.hintsRenderer=t}});return i.createElement("div",null,i.createElement("div",null,n),i.createElement("div",{className:!t.isMobile&&c(b.hintsContainer)},o))}}),b=l.create({hintsContainer:{marginLeft:50}});e.exports=y},function(e,t,n){"use strict";var r,i,o,s=n(17),a=n(19),l=n(52),c=l.StyleSheet,p=l.css,u=n(51),h=n(18),d=window.i18n,f=n(57),g=n(32),m=n(50),v=n(82),y=n(83),b=n(84),E=b.baseUnitPx,T=b.hintBorderWidth,w=b.kaGreen,x=b.gray85,C=b.gray17,S=s.createClass({displayName:"HintsRenderer",propTypes:{className:s.PropTypes.string,hints:s.PropTypes.arrayOf(s.PropTypes.any),hintsVisible:s.PropTypes.number},mixins:[m],componentDidMount:function(){this._cacheHintImages()},componentDidUpdate:function(e,t){if(h.isEqual(e.hints,this.props.hints)&&e.hintsVisible===this.props.hintsVisible||this._cacheHintImages(),e.hintsVisible<this.props.hintsVisible){var n=this.props.hintsVisible-1;a.findDOMNode(this.refs["hintRenderer"+n]).focus()}},_hintsVisible:function(){return null==this.props.hintsVisible||this.props.hintsVisible===-1?this.props.hints.length:this.props.hintsVisible},_cacheImagesInHint:function(e){h.each(e.images,function(e,t){var n=new Image;n.src=g.getRealImageUrl(t)})},_cacheHintImages:function(){this._hintsVisible()>0?h.each(this.props.hints,this._cacheImagesInHint):this.props.hints.length>0&&this._cacheImagesInHint(this.props.hints[0])},getSerializedState:function(){var e=this;return h.times(this._hintsVisible(),function(t){return e.refs["hintRenderer"+t].getSerializedState()})},restoreSerializedState:function(e,t){var n=this,r=1,i=function(){--r,t&&0===r&&t()};h.each(e,function(e,t){var o=n.refs["hintRenderer"+t];o&&(++r,o.restoreSerializedState(e,i))}),i()},render:function(){var e=this,t=this.getApiOptions(),n=this._hintsVisible(),r=[];this.props.hints.slice(0,n).forEach(function(i,o){var a=o===e.props.hints.length-1&&!/\*\*/.test(i.content),l=o===n-1,c=s.createElement(f,{
lastHint:a,lastRendered:l,hint:i,pos:o,totalHints:e.props.hints.length,ref:"hintRenderer"+o,key:"hintRenderer"+o,apiOptions:t});i.replace&&r.length>0?r[r.length-1]=c:r.push(c)});var i=t.getAnotherHint&&n>0&&n<this.props.hints.length,o=u(this.props.className,t.isMobile&&n>0&&p(k.mobileHintStylesHintsRenderer));return s.createElement("div",{className:o},t.isMobile&&n>0&&s.createElement("div",{className:p(k.mobileHintStylesHintTitle,y.responsiveLabel)},d._("Hints")),r,i&&s.createElement("button",{rel:"button",className:p(k.linkButton,k.getAnotherHintButton,t.isMobile&&k.mobileHintStylesGetAnotherHintButton),onClick:function(e){e.preventDefault(),e.stopPropagation(),t.getAnotherHint()}},s.createElement("span",{className:p(k.plusText,t.isMobile&&k.mobileHintStylesPlusText)},"+"),s.createElement("span",{className:p(k.getAnotherHintText)},d._("Get another hint")," (",n,"/",this.props.hints.length,")")))}}),P=E+T,k=c.create({rendererMargins:{marginTop:E},linkButton:{cursor:"pointer",border:"none",backgroundColor:"transparent",fontSize:"100%",fontFamily:"inherit",fontWeight:"bold",color:w,padding:0,position:"relative"},plusText:{fontSize:20,position:"absolute",top:-3,left:0},getAnotherHintText:{marginLeft:16},mobileHintStylesHintsRenderer:{marginTop:4*E,border:"solid "+x,borderWidth:"1px 0 0 0",position:"relative",":before":{content:'""',display:"table",clear:"both"},":after":{content:'""',display:"table",clear:"both"}},mobileHintStylesHintTitle:(r={fontFamily:"inherit",fontStyle:"normal",fontWeight:"bold",color:C,paddingTop:E,paddingBottom:1.5*E},r[v.lgOrSmaller]={paddingLeft:0},r[v.smOrSmaller]={paddingLeft:P},r),getAnotherHintButton:{marginTop:1.5*E},mobileHintStylesGetAnotherHintButton:(i={},i[v.lgOrSmaller]={paddingLeft:0},i[v.smOrSmaller]={paddingLeft:P},i),mobileHintStylesPlusText:(o={},o[v.lgOrSmaller]={left:0},o[v.smOrSmaller]={left:P},o)});e.exports=S},function(e,t,n){"use strict";var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol?"symbol":typeof e},i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},o=n(21),s=n(17),a=n(19),l=n(18),c=n(51),p=n(58),u=n(34),h=n(59),d=n(32),f=n(60),g=n(61),m=n(22),v=n(6),y=n(50),b=n(5).ClassNames,E=n(62),T=n(63),w=n(47),x=n(162).propTypes.keypadElementPropType,C=n(81),S=C.mapObject,P=C.mapObjectFromArray,k={"\\a":"","\\b":"\b","\\t":"\t","\\n":"\n","\\v":"\v","\\f":"\f","\\r":"\r","\\\\":"\\"},_=/\\a|\\b|\\t|\\n|\\v|\\f|\\r|\\\\/g,M=/\S/,O=/(web\+graphie|https):\/\/[^\s]*/,N=function(){};"undefined"!=typeof KA&&"en-pt"===KA.language&&(window.PerseusTranslationComponents=[],KA.jipt_dom_insert_checks||(KA.jipt_dom_insert_checks=[]),KA.jipt_dom_insert_checks.push(function(e,t,n){var r=o(t),i=r.data("perseus-component-index"),s=r.data("perseus-paragraph-index");if(t&&"undefined"!=typeof i){var a=window.PerseusTranslationComponents[i];return!!a&&(e=e.replace(_,function(e){return k[e]}),a.replaceJiptContent(e,s),!1)}return e}));var I=["content","problemNum","widgets"],A=function(e,t){return null===e||null===t?e===t:l.every(e,function(e,n){return l.isEqual(e,t[n])})},R=function(e,t,n,r){e?(this._tracked=!1,this.trackApi=e,this.widgetType=t,this.widgetID=n,this.setting=r,this.track=this._track.bind(this)):this.track=this._noop};R.prototype._track=function(e){this._tracked&&!this.setting||(this._tracked=!0,this.trackApi(i({type:this.widgetType,id:this.widgetID},e)))},R.prototype._noop=function(){};var D=s.createClass({displayName:"Renderer",propTypes:{alwaysUpdate:s.PropTypes.bool,highlightedWidgets:s.PropTypes.arrayOf(s.PropTypes.any),ignoreMissingWidgets:s.PropTypes.bool,images:s.PropTypes.any,interWidgets:s.PropTypes.func,keypadElement:x,onInteractWithWidget:s.PropTypes.func,onRender:s.PropTypes.func,problemNum:s.PropTypes.number,questionCompleted:s.PropTypes.bool,reviewMode:s.PropTypes.bool},mixins:[y],getDefaultProps:function(){return{content:"",widgets:{},images:{},ignoreMissingWidgets:!0,highlightedWidgets:[],questionCompleted:!1,onRender:N,onInteractWithWidget:function(){},interWidgets:function(){return null},alwaysUpdate:!1,reviewMode:!1}},getInitialState:function(){return l.extend({jiptContent:null},this._getInitialWidgetState())},componentDidMount:function(){this.handleRender({}),this._currentFocus=null,this._rootNode=a.findDOMNode(this),this._isMounted=!0},componentWillReceiveProps:function(e){l.isEqual(l.pick(this.props,I),l.pick(e,I))||this.setState(this._getInitialWidgetState(e))},shouldComponentUpdate:function(e,t){if(this.props.alwaysUpdate)return!0;var n=!l.isEqual(this.state,t),r=!l.isEqual(this.props,e);return r||n},componentWillUpdate:function(e,t){var n=this.shouldRenderJiptPlaceholder(this.props,this.state),r=this.shouldRenderJiptPlaceholder(e,t),i=this.getContent(this.props,this.state),o=this.getContent(e,t),s=this.props.highlightedWidgets,a=e.highlightedWidgets;this.reuseMarkdown=!n&&!r&&i===o&&s===a},componentDidUpdate:function(e,t){var n=this;this.handleRender(e),l.each(this.widgetIds,function(e){var t=n.refs["container:"+e];t.replaceWidgetProps(n.getWidgetProps(e))})},componentWillUnmount:function(){null!=this.translationIndex&&(window.PerseusTranslationComponents[this.translationIndex]=null),this._isMounted=!1},_getInitialWidgetState:function(e){e=e||this.props;var t=this._getAllWidgetsInfo(e);return{widgetInfo:t,widgetProps:this._getAllWidgetsStartProps(t,e)}},_getAllWidgetsInfo:function(e){return e=e||this.props,S(e.widgets,function(e,t){if(!e.type||!e.alignment){var n={};e.type||(n.type=t.split(" ")[0]),e.alignment||(n.alignment="default"),e=l.extend({},e,n)}return m.upgradeWidgetInfoToLatestVersion(e)})},_getAllWidgetsStartProps:function(e,t){return S(e,function(e){return m.getRendererPropsForWidgetInfo(e,t.problemNum)})},_getDefaultWidgetInfo:function(e){var t=v.rTypeFromWidgetId.exec(e);return null==t?{}:{type:t[1],graded:!0,options:{}}},_getWidgetInfo:function(e){return this.state.widgetInfo[e]||this._getDefaultWidgetInfo(e)},renderWidget:function(e,t,n){var r=this.state.widgetInfo[t];if(r&&"full-width"===r.alignment&&(n.foundFullWidth=!0),r||this.props.ignoreMissingWidgets){var i=r&&r.type||e,o=l.contains(this.props.highlightedWidgets,t);return s.createElement(g,{ref:"container:"+t,key:"container:"+t,type:i,initialProps:this.getWidgetProps(t),shouldHighlight:o})}return null},getWidgetProps:function(e){var t=this,n=this.getApiOptions(),r=this.state.widgetProps[e]||{},o=null,s=this.state.widgetInfo[e];this.props.reviewMode&&s&&(o=s.options),this._interactionTrackers||(this._interactionTrackers={});var a=this._interactionTrackers[e];return a||(a=this._interactionTrackers[e]=new R(n.trackInteraction,s&&s.type,e,m.getTracking(s&&s.type))),i({},r,{ref:e,widgetId:e,alignment:s&&s.alignment,static:s&&s.static,problemNum:this.props.problemNum,apiOptions:this.getApiOptions(this.props),keypadElement:this.props.keypadElement,questionCompleted:this.props.questionCompleted,onFocus:l.partial(this._onWidgetFocus,e),onBlur:l.partial(this._onWidgetBlur,e),interWidgets:this.interWidgets,reviewModeRubric:o,onChange:function(n,r){t._setWidgetProps(e,n,r)},trackInteraction:a.track})},getSerializedState:function(){var e=this;return S(this.state.widgetProps,function(t,n){var r=e.getWidgetInstance(n);return r&&r.getSerializedState?r.getSerializedState():t})},restoreSerializedState:function(e,t){var n=this,r=l.keys(e),i=l.keys(this.state.widgetProps);if(r.length!==i.length||l.intersection(r,i).length!==r.length)return void console.error("Refusing to restore bad serialized state:",e,"Current props:",this.state.widgetProps);var o=1,s=function(){--o,t&&0===o&&t()};this.setState({widgetProps:S(e,function(e,t){var r=n.getWidgetInstance(t);if(r&&r.restoreSerializedState){++o;var i=r.restoreSerializedState(e,s);return l.extend({},n.state.widgetProps[t],i)}return e})},s)},interWidgets:function(e){var t,n=this;if("string"==typeof e)if(e.indexOf(" ")!==-1){var r=e;t=function(e,t){return e===r}}else{var i=e;t=function(e,t){return t.type===i}}else t=e;var o=this.widgetIds.filter(function(e){var r=n._getWidgetInfo(e),i=n.getWidgetInstance(e);return t(e,r,i)}).map(this.getWidgetInstance),s=this.props.interWidgets(e,o);return s?s:o},getWidgetInstance:function(e){var t=this.refs["container:"+e];return t?t.getWidget():null},_onWidgetFocus:function(e,t){if(void 0===t)t=[];else if(!l.isArray(t))throw new Error("widget props.onFocus focusPath must be an Array, but was"+JSON.stringify(t));this._setCurrentFocus([e].concat(t))},_onWidgetBlur:function(e,t){var n=this,r=this._currentFocus,i=[e].concat(t);l.isEqual(i,r)&&l.defer(function(){l.isEqual(n._currentFocus,r)&&n._setCurrentFocus(null)})},getContent:function(e,t){return t.jiptContent||e.content},shouldRenderJiptPlaceholder:function(e,t){return"undefined"!=typeof KA&&"en-pt"===KA.language&&null==t.jiptContent&&e.content.indexOf("crwdns")!==-1},replaceJiptContent:function(e,t){if(null==t)this.setState({jiptContent:e});else{/\S\n\s*\n\S/.test(e)&&(e="$\\large{\\red{\\text{Please translate each paragraph to a single paragraph.}}}$"),/^\s*$/.test(e)&&(e="$\\large{\\red{\\text{Translated paragraph is currently empty}}}$");var n=this.getContent(this.props,this.state),r=p.parseToArray(n);r[t]=e,this.setState({jiptContent:p.joinFromArray(r)})}},outputMarkdown:function(e,t){if(l.isArray(e)){for(var n=t.key,r=[],i=!1,o=0;o<e.length;o++){t.key=o,t.paragraphIndex=o;var a=this.outputMarkdown(e[o],t),p="string"==typeof a;p&&i?r[r.length-1]+=a:r.push(a),i=p}return t.key=n,r}this._foundTextNodes=!1,t.foundFullWidth=!1;var u,d=this.outputNested(e,t);return u=null!=this.translationIndex?null:c({"perseus-paragraph-centered":!this._foundTextNodes,"perseus-paragraph-full-width":t.foundFullWidth&&1===e.content.length}),s.createElement(h,{key:t.key,className:u,translationIndex:this.translationIndex,paragraphIndex:t.paragraphIndex},d)},outputNested:function(e,t){if(l.isArray(e)){for(var n=t.key,r=[],i=!1,o=0;o<e.length;o++){t.key=o;var s=this.outputNested(e[o],t),a="string"==typeof s;a&&i?r[r.length-1]+=s:r.push(s),i=a}return t.key=n,r}return this.outputNode(e,this.outputNested,t)},outputNode:function(e,t,n){var o=this,a=this.getApiOptions(),c=a.imagePlaceholder;if("widget"===e.type){var p=a.widgetPlaceholder;return p?p:(this._foundTextNodes=!0,l.contains(this.widgetIds,e.id)?s.createElement("span",{key:n.key,className:"renderer-widget-error"},"Widget [[","☃"," ",e.id,"]] already exists."):(this.widgetIds.push(e.id),this.renderWidget(e.widgetType,e.id,n)))}if("blockMath"!==e.type){if("math"===e.type){var h=e.content.replace(/\{align[*]?\}/g,"{aligned}");return s.createElement("span",{key:n.key,style:{whiteSpace:"nowrap"}},s.createElement("span",null),s.createElement(f,{onRender:this.props.onRender},h),s.createElement("span",null))}if("image"===e.type){if(c)return c;var g=l.has(this.props.images,e.target)?this.props.images[e.target]:null,m=!n.inTable;return s.createElement(d,i({key:n.key,src:u.sanitizeUrl(e.target),alt:e.alt,title:e.title,responsive:m,onUpdate:this.props.onRender,zoomToFullSizeOnMobile:a.isMobile&&a.isArticle},g))}if("columns"===e.type)return this._isTwoColumn=!0,u.ruleOutput(e,t,n);if("text"===e.type)return M.test(e.content)&&(this._foundTextNodes=!0),c&&O.test(e.content)?c:e.content;if("table"===e.type||"titledTable"===e.type){n.inTable=!0;var v=u.ruleOutput(e,t,n);if(n.inTable=!1,!a.isMobile)return v;var y=16,b={marginLeft:-y,marginRight:-y},x={paddingLeft:0,paddingRight:0},C=s.createElement("div",{style:i({},x,{overflowX:"auto"})},s.createElement(E,{animateHeight:!0},v));return s.createElement("div",{style:b},C)}return u.ruleOutput(e,t,n)}var S=function(){var t=new T,r=function(e){if(o.props.onRender&&o.props.onRender(e),a.isMobile&&e){var n=e.querySelector(".katex"),r=e.querySelector('script[type="math/tex"]')||e.querySelector(".MathJax");if(n)t.resolve();else{if(!r)throw new Error("No math present in Renderer");t.resolve()}}},l=s.createElement(f,{onRender:r},w(e.content)),c={overflowX:"auto",overflowY:"hidden",paddingTop:10,paddingBottom:10,marginTop:-10,marginBottom:-10};if(a.isMobile){var p=16,u={marginLeft:-p,marginRight:-p},h={paddingLeft:p,paddingRight:p},d=function(e,t){var n=e.querySelector(".katex-html")||e.querySelector(".MathJax"),r={width:n.offsetWidth,height:n.offsetHeight};return{width:Math.max(t.width,r.width),height:Math.max(t.height,r.height)}};return{v:s.createElement("div",{key:n.key,className:"perseus-block-math",style:u},s.createElement("div",{className:"perseus-block-math-inner",style:i({},c,h)},s.createElement(E,{readyToMeasureDeferred:t,computeChildBounds:d},l)))}}return{v:s.createElement("div",{key:n.key,className:"perseus-block-math"},s.createElement("div",{className:"perseus-block-math-inner",style:c},l))}}();if("object"===("undefined"==typeof S?"undefined":r(S)))return S.v},handleRender:function(e){var t=this.props.onRender,n=e.onRender;if(t!==N||n!==N){var r=o(a.findDOMNode(this)).find("img");n!==N&&r.off("load",n),t!==N&&r.on("load",t)}t()},_setCurrentFocus:function(e){var t=this.getApiOptions();if(!A(e,this._currentFocus)){var n=this._currentFocus;n&&this.blurPath(n),this._currentFocus=e,null!=t.onFocusChange&&t.onFocusChange(this._currentFocus,n)}},focus:function(){for(var e,t,n=0;n<this.widgetIds.length;n++){var r=this.widgetIds[n],i=this.getWidgetInstance(r),o=i&&i.focus&&i.focus();if(o){e=r,t=o;break}}if(e){var s;return s=l.isObject(t)?[e].concat(t.path||[]):[e],this._setCurrentFocus(s),!0}},getDOMNodeForPath:function(e){var t=l.first(e),n=l.rest(e),r=this.getWidgetInstance(t),i=r.getDOMNodeForPath;return i?i(n):0===n.length?a.findDOMNode(r):void 0},getGrammarTypeForPath:function(e){var t=l.first(e),n=l.rest(e),r=this.getWidgetInstance(t);return r.getGrammarTypeForPath(n)},getInputPaths:function(){var e=this,t=[];return l.each(this.widgetIds,function(n){var r=e.getWidgetInstance(n);if(r.getInputPaths){var i=r.getInputPaths();l.each(i,function(e){var r=[n].concat(e);t.push(r)})}}),t},focusPath:function(e){if(!l.isEqual(this._currentFocus,e)){this._currentFocus&&this.blurPath(this._currentFocus);var t=l.first(e),n=l.rest(e),r=this.getWidgetInstance(t).focusInputPath;r&&r(n)}},blurPath:function(e){if(l.isEqual(this._currentFocus,e)){var t=l.first(e),n=l.rest(e),r=this.getWidgetInstance(t);if(r){var i=this.getWidgetInstance(t).blurInputPath;i&&i(n)}}},blur:function(){this._currentFocus&&this.blurPath(this._currentFocus)},serialize:function(){var e={};return l.each(this.state.widgetInfo,function(t,n){var r=this.getWidgetInstance(n),i=r.serialize();l.isEmpty(i)||(e[n]=i)},this),e},emptyWidgets:function(){var e=this;return l.filter(this.widgetIds,function(t){var n=e._getWidgetInfo(t),r=e.getWidgetInstance(t).simpleValidate(n.options,null);return v.scoreIsEmpty(r)})},_setWidgetProps:function(e,t,n){var r=this,i=l.clone(this.state.widgetProps);i[e]=l.extend({},i[e],t),this.setState({widgetProps:i},function(){var t=n&&n();r.props.onInteractWithWidget(e),t!==!1&&r._setCurrentFocus([e])})},setInputValue:function(e,t,n){var r=l.first(e),i=l.rest(e),o=this.getWidgetInstance(r);o.setInputValue(i,t,n)},getUserInput:function(){var e=this;return l.map(this.widgetIds,function(t){return e.getWidgetInstance(t).getUserInput()})},getWidgetIds:function(){return this.widgetIds},getAllWidgetIds:function(){var e=this;return l.map(this.getWidgetIds(),function(t){var n="group";return t.substring(0,n.length)===n&&e.getWidgetInstance(t)?{id:t,children:e.getWidgetInstance(t).getRenderer().getAllWidgetIds()}:{id:t,children:[]}})},getUserInputForWidgets:function(){var e=this;return P(this.widgetIds,function(t){return e.getWidgetInstance(t).getUserInput()})},scoreWidgets:function(){var e=this,t=this.state.widgetInfo,n=this.getApiOptions().onInputError||function(){},r=l.filter(this.widgetIds,function(e){var n=t[e];return null==n.graded||n.graded}),i={};return l.each(r,function(r){var o=t[r],s=e.getWidgetInstance(r);s&&(i[r]=s.simpleValidate(o.options,n))}),i},score:function(){return l.reduce(this.scoreWidgets(),v.combineScores,v.noScore)},guessAndScore:function(){var e=this.getUserInput(),t=this.score();return[e,t]},examples:function e(){var t=this.widgetIds,e=l.compact(l.map(t,function(e){return e.examples?e.examples():null}));if(!e.length)return null;var n=l.all(e,function(t){return l.isEqual(e[0],t)});return n?e[0]:null},render:function(){var e,t=this.getApiOptions();if(this.reuseMarkdown)return this.lastRenderedMarkdown;var n=this.getContent(this.props,this.state);if(this.widgetIds=[],this.shouldRenderJiptPlaceholder(this.props,this.state)&&(this.translationIndex||(this.translationIndex=window.PerseusTranslationComponents.push(this)-1),!t.isArticle))return s.createElement("div",{"data-perseus-component-index":this.translationIndex},n);this._isTwoColumn=!1;var r=u.parse(n,{isJipt:null!=this.translationIndex}),i=this.outputMarkdown(r,{baseElements:t.baseElements}),o=c((e={},e[b.RENDERER]=!0,e[b.RESPONSIVE_RENDERER]=!0,e[b.TWO_COLUMN_RENDERER]=this._isTwoColumn,e));return this.lastRenderedMarkdown=s.createElement("div",{className:o},i),this.lastRenderedMarkdown}});e.exports=D},function(e,t,n){"use strict";var r=n(23),i=n(56);e.exports=r.concat(i)},function(e,t,n){"use strict";var r=n(17),i=n(64),o=[],s=r.createClass({displayName:"StubTagEditor",propTypes:{value:r.PropTypes.arrayOf(r.PropTypes.string),onChange:r.PropTypes.func.isRequired},getDefaultProps:function(){return{value:o}},render:function(){return r.createElement("div",null,r.createElement("div",{style:{fontSize:14}},"Tags:"),r.createElement(i,{options:this.props.value||o,layout:"vertical",onChange:this.props.onChange}))}});e.exports=s},function(e,t,n){"use strict";function r(e){return S.test(e)}function i(e){return/\.(jpg|jpeg)$/i.test(e)}function o(e){var t="http:"===window.location.protocol?"http:":"https:";return e.replace(S,t)}function s(e){return o(e)+".svg"}function a(e){return o(e)+"-data.json"}function l(){return"undefined"!=typeof KA&&"en"!==KA.language}function c(){return"undefined"!=typeof KA&&"en-pt"===KA.language}function p(e){if("undefined"!=typeof KA){var t=o(e).split(O),n=t[0],r=t[1];return n+"/"+KA.language+"/"+r+"-data.json"}return a(e)}function u(e){var t=e.match(P);return t&&t[1]}function h(){return f.DOM.span({style:{background:"url(/images/throbber.gif) no-repeat",backgroundPosition:"center",width:"100%",height:"100%",position:"absolute",minWidth:"20px"}})}var d=n(51),f=n(17),g=n(21),m=n(18),v=n(65),y=n(66),b=n(67),E=n(6),T=n(68),w=700,x={},C=function(e,t){function n(){document.head.removeChild(r),delete window[t.callbackName]}t=m.extend({},{callbackName:"callback",success:g.noop,error:g.noop},t);var r=document.createElement("script");r.setAttribute("async",""),r.setAttribute("src",e),window[t.callbackName]=function(){n(),t.success.apply(null,arguments)},r.addEventListener("error",function(){n(),t.error.apply(null,arguments)}),document.head.appendChild(r)},S=/^web\+graphie\:/,P=/\/([^/]+)$/,k={"\\a":"","\\b":"\b","\\t":"\t","\\n":"\n","\\v":"\v","\\f":"\f","\\r":"\r","\\\\":"\\"},_=/\\a|\\b|\\t|\\n|\\v|\\f|\\r|\\\\/g,M=[];c()&&(KA.jipt_dom_insert_checks||(KA.jipt_dom_insert_checks=[]),KA.jipt_dom_insert_checks.push(function(e,t,n){var r=g(t).data("jipt-label-index");if(t&&"undefined"!=typeof r){var i=M[r],o=i.label,s=i.useMath;if(o.text(""),e=e.replace(_,function(e){return k[e]}),s){var a=/^\$(.*)\$$/,l=e.match(a),c=l?l[1]:"\\color{red}{\\text{Invalid Math}}";o.processMath(c,!0)}else o.processText(e);return!1}return e}));var O=/\/(?=[^/]+$)/,N=f.createClass({displayName:"SvgImage",propTypes:{allowFullBleed:f.PropTypes.bool,alt:f.PropTypes.string,constrainHeight:f.PropTypes.bool,extraGraphie:f.PropTypes.shape({box:f.PropTypes.array.isRequired,range:f.PropTypes.array.isRequired,labels:f.PropTypes.array.isRequired}),height:f.PropTypes.number,onUpdate:f.PropTypes.func,preloader:f.PropTypes.func,responsive:f.PropTypes.bool,scale:f.PropTypes.number,src:f.PropTypes.string.isRequired,title:f.PropTypes.string,trackInteraction:f.PropTypes.func,width:f.PropTypes.number,zoomToFullSizeOnMobile:f.PropTypes.bool},statics:{getRealImageUrl:function(e){return r(e)?s(e):e}},getDefaultProps:function(){return{constrainHeight:!1,onUpdate:function(){},responsive:!0,src:"",scale:1,zoomToFullSizeOnMobile:!1}},getInitialState:function(){return{imageLoaded:!1,imageDimensions:null,dataLoaded:!1,labels:[],range:[[0,0],[0,0]]}},componentDidMount:function(){r(this.props.src)&&this.loadResources()},componentWillReceiveProps:function(e){this.props.src!==e.src&&this.setState({imageLoaded:!1,dataLoaded:!1})},shouldComponentUpdate:function(e,t){if(!m.isEqual(this.props,e))return!0;if(!r(e.src))return!1;var n=this.isLoadedInState(this.state),i=this.isLoadedInState(t);return n!==i},componentDidUpdate:function(){r(this.props.src)&&!this.isLoadedInState(this.state)&&this.loadResources()},isLoadedInState:function(e){return e.imageLoaded&&e.dataLoaded},loadResources:function(){var e=this,t=u(this.props.src);if(x[t])x[t].loaded?this.onDataLoaded(x[t].data):x[t].dataCallbacks.push(this.onDataLoaded);else{var n={loaded:!1,dataCallbacks:[this.onDataLoaded],data:null};x[t]=n;var r=function(e,r){C(e,{callbackName:"svgData"+t,success:function(e){n.data=e,n.loaded=!0,m.each(n.dataCallbacks,function(e){e(n.data)})},error:r})};l()?r(p(this.props.src),function(t,n,i){r(a(e.props.src),function(t,n,r){console.error("Data load failed:",a(e.props.src),r)})}):r(a(this.props.src),function(t,n,r){console.error("Data load failed:",a(e.props.src),r)})}},onDataLoaded:function(e){this.isMounted()&&e.labels&&e.range&&this.setState({dataLoaded:!0,labels:e.labels,range:e.range})},sizeProvided:function(){return null!=this.props.width&&null!=this.props.height},onImageLoad:function(){var e=this;this.sizeProvided()?this.setState({imageLoaded:!0}):E.getImageSize(this.props.src,function(t,n){e.isMounted()&&e.setState({imageLoaded:!0,imageDimensions:[t,n]})})},setupGraphie:function(e,t){var n=this;m.map(t.labels,function(t){if(c()){var r=e.label(t.coordinates,t.content,t.alignment,!1);g(r).data("jipt-label-index",M.length),M.push({label:r,useMath:t.typesetAsMath})}else if(t.coordinates){var i=e.label(t.coordinates,t.content,t.alignment,t.typesetAsMath,{"font-size":100*n.props.scale+"%"}),o=i.position(),s=n.props.height*n.props.scale,a=n.props.width*n.props.scale;i.css({top:o.top/s*100+"%",left:o.left/a*100+"%"}),m.each(t.style,function(e,t){i.css(t,e)})}})},_handleZoomClick:function(e){var t=g(e.target);(t.width()<this.props.width||this.props.zoomToFullSizeOnMobile)&&T.ZoomService.handleZoomClick(e,this.props.zoomToFullSizeOnMobile),this.props.trackInteraction&&this.props.trackInteraction()},render:function(){var e,t=this.props.src,n={alt:this.props.alt,title:this.props.title},o=this.props.width&&this.props.width*this.props.scale,a=this.props.height&&this.props.height*this.props.scale,l={width:o,height:a},c=this.props.responsive&&!(!o||!a);this.props.extraGraphie&&this.props.extraGraphie.labels.length&&(e=f.createElement(y,{box:this.props.extraGraphie.box,range:this.props.extraGraphie.range,options:{labels:this.props.extraGraphie.labels},responsive:!0,addMouseLayer:!1,setup:this.setupGraphie}));var p=void 0===this.props.preloader?h:this.props.preloader,u=p?function(){return p(l)}:null;if(!r(t)){if(c){var g=d({zoomable:o>w,"svg-image":!0});return n.onClick=this._handleZoomClick,f.createElement(v,{className:g,width:o,height:a,constrainHeight:this.props.constrainHeight,allowFullBleed:this.props.allowFullBleed&&i(t)},f.createElement(b,{src:t,imgProps:n,preloader:u,onUpdate:this.props.onUpdate}),e)}return n.style=l,f.createElement(b,{src:t,preloader:u,imgProps:n,onUpdate:this.props.onUpdate})}var E,T=s(t);if(this.isLoadedInState(this.state)){var x;x=this.sizeProvided()?[o,a]:[this.state.imageDimensions[0]*this.props.scale,this.state.imageDimensions[1]*this.props.scale];var C=[40*this.props.scale,40*this.props.scale];E=f.createElement(y,{ref:"graphie",box:x,scale:C,range:this.state.range,options:m.pick(this.state,"labels"),responsive:c,addMouseLayer:!1,setup:this.setupGraphie})}return c?f.createElement(v,{className:"svg-image",width:o,height:a,constrainHeight:this.props.constrainHeight},f.createElement(b,{src:T,onLoad:this.onImageLoad,onUpdate:this.props.onUpdate,preloader:u,imgProps:n}),E,e):(n.style=l,f.createElement("div",{className:"unresponsive-svg-image",style:l},f.createElement(b,{src:T,onLoad:this.onImageLoad,onUpdate:this.props.onUpdate,preloader:u,imgProps:n}),E))}});e.exports=N},function(e,t,n){"use strict";var r=n(18),i=n(81),o=n(22),s=function(){},a=function(e,t,n){var r=function r(i,s){var a,c=o.upgradeWidgetInfoToLatestVersion(i),p=o.getVersion(c.type);a=p&&c.version.major===p.major?o.traverseChildWidgets(c,function(t){return l(t,e,r,n)}):c;var u=t(a,s);return void 0!==u?u:a};return r},l=function(e,t,n,o){var s=e.content;if(null!=e.content){var a=t(e.content);void 0!==a&&(s=a)}var l=i.mapObject(e.widgets||{},function(e,t){return null==e||null==e.type?e:n(e,t)}),c=r.extend({},e,{content:s,widgets:l}),p=o(c);return void 0!==p?p:c},c=function(e,t,n,r){return t=t||s,n=n||s,r=r||s,l(e,t,a(t,n,r),r)};e.exports={traverseRendererDeep:c}},function(e,t,n){"use strict";var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},i=n(18),o=n(167),s=n(60),a=n(6),l=function(e,t,n){var r=e.length,i=0;if(n){if(t.inline)return null;for(;i<r&&" "===e[i];)i++}if(!(i<r&&"$"===e[i]))return null;i++;for(var o=i,s=0;i<r;){var a=e[i];if("\\"===a)i++;else{if(s<=0&&"$"===a){var l=i+1;if(n){var c=/^(?: *\n){2,}/.exec(e.slice(l));l=c?l+c[0].length:null}return l?[e.substring(0,l),e.substring(o,i)]:null}if("{"===a)s++;else if("}"===a)s--;else if("\n"===a&&"\n"===e[i-1])return null}i++}return null},c=function(e,t){return l(e,t,!1)},p=function(e,t){return l(e,t,!0)},u=new RegExp("^\\|\\| +(.*) +\\|\\| *\\n("+o.defaultRules.nptable.match.regex.source.substring(1)+")"),h=o.blockRegex(/^(crwdns.*)\n\s*\n/),d=i.extend({},o.defaultRules,{columns:{order:-2,match:o.blockRegex(/^([\s\S]*\n\n)={5,}\n\n([\s\S]*)/),parse:function(e,t,n){return{col1:t(e[1],n),col2:t(e[2],n)}},react:function(e,t,n){return React.createElement("div",{className:"perseus-two-columns",key:n.key},React.createElement("div",{className:"perseus-column"},React.createElement("div",{className:"perseus-column-content"},t(e.col1,n))),React.createElement("div",{className:"perseus-column"},React.createElement("div",{className:"sat-header-grafting-area"}),React.createElement("div",{className:"perseus-column-content"},t(e.col2,n),React.createElement("div",{className:"sat-grafting-area"}))))}},crowdinId:{order:-1,match:function(e,t,n){return t.isJipt?h(e,t,n):null},parse:function(e,t,n){return{id:e[1]}},react:function(e,t,n){return e.id}},titledTable:{order:o.defaultRules.nptable.order-.5,match:o.blockRegex(u),parse:function(e,t,n){var r=o.parseInline(t,e[1],n),s=i.rest(e,2),a=o.defaultRules.nptable.parse(s,t,n);return{title:r,table:a}},react:function(e,t,n){var r=e.table?o.defaultRules.table.react(e.table,t,n):"//invalid table//";return React.createElement("div",{className:"perseus-titled-table",key:n.key},React.createElement("div",{className:"perseus-table-title"},t(e.title,n)),r)}},widget:{order:o.defaultRules.link.order-.75,match:o.inlineRegex(a.rWidgetRule),parse:function(e,t,n){return{id:e[1],widgetType:e[2]}},react:function(e,t,n){return React.createElement("em",{key:n.key},"[Widget: ",e.id,"]")}},blockMath:{order:o.defaultRules.codeBlock.order+.5,match:p,parse:function(e,t,n){return{content:e[1]}},react:function(e,t,n){return React.createElement(s,{key:n.key},e.content)}},math:{order:o.defaultRules.link.order-.25,match:c,parse:function(e,t,n){return{content:e[1]}},react:function(e,t,n){return React.createElement(s,{key:n.key},e.content)}},unescapedDollar:{order:o.defaultRules.link.order-.24,match:o.inlineRegex(/^(?!\\)\$/),parse:function(e,t,n){return{}},react:function(e,t,n){return"$"}},fence:i.extend({},o.defaultRules.fence,{parse:function(e,t,n){var r=o.defaultRules.fence.parse(e,t,n);return"alt"===r.lang?{type:"codeBlock",lang:"alt",content:t(r.content+"\n\n",n)}:r}}),link:i.extend({},o.defaultRules.link,{react:function(e,t,n){var i=o.defaultRules.link.react(e,t,n),s=i.props.href;"undefined"!=typeof KA&&KA.isZeroRated&&(s=s.match(/https?:\/\/[^\/]*khanacademy.org/)?s.replace("khanacademy.org","zero.khanacademy.org"):"/zero/external-link?url="+encodeURIComponent(s));var a=r({},i.props,{href:s});return n.baseElements&&n.baseElements.Link?n.baseElements.Link(a):React.cloneElement(i,a)}}),codeBlock:i.extend({},o.defaultRules.codeBlock,{react:function(e,t,n){return"alt"===e.lang?React.createElement("div",{key:n.key,className:"perseus-markdown-alt perseus-sr-only"},t(e.content,n)):o.defaultRules.codeBlock.react(e,t,n)}}),list:i.extend({},o.defaultRules.list,{match:function(e,t,n){return t.isJipt?null:o.defaultRules.list.match(e,t,n)}})}),f=o.parserFor(d),g=function(e,t){var n=e+"\n\n";return f(n,i.extend({inline:!1},t))},m=function(e,t){return f(e,i.extend({inline:!0},t))},v=function e(t,n){i.isArray(t)?i.each(t,function(t){return e(t,n)}):i.isObject(t)&&(n(t),"table"===t.type?(e(t.header,n),e(t.cells,n)):"list"===t.type?e(t.items,n):"titledTable"===t.type?e(t.table,n):"columns"===t.type?(e(t.col1,n),e(t.col2,n)):i.isArray(t.content)&&e(t.content,n))},y=function e(t){if(i.isArray(t))return i.flatten(i.map(t,e));if(t.content&&i.isString(t.content))return t.type.toLowerCase().indexOf("code")!==-1?["",t.content,""]:[t.content.replace(/\s+/g," ")];var n=i.chain(t).values().flatten().filter(function(e){return null!=e&&i.has(e,"type")}).value();if(n.length){var r=e(n);if("paragraph"===t.type&&r.length){r[0]=r[0].replace(/^\s+/,"");var o=r.length-1;r[o]=r[o].replace(/\s+$/,"")}return r}return[]},b=function(e){var t=g(e),n=y(t).join("");return n.length};e.exports={characterCount:b,traverseContent:v,parse:g,parseInline:m,reactFor:o.reactFor,ruleOutput:o.ruleOutput(d,"react"),basicOutput:o.reactFor(o.ruleOutput(d,"react")),sanitizeUrl:o.sanitizeUrl}},function(e,t,n){"use strict";e.exports={iconCheck:{path:"M10,3.8C10,4,9.9,4.2,9.8,4.3L5.1,8.9L4.3,9.8C4.2,9.9,4,10,3.8,10\n        S3.5,9.9,3.4,9.8L2.5,8.9L0.2,6.6C0.1,6.5,0,6.3,0,6.2s0.1-0.3,0.2-0.4\n        l0.9-0.9c0.1-0.1,0.3-0.2,0.4-0.2s0.3,0.1,0.4,0.2l1.9,1.9l4.2-4.2c0.1\n        -0.1,0.3-0.2,0.4-0.2c0.2,0,0.3,0.1,0.4,0.2l0.9,0.9C9.9,3.5,10,3.7,\n        10,3.8z",width:10,height:10},iconChevronDown:{path:"M99.669 13.048q0 3.36-2.352 5.712l-41.664 41.664q-2.408 2.408-5.88 2.408t-5.712-2.408l-41.664-41.664q-2.408-2.24-2.408-5.712t2.408-5.88l4.76-4.816q2.52-2.352 5.88-2.352t5.656 2.352l31.136 31.136 31.08-31.136q2.352-2.352 5.712-2.352t5.88 2.352l4.816 4.816q2.352 2.52 2.352 5.88z",width:100,height:63.034},iconChevronRight:{path:"M62.808 49.728q0 3.36-2.352 5.88l-41.72 41.664q-2.352 2.408-5.768 2.408t-5.768-2.408l-4.872-4.76q-2.352-2.52-2.352-5.88t2.352-5.712l31.08-31.136-31.08-31.024q-2.352-2.52-2.352-5.88t2.352-5.712l4.872-4.76q2.296-2.408 5.768-2.408t5.768 2.408l41.72 41.664q2.352 2.296 2.352 5.656z",width:63.034,height:100},iconCircle:{path:"M100.035 50.046q.057 13.623-6.669 25.137t-18.24 18.183-25.08 6.669-25.137-6.726q-11.514-6.726-18.183-18.183-6.726-11.571-6.726-25.137t6.726-25.08 18.24-18.24 25.08-6.669q13.566 0 25.08 6.726 11.514 6.669 18.24 18.183t6.669 25.137z",width:100,height:100},iconCircleArrowDown:{path:"M50.046 83.676q1.767 0 2.907-1.14l29.526-29.526q1.197-1.197 1.197-2.907t-1.197-2.964l-5.928-5.928q-1.197-1.14-2.964-1.14t-2.907 1.14l-12.312 12.312l0-32.661q0-1.71-1.254-2.964t-2.907-1.254l-8.322 0q-1.71 0-2.964 1.254t-1.254 2.964l0 32.661l-12.312-12.312q-1.197-1.254-2.907-1.254t-2.907 1.254l-5.928 5.928q-1.197 1.197-1.197 2.964t1.197 2.907l29.469 29.526q1.197 1.14 2.964 1.14zm49.989-33.63q.057 13.623-6.669 25.137t-18.24 18.183-25.08 6.669-25.137-6.726q-11.514-6.726-18.183-18.183-6.726-11.571-6.726-25.137t6.726-25.08 18.24-18.24 25.08-6.669q13.566 0 25.08 6.726 11.514 6.669 18.24 18.183t6.669 25.137z",
width:100,height:100},iconCircleArrowUp:{path:"M54.207 83.391q1.653 0 2.907-1.254t1.254-2.907l0-32.718l12.312 12.312q1.254 1.254 2.964 1.254t2.907-1.254l5.928-5.928q1.197-1.197 1.14-2.964 0-1.767-1.14-2.907l-29.526-29.526q-1.197-1.14-2.907-1.14t-2.964 1.14l-29.469 29.526q-1.197 1.254-1.197 2.964t1.197 2.907l5.928 5.928q1.197 1.197 2.907 1.197t2.907-1.197l12.312-12.312l0 32.718q0 1.653 1.254 2.907t2.964 1.254l8.322 0zm45.828-33.345q.057 13.623-6.669 25.137t-18.24 18.183-25.08 6.669-25.137-6.726q-11.514-6.726-18.183-18.183-6.726-11.571-6.726-25.137t6.726-25.08 18.24-18.24 25.08-6.669q13.566 0 25.08 6.726 11.514 6.669 18.24 18.183t6.669 25.137z",width:100,height:100},iconCircleThin:{path:"M50.046 8.322q-8.493 0-16.188 3.306-15.561 6.669-22.173 22.23-3.363 7.695-3.363 16.188t3.306 16.188 8.949 13.281q5.586 5.586 13.281 8.892t16.188 3.306 16.188-3.306 13.281-8.892 8.892-13.281 3.306-16.188-3.306-16.188-8.892-13.281-13.281-8.949q-7.695-3.306-16.188-3.306zm0 91.713q-13.623 0-25.137-6.726t-18.183-18.183q-6.726-11.571-6.726-25.137t6.726-25.08 18.24-18.24 25.08-6.669q13.566 0 25.08 6.726 11.514 6.669 18.24 18.183t6.726 25.137-6.726 25.137-18.24 18.126q-11.514 6.726-25.08 6.726z",width:100,height:99.944},iconDesktop:{path:"M94.208 52.119l0-43.746q0-.69-.506-1.15t-1.196-.506l-84.088 0q-.69 0-1.196.506t-.506 1.15l0 43.746q0 .69.506 1.196t1.196.506l84.088 0q.69 0 1.196-.506t.506-1.196zm6.716-43.746l0 57.224q0 3.45-2.484 5.934t-5.934 2.484l-28.566 0q0 3.128 2.53 7.774.828 1.61.828 2.622t-1.012 2.07q-1.012 1.012-2.346.966l-26.91 0q-1.38 0-2.392-1.012t-1.012-2.024q0-1.058 1.656-4.14t1.748-6.256l-28.612 0q-3.45 0-5.934-2.484t-2.484-5.934l0-57.224q0-3.45 2.484-5.934t5.934-2.438l84.088 0q3.45 0 5.98 2.438 2.438 2.484 2.438 5.934z",width:100,height:86.648},iconDropdownArrow:{path:"M9 9.8c0 .5.7 1.7 1.5 2.8 1.5 1.9 1.5 1.9 3 0C15.7 9.7 15.4 9 12 9c-1.6 0-3 .4-3 .8z",width:24,height:24},iconExclamationSign:{path:"M58.368 81.225l0-12.369q0-.912-.57-1.539t-1.425-.627l-12.54 0q-.855-.057-1.482.627t-.684 1.539l0 12.369q-.057.855.627 1.482t1.539.684l12.54 0q.855 0 1.425-.627t.57-1.539zm1.026-62.871q0-1.596-2.223-1.71l-14.307 0q-2.109 0-2.223 1.71l1.14 40.47q0 .627.627 1.14t1.539.456l12.084 0q.912-.057 1.539-.513t.684-1.083zm-9.348-18.354q13.566 0 25.08 6.726 11.514 6.669 18.24 18.183t6.726 25.137-6.726 25.137-18.24 18.183-25.08 6.669-25.137-6.726q-11.514-6.726-18.183-18.183-6.726-11.571-6.726-25.137t6.726-25.08 18.24-18.24 25.08-6.669z",width:100,height:99.944},iconGear:{path:"M1152 896q0-106-75-181t-181-75-181 75-75 181 75 181 181 75 181-75 75-181zm512-109v222q0 12-8 23t-20 13l-185 28q-19 54-39 91 35 50 107 138 10 12 10 25t-9 23q-27 37-99 108t-94 71q-12 0-26-9l-138-108q-44 23-91 38-16 136-29 186-7 28-36 28h-222q-14 0-24.5-8.5t-11.5-21.5l-28-184q-49-16-90-37l-141 107q-10 9-25 9-14 0-25-11-126-114-165-168-7-10-7-23 0-12 8-23 15-21 51-66.5t54-70.5q-27-50-41-99l-183-27q-13-2-21-12.5t-8-23.5v-222q0-12 8-23t19-13l186-28q14-46 39-92-40-57-107-138-10-12-10-24 0-10 9-23 26-36 98.5-107.5t94.5-71.5q13 0 26 10l138 107q44-23 91-38 16-136 29-186 7-28 36-28h222q14 0 24.5 8.5t11.5 21.5l28 184q49 16 90 37l142-107q9-9 24-9 13 0 25 10 129 119 165 170 7 8 7 22 0 12-8 23-15 21-51 66.5t-54 70.5q26 50 41 98l183 28q13 2 21 12.5t8 23.5z",width:1792,height:1792},iconMobilePhone:{path:"M36.04 89.557q0-2.584-1.836-4.42t-4.42-1.836-4.352 1.836q-1.836 1.836-1.836 4.42t1.836 4.352 4.42 1.836q2.652-.068 4.42-1.836t1.768-4.352zm16.184-12.444l0-54.74q0-1.088-.748-1.768t-1.768-.68l-39.78 0q-1.088 0-1.768.748t-.68 1.7l0 54.74q0 1.02.748 1.768t1.7.68l39.78 0q1.02-.068 1.768-.748t.748-1.7zm-14.892-65.892q0-1.224-1.292-1.292l-12.444 0q-1.224.068-1.224 1.292t1.224 1.224l12.444 0q1.292 0 1.292-1.224zm22.372-1.292l0 79.628q0 3.944-2.992 6.936t-7.004 2.992l-39.78 0q-4.012 0-7.004-2.924-2.924-2.924-2.924-7.004l0-79.628q0-4.012 2.924-6.936t7.004-2.992l39.78 0q4.012-.068 7.004 2.924t2.992 7.004z",width:60.013,height:100},iconOk:{path:"M37.964 76.048q-2.576 0-4.368-1.792l-31.864-31.864q-1.792-1.792-1.792-4.368t1.792-4.368l8.736-8.68q1.792-1.792 4.368-1.792t4.312 1.792l18.816 18.872 42-42.056q1.792-1.792 4.368-1.792t4.312 1.792l8.736 8.736q1.792 1.792 1.792 4.368t-1.792 4.312l-55.048 55.048q-1.792 1.792-4.368 1.792z",width:100,height:76.637},iconPlus:{path:"M99.758 43.09l0 13.578q0 2.852-1.984 4.836t-4.836 1.984l-29.45 0l0 29.45q0 2.852-1.984 4.836t-4.836 1.984l-13.578 0q-2.852 0-4.836-1.984t-1.984-4.836l0-29.45l-29.45 0q-2.852 0-4.836-1.984t-1.984-4.836l0-13.578q0-2.852 1.984-4.836t4.836-1.984l29.45 0l0-29.45q0-2.852 1.984-4.836t4.836-1.984l13.578 0q2.852 0 4.836 1.984t1.984 4.836l0 29.45l29.45 0q2.852 0 4.836 1.984t1.984 4.836z",width:100,height:100},iconRemove:{path:"M100.464 80.808q0 3.404-2.368 5.772l-11.47 11.544q-2.368 2.368-5.772 2.368t-5.698-2.368l-24.864-24.864-24.864 24.864q-2.368 2.368-5.772 2.368t-5.772-2.368l-11.47-11.544q-2.368-2.368-2.368-5.772t2.368-5.698l24.864-24.864-24.864-24.864q-2.368-2.368-2.368-5.772t2.368-5.772l11.47-11.47q2.368-2.368 5.772-2.368t5.772 2.368l24.864 24.864 24.864-24.864q2.294-2.368 5.698-2.368t5.772 2.368l11.47 11.47q2.368 2.368 2.368 5.772t-2.368 5.772l-24.864 24.864 24.864 24.864q2.368 2.294 2.368 5.698z",width:100,height:100},iconStar:{path:"M15.1052249,9.55978547 L22.0028147,9.55978545 C23.6568673,9.55978545 23.9349557,10.3753626 22.6181351,11.3858845 L16.9943688,15.7015366 L19.2518801,22.8294455 C19.7526645,24.4106317 19.0984455,24.8825885 17.769353,23.8673293 L12.0490577,19.4977438 L6.5116497,23.8422153 C5.20921411,24.8640642 4.53299569,24.4067544 5.00266927,22.8160582 L7.10332364,15.7015366 L1.42794544,11.3634306 C0.110226041,10.3562014 0.383967283,9.54239221 2.0409646,9.54574013 L8.9924676,9.55978547 L11.1485117,2.72669438 C11.6458693,1.15043244 12.4548928,1.15900049 12.9494787,2.72669438 L15.1052249,9.55978547 Z",width:24,height:24},iconTryAgain:{path:"M3.74890556,17.9799506 C2.19251241,16.1970909 1.10103636,13.4971457 1.13090903,11.1491783 C1.17160478,7.95052637 4.01704076,0.865059407 11.7028044,0.865059407 C19.388568,0.865059407 22.3026521,7.35203035 22.3026521,11.5879453 C22.3026521,15.8238603 19.386629,20.5574509 13.6832464,21.7131548 L13.6757539,17.3722171 C17.0812986,16.2190517 18.331158,14.1944123 18.3311578,11.5879451 C18.3311574,8.16554692 15.6664205,5.03476549 11.7028048,5.20494205 C7.73918903,5.37511861 5.59244567,8.66930079 5.59244567,11.1491783 C5.59244567,12.9090077 6.11128139,14.1753512 6.93640437,15.3053215 L8.14052356,14.2949456 C8.98559348,13.5858477 9.6994861,13.9070448 9.73489556,15.0076413 L9.91284941,20.5388014 C9.94832683,21.6415103 9.09967118,22.3514475 8.02194403,22.1254594 L2.60571602,20.9897332 C1.5259204,20.7633114 1.34338662,19.9984207 2.18070755,19.295825 L3.74890556,17.9799506 Z",width:23,height:23},iconTablet:{path:"M45.322 90.706q0-1.86-1.302-3.224-1.364-1.364-3.224-1.364t-3.224 1.364-1.302 3.224q0 1.86 1.364 3.224 1.302 1.364 3.162 1.302 1.86.062 3.224-1.302t1.302-3.224zm27.218-11.346l0-68.014q0-.93-.682-1.612t-1.55-.682l-58.962 0q-.93 0-1.612.682t-.682 1.612l0 68.014q0 .93.682 1.612t1.612.62l58.962 0q.992-.062 1.612-.682t.62-1.55zm9.114-68.014l0 77.066q0 4.65-3.348 7.998t-7.998 3.348l-58.962 0q-4.65 0-7.998-3.348t-3.348-7.998l0-77.066q0-4.65 3.348-7.998t7.998-3.348l58.962 0q4.65 0 7.998 3.348t3.348 7.998z",width:81.852,height:100},iconTrash:{path:"M31.293 37.506q2.052 0 2.052 2.109l0 37.506q0 1.995-2.052 2.109l-4.218 0q-.912-.057-1.482-.627t-.57-1.482l0-37.506q0-2.109 2.052-2.109l4.218 0zm18.753 2.109l0 37.506q0 .912-.57 1.482t-1.539.627l-4.161 0q-1.995 0-2.109-2.109l0-37.506q.057-.912.627-1.482t1.482-.627l4.161 0q.969.057 1.539.627t.57 1.482zm14.592-2.109q2.052 0 2.052 2.109l0 37.506q0 1.995-2.052 2.109l-4.161 0q-.969-.057-1.539-.627t-.57-1.482l0-37.506q0-2.109 2.109-2.109l4.161 0zm10.431 49.248l0-61.731l-58.368 0l0 61.731q.057 2.679.969 3.819t1.083 1.14l54.207 0q.171 0 1.14-1.083t.969-3.876zm-43.776-70.11l29.184 0l-3.135-7.581q-.456-.57-1.14-.741l-20.634 0q-.627.114-1.083.741zm-31.293 2.109q0-1.995 2.109-2.109l20.121 0l4.56-10.83q.969-2.394 3.477-4.104 2.565-1.71 5.187-1.71l20.805 0q2.622 0 5.187 1.71t3.477 4.104l4.56 10.83l20.178 0q.912.057 1.482.627t.57 1.482l0 4.161q0 1.995-2.052 2.109l-6.27 0l0 61.731q0 5.415-3.078 9.348t-7.353 3.933l-54.207 0q-4.275 0-7.353-3.819t-3.078-9.177l0-62.016l-6.213 0q-.969 0-1.539-.57t-.57-1.539l0-4.161z",width:91.681,height:100},iconUndo:{path:"M10,6.6C10,7.2,9.8,8,9.3,9.1c0,0,0,0.1-0.1,0.1S9.2,9.3,9.2,9.4c0,0,0,0.1-0.1,0.1C9,9.6,9,9.6,8.9,9.6 c-0.1,0-0.1,0-0.1-0.1c0,0,0-0.1,0-0.1c0,0,0-0.1,0-0.1s0-0.1,0-0.1c0-0.3,0-0.5,0-0.7c0-0.4,0-0.7-0.1-1C8.6,7.1,8.5,6.9,8.4,6.7S8.2,6.3,8,6.1C7.8,5.9,7.6,5.8,7.4,5.7S6.9,5.5,6.7,5.5S6.1,5.4,5.8,5.4c-0.3,0-0.6,0-1,0H3.6v1.4c0,0.1,0,0.2-0.1,0.3C3.4,7.1,3.3,7.1,3.2,7.1C3.1,7.1,3,7.1,3,7L0.1,4.1C0,4.1,0,4,0,3.9s0-0.2,0.1-0.3L3,0.8C3,0.7,3.1,0.7,3.2,0.7c0.1,0,0.2,0,0.3,0.1C3.5,0.9,3.6,0.9,3.6,1v1.4h1.2c2.6,0,4.3,0.7,4.9,2.2C9.9,5.2,10,5.8,10,6.6z",width:10,height:10}}},function(e,t,n){"use strict";var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},i=n(17),o=function(e){var t=e.path,n=e.width,o=e.height,s=e.style,a=void 0===s?{}:s;return i.createElement("svg",{style:r({verticalAlign:"middle"},a),width:n/o+"em",height:"1em",viewBox:"0 0 "+n+" "+o},i.createElement("path",{d:t,fill:"currentColor"}))};o.propTypes={path:i.PropTypes.string.isRequired,height:i.PropTypes.number.isRequired,width:i.PropTypes.number.isRequired,style:i.PropTypes.object},e.exports=o},function(e,t,n){"use strict";var r=n(17),i=n(18),o=r.createClass({displayName:"JsonEditor",getInitialState:function(){return{currentValue:JSON.stringify(this.props.value,null,4),valid:!0}},componentWillReceiveProps:function(e){var t=!this.state.valid||!i.isEqual(e.value,JSON.parse(this.state.currentValue));t&&this.setState(this.getInitialState())},render:function(){var e="perseus-json-editor "+(this.state.valid?"valid":"invalid");return r.createElement("textarea",{className:e,value:this.state.currentValue,onChange:this.handleChange,onKeyDown:this.handleKeyDown,onBlur:this.handleBlur})},handleKeyDown:function(e){if("Tab"===e.key){var t=e.target.selectionStart,n=e.target.value,r=n.substring(0,t),i=n.substring(t,n.length);e.target.value=r+"    "+i,e.target.selectionStart=r.length+4,e.target.selectionEnd=r.length+4,e.preventDefault(),this.handleChange(e)}},handleChange:function(e){var t=e.target.value;try{var n=JSON.parse(t);i.isString(n)&&(n=JSON.parse(n)),this.setState({currentValue:t,valid:!0},function(){this.props.onChange(n)})}catch(e){this.setState({currentValue:t,valid:!1})}},handleBlur:function(e){var t=e.target.value;try{var n=JSON.parse(t);i.isString(n)&&(n=JSON.parse(n)),this.setState({currentValue:JSON.stringify(n,null,4),valid:!0},function(){this.props.onChange(n)})}catch(e){this.setState({currentValue:JSON.stringify(this.props.value,null,4),valid:!0})}}});e.exports=o},function(e,t,n){"use strict";var r=n(17),i=n(52),o=i.css,s=i.StyleSheet,a=r.createClass({displayName:"KatexErrorView",propTypes:{errorList:r.PropTypes.arrayOf(r.PropTypes.shape({math:r.PropTypes.string.isRequired,message:r.PropTypes.string.isRequired})).isRequired},getInitialState:function(){return{showErrors:!1}},handleToggleKatexErrors:function(e){this.setState({showErrors:!this.state.showErrors})},render:function(){var e=this.props.errorList,t=this.state.showErrors,n=t?"icon-chevron-down":"icon-chevron-right";return r.createElement("div",{className:o(l.errorContainer)},r.createElement("div",{className:o(l.title),onClick:this.handleToggleKatexErrors},r.createElement("i",{className:n,style:{fontSize:14}}),"  KaTeX Errors (",e.length,")"),t&&r.createElement("div",{className:o(l.errorExplanation)},"These errors will cause your LaTeX to load really slowly for the student. Please fix them if you can. If you can’t because KaTeX doesn’t support the feature you need, please message Cam."),t&&e.map(function(e,t){return r.createElement("div",{className:o(l.error),key:t},r.createElement("div",{style:{color:"red"}},e.math),r.createElement("div",null,e.message))}))}}),l=s.create({title:{backgroundColor:"#eee",fontSize:"1.25em",padding:"4px 10px"},errorContainer:{border:"1px solid #ddd",borderTop:"none"},errorExplanation:{padding:"4px 10px",backgroundColor:"pink"},error:{padding:"4px 10px"}});e.exports=a},function(e,t,n){"use strict";var r=n(17),i=n(18),o=r.createClass({displayName:"PropCheckBox",propTypes:{labelAlignment:r.PropTypes.oneOf(["left","right"])},DEFAULT_PROPS:{label:null,onChange:null,labelAlignment:"left"},getDefaultProps:function(){return this.DEFAULT_PROPS},propName:function e(){var e=i.find(i.keys(this.props),function(e){return!i.has(this.DEFAULT_PROPS,e)},this);if(!e)throw new Error("Attempted to create a PropCheckBox with no prop!");return e},_labelAlignLeft:function(){return"left"===this.props.labelAlignment},render:function(){var e=this.propName();return r.createElement("label",null,this._labelAlignLeft()&&this.props.label,r.createElement("input",{type:"checkbox",checked:this.props[e],onChange:this.toggle}),!this._labelAlignLeft()&&this.props.label)},toggle:function(){var e=this.propName(),t={};t[e]=!this.props[e],this.props.onChange(t)}});e.exports=o},function(e,t,n){"use strict";var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},i=n(17),o=n(185),s=o.CharacterMetadata,a=o.Entity,l=o.Editor,c=o.EditorState,p=o.CompositeDecorator,u=o.ContentState,h=o.Modifier,d=o.genKey,f=o.getDefaultKeyBinding,g=o.KeyBindingUtil,m=n(22),v=n(70),y=100,b="[[☃ {id}]]",E=/\[\[\u2603 [a-z-]+ [0-9]+\]\]/g,T=/^\[\[\u2603 (([a-z-]+) ([0-9]+))\]\]$/,w=function(e){return new RegExp("(\\[\\[☃ "+e+"\\]\\])","gm")},x=/\[\[([a-z-]+)$/,C=/!\[[^\]]*?\]\([^\)].*?\)/g,S=/\*\*([\s\S]+?)\*\*(?!\*)/g,P=/\**(?:^|[^*])((\*|_)(\w+(\s\w+)*)\2)/g,k=/(\*\*\*\w+(\s\w+)*\*\*\*)/g,_=/__([\s\S]+?)__(?!_)/g,M=/^ *(#{1,6})([^\n]+)$/g,O=function(e,t,n){return e.findEntityRanges(function(e){return e.getEntity()&&a.get(e.getEntity()).type===n},t)},N=function(e,t){return i.createElement("span",r({},e,{style:t}),e.children)};N.propTypes={children:i.PropTypes.any};var I=function(e,t){return N(e,{backgroundColor:t})},A=function(e,t){return{strategy:function(){for(var t=arguments.length,n=Array(t),r=0;r<t;r++)n[r]=arguments[r];return O.apply(void 0,n.concat([e]))},component:function(e){return I(e,t)}}},R=function(e,t){return{strategy:function(){for(var t=arguments.length,n=Array(t),r=0;r<t;r++)n[r]=arguments[r];return v.regexStrategy.apply(v,n.concat([e]))},component:function(e){return I(e,t)}}},D={strategy:function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return v.regexStrategy.apply(v,t.concat([S]))},component:function(e){return N(e,{fontWeight:"bold"})}},L=function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return v.regexStrategy.apply(v,t.concat([P,function(e){var t=e.index+e[0].length-e[1].length,n=t+e[1].length;return{start:t,end:n}}]))},F={strategy:L,component:function(e){return N(e,{fontStyle:"italic"})}},B={strategy:function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return v.regexStrategy.apply(v,t.concat([_]))},component:function(e){return N(e,{textDecoration:"underline"})}},z={strategy:function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return v.regexStrategy.apply(v,t.concat([k]))},component:function(e){return N(e,{fontWeight:"bold",fontStyle:"italic"})}},q=function(e){var t=e.decoratedText,n=t.split(M)[1].length,r={marginBottom:0};return i.createElement("h"+n,{style:r},e.children)};q.propTypes={decoratedText:i.PropTypes.string,children:i.PropTypes.any};var U={strategy:function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return v.regexStrategy.apply(v,t.concat([M]))},component:q},W=new p([A("WIDGET","#DFD"),A("TEMP_IMAGE","#fdffdd"),R(C,"#dffdfa"),z,D,B,F,U]),H=function(e){var t=g.hasCommandModifier(e);return t&&66===e.keyCode?"perseus-bold":t&&73===e.keyCode?"perseus-italics":t&&85===e.keyCode?"perseus-underline":t&&219===e.keyCode?"perseus-decrease-font-size":t&&221===e.keyCode?"perseus-increase-font-size":t&&220===e.keyCode?"perseus-reset-font-size":f(e)},j=i.createClass({displayName:"PerseusEditor",propTypes:{onChange:i.PropTypes.func,content:i.PropTypes.string,initialWidgets:i.PropTypes.any,placeholder:i.PropTypes.string,imageUploader:i.PropTypes.func,widgetEnabled:i.PropTypes.bool},getDefaultProps:function(){return{onChange:function(){},content:"",initialWidgets:{},widgetEnabled:!0,placeholder:"Type here"}},getInitialState:function(){var e=this.props,t=e.content,n=e.initialWidgets,r=e.widgetEnabled,i=u.createFromText(t),o=c.createWithContent(i,W);return r&&(o=this._insertWidgetsAsEntities(o,n)),{editorState:o,widgets:n,fontSizePercentage:100}},componentDidUpdate:function(e){this.props.content!==this.lastContentUpdate&&(this.lastContentUpdate=this.props.content,this.setState(this.getInitialState()))},_insertWidgetsAsEntities:function(e,t){var n=e.getCurrentContent();Object.keys(t).forEach(function(e){var t=v.findPattern(n,w(e));if(t){var r=a.create("WIDGET","IMMUTABLE",{id:e});n=h.applyEntity(n,t,r)}});var r=c.set(e,{currentContent:n});return r},_getDraftData:function(){var e=this.state.editorState,t=e.getCurrentContent(),n=e.getSelection();return{editorState:e,contentState:t,selection:n}},_getNextWidgetId:function(e){var t=this.state.widgets;return Object.keys(t).filter(function(n){return t[n].type===e}).map(function(e){return+e.split(" ")[1]}).reduce(function(e,t){return Math.max(e,t)},0)},_createInitialWidget:function(e){var t=this._getNextWidgetId(e),n=e+" "+(t+1),r={options:m.getEditor(e).defaultProps,type:e,version:m.getVersion(e)};return[n,r]},addWidget:function(e){var t=this;this.focus(function(){return t._handleChange(t._insertNewWidget(e))})},_insertNewWidget:function(e,t){var n,i=r({},this._getDraftData(),t),o=this._createInitialWidget(e),s=o[0],a=o[1],l=r({},this.state.widgets,(n={},n[s]=a,n)),c=this._insertWidgetText(i,s);return{editorState:c.editorState,widgets:l}},_insertWidgetText:function(e,t){var n=b.replace("{id}",t),r=a.create("WIDGET","IMMUTABLE",{id:t});return v.replaceSelection(e,n,r)},updateWidget:function(e,t){var n;this.setState({widgets:r({},this.state.widgets,(n={},n[e]=t,n))})},removeWidget:function(e){var t=this;this.focus(function(){var n=t._getDraftData(),r=n.editorState,i=n.contentState,o=v.findPattern(i,w(e)),s=v.deleteSelection({editorState:r,selection:o});t._handleChange({editorState:s.editorState})})},addTemplate:function(e){var t=this;this.focus(function(){t._addTemplate(e)})},_addTemplate:function(e){var t=this,n=this._getDraftData(),i=n.editorState,o=n.contentState,s=n.selection,a=r({},this.state.widgets),l=o.getBlockForKey(s.getEndKey());if(s=v.selectEnd(l),l.getText().length>0&&(o=h.splitBlock(o,s),s=o.getSelectionAfter()),"allWidgets"===e){var p=m.getAllWidgetTypes().sort();o=h.splitBlock(o,s),o=p.reduce(function(e,n){var r=t._createInitialWidget(n),i=r[0],o=r[1];return a[i]=o,e=t._insertWidgetText({contentState:e,selection:e.getSelectionAfter()},i).contentState,h.splitBlock(e,e.getSelectionAfter())},o),i=c.push(i,o,"insert-fragment")}else{var u="";"table"===e?u="header 1 | header 2 | header 3\n- | - | -\ndata 1 | data 2 | data 3\ndata 4 | data 5 | data 6\ndata 7 | data 8 | data 9":"titledTable"===e?u="|| **Table title** ||\nheader 1 | header 2 | header 3\n- | - | -\ndata 1 | data 2 | data 3\ndata 4 | data 5 | data 6\ndata 7 | data 8 | data 9":"alignment"===e?u="$\\begin{align} x+5 &= 30 \\\\\nx+5-5 &= 30-5 \\\\\nx &= 25 \\end{align}$":"piecewise"===e&&(u="$f(x) = \\begin{cases}\n7 & \\text{if $x=1$} \\\\\nf(x-1)+5 & \\text{if $x > 1$}\n\\end{cases}$"),i=v.insertText({editorState:i,contentState:o,selection:s},"\n"+u+"\n").editorState}this._handleChange({editorState:i,widgets:a})},_handleCopy:function(){var e=this,t=this._getDraftData(),n=t.contentState,r=t.selection,i=v.getEntities(n,r),o=i.reduce(function(t,n){var r=n.getData().id;return t[r]=e.state.widgets[r],t},{});return localStorage.perseusLastCopiedWidgets=JSON.stringify(o),!1},_createSafeWidgetMapping:function(e,t){var n=Object.keys(t).reduce(function(e,t){var n=t.split(" "),r=n[0],i=n[1];return e[r]=e[r]?Math.max(e[r],+i):+i,e},{}),r=Object.keys(e).reduce(function(e,t){var r=t.split(" ")[0];return n[r]=n[r]?n[r]+1:1,e[t]=r+" "+n[r],e},{});return r},_handlePaste:function(e,t,n){var i=localStorage.perseusLastCopiedWidgets;if(!i)return!1;var o=JSON.parse(i),l=r({},this.state.widgets),c=this._createSafeWidgetMapping(o,l),p=s.create(),u=function(e){var t=e.replace(new RegExp("\r","g"),""),n=Array(t.length).fill(p),r=t.replace(E,function(e,t){var r=T.exec(e),i=r[0],u=r[1],h=c[u],d=b.replace("{id}",h),f=a.create("WIDGET","IMMUTABLE",{id:h}),g=s.applyEntity(p,f),m=Array(d.length).fill(g);return n.splice.apply(n,[t,i.length].concat(m)),l[h]=o[u],i.replace(u,h)});return{text:r,characterList:n}},h=this._getDraftData();h.selection=n||h.selection;var d=v.insertText(h,e,u),f=d.editorState;return this._handleChange({editorState:f,widgets:l}),!0},_handleDrop:function(e,t){var n=this.state.editorState.getCurrentContent(),i=e.getEndKey(),o=n.getBlockForKey(i),s=v.selectEnd(o),a=t.getLink();if(!a){var l=t.getText();return this._handlePaste(l,null,s)}var c=v.insertText(r({},this._getDraftData(),{selection:s}),"\n![]("+a+")"),p=c.editorState;return this._handleChange({editorState:p}),!0},_handleDroppedFiles:function(e,t){var n=this,r=t.filter(function(e){return e.type.match("image.*")}),i=this.state.editorState.getCurrentContent();r.forEach(function(t){var r="![]("+t.name+"...)",o=d(),l=a.create("TEMP_IMAGE","IMMUTABLE",{id:o}),c=s.create().merge({entity:l}),p=Array(r.length).fill(c),u=function(e){return e===r?{text:r,characterList:p}:null},h=e.getEndKey(),f=i.getBlockForKey(h),g=v.selectEnd(f);i=v.insertText({contentState:i,selection:g},"\n"+r+"\n",u).contentState,n.props.imageUploader(t,function(e){var t=n.state.editorState,r=t.getCurrentContent(),i=v.findEntity(r,function(e){return e.getData().id===o}),s=v.replaceSelection({editorState:t,contentState:r,selection:i},"![]("+e+")");n._handleChange({editorState:s.editorState})})});var o=c.push(this.state.editorState,i,"insert-fragment");return this._handleChange({editorState:o}),!0},_handleTab:function(e){var t=this,n=this._getDraftData(),r=n.contentState,i=n.selection;if(i.isCollapsed()&&this.props.widgetEnabled){e.preventDefault();var o=r.getBlockForKey(i.getEndKey()),s=o.getText().substring(0,i.getEndOffset()),a=s.match(x);return a&&!function(){var e=a[1],n=m.getAllWidgetTypes(),r=n.filter(function(t){return t.substring(0,e.length)===e});if(1===r.length){var o=r[0],s=i.merge({anchorOffset:a.index});t._handleChange(t._insertNewWidget(o,{selection:s}))}}(),!0}},_getDecorationForStyle:function(e){switch(e){case"perseus-bold":return"**";case"perseus-italics":return"*";case"perseus-underline":return"__";default:return null}},_handleKeyCommand:function(e){var t=this.state.fontSizePercentage;if("perseus-increase-font-size"===e)return this.setState({fontSizePercentage:t+10}),!0;if("perseus-decrease-font-size"===e)return this.setState({fontSizePercentage:t-10}),!0;if("perseus-reset-font-size"===e)return this.setState({fontSizePercentage:100}),!0;var n=this._getDecorationForStyle(e);if(null!==n){var r=this._getDraftData(),i=v.toggleDecoration(r,n),o=i.editorState;return this._handleChange({editorState:o}),!0}return!1},lastContentUpdate:"",_updateParent:function(e,t){var n=v.getEntities(e),r=n.reduce(function(e,n){var r=n.getData().id;return e[r]=t[r],e},{});this.lastContentUpdate=e.getPlainText("\n"),this.props.onChange({content:this.lastContentUpdate,widgets:r})},pastContentState:null,lastIdleCallback:null,_handleChange:function(e){var t=this,n=r({},this.state,e),i=n.widgets,o=n.editorState;o=v.snapSelectionOutsideEntities({editorState:o},this.state.editorState.getSelection()).editorState;var s=o.getCurrentContent();s!==this.pastContentState&&(clearTimeout(this.lastIdleCallback),this.lastIdleCallback=setTimeout(function(){return t._updateParent(s,i)},y)),this.pastContentState=s,this.setState({editorState:o,widgets:i})},focus:function(e){this.editor.focus();var t=this.state.editorState;t=c.set(t,{selection:t.getSelection().set("hasFocus",!0),forceSelection:!0}),this.setState({editorState:t},e)},render:function(){var e=this;return i.createElement("div",{onCopy:this._handleCopy,onCut:this._handleCopy,onDragStart:this._handleCopy,style:{fontSize:this.state.fontSizePercentage+"%"}},i.createElement(l,{ref:function(t){return e.editor=t},editorState:this.state.editorState,onChange:function(t){return e._handleChange({editorState:t})},spellCheck:!0,stripPastedStyles:!0,placeholder:this.props.placeholder,handlePastedText:this._handlePaste,handleDroppedFiles:this._handleDroppedFiles,handleDrop:this._handleDrop,keyBindingFn:H,handleKeyCommand:this._handleKeyCommand,onTab:this._handleTab}))}});e.exports=j},function(e,t,n){"use strict";var r=n(17),i=n(18),o=n(11),s=n(71),a=n(16),l=n(5).Options,c=n(35),p=c.iconCircleArrowDown,u=c.iconCircleArrowUp,h=c.iconPlus,d=c.iconTrash,f=n(36),g=n(13),m=r.createClass({displayName:"HintEditor",propTypes:{apiOptions:l.propTypes,imageUploader:r.PropTypes.func},getDefaultProps:function(){return{content:"",replace:!1}},handleChange:function(e){this.props.onChange({replace:e.target.checked})},render:function(){return r.createElement("div",{className:"perseus-hint-editor perseus-editor-left-cell"},r.createElement("div",{className:"pod-title"},"Hint"),r.createElement(o,{ref:"editor",apiOptions:this.props.apiOptions,widgets:this.props.widgets,content:this.props.content,images:this.props.images,replace:this.props.replace,placeholder:"Type your hint here...",imageUploader:this.props.imageUploader,onChange:this.props.onChange}),r.createElement("div",{className:"hint-controls-container clearfix"},r.createElement("span",{className:"reorder-hints"},r.createElement("button",{type:"button",className:this.props.isLast?"hidden":"",onClick:i.partial(this.props.onMove,1)},r.createElement(f,p))," ",r.createElement("button",{type:"button",className:this.props.isFirst?"hidden":"",onClick:i.partial(this.props.onMove,-1)},r.createElement(f,u))," ",this.props.isLast&&r.createElement(s,null,r.createElement("p",null,"The last hint is automatically bolded."))),r.createElement("input",{type:"checkbox",checked:this.props.replace,onChange:this.handleChange}),"Replace previous hint",r.createElement("button",{type:"button",className:"remove-hint simple-button orange",onClick:this.props.onRemove},r.createElement(f,d),"Remove this hint"," ")))},focus:function(){this.refs.editor.focus()},getSaveWarnings:function(){return this.refs.editor.getSaveWarnings()},serialize:function(e){return this.refs.editor.serialize(e)}}),v=r.createClass({displayName:"CombinedHintEditor",propTypes:{apiOptions:l.propTypes,deviceType:r.PropTypes.string.isRequired,frameSource:r.PropTypes.string.isRequired,imageUploader:r.PropTypes.func},updatePreview:function(){var e=this.props.isLast&&!/\*\*/.test(this.props.hint.content);this.refs.frame.sendNewData({type:"hint",data:{hint:this.props.hint,bold:e,pos:this.props.pos,apiOptions:this.props.apiOptions}})},componentDidMount:function(){this.updatePreview()},componentDidUpdate:function(){this.updatePreview()},render:function(){var e="phone"===this.props.deviceType||"tablet"===this.props.deviceType;return r.createElement("div",{className:"perseus-combined-hint-editor perseus-editor-row"},r.createElement(m,{ref:"editor",isFirst:this.props.isFirst,isLast:this.props.isLast,widgets:this.props.hint.widgets,content:this.props.hint.content,images:this.props.hint.images,replace:this.props.hint.replace,imageUploader:this.props.imageUploader,onChange:this.props.onChange,onRemove:this.props.onRemove,onMove:this.props.onMove,apiOptions:this.props.apiOptions}),r.createElement("div",{className:"perseus-editor-right-cell"},r.createElement(a,{deviceType:this.props.deviceType,nochrome:!0},r.createElement(g,{ref:"frame",content:this.props.frameSource,datasetKey:"mobile",datasetValue:e,seamless:!0}))))},getSaveWarnings:function(){return this.refs.editor.getSaveWarnings()},serialize:function(e){return this.refs.editor.serialize(e)},focus:function(){this.refs.editor.focus()}}),y=r.createClass({displayName:"CombinedHintsEditor",propTypes:{apiOptions:l.propTypes,deviceType:r.PropTypes.string.isRequired,frameSource:r.PropTypes.string.isRequired,imageUploader:r.PropTypes.func},getDefaultProps:function(){return{onChange:function(){},hints:[]}},render:function(){var e=this.props.hints,t=i.map(e,function(t,n){return r.createElement(v,{ref:"hintEditor"+n,key:"hintEditor"+n,isFirst:0===n,isLast:n+1===e.length,hint:t,pos:n,imageUploader:this.props.imageUploader,onChange:this.handleHintChange.bind(this,n),onRemove:this.handleHintRemove.bind(this,n),onMove:this.handleHintMove.bind(this,n),deviceType:this.props.deviceType,apiOptions:this.props.apiOptions,frameSource:this.props.frameSource})},this);return r.createElement("div",{className:"perseus-hints-editor perseus-editor-table"},t,r.createElement("div",{className:"perseus-editor-row"},r.createElement("div",{className:"add-hint-container perseus-editor-left-cell"},r.createElement("button",{type:"button",className:"add-hint simple-button orange",onClick:this.addHint},r.createElement(f,h)," ","Add a hint"))))},handleHintChange:function(e,t,n,r){var o=i(this.props.hints).clone();o[e]=i.extend({},this.serializeHint(e,{keepDeletedWidgets:!0}),t),this.props.onChange({hints:o},n,r)},handleHintRemove:function(e){var t=i(this.props.hints).clone();t.splice(e,1),this.props.onChange({hints:t})},handleHintMove:function(e,t){var n=this,r=i(this.props.hints).clone(),o=r.splice(e,1)[0];r.splice(e+t,0,o),this.props.onChange({hints:r},function(){n.refs["hintEditor"+(e+t)].focus()})},addHint:function(){var e=this,t=i(this.props.hints).clone().concat([{content:""}]);this.props.onChange({hints:t},function(){var n=t.length-1;e.refs["hintEditor"+n].focus()})},getSaveWarnings:function(){var e=this;return i.chain(this.props.hints).map(function(t,n){return i.map(e.refs["hintEditor"+n].getSaveWarnings(),function(e){return"Hint "+(n+1)+": "+e})}).flatten(!0).value()},serialize:function(e){var t=this;return this.props.hints.map(function(n,r){return t.serializeHint(r,e)})},serializeHint:function(e,t){return this.refs["hintEditor"+e].serialize(t)}});e.exports=y},function(e,t,n){"use strict";var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},i=n(17),o=n(18),s=n(5).Options,a=n(11),l=n(72),c=n(16),p=n(69).itemDataVersion,u=n(13),h=i.createClass({displayName:"ItemEditor",propTypes:{apiOptions:s.propTypes,deviceType:i.PropTypes.string,frameSource:i.PropTypes.string.isRequired,gradeMessage:i.PropTypes.string,imageUploader:i.PropTypes.func,wasAnswered:i.PropTypes.bool},getDefaultProps:function(){return{onChange:function(){},question:{},answerArea:{}}},updateProps:function(e,t,n){var r=o(this.props).pick("question","answerArea");this.props.onChange(o(r).extend(e),t,n)},render:function(){var e="phone"===this.props.deviceType||"tablet"===this.props.deviceType;return i.createElement("div",{className:"perseus-editor-table"},i.createElement("div",{className:"perseus-editor-row perseus-question-container"},i.createElement("div",{className:"perseus-editor-left-cell"},i.createElement("div",{className:"pod-title"},"Question"),i.createElement(a,r({ref:"questionEditor",placeholder:"Type your question here...",className:"perseus-question-editor",imageUploader:this.props.imageUploader,onChange:this.handleEditorChange,apiOptions:this.props.apiOptions,showWordCount:!0},this.props.question))),i.createElement("div",{className:"perseus-editor-right-cell"},i.createElement("div",{id:"problemarea"},i.createElement(c,{deviceType:this.props.deviceType,
nochrome:!0},i.createElement(u,{ref:"frame",key:this.props.deviceType,content:this.props.frameSource,datasetKey:"mobile",datasetValue:e,seamless:!0})),i.createElement("div",{id:"hintsarea",className:"hintsarea",style:{display:"none"}})))),i.createElement("div",{className:"perseus-editor-row perseus-answer-container"},i.createElement("div",{className:"perseus-editor-left-cell"},i.createElement("div",{className:"pod-title"},"Question extras"),i.createElement(l,r({ref:"itemExtrasEditor",onChange:this.handleItemExtrasChange},this.props.answerArea))),i.createElement("div",{className:"perseus-editor-right-cell"},i.createElement("div",{id:"answer_area"}))))},triggerPreviewUpdate:function(e){this.refs.frame.sendNewData(e)},handleEditorChange:function(e,t,n){var r=o.extend({},this.props.question,e);this.updateProps({question:r},t,n)},handleItemExtrasChange:function(e,t,n){var r=o.extend({},this.props.answerArea,e);this.updateProps({answerArea:r},t,n)},getSaveWarnings:function(){return this.refs.questionEditor.getSaveWarnings()},serialize:function(e){return{question:this.refs.questionEditor.serialize(e),answerArea:this.refs.itemExtrasEditor.serialize(e),itemDataVersion:p}},focus:function(){this.questionEditor.focus()}});e.exports=h},function(e,t,n){"use strict";var r=n(51),i=n(17),o=n(18),s=n(89),a=n(85),l=n(86),c="before",p="after",u=/http.*?\.png/g,h=function(e){return e.match(u)||[]},d=function(e,t,n){return e.added?t:e.removed?n:""},f=i.createClass({displayName:"ImageDiffSide",propTypes:{side:i.PropTypes.oneOf([c,p]).isRequired,images:i.PropTypes.array.isRequired},render:function(){return i.createElement("div",null,this.props.images.length>0&&i.createElement("div",{className:"diff-header"},"Images"),o.map(this.props.images,function(e,t){var n=r({image:!0,"image-unchanged":"unchanged"===e.status,"image-added":"added"===e.status,"image-removed":"removed"===e.status});return i.createElement("div",{key:t},i.createElement("img",{src:e.value,title:e.value,className:n}))}))}}),g=i.createClass({displayName:"TextDiff",propTypes:{before:i.PropTypes.string,after:i.PropTypes.string,title:i.PropTypes.string},getDefaultProps:function(){return{before:"",after:"",title:""}},getInitialState:function(){return{collapsed:this.props.before===this.props.after}},componentWillReceiveProps:function(e){this.setState({collapsed:e.before===e.after})},render:function(){var e=this,t=s.diffWords(this.props.before,this.props.after),n=a(t),u=h(this.props.before),g=h(this.props.after),m=l(u,g),v=o.map(n,function(e){var t={};return t.before=o(e).map(function(e,t){var n=d(e,"not-present","removed dark");return i.createElement("span",{key:t,className:n},e.value)}),t.after=o(e).map(function(e,t){var n=d(e,"added dark","not-present");return i.createElement("span",{key:t,className:n},e.value)}),t}),y=r({"diff-row":!0,collapsed:this.state.collapsed});return i.createElement("div",null,i.createElement("div",{className:"perseus-clearfix"},o.map([c,p],function(t,n){return i.createElement("div",{className:"diff-row "+t,key:n},!e.state.collapsed&&o.map(v,function(e,n){var o=e[t].length>1,s=r({"diff-line":!0,added:t===p&&o,removed:t===c&&o});return i.createElement("div",{className:s,key:n},e[t])}),!e.state.collapsed&&i.createElement(f,{side:t,images:m[t]}))})),o.map([c,p],function(t,n){return i.createElement("div",{className:y+" "+t,key:n,onClick:e.handleExpand},e.state.collapsed&&i.createElement("span",null,i.createElement("span",{className:"expand-button"}," ","[ show unmodified ]")))}))},handleExpand:function(){this.setState({collapsed:!1})}});e.exports=g},function(e,t,n){"use strict";var r=n(51),i=n(17),o=n(18),s=n(87),a=function(e){return 20*(e-1)},l="before",c="after",p="unchanged",u=i.createClass({displayName:"DiffSide",propTypes:{side:i.PropTypes.oneOf([l,c]).isRequired,className:i.PropTypes.string.isRequired,showKey:i.PropTypes.bool.isRequired,propKey:i.PropTypes.string.isRequired,value:i.PropTypes.string,depth:i.PropTypes.number.isRequired},render:function(){var e=r(this.props.className,{"diff-row":!0,before:this.props.side===l,after:this.props.side===c});return i.createElement("div",{className:e},i.createElement("div",{style:{paddingLeft:a(this.props.depth)}},this.props.showKey&&this.props.propKey+": ",i.createElement("span",{className:"inner-value dark "+this.props.className},this.props.value)))}}),h=i.createClass({displayName:"CollapsedRow",propTypes:{depth:i.PropTypes.number,onClick:i.PropTypes.func.isRequired},getDefaultProps:function(){return{depth:0}},render:function(){var e=this;return i.createElement("div",{onClick:e.props.onClick},o.map([l,c],function(t){return i.createElement("div",{className:"diff-row collapsed "+t,key:t},i.createElement("div",{style:{paddingLeft:a(e.props.depth)}},i.createElement("span",null," [ show unmodified ] ")))}))}}),d=i.createClass({displayName:"DiffEntry",propTypes:{entry:i.PropTypes.shape({key:i.PropTypes.string,children:i.PropTypes.array,before:i.PropTypes.string,after:i.PropTypes.string}),depth:i.PropTypes.number,expanded:i.PropTypes.bool},getDefaultProps:function(){return{depth:0}},getInitialState:function(){return{expanded:this.props.expanded}},render:function(){var e,t=this.props.entry,n="removed"===t.status,s="added"===t.status,a="changed"===t.status,f=t.children.length>0,g=r({removed:(n||a)&&!f,dark:n,"blank-space":s}),m=r({added:(s||a)&&!f,dark:s,"blank-space":n});e=this.state.expanded?t.children:o(t.children).select(function(e){return e.status!==p});var v=e.length<t.children.length;t.children.length===e.length+1&&(e=t.children,v=!1);var y=this;return i.createElement("div",null,t.key&&i.createElement("div",null,i.createElement(u,{side:l,className:g,depth:this.props.depth,propKey:t.key,showKey:!s,value:t.before}),i.createElement(u,{side:c,className:m,depth:this.props.depth,propKey:t.key,showKey:!n,value:t.after})),o.map(e,function(e){return i.createElement(d,{key:e.key,depth:y.props.depth+1,entry:e,expanded:y.state.expanded})}),v&&i.createElement(h,{depth:this.props.depth+1,onClick:this.expand}))},expand:function(){this.setState({expanded:!0})}}),f=i.createClass({displayName:"WidgetDiff",propTypes:{before:i.PropTypes.shape({options:i.PropTypes.object}).isRequired,after:i.PropTypes.shape({options:i.PropTypes.object}).isRequired,title:i.PropTypes.string.isRequired},render:function(){var e=s(this.props.before,this.props.after);return i.createElement("div",null,i.createElement("div",{className:"perseus-clearfix"},i.createElement(d,{entry:e})))}});e.exports=f},function(e,t,n){"use strict";var r={PHONE:"phone",TABLET:"tablet",DESKTOP:"desktop"};e.exports={devices:r}},function(e,t,n){"use strict";var r=n(21),i=n(18),o=n(88),s=Math.pow(2,-42),a={predicate:{defaultForms:"integer, proper, improper, mixed, decimal",createValidatorFunctional:function(e,t){t=i.extend({simplify:"required",ratio:!1,forms:a.predicate.defaultForms},t);var n=void 0;n=i.isArray(t.forms)?t.forms:t.forms.split(/\s*,\s*/),void 0===t.inexact&&(t.maxError=0),t.maxError=+t.maxError+s,i.contains(n,"percent")&&(n=i.without(n,"percent"),n.push("percent"));var l=function(e){e=e.replace(/\u2212/,"-").replace(/([+-])\s+/g,"$1").replace(/(^\s*)|(\s*$)/gi,"");var n=e.match(/^([+-]?\d+)\s*\/\s*([+-]?\d+)$/),r=parseInt(e,10);if(n){var i=parseFloat(n[1]),s=parseFloat(n[2]),a=s>0&&(t.ratio||"1"!==n[2])&&1===o.getGCD(i,s);return[{value:i/s,exact:a}]}return isNaN(r)||""+r!==e?[]:[{value:r,exact:!0}]},c={integer:function(e){var t=c.decimal(e),n=c.decimal(e,1);return null!=t[0].value&&t[0].value===n[0].value||null!=t[1].value&&t[1].value===n[1].value?t:[]},proper:function(e){return r.map(l(e),function(e){return Math.abs(e.value)<1?[e]:[]})},improper:function(e){return r.map(l(e),function(e){return Math.abs(e.value)>=1?[e]:[]})},pi:function(e){var t=void 0,n=[];if(e=e.replace(/\u2212/,"-"),t=e.match(/^([+-]?)\s*(\\?pi|p|\u03c0|\\?tau|t|\u03c4|pau)$/i))n=[{value:parseFloat(t[1]+"1"),exact:!0}];else if(t=e.match(/^([+-]?\s*\d+\s*(?:\/\s*[+-]?\s*\d+)?)\s*\*?\s*(\\?pi|p|\u03c0|\\?tau|t|\u03c4|pau)$/i))n=l(t[1]);else if(t=e.match(/^([+-]?)\s*(\d+)\s*([+-]?\d+)\s*\/\s*([+-]?\d+)\s*\*?\s*(\\?pi|p|\u03c0|\\?tau|t|\u03c4|pau)$/i)){var s=parseFloat(t[1]+"1"),p=parseFloat(t[2]),u=parseFloat(t[3]),h=parseFloat(t[4]),d=u<h&&1===o.getGCD(u,h);n=[{value:s*(p+u/h),exact:d}]}else if(t=e.match(/^([+-]?\s*\d+)\s*\*?\s*(\\?pi|p|\u03c0|\\?tau|t|\u03c4|pau)\s*(?:\/\s*([+-]?\s*\d+))?$/i))n=l(t[1]+"/"+t[3]);else if(t=e.match(/^([+-]?)\s*\*?\s*(\\?pi|p|\u03c0|\\?tau|t|\u03c4|pau)\s*(?:\/\s*([+-]?\d+))?$/i))n=l(t[1]+"1/"+t[3]);else if("0"===e)n=[{value:0,exact:!0}];else{if(!(t=e.match(/^(.+)\s*\*?\s*(\\?pi|p|\u03c0|\\?tau|t|\u03c4|pau)$/i))){n=i.reduce(a.predicate.defaultForms.split(/\s*,\s*/),function(t,n){return t.concat(c[n](e))},[]);var f=!1,g=parseFloat(e);if(isNaN(g)||g===parseInt(e))e.match(/\/\s*7/)&&(f=!0);else{var m=Math.PI/12,v=m*Math.round(g/m);Math.abs(g-v)<.01&&(f=!0)}return f&&i.each(n,function(e){e.piApprox=!0}),n}n=c.decimal(t[1])}var y=Math.PI;return e.match(/\\?tau|t|\u03c4/)&&(y=2*Math.PI),e.match(/pau/)&&(y=1.5*Math.PI),r.each(n,function(e,t){t.value*=y}),n},coefficient:function(e){var t=[];return e=e.replace(/\u2212/,"-"),""===e?t=[{value:1,exact:!0}]:"-"===e&&(t=[{value:-1,exact:!0}]),t},log:function(e){var t=void 0,n=[];return e=e.replace(/\u2212/,"-"),e=e.replace(/[ \(\)]/g,""),(t=e.match(/^log\s*(\S+)\s*$/i))?n=c.decimal(t[1]):"0"===e&&(n=[{value:0,exact:!0}]),n},percent:function(e){e=r.trim(e);var t=!1;e.indexOf("%")===e.length-1&&(e=r.trim(e.substring(0,e.length-1)),t=!0);var n=c.decimal(e);return r.each(n,function(e,n){n.exact=t,n.value=n.value/100}),n},mixed:function(e){var t=e.replace(/\u2212/,"-").replace(/([+-])\s+/g,"$1").match(/^([+-]?)(\d+)\s+(\d+)\s*\/\s*(\d+)$/);if(t){var n=parseFloat(t[1]+"1"),r=parseFloat(t[2]),i=parseFloat(t[3]),s=parseFloat(t[4]),a=i<s&&1===o.getGCD(i,s);return[{value:n*(r+i/s),exact:a}]}return[]},decimal:function(e,n){null==n&&(n=1e10);var i=function(e){e=r.trim(e);var i=e.replace(/\u2212/,"-").replace(/([+-])\s+/g,"$1").match(/^([+-]?(?:\d{1,3}(?:[, ]?\d{3})*\.?|\d{0,3}(?:[, ]?\d{3})*\.(?:\d{3}[, ]?)*\d{1,3}))$/),o=e.match(/^0[0,]*,/);if(i&&!o){var s=parseFloat(i[1].replace(/[, ]/g,""));return void 0===t.inexact&&(s=Math.round(s*n)/n),s}},o=function(e){return e=e.replace(/([\.,])/g,function(e,t){return"."===t?",":"."}),i(e)};return[{value:i(e),exact:!0},{value:o(e),exact:!0}]}};return function(o){var s=null!=t.fallback?""+t.fallback:"";o=r.trim(o)||s;var a={empty:""===o,correct:!1,message:null,guess:o};if(r.each(n,function(n,r){for(var i=c[r](o),s=0,l=i.length;s<l;s++){var p=i[s].value,u=i[s].exact,h=i[s].piApprox;if(e(p,t.maxError))return u||"optional"===t.simplify?(a.correct=!0,a.message=t.message||null,a.empty=!1):"percent"===r?(a.empty=!0,a.message=i18n._("Your answer is almost correct, but it is missing a <code>\\%</code> at the end.")):("enforced"!==t.simplify&&(a.empty=!0),a.message=i18n._("Your answer is almost correct, but it needs to be simplified.")),!1;h&&e(p,Math.abs(.001*p))&&(a.empty=!0,a.message=i18n._("Your answer is close, but you may have approximated pi. Enter your answer as a multiple of pi, like <code>12\\ \\text{pi}</code> or <code>2/3\\ \\text{pi}</code>"))}}),a.correct===!1){var l=!1;if(i.each(c,function(e){var t=i.any(e(o),function(e){return null!=e.value&&!i.isNaN(e.value)});t&&(l=!0)}),!l)return a.empty=!0,a.message=i18n._("We could not understand your answer. Please check your answer for extra text or symbols."),a}return a}}},number:{convertToPredicate:function(e,t){var n=parseFloat(r.trim(e));return[function(e,t){return Math.abs(e-n)<t},r.extend({},t,{type:"predicate"})]},createValidatorFunctional:function(e,t){var n;return(n=a.predicate).createValidatorFunctional.apply(n,a.number.convertToPredicate(e,t))}},expression:{parseSolution:function(e,t){var n=KAS.parse(e,t);if(!n.parsed)throw new Error("The provided solution ("+e+") didn't parse.");if(t.simplified&&!n.expr.isSimplified())throw new Error("The provided solution ("+e+") isn't fully expanded and simplified.");return n=n.expr},createValidatorFunctional:function(e,t){return function(n){var r={empty:!1,correct:!1,message:null,guess:n};if(!n)return r.empty=!0,r;var i=KAS.parse(n,t);if(!i.parsed)return r.empty=!0,r;"string"==typeof e&&(e=a.expression.parseSolution(e,t));var o=KAS.compare(i.expr,e,t);if(o.equal)r.correct=!0;else if(o.message)r.message=o.message;else{var s=KAS.parse(n.replace(/[xX]/g,"*"),t);if(s.parsed){var l=KAS.compare(s.expr,e,t);l.equal?(r.empty=!0,r.message="I'm a computer. I only understand multiplication if you use an asterisk (*) as the multiplication sign."):l.message&&(r.message=l.message+" Also, I'm a computer. I only understand multiplication if you use an asterisk (*) as the multiplication sign.")}}return r}}}};e.exports=a},function(e,t,n){"use strict";e.exports=function(e){return e.replace(/\{align[*]?\}/g,"{aligned}")}},function(e,t,n){"use strict";var r=n(18),i=n(33),o=new RegExp('(\\[\\[☃ (passage-ref [0-9]+)\\]\\])\\s\\(["“]([\\s\\S]*)["”]\\)',"g"),s=function(e){var t=r.clone(e.widgets||{}),n=(e.content||"").replace(o,function(e,n,i,o){return t[i]=r.extend({},t[i],{options:r.extend({},t[i].options,{summaryText:o})}),n});return r.extend({},e,{content:n,widgets:t})},a=new RegExp('\\{\\{(passage-ref \\d+ \\d+)}}\\s+\\(["\\u201C]([^"]*)["\\u201D]\\)',"g"),l=function(e,t,n){return/\n\n/.test(n)?e:"{{"+t+' "'+n+'"}}'},c=function(e){if("radio"!==e.type||!e.options||!e.options.choices)return e;var t=r.map(e.options.choices,function(e){if(!e.content)return e;var t=e.content.replace(a,l);return r.extend({},e,{content:t})});return r.extend({},e,{options:r.extend({},e.options,{choices:t})})},p=function(e){return i.traverseRendererDeep(e,null,c,s)},u=function(e){var t=p(e.question),n=r.map(e.hints,function(e){return p(e)});return r.extend({},e,{question:t,hints:n})};e.exports=u},function(e,t,n){"use strict";e.exports=["key","ref","containerSizeClass","widgetId","onChange","problemNum","apiOptions","questionCompleted","interWidgets","onRemove","id","onBlur","onFocus","trackInteraction","keypadElement"]},function(e,t,n){"use strict";var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},i=n(17),o=n(5).Options,s={propTypes:{apiOptions:i.PropTypes.any},getDefaultProps:function(){return{apiOptions:{}}},getApiOptions:function(){return r({},o.defaults,this.props.apiOptions)}};e.exports=s},function(e,t,n){e.exports=o},function(e,t,n){e.exports=s},function(e,t,n){"use strict";var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},i=n(17),o=n(18),s=i.createClass({displayName:"DragTarget",propTypes:{onDrop:i.PropTypes.func.isRequired,component:i.PropTypes.any,shouldDragHighlight:i.PropTypes.func},render:function(){var e=this.state.dragHover?{opacity:.3}:{},t=this.props.component;return i.createElement(t,r({},this.props,{style:o.extend({},this.props.style,e),onDrop:this.handleDrop,onDragEnd:this.handleDragEnd,onDragOver:this.handleDragOver,onDragEnter:this.handleDragEnter,onDragLeave:this.handleDragLeave}))},getInitialState:function(){return{dragHover:!1}},getDefaultProps:function(){return{component:"div",shouldDragHighlight:function(){return!0}}},handleDrop:function(e){e.stopPropagation(),e.preventDefault(),this.setState({dragHover:!1}),this.props.onDrop(e)},handleDragEnd:function(){this.setState({dragHover:!1})},handleDragOver:function(e){e.preventDefault()},handleDragLeave:function(){this.setState({dragHover:!1})},handleDragEnter:function(e){this.setState({dragHover:this.props.shouldDragHighlight(e)})}});e.exports=s},function(e,t,n){"use strict";var r=n(17),i=n(19),o=n(18),s=n(91),a=n(52).css,l=r.createClass({displayName:"ButtonGroup",propTypes:{value:r.PropTypes.any,buttons:r.PropTypes.arrayOf(r.PropTypes.shape({value:r.PropTypes.any.isRequired,content:r.PropTypes.node,title:r.PropTypes.string})).isRequired,onChange:r.PropTypes.func.isRequired,allowEmpty:r.PropTypes.bool},getDefaultProps:function(){return{value:null,allowEmpty:!0}},render:function(){var e=this,t=this.props.value,n=o(this.props.buttons).map(function(n,i){return r.createElement("button",{title:n.title,type:"button",id:""+i,ref:"button"+i,key:""+i,className:a(s.button.buttonStyle,n.value===t&&s.button.selectedStyle),onClick:e.toggleSelect.bind(e,n.value)},n.content||""+n.value)}),i={display:"inline-block"};return r.createElement("div",{style:i},n)},focus:function(){return i.findDOMNode(this).focus(),!0},toggleSelect:function(e){var t=this.props.value;this.props.allowEmpty?this.props.onChange(t!==e?e:null):this.props.onChange(e)}});e.exports=l},function(e,t,n){"use strict";var r=n(17),i=n(19),o=n(162).components.Keypad,s={propTypes:{apiOptions:r.PropTypes.shape({customKeypad:r.PropTypes.bool}),keypadStyle:r.PropTypes.any},getInitialState:function(){return{keypadElement:null}},componentDidMount:function(){var e=this;this.props.apiOptions&&this.props.apiOptions.customKeypad&&(this._keypadContainer=document.createElement("div"),document.body.appendChild(this._keypadContainer),i.render(r.createElement(o,{onElementMounted:function(t){e.setState({keypadElement:t})},onDismiss:function(){e.blur&&e.blur()},style:this.props.keypadStyle}),this._keypadContainer))},componentWillUnmount:function(){this._keypadContainer&&(i.unmountComponentAtNode(this._keypadContainer),this._keypadContainer.parentNode&&this._keypadContainer.parentNode.removeChild(this._keypadContainer),this._keypadContainer=null)},keypadElement:function(){return this.state.keypadElement}};e.exports=s},function(e,t,n){"use strict";e.exports=[[n(92),n(93)],[n(94),n(95)],[n(96),n(97)],[n(98),n(99)],[n(100),n(101)],[n(102),n(103)],[n(104),n(105)],[n(106),n(107)],[n(108),n(109)],[n(110),n(111)],[n(112),n(113)],[n(114),n(115)],[n(116),n(117)],[n(118),n(119)],[n(120),n(121)],[n(122),n(123)],[n(124),n(125)],[n(126),n(127)],[n(128),n(129)],[n(130),n(131)],[n(132),n(133)],[n(134),n(135)],[n(136),n(137)],[n(138),n(139)],[n(140),n(141)],[n(142),n(143)],[n(144),n(145)],[n(146),n(147)],[n(148),n(149)],[n(150),n(151)],[n(152),n(153)],[n(154),n(155)],[n(156),n(157)],[n(158),n(159)]]},function(e,t,n){"use strict";var r,i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},o=n(17),s=n(52),a=s.StyleSheet,l=s.css,c=n(51),p=window.i18n,u=n(29),h=n(5).Options,d=n(82),f=n(84),g=f.baseUnitPx,m=f.hintBorderWidth,v=f.kaGreen,y=f.gray97,b=o.createClass({displayName:"HintRenderer",propTypes:{apiOptions:h.propTypes,className:o.PropTypes.string,hint:o.PropTypes.any,lastHint:o.PropTypes.bool,lastRendered:o.PropTypes.bool,pos:o.PropTypes.number,totalHints:o.PropTypes.number},getSerializedState:function(){return this.refs.renderer.getSerializedState()},restoreSerializedState:function(e,t){this.refs.renderer.restoreSerializedState(e,t)},render:function(){var e=this.props,t=e.apiOptions,n=e.className,r=e.hint,s=e.lastHint,a=e.lastRendered,h=e.pos,d=e.totalHints,f=t.isMobile,g=c(!f&&"perseus-hint-renderer",f&&l(E.newHint),f&&a&&l(E.lastRenderedNewHint),s&&"last-hint",a&&"last-rendered",n),m=i({},t,{customKeypad:!1,staticRender:!1});return o.createElement("div",{className:g,tabIndex:"-1"},!t.isMobile&&o.createElement("span",{className:"perseus-sr-only"},p._("Hint #%(pos)s",{pos:h+1})),!t.isMobile&&d&&null!=h&&o.createElement("span",{className:"perseus-hint-label",style:{display:"block"}},h+1+" / "+d),o.createElement(u,{ref:"renderer",widgets:r.widgets,content:r.content||"",images:r.images,apiOptions:m}))}}),E=a.create({newHint:(r={marginBottom:1.5*g,borderLeftColor:y,borderLeftStyle:"solid",borderLeftWidth:m},r[d.lgOrSmaller]={paddingLeft:g},r[d.smOrSmaller]={paddingLeft:0},r[":focus"]={outline:"none"},r),lastRenderedNewHint:{marginBottom:0,borderLeftColor:v}});e.exports=b},function(e,t,n){"use strict";var r=n(167),i={paragraph:{match:r.defaultRules.paragraph.match,order:1,parse:function(e,t,n){return e[1]}}},o=r.parserFor(i),s=function(e){var t=e.replace(/^\n\s*\n/,"")+"\n\n";return o(t,{inline:!1})},a=function(e){return e.join("\n\n")};e.exports={parseToArray:s,joinFromArray:a}},function(e,t,n){"use strict";var r=n(17),i=r.createClass({displayName:"QuestionParagraph",render:function(){var e=this.props.className?"paragraph "+this.props.className:"paragraph";return r.createElement("div",{className:e,"data-perseus-component-index":this.props.translationIndex,"data-perseus-paragraph-index":this.props.paragraphIndex},this.props.children)}});e.exports=i},function(e,t,n){"use strict";var r=n(90),i=n(17),o=n(19),s=n(160),a=[],l=[],c=!1,p=function(e,t){a.push(e),l.push(t),c||(c=!0,setTimeout(h,0))},u=function(e){if("undefined"!=typeof MathJax)e();else{if("undefined"==typeof Khan||!Khan.mathJaxLoaded)throw new Error("MathJax wasn't loaded before it was needed by <TeX/>");Khan.mathJaxLoaded.then(e)}},h=function(){u(function(){MathJax.Hub.Queue(function(){var e=MathJax.Hub.elementScripts;MathJax.Hub.elementScripts=function(e){return a};try{return MathJax.Hub.Process(null,function(){for(var e=l,t=Array.isArray(e),n=0,e=t?e:e[Symbol.iterator]();;){var r;if(t){if(n>=e.length)break;r=e[n++]}else{if(n=e.next(),n.done)break;r=n.value}var i=r;i()}a=[],l=[],c=!1})}catch(e){throw e}finally{MathJax.Hub.elementScripts=e}})})},d={border:0,clip:"rect(0,0,0,0)",height:"1px",margin:"-1px",overflow:"hidden",padding:0,position:"absolute",width:"1px"},f=i.createClass({displayName:"TeX",propTypes:{children:i.PropTypes.node,onClick:i.PropTypes.func,onRender:i.PropTypes.func,style:i.PropTypes.any},mixins:[r],getDefaultProps:function(){return{onRender:function(){},onClick:null}},componentDidMount:function(){var e=this;if(this._root=o.findDOMNode(this),this.refs.katex.childElementCount>0)return void this.props.onRender(this._root);var t=this.props.children;this.setScriptText(t),p(this.script,function(){return e.props.onRender(e._root)})},componentDidUpdate:function(e,t){var n=this;if(this.refs.katex.childElementCount>0)return this.script&&u(function(){var e=MathJax.Hub.getJaxFor(n.script);e&&e.Remove()}),void this.props.onRender();var r=this.props.children;this.script?u(function(){MathJax.Hub.Queue(function(){var e=MathJax.Hub.getJaxFor(n.script);return e?e.Text(r,n.props.onRender):(n.setScriptText(r),void p(n.script,n.props.onRender))})}):(this.setScriptText(r),p(this.script,this.props.onRender))},componentWillUnmount:function(){var e=this;this.script&&u(function(){var t=MathJax.Hub.getJaxFor(e.script);t&&t.Remove()})},setScriptText:function(e){this.script||(this.script=document.createElement("script"),this.script.type="math/tex",o.findDOMNode(this.refs.mathjax).appendChild(this.script)),"text"in this.script?this.script.text=e:this.script.textContent=e},render:function(){var e=null;try{e={__html:katex.renderToString(this.props.children)}}catch(e){if(e.__proto__!==katex.ParseError.prototype)throw e}var t=null;if(e)try{t={__html:s.renderString(this.props.children)}}catch(e){}return i.createElement("span",{style:this.props.style,onClick:this.props.onClick},i.createElement("span",{ref:"mathjax"}),i.createElement("span",{ref:"katex",dangerouslySetInnerHTML:e,"aria-hidden":!!e&&!!t}),i.createElement("span",{dangerouslySetInnerHTML:t,style:d}))}});e.exports=f},function(e,t,n){"use strict";var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},i=n(51),o=n(17),s=n(19),a=n(22),l=n(161),c=l.containerSizeClass,p=l.getClassFromWidth,u=o.createClass({displayName:"WidgetContainer",propTypes:{shouldHighlight:o.PropTypes.bool.isRequired,type:o.PropTypes.string,initialProps:o.PropTypes.object.isRequired},getInitialState:function(){return{sizeClass:c.MEDIUM,widgetProps:this.props.initialProps}},componentDidMount:function(){if(this.state.widgetProps.apiOptions.isMobile){var e=s.findDOMNode(this).offsetWidth;this.setState({sizeClass:p(e)})}},render:function(){var e=i({"perseus-widget-container":!0,"widget-highlight":this.props.shouldHighlight,"widget-nohighlight":!this.props.shouldHighlight}),t=this.props.type,n=a.getWidget(t);if(null==n)return o.createElement("div",{className:e});var s=this.state.widgetProps.alignment;"default"===s&&(s=a.getDefaultAlignment(t)),e+=" widget-"+s;var l=this.state.widgetProps.apiOptions,c=this.state.widgetProps.static||l.readOnly,p={position:"relative",overflow:"visible"},u={width:"100%",height:"100%",position:"absolute",top:0,left:0,zIndex:100};return o.createElement("div",{className:e,style:c?p:{}},o.createElement(n,r({},this.state.widgetProps,{containerSizeClass:this.state.sizeClass,ref:"widget"})),c&&o.createElement("div",{style:u}))},componentWillReceiveProps:function(e){if(this.props.type!==e.type)throw new Error("WidgetContainer can't change widget type; set a different key instead to recreate the container.")},shouldComponentUpdate:function(e,t){return this.props.shouldHighlight!==e.shouldHighlight||this.props.type!==e.type||this.state.widgetProps!==t.widgetProps||this.state.sizeClass!==t.sizeClass},getWidget:function(){return this.refs.widget},replaceWidgetProps:function(e){this.setState({widgetProps:e})}});e.exports=u},function(e,t,n){"use strict";var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},i=n(17),o=n(19),s=n(63),a=i.createClass({displayName:"Zoomable",propTypes:{animateHeight:i.PropTypes.bool,children:i.PropTypes.element.isRequired,computeChildBounds:i.PropTypes.func,readyToMeasureDeferred:i.PropTypes.shape({then:i.PropTypes.func.isRequired,reject:i.PropTypes.func.isRequired}).isRequired},getDefaultProps:function(){var e=new s;return e.resolve(),{animateHeight:!1,readyToMeasureDeferred:e,computeChildBounds:function(e){var t=e.firstElementChild;return{width:t.offsetWidth+1,height:t.offsetHeight+1}}}},getInitialState:function(){return{visible:!1,marginBottomPx:0,zoomed:!0}},componentDidMount:function(){var e=this;this._node=o.findDOMNode(this),this.props.readyToMeasureDeferred.then(function(){e.isMounted()&&(e.scaleChildToFit(!1),window.MutationObserver&&(e._observer=new MutationObserver(function(t){if(e.isMounted())for(var n=t,r=Array.isArray(n),i=0,n=r?n:n[Symbol.iterator]();;){var o;if(r){if(i>=n.length)break;o=n[i++]}else{if(i=n.next(),i.done)break;o=i.value}var s=o;if(s.target!==e._node){e.scaleChildToFit(e.state.zoomed);break}}}),e._observer.observe(e._node,{childList:!0,subtree:!0,attributes:!0})),window.addEventListener("resize",e.reset))})},componentWillUnmount:function(){window.removeEventListener("resize",this.reset),this._observer&&this._observer.disconnect()},reset:function(){var e=this;this.isMounted()&&this.state.visible&&(this._originalWidth=null,this.setState({visible:!1,compactHeight:null,expandedHeight:null,zoomed:!0},function(){e.scaleChildToFit(!1)}))},stopPropagationIfZoomed:function(e){this.state.zoomed||e.stopPropagation()},scaleChildToFit:function(e){var t=this,n={width:this._node.offsetWidth,height:this._node.offsetHeight},r=this.props.computeChildBounds(this._node,n),i=r.width,o=r.height;if(i>n.width){var s=n.width/i;this.setState({scale:s,zoomed:e,compactHeight:Math.ceil(s*o),expandedHeight:o}),setTimeout(function(){t.isMounted()&&t.setState({visible:!0})})}else this.setState({visible:!0})},handleClickIfZoomed:function(e){this.state.zoomed||(e.stopPropagation(),this.handleClick())},handleClick:function(){this.setState({zoomed:!this.state.zoomed})},render:function(){var e=this.state,t=e.visible,n=e.scale,o=e.compactHeight,s=e.expandedHeight,a=e.zoomed,l=this.props.animateHeight,c=l?"opacity transform height":"opacity transform",p=t?{transitionProperty:c,WebkitTransitionProperty:c,msTransitionProperty:c,transitionDuration:"0.3s",WebkitTransitionDuration:"0.3s",msTransitionDuration:"0.3s",transitionTimingFunction:"ease-out",WebkitTransitionTimingfunction:"ease-out",msTransitionTmingFunction:"ease-out"}:{},u=t?"":" translate(0, 8px)",h=a?"scale(1, 1) "+u:"scale("+n+", "+n+") "+u,d=r({display:"block",width:"100%",height:a?s:o,transform:h,WebkitTransform:h,msTransform:h,transformOrigin:"0 0",WebkitTransformOrigin:"0 0",msTransformOrigin:"0 0",opacity:t?1:0,WebkitTapHighlightColor:"transparent"},p);return i.createElement("span",{onClick:this.handleClick,onClickCapture:this.handleClickIfZoomed,onTouchCancelCapture:this.stopPropagationIfZoomed,onTouchEndCapture:this.stopPropagationIfZoomed,onTouchStartCapture:this.stopPropagationIfZoomed,style:d},this.props.children)}});e.exports=a},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var i=function(){function e(){var t=this;r(this,e),this.promise=new Promise(function(e,n){t.resolve=e,t.reject=n})}return e.prototype.then=function(e){return this.promise.then(e)},e}();e.exports=i},function(e,t,n){"use strict";function r(e){if(!a[e]){var t=$("<span>").text(e).appendTo("body");a[e]=t.width()+5,t.remove()}return a[e]}var i=n(17),o=n(19),s=n(18),a={},l=i.createClass({displayName:"TextListEditor",propTypes:{options:i.PropTypes.array,layout:i.PropTypes.string,onChange:i.PropTypes.func.isRequired},getDefaultProps:function(){return{options:[],layout:"horizontal"}},getInitialState:function(){return{items:this.props.options.concat("")}},componentWillReceiveProps:function(e){this.setState({items:e.options.concat("")})},render:function(){var e=["perseus-text-list-editor","perseus-clearfix","layout-"+this.props.layout].join(" "),t=s.map(this.state.items,function(e,t){return i.createElement("li",{key:t},i.createElement("input",{ref:"input_"+t,type:"text",value:e,onChange:this.onChange.bind(this,t),onKeyDown:this.onKeyDown.bind(this,t),style:{width:r(e)}}))},this);return i.createElement("ul",{className:e},t)},onChange:function(e,t){var n=s.clone(this.state.items);n[e]=t.target.value,e===n.length-1&&(n=n.concat("")),this.setState({items:n}),this.props.onChange(s.compact(n))},onKeyDown:function(e,t){var n=t.nativeEvent.keyCode;if(8===n&&""===this.state.items[e]){t.preventDefault();var r=s.clone(this.state.items),i=0===e?0:e-1;e!==r.length-1||0!==e&&""===r[i]?(r.splice(e,1),this.setState({items:r},function(){o.findDOMNode(this.refs["input_"+i]).focus()})):o.findDOMNode(this.refs["input_"+i]).focus()}else if(8===n&&1===this.state.items[e].length&&e===this.state.items.length-2){t.preventDefault();var r=s.clone(this.state.items);r.splice(e,1),this.setState({items:r}),this.props.onChange(s.compact(r))}else if(13===n){t.preventDefault();var r=s.clone(this.state.items),i=e+1;e===r.length-2?o.findDOMNode(this.refs["input_"+i]).focus():(r.splice(i,0,""),this.setState({items:r},function(){o.findDOMNode(this.refs["input_"+i]).focus()}))}}});e.exports=l},function(e,t,n){"use strict";var r=n(51),i=n(17),o=n(84),s=o.negativePhoneMargin,a=480,l=i.createClass({displayName:"FixedToResponsive",propTypes:{width:i.PropTypes.number.isRequired,height:i.PropTypes.number.isRequired,className:i.PropTypes.string,constrainHeight:i.PropTypes.bool,allowFullBleed:i.PropTypes.bool},getDefaultProps:function(){return{className:"",constrainHeight:!1,allowFullBleed:!1}},getInitialState:function(){return{viewportHeight:null,viewportWidth:null}},componentDidMount:function(){window.innerHeight<a?setTimeout(this._cacheViewportSize,800):this._cacheViewportSize()},_cacheViewportSize:function(){this.isMounted()&&this.setState({viewportHeight:Math.max(a,window.innerHeight),viewportWidth:window.innerWidth})},render:function(){var e=this.props.width/this.props.height,t=i.createElement("div",{style:{paddingBottom:100*(1/e).toFixed(4)+"%"}}),n=this.props,o=n.width,a=n.height;if(this.props.constrainHeight&&this.state.viewportHeight){var l=2/3*this.state.viewportHeight;this.props.height>=l&&(a=l,o=l*e)}var c={maxWidth:o,maxHeight:a},p=r("fixed-to-responsive",this.props.className),u=i.createElement("div",{className:p,
style:c},t,this.props.children),h=this.props.allowFullBleed&&this.state.viewportWidth&&o>=this.state.viewportWidth;return h?i.createElement("div",{style:{marginLeft:s,marginRight:s}},u):u}});e.exports=l},function(e,t,n){"use strict";var r=n(17),i=n(19),o=n(18),s=n(163),a=n(164),l=s.GraphieMovable,c=n(6).deepEq,p=n(6).nestedMap,u=n(165).assert,h=n(166),d=h.createGraphie,f=r.createClass({displayName:"Graphie",propTypes:{addMouseLayer:r.PropTypes.bool,box:r.PropTypes.arrayOf(r.PropTypes.number).isRequired,children:r.PropTypes.node,isMobile:r.PropTypes.bool,onClick:r.PropTypes.func,onMouseDown:r.PropTypes.func,onMouseMove:r.PropTypes.func,onMouseUp:r.PropTypes.func,options:r.PropTypes.shape({snapStep:r.PropTypes.arrayOf(r.PropTypes.number)}),range:r.PropTypes.arrayOf(r.PropTypes.arrayOf(r.PropTypes.number)),responsive:r.PropTypes.bool,setDrawingAreaAvailable:r.PropTypes.func,setup:r.PropTypes.func.isRequired},getDefaultProps:function(){return{range:[[-10,10],[-10,10]],options:{},responsive:!1,addMouseLayer:!0}},componentDidMount:function(){this._setupGraphie(),this._updateMovables()},shouldComponentUpdate:function(e){return!c(this.props,e)},componentDidUpdate:function(e){this.props.setup!==e.setup&&window.console&&window.console.warn&&window.console.warn("<Graphie> was given a new setup function. This is a bad idea; please refactor your code to give the same setup function reference to <Graphie> on every render."),c(this.props.options,e.options)&&c(this.props.box,e.box)&&c(this.props.range,e.range)||this._setupGraphie(),this._updateMovables()},getGraphie:function(){return this._graphie},_range:function(){return o.map(this.props.range,function(e){return e[0]>=e[1]?[-10,10]:e})},_box:function(){return o.map(this.props.box,function(e){return e>0?e:340})},_scale:function(){var e=this._box(),t=this._range();return o.map(e,function(e,n){var r=t[n][1]-t[n][0];return e/r})},_setupGraphie:function(){this._removeMovables();var e=i.findDOMNode(this.refs.graphieDiv);$(e).empty();var t=this._graphie=d(e);t.init({range:this._range(),scale:this._scale(),isMobile:this.props.isMobile}),this.props.addMouseLayer&&t.addMouseLayer({onClick:this.props.onClick,onMouseDown:this.props.onMouseDown,onMouseUp:this.props.onMouseUp,onMouseMove:this.props.onMouseMove,setDrawingAreaAvailable:this.props.setDrawingAreaAvailable}),t.snap=this.props.options.snapStep||[1,1],this.props.responsive&&($(e).css({width:"100%",height:"100%"}),t.raphael.setSize("100%","100%")),this.props.setup(t,o.extend({range:this._range(),scale:this._scale()},this.props.options))},_removeMovables:function(){o.invoke(this._movables,"remove"),this._movables={}},_renderMovables:function(e,t){var n=this,r=t.graphie,i=t.oldMovables,s=t.newMovables,a=function(e){o.each(e.movableProps,function(r){e.props[r]=n._renderMovables(e.props[r],t)})},c=!1;return p(e,function(e){if(!e)return t.nextKey++,e;var o=new e.type(e.props);u(o instanceof l,"All children of a Graphie component must be Graphie movables");var p=e.key,h=null==p?"_no_id_"+t.nextKey:p;t.nextKey++;var d=e.ref;a(o);var f=i[h];if(f)if(o.constructor===f.constructor){f.props=o.props;var g=f.modify(r);"reordered"===g&&(c=!0),s[h]=f}else null==p&&"undefined"!=typeof console&&console.warn&&console.warn("Replacing a <Graphie> child with a child of a different type. Please add keys to your <Graphie> children"),f.remove(),o.add(r),c=!0,s[h]=o;else o.add(r),c=!0,s[h]=o;return c&&s[h].toFront(),d&&(n.movables[d]=s[h]),s[h]})},_updateMovables:function(){var e=this._graphie,t=this._movables,n={};this._movables=n,this.movables={},this._renderMovables(this.props.children,{nextKey:1,graphie:e,oldMovables:t,newMovables:n}),o.each(t,function(e,t){n[t]||e.remove()})},render:function(){return r.createElement("div",{className:"graphie-container"},r.createElement("div",{className:"graphie",ref:"graphieDiv"}))}});o.extend(f,s),o.extend(f,a),e.exports=f},function(e,t,n){"use strict";var r=n(17),i=r.PropTypes,o={PENDING:"pending",LOADING:"loading",LOADED:"loaded",FAILED:"failed"},s=r.createClass({displayName:"ImageLoader",propTypes:{children:r.PropTypes.oneOfType([r.PropTypes.arrayOf(r.PropTypes.node),r.PropTypes.node]),imgProps:i.any,onError:i.func,onLoad:i.func,onUpdate:i.func,preloader:i.func,src:i.string},getInitialState:function(e){return{status:this.props.src?o.LOADING:o.PENDING}},componentDidMount:function(){this.state.status===o.LOADING&&this.createLoader()},componentWillReceiveProps:function(e){this.props.src!==e.src&&this.setState({status:e.src?o.LOADING:o.PENDING})},componentDidUpdate:function(e,t){this.state.status!==o.LOADING||this.img||this.createLoader(),t.status!==this.state.status&&this.props.onUpdate()},componentWillUnmount:function(){this.destroyLoader()},createLoader:function(){this.destroyLoader(),this.img=new Image,this.img.onload=this.handleLoad,this.img.onerror=this.handleError,this.img.src=this.props.src},destroyLoader:function(){this.img&&(this.img.onload=null,this.img.onerror=null,this.img=null)},handleLoad:function(e){this.destroyLoader(),this.setState({status:o.LOADED}),this.props.onLoad&&this.props.onLoad(e)},handleError:function(e){this.destroyLoader(),this.setState({status:o.FAILED}),this.props.onError&&this.props.onError(e)},renderImg:function(){var e=this.props,t=e.src,n=e.imgProps,i={src:t};for(var o in n)n.hasOwnProperty(o)&&(i[o]=n[o]);return r.createElement("img",i)},render:function(){switch(this.state.status){case o.LOADED:return this.renderImg();case o.FAILED:if(this.props.children)return this.props.children;break;default:if(this.props.preloader)return this.props.preloader()}return null}});e.exports=s},function(e,t,n){"use strict";function r(){var e=document.createElement("bootstrap"),t={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd otransitionend",transition:"transitionend"};for(var n in t)if(void 0!==e.style[n])return{end:t[n]};return!1}function i(e,t){var n=window.scrollX,r=window.scrollY,i=document.querySelector("meta[name=viewport]");i?i.setAttribute("content",e):$("head").append('<meta name="viewport" content="'+e+'">'),document.body.style.opacity=.9999,setTimeout(function(){document.body.style.opacity=1,window.scrollTo(n,r),t&&setTimeout(t,0)},0)}function o(){}function s(e,t){this._fullHeight=this._fullWidth=this._overlay=null,this._targetImage=e,this._enableMobilePinch=t,this._$body=$(document.body)}$.fn.emulateTransitionEnd=function(e){var t=!1,n=this;$(this).one("bsTransitionEnd",function(){t=!0});var r=function(){t||$(n).trigger($.support.transition.end)};return setTimeout(r,e),this},$(function(){$.support.transition=r(),$.support.transition&&($.event.special.bsTransitionEnd={bindType:$.support.transition.end,delegateType:$.support.transition.end,handle:function(e){if($(e.target).is(this))return e.handleObj.handler.apply(this,arguments)}})}),o.prototype._initialize=function(e){this._$document||(this._activeZoom=this._initialScrollPosition=this._initialTouchPosition=this._touchMoveListener=null,this._$document=$(document),this._$window=$(window),this._$body=$(document.body),this._boundClick=$.proxy(this._clickHandler,this),this._enableMobilePinch=e)},o.prototype.handleZoomClick=function(e,t){var n=this;this._initialize(t);var r=e.target;if(r&&"IMG"===r.tagName&&!this._$body.hasClass("zoom-overlay-open"))return e.metaKey||e.ctrlKey?window.open(e.target.src,"_blank"):void(!t&&r.width>=window.innerWidth-s.getOffset()||(this._activeZoomClose(!0),t?i("width=device-width, initial-scale=1, minimum-scale=1",function(){return n._zoom(r)}):this._zoom(r),t||(this._$window.on("scroll.zoom",$.proxy(this._scrollHandler,this)),this._$document.on("keyup.zoom",$.proxy(this._keyHandler,this)),this._$document.on("touchstart.zoom",$.proxy(this._touchStart,this))),document.addEventListener("click",this._boundClick,!0),e.stopPropagation()))},o.prototype._zoom=function(e){this._activeZoom=new s(e,this._enableMobilePinch),this._activeZoom.zoomImage()},o.prototype._activeZoomClose=function(e){var t=this;this._activeZoom&&(e?(this._activeZoom.dispose(),this._disposeActiveZoom()):i("width=device-width, initial-scale=1, minimum-scale=1,\n            maximum-scale=1",function(){t._activeZoom.close(),t._disposeActiveZoom()}))},o.prototype._disposeActiveZoom=function(){this._$window.off(".zoom"),this._$document.off(".zoom"),document.removeEventListener("click",this._boundClick,!0),this._activeZoom=null},o.prototype._scrollHandler=function(e){null===this._initialScrollPosition&&(this._initialScrollPosition=window.scrollY);var t=this._initialScrollPosition-window.scrollY;Math.abs(t)>=40&&this._activeZoomClose()},o.prototype._keyHandler=function(e){27===e.keyCode&&this._activeZoomClose()},o.prototype._clickHandler=function(e){e.stopPropagation(),e.preventDefault(),this._activeZoomClose()},o.prototype._touchStart=function(e){this._initialTouchPosition=e.originalEvent.touches[0].pageY,$(e.target).on("touchmove.zoom",$.proxy(this._touchMove,this))},o.prototype._touchMove=function(e){Math.abs(e.originalEvent.touches[0].pageY-this._initialTouchPosition)>10&&(this._activeZoomClose(),$(e.target).off("touchmove.zoom"))},s._OFFSET=80,s._MAX_WIDTH=2560,s._MAX_HEIGHT=4096,s.getOffset=function(e){return e?0:s._OFFSET},s.prototype.getOffset=function(){return s.getOffset(this._enableMobilePinch)},s.prototype.zoomImage=function(){var e=document.createElement("img"),t=$(e);e.onload=function(){this._fullHeight=Number(e.height),this._fullWidth=Number(e.width);var n=this._imageOffset=$(this._targetImage).offset(),r=this._left=n.left-$(window).scrollLeft(),i=this._top=n.top-$(window).scrollTop();t.css({left:r,top:i,width:this._targetImage.width,height:this._targetImage.height}),this._zoomOriginal()}.bind(this),e.src=this._targetImage.src,this.$zoomedImage=t},s.prototype._zoomOriginal=function(){this.$zoomedImage.addClass("zoom-img").attr("data-action","zoom-out"),$(this._targetImage).css("visibility","hidden"),this._backdrop=document.createElement("div"),this._backdrop.className="zoom-backdrop",document.body.appendChild(this._backdrop),this._overlay=document.createElement("div"),this._overlay.className="zoom-overlay",document.body.appendChild(this._overlay),this._overlay.appendChild(this.$zoomedImage[0]),this._calculateZoom(),this._triggerAnimation()},s.prototype._calculateZoom=function(){var e=this._fullWidth,t=this._fullHeight,n=window.innerHeight-this.getOffset(),r=window.innerWidth-this.getOffset(),i=e/this._targetImage.width,o=e/t,s=r/n;e<r&&t<n?this._imgScaleFactor=i:o<s?this._imgScaleFactor=n/t*i:this._imgScaleFactor=r/e*i},s.prototype._triggerAnimation=function(){var e=$(window).scrollTop()+window.innerHeight/2,t=$(window).scrollLeft()+window.innerWidth/2,n=this._imgScaleFactor,r=this._imageOffset.top+this._targetImage.height/2,i=this._imageOffset.left+this._targetImage.width/2;this._translateY=(e-r)/n,this._translateX=(t-i)/n,this._zoomedInTransformString="\n        scale("+n+")\n        translate3d("+this._translateX+"px, "+this._translateY+"px, 0)\n    ",this.$zoomedImage.css({transform:this._zoomedInTransformString}).addClass("zoom-transition").one($.support.transition.end,$.proxy(this._onZoomInFinish,this)).emulateTransitionEnd(300),this._$body.addClass("zoom-overlay-open")},s.prototype._onZoomInFinish=function(){var e=this._targetImage.height*this._imgScaleFactor,t=this._targetImage.width*this._imgScaleFactor,n=0,r=0,i=0,o=0,s=0,a=0;t<window.innerWidth?(n="50%",i=-t/2):s=(t-window.innerWidth)/2,e<window.innerHeight?(r="50%",o=-e/2):a=(e-window.innerHeight)/2,this.$zoomedImage.css({height:e,left:n,marginLeft:i,marginTop:o,top:r,transform:"",width:t}).removeClass("zoom-transition"),$(this._overlay).scrollLeft(s).scrollTop(a)},s.prototype.close=function(){var e=this;this._$body.removeClass("zoom-overlay-open").addClass("zoom-overlay-transitioning"),this.$zoomedImage.css({height:this._targetImage.height,left:this._left,marginLeft:0,marginTop:0,top:this._top,transform:this._zoomedInTransformString,width:this._targetImage.width}).removeClass("zoom-transition"),$(this._overlay).scrollLeft(0).scrollTop(0),setTimeout(function(){e.$zoomedImage.css({transform:"scale(1)"}).addClass("zoom-transition").one($.support.transition.end,$.proxy(e.dispose,e)).emulateTransitionEnd(300)},10)},s.prototype.dispose=function(){this.$zoomedImage&&this.$zoomedImage[0].parentNode&&(this.$zoomedImage.remove(),this.$zoomedImage=null,this._overlay.parentNode.removeChild(this._overlay),this._backdrop.parentNode.removeChild(this._backdrop),this._$body.removeClass("zoom-overlay-transitioning")),$(this._targetImage).css("visibility","visible")},t.ZoomService=new o},function(e,t,n){e.exports={apiVersion:{major:8,minor:1},itemDataVersion:{major:0,minor:1}}},function(e,t,n){"use strict";function r(e,t,n,r){for(var i=e.getText(),o=void 0;null!==(o=n.exec(i));)if(r){var s=r(o),a=s.start,l=s.end;t(a,l)}else{var c=o.index;t(c,c+o[0].length)}}function i(e,t){for(var n=e.getBlockMap().values(),r=n,i=Array.isArray(r),o=0,r=i?r:r[Symbol.iterator]();;){var s;if(i){if(o>=r.length)break;s=r[o++]}else{if(o=r.next(),o.done)break;s=o.value}var a=s,l=t.exec(a.getText());if(null!==l){var c=S(a),p=c.merge({anchorOffset:l.index,focusOffset:l.index+l[0].length});return p}}}function o(e,t){var n=arguments.length<=2||void 0===arguments[2]?null:arguments[2],r=C(e),i={};return i.contentState=b.replaceText(r.contentState,r.selection,t,null,n),r.editorState&&(i.editorState=v.push(r.editorState,i.contentState,"insert-characters")),i}function s(e){var t=C(e),n={};return n.contentState=b.removeRange(t.contentState,t.selection,"backward"),t.editorState&&(n.editorState=v.push(t.editorState,n.contentState,"remove-range")),n}function a(e,t){var n=null,r=function(){return!0};t?!function(){var i=P(e,t);n=g.createFromArray(i);var o=t.getStartKey(),s=t.getEndKey();r=function(e,n,r){return!(e===o&&n<t.getStartOffset())&&!(e===s&&r>t.getEndOffset())}}():n=e.getBlockMap();var i=[];return n.forEach(function(e,t){e.findEntityRanges(function(e){return null!==e.getEntity()},function(n,o){r(t,n,o)&&i.push(y.get(e.getEntityAt(n)))})}),i}function l(e,t){var n=e.getBlocksAsArray(),r=null;return n.some(function(e){return e.findEntityRanges(function(e){return null!==e.getEntity()&&t(y.get(e.getEntity()))},function(t,n){var i=S(e);r=i.merge({anchorOffset:t,focusOffset:n,isBackward:!1})}),!!r}),r}function c(e,t){var n=arguments.length<=2||void 0===arguments[2]?function(){return null}:arguments[2],r=C(e),i={},o=t.split(k),s=f.create(),a=o.map(function(e){var t=e,r=Array(e.length).fill(s),i=n(t,r);return null!==i&&(t=i.text,r=i.characterList),new m({key:T(),text:t,type:"unstyled",characterList:x(r)})}),l=g.createFromArray(a);return i.contentState=b.replaceWithFragment(r.contentState,r.selection,l),r.editorState&&(i.editorState=v.push(r.editorState,i.contentState,"insert-fragment")),i}function p(e){var t=S(e),n=t.merge({focusOffset:e.getCharacterList().size,anchorOffset:e.getCharacterList().size});return n}function u(e,t){var n=C(e),r=n.contentState,i=n.selection,o=n.editorState,s=r.getBlockForKey(i.getAnchorKey()),a=r.getBlockForKey(i.getFocusKey()),l=i.getAnchorOffset(),c=i.getFocusOffset(),p=i.getIsBackward()?-1:1,u=c-t.getFocusOffset(),h=i.getFocusKey()===t.getFocusKey();h&&1===Math.abs(u)&&!_(a,c)&&(c=M(a,c,u)),c=M(a,c,p),l=M(s,l,-p),i.isCollapsed()&&(l=c);var d={contentState:r};return d.selection=i.merge({focusOffset:c,anchorOffset:l}),o&&(d.editorState=v.set(o,{selection:d.selection,forceSelection:!0})),d}function h(e,t){var n=C(e),r={},i=n.contentState,o=n.selection,s=P(i,o),a=!0,l=n.contentState,c=n.contentState;if(s.forEach(function(e){var n=0,r=e.getLength();if(e.getKey()===o.getStartKey()&&(n=o.getStartOffset()),e.getKey()===o.getEndKey()&&(r=o.getEndOffset()),n!==r){var i=e.getText().substring(n,r);a&&i.endsWith(t)&&i.startsWith(t)?c=N(c,e,n,r,t):a=!1,l=O(l,e,n,r,t)}}),a?r.contentState=c:r.contentState=l,n.editorState){r.editorState=v.push(n.editorState,r.contentState,a?"remove-range":"insert-characters");var p=o.getEndOffset();if(p>0){var u=a?-2:2;p+=u*t.length}var h=null;h=o.getIsBackward()?o.merge({anchorOffset:p}):o.merge({focusOFfset:p}),r.editorState=v.forceSelection(r.editorState,h)}return r}var d=n(185),f=d.CharacterMetadata,g=d.BlockMapBuilder,m=d.ContentBlock,v=d.EditorState,y=d.Entity,b=d.Modifier,E=d.SelectionState,T=d.genKey,w=n(217),x=w.List,C=function(e){var t=e.editorState,n=e.contentState,r=e.selection,i={};return i.editorState=t||null,i.contentState=n||t&&t.getCurrentContent()||null,i.selection=r||t&&t.getSelection()||n&&n.getSelectionAfter()||null,i},S=function(e){return E.createEmpty(e.getKey()).set("hasFocus",!0)},P=function(e,t){for(var n=[],r=t.getStartKey(),i=t.getEndKey(),o=e.getKeyAfter(i),s=r;s!==o;s=e.getKeyAfter(s))n.push(e.getBlockForKey(s));return n},k=/\r\n?|\n/g,_=function(e,t){if(0===t||t===e.getLength())return!0;var n=e.getEntityAt(t-1),r=e.getEntityAt(t),i=!!r&&"IMMUTABLE"===y.get(r).mutability;return!(i&&n===r)},M=function(e,t,n){for(var r=t;r>0&&r<e.getLength()&&!_(e,r);)r+=n;return r},O=function(e,t,n,r,i){var o=S(t),s=e;return o=o.merge({anchorOffset:r,focusOffset:r}),s=b.insertText(s,o,i),o=o.merge({anchorOffset:n,focusOffset:n}),s=b.insertText(s,o,i)},N=function(e,t,n,r,i){var o=S(t),s=e;return o=o.merge({anchorOffset:r-i.length,focusOffset:r}),s=b.removeRange(s,o),o=o.merge({anchorOffset:n,focusOffset:n+i.length}),s=b.removeRange(s,o)};e.exports={regexStrategy:r,findPattern:i,replaceSelection:o,deleteSelection:s,getEntities:a,findEntity:l,insertText:c,selectEnd:p,snapSelectionOutsideEntities:u,toggleDecoration:h}},function(e,t,n){"use strict";var r=n(17),i=n(168),o=r.createClass({displayName:"InfoTip",getInitialState:function(){return{didMount:!1}},componentDidMount:function(){this.setState({didMount:!0})},render:function(){return this.state.didMount?r.createElement(i,this.props):r.createElement("div",null)}});e.exports=o},function(e,t,n){"use strict";var r=n(17),i=n(71),o=r.createClass({displayName:"ItemExtrasEditor",propTypes:{calculator:r.PropTypes.bool,chi2Table:r.PropTypes.bool,onChange:r.PropTypes.func.isRequired,periodicTable:r.PropTypes.bool,tTable:r.PropTypes.bool,zTable:r.PropTypes.bool},getDefaultProps:function(){return{calculator:!1,chi2Table:!1,periodicTable:!1,tTable:!1,zTable:!1}},serialize:function(){return{calculator:this.props.calculator,chi2Table:this.props.chi2Table,periodicTable:this.props.periodicTable,tTable:this.props.tTable,zTable:this.props.zTable}},render:function(){var e=this;return r.createElement("div",{className:"perseus-answer-editor"},r.createElement("div",{className:"perseus-answer-options"},r.createElement("div",null,r.createElement("label",null,"Show calculator:"," ",r.createElement("input",{type:"checkbox",checked:this.props.calculator,onChange:function(t){e.props.onChange({calculator:t.target.checked})}})),r.createElement(i,null,"Use the calculator when completing difficult calculations is NOT the intent of the question. DON’T use the calculator when testing the student’s ability to complete different types of computations.")),r.createElement("div",null,r.createElement("label",null,"Show periodic table:"," ",r.createElement("input",{type:"checkbox",checked:this.props.periodicTable,onChange:function(t){e.props.onChange({periodicTable:t.target.checked})}})),r.createElement(i,null,"This provides the student with the ability to view a periodic table of the elements, e.g., for answering chemistry questions.")),r.createElement("div",null,r.createElement("label",null,"Show z table (statistics):"," ",r.createElement("input",{type:"checkbox",checked:this.props.zTable,onChange:function(t){e.props.onChange({zTable:t.target.checked})}})),r.createElement(i,null,"This provides the student with the ability to view a table of critical values for the z distribution, e.g. for answering statistics questions.")),r.createElement("div",null,r.createElement("label",null,"Show t table (statistics):"," ",r.createElement("input",{type:"checkbox",checked:this.props.tTable,onChange:function(t){e.props.onChange({tTable:t.target.checked})}})),r.createElement(i,null,"This provides the student with the ability to view a table of critical values for the Student's t distribution, e.g. for answering statistics questions.")),r.createElement("div",null,r.createElement("label",null,"Show chi-squared table (statistics):"," ",r.createElement("input",{type:"checkbox",checked:this.props.chi2Table,onChange:function(t){e.props.onChange({chi2Table:t.target.checked})}})),r.createElement(i,null,"This provides the student with the ability to view a table of critical values for the chi-squared distribution, e.g. for answering statistics questions."))))}});e.exports=o},function(e,t,n){"use strict";var r=n(18),i=n(6).shuffle,o=n(169),s=function(e,t){var n=function(n){return e.randomize?i(n,t):n},o=function(e){var t=null,n=r.reject(e,function(e,n){if(e.isNoneOfTheAbove)return t=e,!0});return t&&n.push(t),n},s=e.choices.slice();return s=r.map(s,function(e,t){return r.extend({},e,{originalIndex:t})}),o(n(s))},a=function(e,t){var n=r.map(s(e,t),function(e){return r.omit(e,"correct")});return e=r.extend({},e,{choices:n}),r.pick(e,"choices","hasNoneOfTheAbove","onePerLine","multipleSelect","correctAnswer","deselectEnabled")},l=function(e,t){var n=s(e,t),i=r.pluck(n,"correct"),o=r.pick(e,"hasNoneOfTheAbove","onePerLine","multipleSelect","correctAnswer","deselectEnabled"),a=r.extend({},o,{choices:n,values:i});return a},c={1:function(e){var t,n;if(e.noneOfTheAbove){t=r.clone(e.choices);var i=r.random(0,e.choices.length-1),o=r.extend({},e.choices[i],{isNoneOfTheAbove:!0});t.splice(i,1),t.push(o),n=!0}else t=e.choices,n=!1;return r.extend(r.omit(e,"noneOfTheAbove"),{choices:t,hasNoneOfTheAbove:n})}};e.exports={name:"radio",displayName:"Multiple choice",accessible:!0,widget:o,transform:a,staticTransform:l,version:{major:1,minor:0},propUpgrades:c}},function(e,t,n){"use strict";var r=n(51),i=n(17),o=n(18),s=n(170),a=n(171),l=n(172).parseTex,c=n(173),p=n(46),u=n(162).propTypes.keypadElementPropType,h=n(5).ClassNames,d=n(5).Options,f={number:{name:"Numbers",forms:"integer, decimal, proper, improper, mixed"},decimal:{name:"Decimals",forms:"decimal"},integer:{name:"Integers",forms:"integer"},rational:{name:"Fractions and mixed numbers",forms:"integer, proper, improper, mixed"},improper:{name:"Improper numbers (no mixed)",forms:"integer, proper, improper"},mixed:{name:"Mixed numbers (no improper)",forms:"integer, proper, mixed"},percent:{name:"Numbers or percents",forms:"integer, decimal, proper, improper, mixed, percent"},pi:{name:"Numbers with pi",forms:"pi"}},g={integer:function(e){return i18n._("an integer, like $6$")},proper:function(e){return"optional"===e.simplify?i18n._("a *proper* fraction, like $1/2$ or $6/10$"):i18n._("a *simplified proper* fraction, like $3/5$")},improper:function(e){return"optional"===e.simplify?i18n._("an *improper* fraction, like $10/7$ or $14/8$"):i18n._("a *simplified improper* fraction, like $7/4$")},mixed:function(e){return i18n._("a mixed number, like $1\\ 3/4$")},decimal:function(e){return i18n._("an *exact* decimal, like $0.75$")},percent:function(e){return i18n._("a percent, like $12.34\\%$")},pi:function(e){return i18n._("a multiple of pi, like $12\\ \\text{pi}$ or $2/3\\ \\text{pi}$")}},m=i.createClass({displayName:"InputNumber",propTypes:{answerType:i.PropTypes.oneOf(Object.keys(f)),currentValue:i.PropTypes.string,keypadElement:u,reviewModeRubric:i.PropTypes.object,widgetId:i.PropTypes.string.isRequired},getDefaultProps:function(){return{currentValue:"",size:"normal",answerType:"number",apiOptions:d.defaults}},shouldShowExamples:function(){return"number"!==this.props.answerType&&!this.props.apiOptions.staticRender},render:function(){if(this.props.apiOptions.customKeypad)return i.createElement(a,{ref:"input",value:this.props.currentValue,keypadElement:this.props.keypadElement,onChange:this.handleChange,onFocus:this._handleFocus,onBlur:this._handleBlur});var e=this.props.reviewModeRubric,t=null,n=null;if(e){var o=this.simpleValidate(e);if(t="points"===o.type&&o.earned===o.total,!t){var l=String(e.value);e.inexact&&e.maxError&&(l+=" ± "+e.maxError);var p=[l];n=i.createElement(c,{answers:p})}}var u={};u["perseus-input-size-"+this.props.size]=!0,u[h.CORRECT]=e&&t&&this.props.currentValue,u[h.INCORRECT]=e&&!t&&this.props.currentValue,u[h.UNANSWERED]=e&&!this.props.currentValue;var d=i.createElement(s,{ref:"input",value:this.props.currentValue,onChange:this.handleChange,className:r(u),type:this._getInputType(),examples:this.examples(),shouldShowExamples:this.shouldShowExamples(),onFocus:this._handleFocus,onBlur:this._handleBlur,id:this.props.widgetId,disabled:this.props.apiOptions.readOnly});return n?i.createElement("span",{className:"perseus-input-with-answer-blurb"},d,n):d},handleChange:function(e,t){this.props.onChange({currentValue:e},t)},_getInputType:function(){return this.props.apiOptions.staticRender?"tex":"text"},_handleFocus:function(){this.props.onFocus([])},_handleBlur:function(){this.props.onBlur([])},focus:function(){return this.refs.input.focus(),!0},focusInputPath:function(e){this.refs.input.focus()},blurInputPath:function(e){this.refs.input.blur()},getInputPaths:function(){return[[]]},getGrammarTypeForPath:function(e){return"number"},setInputValue:function(e,t,n){this.props.onChange({currentValue:t},n)},getUserInput:function(){return{currentValue:this.props.currentValue}},simpleValidate:function(e,t){return t=t||function(){},m.validate(this.getUserInput(),e,t)},examples:function e(){var t=this.props.answerType,n=f[t].forms.split(/\s*,\s*/),e=o.map(n,function(e){return g[e](this.props)},this);return[i18n._("**Your answer should be** ")].concat(e)}});o.extend(m,{validate:function(e,t,n){null==t.answerType&&(t.answerType="number");var r=p.number.createValidatorFunctional(t.value,{simplify:t.simplify,inexact:t.inexact||void 0,maxError:t.maxError,forms:f[t.answerType].forms}),i=l(e.currentValue),o=r(i);if(o.empty){var s=n(null,e.currentValue,o.message);return{type:"invalid",message:s===!1?null:o.message}}return{type:"points",earned:o.correct?1:0,total:1,message:o.message}}});var v=function(e){var t=e.simplify,n=e.size,r=e.answerType;return{simplify:t,size:n,answerType:r}};e.exports={name:"input-number",displayName:"Number text box (old)",defaultAlignment:"inline-block",hidden:!0,widget:m,transform:v}},function(e,t,n){"use strict";var r=n(17),i=n(19),o=n(18),s=n(6),a=n(174),l=n(71),c={number:{name:"Numbers",forms:"integer, decimal, proper, improper, mixed"},decimal:{name:"Decimals",forms:"decimal"},integer:{name:"Integers",forms:"integer"},rational:{name:"Fractions and mixed numbers",forms:"integer, proper, improper, mixed"},improper:{name:"Improper numbers (no mixed)",forms:"integer, proper, improper"},mixed:{name:"Mixed numbers (no improper)",forms:"integer, proper, mixed"},percent:{name:"Numbers or percents",forms:"integer, decimal, proper, improper, mixed, percent"},pi:{name:"Numbers with pi",forms:"pi"}},p=r.createClass({displayName:"InputNumberEditor",propTypes:{value:r.PropTypes.number,simplify:r.PropTypes.oneOf(["required","optional","enforced"]),size:r.PropTypes.oneOf(["normal","small"]),inexact:r.PropTypes.bool,maxError:r.PropTypes.number,answerType:r.PropTypes.string},getDefaultProps:function(){return{value:0,simplify:"required",size:"normal",inexact:!1,maxError:.1,answerType:"number"}},handleAnswerChange:function(e){var t=s.firstNumericalParse(e)||0;this.props.onChange({value:t})},render:function(){var e=this,t=o.map(c,function(e,t){return r.createElement("option",{value:t,key:t},e.name)},this);return r.createElement("div",null,r.createElement("div",null,r.createElement("label",null,"Correct answer:"," ",r.createElement(a,{value:""+this.props.value,onChange:this.handleAnswerChange,ref:"input"}))),r.createElement("div",null,r.createElement("label",null,"Unsimplified answers"," ",r.createElement("select",{value:this.props.simplify,onChange:function(t){e.props.onChange({simplify:t.target.value})}},r.createElement("option",{value:"required"},"will not be graded"),r.createElement("option",{value:"optional"},"will be accepted"),r.createElement("option",{value:"enforced"},"will be marked wrong"))),r.createElement(l,null,r.createElement("p",null,'Normally select "will not be graded". This will give the user a message saying the answer is correct but not simplified. The user will then have to simplify it and re-enter, but will not be penalized. (5th grade and anything after)'),r.createElement("p",null,'Select "will be accepted" only if the user is not expected to know how to simplify fractions yet. (Anything prior to 5th grade)'),r.createElement("p",null,'Select "will be marked wrong" only if we are specifically assessing the ability to simplify.'))),r.createElement("div",null,r.createElement("label",null,r.createElement("input",{type:"checkbox",checked:this.props.inexact,onChange:function(t){e.props.onChange({inexact:t.target.checked})}})," ","Allow inexact answers"),r.createElement("label",null,r.createElement("input",{type:"checkbox",style:{visibility:"hidden"}}),"Max error:"," ",r.createElement("input",{type:"text",disabled:!this.props.inexact,defaultValue:this.props.maxError,onBlur:function(t){var n=""+(s.firstNumericalParse(t.target.value)||0);t.target.value=n,e.props.onChange({maxError:n})}}))),r.createElement("div",null,"Answer type:"," ",r.createElement("select",{value:this.props.answerType,onChange:function(t){e.props.onChange({answerType:t.target.value})}},t),r.createElement(l,null,r.createElement("p",null,'Use the default "Numbers" unless the answer must be in a specific form (e.g., question is about converting decimals to fractions).'))),r.createElement("div",null,r.createElement("label",null,"Width"," ",r.createElement("select",{value:this.props.size,onChange:function(t){e.props.onChange({size:t.target.value})}},r.createElement("option",{value:"normal"},"Normal (80px)"),r.createElement("option",{value:"small"},"Small (40px)"))),r.createElement(l,null,r.createElement("p",null,'Use size "Normal" for all text boxes, unless there are multiple text boxes in one line and the answer area is too narrow to fit them.'))))},focus:function(){return i.findDOMNode(this.refs.input).focus(),!0},serialize:function(){return o.pick(this.props,"value","simplify","size","inexact","maxError","answerType")}});e.exports=p},function(e,t,n){"use strict";var r=n(51),i=n(17),o=n(18),s=n(170),a=n(171),l=n(172).parseTex,c=n(173),p=n(5).ClassNames,u=n(5).Options,h=n(46),d=n(88),f=n(162).propTypes.keypadElementPropType,g=[{title:"Integers",value:"integer",content:"6"},{title:"Decimals",value:"decimal",content:"0.75"},{title:"Proper fractions",value:"proper",content:"⅗"},{title:"Improper fractions",value:"improper",content:"⁷⁄₄"},{title:"Mixed numbers",value:"mixed",content:"1¾"},{title:"Numbers with π",value:"pi",content:"π"}],m={integer:function(){return i18n._("an integer, like $6$")},proper:function(e){return"optional"===e.simplify?i18n._("a *proper* fraction, like $1/2$ or $6/10$"):i18n._("a *simplified proper* fraction, like $3/5$")},improper:function(e){return"optional"===e.simplify?i18n._("an *improper* fraction, like $10/7$ or $14/8$"):i18n._("a *simplified improper* fraction, like $7/4$")},mixed:function(){return i18n._("a mixed number, like $1\\ 3/4$")},decimal:function(){return i18n._("an *exact* decimal, like $0.75$")},pi:function(){return i18n._("a multiple of pi, like $12\\ \\text{pi}$ or $2/3\\ \\text{pi}$")}},v=i.createClass({displayName:"NumericInput",propTypes:{currentValue:i.PropTypes.string,size:i.PropTypes.oneOf(["normal","small"]),apiOptions:u.propTypes,coefficient:i.PropTypes.bool,answerForms:i.PropTypes.arrayOf(i.PropTypes.shape({name:i.PropTypes.string.isRequired,simplify:i.PropTypes.oneOf(["required","optional"]).isRequired})),keypadElement:f,labelText:i.PropTypes.string,reviewModeRubric:i.PropTypes.object,trackInteraction:i.PropTypes.func.isRequired,widgetId:i.PropTypes.string.isRequired},getDefaultProps:function(){return{currentValue:"",size:"normal",apiOptions:u.defaults,
coefficient:!1,answerForms:[],labelText:""}},render:function(){if(this.props.apiOptions.customKeypad)return i.createElement(a,{ref:"input",value:this.props.currentValue,keypadElement:this.props.keypadElement,onChange:this.handleChange,onFocus:this._handleFocus,onBlur:this._handleBlur});var e,t,n=this.props.reviewModeRubric;if(n){var l=this.simpleValidate(n);if(e="points"===l.type&&l.earned===l.total,!e){var u=o.filter(n.answers,function(e){return"correct"===e.status}),h=o.map(u,function(e){var t="decimal";e.answerForms&&e.answerForms[0]&&(t=e.answerForms[0]);var n=d.toNumericString(e.value,t);return e.maxError&&(n+=" ± "+d.toNumericString(e.maxError,t)),n});t=i.createElement(c,{answers:h})}}var f={};f["perseus-input-size-"+this.props.size]=!0,f[p.CORRECT]=n&&e&&this.props.currentValue,f[p.INCORRECT]=n&&!e&&this.props.currentValue,f[p.UNANSWERED]=n&&!this.props.currentValue;var g=this.props.labelText;null!=g&&""!==g||(g=i18n._("Your answer:"));var m=i.createElement(s,{ref:"input",value:this.props.currentValue,onChange:this.handleChange,className:r(f),labelText:g,type:this._getInputType(),examples:this.examples(),shouldShowExamples:this.shouldShowExamples(),onFocus:this._handleFocus,onBlur:this._handleBlur,id:this.props.widgetId,disabled:this.props.apiOptions.readOnly});return t?i.createElement("span",{className:"perseus-input-with-answer-blurb"},m,t):m},handleChange:function(e,t){this.props.onChange({currentValue:e},t),this.props.trackInteraction()},_getInputType:function(){return this.props.apiOptions.staticRender?"tex":"text"},_handleFocus:function(){this.props.onFocus([])},_handleBlur:function(){this.props.onBlur([])},focus:function(){return this.refs.input.focus(),!0},focusInputPath:function(e){this.refs.input.focus()},blurInputPath:function(e){this.refs.input.blur()},getInputPaths:function(){return[[]]},getGrammarTypeForPath:function(e){return"number"},setInputValue:function(e,t,n){this.props.onChange({currentValue:t},n)},getUserInput:function(){return{currentValue:this.props.currentValue}},simpleValidate:function(e){return v.validate(this.getUserInput(),e)},shouldShowExamples:function(){var e=0===this.props.answerForms.length,t=o.uniq(this.props.answerForms.map(function(e){return e.name})),n=t.length>=o.size(m);return!e&&!n},examples:function e(){var t=0!==this.props.answerForms.length?this.props.answerForms:o.map(o.keys(m),function(e){return{name:e,simplify:"required"}}),e=o.map(t,function(e){return m[e.name](e)});return e=o.uniq(e),[i18n._("**Your answer should be** ")].concat(e)}});o.extend(v,{validate:function(e,t){var n=o.pluck(g,"value"),r=function(e){return h.number.createValidatorFunctional(e.value,{message:e.message,simplify:"correct"===e.status?e.simplify:"optional",inexact:!0,maxError:e.maxError,forms:e.strict&&e.answerForms&&0!==e.answerForms.length?e.answerForms:n})},i=l(e.currentValue),s=o.where(t.answers,{status:"correct"}),a=o.find(o.map(s,function(e){var n=i;t.coefficient&&(n?"-"===n&&(n=-1):n=1);var o=r(e);return o(n)}),function(e){return e.correct||e.empty});if(!a){var c=[].concat(o.where(t.answers,{status:"ungraded"}),o.where(t.answers,{status:"wrong"})),p=o.find(c,function(e){var t=r(e);return t(i).correct});a={empty:!!p&&"ungraded"===p.status,correct:!!p&&"correct"===p.status,message:p?p.message:null,guess:i}}return a.empty?{type:"invalid",message:a.message}:{type:"points",earned:a.correct?1:0,total:1,message:a.message}}});var y=function(e){var t=function(e,t){return o.reduce(e,function(e,n){var r=o.find(e,t.bind(null,n));return r?e:e.concat([n])},[])},n=o.flatten(e),r=t(n,o.isEqual);return o.sortBy(r,function(e){return o.keys(m).indexOf(e.name)})},b=function(e){var t=o.extend(o.omit(e,"answers"),{answerForms:y(o.map(e.answers,function(e){return o.map(e.answerForms,function(t){return{simplify:e.simplify,name:t}})}))});return t};e.exports={name:"numeric-input",displayName:"Number text box",defaultAlignment:"inline-block",accessible:!0,widget:v,transform:b}},function(e,t,n){"use strict";var r=n(17),i=n(18),o=n(175),s=n(176),a=n(54),l=n(11),c=n(35),p=c.iconGear,u=c.iconTrash,h=n(71),d=n(36),f=n(177),g=n(178),m=n(39),v=n(179),y=n(6).firstNumericalParse,b=[{title:"Integers",value:"integer",content:"6"},{title:"Decimals",value:"decimal",content:"0.75"},{title:"Proper fractions",value:"proper",content:"⅗"},{title:"Improper fractions",value:"improper",content:"⁷⁄₄"},{title:"Mixed numbers",value:"mixed",content:"1¾"},{title:"Numbers with π",value:"pi",content:"π"}],E=function(e){return{value:null,status:e,message:"",simplify:"required",answerForms:[],strict:!1,maxError:null}},T=r.createClass({displayName:"NumericInputEditor",mixins:[s,o],getDefaultProps:function(){return{answers:[E("correct")],size:"normal",coefficient:!1,labelText:""}},getInitialState:function(){return{lastStatus:"wrong",showOptions:i.map(this.props.answers,function(){return!1})}},render:function(){var e=this,t=this.props.answers,n=function(n){return r.createElement("div",{className:"perseus-widget-row"},r.createElement("label",null,"Unsimplified answers are"),r.createElement(a,{value:t[n].simplify,allowEmpty:!1,buttons:[{value:"required",content:"ungraded"},{value:"optional",content:"accepted"},{value:"enforced",content:"wrong"}],onChange:e.updateAnswer(n,"simplify")}),r.createElement(h,null,r.createElement("p",null,'Normally select "ungraded". This will give the user a message saying the answer is correct but not simplified. The user will then have to simplify it and re-enter, but will not be penalized. (5th grade and after)'),r.createElement("p",null,'Select "accepted" only if the user is not expected to know how to simplify fractions yet. (Anything prior to 5th grade)'),r.createElement("p",null,'Select "wrong" ',r.createElement("em",null,"only")," if we are specifically assessing the ability to simplify.")))},o=function(n){return r.createElement("div",null,r.createElement("div",{className:"perseus-widget-row"},r.createElement("label",null,"Choose the suggested answer formats"),r.createElement(f,{buttons:b,values:t[n].answerForms,onChange:e.updateAnswer(n,"answerForms")}),r.createElement(h,null,r.createElement("p",null,'Formats will be autoselected for you based on the given answer; to show no suggested formats and accept all types, simply have a decimal/integer be the answer. Values with π will have format "pi", and values that are fractions will have some subset (mixed will be "mixed" and "proper"; improper/proper will both be "improper" and "proper"). If you would like to specify that it is only a proper fraction (or only a mixed/improper fraction), deselect the other format. Except for specific cases, you should not need to change the autoselected formats.'),r.createElement("p",null,"To restrict the answer to ",r.createElement("em",null,"only"),' an improper fraction (i.e. 7/4), select the improper fraction and toggle "strict" to true. This ',r.createElement("b",null,"will not")," accept 1.75 as an answer. "),r.createElement("p",null,"Unless you are testing that specific skill, please do not restrict the answer format."))),r.createElement("div",{className:"perseus-widget-row"},r.createElement(m,{label:"Strictly match only these formats",strict:t[n].strict,onChange:e.updateAnswer.bind(e,n)})))},s=function(n){return r.createElement("div",{className:"perseus-widget-row"},r.createElement("label",null,"Max error"," ",r.createElement(g,{className:"max-error",value:t[n].maxError,onChange:e.updateAnswer(n,"maxError"),placeholder:"0"})))},c=r.createElement("div",{className:"perseus-widget-row"},r.createElement("label",null,"Width:"," "," "),r.createElement(a,{value:this.props.size,allowEmpty:!1,buttons:[{value:"normal",content:"Normal (80px)"},{value:"small",content:"Small (40px)"}],onChange:this.change("size")}),r.createElement(h,null,r.createElement("p",null,'Use size "Normal" for all text boxes, unless there are multiple text boxes in one line and the answer area is too narrow to fit them.'))),E=r.createElement("div",{className:"perseus-widget-row"},r.createElement("label",null,"Label text:"," ",r.createElement(v,{value:this.props.labelText,onChange:this.change("labelText")})),r.createElement(h,null,r.createElement("p",null,"Text to describe this input. This will be shown to users using screenreaders."))),T=r.createElement("div",null,r.createElement("div",{className:"perseus-widget-row"},r.createElement(m,{label:"Coefficient",coefficient:this.props.coefficient,onChange:this.props.onChange}),r.createElement(h,null,r.createElement("p",null,"A coefficient style number allows the student to use - for -1 and an empty string to mean 1.")))),w=r.createElement("div",null,r.createElement("a",{href:"javascript:void(0)",className:"simple-button orange",onClick:function(){return e.addAnswer()},onKeyDown:function(t){return e.onSpace(t,e.addAnswer)}},r.createElement("span",null,"Add new answer"))),x={wrong:"(address the mistake/misconception)",ungraded:"(explain in detail to avoid confusion)",correct:"(reinforce the user's understanding)"},C=function(){return t.map(function(a,c){var h=r.createElement(l,{apiOptions:e.props.apiOptions,content:a.message||"",placeholder:"Why is this answer "+a.status+"?\t"+x[a.status],widgetEnabled:!1,onChange:function(t){"content"in t&&e.updateAnswer(c,{message:t.content})}});return r.createElement("div",{className:"perseus-widget-row",key:c},r.createElement("div",{className:"input-answer-editor-value-container"+(a.maxError?" with-max-error":"")},r.createElement(g,{value:a.value,className:"numeric-input-value",placeholder:"answer",format:i.last(a.answerForms),onFormatChange:function(t,n){var r;"pi"===n?r=["pi"]:"mixed"===n?r=["proper","mixed"]:"proper"!==n&&"improper"!==n||(r=["proper","improper"]),e.updateAnswer(c,{value:y(t),answerForms:r})},onChange:function(t){e.updateAnswer(c,{value:y(t)})}}),a.strict&&r.createElement("div",{className:"is-strict-indicator",title:"strictly equivalent to"},"≡"),"required"!==a.simplify&&"correct"===a.status&&r.createElement("div",{className:"simplify-indicator "+a.simplify,title:"accepts unsimplified answers"},"‰"),a.maxError?r.createElement("div",{className:"max-error-container"},r.createElement("div",{className:"max-error-plusmn"},"±"),r.createElement(g,{placeholder:0,value:t[c].maxError,format:i.last(a.answerForms),onChange:e.updateAnswer(c,"maxError")})):null,r.createElement("div",{className:"value-divider"}),r.createElement("a",{href:"javascript:void(0)",className:"answer-status "+a.status,onClick:function(){return e.onStatusChange(c)},onKeyDown:function(t){return e.onSpace(t,e.onStatusChange,c)}},a.status),r.createElement("a",{href:"javascript:void(0)",className:"answer-trash",onClick:function(){return e.onTrashAnswer(c)},onKeyDown:function(t){return e.onSpace(t,e.onTrashAnswer,c)}},r.createElement(d,u)),r.createElement("a",{href:"javascript:void(0)",className:"options-toggle",onClick:function(){return e.onToggleOptions(c)},onKeyDown:function(t){return e.onSpace(t,e.onToggleOptions,c)}},r.createElement(d,p))),r.createElement("div",{className:"input-answer-editor-message"},h),e.state.showOptions[c]&&r.createElement("div",{className:"options-container"},s(c),"correct"===a.status&&n(c),o(c)))})};return r.createElement("div",{className:"perseus-input-number-editor"},r.createElement("div",{className:"ui-title"},"User input"),r.createElement("div",{className:"msg-title"},"Message shown to user on attempt"),C(),w,c,T,E)},onToggleOptions:function(e){var t=this.state.showOptions.slice();t[e]=!t[e],this.setState({showOptions:t})},onTrashAnswer:function(e){if(e>=0&&e<this.props.answers.length){var t=this.props.answers.slice(0);t.splice(e,1),this.props.onChange({answers:t})}},onSpace:function(e,t){if(" "===e.key){e.preventDefault();var n=i.toArray(arguments).slice(2);t.apply(this,n)}},onStatusChange:function(e){var t=["wrong","ungraded","correct"],n=this.props.answers,r=i.indexOf(t,n[e].status),o=t[(r+1)%t.length];this.updateAnswer(e,{status:o,simplify:"correct"===o?"required":"accepted"})},updateAnswer:function(e,t){var n=this;if(!i.isObject(t))return i.partial(function(e,t,r){var i={};i[t]=r,n.updateAnswer(e,i)},e,t);var r=i.clone(this.props.answers);if(e===r.length)var o=E(this.state.lastStatus),r=r.concat(o);r[e]=i.extend({},r[e],t),this.props.onChange({answers:r})},addAnswer:function(){var e=E(this.state.lastStatus),t=this.props.answers.concat(e);this.props.onChange({answers:t})},getSaveWarnings:function(){var e=[];return i.contains(i.pluck(this.props.answers,"value"),"")&&e.push("One or more answers is empty"),""===this.props.labelText&&e.push("No label is specified"),this.props.answers.forEach(function(t,n){var r=t.strict&&(!t.answerForms||0===t.answerForms.length);r&&e.push("Answer "+(n+1)+" is set to string format matching, but no format was selected")}),e}});e.exports=T},function(e,t,n){"use strict";var r=n(51),i=n(17),o=(n(19),n(180)),s=n(18),a=n(5).Options,l=n(175),a=n(5).Options,c=n(5).ClassNames,p=n(46),u=n(36),h=n(170),d=n(181),f=n(182),g=n(162).components.KeypadInput,m=n(162).propTypes,v=m.keypadConfigurationPropType,y=m.keypadElementPropType,b=n(162).consts.KeypadTypes,E=n(35),T=E.iconExclamationSign,w=(n(186),i18n._("Sorry, I don't understand that!")),x=(["An expression without an answer","is no expression to me.","Who can learn from an input","like the one that I see?","Put something in there","won't you please?","A few digits will do -","might I suggest some threes?"].join("\n"),function(e){return e.replace(/([_^])([^{])/g,"$1{$2}")}),C=i.createClass({displayName:"Expression",mixins:[l],propTypes:{apiOptions:a.propTypes,buttonSets:f.buttonSetsType,buttonsVisible:i.PropTypes.oneOf(["always","never","focused"]),functions:i.PropTypes.arrayOf(i.PropTypes.string),keypadConfiguration:v,keypadElement:y,times:i.PropTypes.bool,trackInteraction:i.PropTypes.func.isRequired,value:i.PropTypes.string,widgetId:i.PropTypes.string.isRequired},getDefaultProps:function(){return{value:"",times:!1,functions:[],buttonSets:["basic","trig","prealgebra","logarithms"],onFocus:function(){},onBlur:function(){},apiOptions:a.defaults}},getInitialState:function(){return{showErrorTooltip:!1,showErrorText:!1}},parse:function(e,t){var n=s.pick(t||this.props,"functions");return window.icu&&window.icu.getDecimalFormatSymbols&&s.extend(n,window.icu.getDecimalFormatSymbols()),KAS.parse(x(e),n)},render:function(){var e=this;if(this.props.apiOptions.customKeypad)return i.createElement(g,{ref:"input",value:this.props.value,keypadElement:this.props.keypadElement,onChange:this.changeAndTrack,onFocus:function(){e.props.keypadElement.configure(e.props.keypadConfiguration,function(){e.isMounted()&&e._handleFocus()})},onBlur:this._handleBlur});if(this.props.apiOptions.staticRender)return i.createElement(h,{ref:"input",value:this.props.value,type:"tex",examples:[],shouldShowExamples:!1,onChange:this.changeAndTrack,onFocus:this._handleFocus,onBlur:this._handleBlur,id:this.props.widgetId});var t=i.createElement("span",{className:"error-tooltip"},i.createElement(o,{className:"error-text-container",horizontalPosition:"right",horizontalAlign:"left",verticalPosition:"top",arrowSize:10,borderColor:"#fcc335",show:this.state.showErrorText},i.createElement("span",{className:"error-icon",onMouseEnter:function(){e.setState({showErrorText:!0})},onMouseLeave:function(){e.setState({showErrorText:!1})},onClick:function(){e.setState({showErrorText:!e.state.showErrorText})}},i.createElement(u,T)),i.createElement("div",{className:"error-text"},w))),n=r({"perseus-widget-expression":!0,"show-error-tooltip":this.state.showErrorTooltip});return i.createElement("span",{className:n},i.createElement(d,{ref:"input",className:c.INTERACTIVE,value:this.props.value,onChange:this.changeAndTrack,convertDotToTimes:this.props.times,buttonsVisible:this.props.buttonsVisible||"focused",buttonSets:this.props.buttonSets,onFocus:this._handleFocus,onBlur:this._handleBlur}),this.state.showErrorTooltip&&t)},changeAndTrack:function(e,t){this.change("value",e,t),this.props.trackInteraction()},_handleFocus:function(){this.props.onFocus([])},_handleBlur:function(){this.props.onBlur([])},errorTimeout:null,componentWillReceiveProps:function(e){var t=this;s.isEqual(this.props.value,e.value)&&s.isEqual(this.props.functions,e.functions)||(clearTimeout(this.errorTimeout),this.parse(e.value,e).parsed?this.setState({showErrorTooltip:!1}):this.errorTimeout=setTimeout(function(){var e=t.props.apiOptions.onInputError(null,t.props.value,w);e!==!1&&t.setState({showErrorTooltip:!0})},2e3))},componentWillUnmount:function(){clearTimeout(this.errorTimeout)},focus:function(){return this.props.apiOptions.customKeypad&&this.refs.input.focus(),!0},focusInputPath:function(e){this.refs.input.focus()},blurInputPath:function(e){this.refs.input.blur()},insert:function(e){this.props.apiOptions.staticRender||this.refs.input.insert(e)},getInputPaths:function(){return[[]]},getGrammarTypeForPath:function(e){return"expression"},setInputValue:function(e,t,n){this.props.onChange({value:t},n)},getAcceptableFormatsForInputPath:function(){return null},getUserInput:function(){return x(this.props.value)},simpleValidate:function(e,t){return t=t||function(){},C.validate(this.getUserInput(),e,t)}});s.extend(C,{validate:function(e,t,n){var r=s.clone(t);window.icu&&window.icu.getDecimalFormatSymbols&&s.extend(r,window.icu.getDecimalFormatSymbols());var i,o,a=function(e){return p.expression.createValidatorFunctional(KAS.parse(e.value,t).expr,s({}).extend(r,{simplify:e.simplify,form:e.form}))},l=!0,c=!!s(t.answerForms).find(function(t){var n=a(t);return i=n(e),o=t,l=l&&i.empty,i.correct}),u=i&&i.message;if(c){if("ungraded"===o.considered){var h=n(null,e,u);return{type:"invalid",message:h===!1?null:u}}return{type:"points",earned:"correct"===o.considered?1:0,total:1,message:u}}return l?{type:"invalid",message:null}:{type:"points",earned:0,total:1}}});var S=function(e){for(var t=b.EXPRESSION,n={},r={},i=e.answerForms,o=Array.isArray(i),s=0,i=o?i:i[Symbol.iterator]();;){var a;if(o){if(s>=i.length)break;a=i[s++]}else{if(s=i.next(),s.done)break;a=s.value}var l=a,c=KAS.parse(l.value,e);c.parsed&&!function(){for(var e=c.expr,t=function(e){return"pi"===e||"theta"===e},i=function(e){return t(e)?e.toUpperCase():e},o=e.getVars(),s=Array.isArray(o),a=0,o=s?o:o[Symbol.iterator]();;){var l;if(s){if(a>=o.length)break;l=o[a++]}else{if(a=o.next(),a.done)break;l=a.value}var p=l;n[i(p)]=!0}for(var u=e.getConsts(),h=Array.isArray(u),d=0,u=h?u:u[Symbol.iterator]();;){var f;if(h){if(d>=u.length)break;f=u[d++]}else{if(d=u.next(),d.done)break;f=d.value}var g=f;r[i(g)]=!0}}()}var p=Object.keys(n);p.sort();var u=Object.keys(r);u.sort();var h=[].concat(p,u);return h.length||h.push("PI"),{keypadType:t,extraKeys:h}},P={1:function(e){return{times:e.times,buttonSets:e.buttonSets,functions:e.functions,buttonsVisible:e.buttonsVisible,answerForms:[{considered:"correct",form:e.form,simplify:e.simplify,value:e.value,key:0}]}}};e.exports={name:"expression",displayName:"Expression / Equation",defaultAlignment:"inline-block",widget:C,transform:function(e){var t=e.times,n=e.functions,r=e.buttonSets,i=e.buttonsVisible;return{keypadConfiguration:S(e),times:t,functions:n,buttonSets:r,buttonsVisible:i}},version:{major:1,minor:0},propUpgrades:P,Expression:C}},function(e,t,n){"use strict";var r=n(17),i=n(18),o=n(186),s=n(175),a=n(71),l=n(39),c=n(183),p=n(60),u=n(182),h=n(78).Expression,d=["correct","wrong","ungraded"],f=r.PropTypes.shape({considered:r.PropTypes.oneOf(d).isRequired,value:r.PropTypes.string.isRequired,form:r.PropTypes.bool.isRequired,simplify:r.PropTypes.bool.isRequired}),g=r.createClass({displayName:"ExpressionEditor",mixins:[s],propTypes:{answerForms:r.PropTypes.arrayOf(f),times:r.PropTypes.bool,buttonSets:u.buttonSetsType,functions:r.PropTypes.arrayOf(r.PropTypes.string)},getDefaultProps:function(){return{answerForms:[],times:!1,buttonSets:["basic"],functions:["f","g","h"]}},getInitialState:function(){var e;return e=0===this.props.answerForms.length||i(this.props.answerForms).any(function(e){var t=e.value;return i.indexOf(t,"\\")!==-1||i.indexOf(t,"{")!==-1}),{isTex:e}},render:function(){var e=this,t=this.props.answerForms.map(function(t,n){var r={times:e.props.times,functions:e.props.functions,buttonSets:e.props.buttonSets,buttonsVisible:"focused",form:t.form,simplify:t.simplify,value:t.value,onChange:function(t){return e.updateForm(n,t)},trackInteraction:function(){},widgetId:e.props.widgetId+"-"+n};return o(t).merge([],{draggable:!0,onChange:function(t){return e.updateForm(n,t)},onDelete:function(){return e.handleRemoveForm(n)},expressionProps:r}).freeze()}).map(function(e){return r.createElement(v,e)}),n=r.createElement(c,{components:t,onReorder:this.handleReorder,className:"answer-options-list"}),s=i(u.buttonSets).map(function(t,n){var o="basic"===n,s=i.contains(e.props.buttonSets,n)||o,a=o?"button-set-label-float":"button-set-label";return r.createElement("label",{className:a,key:n},r.createElement("input",{type:"checkbox",checked:s,disabled:o,onChange:function(){return e.handleButtonSet(n)}}),n)});return s.splice(1,1,r.createElement("label",{key:"show-div"},r.createElement("input",{type:"checkbox",onChange:this.handleToggleDiv}),r.createElement("span",{className:"show-div-button"},"show ",r.createElement(p,null,"\\div")," button"))),r.createElement("div",{className:"perseus-widget-expression-editor"},r.createElement("h3",{className:"expression-editor-h3"},"Global Options"),r.createElement("div",null,r.createElement(l,{times:this.props.times,onChange:this.props.onChange,labelAlignment:"right",label:"Use × for rendering multiplication instead of a center dot."}),r.createElement(a,null,r.createElement("p",null,"For pre-algebra problems this option displays multiplication as \\times instead of \\cdot in both the rendered output and the acceptable formats examples."))),r.createElement("div",null,r.createElement("label",null,"Function variables: ",r.createElement("input",{type:"text",defaultValue:this.props.functions.join(" "),onChange:this.handleFunctions})),r.createElement(a,null,r.createElement("p",null,'Single-letter variables listed here will be interpreted as functions. This let us know that f(x) means "f of x" and not "f times x".'))),r.createElement("div",null,r.createElement("div",null,"Button sets:"),s),this.state.isTex&&r.createElement(u,{className:"math-input-buttons",sets:this.props.buttonSets,convertDotToTimes:this.props.times,onInsert:this.handleTexInsert}),r.createElement("h3",{className:"expression-editor-h3"},"Answers"),r.createElement("p",{style:{margin:"4px 0"}},"student responses area matched against these from top to bottom"),n,r.createElement("div",null,r.createElement("button",{className:"simple-button orange",style:{fontSize:13},onClick:this.newAnswer,type:"button"},"Add new answer")))},serialize:function(){var e=["value","form","simplify","considered","key"],t=["answerForms","buttonSets","functions","times"],n=this.props.answerForms.map(function(t){return i(t).pick(e)});return o(this.props).set(["answerForms"],n).mod([],function(e){return i(e).pick(t)}).freeze()},getSaveWarnings:function(){var e=this,t=[];if(0===this.props.answerForms.length)t.push("No answers specified");else{var n=!!i(this.props.answerForms).find(function(e){return"correct"===e.considered});n||t.push("No correct answer specified"),i(this.props.answerForms).each(function(n,r){if(""===e.props.value)t.push("Answer "+(r+1)+" is empty");else{var i=KAS.parse(n.value);i.parsed?n.simplify&&!i.expr.isSimplified()&&t.push(n.value+' isn\'t simplified, but is required" +\n                            " to be'):t.push("Couldn't parse "+n.value)}})}return t},_newEmptyAnswerForm:function(){return{considered:"correct",form:!1,key:this.props.answerForms.length,simplify:!1,value:""}},newAnswer:function(){var e=this.props.answerForms.slice();e.push(this._newEmptyAnswerForm()),this.change({answerForms:e})},handleRemoveForm:function(e){var t=this.props.answerForms.slice(0,-1);this.change({answerForms:t})},updateForm:function(e,t){var n=o(this.props.answerForms).merge([e],t).freeze();this.change({answerForms:n})},handleReorder:function(e){var t=i(e).map(function(e){var t=i(e.props).pick("considered","form","simplify","value");return t.key=e.key,t});this.change({answerForms:t})},handleButtonSet:function(e){var t=this,n=i(u.buttonSets).keys(),r=i(n).filter(function(n){return i(t.props.buttonSets).contains(n)!==(n===e)});this.props.onChange({buttonSets:r})},handleToggleDiv:function(){var e,t;i(this.props.buttonSets).contains("basic+div")?(e="basic",t="basic+div"):(e="basic+div",t="basic");var n=i(this.props.buttonSets).reject(function(e){return e===t}).concat(e);this.change("buttonSets",n)},handleTexInsert:function(e){this.refs.expression.insert(e)},handleFunctions:function(e){var t={};t.functions=i.compact(e.target.value.split(/[ ,]+/)),this.props.onChange(t)}}),m=function(e,t){var n=i(e).indexOf(t);return n=(n+1)%e.length,e[n]},v=r.createClass({displayName:"AnswerOption",mixins:[s],propTypes:{considered:r.PropTypes.oneOf(d).isRequired,expressionProps:r.PropTypes.object.isRequired,form:r.PropTypes.bool.isRequired,simplify:r.PropTypes.bool.isRequired,onChange:r.PropTypes.func.isRequired,onDelete:r.PropTypes.func.isRequired},getInitialState:function(){return{deleteFocused:!1}},handleDeleteBlur:function(){this.setState({deleteFocused:!1})},render:function(){var e=null;return e=this.state.deleteFocused?r.createElement("button",{type:"button",className:"simple-button orange",onClick:this.handleImSure,onBlur:this.handleDeleteBlur},"I'm sure!"):r.createElement("button",{type:"button",className:"simple-button orange",onClick:this.handleDelete},"Delete"),r.createElement("div",{className:"expression-answer-option"},r.createElement("div",{className:"answer-handle"}),r.createElement("div",{className:"answer-body"},r.createElement("div",{className:"answer-considered"},r.createElement("div",{onClick:this.toggleConsidered,className:"answer-status "+this.props.considered},this.props.considered),r.createElement("div",{className:"answer-expression"},r.createElement(h,this.props.expressionProps))),r.createElement("div",{className:"answer-option"},r.createElement(l,{form:this.props.form,onChange:this.props.onChange,labelAlignment:"right",label:"Answer expression must have the same form."}),r.createElement(a,null,r.createElement("p",null,"The student's answer must be in the same form. Commutativity and excess negative signs are ignored."))),r.createElement("div",{className:"answer-option"},r.createElement(l,{simplify:this.props.simplify,onChange:this.props.onChange,labelAlignment:"right",label:"Answer expression must be fully expanded and simplified."}),r.createElement(a,null,r.createElement("p",null,'The student\'s answer must be fully expanded and simplified. Answering this equation (x^2+2x+1) with this factored equation (x+1)^2 will render this response "Your answer is not fully expanded and simplified."'))),r.createElement("div",{className:"remove-container"},e)))},handleImSure:function(){this.props.onDelete()},handleDelete:function(){this.setState({deleteFocused:!0})},toggleConsidered:function(){var e=m(d,this.props.considered);this.change({considered:e})}});e.exports=g},function(e,t,n){"use strict";var r=n(17),i=n(18),o=n(5).Options,s=n(184),a=n(175),l=n(11),c=n(35),p=c.iconPlus,u=c.iconTrash,h=n(36),d=n(39),f=r.createClass({displayName:"ChoiceEditor",propTypes:{apiOptions:o.propTypes,choice:r.PropTypes.object,showDelete:r.PropTypes.bool,onClueChange:r.PropTypes.func,onContentChange:r.PropTypes.func,onDelete:r.PropTypes.func},render:function(){var e=this.props.choice.correct?"correct":"incorrect",t="Type a choice here...";this.props.choice.isNoneOfTheAbove&&(t=this.props.choice.correct?"Type the answer to reveal to the user...":"None of the above");var n=r.createElement(l,{ref:"content-editor",apiOptions:this.props.apiOptions,content:this.props.choice.content||"",widgetEnabled:!1,placeholder:t,disabled:this.props.choice.isNoneOfTheAbove&&!this.props.choice.correct,onChange:this.props.onContentChange}),i=r.createElement(l,{ref:"clue-editor",apiOptions:this.props.apiOptions,content:this.props.choice.clue||"",widgetEnabled:!1,placeholder:i18n._("Why is this choice "+e+"?"),onChange:this.props.onClueChange}),o=r.createElement("a",{className:"simple-button orange delete-choice",href:"#",onClick:this.props.onDelete,title:"Remove this choice"},r.createElement(h,u));return r.createElement("div",{className:"choice-clue-editors"},r.createElement("div",{className:"choice-editor "+e},n),r.createElement("div",{className:"clue-editor"},i),this.props.showDelete&&o)}}),g=r.createClass({displayName:"RadioEditor",mixins:[a],propTypes:{apiOptions:o.propTypes,choices:r.PropTypes.arrayOf(r.PropTypes.shape({content:r.PropTypes.string,clue:r.PropTypes.string,correct:r.PropTypes.bool})),displayCount:r.PropTypes.number,randomize:r.PropTypes.bool,hasNoneOfTheAbove:r.PropTypes.bool,multipleSelect:r.PropTypes.bool,onePerLine:r.PropTypes.bool,deselectEnabled:r.PropTypes.bool,static:r.PropTypes.bool},getDefaultProps:function(){return{choices:[{},{}],displayCount:null,randomize:!1,hasNoneOfTheAbove:!1,multipleSelect:!1,onePerLine:!0,deselectEnabled:!1}},render:function(){return r.createElement("div",null,r.createElement("div",{className:"perseus-widget-row"},r.createElement("div",{className:"perseus-widget-left-col"},r.createElement(d,{label:"Multiple selections",labelAlignment:"right",multipleSelect:this.props.multipleSelect,onChange:this.onMultipleSelectChange})),r.createElement("div",{className:"perseus-widget-right-col"},r.createElement(d,{label:"Randomize order",labelAlignment:"right",randomize:this.props.randomize,onChange:this.props.onChange}))),r.createElement(s,{ref:"baseRadio",multipleSelect:this.props.multipleSelect,onePerLine:!0,editMode:!0,labelWrap:!1,apiOptions:this.props.apiOptions,choices:this.props.choices.map(function(e,t){var n=this;return{content:r.createElement(f,{ref:"choice-editor"+t,apiOptions:this.props.apiOptions,choice:e,onContentChange:function(e){"content"in e&&n.onContentChange(t,e.content)},onClueChange:function(e){"content"in e&&n.onClueChange(t,e.content)},onDelete:this.onDelete.bind(this,t),showDelete:this.props.choices.length>=2}),isNoneOfTheAbove:e.isNoneOfTheAbove,checked:e.correct}},this),onCheckedChange:this.onCheckedChange}),r.createElement("div",{className:"add-choice-container"},r.createElement("a",{className:"simple-button orange",href:"#",onClick:this.addChoice.bind(this,!1)},r.createElement(h,p)," ","Add a choice"," "),!this.props.hasNoneOfTheAbove&&r.createElement("a",{className:"simple-button",href:"#",onClick:this.addChoice.bind(this,!0)},r.createElement(h,p)," ","None of the above"," ")))},onMultipleSelectChange:function(e){e=e.multipleSelect;var t=i.reduce(this.props.choices,function(e,t){return t.correct?e+1:e},0);if(!e&&t>1){var n=i.map(this.props.choices,function(e){return i.defaults({correct:!1},e)});this.props.onChange({multipleSelect:e,choices:n})}else this.props.onChange({multipleSelect:e})},onCheckedChange:function(e){var t=i.map(this.props.choices,function(t,n){return i.extend({},t,{correct:e[n],content:t.isNoneOfTheAbove&&!e[n]?"":t.content})});this.props.onChange({choices:t})},onContentChange:function(e,t){var n=this.props.choices.slice();n[e]=i.extend({},n[e],{content:t}),this.props.onChange({choices:n})},onClueChange:function(e,t){var n=this.props.choices.slice();n[e]=i.extend({},n[e],{clue:t}),""===t&&delete n[e].clue,this.props.onChange({choices:n})},onDelete:function(e,t){t.preventDefault();var n=this.props.choices.slice(),r=n[e];n.splice(e,1),this.props.onChange({choices:n,hasNoneOfTheAbove:this.props.hasNoneOfTheAbove&&!r.isNoneOfTheAbove})},addChoice:function(e,t){var n=this;t.preventDefault();var r=this.props.choices.slice(),i={isNoneOfTheAbove:e},o=r.length-(this.props.hasNoneOfTheAbove?1:0);r.splice(o,0,i),this.props.onChange({choices:r,hasNoneOfTheAbove:e||this.props.hasNoneOfTheAbove},function(){n.refs["choice-editor"+o].refs["content-editor"].focus()})},setDisplayCount:function(e){this.props.onChange({
displayCount:e})},focus:function(){return this.refs["choice-editor0"].refs["content-editor"].focus(),!0},getSaveWarnings:function(){return i.some(i.pluck(this.props.choices,"correct"))?[]:["No choice is marked as correct."]},serialize:function(){return i.pick(this.props,"choices","randomize","multipleSelect","displayCount","hasNoneOfTheAbove","onePerLine","deselectEnabled")}});e.exports=g},function(e,t,n){"use strict";var r=n(18),i=function(e,t){return r.object(r.map(e,function(e,n){return[n,e[t]]}))},o=function(e,t){var n={};return r.each(r.keys(e),function(r){n[r]=t(e[r],r)}),n},s=function(e,t){var n={};return r.each(e,function(e){n[e]=t(e)}),n};e.exports={pluck:i,mapObject:o,mapObjectFromArray:s}},function(e,t,n){"use strict";var r=n(84),i=r.pureXsMax,o=r.pureSmMin,s=r.pureSmMax,a=r.pureMdMin,l=r.pureMdMax,c=r.pureLgMin,p=r.pureLgMax,u=r.pureXlMin;e.exports={xs:"@media screen and (max-width: "+i+")",sm:"@media screen and (min-width: "+o+") and "+("(max-width: "+s+")"),md:"@media screen and (min-width: "+a+") and "+("(max-width: "+l+")"),lg:"@media screen and (min-width: "+c+") and "+("(max-width: "+p+")"),xl:"@media screen and (min-width: "+u+"))",smOrSmaller:"@media screen and (max-width: "+s+")",mdOrSmaller:"@media screen and (max-width: "+l+")",lgOrSmaller:"@media screen and (max-width: "+p+")",smOrLarger:"@media screen and (min-width: "+o+")",mdOrLarger:"@media screen and (min-width: "+a+")",lgOrLarger:"@media screen and (min-width: "+c+")"}},function(e,t,n){"use strict";var r,i,o,s,a=n(52),l=a.StyleSheet,c=n(82),p=n(84),u=p.zIndexAboveScratchpad,h=p.zIndexInteractiveComponent,d=p.radioBorderColor,f=p.checkedColor,g=p.circleSize;e.exports=l.create({perseusInteractive:{zIndex:h,position:"relative"},aboveScratchpad:{position:"relative",zIndex:u},blankBackground:{backgroundColor:"#FDFDFD"},perseusSrOnly:{border:0,clip:"rect(0,0,0,0)",height:1,margin:-1,overflow:"hidden",padding:0,position:"absolute",width:1},responsiveLabel:(r={},r[c.smOrSmaller]={fontSize:14,lineHeight:1.3},r[c.md]={fontSize:17,lineHeight:1.4},r[c.lgOrLarger]={fontSize:20,lineHeight:1.4},r),responsiveInput:(i={},i[c.lgOrSmaller]={display:"inline-block",WebkitAppearance:"none",appearance:"none",backgroundColor:"#fff",border:"2px solid #fff",boxShadow:"0 0px 0px 1px "+d,outline:"none",boxSizing:"border-box",flexShrink:0,marginBottom:0,marginLeft:15,marginRight:15,marginTop:0,height:g,width:g},i),responsiveRadioInput:(o={},o[c.lgOrSmaller]={borderRadius:"50%",":checked":{backgroundColor:f,border:"2px solid #fff",borderRadius:"50%",boxShadow:"0 0px 0px 2px "+f,height:g,width:g}},o),responsiveMobileRadioInput:(s={},s[c.lgOrSmaller]={display:"none"},s),disableTextSelection:{userSelect:"none"}})},function(e,t,n){"use strict";e.exports={baseFontFamily:"'Proxima Nova',sans-serif",boldFontFamily:"'Proxima Nova Semibold',sans-serif",green:"#76A005",kaGreen:"#71B307",blue:"#1C758A",gray:"#AAAAAA",red:"#FFBABA",questionWidth:"480px",grayLight:"#AAAAAA",grayLighter:"#DDDDDD",learnstormBlue:"#4898FC",white:"#FFFFFF",gray98:"#FAFAFA",gray97:"#F6F7F7",gray95:"#F0F1F2",gray90:"#E3E5E6",gray85:"#D6D8DA",gray76:"#BABEC2",gray68:"#888D93",gray41:"#626569",gray25:"#3B3e40",gray17:"#21242c",black:"#000000",pureSmMin:"568px",pureMdMin:"768px",pureLgMin:"1024px",pureXlMin:"1280px",pureXsMax:"567px",pureSmMax:"767px",pureMdMax:"1023px",pureLgMax:"1279px",tableBackgroundAccent:"#F9F9F9",satBlue:"#0084CE",satSelectedBackgroundColor:"#E4F3F9",satActiveBackgroundColor:"#D0EDF4",satCorrectColor:"#009900",satCorrectBorderColor:"#00CC00",satCorrectBackgroundColor:"#E4F7E4",satIncorrectColor:"#990000",satIncorrectBorderColor:"#CC5252",satIncorrectBackgroundColor:"#F2EBEB",zIndexScratchPad:"1",zIndexAboveScratchpad:"2",zIndexInteractiveComponent:"3",zIndexCurrentlyDragging:"4",zIndexCalculator:"5",phoneMargin:16,negativePhoneMargin:-16,hintBorderWidth:4,baseUnitPx:16,interactiveSizes:{defaultBoxSize:400,defaultBoxSizeSmall:288},circleSize:20},e.exports.radioBorderColor=e.exports.gray76,e.exports.checkedColor=e.exports.kaGreen},function(e,t,n){"use strict";var r=n(18),i=function(e){var t=[],n=[];return r.each(e,function(e){var i=e.value.split("\n");r.each(i,function(i,o){var s=o>0;s&&(t.push(n),n=[]);var a=r.extend({},e,{value:i});n.push(a)})}),n.length&&t.push(n),t};e.exports=i},function(e,t,n){"use strict";var r=n(89),i=n(18),o=function(e){return e.added?"added":e.removed?"removed":"unchanged"},s=function(e){return i.map(e.value,function(t){return{value:t,status:o(e)}})},a=function(e,t){return i.flatten(i.map(e,t),!0)},l=new r.Diff;l.tokenize=function(e){return i.map(e,function(e){return[e]})},l.join=function(e,t){return e.concat(t)},l.equals=i.isEqual;var c=function(e){return a(e,s)},p=function(e,t){var n=l.diff(e,t),r=c(n);return{before:i.filter(r,function(e){return"added"!==e.status}),after:i.filter(r,function(e){return"removed"!==e.status})}};e.exports=p},function(e,t,n){"use strict";var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol?"symbol":typeof e},i=n(18),o="unchanged",s="changed",a="added",l="removed",c=function(e,t,n){var r;return r=e===t?o:void 0===e?a:void 0===t?l:s,{after:JSON.stringify(t),before:JSON.stringify(e),children:[],key:n,status:r}},p=function(e,t,n){var r,c=i.isObject(e)?i(e).keys():[],p=i.isObject(t)?i(t).keys():[],h=i.union(c,p),d=i.map(h,function(n){return u((e||{})[n],(t||{})[n],n)});if(void 0===e)r=a;else if(void 0===t)r=l;else{var f=i.any(d,function(e){return e.status!==o});r=f?s:o}return{after:"",before:"",children:d,key:n,status:r}},u=function(e,t,n){return"object"===("undefined"==typeof e?"undefined":r(e))||"object"===("undefined"==typeof t?"undefined":r(t))?p(e,t,n):c(e,t,n)};e.exports=u},function(e,t,n){"use strict";var r=n(18),i=n(199).number,o={cleanMath:function(e){return"string"==typeof e?e.replace(/\+\s*-/g,"- ").replace(/-\s*-/g,"+ ").replace(/\^1/g,""):e},bound:function(e){return 0===e?e:e<0?-o.bound(-e):Math.max(1e-6,Math.min(e,1e20))},factorial:function(e){return e<=1?e:e*o.factorial(e-1)},getGCD:function(e,t){if(arguments.length>2){var n=[].slice.call(arguments,1);return o.getGCD(e,o.getGCD.apply(o,n))}var r=void 0;for(e=Math.abs(e),t=Math.abs(t);t;)r=e%t,e=t,t=r;return e},getLCM:function(e,t){if(arguments.length>2){var n=[].slice.call(arguments,1);return o.getLCM(e,o.getLCM.apply(o,n))}return Math.abs(e*t)/o.getGCD(e,t)},primes:[2,3,5,7,11,13,17,19,23,29,31,37,41,43,47,53,59,61,67,71,73,79,83,89,97],isPrime:function(e){if(e<=1)return!1;if(e<101)return!!$.grep(o.primes,function(t,n){return Math.abs(t-e)<=.5}).length;if(e<=1||e>2&&e%2===0)return!1;for(var t=3,n=Math.sqrt(e);t<=n;t+=2)if(e%t===0)return!1;return!0},getPrimeFactorization:function(e){if(1===e)return[];if(o.isPrime(e))return[e];for(var t=Math.sqrt(e),n=2;n<=t;n++)if(e%n===0)return $.merge(o.getPrimeFactorization(n),o.getPrimeFactorization(e/n))},roundToNearest:function(e,t){return Math.round(t/e)*e},roundTo:function(e,t){var n=Math.pow(10,e).toFixed(5);return Math.round((t*n).toFixed(5))/n},toFixedApprox:function(e,t){var n=e.toFixed(t);return i.equal(+n,e)?n:"\\approx "+n},roundToApprox:function(e,t){var n=o.roundTo(t,e);return i.equal(n,e)?String(n):o.toFixedApprox(e,t)},toFraction:function(e,t){if(null==t&&(t=Math.pow(2,-46)),e<0||e>1){var n=e%1;n+=n<0?1:0;var r=o.toFraction(n,t);return r[0]+=Math.round(e-n)*r[1],r}if(Math.abs(Math.round(Number(e))-e)<=t)return[Math.round(e),1];for(var i=0,s=1,a=1,l=1,c=1,p=2;;){if(Math.abs(Number(c/p)-e)<=t)return[c,p];c/p<e?(i=c,s=p):(a=c,l=p),c=i+a,p=s+l}},getNumericFormat:function(e){if(e=$.trim(e),e=e.replace(/\u2212/,"-").replace(/([+-])\s+/g,"$1"),e.match(/^[+-]?\d+$/))return"integer";if(e.match(/^[+-]?\d+\s+\d+\s*\/\s*\d+$/))return"mixed";var t=e.match(/^[+-]?(\d+)\s*\/\s*(\d+)$/);return t?parseFloat(t[1])>parseFloat(t[2])?"improper":"proper":e.replace(/[,. ]/g,"").match(/^\d+$/)?"decimal":e.match(/(pi?|\u03c0|t(?:au)?|\u03c4|pau)/)?"pi":null},toNumericString:function(e,t){if(null==e)return"";if(0===e)return"0";if("percent"===t)return 100*e+"%";if("pi"===t){var n=i.toFraction(e/Math.PI),o=Math.abs(n[0]),s=n[1];if(i.isInteger(o)){var a=e<0?"-":"",l="π";return a+(1===o?"":o)+l+(1===s?"":"/"+s)}}if(r(["proper","improper","mixed","fraction"]).contains(t)){var c=i.toFraction(e),p=Math.abs(c[0]),u=c[1],h=e<0?"-":"";if(1===u)return h+p;if("mixed"===t){var d=p%u,f=(p-d)/u;return h+(f?f+" ":"")+d+"/"+u}return h+p+"/"+u}return String(e)}};e.exports=o},function(e,t,n){var r=function(){function e(e){return{newPos:e.newPos,components:e.components.slice(0)}}function t(e){for(var t=[],n=0;n<e.length;n++)e[n]&&t.push(e[n]);return t}function n(e){var t=e;return t=t.replace(/&/g,"&amp;"),t=t.replace(/</g,"&lt;"),t=t.replace(/>/g,"&gt;"),t=t.replace(/"/g,"&quot;")}var r=function(e){this.ignoreWhitespace=e};r.prototype={diff:function(t,n){if(n===t)return[{value:n}];if(!n)return[{value:t,removed:!0}];if(!t)return[{value:n,added:!0}];n=this.tokenize(n),t=this.tokenize(t);var r=n.length,i=t.length,o=r+i,s=[{newPos:-1,components:[]}],a=this.extractCommon(s[0],n,t,0);if(s[0].newPos+1>=r&&a+1>=i)return s[0].components;for(var l=1;l<=o;l++)for(var c=-1*l;c<=l;c+=2){var p,u=s[c-1],h=s[c+1];a=(h?h.newPos:0)-c,u&&(s[c-1]=void 0);var d=u&&u.newPos+1<r,f=h&&0<=a&&a<i;if(d||f){!d||f&&u.newPos<h.newPos?(p=e(h),this.pushComponent(p.components,t[a],void 0,!0)):(p=e(u),p.newPos++,this.pushComponent(p.components,n[p.newPos],!0,void 0));var a=this.extractCommon(p,n,t,c);if(p.newPos+1>=r&&a+1>=i)return p.components;s[c]=p}else s[c]=void 0}},pushComponent:function(e,t,n,r){var i=e[e.length-1];i&&i.added===n&&i.removed===r?e[e.length-1]={value:this.join(i.value,t),added:n,removed:r}:e.push({value:t,added:n,removed:r})},extractCommon:function(e,t,n,r){for(var i=t.length,o=n.length,s=e.newPos,a=s-r;s+1<i&&a+1<o&&this.equals(t[s+1],n[a+1]);)s++,a++,this.pushComponent(e.components,t[s],void 0,void 0);return e.newPos=s,a},equals:function(e,t){var n=/\S/;return!(!this.ignoreWhitespace||n.test(e)||n.test(t))||e===t},join:function(e,t){return e+t},tokenize:function(e){return e}};var i=new r,o=new r((!0)),s=new r;o.tokenize=s.tokenize=function(e){return t(e.split(/(\s+|\b)/))};var a=new r((!0));a.tokenize=function(e){return t(e.split(/([{}:;,]|\s+)/))};var l=new r;return l.tokenize=function(e){for(var t=[],n=e.split(/^/m),r=0;r<n.length;r++){var i=n[r],o=n[r-1];"\n"==i&&o&&"\r"===o[o.length-1]?t[t.length-1]+="\n":i&&t.push(i)}return t},{Diff:r,diffChars:function(e,t){return i.diff(e,t)},diffWords:function(e,t){return o.diff(e,t)},diffWordsWithSpace:function(e,t){return s.diff(e,t)},diffLines:function(e,t){return l.diff(e,t)},diffCss:function(e,t){return a.diff(e,t)},createPatch:function(e,t,n,r,i){function o(e){return e.map(function(e){return" "+e})}function s(e,t,n){var r=c[c.length-2],i=t===c.length-2,o=t===c.length-3&&(n.added!==r.added||n.removed!==r.removed);/\n$/.test(n.value)||!i&&!o||e.push("\\ No newline at end of file")}var a=[];a.push("Index: "+e),a.push("==================================================================="),a.push("--- "+e+("undefined"==typeof r?"":"\t"+r)),a.push("+++ "+e+("undefined"==typeof i?"":"\t"+i));var c=l.diff(t,n);c[c.length-1].value||c.pop(),c.push({value:"",lines:[]});for(var p=0,u=0,h=[],d=1,f=1,g=0;g<c.length;g++){var m=c[g],v=m.lines||m.value.replace(/\n$/,"").split("\n");if(m.lines=v,m.added||m.removed){if(!p){var y=c[g-1];p=d,u=f,y&&(h=o(y.lines.slice(-4)),p-=h.length,u-=h.length)}h.push.apply(h,v.map(function(e){return(m.added?"+":"-")+e})),s(h,g,m),m.added?f+=v.length:d+=v.length}else{if(p)if(v.length<=8&&g<c.length-2)h.push.apply(h,o(v));else{var b=Math.min(v.length,4);a.push("@@ -"+p+","+(d-p+b)+" +"+u+","+(f-u+b)+" @@"),a.push.apply(a,h),a.push.apply(a,o(v.slice(0,b))),v.length<=4&&s(a,g,m),p=0,u=0,h=[]}d+=v.length,f+=v.length}}return a.join("\n")+"\n"},applyPatch:function(e,t){for(var n=t.split("\n"),r=[],i=!1,o=!1,s="I"===n[0][0]?4:0;s<n.length;s++)if("@"===n[s][0]){var a=n[s].split(/@@ -(\d+),(\d+) \+(\d+),(\d+) @@/);r.unshift({start:a[3],oldlength:a[2],oldlines:[],newlength:a[4],newlines:[]})}else"+"===n[s][0]?r[0].newlines.push(n[s].substr(1)):"-"===n[s][0]?r[0].oldlines.push(n[s].substr(1)):" "===n[s][0]?(r[0].newlines.push(n[s].substr(1)),r[0].oldlines.push(n[s].substr(1))):"\\"===n[s][0]&&("+"===n[s-1][0]?i=!0:"-"===n[s-1][0]&&(o=!0));for(var l=e.split("\n"),s=r.length-1;s>=0;s--){for(var c=r[s],p=0;p<c.oldlength;p++)if(l[c.start-1+p]!==c.oldlines[p])return!1;Array.prototype.splice.apply(l,[c.start-1,+c.oldlength].concat(c.newlines))}if(i)for(;!l[l.length-1];)l.pop();else o&&l.push("");return l.join("\n")},convertChangesToXML:function(e){for(var t=[],r=0;r<e.length;r++){var i=e[r];i.added?t.push("<ins>"):i.removed&&t.push("<del>"),t.push(n(i.value)),i.added?t.push("</ins>"):i.removed&&t.push("</del>")}return t.join("")},convertChangesToDMP:function(e){for(var t,n=[],r=0;r<e.length;r++)t=e[r],n.push([t.added?1:t.removed?-1:0,t.value]);return n}}}();e.exports=r},function(e,t,n){e.exports=a},function(e,t,n){"use strict";var r=n(52).StyleSheet,i=r.create({buttonStyle:{backgroundColor:"white",border:"1px solid #ccc",borderLeft:"0",cursor:"pointer",margin:"0",padding:"5px 10px",position:"relative",":first-child":{borderLeft:"1px solid #ccc",borderTopLeftRadius:"3px",borderBottomLeftRadius:"3px"},":last-child":{borderRight:"1px solid #ccc",borderTopRightRadius:"3px",borderBottomRightRadius:"3px"},":hover":{backgroundColor:"#ccc"},":focus":{zIndex:"2"}},selectedStyle:{backgroundColor:"#ddd"}});e.exports={button:i}},function(e,t,n){"use strict";var r,i=n(52),o=i.StyleSheet,s=i.css,a=n(17),l=n(51),c=n(175),p=n(187),u=n(18),h=n(5).ClassNames,d=n(5).Options,f=n(35),g=f.iconCircle,m=f.iconCircleThin,v=n(36),y=n(29),b=n(6),E=n(82),T=n(83),w=a.createClass({displayName:"Categorizer",mixins:[p,c],propTypes:{apiOptions:d.propTypes,categories:a.PropTypes.arrayOf(a.PropTypes.string),items:a.PropTypes.arrayOf(a.PropTypes.string),trackInteraction:a.PropTypes.func.isRequired,values:a.PropTypes.arrayOf(a.PropTypes.number)},getDefaultProps:function(){return{items:[],categories:[],values:[]}},getInitialState:function(){return{uniqueId:u.uniqueId("perseus_radio_")}},render:function(){var e=this,t=this,n=this.props.apiOptions.isMobile,r=this.props.items.map(function(e,t){return[e,t]});this.props.randomizeItems&&(r=b.shuffle(r,this.props.problemNum));var i=a.createElement("table",{className:"categorizer-table"},a.createElement("thead",null,a.createElement("tr",null,a.createElement("th",null," "),this.props.categories.map(function(e,t){return a.createElement("th",{className:s(C.header),key:t},a.createElement(y,{content:e}))}))),a.createElement("tbody",null,r.map(function(r){var i=r[0],o=r[1],l=t.state.uniqueId+"_"+o;return a.createElement("tr",{key:o},a.createElement("td",null,a.createElement(y,{content:i})),u.range(t.props.categories.length).map(function(r){var i=t.props.values[o]===r;return a.createElement("td",{className:"category "+s(C.cell,C.responsiveCell),key:r},a.createElement("div",{className:h.INTERACTIVE,onClick:e.onChange.bind(e,o,r)},n&&a.createElement("input",{type:"radio",name:l,className:s(T.responsiveInput,T.responsiveRadioInput),checked:i,onChange:e.onChange.bind(e,o,r),onClick:function(e){return e.stopPropagation()}}),!n&&a.createElement("span",{className:s(C.responsiveSpan,C.radioSpan,i&&C.checkedRadioSpan,e.props.static&&i&&C.staticCheckedRadioSpan)},i?a.createElement(v,g):a.createElement(v,m))))}))}))),o=l({"categorizer-container":!0,"static-mode":this.props.static}),c=this.props.apiOptions.isMobile?[C.fullBleedContainer]:[];return a.createElement("div",{className:o+" "+s.apply(void 0,c)},i)},onChange:function(e,t){var n=u.clone(this.props.values);n[e]=t,this.change("values",n),this.props.trackInteraction()},simpleValidate:function(e){return w.validate(this.getUserInput(),e)}});u.extend(w,{validate:function(e,t){var n=!0,r=!0;return u.each(t.values,function(t,i){null==e.values[i]&&(n=!1),e.values[i]!==t&&(r=!1)}),n?{type:"points",earned:r?1:0,total:1,message:null}:{type:"invalid",message:i18n._("Make sure you select something for every row.")}}});var x=16,C=o.create({fullBleedContainer:(r={},r[E.mdOrSmaller]={marginLeft:-x,marginRight:-x,overflowX:"auto"},r),header:{textAlign:"center",verticalAlign:"bottom"},cell:{textAlign:"center",padding:0,color:"#ccc",verticalAlign:"middle"},radioSpan:{fontSize:30,paddingRight:3,":hover":{color:"#999"}},checkedRadioSpan:{color:"#333"},staticCheckedRadioSpan:{color:"#888"}});e.exports={name:"categorizer",displayName:"Categorizer",widget:w,transform:function(e){return u.pick(e,"items","categories","randomizeItems")},staticTransform:function(e){return u.pick(e,"items","categories","values","randomizeItems")}}},function(e,t,n){"use strict";var r=n(17),i=n(175),o=n(18),s=n(5).Options,a=n(176),l=n(39),c=n(64),p=n(92).widget,u=r.createClass({displayName:"CategorizerEditor",mixins:[a,i],propTypes:{apiOptions:s.propTypes,items:r.PropTypes.arrayOf(r.PropTypes.string),categories:r.PropTypes.arrayOf(r.PropTypes.string),values:r.PropTypes.arrayOf(r.PropTypes.number),randomizeItems:r.PropTypes.bool},getDefaultProps:function(){return{items:[],categories:[],values:[],randomizeItems:!1}},render:function(){var e=this;return r.createElement("div",null,r.createElement("div",{className:"perseus-widget-row"},r.createElement(l,{label:"Randomize item order",labelAlignment:"right",randomizeItems:this.props.randomizeItems,onChange:this.props.onChange})),"Categories:",r.createElement(c,{options:this.props.categories,onChange:function(t){e.change("categories",t)},layout:"horizontal"}),"Items:",r.createElement(c,{options:this.props.items,onChange:function(t){e.change({items:t,values:o.first(e.props.values,t.length)})},layout:"vertical"}),r.createElement(p,{apiOptions:this.props.apiOptions,items:this.props.items,categories:this.props.categories,values:this.props.values,onChange:function(t){e.props.onChange(t)},trackInteraction:function(){}}))}});e.exports=u},function(e,t,n){"use strict";function r(e){var t=p.replace("{programID}",e),n=document.location.hostname,r="www.khanacademy.org";return c.test(n)&&(r=n),t.replace("{hostname}",r)}var i=n(17),o=n(18),s=n(175),a=n(6).updateQueryString,l=2,c=/khanacademy\.org/,p="https://{hostname}/computer-programming/program/{programID}/embedded?embed=yes&author=no",u=i.createClass({displayName:"CSProgram",mixins:[s],propTypes:{programID:i.PropTypes.string,width:i.PropTypes.number,height:i.PropTypes.number,settings:i.PropTypes.array,showEditor:i.PropTypes.bool,showButtons:i.PropTypes.bool,status:i.PropTypes.oneOf(["incomplete","incorrect","correct"]),message:i.PropTypes.string},getDefaultProps:function(){return{showEditor:!1,showButtons:!1,status:"incomplete",message:null}},handleMessageEvent:function(e){var t={};try{t=JSON.parse(e.originalEvent.data)}catch(e){return}if(!o.isUndefined(t.testsPassed)){var n=t.testsPassed?"correct":"incorrect";this.change({status:n,message:t.message})}},componentDidMount:function(){$(window).on("message",this.handleMessageEvent)},componentWillUnmount:function(){$(window).off("message",this.handleMessageEvent)},render:function(){if(!this.props.programID)return i.createElement("div",null);var e,t=r(this.props.programID),n={height:this.props.height};if(this.props.showEditor?(t+="&editor=yes",n.width="100%",e="perseus-scratchpad-editor"):(t+="&editor=no",n.width=this.props.width+l,e="perseus-scratchpad"),this.props.showButtons?(t+="&buttons=yes",n.height+=50):t+="&buttons=no",this.props.settings){var s={};o.each(this.props.settings,function(e){e.name&&e.value&&(s[e.name]=e.value)}),t=a(t,"settings",JSON.stringify(s))}return i.createElement("iframe",{sandbox:"allow-same-origin allow-scripts",src:t,style:n,className:e,allowFullScreen:!0})},simpleValidate:function(e){return u.validate({status:this.props.status,message:this.props.message},e)},statics:{validate:function(e,t){return"correct"===e.status?{type:"points",earned:1,total:1,message:e.message||null}:"incorrect"===e.status?{type:"points",earned:0,total:1,message:e.message||null}:{type:"invalid",message:"Keep going, you're not there yet!"}}}});e.exports={name:"cs-program",displayName:"CS Program",supportedAlignments:["block","full-width"],widget:u}},function(e,t,n){"use strict";function r(e){var t=g.exec(e);return t&&(e=t[1]),e}var i=n(17),o=n(18),s=n(175),a=n(176),l=n(174),c=n(71),p=n(39),u=400,h=400,d=i.createClass({displayName:"PairEditor",mixins:[s,a],propTypes:{name:i.PropTypes.string,value:i.PropTypes.string},getDefaultProps:function(){return{name:"",value:""}},render:function(){return i.createElement("fieldset",{className:"pair-editor"},i.createElement("label",null,"Name:"," ",i.createElement(l,{value:this.props.name,onChange:this.change("name")})),i.createElement("label",null," Value:"," ",i.createElement(l,{value:this.props.value,onChange:this.change("value")})))}}),f=i.createClass({displayName:"PairsEditor",mixins:[s,a],propTypes:{pairs:i.PropTypes.arrayOf(i.PropTypes.shape({name:i.PropTypes.string,value:i.PropTypes.string})).isRequired},render:function(){var e=this,t=o.map(this.props.pairs,function(t,n){return i.createElement(d,{key:n,name:t.name,value:t.value,onChange:e.handlePairChange.bind(e,n)})});return i.createElement("div",null,t)},handlePairChange:function(e,t){var n=this.props.pairs.slice();n[e]=t;var r=n[n.length-1];r.name&&r.value&&n.push({name:"",value:""}),this.change("pairs",n)}}),g=/khanacademy\.org\/computer-programming\/[^\/]+\/(\d+)/,m=i.createClass({displayName:"CSProgramEditor",mixins:[s,a],getDefaultProps:function(){return{programID:"",settings:[{name:"",value:""}],showEditor:!1,showButtons:!1,width:u,height:h}},render:function(){return i.createElement("div",null,i.createElement("label",null,"Url or Program ID:"," ",i.createElement(l,{name:"programID",value:this.props.programID,onChange:this._handleProgramIDChange})),i.createElement("br",null),i.createElement(p,{label:"Show Editor",showEditor:this.props.showEditor,onChange:this.props.onChange}),i.createElement(c,null,'If you show the editor, you should use the "full-width" alignment to make room for the width of the editor.'),i.createElement("br",null),i.createElement(p,{label:"Show Buttons",showButtons:this.props.showButtons,onChange:this.props.onChange}),i.createElement("br",null),i.createElement("label",null,"Settings:",i.createElement(f,{name:"settings",pairs:this.props.settings,onChange:this._handleSettingsChange}),i.createElement(c,null,"Settings that you add here are available to the program as an object returned by ",i.createElement("code",null,"Program.settings()"))))},_handleSettingsChange:function(e){this.change({settings:e.pairs})},_handleProgramIDChange:function(e){var t=this;e=r(e),$.getJSON("https://www.khanacademy.org/api/internal/scratchpads/"+e).done(function(n){t.change({width:n.width,height:n.height,programID:e})}).fail(function(n,r,i){console.error("Error retrieving scratchpad info for program ID ",e),console.error(r+", "+i),t.change({width:u,height:h,programID:e})})}});e.exports=m},function(e,t,n){"use strict";var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},i=n(52),o=i.StyleSheet,s=i.css,a=n(51),l=n(17),c=n(19),p=n(18),u=n(5).ClassNames,h=n(5).Options,d=n(36),f=n(84),g=n(35),m=g.iconDropdownArrow,v=n(6).captureScratchpadTouchStart,y=24,b=l.createClass({displayName:"Dropdown",propTypes:{apiOptions:h.propTypes,choices:l.PropTypes.arrayOf(l.PropTypes.string),onChange:l.PropTypes.func.isRequired,placeholder:l.PropTypes.string,selected:l.PropTypes.number,trackInteraction:l.PropTypes.func.isRequired},getDefaultProps:function(){return{choices:[],selected:0,placeholder:"",apiOptions:h.defaults}},render:function(){var e=this.props.choices.slice(),t=a({"perseus-widget-dropdown":!0});return l.createElement("div",null,l.createElement("select",{onChange:this._handleChangeEvent,onTouchStart:v,className:t+" "+s(T.dropdown)+" "+u.INTERACTIVE,disabled:this.props.apiOptions.readOnly,value:this.props.selected},l.createElement("option",{value:0,disabled:!0},this.props.placeholder),e.map(function(e,t){return l.createElement("option",{key:""+(t+1),value:t+1},e)})),l.createElement(d,r({},m,{style:{marginLeft:"-"+y+"px",height:y,width:y}})))},focus:function(){return c.findDOMNode(this).focus(),!0},_handleChangeEvent:function(e){this._handleChange(parseInt(e.target.value))},_handleChange:function(e){this.props.trackInteraction(),this.props.onChange({selected:e})},getUserInput:function(){return{value:this.props.selected}},simpleValidate:function(e){return b.validate(this.getUserInput(),e)}});p.extend(b,{validate:function(e,t){var n=e.value;if(0===n)return{type:"invalid",message:null};var r=t.choices[n-1].correct;return{type:"points",earned:r?1:0,total:1,message:null}}});var E=function(e){return{placeholder:e.placeholder,choices:p.map(e.choices,function(e){return e.content})}},T=o.create({dropdown:{appearance:"none",backgroundColor:"transparent",border:"1px solid "+f.gray76,borderRadius:4,boxShadow:"none",fontFamily:f.baseFontFamily,padding:"9px "+(y+1)+"px 9px 9px",":focus":{outline:"none",border:"2px solid "+f.kaGreen,padding:"8px "+y+"px 8px 8px"},":focus + svg":{color:""+f.kaGreen},":disabled":{color:f.gray68},":disabled + svg":{color:f.gray68}}});e.exports={name:"dropdown",displayName:"Drop down",defaultAlignment:"inline-block",accessible:!0,widget:b,transform:E}},function(e,t,n){"use strict";var r=n(17),i=n(19),o=n(18),s=n(35),a=s.iconPlus,l=s.iconTrash,c=n(71),p=n(36),u=n(176),h=r.createClass({displayName:"DropdownEditor",mixins:[u],propTypes:{choices:r.PropTypes.arrayOf(r.PropTypes.shape({content:r.PropTypes.string,correct:r.PropTypes.bool})),placeholder:r.PropTypes.string},getDefaultProps:function(){return{placeholder:"",choices:[{content:"",correct:!1}]}},render:function(){var e=o.uniqueId("perseus_dropdown_");return r.createElement("div",{className:"perseus-widget-dropdown"},r.createElement("div",{className:"dropdown-info"},"Dropdown",r.createElement(c,null,r.createElement("p",null,"The drop down is useful for making inequalities in a custom format. We normally use the symbols ","<",", ",">",', ≤, ≥ (in that order) which you can copy into the choices. When possible, use the "multiple choice" answer type instead.'))),r.createElement("div",{className:"dropdown-placeholder"},r.createElement("input",{type:"text",placeholder:"Placeholder value",value:this.props.placeholder,onChange:this.onPlaceholderChange}),r.createElement(c,null,r.createElement("p",null,"This value will appear as the drop down default. It should give the user some indication of the values available in the drop down itself, e.g., Yes/No/Maybe."))),r.createElement("div",{className:"clearfix"}),r.createElement("ul",{className:"dropdown-choices"},this.props.choices.map(function(t,n){var i=t.correct?"correct":"incorrect";return r.createElement("li",{key:""+n},r.createElement("div",null,r.createElement("input",{ref:"radio"+n,type:"radio",name:e,checked:t.correct?"checked":"",onChange:this.onCorrectChange.bind(this,n),value:n}),r.createElement("input",{type:"text",ref:"editor"+n,onChange:this.onContentChange.bind(this,n),className:i,value:t.content}),r.createElement("a",{href:"#",className:"simple-button orange",onClick:this.removeChoice.bind(this,n)},r.createElement("span",{className:"remove-choice"},r.createElement(p,l)))))},this)),r.createElement("div",{className:"add-choice-container"},r.createElement("a",{href:"#",className:"simple-button orange",onClick:this.addChoice},r.createElement(p,a)," ","Add a choice"," ")))},onPlaceholderChange:function(e){var t=e.target.value;this.props.onChange({placeholder:t})},onCorrectChange:function(e){var t=o.map(this.props.choices,function(t,n){return o.extend({},t,{correct:n===e})});this.props.onChange({choices:t})},onContentChange:function(e,t){var n=this.props.choices.slice(),r=o.clone(n[e]);r.content=t.target.value,n[e]=r,this.props.onChange({choices:n})},addChoice:function(e){e.preventDefault();var t=this.props.choices,n={content:"",correct:!1};this.props.onChange({choices:t.concat([n])},this.focus.bind(this,t.length))},removeChoice:function(e,t){t.preventDefault();var n=o(this.props.choices).clone();n.splice(e,1),this.props.onChange({choices:n})},focus:function(e){return i.findDOMNode(this.refs["editor"+e]).focus(),!0}});e.exports=h},function(e,t,n){"use strict";var r,i,o=n(52),s=o.StyleSheet,a=o.css,l=n(17),c=n(19),p=n(18),u=n(175),h=n(5),d=n(29),f=n(82),g=n(84),m={showPrompt:"Explain",hidePrompt:"Hide explanation",explanation:"explanation goes here\n\nmore explanation",widgets:{}},v=l.createClass({displayName:"Explanation",mixins:[u],propTypes:{apiOptions:h.Options.propTypes,explanation:l.PropTypes.string,hidePrompt:l.PropTypes.string,showPrompt:l.PropTypes.string,trackInteraction:l.PropTypes.func.isRequired,widgets:l.PropTypes.object},getDefaultProps:function(){return m},getInitialState:function(){return{expanded:!1,contentHeight:0}},_onClick:function(){this._updateHeight(),this.setState({expanded:!this.state.expanded}),this.props.trackInteraction()},_updateHeight:function(){var e=c.findDOMNode(this.refs.content),t=this.props.apiOptions.isMobile,n=2*b+2*T,r=Array.prototype.reduce.call(e.childNodes,function(e,t){return e+(t.offsetHeight||0)},t?0:n);r!==this.state.contentHeight&&this.setState({contentHeight:r})},componentDidMount:function(){this._updateHeight()},componentDidUpdate:function(e,t){e!==this.props&&this._updateHeight()},render:function(){var e=this.props.apiOptions.baseElements.Link,t=this.props.apiOptions,n=t.readOnly,r=t.isMobile,i=this.state.expanded?this.props.hidePrompt:this.props.showPrompt,o=void 0,s=n?null:"javascript:void(0)",c=n?null:this._onClick;o=r?l.createElement("div",{className:a(x.linkContainer)},l.createElement("a",{className:a(x.mobileExplanationLink),href:s,onClick:c},i),this.state.expanded&&l.createElement("svg",{className:a(x.disclosureArrow)},l.createElement("polygon",{style:{fill:w},points:"0,"+T+" "+(E+","+T+" ")+(E/2+",0")}))):l.createElement("div",{className:a(x.linkContainer)},l.createElement(e,{className:a(x.explanationLink),href:s,onClick:c},"["+i+"]"));var p=r?x.contentExpandedMobile:x.contentExpanded;return l.createElement("div",{className:a(x.container)},o,l.createElement("div",{className:a(x.content,r&&x.contentMobile,this.state.expanded&&p),style:{height:this.state.expanded?this.state.contentHeight:0,overflow:this.state.expanded?"visible":"hidden"},ref:"content"},l.createElement(d,{apiOptions:this.props.apiOptions,content:this.props.explanation,widgets:this.props.widgets})))},getUserInput:function(){return{}},simpleValidate:function(e){return v.validate(this.getUserInput(),e)}}),y=23,b=10,E=30,T=14,w=g.gray95,x=s.create({container:{display:"inline",position:"relative"},linkContainer:{display:"inline-block"},explanationLink:(r={fontStyle:"italic",color:"#007d96"},r[f.xl]={fontSize:20,lineHeight:1.1},r[f.lgOrSmaller]={fontSize:17,lineHeight:1.4},r[f.smOrSmaller]={fontSize:14,lineHeight:1.3},r),mobileExplanationLink:(i={color:g.kaGreen,borderBottom:"dashed 1px "+g.kaGreen,textDecoration:"none"},i[f.xl]={fontSize:22,lineHeight:1.4},i[f.lgOrSmaller]={fontSize:20,lineHeight:1.5},i[f.smOrSmaller]={fontSize:18,lineHeight:1.2},i),content:{position:"relative",transition:"all 0.1s"},contentExpanded:{borderLeft:"5px solid #ccc",marginLeft:-y,paddingLeft:y,paddingBottom:b,marginBottom:T,marginTop:T},contentExpandedMobile:{boxSizing:"content-box",paddingTop:32,paddingBottom:32,marginTop:T},contentMobile:{background:w,marginLeft:g.negativePhoneMargin,marginRight:g.negativePhoneMargin,paddingLeft:g.phoneMargin,paddingRight:g.phoneMargin},disclosureArrow:{bottom:-(T+5),height:T,left:"50%",marginLeft:-(E/2),position:"absolute",width:E}});p.extend(v,{validate:function(e,t){return{type:"points",earned:0,total:0,message:null}}}),e.exports={name:"explanation",displayName:"Explanation (for hints)",defaultAlignment:"inline",
widget:v,transform:p.identity}},function(e,t,n){"use strict";var r=n(17),i=n(18),o=n(175),s=n(176),a=n(11),l=n(179),c={showPrompt:"Explain",hidePrompt:"Hide explanation",explanation:"explanation goes here\n\nmore explanation",widgets:{}},p=r.createClass({displayName:"ExplanationEditor",mixins:[s,o],propTypes:{showPrompt:r.PropTypes.string,hidePrompt:r.PropTypes.string,explanation:r.PropTypes.string,widgets:r.PropTypes.object,apiOptions:r.PropTypes.any},getDefaultProps:function(){return c},getInitialState:function(){return{}},render:function(){var e=this;return r.createElement("div",{className:"perseus-widget-explanation-editor"},r.createElement("div",{className:"perseus-widget-row"},r.createElement("label",null,"Prompt to show explanation: ",r.createElement(l,{value:this.props.showPrompt,onChange:this.change("showPrompt")}))),r.createElement("div",{className:"perseus-widget-row"},r.createElement("label",null,"Prompt to hide explanation: ",r.createElement(l,{value:this.props.hidePrompt,onChange:this.change("hidePrompt")}))),r.createElement("div",{className:"perseus-widget-row"},r.createElement(a,{apiOptions:this.props.apiOptions,content:this.props.explanation,widgets:this.props.widgets,widgetEnabled:!0,immutableWidgets:!1,onChange:function(t){var n={};i.has(t,"content")&&(n.explanation=t.content),i.has(t,"widgets")&&(n.widgets=t.widgets),e.change(n)}})))}});e.exports=p},function(e,t,n){"use strict";function r(e,t,n){var r=function(e,t,n){return(t[0]-e[0])*(n[1]-e[1])-(n[0]-e[0])*(t[1]-e[1])};return r(n[0],n[1],t)>0!=r(n[0],n[1],e)>0}var i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},o=n(17),s=n(18),a=n(188),l=n(32),c=n(6),p=n(54),u=n(66),h=u.MovablePoint,d=u.MovableLine,f=n(189),g=n(199).number,m=n(199).vector,v=n(199).point,y=n(190),b=n(161),E=b.containerSizeClassPropType,T=n(84),w=T.interactiveSizes,x=n(161),C=x.getInteractiveBoxFromSizeClass,S=n(175),P=n(204),k=P.GrapherUtil,_=P.typeToButton,M=P.functionForType,O=P.DEFAULT_GRAPHER_PROPS,N={padding:"5px 5px"},I=o.createClass({displayName:"FunctionGrapher",mixins:[S],_coords:function(e){e=e||this.props;var t=e.graph,n=e.model&&k.maybePointsFromNormalized(e.model.defaultCoords,t.range,t.step,t.snapStep);return e.coords||n||null},_asymptote:function(e){return e=e||this.props,e.asymptote},propTypes:{flexibleType:o.PropTypes.bool,graph:o.PropTypes.any,hideHairlines:o.PropTypes.func,isMobile:o.PropTypes.bool,model:o.PropTypes.any,onChange:o.PropTypes.func,setDrawingAreaAvailable:o.PropTypes.func,showHairlines:o.PropTypes.func,showTooltips:o.PropTypes.bool,static:o.PropTypes.bool},getDefaultProps:function(){return{graph:{range:[[-10,10],[-10,10]],step:[1,1]},coords:null,asymptote:null,isMobile:!1}},render:function(){var e=this,t=function(t,n){return o.createElement(h,{key:n,coord:t,static:e.props.static,constraints:[a.MovablePoint.constraints.bound(),a.MovablePoint.constraints.snap(),function(t){var r=s.all(e._coords(),function(e,r){return n===r||!e||!g.equal(t[0],e[0])});if(!r)return!1;if(e.props.model&&e.props.model.extraCoordConstraint){var i=e.props.model.extraCoordConstraint,o=s.clone(e._coords()),a=s.clone(o[n]);return o[n]=t,i(t,a,o,e._asymptote(),e.props.graph)}return r}],onMove:function(t,i){var o,a=e._asymptote();o=a&&e.props.model.allowReflectOverAsymptote&&r(t,i,a)?s.map(e._coords(),function(e){return v.reflectOverLine(e,a)}):s.clone(e._coords()),o[n]=t,e.props.onChange({coords:o})},showHairlines:e.props.showHairlines,hideHairlines:e.props.hideHairlines,showTooltips:e.props.showTooltips,isMobile:e.props.isMobile})},n=s.map(this._coords(),t),c=this.props.graph.box,p=this.props.graph.backgroundImage,d=null;if(p.url){var f=c[0]/w.defaultBoxSize;d=o.createElement(l,{src:p.url,width:p.width,height:p.height,scale:f})}return o.createElement("div",{className:"perseus-widget perseus-widget-grapher",style:{width:c[0],height:this.props.flexibleType?"auto":c[1],boxSizing:"initial"}},o.createElement("div",{className:"graphie-container above-scratchpad",style:{width:c[0],height:c[1]}},d,o.createElement(u,i({},this.props.graph,{setDrawingAreaAvailable:this.props.setDrawingAreaAvailable}),this.props.model&&this.renderPlot(),this.props.model&&this.renderAsymptote(),this.props.model&&n)))},renderPlot:function(){var e=this.props.model,t=this.props.graph.range[0],n=i({stroke:this.props.isMobile?y.BLUE_C:y.DYNAMIC},this.props.isMobile?{"stroke-width":3}:{}),r=e.getCoefficients(this._coords(),this._asymptote());if(r){var s=e.getPropsForCoeffs(r,t);return o.createElement(e.Movable,i({},s,{key:this.props.model.url,range:t,style:n}))}},renderAsymptote:function(){var e=this,t=this.props.model,n=this.props.graph,r=this._asymptote(),i={strokeDasharray:"- "};return r&&o.createElement(d,{onMove:function(t,n){var r=m.subtract(t,n),i=s.map(e._asymptote(),function(e){return m.add(e,r)});e.props.onChange({asymptote:i})},constraints:[a.MovableLine.constraints.bound(),a.MovableLine.constraints.snap(),function(r,i){var o=m.subtract(r,i),a=s.map(e._asymptote(),function(e){return m.add(e,o)});return!t.extraAsymptoteConstraint||t.extraAsymptoteConstraint(r,i,e._coords(),a,n)}],normalStyle:i,highlightStyle:i},s.map(r,function(t,n){return o.createElement(h,{key:"asymptoteCoord-"+n,coord:t,static:!0,draw:null,extendLine:!0,showHairlines:e.props.showHairlines,hideHairlines:e.props.hideHairlines,showTooltips:e.props.showTooltips,isMobile:e.props.isMobile})}))}}),A=o.createClass({displayName:"Grapher",propTypes:{apiOptions:o.PropTypes.any,availableTypes:o.PropTypes.arrayOf(o.PropTypes.any),containerSizeClass:E.isRequired,graph:o.PropTypes.any,markings:o.PropTypes.string,onChange:o.PropTypes.func,plot:o.PropTypes.any,static:o.PropTypes.bool,trackInteraction:o.PropTypes.func.isRequired},getDefaultProps:function(){return O},render:function(){var e=this.props.plot.type,t=this.props.plot.coords,n=this.props.plot.asymptote,r=o.createElement("div",{style:N,className:"above-scratchpad"},o.createElement(p,{value:e,allowEmpty:!0,buttons:s.map(this.props.availableTypes,_),onChange:this.handleActiveTypeChange})),a=C(this.props.containerSizeClass),l=i({},this.props.graph,k.getGridAndSnapSteps(this.props.graph,a[0]),{gridConfig:this._getGridConfig(i({},this.props.graph,{box:a},k.getGridAndSnapSteps(this.props.graph,a[0])))}),c={graph:{box:a,range:l.range,step:l.step,snapStep:l.snapStep,backgroundImage:l.backgroundImage,options:l,setup:this._setupGraphie},onChange:this.handlePlotChanges,model:e&&M(e),coords:t,asymptote:n,static:this.props.static,setDrawingAreaAvailable:this.props.apiOptions.setDrawingAreaAvailable,isMobile:this.props.apiOptions.isMobile,showTooltips:this.props.graph.showTooltips,showHairlines:this.showHairlines,hideHairlines:this.hideHairlines};return o.createElement("div",null,o.createElement(I,c),this.props.availableTypes.length>1&&r)},handlePlotChanges:function(e){var t=s.extend({},this.props.plot,e);this.props.onChange({plot:t}),this.props.trackInteraction()},handleActiveTypeChange:function(e){var t=this.props.graph,n=s.extend({},this.props.plot,k.defaultPlotProps(e,t));this.props.onChange({plot:n})},_getGridConfig:function(e){return s.map(e.step,function(t,n){return c.gridDimensionConfig(t,e.range[n],e.box[n],e.gridStep[n])})},_setupGraphie:function(e,t){var n=this.props.apiOptions.isMobile;if("graph"===t.markings?(e.graphInit({range:t.range,scale:s.pluck(t.gridConfig,"scale"),axisArrows:"<->",labelFormat:function(e){return"\\small{"+e+"}"},gridStep:t.gridStep,snapStep:t.snapStep,tickStep:n?c.constrainedTickStepsFromTickSteps(s.pluck(t.gridConfig,"tickStep"),t.range):s.pluck(t.gridConfig,"tickStep"),labelStep:1,unityLabels:s.pluck(t.gridConfig,"unityLabel"),isMobile:n}),e.label([0,t.range[1][1]],t.labels[1],n?"below right":"above"),e.label([t.range[0][1],0],t.labels[0],n?"above left":"right")):"grid"===t.markings?e.graphInit({range:t.range,scale:s.pluck(t.gridConfig,"scale"),gridStep:t.gridStep,axes:!1,ticks:!1,labels:!1,isMobile:n}):"none"===t.markings&&e.init({range:t.range,scale:s.pluck(t.gridConfig,"scale")}),this.props.apiOptions.isMobile){var r={normalStyle:{strokeWidth:1}};this.horizHairline=new f(e,[0,0],[0,0],r),this.horizHairline.attr({stroke:y.INTERACTIVE}),this.horizHairline.hide(),this.vertHairline=new f(e,[0,0],[0,0],r),this.vertHairline.attr({stroke:y.INTERACTIVE}),this.vertHairline.hide()}},showHairlines:function(e){this.props.apiOptions.isMobile&&"none"!==this.props.markings&&(this.horizHairline.moveTo([this.props.graph.range[0][0],e[1]],[this.props.graph.range[0][1],e[1]]),this.horizHairline.show(),this.vertHairline.moveTo([e[0],this.props.graph.range[1][0]],[e[0],this.props.graph.range[1][1]]),this.vertHairline.show())},hideHairlines:function(){this.props.apiOptions.isMobile&&(this.horizHairline.hide(),this.vertHairline.hide())},simpleValidate:function(e){return k.validate(this.getUserInput(),e)},getUserInput:function(){return this.props.plot},focus:$.noop}),R=function(e){var t={availableTypes:e.availableTypes,graph:e.graph};if(1===t.availableTypes.length){var n=t.graph,r=k.chooseType(t.availableTypes);t.plot=k.defaultPlotProps(r,n)}return t},D=function(e){return s.extend({},R(e),{availableTypes:[e.correct.type],plot:e.correct})};e.exports={name:"grapher",displayName:"Grapher",widget:A,transform:R,staticTransform:D}},function(e,t,n){"use strict";var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},i=n(17),o=n(18),s=n(175),a=n(191),l=n(71),c=n(177),p=n(100).widget,u=n(204),h=u.GrapherUtil,d=u.allTypes,f=u.typeToButton,g=u.DEFAULT_GRAPHER_PROPS,m=n(161),v=m.containerSizeClass,y=m.getInteractiveBoxFromSizeClass,b=i.createClass({displayName:"GrapherEditor",mixins:[s],getDefaultProps:function(){return{correct:g.plot,graph:g.graph,availableTypes:g.availableTypes}},render:function(){var e=this,t=v.SMALL,n=void 0,s=void 0;if(this.props.graph.valid===!0){var u={graph:this.props.graph,plot:this.props.correct,availableTypes:this.props.availableTypes,onChange:function(t,n){var r=e.props.correct;r=r.type===t.plot.type?o.extend({},r,t.plot):t.plot,e.props.onChange({correct:r},n)},trackInteraction:function(){}};s=i.createElement(p,r({},u,{apiOptions:this.props.apiOptions,containerSizeClass:t})),n=h.getEquationString(u)}else s=i.createElement("div",{className:"perseus-error"},this.props.graph.valid);return i.createElement("div",null,i.createElement("div",null,"Correct answer"," ",i.createElement(l,null,i.createElement("p",null,"Graph the correct answer in the graph below and ensure the equation or point coordinates displayed represent the correct answer."))," ",": ",n),i.createElement(a,{editableSettings:["graph","snap","image"],box:y(t),range:this.props.graph.range,labels:this.props.graph.labels,step:this.props.graph.step,gridStep:this.props.graph.gridStep,snapStep:this.props.graph.snapStep,valid:this.props.graph.valid,backgroundImage:this.props.graph.backgroundImage,markings:this.props.graph.markings,rulerLabel:this.props.graph.rulerLabel,rulerTicks:this.props.graph.rulerTicks,showTooltips:this.props.graph.showTooltips,onChange:this.change("graph")}),i.createElement("div",{className:"perseus-widget-row"},i.createElement("label",null,"Available functions:"," "," "),i.createElement(c,{allowEmpty:!1,values:this.props.availableTypes,buttons:o.map(d,f),onChange:this.handleAvailableTypesChange})),s)},handleAvailableTypesChange:function(e){var t=this.props.correct;if(!o.contains(e,this.props.correct.type))var n=this.props.graph,r=h.chooseType(e),t=h.defaultPlotProps(r,n);this.props.onChange({availableTypes:e,correct:t})},serialize:function(){return o.chain(this.props).pick("correct","availableTypes").extend({graph:o.omit(this.props.graph,"box")}).value()}});e.exports=b},function(e,t,n){"use strict";var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},i=n(51),o=n(17),s=n(18),a=n(5).Options,l=n(175),c=n(35),p=c.iconOk,u=c.iconRemove,h=(c.icon,n(36)),d=n(29),f=n(192),g=n(84),m=g.gray76,v=g.phoneMargin,y=g.negativePhoneMargin,b=g.tableBackgroundAccent,E=g.kaGreen,T=n(52),w=T.StyleSheet,x=T.css,C={ungraded:"ungraded",correct:"correct",incorrect:"incorrect",invalid:"invalid"},S=f.ANSWER_BAR_STATES,P=function(e,t){switch(e){case S.HIDDEN:return t?S.ACTIVE:e;case S.ACTIVE:return t?e:S.INACTIVE;case S.INACTIVE:return t?S.ACTIVE:e;case S.INCORRECT:return t?S.ACTIVE:S.INACTIVE;default:return e}},k="We couldn't grade your answer.",_="It looks like you left something blank or entered in an invalid answer.",M=o.createClass({displayName:"GradedGroup",propTypes:{apiOptions:a.propTypes,content:o.PropTypes.string,hasHint:o.PropTypes.bool,hint:o.PropTypes.object,images:o.PropTypes.object,inGradedGroupSet:o.PropTypes.bool,onBlur:o.PropTypes.func,onFocus:o.PropTypes.func,onNextQuestion:o.PropTypes.func,title:o.PropTypes.string,trackInteraction:o.PropTypes.func.isRequired,widgets:o.PropTypes.object},mixins:[l],getDefaultProps:function(){return{title:"",content:"",widgets:{},images:{},hint:null,hasHint:!1}},getInitialState:function(){return{status:C.ungraded,showHint:!1,message:"",answerBarState:S.HIDDEN}},shouldComponentUpdate:function(e,t){return e!==this.props||t!==this.state},_onInteractWithWidget:function(e){if(this.setState({status:C.ungraded,message:""}),this.refs.renderer){this.change("widgets",this.props.widgets);var t=this.refs.renderer.emptyWidgets(),n=0===t.length,r=this.state.answerBarState;this.setState({answerBarState:P(r,n)})}},_checkAnswer:function(){var e=this.refs.renderer.score(),t=void 0,n=void 0;"points"===e.type?(t=e.total===e.earned?C.correct:C.incorrect,n=e.message||""):(t=C.invalid,n=e.message?k+" "+e.message:k+" "+_),this.setState({status:t,message:n,answerBarState:"correct"===t?S.CORRECT:S.INCORRECT}),this.props.trackInteraction({status:t})},getInputPaths:function(){return this.refs.renderer.getInputPaths()},setInputValue:function(e,t,n){return this.refs.renderer.setInputValue(e,t,n)},getAcceptableFormatsForInputPath:function(e){return this.refs.renderer.getAcceptableFormatsForInputPath(e)},focus:function(){return this.refs.renderer.focus()},focusInputPath:function(e){this.refs.renderer.focusPath(e)},blurInputPath:function(e){this.refs.renderer.blurPath(e)},render:function(){var e,t=this,n=s.extend({},a.defaults,this.props.apiOptions,{onFocusChange:function(e,n){n&&t.props.onBlur(n),e&&t.props.onFocus(e)}}),l=null;this.state.status===C.correct?l=o.createElement(h,r({},p,{style:{color:"#526f03"}})):this.state.status===C.incorrect&&(l=o.createElement(h,r({},u,{style:{color:"#ff5454"}})));var c=x(this.props.inGradedGroupSet?N.gradedGroupInSet:N.gradedGroup),g=i((e={},e[c]=n.isMobile,e["perseus-graded-group"]=!0,e["answer-correct"]=!n.isMobile&&this.state.status===C.correct,e["answer-incorrect"]=!n.isMobile&&this.state.status===C.incorrect,e)),m=this.state.answerBarState,v=m===S.CORRECT,y=n.readOnly||n.isMobile&&v;return o.createElement("div",{className:g},!!this.props.title&&o.createElement("div",{className:x(N.title)},this.props.title),o.createElement(d,r({},this.props,{ref:"renderer",apiOptions:r({},n,{readOnly:y}),onInteractWithWidget:this._onInteractWithWidget})),!n.isMobile&&l&&o.createElement("div",{className:"group-icon"},l),!n.isMobile&&o.createElement("p",null,this.state.message),!n.isMobile&&o.createElement("input",{type:"button",value:i18n._("Check"),className:"simple-button",disabled:this.props.apiOptions.readOnly,onClick:this._checkAnswer}),!n.isMobile&&v&&this.props.onNextQuestion&&o.createElement("input",{type:"button",value:i18n._("Next question"),className:"simple-button",disabled:this.props.apiOptions.readOnly,onClick:this.props.onNextQuestion,style:{marginLeft:5}}),this.props.hint&&this.props.hint.content&&(this.state.showHint?o.createElement("div",null,o.createElement("div",{className:x(N.explanationTitle),onClick:function(){return t.setState({showHint:!1})}},i18n._("Hide explanation")),o.createElement(d,r({},this.props.hint,{ref:"hints-renderer",apiOptions:n}))):o.createElement("div",{onClick:function(){return t.setState({showHint:!0})},className:x(N.showHintLink)},i18n._("Explain"))),n.isMobile&&m!==S.HIDDEN&&o.createElement(f,{apiOptions:n,answerBarState:m,onCheckAnswer:this._checkAnswer,onNextQuestion:this.props.onNextQuestion}))}}),O=function(e,t){return s.extend({},e,t(e))};e.exports={name:"graded-group",displayName:"Graded Group",widget:M,traverseChildWidgets:O,hidden:!1,tracking:"all"};var N=w.create({gradedGroupInSet:{marginLeft:0,paddingLeft:0},gradedGroup:{borderTop:"1px solid "+m,borderBottom:"1px solid "+m,backgroundColor:b,marginLeft:y,marginRight:y,paddingBottom:v,paddingLeft:v,paddingRight:v,paddingTop:10,width:"auto"},showHintLink:{marginTop:20,color:E,cursor:"pointer"},explanationTitle:{marginTop:20,color:E,marginBottom:10,cursor:"pointer"},title:{fontSize:12,color:m,textTransform:"uppercase",marginBottom:11,letterSpacing:.8}})},function(e,t,n){"use strict";var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},i=n(17),o=(n(18),n(52)),s=o.StyleSheet,a=o.css,l=n(5).Options,c=n(175),p=n(11),u=n(179),h=n(36),d=n(35),f=d.iconPlus,g=d.iconTrash,m=i.createClass({displayName:"GradedGroupEditor",mixins:[c],propTypes:{title:i.PropTypes.string,content:i.PropTypes.string,widgets:i.PropTypes.object,images:i.PropTypes.object,apiOptions:l.propTypes},getDefaultProps:function(){return{title:"",content:"",widgets:{},images:{},hint:null}},handleAddHint:function(){var e=this,t={content:""};this.props.onChange({hint:t},function(){e.refs["hint-editor"].focus()})},handleRemoveHint:function(e){this.props.onChange({hint:null})},render:function(){var e=this;return i.createElement("div",{className:"perseus-group-editor"},i.createElement("div",{className:"perseus-widget-row"},i.createElement("label",{className:a(v.title)},"Title: ",i.createElement(u,{value:this.props.title,className:a(v.input),onChange:this.change("title")}))),i.createElement(p,{ref:"editor",content:this.props.content,widgets:this.props.widgets,apiOptions:this.props.apiOptions,images:this.props.images,widgetEnabled:!0,immutableWidgets:!1,onChange:this.props.onChange,warnNoPrompt:!0,warnNoWidgets:!0}),!this.props.hint&&i.createElement("button",{type:"button",style:{marginTop:10},className:"add-hint simple-button orange",onClick:this.handleAddHint},i.createElement(h,f)," ","Add a hint"),this.props.hint&&i.createElement("div",{className:"perseus-hint-editor"},i.createElement("div",{className:a(v.hintsTitle)},"Hint"),i.createElement(p,{ref:"hint-editor",content:this.props.hint?this.props.hint.content:"",widgets:this.props.hint?this.props.hint.widgets:{},apiOptions:this.props.apiOptions,images:this.props.hint&&this.props.hint.images,widgetEnabled:!0,immutableWidgets:!1,onChange:function(t){e.change("hint",Object.assign({},e.props.hint,t))}}),i.createElement("button",{type:"button",className:"remove-hint simple-button orange",onClick:this.handleRemoveHint},i.createElement(h,g)," ","Remove this hint")))},getSaveWarnings:function(){return this.refs.editor.getSaveWarnings()},serialize:function(){return r({title:this.props.title},this.refs.editor.serialize(),{hint:this.refs["hint-editor"]&&this.refs["hint-editor"].serialize()})}}),v=s.create({title:{fontSize:18,fontWeight:"bold"},input:{fontSize:18},hintsTitle:{marginTop:10,fontSize:"110%",fontWeight:"bold"}});e.exports=m},function(e,t,n){"use strict";var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},i=n(17),o=(n(18),n(52)),s=o.StyleSheet,a=o.css,l=n(5).Options,c=n(175),p=n(102).widget,u=n(84),h=u.grayLight,d=u.gray76,f=u.tableBackgroundAccent,g=u.kaGreen,m=u.phoneMargin,v=u.negativePhoneMargin,y=i.createClass({displayName:"Indicators",propTypes:{currentGroup:i.PropTypes.number.isRequired,numGroups:i.PropTypes.number.isRequired,onChangeCurrentGroup:i.PropTypes.func.isRequired},render:function(){for(var e=this,t=[],n=function(n){t.push(i.createElement("div",{key:n,className:a(T.indicator,n===e.props.currentGroup&&T.selectedIndicator),onClick:function(){return e.props.onChangeCurrentGroup(n)}}))},r=0;r<this.props.numGroups;r++)n(r);return i.createElement("div",{className:a(T.indicatorContainer)},t)}}),b=i.createClass({displayName:"GradedGroupSet",propTypes:{apiOptions:l.propTypes,gradedGroups:i.PropTypes.array,trackInteraction:i.PropTypes.func.isRequired},mixins:[c],getDefaultProps:function(){return{gradedGroups:[]}},getInitialState:function(){return{currentGroup:0}},shouldComponentUpdate:function(e,t){return e!==this.props||t!==this.state},getInputPaths:function(){return this._childGroup.getInputPaths()},setInputValue:function(e,t,n){return this._childGroup.setInputValue(e,t,n)},getAcceptableFormatsForInputPath:function(e){return this._childGroup.getAcceptableFormatsForInputPath(e)},focus:function(){return this._childGroup.focus()},focusInputPath:function(e){this._childGroup.focusInputPath(e)},blurInputPath:function(e){this._childGroup.blurInputPath(e)},handleNextQuestion:function(){var e=this.state.currentGroup,t=this.props.gradedGroups.length;e<t-1&&this.setState({currentGroup:e+1})},render:function(){var e=this,t=this.props.gradedGroups[this.state.currentGroup];if(!t)return i.createElement("span",null,"No current group...");var n=this.props.gradedGroups.length,o=this.state.currentGroup<n-1?this.handleNextQuestion:null;return i.createElement("div",{className:a(T.container)},i.createElement("div",{className:a(T.top)},i.createElement("div",{className:a(T.title)},t.title),i.createElement("div",{className:a(T.spacer)}),i.createElement(y,{numGroups:n,currentGroup:this.state.currentGroup,onChangeCurrentGroup:function(t){return e.setState({currentGroup:t})}})),i.createElement(p,r({key:this.state.currentGroup,ref:function(t){return e._childGroup=t}},this.props,t,{inGradedGroupSet:!0,title:null,onNextQuestion:o})))}}),E=function(e,t){return{groups:e.gradedGroups.map(t)}};e.exports={name:"graded-group-set",displayName:"Graded Group Set",widget:b,traverseChildWidgets:E,hidden:!1,tracking:"all"};var T=s.create({top:{display:"flex",flexDirection:"row"},spacer:{flex:1},title:{fontSize:12,color:d,textTransform:"uppercase",marginBottom:11,letterSpacing:.8},indicatorContainer:{display:"flex",flexDirection:"row"},indicator:{width:10,height:10,borderRadius:5,backgroundColor:h,marginLeft:5,cursor:"pointer"},selectedIndicator:{backgroundColor:g},container:{borderTop:"1px solid "+d,borderBottom:"1px solid "+d,backgroundColor:f,marginLeft:v,marginRight:v,paddingBottom:m,paddingLeft:m,paddingRight:m,paddingTop:10,width:"auto"}})},function(e,t,n){"use strict";var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},i=n(17),o=(n(18),n(5).Options),s=n(175),a=n(103),l=i.createClass({displayName:"GradedGroupSetEditor",propTypes:{apiOptions:o.propTypes,gradedGroups:i.PropTypes.array,onChange:i.PropTypes.func.isRequired},mixins:[s],getDefaultProps:function(){return{gradedGroups:[]}},componentWillMount:function(){this._editors=[]},getSaveWarnings:function(){var e;return(e=[]).concat.apply(e,this._editors.map(function(e){return e.getSaveWarnings()}))},serialize:function(){return{gradedGroups:this.props.gradedGroups}},renderGroups:function(){var e=this;return this.props.gradedGroups?this.props.gradedGroups.map(function(t,n){return i.createElement(a,r({key:n,ref:function(t){return e._editors[n]=t}},t,{apiOptions:e.props.apiOptions,widgetEnabled:!0,immutableWidgets:!1,onChange:function(t){return e.change("gradedGroups",c(e.props.gradedGroups,n,r({},e.props.gradedGroups[n],t)))}}))}):null},addGroup:function(){var e=this.props.gradedGroups||[];this.change("gradedGroups",e.concat([a.getDefaultProps()]))},render:function(){return i.createElement("div",{className:"perseus-group-editor"},this.renderGroups(),i.createElement("button",{onClick:this.addGroup},"Add group"))}}),c=function(e,t,n){return[].concat(e.slice(0,t),[n],e.slice(t+1))};e.exports=l},function(e,t,n){"use strict";var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},i=n(17),o=n(18),s=n(5).Options,a=n(175),l=n(29),c=i.createClass({displayName:"Group",mixins:[a],propTypes:{content:i.PropTypes.string,widgets:i.PropTypes.object,images:i.PropTypes.object,icon:i.PropTypes.object,reviewModeRubric:i.PropTypes.object},getDefaultProps:function(){return{content:"",widgets:{},images:{},icon:null}},componentDidMount:function(){this.forceUpdate()},render:function(){var e=this,t=o.extend({},s.defaults,this.props.apiOptions,{onFocusChange:function(t,n){n&&e.props.onBlur(n),t&&e.props.onFocus(t)}}),n=o.indexOf(this.props.interWidgets("group"),this),a=this.props.apiOptions.groupAnnotator(n,this.props.widgetId),c=function(t){e.refs.renderer&&e.change("widgets",e.refs.renderer.props.widgets)};return i.createElement("div",{className:"perseus-group"},a,i.createElement(l,r({},this.props,{ref:"renderer",apiOptions:t,interWidgets:this._interWidgets,reviewMode:!!this.props.reviewModeRubric,onInteractWithWidget:c})),this.props.icon&&i.createElement("div",{className:"group-icon"},this.props.icon))},_interWidgets:function(e,t){return t.length?t:this.props.interWidgets(e)},getUserInput:function(){return this.refs.renderer.getUserInput()},getSerializedState:function(){return this.refs.renderer.getSerializedState()},restoreSerializedState:function(e,t){return this.refs.renderer.restoreSerializedState(e,t),null},simpleValidate:function(e){return this.refs.renderer.score()},getInputPaths:function(){return this.refs.renderer.getInputPaths()},setInputValue:function(e,t,n){return this.refs.renderer.setInputValue(e,t,n)},getAcceptableFormatsForInputPath:function(e){return this.refs.renderer.getAcceptableFormatsForInputPath(e)},getRenderer:function(){return this.refs.renderer},focus:function(){return this.refs.renderer.focus()},focusInputPath:function(e){this.refs.renderer.focusPath(e)},blurInputPath:function(e){this.refs.renderer.blurPath(e)}}),p=function(e,t){return o.extend({},e,t(e))};e.exports={name:"group",displayName:"Group",widget:c,traverseChildWidgets:p,hidden:!1}},function(e,t,n){"use strict";var r=n(17),i=n(18),o=n(5).Options,s=n(175),a=n(11),l=r.createClass({displayName:"GroupEditor",mixins:[s],propTypes:{content:r.PropTypes.string,widgets:r.PropTypes.object,images:r.PropTypes.object,metadata:r.PropTypes.any,apiOptions:o.propTypes},getDefaultProps:function(){return{content:"",widgets:{},images:{},metadata:void 0}},render:function(){return r.createElement("div",{className:"perseus-group-editor"},r.createElement("div",null,this._renderMetadataEditor()),r.createElement(a,{ref:"editor",content:this.props.content,widgets:this.props.widgets,apiOptions:this.props.apiOptions,images:this.props.images,widgetEnabled:!0,immutableWidgets:!1,onChange:this.props.onChange}))},_renderMetadataEditor:function(){var e=this.props.apiOptions.GroupMetadataEditor;return r.createElement(e,{value:this.props.metadata,onChange:this.change("metadata")})},getSaveWarnings:function(){return this.refs.editor.getSaveWarnings()},serialize:function(){return i.extend({},this.refs.editor.serialize(),{metadata:this.props.metadata})}});e.exports=l},function(e,t,n){"use strict";var r=n(17),i=n(18),o=n(175),s=n(187),a=n(6).updateQueryString,l=r.createClass({displayName:"Iframe",mixins:[o,s],propTypes:{width:r.PropTypes.string,height:r.PropTypes.string,url:r.PropTypes.string,settings:r.PropTypes.array,status:r.PropTypes.oneOf(["incomplete","incorrect","correct"]),message:r.PropTypes.string,allowFullScreen:r.PropTypes.bool},getDefaultProps:function(){return{status:"incomplete",message:null,allowFullScreen:!1}},handleMessageEvent:function(e){var t={};try{t=JSON.parse(e.originalEvent.data)}catch(e){return}if(!i.isUndefined(t.testsPassed)){var n=t.testsPassed?"correct":"incorrect";this.change({status:n,message:t.message})}},componentDidMount:function(){$(window).on("message",this.handleMessageEvent)},componentWillUnmount:function(){$(window).off("message",this.handleMessageEvent)},render:function(){var e={width:this.props.width,height:this.props.height},t=this.props.url;if(t&&t.length&&0!==t.indexOf("http")&&(t="https://www.khanacademy.org/computer-programming/program/"+t+"/embedded?buttons=no&embed=yes&editor=no&author=no",t=a(t,"width",this.props.width),t=a(t,"height",this.props.height),t=a(t,"origin",window.location.origin)),"undefined"!=typeof KA&&KA.isZeroRated&&(t.match(/https?:\/\/[^\/]*khanacademy.org/)?t.match(/zero.khanacademy.org/)||(t=t.replace("khanacademy.org","zero.khanacademy.org")):t="/zero/external-link?context=iframe&url="+encodeURIComponent(t)),this.props.settings){var n={};i.each(this.props.settings,function(e){e.name&&e.value&&(n[e.name]=e.value)}),t=a(t,"settings",JSON.stringify(n))}return r.createElement("iframe",{sandbox:"allow-same-origin allow-scripts",style:e,src:t,allowFullScreen:this.props.allowFullScreen})},simpleValidate:function(e){return l.validate(this.getUserInput(),e)}});i.extend(l,{validate:function(e,t){return"correct"===e.status?{type:"points",earned:1,total:1,message:e.message||null}:"incorrect"===e.status?{type:"points",earned:0,total:1,message:e.message||null}:{type:"invalid",message:"Keep going, you're not there yet!"}}}),e.exports={name:"iframe",displayName:"Iframe",widget:l,hidden:!0}},function(e,t,n){"use strict";var r=n(17),i=n(18),o=n(175),s=n(176),a=n(174),l=n(39),c=r.createClass({displayName:"PairEditor",mixins:[o,s],propTypes:{name:r.PropTypes.string,value:r.PropTypes.string},getDefaultProps:function(){return{name:"",value:""}},render:function(){return r.createElement("fieldset",null,r.createElement("label",null,"Name:",r.createElement(a,{value:this.props.name,onChange:this.change("name")})),r.createElement("label",null,"Value:",r.createElement(a,{value:this.props.value,onChange:this.change("value")})))}}),p=r.createClass({displayName:"PairsEditor",mixins:[o,s],propTypes:{pairs:r.PropTypes.arrayOf(r.PropTypes.shape({name:r.PropTypes.string,value:r.PropTypes.string})).isRequired},render:function(){var e=this,t=i.map(this.props.pairs,function(t,n){return r.createElement(c,{key:n,name:t.name,value:t.value,onChange:e.handlePairChange.bind(e,n)})});return r.createElement("div",null,t)},handlePairChange:function(e,t){var n=this.props.pairs.slice();n[e]=t;var r=n[n.length-1];r.name&&r.value&&n.push({name:"",value:""}),this.change("pairs",n)}}),u=r.createClass({displayName:"IframeEditor",mixins:[o,s],getDefaultProps:function(){return{url:"",settings:[{name:"",value:""}],width:"400",height:"400",allowFullScreen:!1}},render:function(){return r.createElement("div",null,r.createElement("div",{style:{fontWeight:"bold",textAlign:"center"}},"This widget is deprecated! ",r.createElement("br",null),"Try using the Video or CS Program widgets instead."),r.createElement("label",null,"Url or Program ID:",r.createElement(a,{name:"url",value:this.props.url,onChange:this.change("url")})),r.createElement("br",null),r.createElement("label",null,"Settings:",r.createElement(p,{name:"settings",pairs:this.props.settings,onChange:this.handleSettingsChange})),r.createElement("br",null),r.createElement("label",null,"Width:",r.createElement(a,{name:"width",value:this.props.width,onChange:this.change("width")})),r.createElement("label",null,"Height:",r.createElement(a,{name:"height",value:this.props.height,onChange:this.change("height")})),r.createElement(l,{label:"Allow full screen",allowFullScreen:this.props.allowFullScreen,onChange:this.props.onChange}))},handleSettingsChange:function(e){this.change({settings:e.pairs})}});e.exports=u},function(e,t,n){"use strict";var r,i=n(51),o=n(52),s=o.StyleSheet,a=o.css,l=n(17),c=n(18),p=n(5).Options,u=n(84),h=u.baseUnitPx,d=n(175),f=n(82),g=n(29),m=n(32),v=400,y=[0,10],b={
url:null,width:0,height:0},E=["block","float-left","float-right","full-width"],T=["block","full-width"],w="block",x=l.createClass({displayName:"ImageWidget",propTypes:{alignment:l.PropTypes.oneOf(E),alt:l.PropTypes.string,apiOptions:p.propTypes,backgroundImage:l.PropTypes.shape({url:l.PropTypes.string,width:l.PropTypes.number,height:l.PropTypes.number}),box:l.PropTypes.arrayOf(l.PropTypes.number),caption:l.PropTypes.string,labels:l.PropTypes.arrayOf(l.PropTypes.shape({content:l.PropTypes.string,coordinates:l.PropTypes.arrayOf(l.PropTypes.number),alignment:l.PropTypes.string})),range:l.PropTypes.arrayOf(l.PropTypes.arrayOf(l.PropTypes.number)),title:l.PropTypes.string,trackInteraction:l.PropTypes.func.isRequired},statics:{styles:s.create({caption:(r={display:"inline-block",marginTop:h,maxWidth:640},r[f.lgOrSmaller]={maxWidth:540},r[f.smOrSmaller]={maxWidth:450},r)})},mixins:[d],getDefaultProps:function(){return{alignment:w,title:"",range:[y,y],box:[v,v],backgroundImage:b,labels:[],alt:"",caption:""}},render:function(){var e,t,n=this.props.apiOptions,r=this.props.backgroundImage;if(r.url&&(e=l.createElement(m,{src:r.url,alt:this.props.alt?"":void 0,width:r.width,height:r.height,preloader:n.imagePreloader,extraGraphie:{box:this.props.box,range:this.props.range,labels:this.props.labels},trackInteraction:this.props.trackInteraction,zoomToFullSizeOnMobile:n.isMobile,constrainHeight:n.isMobile,allowFullBleed:n.isMobile})),this.props.alt&&(t=l.createElement("span",{className:"perseus-sr-only"},l.createElement(g,{content:this.props.alt,apiOptions:n}))),n.isMobile){var o;if(this.props.title||this.props.caption){var s=this.props.title;s&&(this.props.caption&&!/[.?!"']\s*$/.test(s)&&(s+="."),s="**"+s+"** ");var c=i({"perseus-image-caption":!0,"has-title":!!s}),p=this.props.alignment,u="block"===p||"full-width"===p,h=u?null:"0 !important";o=l.createElement("div",{className:c},l.createElement("div",{className:a(x.styles.caption),style:{minWidth:h}},l.createElement(g,{content:s+this.props.caption,apiOptions:n})))}return l.createElement("div",{className:"perseus-image-widget"},e,t,o)}var d,f;return this.props.title&&(d=l.createElement("div",{className:"perseus-image-title"},l.createElement(g,{content:this.props.title,apiOptions:n}))),this.props.caption&&(f=l.createElement("div",{className:"perseus-image-caption"},l.createElement(g,{content:this.props.caption,apiOptions:n}))),l.createElement("div",{className:"perseus-image-widget"},d,e,t,f)},getUserInput:function(){return null},simpleValidate:function(e){return x.validate(this.getUserInput(),e)},focus:$.noop});c.extend(x,{validate:function(e,t){return{type:"points",earned:0,total:0,message:null}}}),e.exports={name:"image",accessible:function(e){var t=e.backgroundImage;return!(t&&t.url&&!e.alt)},defaultAlignment:w,supportedAlignments:T,displayName:"Image",widget:x}},function(e,t,n){"use strict";function r(){return{content:"",coordinates:[0,0],alignment:"center"}}var i=n(17),o=n(18),s=n(35),a=s.iconTrash,l=n(6),c=n(175),p=n(176),u=n(174),h=n(11),d=n(71),f=n(36),g=n(193),m=400,v=[0,10],y={url:null,width:0,height:0},b="(ka-.*.s3.amazonaws.com|(fastly|cdn).kastatic.org|khanacademy.org|kasandbox.org)",E=new RegExp("^(https?|web\\+graphie)://[^/]*"+b),T=["center","above","above right","right","below right","below","below left","left","above left"],w=i.createClass({displayName:"ImageEditor",mixins:[c,p],componentDidMount:function(){var e=this;o.defer(function(){var t=e.props.backgroundImage.url;e.onUrlChange(t,!0)})},getDefaultProps:function(){return{title:"",range:[v,v],box:[m,m],backgroundImage:y,labels:[],alt:"",caption:""}},getInitialState:function(){return{showAdvancedSettings:this.props.title.length>0||this.props.labels.length>0,backgroundImageError:""}},render:function(){var e=this,t=this.props.backgroundImage,n=i.createElement("div",{className:"image-settings"},i.createElement("div",null,i.createElement("label",null,i.createElement("div",null,"Alt text:",i.createElement(d,null,"This is important for screenreaders. The content of this alt text will be formatted as markdown (tables, emphasis, etc. are supported).")),i.createElement(h,{apiOptions:this.props.apiOptions,content:this.props.alt,onChange:function(t){null!=t.content&&e.change("alt",t.content)},widgetEnabled:!1}))),i.createElement("div",null,i.createElement("label",null,i.createElement("div",null,"Caption:"),i.createElement(h,{apiOptions:this.props.apiOptions,content:this.props.caption,onChange:function(t){null!=t.content&&e.change("caption",t.content)},widgetEnabled:!1})))),r=i.createElement("div",{className:"graph-settings"},i.createElement("div",null,i.createElement("label",null,"Graphie X range:"," ",i.createElement(g,{value:this.props.range[0],onChange:o.partial(this.onRangeChange,0)}))),i.createElement("div",null,i.createElement("label",null,"Graphie Y range:"," ",i.createElement(g,{value:this.props.range[1],onChange:o.partial(this.onRangeChange,1)}))),i.createElement("div",{className:"add-label"},i.createElement("button",{onClick:this.addLabel}," ","Add a label"," ")),this.props.labels.length>0&&i.createElement("table",{className:"label-settings"},i.createElement("thead",null,i.createElement("tr",null,i.createElement("th",null,"Coordinates"),i.createElement("th",null,"Content"),i.createElement("th",null,"Alignment"),i.createElement("th",null))),i.createElement("tbody",null,this.props.labels.map(this._renderRowForLabel))),i.createElement("div",null,i.createElement("label",null,i.createElement("div",null,"Title:",i.createElement(d,null,"Appears above the image.")),i.createElement(h,{apiOptions:this.props.apiOptions,content:this.props.title,onChange:function(t){null!=t.content&&e.change("title",t.content)},widgetEnabled:!1})))),s=i.createElement("div",null,i.createElement("a",{href:"#",onClick:this._toggleAdvancedSettings},this.state.showAdvancedSettings?"Hide ":"Show ","advanced settings"),this.state.showAdvancedSettings&&r),a=i.createElement("div",{className:"renderer-widget-error"},this.state.backgroundImageError);return i.createElement("div",{className:"perseus-image-editor"},i.createElement("label",null,"Image url:",i.createElement(d,null,"Paste an image or graphie image URL."),this.state.backgroundImageError&&a,i.createElement(u,{value:t.url||"",style:{width:332},onChange:function(t){return e.onUrlChange(t,!1)}})),t.url&&n,t.url&&s)},_toggleAdvancedSettings:function(e){e.preventDefault(),this.setState({showAdvancedSettings:!this.state.showAdvancedSettings})},_renderRowForLabel:function(e,t){return i.createElement("tr",{key:t},i.createElement("td",null,i.createElement(g,{value:e.coordinates,onChange:this.onCoordinateChange.bind(this,t)})),i.createElement("td",{style:{verticalAlign:"bottom",width:"5px"}},i.createElement("input",{type:"text",className:"graph-settings-axis-label",value:e.content,onChange:this.onContentChange.bind(this,t)})),i.createElement("td",null,i.createElement("select",{className:"perseus-widget-dropdown",value:e.alignment,onChange:this.onAlignmentChange.bind(this,t)},T.map(function(e,t){return i.createElement("option",{key:""+t,value:e},e)},this))),i.createElement("td",null,i.createElement("a",{href:"#",className:"simple-button orange delete-label",title:"Remove this label",onClick:this.removeLabel.bind(this,t)},i.createElement(f,a))))},addLabel:function(e){e.preventDefault();var t=this.props.labels.slice(),n=r();t.push(n),this.props.onChange({labels:t})},removeLabel:function(e,t){t.preventDefault();var n=o(this.props.labels).clone();n.splice(e,1),this.props.onChange({labels:n})},onCoordinateChange:function(e,t){var n=this.props.labels.slice();n[e]=o.extend({},n[e],{coordinates:t}),this.props.onChange({labels:n})},onContentChange:function(e,t){var n=t.target.value,r=this.props.labels.slice();r[e]=o.extend({},r[e],{content:n}),this.props.onChange({labels:r})},onAlignmentChange:function(e,t){var n=t.target.value,r=this.props.labels.slice();r[e]=o.extend({},r[e],{alignment:n}),this.props.onChange({labels:r})},setUrl:function(e,t,n,r){if(this.isMounted()){var i=o.clone(this.props.backgroundImage);i.url=e,i.width=t,i.height=n;var s=[i.width,i.height];this.props.onChange({backgroundImage:i,box:s},null,r)}},onUrlChange:function(e,t){var n=this;return E.test(e)?(this.setState({backgroundImageError:""}),this._leadingUrl=e,e?void l.getImageSize(e,function(t,r){n._leadingUrl===e&&n.setUrl(e,t,r,!0)}):void this.setUrl(e,0,0,t)):void this.setState({backgroundImageError:"Images must be from sites hosted by Khan Academy. Please input a Khan Academy-owned address, or use the Add Image tool to rehost an existing image"})},onRangeChange:function(e,t){var n=this.props.range.slice();n[e]=t,this.props.onChange({range:n})},getSaveWarnings:function(){var e=[];return this.props.backgroundImage.url&&!this.props.alt&&e.push("No alt text"),e}});e.exports=w},function(e,t,n){"use strict";var r=n(17),i=n(18),o=n(175),s=n(66),a=s.Label,l=s.Line,c=s.MovablePoint,p=s.MovableLine,u=s.Plot,h=s.PlotParametric,d=s.Point,f=s.Rect,g=n(199).vector,m=function(e,t){t=t||{};for(var n=e+"||"+t.decimal_separatpr+"||",r=t.functions,i=r?r.length:0,o=0;o<i;o++)n+=r[o]+"|";return n},v=Object.create(null),y=function(e,t){var n=m(e,t),r=v[n];return r?r:(r=KAS.parse(e,t),v[n]=r,r)},b=Object.create(null),E=function(e,t){var n=m(e,t),r=b[n];if(r)return r;var i=KAS.parse(e,t).expr;return r=i?i.compile():function(){return 0},b[n]=r,r},T={graph:{box:[400,400],labels:["x","y"],range:[[-10,10],[-10,10]],tickStep:[1,1],gridStep:[1,1],markings:"graph"},elements:[]},w=r.createClass({displayName:"Interaction",mixins:[o],propTypes:{graph:r.PropTypes.object,elements:r.PropTypes.arrayOf(r.PropTypes.object)},getDefaultProps:function(){return T},getInitialState:function(){return{variables:this._getInitialVariables(this.props.elements),functions:this._getInitialFunctions(this.props.elements)}},_getInitialVariables:function(e){var t={};return i.each(i.where(e,{type:"movable-point"}),function(e){var n=e.options.varSubscript,r=y(e.options.startX||"0").expr,i=y(e.options.startY||"0").expr,o=0,s=0;r&&(o=r.eval({})||0),i&&(s=i.eval({})||0),t["x_"+n]=o,t["y_"+n]=s},this),i.each(i.where(e,{type:"movable-line"}),function(e){var n=e.options.startSubscript,r=e.options.endSubscript,i=y(e.options.startX||"0").expr,o=y(e.options.startY||"0").expr,s=y(e.options.endX||"0").expr,a=y(e.options.endY||"0").expr,l=0,c=0,p=0,u=0;i&&(l=i.eval({})||0),o&&(c=o.eval({})||0),s&&(p=s.eval({})||0),a&&(u=a.eval({})||0),t["x_"+n]=l,t["y_"+n]=c,t["x_"+r]=p,t["y_"+r]=u},this),i.each(i.where(e,{type:"function"}),function(e){t[e.options.funcName]=e.options.value}),t},_getInitialFunctions:function(e){return i.map(i.where(e,{type:"function"}),function(e){return e.options.funcName})},componentWillReceiveProps:function(e){this.setState({variables:this._getInitialVariables(e.elements),functions:this._getInitialFunctions(e.elements)})},_setupGraphie:function(e,t){if(e.graphInit(i.extend({},t,{grid:i.contains(["graph","grid"],this.props.graph.markings),axes:i.contains(["graph"],this.props.graph.markings),ticks:i.contains(["graph"],this.props.graph.markings),labels:i.contains(["graph"],this.props.graph.markings),labelFormat:function(e){return"\\small{"+e+"}"},axisArrows:"<->",unityLabels:!1})),"graph"===this.props.graph.markings){var n=this.props.graph.labels,r=this.props.graph.range;e.label([0,r[1][1]],n[1],"above"),e.label([r[0][1],0],n[0],"right")}},_updatePointLocation:function(e,t){var n=i.clone(this.state.variables);n["x_"+e]=t[0],n["y_"+e]=t[1],this.setState({variables:n}),this.props.trackInteraction()},_updateLineLocation:function(e,t){var n=this._eval("("+e.endX+")-("+e.startX+")"),r=this._eval("("+e.endY+")-("+e.startY+")"),o=g.add(t,[n,r]),s=i.clone(this.state.variables);s["x_"+e.startSubscript]=t[0],s["y_"+e.startSubscript]=t[1],s["x_"+e.endSubscript]=o[0],s["y_"+e.endSubscript]=o[1],this.setState({variables:s}),this.props.trackInteraction()},_eval:function(e,t){var n=this,r=E(e,{functions:this.state.functions}),o=i.extend({},this.state.variables,t);return i.each(i.keys(o),function(e){if(i.isString(o[e])){var t=E(o[e],{functions:n.state.functions});o[e]=function(e){return t(i.extend({},o,{x:e}))}}}),r(o)||0},_extractVars:function(e){if(null==e)return[];var t=[];return i.each(e.args(),function(e){e&&"Expr"===e.constructor.name&&(t=t.concat(this._extractVars(e)))},this),"Var"===e.name()&&t.push(e.prettyPrint()),t},render:function(){return r.createElement(s,{box:this.props.graph.box,range:this.props.graph.range,options:this.props.graph,setup:this._setupGraphie,setDrawingAreaAvailable:this.props.apiOptions.setDrawingAreaAvailable},i.map(this.props.elements,function(e,t){var n=this;if("point"===e.type)return r.createElement(d,{key:e.key,coord:[this._eval(e.options.coordX),this._eval(e.options.coordY)],color:e.options.color});if("line"===e.type){var o=[this._eval(e.options.startX),this._eval(e.options.startY)],s=[this._eval(e.options.endX),this._eval(e.options.endY)];return r.createElement(l,{key:e.key,start:o,end:s,style:{stroke:e.options.color,strokeWidth:e.options.strokeWidth,strokeDasharray:e.options.strokeDasharray,arrows:e.options.arrows}})}if("movable-point"===e.type){var g=[function(t){var r=Math.max(n._eval(e.options.constraintXMin),Math.min(n._eval(e.options.constraintXMax),t[0])),i=Math.max(n._eval(e.options.constraintYMin),Math.min(n._eval(e.options.constraintYMax),t[1]));return[r,i]}];return"snap"===e.options.constraint?g.push(c.constraints.snap(e.options.snap)):"x"===e.options.constraint?g.push(function(t){return[n._eval(e.options.constraintFn,{y:t[1]}),t[1]]}):"y"===e.options.constraint&&g.push(function(t){return[t[0],n._eval(e.options.constraintFn,{x:t[0]})]}),r.createElement(c,{key:e.key,coord:[this.state.variables["x_"+e.options.varSubscript],this.state.variables["y_"+e.options.varSubscript]],constraints:g,foo_x:e.options.constraint,foo_y:e.options.constraintFn,foo_z:e.options.snap,onMove:i.partial(this._updatePointLocation,e.options.varSubscript)})}if("movable-line"===e.type){var g=[function(t){var r=Math.max(n._eval(e.options.constraintXMin),Math.min(n._eval(e.options.constraintXMax),t[0])),i=Math.max(n._eval(e.options.constraintYMin),Math.min(n._eval(e.options.constraintYMax),t[1]));return[r,i]}];"snap"===e.options.constraint?g.push(c.constraints.snap(e.options.snap)):"x"===e.options.constraint?g.push(function(t){return[n._eval(e.options.constraintFn,{y:t[1]}),t[1]]}):"y"===e.options.constraint&&g.push(function(t){return[t[0],n._eval(e.options.constraintFn,{x:t[0]})]});var o=[this.state.variables["x_"+e.options.startSubscript],this.state.variables["y_"+e.options.startSubscript]],s=[this.state.variables["x_"+e.options.endSubscript],this.state.variables["y_"+e.options.endSubscript]];return r.createElement(p,{key:e.key,constraints:g,onMove:i.bind(this._updateLineLocation,this,e.options),foo_x:e.options.constraint,foo_y:e.options.constraintFn,foo_z:e.options.snap},r.createElement(c,{coord:o,static:!0,normalStyle:{stroke:"none",fill:"none"}}),r.createElement(c,{coord:s,static:!0,normalStyle:{stroke:"none",fill:"none"}}))}if("function"===e.type){var m=function(t){return n._eval(e.options.value,{x:t})},v=i.without(this._extractVars(y(e.options.value).expr),"x"),b=i.object(v,i.map(v,function(e){return n.state.variables[e]})),E=[this._eval(e.options.rangeMin,this.state.variables),this._eval(e.options.rangeMax,this.state.variables)];return r.createElement(u,{key:e.key,fn:m,foo_fn:e.options.value,foo_varvalues:b,range:E,style:{stroke:e.options.color,strokeWidth:e.options.strokeWidth,strokeDasharray:e.options.strokeDasharray,plotPoints:100}})}if("parametric"===e.type){var m=function(t){return[n._eval(e.options.x,{t:t}),n._eval(e.options.y,{t:t})]},v=i.without(this._extractVars(y(e.options.x).expr).concat(this._extractVars(y(e.options.y).expr)),"t"),b=i.object(v,i.map(v,function(e){return n.state.variables[e]})),E=[this._eval(e.options.rangeMin,this.state.variables),this._eval(e.options.rangeMax,this.state.variables)];return r.createElement(h,{key:e.key,fn:m,foo_fnx:e.options.x,foo_fny:e.options.y,foo_varvalues:b,range:E,style:{stroke:e.options.color,strokeWidth:e.options.strokeWidth,strokeDasharray:e.options.strokeDasharray,plotPoints:100}})}if("label"===e.type){var T=[this._eval(e.options.coordX),this._eval(e.options.coordY)];return r.createElement(a,{key:t+1,coord:T,text:e.options.label,style:{color:e.options.color}})}return"rectangle"===e.type?r.createElement(f,{key:t+1,x:this._eval(e.options.coordX),y:this._eval(e.options.coordY),width:i.max([this._eval(e.options.width),0]),height:i.max([this._eval(e.options.height),0]),style:{stroke:"none",fill:e.options.color}}):void 0},this))},getUserInput:function(){return{}},simpleValidate:function(e){return w.validate(this.getUserInput(),e)}});i.extend(w,{validate:function(e,t){return{type:"points",earned:0,total:0,message:null}}}),e.exports={name:"interaction",displayName:"Interaction",widget:w,transform:i.identity}},function(e,t,n){"use strict";var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},i=n(17),o=n(18),s=n(175),a=n(176),l=n(205),c=n(206),p=n(207),u=n(208),h=n(209),d=n(191),f=n(181),g=n(178),m=n(60),v=n(179),y=n(190),b={graph:{box:[400,400],labels:["x","y"],range:[[-10,10],[-10,10]],tickStep:[1,1],gridStep:[1,1],markings:"graph"},elements:[]},E=i.createClass({displayName:"PointEditor",mixins:[a,s],propTypes:{coordX:i.PropTypes.string,coordY:i.PropTypes.string,color:i.PropTypes.string},getDefaultProps:function(){return{coordX:"0",coordY:"0",color:y.BLACK}},render:function(){return i.createElement("div",{className:"graph-settings"},i.createElement("div",{className:"perseus-widget-row"},"Coordinate: ",i.createElement(m,null,"\\Large("),i.createElement(f,{buttonSets:[],buttonsVisible:"never",value:this.props.coordX,onChange:this.change("coordX")}),i.createElement(m,null,",")," ",i.createElement(f,{buttonSets:[],buttonsVisible:"never",value:this.props.coordY,onChange:this.change("coordY")}),i.createElement(m,null,"\\Large)")),i.createElement("div",{className:"perseus-widget-row"},i.createElement(c,{value:this.props.color,onChange:this.change("color")})))}}),T=i.createClass({displayName:"LineEditor",mixins:[a,s],propTypes:{startX:i.PropTypes.string,startY:i.PropTypes.string,endX:i.PropTypes.string,endY:i.PropTypes.string,color:i.PropTypes.string,strokeDasharray:i.PropTypes.string,arrows:i.PropTypes.string,strokeWidth:i.PropTypes.number},getDefaultProps:function(){return{startX:"-5",startY:"5",endX:"5",endY:"5",color:y.BLACK,strokeDasharray:"",arrows:"",strokeWidth:2}},render:function(){return i.createElement("div",{className:"graph-settings"},i.createElement("div",{className:"perseus-widget-row"},"Start: ",i.createElement(m,null,"\\Large("),i.createElement(f,{buttonSets:[],buttonsVisible:"never",value:this.props.startX,onChange:this.change("startX")}),i.createElement(m,null,",")," ",i.createElement(f,{buttonSets:[],buttonsVisible:"never",value:this.props.startY,onChange:this.change("startY")}),i.createElement(m,null,"\\Large)")),i.createElement("div",{className:"perseus-widget-row"},"End: ",i.createElement(m,null,"\\Large("),i.createElement(f,{buttonSets:[],buttonsVisible:"never",value:this.props.endX,onChange:this.change("endX")}),i.createElement(m,null,",")," ",i.createElement(f,{buttonSets:[],buttonsVisible:"never",value:this.props.endY,onChange:this.change("endY")}),i.createElement(m,null,"\\Large)")),i.createElement("div",{className:"perseus-widget-row"},i.createElement(c,{value:this.props.color,onChange:this.change("color")})),i.createElement("div",{className:"perseus-widget-row"},i.createElement(u,{value:this.props.strokeDasharray,onChange:this.change("strokeDasharray")}),"   ",i.createElement(l,{value:this.props.arrows,onChange:this.change("arrows")})),i.createElement("div",{className:"perseus-widget-row"},i.createElement("div",{className:"perseus-widget-left-col"},"Width: ",i.createElement(g,{value:this.props.strokeWidth,placeholder:2,onChange:this.change("strokeWidth")}))))}}),w=i.createClass({displayName:"MovablePointEditor",mixins:[a,s],propTypes:{startX:i.PropTypes.string,startY:i.PropTypes.string,constraint:i.PropTypes.string,snap:i.PropTypes.number,constraintFn:i.PropTypes.string},getDefaultProps:function(){return{startX:"0",startY:"0",constraint:"none",snap:.5,constraintFn:"0",constraintXMin:"-10",constraintXMax:"10",constraintYMin:"-10",constraintYMax:"10"}},render:function(){return i.createElement("div",{className:"graph-settings"},i.createElement("div",{className:"perseus-widget-row"},"Start: ",i.createElement(m,null,"\\Large("),i.createElement(f,{buttonSets:[],buttonsVisible:"never",value:this.props.startX,onChange:this.change("startX")}),i.createElement(m,null,",")," ",i.createElement(f,{buttonSets:[],buttonsVisible:"never",value:this.props.startY,onChange:this.change("startY")}),i.createElement(m,null,"\\Large)")),i.createElement("div",{className:"perseus-widget-row"},"Update ",i.createElement(m,null,"(x_n, y_n)")," for ",i.createElement(m,null,"n =")," ",i.createElement(g,{value:this.props.varSubscript,placeholder:0,onChange:this.change("varSubscript")})),i.createElement(p,this.props))}}),x=i.createClass({displayName:"MovableLineEditor",mixins:[a,s],propTypes:{startX:i.PropTypes.string,startY:i.PropTypes.string,endX:i.PropTypes.string,endY:i.PropTypes.string,constraint:i.PropTypes.string,snap:i.PropTypes.number,constraintFn:i.PropTypes.string},getDefaultProps:function(){return{startX:"-5",startY:"5",endX:"5",endY:"5",constraint:"none",snap:.5,constraintFn:"0",constraintXMin:"-10",constraintXMax:"10",constraintYMin:"-10",constraintYMax:"10"}},render:function(){return i.createElement("div",{className:"graph-settings"},"Initial position:",i.createElement("div",{className:"perseus-widget-row"},"Start: ",i.createElement(m,null,"\\Large("),i.createElement(f,{buttonSets:[],buttonsVisible:"never",value:this.props.startX,onChange:this.change("startX")}),i.createElement(m,null,",")," ",i.createElement(f,{buttonSets:[],buttonsVisible:"never",value:this.props.startY,onChange:this.change("startY")}),i.createElement(m,null,"\\Large)")),i.createElement("div",{className:"perseus-widget-row"},"End: ",i.createElement(m,null,"\\Large("),i.createElement(f,{buttonSets:[],buttonsVisible:"never",value:this.props.endX,onChange:this.change("endX")}),i.createElement(m,null,",")," ",i.createElement(f,{buttonSets:[],buttonsVisible:"never",value:this.props.endY,onChange:this.change("endY")}),i.createElement(m,null,"\\Large)")),i.createElement("div",{className:"perseus-widget-row"},"Start updates ",i.createElement(m,null,"(x_n, y_n)")," for ",i.createElement(m,null,"n ="),i.createElement(g,{value:this.props.startSubscript,placeholder:0,onChange:this.change("startSubscript")})),i.createElement("div",{className:"perseus-widget-row"},"End updates ",i.createElement(m,null,"(x_m, y_m)")," for ",i.createElement(m,null,"m ="),i.createElement(g,{value:this.props.endSubscript,placeholder:0,onChange:this.change("endSubscript")})),i.createElement("div",{className:"perseus-widget-row"},"All constraints are applied to the start point."),i.createElement(p,this.props))}}),C=i.createClass({displayName:"FunctionEditor",mixins:[a,s],propTypes:{value:i.PropTypes.string,rangeMin:i.PropTypes.string,rangeMax:i.PropTypes.string,color:i.PropTypes.string,strokeDashArray:i.PropTypes.string,strokeWidth:i.PropTypes.number},getDefaultProps:function(){return{value:"x",rangeMin:"-10",rangeMax:"10",color:y.BLUE,strokeDasharray:"",strokeWidth:2}},render:function(){return i.createElement("div",{className:"graph-settings"},i.createElement("div",{className:"perseus-widget-row"},i.createElement(m,null,this.props.funcName+"(x)=")," ",i.createElement(f,{buttonSets:[],buttonsVisible:"never",value:this.props.value,onChange:this.change("value")})),i.createElement("div",{className:"perseus-widget-row"},"Range: ",i.createElement(m,null,"\\Large("),i.createElement(f,{buttonSets:[],buttonsVisible:"never",value:this.props.rangeMin,onChange:this.change("rangeMin")}),i.createElement(m,null,",")," ",i.createElement(f,{buttonSets:[],buttonsVisible:"never",value:this.props.rangeMax,onChange:this.change("rangeMax")}),i.createElement(m,null,"\\Large)")),i.createElement("div",{className:"perseus-widget-row"},i.createElement(c,{value:this.props.color,onChange:this.change("color")})),i.createElement("div",{className:"perseus-widget-row"},i.createElement(u,{value:this.props.strokeDasharray,onChange:this.change("strokeDasharray")})),i.createElement("div",{className:"perseus-widget-row"},i.createElement("div",{className:"perseus-widget-left-col"},"Width: ",i.createElement(g,{value:this.props.strokeWidth,placeholder:2,onChange:this.change("strokeWidth")}))))}}),S=i.createClass({displayName:"ParametricEditor",mixins:[a,s],propTypes:{x:i.PropTypes.string,y:i.PropTypes.string,rangeMin:i.PropTypes.string,rangeMax:i.PropTypes.string,color:i.PropTypes.string,strokeDashArray:i.PropTypes.string,strokeWidth:i.PropTypes.number},getDefaultProps:function(){return{x:"cos(t)",y:"sin(t)",rangeMin:"0",rangeMax:"2\\pi",color:y.BLUE,strokeDasharray:"",strokeWidth:2}},render:function(){return i.createElement("div",{className:"graph-settings"},i.createElement("div",{className:"perseus-widget-row"},i.createElement(m,null,"X(t) =")," ",i.createElement(f,{buttonSets:[],buttonsVisible:"never",value:this.props.x,onChange:this.change("x")})),i.createElement("div",{className:"perseus-widget-row"},i.createElement(m,null,"Y(t) =")," ",i.createElement(f,{buttonSets:[],buttonsVisible:"never",value:this.props.y,onChange:this.change("y")})),i.createElement("div",{className:"perseus-widget-row"},"Range: ",i.createElement(m,null,"\\Large("),i.createElement(f,{buttonSets:[],buttonsVisible:"never",value:this.props.rangeMin,onChange:this.change("rangeMin")}),i.createElement(m,null,",")," ",i.createElement(f,{buttonSets:[],buttonsVisible:"never",value:this.props.rangeMax,onChange:this.change("rangeMax")}),i.createElement(m,null,"\\Large)")),i.createElement("div",{className:"perseus-widget-row"},i.createElement(c,{value:this.props.color,onChange:this.change("color")})),i.createElement("div",{className:"perseus-widget-row"},i.createElement(u,{value:this.props.strokeDasharray,onChange:this.change("strokeDasharray")})),i.createElement("div",{className:"perseus-widget-row"},i.createElement("div",{className:"perseus-widget-left-col"},"Width: ",i.createElement(g,{value:this.props.strokeWidth,placeholder:2,onChange:this.change("strokeWidth")}))))}}),P=i.createClass({displayName:"LabelEditor",mixins:[a,s],propTypes:{color:i.PropTypes.string,coordX:i.PropTypes.string,coordY:i.PropTypes.string,label:i.PropTypes.string},getDefaultProps:function(){return{coordX:"0",coordY:"0",color:y.BLACK,label:"\\phi"}},render:function(){return i.createElement("div",{className:"graph-settings"},i.createElement("div",{className:"perseus-widget-row"},i.createElement(v,{value:this.props.label,onChange:this.change("label"),style:{width:"100%"}})),i.createElement("div",{className:"perseus-widget-row"},"Location: ",i.createElement(m,null,"\\Large("),i.createElement(f,{buttonSets:[],buttonsVisible:"never",value:this.props.coordX,onChange:this.change("coordX")}),i.createElement(m,null,",")," ",i.createElement(f,{buttonSets:[],buttonsVisible:"never",value:this.props.coordY,onChange:this.change("coordY")}),i.createElement(m,null,"\\Large)")),i.createElement("div",{className:"perseus-widget-row"},i.createElement(c,{value:this.props.color,onChange:this.change("color")})))}}),k=i.createClass({displayName:"RectangleEditor",mixins:[a,s],propTypes:{color:i.PropTypes.string,coordX:i.PropTypes.string,coordY:i.PropTypes.string,height:i.PropTypes.string,width:i.PropTypes.string},getDefaultProps:function(){return{coordX:"-5",coordY:"5",width:"2",height:"3",color:y.LIGHT_BLUE}},render:function(){return i.createElement("div",{className:"graph-settings"},i.createElement("div",{className:"perseus-widget-row"},"Bottom left: ",i.createElement(m,null,"\\Large("),i.createElement(f,{buttonSets:[],buttonsVisible:"never",value:this.props.coordX,onChange:this.change("coordX")}),i.createElement(m,null,",")," ",i.createElement(f,{buttonSets:[],buttonsVisible:"never",value:this.props.coordY,onChange:this.change("coordY")}),i.createElement(m,null,"\\Large)")),i.createElement("div",{className:"perseus-widget-row"},"Width: ",i.createElement(f,{buttonSets:[],buttonsVisible:"never",value:this.props.width,onChange:this.change("width")})),i.createElement("div",{className:"perseus-widget-row"},"Height: ",i.createElement(f,{buttonSets:[],buttonsVisible:"never",value:this.props.height,onChange:this.change("height")})),i.createElement("div",{className:"perseus-widget-row"},i.createElement(c,{value:this.props.color,lightColors:!0,onChange:this.change("color")})),i.createElement("div",{className:"perseus-widget-row"},"You want a border? Sorry, draw your own."))}}),_=i.createClass({displayName:"InteractionEditor",mixins:[a,s],propTypes:{elements:i.PropTypes.arrayOf(i.PropTypes.object),graph:i.PropTypes.objectOf(i.PropTypes.any)},getDefaultProps:function(){return b},getInitialState:function(){return{usedVarSubscripts:this._getAllVarSubscripts(this.props.elements),usedFunctionNames:this._getAllFunctionNames(this.props.elements)}},componentWillReceiveProps:function(e){this.setState({usedVarSubscripts:this._getAllVarSubscripts(e.elements),usedFunctionNames:this._getAllFunctionNames(e.elements)})},_getAllVarSubscripts:function(e){return o.map(o.where(e,{type:"movable-point"}),function(e){return e.options.varSubscript}).concat(o.map(o.where(e,{type:"movable-line"}),function(e){return e.options.startSubscript})).concat(o.map(o.where(e,{type:"movable-line"}),function(e){return e.options.endSubscript}))},_getAllFunctionNames:function(e){return o.map(o.where(e,{type:"function"}),function(e){return e.options.funcName})},_updateGraphProps:function(e){this.change({graph:o.extend(o.omit(e,"step"),{tickStep:e.step})})},_addNewElement:function(e){var t=e.target.value;if(""!==t){e.target.value="";var n,r={type:t,key:t+"-"+(16777215*Math.random()<<0).toString(16),options:"point"===t?o.clone(E.defaultProps):"line"===t?o.clone(T.defaultProps):"movable-point"===t?o.clone(w.defaultProps):"movable-line"===t?o.clone(x.defaultProps):"function"===t?o.clone(C.defaultProps):"parametric"===t?o.clone(S.defaultProps):"label"===t?o.clone(P.defaultProps):"rectangle"===t?o.clone(k.defaultProps):{}};if("movable-point"===t)n=o.max([o.max(this.state.usedVarSubscripts),-1])+1,r.options.varSubscript=n;else if("movable-line"===t)n=o.max([o.max(this.state.usedVarSubscripts),-1])+1,r.options.startSubscript=n,r.options.endSubscript=n+1;else if("function"===t){var i=String.fromCharCode(o.max([o.max(o.map(this.state.usedFunctionNames,function(e){return e.charCodeAt(0)})),"e".charCodeAt(0)])+1);r.options.funcName=i}this.change({elements:this.props.elements.concat(r)})}},_deleteElement:function(e){var t=this.props.elements[e];this.change({elements:o.without(this.props.elements,t)})},_moveElementUp:function(e){var t=this.props.elements[e],n=o.without(this.props.elements,t);n.splice(e-1,0,t),this.change({elements:n})},_moveElementDown:function(e){var t=this.props.elements[e],n=o.without(this.props.elements,t);n.splice(e+1,0,t),this.change({elements:n})},render:function(){return i.createElement("div",{className:"perseus-widget-interaction-editor"},i.createElement(h,{title:"Grid settings"},i.createElement(d,{editableSettings:["canvas","graph"],box:this.props.graph.box,labels:this.props.graph.labels,range:this.props.graph.range,step:this.props.graph.tickStep,gridStep:this.props.graph.gridStep,markings:this.props.graph.markings,onChange:this._updateGraphProps}),this.props.graph.valid===!0||i.createElement("div",null,this.props.graph.valid)),o.map(this.props.elements,function(e,t){var n=this;return"movable-point"===e.type?i.createElement(h,{title:i.createElement("span",null,"Movable point ",i.createElement(m,null,"(x_{"+e.options.varSubscript+"}, y_{"+e.options.varSubscript+"})")),
onUp:0===t?null:this._moveElementUp.bind(this,t),onDown:t===this.props.elements.length-1?null:this._moveElementDown.bind(this,t),onDelete:this._deleteElement.bind(this,t),key:e.key},i.createElement(w,r({},e.options,{onChange:function(e){var r=JSON.parse(JSON.stringify(n.props.elements));o.extend(r[t].options,e),n.change({elements:r})}}))):"movable-line"===e.type?i.createElement(h,{title:i.createElement("span",null,"Movable line ",i.createElement(m,null,"(x_{"+e.options.startSubscript+"}, y_{"+e.options.startSubscript+"})")," to ",i.createElement(m,null,"(x_{"+e.options.endSubscript+"}, y_{"+e.options.endSubscript+"})")),onUp:0===t?null:this._moveElementUp.bind(this,t),onDown:t===this.props.elements.length-1?null:this._moveElementDown.bind(this,t),onDelete:this._deleteElement.bind(this,t),key:e.key},i.createElement(x,r({},e.options,{onChange:function(e){var r=JSON.parse(JSON.stringify(n.props.elements));o.extend(r[t].options,e),n.change({elements:r})}}))):"point"===e.type?i.createElement(h,{title:i.createElement("span",null,"Point ",i.createElement(m,null,"("+e.options.coordX+", "+e.options.coordY+")")),onUp:0===t?null:this._moveElementUp.bind(this,t),onDown:t===this.props.elements.length-1?null:this._moveElementDown.bind(this,t),onDelete:this._deleteElement.bind(this,t),key:e.key},i.createElement(E,r({},e.options,{onChange:function(e){var r=JSON.parse(JSON.stringify(n.props.elements));o.extend(r[t].options,e),n.change({elements:r})}}))):"line"===e.type?i.createElement(h,{title:i.createElement("span",null,"Line ",i.createElement(m,null,"("+e.options.startX+", "+e.options.startY+")")," to ",i.createElement(m,null,"("+e.options.endX+", "+e.options.endY+")")),onUp:0===t?null:this._moveElementUp.bind(this,t),onDown:t===this.props.elements.length-1?null:this._moveElementDown.bind(this,t),onDelete:this._deleteElement.bind(this,t),key:e.key},i.createElement(T,r({},e.options,{onChange:function(e){var r=JSON.parse(JSON.stringify(n.props.elements));o.extend(r[t].options,e),n.change({elements:r})}}))):"function"===e.type?i.createElement(h,{title:i.createElement("span",null,"Function ",i.createElement(m,null,e.options.funcName+"(x) = "+e.options.value)),onUp:0===t?null:this._moveElementUp.bind(this,t),onDown:t===this.props.elements.length-1?null:this._moveElementDown.bind(this,t),onDelete:this._deleteElement,key:e.key},i.createElement(C,r({},e.options,{onChange:function(e){var r=JSON.parse(JSON.stringify(n.props.elements));o.extend(r[t].options,e),n.change({elements:r})}}))):"parametric"===e.type?i.createElement(h,{title:i.createElement("span",null,"Parametric"),onUp:0===t?null:this._moveElementUp.bind(this,t),onDown:t===this.props.elements.length-1?null:this._moveElementDown.bind(this,t),onDelete:this._deleteElement,key:e.key},i.createElement(S,r({},e.options,{onChange:function(e){var r=JSON.parse(JSON.stringify(n.props.elements));o.extend(r[t].options,e),n.change({elements:r})}}))):"label"===e.type?i.createElement(h,{title:i.createElement("span",null,"Label ",i.createElement(m,null,e.options.label)," "),onUp:0===t?null:this._moveElementUp.bind(this,t),onDown:t===this.props.elements.length-1?null:this._moveElementDown.bind(this,t),onDelete:this._deleteElement,key:e.key},i.createElement(P,r({},e.options,{onChange:function(e){var r=JSON.parse(JSON.stringify(n.props.elements));o.extend(r[t].options,e),n.change({elements:r})}}))):"rectangle"===e.type?i.createElement(h,{title:i.createElement("span",null,"Rectangle ",i.createElement(m,null,"("+e.options.coordX+", "+e.options.coordY+")")," — ",i.createElement(m,null,e.options.width+" \\times "+e.options.height)),onUp:0===t?null:this._moveElementUp.bind(this,t),onDown:t===this.props.elements.length-1?null:this._moveElementDown.bind(this,t),onDelete:this._deleteElement,key:e.key},i.createElement(k,r({},e.options,{onChange:function(e){var r=JSON.parse(JSON.stringify(n.props.elements));o.extend(r[t].options,e),n.change({elements:r})}}))):void 0},this),i.createElement("div",{className:"perseus-widget-interaction-editor-select-element"},i.createElement("select",{onChange:this._addNewElement},i.createElement("option",{value:""},"Add an element","…"),i.createElement("option",{disabled:!0},"--"),i.createElement("option",{value:"point"},"Point"),i.createElement("option",{value:"line"},"Line segment"),i.createElement("option",{value:"function"},"Function plot"),i.createElement("option",{value:"parametric"},"Parametric plot"),i.createElement("option",{value:"label"},"Label"),i.createElement("option",{value:"rectangle"},"Rectangle"),i.createElement("option",{value:"movable-point"},"★ Movable point"),i.createElement("option",{value:"movable-line"},"★ Movable line segment"))))}});e.exports=_},function(e,t,n){"use strict";function r(e,t,n){return(t[0]-e[0])*(n[1]-e[1])-(n[0]-e[0])*(t[1]-e[1])}function i(e,t,n){return H(r(e,t,n),0)}function o(e){return H(e,0)?0:e>0?1:-1}function s(e,t){return null==e?t:e}function a(e,t,n){return n[0]<=Math.max(e[0],t[0])&&n[0]>=Math.min(e[0],t[0])&&n[1]<=Math.max(e[1],t[1])&&n[1]>=Math.min(e[1],t[1])}function l(e,t){var n=[[e[0],e[1],t[0]],[e[0],e[1],t[1]],[t[0],t[1],e[0]],[t[0],t[1],e[1]]],i=S.map(n,function(e){return o(r.apply(null,e))});if(i[0]!==i[1]&&i[2]!==i[3])return!0;for(var s=0;s<4;s++)if(0===i[s]&&a.apply(null,n[s]))return!0;return!1}function c(e,t){return S.map(S.zip(e,t),function(e){return e[0]-e[1]})}function p(e){return Math.sqrt(S.reduce(e,function(e,t){return e+Math.pow(t,2)},0))}function u(e,t){return S.reduce(S.zip(e,t),function(e,t){return e+t[0]*t[1]},0)}function h(e){var t=S.zip(e,y(e));return S.map(t,function(e){return p(c.apply(null,e))})}function d(e){var t=S.zip(y(e,-1),e,y(e,1)),n=S.map(t,function(e){var t=c(e[1],e[0]),n=c(e[2],e[1]),i=Math.acos(u(t,n)/(p(t)*p(n)));return o(r.apply(null,e))>0?i:-i}),i=S.reduce(n,function(e,t){return e+t},0);return S.map(n,function(e){return i>0?Math.PI-e:Math.PI+e})}function f(e,t,n){if(e.length!==t.length)return!1;for(var r=e.length,i=d(e),o=d(t),s=h(e),a=h(t),l=0;l<2*r;l++){var c=o.slice(),p=a.slice();if(l>=r&&(c.reverse(),p.reverse(),p=y(p,1)),c=y(c,l),p=y(p,l),j(i,c)){var u=S.zip(s,p),f=S.map(u,function(e){return e[0]/e[1]}),g=S.all(f,function(e){return H(f[0],e)}),m=S.all(u,function(e){return N.equal(e[0],e[1],n)});if(g&&m)return!0}}return!1}function g(e,t){return e<t||H(e,t)}function m(e,t,n){return 180*Math.acos((e*e+t*t-n*n)/(2*e*t))/Math.PI}function v(e){var t=e[0],n=e[1],r=e[2],i=e[3];t<0&&(t*=-1,n*=-1,r*=-1);var o=2*Math.PI;for(n<0&&(n*=-1,r*=-1,r+=o/2);r>0;)r-=o;for(;r<0;)r+=o;return[t,n,r,i]}function y(e,t){return t="undefined"==typeof t?1:t%e.length,e.slice(t).concat(e.slice(0,t))}function b(e){return e.replace(/(?:^|-)(.)/g,function(e,t){return t.toUpperCase()})}function E(e,t){if(H(e[0],t[0]))return"x = "+e[0].toFixed(3);var n=(t[1]-e[1])/(t[0]-e[0]),r=e[1]-n*e[0];return"y = "+n.toFixed(3)+"x + "+r.toFixed(3)}function T(e,t){var n=e[0][0],r=e[0][1],i=e[1][0],o=e[1][1],s=t[0][0],a=t[0][1],l=t[1][0],c=t[1][1],p=(n-i)*(a-c)-(r-o)*(s-l);if(Math.abs(p)<1e-9)return"Lines are parallel";var u=((n*o-r*i)*(s-l)-(n-i)*(s*c-a*l))/p,h=((n*o-r*i)*(a-c)-(r-o)*(s*c-a*l))/p;return"Intersection: ("+u.toFixed(3)+", "+h.toFixed(3)+")"}function w(e,t){return Math.floor((e[1]-e[0])/t)}var x=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},C=n(17),S=n(18),P=n(194),k=n(71),_=n(188),M=n(178),O=n(6),N=n(199).number,I=n(199).point,A=n(190),R=n(166),D=n(84),L=(D.interactiveSizes,n(161)),F=L.containerSizeClassPropType,B=L.getInteractiveBoxFromSizeClass,z=n(189),q=O.DeprecationMixin,U="https://ka-perseus-graphie.s3.amazonaws.com/b1452c0d79fd0f7ff4c3af9488474a0a0decb361.png",W={url:null},H=O.eq,j=O.deepEq,V="unlimited",G={showGraph:function(e){return{markings:e.showGraph?"graph":"none"}}},K=C.createClass({displayName:"InteractiveGraph",propTypes:{containerSizeClass:F.isRequired,trackInteraction:C.PropTypes.func.isRequired},getInitialState:function(){return{shouldShowInstructions:this._getShouldShowInstructions()}},getDefaultProps:function(){return{labels:["x","y"],range:[[-10,10],[-10,10]],step:[1,1],backgroundImage:W,markings:"graph",showTooltips:!1,showProtractor:!1,showRuler:!1,rulerLabel:"",rulerTicks:10,graph:{type:"linear"}}},mixins:[q],deprecatedProps:G,_getShouldShowInstructions:function(e){return e=e||this.props,this.isClickToAddPoints(e)&&(null==e.graph.coords||0===e.graph.coords.length)},componentDidUpdate:function(e,t){var n=e.graph.type,r=this.props.graph.type;n===r&&e.graph.allowReflexAngles===this.props.graph.allowReflexAngles&&e.graph.angleOffsetDeg===this.props.graph.angleOffsetDeg&&e.graph.numPoints===this.props.graph.numPoints&&e.graph.numSides===this.props.graph.numSides&&e.graph.numSegments===this.props.graph.numSegments&&e.graph.showAngles===this.props.graph.showAngles&&e.graph.showSides===this.props.graph.showSides&&e.graph.snapTo===this.props.graph.snapTo&&e.graph.snapDegrees===this.props.graph.snapDegrees||(this["remove"+b(n)+"Controls"](),this["add"+b(r)+"Controls"]()),this.shouldResetGraphie&&this.resetGraphie()},render:function(){var e,t,n=this;if(this.props.flexibleType)if(e=C.createElement("select",{value:this.props.graph.type,onChange:function(e){var t=e.target.value;n.onChange({graph:{type:t}})}},C.createElement("option",{value:"linear"},"Linear function"),C.createElement("option",{value:"quadratic"},"Quadratic function"),C.createElement("option",{value:"sinusoid"},"Sinusoid function"),C.createElement("option",{value:"circle"},"Circle"),C.createElement("option",{value:"point"},"Point(s)"),C.createElement("option",{value:"linear-system"},"Linear System"),C.createElement("option",{value:"polygon"},"Polygon"),C.createElement("option",{value:"segment"},"Line Segment(s)"),C.createElement("option",{value:"ray"},"Ray"),C.createElement("option",{value:"angle"},"Angle")),"point"===this.props.graph.type)t=C.createElement("select",{key:"point-select",value:this.props.graph.numPoints||1,onChange:function(e){var t=+e.target.value||e.target.value;n.onChange({graph:{type:"point",numPoints:t,coords:null}})}},S.map(S.range(1,7),function(e){return C.createElement("option",{value:e},e," point",e>1&&"s")}),C.createElement("option",{value:V},"unlimited"));else if("polygon"===this.props.graph.type)t=C.createElement("div",null,C.createElement("div",null,C.createElement("select",{key:"polygon-select",value:this.props.graph.numSides||3,onChange:function(e){var t=+e.target.value||e.target.value,r=S.extend({},n.props.graph,{numSides:t,coords:null,snapTo:"grid"});n.onChange({graph:r})}},S.map(S.range(3,13),function(e){return C.createElement("option",{value:e},e," sides")}),C.createElement("option",{value:V},"unlimited sides"))),C.createElement("div",null,C.createElement("label",null," Snap to"," ",C.createElement("select",{key:"polygon-snap",value:this.props.graph.snapTo,onChange:function(e){var t=S.extend({},n.props.graph,{snapTo:e.target.value,coords:null});n.onChange({graph:t})}},C.createElement("option",{value:"grid"},"grid"),this.props.graph.numSides!==V&&[C.createElement("option",{value:"angles"}," ","interior angles"," "),C.createElement("option",{value:"sides"}," ","side measures"," ")])),C.createElement(k,null,C.createElement("p",null,"These options affect the movement of the vertex points. The grid option will guide the points to the nearest half step along the grid."),C.createElement("p",null,"The interior angle and side measure options guide the points to the nearest whole angle or side")," measure respectively."," ")),C.createElement("div",null,C.createElement("label",null,"Show angle measures:"," ",C.createElement("input",{type:"checkbox",checked:this.props.graph.showAngles,onChange:this.toggleShowAngles})),C.createElement(k,null,C.createElement("p",null,"Displays the interior angle measures."))),C.createElement("div",null,C.createElement("label",null,"Show side measures:"," ",C.createElement("input",{type:"checkbox",checked:this.props.graph.showSides,onChange:this.toggleShowSides})),C.createElement(k,null,C.createElement("p",null,"Displays the side lengths."))));else if("segment"===this.props.graph.type)t=C.createElement("select",{key:"segment-select",value:this.props.graph.numSegments||1,onChange:function(e){var t=+e.target.value;n.onChange({graph:{type:"segment",numSegments:t,coords:null}})}},S.map(S.range(1,7),function(e){return C.createElement("option",{value:e},e," segment",e>1&&"s")}));else if("angle"===this.props.graph.type){var r=s(this.props.graph.allowReflexAngles,!0);t=C.createElement("div",null,C.createElement("div",null,C.createElement("label",null,"Show angle measure:"," ",C.createElement("input",{type:"checkbox",checked:this.props.graph.showAngles,onChange:this.toggleShowAngles}))),C.createElement("div",null,C.createElement("label",null,"Allow reflex angles:"," ",C.createElement("input",{type:"checkbox",checked:r,onChange:function(e){n.onChange({graph:S.extend({},n.props.graph,{allowReflexAngles:!r,coords:null})})}})),C.createElement(k,null,C.createElement("p",null,"Reflex angles are angles with a measure greater than 180 degrees."),C.createElement("p",null,"By default, these should remain enabled."))),C.createElement("div",null,C.createElement("label",null,"Snap to increments of"," ",C.createElement(M,{key:"degree-snap",placeholder:1,value:this.props.graph.snapDegrees,onChange:function(e){n.onChange({graph:S.extend({},n.props.graph,{snapDegrees:Math.abs(e),coords:null})})}})," ","degrees"," ")),C.createElement("div",null,C.createElement("label",null," ","With an offset of"," ",C.createElement(M,{key:"angle-offset",placeholder:0,value:this.props.graph.angleOffsetDeg,onChange:function(e){n.onChange({graph:S.extend({},n.props.graph,{angleOffsetDeg:e,coords:null})})}})," ","degrees"," ")))}var i,o=B(this.props.containerSizeClass);this.isClickToAddPoints()&&this.state.shouldShowInstructions?"point"===this.props.graph.type?i=i18n._("Click to add points"):"polygon"===this.props.graph.type&&(i=i18n._("Click to add vertices")):i=void 0;var a=this.isClickToAddPoints()?this.handleAddPointsMouseDown:null,l=this.props.gridStep||O.getGridStep(this.props.range,this.props.step,o[0]),c=this.props.snapStep||O.snapStepFromGridStep(l),p=this.props.apiOptions.isMobile;return C.createElement("div",{className:"perseus-widget perseus-widget-interactive-graph",style:{width:o[0],height:this.props.flexibleType?"auto":o[1]}},C.createElement(P,{instructions:i,ref:"graph",box:o,labels:this.props.labels,range:this.props.range,step:p?O.constrainedTickStepsFromTickSteps(this.props.step,this.props.range):this.props.step,gridStep:l,snapStep:c,markings:this.props.markings,backgroundImage:this.props.backgroundImage,showProtractor:this.props.showProtractor,showRuler:this.props.showRuler,rulerLabel:this.props.rulerLabel,rulerTicks:this.props.rulerTicks,onMouseDown:a,onGraphieUpdated:this.setGraphie,setDrawingAreaAvailable:this.props.apiOptions.setDrawingAreaAvailable,isMobile:p}),e,t)},componentDidMount:function(){this.setGraphie(this.refs.graph.graphie())},setGraphie:function(e){this.graphie=e,this.setupGraphie()},handleAddPointsMouseDown:function(e){if(!this.isClickToAddPoints())throw new Error("handleAddPointsClick should not be registeredwhen isClickToAddPoints() is false");if(!this.isCoordInTrash(e)){var t;if("point"===this.props.graph.type){if(t=this.createPointForPointsType(e,this.points.length),!t.constrain())return void t.remove();this.points.push(t);var n=this.points.length-1;this.points[n].grab(e),this.updateCoordsFromPoints()}else if("polygon"===this.props.graph.type){if(this.polygon.closed())return;t=this.createPointForPolygonType(e,this.points.length),this.points.push(t);var n=this.points.length-1;this.points[n].grab(e),this.updatePolygon()}this.setState({shouldShowInstructions:!1})}},resetGraphie:function(){this.shouldResetGraphie=!1,this.parabola=null,this.sinusoid=null,this.refs.graph.reset()},setupGraphie:function(){this.setTrashCanVisibility(0),this.isClickToAddPoints()&&this.setTrashCanVisibility(.5),this.props.apiOptions.isMobile&&(this.horizHairline=new z(this.graphie,[0,0],[0,0],{normalStyle:{strokeWidth:1}}),this.horizHairline.attr({stroke:A.INTERACTIVE}),this.horizHairline.hide(),this.vertHairline=new z(this.graphie,[0,0],[0,0],{normalStyle:{strokeWidth:1}}),this.vertHairline.attr({stroke:A.INTERACTIVE}),this.vertHairline.hide());var e=this.props.graph.type;this["add"+b(e)+"Controls"]()},showHairlines:function(e){this.props.apiOptions.isMobile&&"none"!==this.props.markings&&(this.horizHairline.moveTo([this.props.range[0][0],e[1]],[this.props.range[0][1],e[1]]),this.horizHairline.show(),this.vertHairline.moveTo([e[0],this.props.range[1][0]],[e[0],this.props.range[1][1]]),this.vertHairline.show())},hideHairlines:function(){this.props.apiOptions.isMobile&&(this.horizHairline.hide(),this.vertHairline.hide())},setTrashCanVisibility:function(e){var t=this.graphie;N.equal(e,0)?this.trashCan&&(this.trashCan.remove(),this.trashCan=null):this.props.apiOptions.isMobile||(this.trashCan||(this.trashCan=t.raphael.image(U,t.xpixels-40,t.ypixels-40,40,40)),this.trashCan.attr({opacity:e}))},componentWillReceiveProps:function(e){this.isClickToAddPoints()!==this.isClickToAddPoints(e)&&(this.shouldResetGraphie=!0,this.setState({shouldShowInstructions:this._getShouldShowInstructions(e)})),this.props.containerSizeClass!==e.containerSizeClass&&(this.shouldResetGraphie=!0)},isClickToAddPoints:function(e){return e=e||this.props,"point"===e.graph.type&&e.graph.numPoints===V||"polygon"===e.graph.type&&e.graph.numSides===V},_lineStroke:function(){return this.props.isMobile?{"stroke-width":3}:{}},addLine:function(e){var t=this,n=this,r=n.graphie,i=K.getLineCoords(n.props.graph,n.props),o=n.points=S.map(i,function(e){return _.addMaybeMobileMovablePoint(t,{coord:e,constraints:[_.MovablePoint.constraints.bound(),_.MovablePoint.constraints.snap()],onMove:function(){var e=S.extend({},n.props.graph,{coords:S.invoke(o,"coord")});n.onChange({graph:e})}})}),s={points:o,static:!0,normalStyle:x({stroke:this.props.apiOptions.isMobile?A.BLUE_C:A.INTERACTIVE},this._lineStroke())};"line"===e?s.extendLine=!0:"ray"===e&&(s.extendRay=!0);n.line=_.addMovableLine(r,s);o[0].listen("constraints","isLine",function(e){return!I.equal(e,o[1].coord())}),o[1].listen("constraints","isLine",function(e){return!I.equal(e,o[0].coord())})},removeLine:function(){S.invoke(this.points,"remove"),this.line.remove()},addLinearControls:function(){this.addLine("line")},removeLinearControls:function(){this.removeLine()},addQuadraticControls:function(){var e=this,t=(this.graphie,this.props.graph.coords);t||(t=K.defaultQuadraticCoords(this.props));var n,r,i,o=function(){var t=S.extend({},e.props.graph,{coords:[n.coord(),r.coord(),i.coord()]});e.onChange({graph:t}),e.updateQuadratic()};n=this.pointA=_.addMaybeMobileMovablePoint(this,{coord:t[0],constraints:[_.MovablePoint.constraints.bound(),_.MovablePoint.constraints.snap(),function(e){return!n||e[0]!==r.coord()[0]&&e[0]!==i.coord()[0]}],onMove:o}),r=this.pointB=_.addMaybeMobileMovablePoint(this,{coord:t[1],constraints:[_.MovablePoint.constraints.bound(),_.MovablePoint.constraints.snap(),function(e){return!r||e[0]!==n.coord()[0]&&e[0]!==i.coord()[0]}],onMove:o}),i=this.pointC=_.addMaybeMobileMovablePoint(this,{coord:t[2],constraints:[_.MovablePoint.constraints.bound(),_.MovablePoint.constraints.snap(),function(e){return!i||e[0]!==n.coord()[0]&&e[0]!==r.coord()[0]}],onMove:o}),this.updateQuadratic()},updateQuadratic:function(){var e=K.getCurrentQuadraticCoefficients(this.props);if(e){var t=e[0],n=e[1],r=e[2];if(this.parabola){var i=this.graphie.svgParabolaPath(t,n,r);this.parabola.attr({path:i})}else this.parabola=this.graphie.parabola(t,n,r),this.parabola.attr(x({stroke:this.props.apiOptions.isMobile?A.BLUE_C:A.DYNAMIC},this._lineStroke())),this.parabola.toBack()}},removeQuadraticControls:function(){this.pointA.remove(),this.pointB.remove(),this.pointC.remove(),this.parabola&&(this.parabola.remove(),this.parabola=null)},addSinusoidControls:function(){var e=this,t=(this.graphie,this.props.graph.coords);t||(t=K.defaultSinusoidCoords(this.props));var n,r,i=function(){var t=S.extend({},e.props.graph,{coords:[n.coord(),r.coord()]});e.onChange({graph:t}),e.updateSinusoid()};n=this.pointA=_.addMaybeMobileMovablePoint(this,{coord:t[0],constraints:[_.MovablePoint.constraints.bound(),_.MovablePoint.constraints.snap(),function(e){return!n||e[0]!==r.coord()[0]}],onMove:i}),r=this.pointB=_.addMaybeMobileMovablePoint(this,{coord:t[1],constraints:[_.MovablePoint.constraints.bound(),_.MovablePoint.constraints.snap(),function(e){return!n||e[0]!==n.coord()[0]}],onMove:i}),this.updateSinusoid()},updateSinusoid:function(){var e=K.getCurrentSinusoidCoefficients(this.props);if(e){var t=e[0],n=e[1],r=e[2],i=e[3];if(this.sinusoid){var o=this.graphie.svgSinusoidPath(t,n,r,i);this.sinusoid.attr({path:o})}else this.sinusoid=this.graphie.sinusoid(t,n,r,i),this.sinusoid.attr(x({stroke:this.props.apiOptions.isMobile?A.BLUE_C:A.DYNAMIC},this._lineStroke())),this.sinusoid.toBack()}},removeSinusoidControls:function(){this.pointA.remove(),this.pointB.remove(),this.sinusoid&&(this.sinusoid.remove(),this.sinusoid=null)},addCircleControls:function(){var e=this,t=this.graphie,n=S.min(t.snap),r=this.circle=t.addCircleGraph({center:this.props.graph.center||[0,0],radius:this.props.graph.radius||S.min(this.props.step),snapX:t.snap[0],snapY:t.snap[1],minRadius:2*n,snapRadius:n});$(r).on("move",function(){var t=S.extend({},e.props.graph,{center:r.center,radius:r.radius});e.onChange({graph:t})})},removeCircleControls:function(){this.circle.remove()},addLinearSystemControls:function(){var e=this,t=this.graphie,n=K.getLinearSystemCoords(this.props.graph,this.props),r=[A.INTERACTIVE,A.GREEN],i=this.points=S.map(n,function(t,n){var i=S.map(t,function(t,o){return _.addMaybeMobileMovablePoint(e,{coord:t,constraints:[_.MovablePoint.constraints.bound(),_.MovablePoint.constraints.snap(),function(e){if(i)return!I.equal(e,i[1-o].coord())}],onMove:function(){var t=S.extend({},e.props.graph,{coords:S.map(e.points,function(e){return S.invoke(e,"coord")})});e.onChange({graph:t})},normalStyle:{fill:r[n]},highlightStyle:{fill:r[n]}})});return i});this.lines=S.map(i,function(e,n){return _.addMovableLine(t,{points:e,static:!0,extendLine:!0,normalStyle:{stroke:r[n]}})})},removeLinearSystemControls:function(){S.invoke(this.lines,"remove"),S.map(this.points,function(e){return S.invoke(e,"remove")})},isCoordInTrash:function(e){if(this.props.apiOptions.isMobile)return!1;var t=this.graphie,n=t.scalePoint(e);return n[0]>=t.xpixels-40&&n[1]>=t.ypixels-40},createPointForPointsType:function(e,t){var n=this,r=(n.graphie,function(){n.points=S.filter(n.points,function(e){return e!==i}),n.updateCoordsFromPoints(),setTimeout(i.remove.bind(i),0)}),i=_.addMaybeMobileMovablePoint(this,x({coord:e,constraints:[_.MovablePoint.constraints.bound(),_.MovablePoint.constraints.snap(),function(e){return S.all(n.points,function(t){return i===t||!I.equal(e,t.coord())})}],onMoveStart:function(){n.isClickToAddPoints()&&n.setTrashCanVisibility(1)},onMove:n.updateCoordsFromPoints,onMoveEnd:function(e){n.isClickToAddPoints()&&(n.isCoordInTrash(e)&&r(),n.setTrashCanVisibility(.5))}},this.props.apiOptions.isMobile&&n.isClickToAddPoints()?{onRemove:r}:{}));return i},removePoint:function(e){var t=null;return this.points=S.filter(this.points,function(n,r){return n!==e||(t=r,!1)}),t},createPointForPolygonType:function(e,t){var n=this,s=(this.graphie,!S.contains(["angles","sides"],this.props.graph.snapTo)),a=function(e){return(t+e+n.points.length)%n.points.length},u=function(){var e=n.removePoint(v);n.polygon.closed()&&(n.points=y(n.points,e),n.polygon.update({closed:!1})),n.updatePolygon(),n.clearCoords(),setTimeout(v.remove.bind(v),0)},h=function(e){if(n.isClickToAddPoints()){if(n.isCoordInTrash(e))u();else if(n.points.length>1&&(v===n.points[0]&&I.equal(e,S.last(n.points).coord())||v===S.last(n.points)&&I.equal(e,n.points[0].coord()))){var t=n.points.pop();n.points.length>2?(n.polygon.update({closed:!0}),n.updateCoordsFromPoints()):(n.polygon.update({closed:!1}),n.clearCoords()),n.updatePolygon(),setTimeout(t.remove.bind(t),0)}else{var r=S.any(n.points,function(t){return t!==v&&I.equal(t.coord(),e)});r?(n.removePoint(v),n.points.length<3?(n.polygon.update({closed:!1}),n.clearCoords()):n.polygon.closed()&&n.updateCoordsFromPoints(),n.updatePolygon(),setTimeout(v.remove.bind(v),0)):v!==n.points[0]&&v!==S.last(n.points)||v.hasMoved()||v.state.isInitialMove||n.polygon.closed()||!(n.points.length>2)||(n.polygon.update({closed:!0}),n.updatePolygon(),n.updateCoordsFromPoints())}n.setTrashCanVisibility(.5)}v.state.isInitialMove=!1},f=function(e){if(null==n.points||0===n.points.length)return!0;var s=S.invoke(n.points,"coord");if(s[t]=e,!n.isClickToAddPoints()){if(i(s[a(-2)],s[a(-1)],s[t])||i(s[a(-1)],s[t],s[a(1)])||i(s[t],s[a(1)],s[a(2)]))return!1;var u=S.zip(s,y(s));if(n.points.length>3)for(var h=-1;h<=0;h++)for(var f=u[a(h)],v=S.without(u,f,u[a(h-1)],u[a(h+1)]),b=0;b<v.length;b++){var E=v[b];if(l(f,E))return!1}}if("angles"===n.props.graph.snapTo&&n.points.length>2){var T=S.map(d(s),function(e){return 180*e/Math.PI});S.each([-1,1],function(e){T[a(e)]=Math.round(T[a(e)])});var w=function(e,t,n){var r=R.findAngle(s[a(e)],s[a(n)],s[a(t)]);return(r+360)%360},x=[T[a(-1)]-w(-2,-1,1),T[a(1)]-w(-1,1,2)];if(x[2]=180-(x[0]+x[1]),S.any(x,function(e){return g(e,1)}))return!1;var C=p(c(s[a(-1)],s[a(1)])),P=1===o(r(s[a(-1)],s[a(1)],s[t])),k=Math.sin(x[1]*Math.PI/180)/Math.sin(x[2]*Math.PI/180)*C,_=R.findAngle(s[a(1)],s[a(-1)]),M=n.graphie.polar(k,_+(P?1:-1)*x[0]);return n.graphie.addPoints(s[a(-1)],M)}if("sides"===n.props.graph.snapTo&&n.points.length>1){var O=S.map([[s[a(-1)],s[t]],[s[t],s[a(1)]],[s[a(-1)],s[a(1)]]],function(e){return p(c.apply(null,e))});if(S.each([0,1],function(e){O[e]=Math.round(O[e])}),g(O[1]+O[2],O[0])||g(O[0]+O[2],O[1])||g(O[0]+O[1],O[2]))return!1;var N=m(O[0],O[2],O[1]),_=R.findAngle(s[a(1)],s[a(-1)]),P=1===o(r(s[a(-1)],s[a(1)],s[t])),M=n.graphie.polar(O[0],_+(P?1:-1)*N);return n.graphie.addPoints(s[a(-1)],M)}return!0},v=_.addMaybeMobileMovablePoint(this,x({coord:e,constraints:[_.MovablePoint.constraints.bound(),s?_.MovablePoint.constraints.snap():null,f],onMoveStart:function(){n.isClickToAddPoints()&&n.setTrashCanVisibility(1)},onMove:function(){n.polygon.closed()&&n.updateCoordsFromPoints()},onMoveEnd:h},this.props.apiOptions.isMobile&&this.isClickToAddPoints()?{onRemove:u}:{}));return v.state.isInitialMove=!0,v},updateCoordsFromPoints:function(){var e=S.extend({},this.props.graph,{coords:S.map(this.points,function(e){return S.result(e,"coord")})});this.onChange({graph:e})},clearCoords:function(){var e=S.extend({},this.props.graph,{coords:null});this.onChange({graph:e})},onChange:function(e){this.props.onChange(e),this.props.trackInteraction()},addPointControls:function(){var e=K.getPointCoords(this.props.graph,this.props);this.points=[],this.points=S.map(e,this.createPointForPointsType,this)},removePointControls:function(){S.invoke(this.points,"remove")},addSegmentControls:function(){var e=this,t=this,n=this.graphie,r=K.getSegmentCoords(this.props.graph,this.props),i=function(t){return _.addMaybeMobileMovablePoint(e,t)};this.points=[],this.lines=S.map(r,function(e,r){var o=function(){var e=S.extend({},t.props.graph,{coords:S.invoke(t.lines,"coords")});t.onChange({graph:e})},s=S.map(e,function(e,t){return i({coord:e,constraints:[_.MovablePoint.constraints.bound(),_.MovablePoint.constraints.snap(),function(e){if(s)return!I.equal(e,s[1-t].coord())}],onMove:o})});t.points=t.points.concat(s);var a=_.addMovableLine(n,{points:s,static:!1,constraints:[_.MovableLine.constraints.bound(),_.MovableLine.constraints.snap()],onMove:[_.MovableLine.onMove.updatePoints,o],normalStyle:x({stroke:this.props.apiOptions.isMobile?A.BLUE_C:A.INTERACTIVE},this._lineStroke()),highlightStyle:x({stroke:this.props.apiOptions.isMobile?A.BLUE_C:A.INTERACTING},this._lineStroke())});return S.invoke(s,"toFront"),a},this)},removeSegmentControls:function(){S.invoke(this.points,"remove"),S.invoke(this.lines,"remove")},addRayControls:function(){this.addLine("ray")},removeRayControls:function(){this.removeLine()},addPolygonControls:function(){this.polygon=null;var e=K.getPolygonCoords(this.props.graph,this.props);this.points=[],this.points=S.map(e,this.createPointForPolygonType,this),this.updatePolygon()},updatePolygon:function(){var e;e=this.polygon?this.polygon.closed():this.points.length>=3;var t=this.graphie,n=this.points.length,r=!S.contains(["angles","sides"],this.props.graph.snapTo),i=S.times(n,function(t){return this.props.graph.showAngles&&(e||0!==t&&t!==n-1)?"angles"===this.props.graph.snapTo?"$deg0":"$deg1":""},this),o=S.times(n,function(t){return e||0!==t&&t!==n-1},this),s=S.times(n,function(t){return this.props.graph.showAngles&&(e||0!==t&&t!==n-1)?1:0},this),a=S.times(n,function(t){return!this.props.graph.showSides||!e&&t===n-1?"":"sides"===this.props.graph.snapTo?"$len0":"$len1"},this);if(null==this.polygon){var l=this;l.polygon=_.addMovablePolygon(t,{constraints:[_.MovablePolygon.constraints.bound(),r?_.MovablePolygon.constraints.snap():null],closed:e,points:l.points,angleLabels:i,showRightAngleMarkers:o,numArcs:s,sideLabels:a,onMove:[_.MovablePolygon.onMove.updatePoints,function(){this.closed()&&l.updateCoordsFromPoints()}],normalStyle:x({stroke:this.props.apiOptions.isMobile?A.BLUE_C:A.INTERACTIVE},this._lineStroke())})}else this.polygon.update({closed:e,points:this.points,angleLabels:i,showRightAngleMarkers:o,numArcs:s,sideLabels:a})},removePolygonControls:function(){S.invoke(this.points,"remove"),this.polygon.remove()},addAngleControls:function(){var e=this,t=this.graphie,n=K.getAngleCoords(this.props.graph,this.props);this.points=S.map(n,function(e,n){return t.addMovablePoint(S.extend({coord:e,normalStyle:{stroke:A.INTERACTIVE,fill:A.INTERACTIVE}},1===n?{snapX:t.snap[0],snapY:t.snap[1]}:{}))}),this.angle=t.addMovableAngle({points:this.points,snapDegrees:this.props.graph.snapDegrees||1,snapOffsetDeg:this.props.graph.angleOffsetDeg||0,angleLabel:this.props.graph.showAngles?"$deg0":"",pushOut:2,allowReflex:s(this.props.graph.allowReflexAngles,!0)}),$(this.angle).on("move",function(){var t=S.extend({},e.props.graph,{coords:e.angle.getClockwiseCoords()});e.onChange({graph:t})})},removeAngleControls:function(){S.invoke(this.points,"remove"),this.angle.remove()},toggleShowAngles:function(){var e=S.extend({},this.props.graph,{showAngles:!this.props.graph.showAngles});this.onChange({graph:e})},toggleShowSides:function(){var e=S.extend({},this.props.graph,{showSides:!this.props.graph.showSides});this.onChange({graph:e})},getUserInput:function(){return this.props.graph},simpleValidate:function(e){return K.validate(this.getUserInput(),e,this)},focus:$.noop});S.extend(K,{getQuadraticCoefficients:function(e){var t=e[0],n=e[1],r=e[2],i=(t[0]-n[0])*(t[0]-r[0])*(n[0]-r[0]);if(0!==i){var o=(r[0]*(n[1]-t[1])+n[0]*(t[1]-r[1])+t[0]*(r[1]-n[1]))/i,s=(r[0]*r[0]*(t[1]-n[1])+n[0]*n[0]*(r[1]-t[1])+t[0]*t[0]*(n[1]-r[1]))/i,a=(n[0]*r[0]*(n[0]-r[0])*t[1]+r[0]*t[0]*(r[0]-t[0])*n[1]+t[0]*n[0]*(t[0]-n[0])*r[1])/i;return[o,s,a]}},getSinusoidCoefficients:function(e){var t=e[0],n=e[1],r=n[1]-t[1],i=Math.PI/(2*(n[0]-t[0])),o=t[0]*i,s=t[1];return[r,i,o,s]},getLineCoords:function(e,t){return e.coords||K.pointsFromNormalized(t,[[.25,.75],[.75,.75]])},getPointCoords:function(e,t){var n=e.numPoints||1,r=e.coords;if(r)return r;switch(n){case 1:r=[e.coord||[0,0]];break;case 2:r=[[-5,0],[5,0]];break;case 3:r=[[-5,0],[0,0],[5,0]];break;case 4:r=[[-6,0],[-2,0],[2,0],[6,0]];break;case 5:r=[[-6,0],[-3,0],[0,0],[3,0],[6,0]];break;case 6:r=[[-5,0],[-3,0],[-1,0],[1,0],[3,0],[5,0]];break;case V:r=[]}var i=[[-10,10],[-10,10]];r=K.normalizeCoords(r,i);var r=K.pointsFromNormalized(t,r);return r},getLinearSystemCoords:function(e,t){return e.coords||S.map([[[.25,.75],[.75,.75]],[[.25,.25],[.75,.25]]],function(e){return K.pointsFromNormalized(t,e);
})},getPolygonCoords:function(e,t){var n=e.coords;if(n)return n;var r=e.numSides||3;if(r===V)n=[];else{var i=2*Math.PI/r,o=(1/r-.5)*Math.PI,s="sides"===e.snapTo?Math.sqrt(3)/3*7:4;n=S.times(r,function(e){return[s*Math.cos(e*i+o),s*Math.sin(e*i+o)]})}var a=[[-10,10],[-10,10]];n=K.normalizeCoords(n,a);var l=!S.contains(["angles","sides"],e.snapTo);return n=K.pointsFromNormalized(t,n,!l)},getSegmentCoords:function(e,t){var n=e.coords;if(n)return n;var r=e.numSegments||1,i={1:[5],2:[5,-5],3:[5,0,-5],4:[6,2,-2,-6],5:[6,3,0,-3,-6],6:[5,3,1,-1,-3,-5]}[r],o=[[-10,10],[-10,10]];return S.map(i,function(e){var n=[[-5,e],[5,e]];return n=K.normalizeCoords(n,o),n=K.pointsFromNormalized(t,n)})},getAngleCoords:function(e,t){var n=e.coords;if(n)return n;for(var r=e.snapDegrees||1,i=r;i<20;)i+=r;i=i*Math.PI/180;var o=(e.angleOffsetDeg||0)*Math.PI/180;n=K.pointsFromNormalized(t,[[.85,.5],[.5,.5]]);var s=p(c.apply(null,n));return n[0]=[n[1][0]+s*Math.cos(o),n[1][1]+s*Math.sin(o)],n[2]=[n[1][0]+s*Math.cos(i+o),n[1][1]+s*Math.sin(i+o)],n},normalizeCoords:function(e,t){return S.map(e,function(e){return S.map(e,function(e,n){var r=t[n][1]-t[n][0];return(e+t[n][1])/r})})},getEquationString:function(e){var t=e.graph.type,n="get"+b(t)+"EquationString";return K[n](e)},pointsFromNormalized:function(e,t,n){return S.map(t,function(t){return S.map(t,function(t,r){var i=e.range[r];if(n)return i[0]+(i[1]-i[0])*t;var o=e.step[r],s=w(i,o),a=Math.round(t*s);return i[0]+o*a})})},getLinearEquationString:function(e){var t=K.getLineCoords(e.graph,e);if(H(t[0][0],t[1][0]))return"x = "+t[0][0].toFixed(3);var n=(t[1][1]-t[0][1])/(t[1][0]-t[0][0]),r=t[0][1]-n*t[0][0];return H(n,0)?"y = "+r.toFixed(3):"y = "+n.toFixed(3)+"x + "+r.toFixed(3)},getCurrentQuadraticCoefficients:function(e){var t=e.graph.coords||K.defaultQuadraticCoords(e);return K.getQuadraticCoefficients(t)},defaultQuadraticCoords:function(e){var t=[[.25,.75],[.5,.25],[.75,.75]];return K.pointsFromNormalized(e,t)},getQuadraticEquationString:function(e){var t=K.getCurrentQuadraticCoefficients(e);return"y = "+t[0].toFixed(3)+"x^2 + "+t[1].toFixed(3)+"x + "+t[2].toFixed(3)},getCurrentSinusoidCoefficients:function(e){var t=e.graph.coords||K.defaultSinusoidCoords(e);return K.getSinusoidCoefficients(t)},defaultSinusoidCoords:function(e){var t=[[.5,.5],[.65,.6]];return K.pointsFromNormalized(e,t)},getSinusoidEquationString:function(e){var t=K.getCurrentSinusoidCoefficients(e);return"y = "+t[0].toFixed(3)+"sin("+t[1].toFixed(3)+"x - "+t[2].toFixed(3)+") + "+t[3].toFixed(3)},getCircleEquationString:function(e){var t=e.graph,n=t.center||[0,0],r=t.radius||2;return"center ("+n[0]+", "+n[1]+"), radius "+r},getLinearSystemEquationString:function(e){var t=K.getLinearSystemCoords(e.graph,e);return"\n"+E(t[0][0],t[0][1])+"\n"+E(t[1][0],t[1][1])+"\n"+T(t[0],t[1])},getPointEquationString:function(e){var t=K.getPointCoords(e.graph,e);return t.map(function(e){return"("+e[0]+", "+e[1]+")"}).join(", ")},getSegmentEquationString:function(e){var t=K.getSegmentCoords(e.graph,e);return S.map(t,function(e){return"["+S.map(e,function(e){return"("+e.join(", ")+")"}).join(" ")+"]"}).join(" ")},getRayEquationString:function(e){var t=K.getLineCoords(e.graph,e),n=t[0],r=t[1],i=K.getLinearEquationString(e);return i+=n[0]>r[0]?" (for x <= "+n[0].toFixed(3)+")":n[0]<r[0]?" (for x >= "+n[0].toFixed(3)+")":n[1]>r[1]?" (for y <= "+n[1].toFixed(3)+")":" (for y >= "+n[1].toFixed(3)+")"},getPolygonEquationString:function(e){var t=K.getPolygonCoords(e.graph,e);return S.map(t,function(e){return"("+e.join(", ")+")"}).join(" ")},getAngleEquationString:function(e){var t=K.getAngleCoords(e.graph,e),n=R.findAngle(t[2],t[0],t[1]);return n.toFixed(0)+"° angle at ("+t[1].join(", ")+")"},validate:function(e,t,n){var r=!!(e.coords||e.center&&e.radius);if(e.type===t.correct.type&&r)if("linear"===e.type){var o=e.coords,s=t.correct.coords;if(i(s[0],s[1],o[0])&&i(s[0],s[1],o[1]))return{type:"points",earned:1,total:1,message:null}}else if("linear-system"===e.type){var o=e.coords,s=t.correct.coords;if(i(s[0][0],s[0][1],o[0][0])&&i(s[0][0],s[0][1],o[0][1])&&i(s[1][0],s[1][1],o[1][0])&&i(s[1][0],s[1][1],o[1][1])||i(s[0][0],s[0][1],o[1][0])&&i(s[0][0],s[0][1],o[1][1])&&i(s[1][0],s[1][1],o[0][0])&&i(s[1][0],s[1][1],o[0][1]))return{type:"points",earned:1,total:1,message:null}}else if("quadratic"===e.type){var a=this.getQuadraticCoefficients(e.coords),l=this.getQuadraticCoefficients(t.correct.coords);if(j(a,l))return{type:"points",earned:1,total:1,message:null}}else if("sinusoid"===e.type){var a=this.getSinusoidCoefficients(e.coords),l=this.getSinusoidCoefficients(t.correct.coords),c=v(a),p=v(l);if(j(c,p))return{type:"points",earned:1,total:1,message:null}}else if("circle"===e.type){if(j(e.center,t.correct.center)&&H(e.radius,t.correct.radius))return{type:"points",earned:1,total:1,message:null}}else if("point"===e.type){var o=e.coords,s=K.getPointCoords(t.correct,n);if(o=o.slice(),s=s.slice(),o.sort(),s.sort(),j(o,s))return{type:"points",earned:1,total:1,message:null}}else if("polygon"===e.type){var u,o=e.coords.slice(),s=t.correct.coords.slice();if("similar"===t.correct.match?u=f(o,s,Number.POSITIVE_INFINITY):"congruent"===t.correct.match?u=f(o,s,N.DEFAULT_TOLERANCE):"approx"===t.correct.match?u=f(o,s,.1):(o.sort(),s.sort(),u=j(o,s)),u)return{type:"points",earned:1,total:1,message:null}}else if("segment"===e.type){var o=e.coords.slice(),s=t.correct.coords.slice();if(o=S.invoke(o,"sort").sort(),s=S.invoke(s,"sort").sort(),j(o,s))return{type:"points",earned:1,total:1,message:null}}else if("ray"===e.type){var o=e.coords,s=t.correct.coords;if(j(o[0],s[0])&&i(s[0],s[1],o[1]))return{type:"points",earned:1,total:1,message:null}}else if("angle"===e.type){var u,o=e.coords,s=t.correct.coords;if("congruent"===t.correct.match){var h=S.map([o,s],function(e){var t=R.findAngle(e[2],e[0],e[1]);return(t+360)%360});u=H.apply(null,h)}else u=j(o[1],s[1])&&i(s[1],s[0],o[0])&&i(s[1],s[2],o[2]);if(u)return{type:"points",earned:1,total:1,message:null}}return!r||S.isEqual(e,t.graph)?{type:"invalid",message:null}:{type:"points",earned:0,total:1,message:null}}}),e.exports={name:"interactive-graph",displayName:"Interactive graph",widget:K}},function(e,t,n){"use strict";var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},i=n(17),o=n(18),s=n(6),a=s.DeprecationMixin,l=n(191),c=n(71),p=n(114).widget,u=n(84),h=u.interactiveSizes,d=n(161),f=d.containerSizeClass,g=d.getInteractiveBoxFromSizeClass,m={url:null},v={showGraph:function(e){return{markings:e.showGraph?"graph":"none"}}},y=i.createClass({displayName:"InteractiveGraphEditor",className:"perseus-widget-interactive-graph",getDefaultProps:function(){return{labels:["x","y"],range:[[-10,10],[-10,10]],step:[1,1],valid:!0,backgroundImage:m,markings:"graph",showProtractor:!1,showRuler:!1,showTooltips:!1,rulerLabel:"",rulerTicks:10,correct:{type:"linear",coords:null}}},mixins:[a],deprecatedProps:v,render:function(){var e,t,n=this,a=this.props.gridStep||s.getGridStep(this.props.range,this.props.step,h.defaultBoxSize),u=this.props.snapStep||s.snapStepFromGridStep(a),d=f.SMALL;if(this.props.valid===!0){var m={ref:"graph",box:this.props.box,range:this.props.range,labels:this.props.labels,step:this.props.step,gridStep:a,snapStep:u,graph:this.props.correct,backgroundImage:this.props.backgroundImage,markings:this.props.markings,showProtractor:this.props.showProtractor,showRuler:this.props.showRuler,rulerLabel:this.props.rulerLabel,rulerTicks:this.props.rulerTicks,trackInteraction:function(){},flexibleType:!0,onChange:function(e){var t=n.props.correct;t=t.type===e.graph.type?o.extend({},t,e.graph):e.graph,n.props.onChange({correct:t})}};e=i.createElement(p,r({},m,{containerSizeClass:d,apiOptions:r({},this.props.apiOptions,{isMobile:!1})})),t=p.getEquationString(m)}else e=i.createElement("div",{className:"perseus-error"},this.props.valid);return i.createElement("div",{className:"perseus-widget-interactive-graph"},i.createElement("div",null,"Correct answer"," ",i.createElement(c,null,i.createElement("p",null,"Graph the correct answer in the graph below and ensure the equation or point coordinates displayed represent the correct answer."))," ",": ",t),i.createElement(l,{box:g(d),range:this.props.range,labels:this.props.labels,step:this.props.step,gridStep:a,snapStep:u,valid:this.props.valid,backgroundImage:this.props.backgroundImage,markings:this.props.markings,showProtractor:this.props.showProtractor,showRuler:this.props.showRuler,showTooltips:this.props.showTooltips,rulerLabel:this.props.rulerLabel,rulerTicks:this.props.rulerTicks,onChange:this.props.onChange}),"polygon"===this.props.correct.type&&i.createElement("div",{className:"type-settings"},i.createElement("label",null," ","Student answer must"," ",i.createElement("select",{value:this.props.correct.match,onChange:this.changeMatchType},i.createElement("option",{value:"exact"},"match exactly"),i.createElement("option",{value:"congruent"},"be congruent"),i.createElement("option",{value:"approx"},"be approximately congruent"),i.createElement("option",{value:"similar"},"be similar"))),i.createElement(c,null,i.createElement("ul",null,i.createElement("li",null,i.createElement("p",null,i.createElement("b",null,"Match Exactly:")," Match exactly in size, orientation, and location on the grid even if it is not shown in the background.")),i.createElement("li",null,i.createElement("p",null,i.createElement("b",null,"Be Congruent:")," Be congruent in size and shape, but can be located anywhere on the grid.")),i.createElement("li",null,i.createElement("p",null,i.createElement("b",null,"Be Approximately Congruent:")," Be exactly similar, and congruent in size and shape to within 0.1 units, but can be located anywhere on the grid. ",i.createElement("em",null,"Use this with snapping to angle measure."))),i.createElement("li",null,i.createElement("p",null,i.createElement("b",null,"Be Similar:")," Be similar with matching interior angles, and side measures that are matching or a multiple of the correct side measures. The figure can be located anywhere on the grid."))))),"angle"===this.props.correct.type&&i.createElement("div",{className:"type-settings"},i.createElement("div",null,i.createElement("label",null," ","Student answer must"," ",i.createElement("select",{value:this.props.correct.match,onChange:this.changeMatchType},i.createElement("option",{value:"exact"},"match exactly"),i.createElement("option",{value:"congruent"},"be congruent"))),i.createElement(c,null,i.createElement("p",null,"Congruency requires only that the angle measures are the same. An exact match implies congruency, but also requires that the angles have the same orientation and that the vertices are in the same position.")))),e)},changeMatchType:function(e){var t=o.extend({},this.props.correct,{match:e.target.value});this.props.onChange({correct:t})},serialize:function(){var e=o.pick(this.props,"step","backgroundImage","markings","labels","showProtractor","showRuler","showTooltips","rulerLabel","rulerTicks","range","gridStep","snapStep"),t=this.refs.graph;if(t){var n=t&&t.getUserInput();o.extend(e,{graph:{type:n.type},correct:n}),o.each(["allowReflexAngles","angleOffsetDeg","numPoints","numSides","numSegments","showAngles","showSides","snapTo","snapDegrees"],function(t){o.has(n,t)&&(e.graph[t]=n[t])})}return e}});e.exports=y},function(e,t,n){"use strict";var r=n(17),i=n(18),o=n(175),s=n(187),a=5,l={display:"table",tableLayout:"fixed"},c={display:"table-row"},p={display:"table-cell",padding:a},u={borderRadius:10,cursor:"pointer"},h={padding:a,display:"inline-block"},d={float:"right",paddingRight:a},f=50,g={plus:function(){return[[!1,!0,!1],[!0,!0,!0],[!1,!0,!1]]},x:function(){return[[!0,!1,!0],[!1,!0,!1],[!0,!1,!0]]},"plus/x":function(e){return e%2?g.x():g.plus()}},m=r.createClass({displayName:"Tile",propTypes:{value:r.PropTypes.bool.isRequired,size:r.PropTypes.number.isRequired},render:function(){var e=this.props.value?"#55dd55":"#115511",t=i.extend({},u,{width:this.props.size,height:this.props.size,backgroundColor:e});return r.createElement("div",{style:t,onClick:this._flip})},_flip:function(){this.props.onChange(!this.props.value)}}),v=r.createClass({displayName:"TileGrid",propTypes:{cells:r.PropTypes.arrayOf(r.PropTypes.arrayOf(r.PropTypes.bool)).isRequired,size:r.PropTypes.number.isRequired},render:function(){var e=this;return r.createElement("div",{style:l,className:"no-select"},i.map(this.props.cells,function(t,n){return r.createElement("div",{key:n,style:c},i.map(t,function(t,o){return r.createElement("div",{key:o,style:p},r.createElement(m,{value:t,size:e.props.size,onChange:i.partial(e.props.onChange,n,o)}))}))}))}}),y=function(e,t){return i.map(e,function(e,n){return i.map(e,function(e,r){return t(n,r)?!e:e})})},b=function(e,t,n,r){return y(e,function(e,i){var o=e-t,s=i-n;return Math.abs(o)<=1&&Math.abs(s)<=1&&r[o+1][s+1]})},E=r.createClass({displayName:"LightsPuzzle",mixins:[o,s],propTypes:{cells:r.PropTypes.arrayOf(r.PropTypes.arrayOf(r.PropTypes.bool)),startCells:r.PropTypes.arrayOf(r.PropTypes.arrayOf(r.PropTypes.bool)),flipPattern:r.PropTypes.string.isRequired,moveCount:r.PropTypes.number.isRequired},getDefaultProps:function(){return{cells:[[!1,!1,!1],[!1,!1,!1],[!1,!1,!1]],startCells:[[!1,!1,!1],[!1,!1,!1],[!1,!1,!1]],flipPattern:"plus",moveCount:0}},render:function(){var e=this._width(),t=f,n=e*(t+2*a);return r.createElement("div",null,r.createElement(v,{cells:this.props.cells,size:t,onChange:this._flipTile}),r.createElement("div",{style:{width:n}},r.createElement("div",{style:h},"Moves: ",this.props.moveCount),r.createElement("div",{style:d},r.createElement("input",{type:"button",value:"Reset",onClick:this._reset,className:"simple-button"}))),r.createElement("div",{className:"clearfix"}))},_width:function(){return 0!==this.props.cells.length?this.props.cells[0].length:0},componentDidMount:function(){this._initNextPatterns()},componentDidUpdate:function(e){e.flipPattern!==this.props.flipPattern&&this._initNextPatterns()},_initNextPatterns:function(){this._currPattern=g[this.props.flipPattern](0),this._nextPattern=g[this.props.flipPattern](1),this._patternIndex=2},_shiftPatterns:function(){this._currPattern=this._nextPattern,this._nextPattern=g[this.props.flipPattern](this._patternIndex),this._patternIndex++},_flipTile:function(e,t){var n=b(this.props.cells,e,t,this._currPattern);this._shiftPatterns(),this.change({cells:n,moveCount:this.props.moveCount+1})},_reset:function(){this.change({cells:this.props.startCells,moveCount:0})},simpleValidate:function(e){return T(e,this.getUserInput())}}),T=function(e,t){var n=i.all(t.cells,function(t,n){return i.all(t,function(t,r){return t===e.startCells[n][r]})});if(n)return{type:"invalid",message:i18n._("Click on the tiles to change the lights.")};var r=i.all(t.cells,function(e){return i.all(e,function(e){return e})});return r?{type:"points",earned:1,total:1,message:null}:e.gradeIncompleteAsWrong?{type:"points",earned:0,total:1,message:null}:{type:"invalid",message:i18n._("You must turn on all of the lights to continue.")}},w=function(e){return{cells:e.startCells,startCells:e.startCells,flipPattern:e.flipPattern}};e.exports={name:"lights-puzzle",displayName:"Lights Puzzle",hidden:!0,widget:E,transform:w}},function(e,t,n){"use strict";var r=n(17),i=n(18),o=n(175),s=n(176),a=n(178),l=n(39),c=n(71),p=8,u=5,h={display:"table",tableLayout:"fixed"},d={display:"table-row"},f={display:"table-cell",padding:u},g={borderRadius:10,cursor:"pointer"},m={plus:function(){return[[!1,!0,!1],[!0,!0,!0],[!1,!0,!1]]},x:function(){return[[!0,!1,!0],[!1,!0,!1],[!0,!1,!0]]},"plus/x":function(e){return e%2?m.x():m.plus()}},v=function(e,t,n){return e=Math.floor(e),e=Math.max(e,t),e=Math.min(e,n)},y=function(e,t){return i.map(e,function(e,n){return i.map(e,function(e,r){return t(n,r)?!e:e})})},b=r.createClass({displayName:"Tile",propTypes:{value:r.PropTypes.bool.isRequired,size:r.PropTypes.number.isRequired},render:function(){var e=this.props.value?"#55dd55":"#115511",t=i.extend({},g,{width:this.props.size,height:this.props.size,backgroundColor:e});return r.createElement("div",{style:t,onClick:this._flip})},_flip:function(){this.props.onChange(!this.props.value)}}),E=r.createClass({displayName:"TileGrid",propTypes:{cells:r.PropTypes.arrayOf(r.PropTypes.arrayOf(r.PropTypes.bool)).isRequired,size:r.PropTypes.number.isRequired},render:function(){var e=this;return r.createElement("div",{style:h,className:"no-select"},i.map(this.props.cells,function(t,n){return r.createElement("div",{key:n,style:d},i.map(t,function(t,o){return r.createElement("div",{key:o,style:f},r.createElement(b,{value:t,size:e.props.size,onChange:i.partial(e.props.onChange,n,o)}))}))}))}}),T=r.createClass({displayName:"LightsPuzzleEditor",mixins:[o,s],propTypes:{startCells:r.PropTypes.arrayOf(r.PropTypes.arrayOf(r.PropTypes.bool)),flipPattern:r.PropTypes.string.isRequired,gradeIncompleteAsWrong:r.PropTypes.bool.isRequired},getDefaultProps:function(){return{startCells:[[!1,!1,!1],[!1,!1,!1],[!1,!1,!1]],flipPattern:"plus",gradeIncompleteAsWrong:!1}},_height:function(){return this.props.startCells.length},_width:function(){return 0!==this.props.startCells.length?this.props.startCells[0].length:0},render:function(){return r.createElement("div",null,r.createElement("div",null,"Width:",r.createElement(a,{value:this._width(),placeholder:5,onChange:this._changeWidth}),", ","Height:",r.createElement(a,{value:this._height(),placeholder:5,onChange:this._changeHeight})),r.createElement("div",null,"Flip pattern:",r.createElement("select",{value:this.props.flipPattern,onChange:this._handlePatternChange},i.map(i.keys(m),function(e,t){return r.createElement("option",{value:e,key:t},e)}))),r.createElement("div",null,"Grade incomplete puzzles as wrong:"," ",r.createElement(l,{gradeIncompleteAsWrong:this.props.gradeIncompleteAsWrong,onChange:this.props.onChange}),r.createElement(c,null,"By default, incomplete puzzles are graded as empty.")),r.createElement("div",null,"Starting configuration:"),r.createElement("div",{style:{overflowX:"auto"}},r.createElement(E,{cells:this.props.startCells,size:50,onChange:this._switchTile})))},_handlePatternChange:function(e){this.change("flipPattern",e.target.value)},_changeWidth:function(e){e=v(e,1,p),this._truncateCells(e,this._height())},_changeHeight:function(e){e=v(e,1,p),this._truncateCells(this._width(),e)},_truncateCells:function(e,t){var n=this,r=i.times(t,function(t){return i.times(e,function(e){return!(!n.props.startCells[t]||!n.props.startCells[t][e])})});this.change({startCells:r})},_switchTile:function(e,t){var n=y(this.props.startCells,function(n,r){return n===e&&r===t});this.change({startCells:n})}});e.exports=T},function(e,t,n){"use strict";var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},i=n(51),o=n(17),s=n(19),a=n(18),l=n(178),c=n(29),p=n(179),u=n(195),h=n(171),d=n(5).Options,f=n(46),g=n(162).propTypes.keypadElementPropType,m=n(165).assert,v=n(6).stringArrayOfSize,y={INPUT_MARGIN:4,INPUT_HEIGHT:38,INPUT_WIDTH:82},b={INPUT_MARGIN:3,INPUT_HEIGHT:30,INPUT_WIDTH:40},E={INPUT_MARGIN:4,INPUT_HEIGHT:36,INPUT_WIDTH:64},T=function(e,t){return[""+e,""+t]},w=function(){return T(0,0)},x=function(e){return m(a.isArray(e)&&2===e.length),+e[0]},C=function(e){return m(a.isArray(e)&&2===e.length),+e[1]},S=function(e){var t=x(e),n=C(e);return"answer"+t+","+n},P=function(e){var t=[1,1];return a(e).each(function(e,n){var r=0;a(e).each(function(e,t){null!=e&&e.toString().length&&(r=t+1)}),t[1]=Math.max(t[1],r),r>0&&(t[0]=Math.max(t[0],n+1))}),t},k=o.createClass({displayName:"Matrix",propTypes:{answers:o.PropTypes.arrayOf(o.PropTypes.arrayOf(o.PropTypes.oneOfType([o.PropTypes.string,o.PropTypes.number]))),apiOptions:d.propTypes,cursorPosition:o.PropTypes.arrayOf(o.PropTypes.number),keypadElement:g,matrixBoardSize:o.PropTypes.arrayOf(o.PropTypes.number).isRequired,prefix:o.PropTypes.string,suffix:o.PropTypes.string,trackInteraction:o.PropTypes.func.isRequired},getDefaultProps:function(){return{matrixBoardSize:[3,3],answers:[[]],prefix:"",suffix:"",cursorPosition:[0,0],apiOptions:d.defaults}},getInitialState:function(){return{enterTheMatrix:0}},componentDidMount:function(){this.cursorPosition=[0,0]},render:function(){var e=this,t=void 0;t=this.props.apiOptions.customKeypad?E:this.props.apiOptions.staticRender?y:b;var n=t,s=n.INPUT_MARGIN,d=n.INPUT_HEIGHT,f=n.INPUT_WIDTH,g=P(this.props.answers),m=this.props.matrixBoardSize[0],v=this.props.matrixBoardSize[1],w=this.props.cursorPosition[0],x=this.props.cursorPosition[1],C=Math.max(w,g[0]-1),k=Math.max(x,g[1]-1),_=(C+1)*(d+2*s),M=(k+1)*(f+2*s),O=i({"perseus-matrix":!0,"static-mode":this.props.static,"the-matrix":this.state.enterTheMatrix>=5});return o.createElement("div",{className:O},this.props.prefix&&o.createElement("div",{className:"matrix-prefix"},o.createElement(c,{content:this.props.prefix})),o.createElement("div",{className:"matrix-input"},o.createElement("div",{className:"matrix-bracket bracket-left",style:{height:_}}),o.createElement("div",{className:"matrix-bracket bracket-right",style:{height:_,left:M}}),a(m).times(function(t){var n=e.props.answers[t];return o.createElement("div",{className:"matrix-row",key:t},a(v).times(function(i){var a=t>C||i>k,c={className:a?"outside":"inside",ref:S(T(t,i)),value:n?n[i]:null,style:{height:d,width:f,margin:s},disabled:e.props.apiOptions.readOnly,onFocus:function(){e.cursorPosition=[t,i],e.props.onChange({cursorPosition:[t,i]},function(){return!1}),e._handleFocus(t,i)},onBlur:function(){t===e.cursorPosition[0]&&i===e.cursorPosition[1]&&e.props.onChange({cursorPosition:[0,0]},function(){return!1}),e._handleBlur(t,i)},onKeyDown:function(n){e.handleKeyDown(t,i,n)},onChange:function(n,r){e.onValueChange(t,i,n,r)}},g=void 0;if(e.props.apiOptions.customKeypad){var m={margin:s,minWidth:f,minHeight:d,boxSizing:"border-box",backgroundColor:a?"#f3f3f3":"#fff"};g=o.createElement(h,r({},c,{style:m,scrollable:!0,keypadElement:e.props.keypadElement}))}else g=e.props.apiOptions.staticRender?o.createElement(u,c):e.props.numericInput?o.createElement(l,c):o.createElement(p,c);return o.createElement("span",{key:i,className:"matrix-input-field"},g)}))})),this.props.suffix&&o.createElement("div",{className:"matrix-suffix"},o.createElement(c,{content:this.props.suffix})))},getInputPaths:function(){var e=[],t=this.props.matrixBoardSize[0],n=this.props.matrixBoardSize[1];return a(t).times(function(t){a(n).times(function(n){var r=T(t,n);e.push(r)})}),e},getGrammarTypeForPath:function(e){return"number"},_handleFocus:function(e,t){this.props.onFocus(T(e,t))},_handleBlur:function(e,t){this.props.onBlur(T(e,t))},focus:function(){return this.focusInputPath(w()),!0},focusInputPath:function(e){var t=S(e);this.refs[t].focus()},blurInputPath:function(e){0===e.length&&(e=w());var t=S(e);this.refs[t].blur()},getDOMNodeForPath:function(e){var t=S(e);return s.findDOMNode(this.refs[t])},setInputValue:function(e,t,n){var r=x(e),i=C(e);this.onValueChange(r,i,t,n)},handleKeyDown:function(e,t,n){var r=this.props.matrixBoardSize[0],i=this.props.matrixBoardSize[1],o=null,s=this.refs[S(T(e,t))],a=s.getStringValue(),l=s.getSelectionStart(),c=s.getSelectionEnd(),p=null;if("ArrowUp"===n.key&&e>0?p=T(e-1,t):"ArrowDown"===n.key&&e+1<r?p=T(e+1,t):"ArrowLeft"===n.key&&t>0?0===l&&0===c&&(p=T(e,t-1)):"ArrowRight"===n.key&&t+1<i?l===a.length&&(p=T(e,t+1)):"Enter"===n.key?o=this.state.enterTheMatrix+1:"Escape"===n.key&&(o=0),p){n.preventDefault();var u=this.refs[S(p)],h=u.getStringValue(),d=2*h.length;u.focus(),"ArrowRight"===n.key?u.setSelectionRange(0,0):u.setSelectionRange(d,d)}null!=o&&this.setState({enterTheMatrix:o})},onValueChange:function(e,t,n,r){var i=a.map(this.props.answers,a.clone);i[e]||(i[e]=[]),i[e][t]=n,this.props.onChange({answers:i},r),this.props.trackInteraction()},getUserInput:function(){return{answers:this.props.answers}},simpleValidate:function(e){return k.validate(this.getUserInput(),e)}});a.extend(k,{validate:function(e,t){var n=t.answers,r=e.answers,i=P(n),o=P(r),s=i[0]!==o[0]||i[1]!==o[1],l=f.number.createValidatorFunctional,c=null,p=!1,u=!1;return a(o[0]).times(function(e){a(o[1]).times(function(t){null!=r[e][t]&&0!==r[e][t].toString().length||(p=!0);var i=l(n[e][t],{simplify:!0}),o=i(r[e][t]);o.message&&(c=o.message),o.correct||(u=!0)})}),p?{type:"invalid",message:i18n._("Make sure you fill in all cells in the matrix.")}:s?{type:"points",earned:0,total:1,message:null}:{type:"points",earned:u?0:1,total:1,message:c}}});var _=function(e){var t=a(e.matrixBoardSize[0]).times(function(){return v(e.matrixBoardSize[1])});return e=a.pick(e,"matrixBoardSize","prefix","suffix"),a.extend(e,{answers:t})},M=function(e){var t=a.pick(e,"matrixBoardSize","prefix","suffix");return t.answers=a.map(e.answers,function(e){return a.map(e,function(e){return null!=e?String(e):""})}),t};e.exports={name:"matrix",displayName:"Matrix",widget:k,transform:_,staticTransform:M}},function(e,t,n){"use strict";var r=n(17),i=n(18),o=n(175),s=n(176),a=n(11),l=n(193),c=n(118).widget,p=6,u=function(e){var t=[1,1];return i(e).each(function(e,n){var r=0;i(e).each(function(e,t){null!=e&&e.toString().length&&(r=t+1)}),t[1]=Math.max(t[1],r),r>0&&(t[0]=Math.max(t[0],n+1))}),t},h=r.createClass({displayName:"MatrixEditor",mixins:[s,o],propTypes:{matrixBoardSize:r.PropTypes.arrayOf(r.PropTypes.number).isRequired,answers:r.PropTypes.arrayOf(r.PropTypes.arrayOf(r.PropTypes.number)),prefix:r.PropTypes.string,suffix:r.PropTypes.string,cursorPosition:r.PropTypes.arrayOf(r.PropTypes.number)},getDefaultProps:function(){return{matrixBoardSize:[3,3],answers:[[]],prefix:"",suffix:"",cursorPosition:[0,0]}},render:function(){var e=this,t=i.extend({numericInput:!0,onBlur:function(){},onFocus:function(){},trackInteraction:function(){}},this.props);return r.createElement("div",{className:"perseus-matrix-editor"},r.createElement("div",{className:"perseus-widget-row"}," ","Max matrix size:"," ",r.createElement(l,{value:this.props.matrixBoardSize,onChange:this.onMatrixBoardSizeChange,format:this.props.labelStyle,useArrowKeys:!0})),r.createElement("div",{className:"perseus-widget-row"},r.createElement(c,t)),r.createElement("div",{className:"perseus-widget-row"}," ","Matrix prefix:"," ",r.createElement(a,{ref:"prefix",apiOptions:this.props.apiOptions,content:this.props.prefix,widgetEnabled:!1,onChange:function(t){e.change({prefix:t.content})}})),r.createElement("div",{className:"perseus-widget-row"}," ","Matrix suffix:"," ",r.createElement(a,{ref:"suffix",apiOptions:this.props.apiOptions,content:this.props.suffix,widgetEnabled:!1,onChange:function(t){e.change({suffix:t.content})}})))},onMatrixBoardSizeChange:function(e){var t=this,n=u(this.props.answers);if(null!==e[0]&&null!==e[1]){e=[Math.round(Math.min(Math.max(e[0],1),p)),Math.round(Math.min(Math.max(e[1],1),p))];var r=i(Math.min(e[0],n[0])).times(function(r){return i(Math.min(e[1],n[1])).times(function(e){return t.props.answers[r][e]})});this.props.onChange({matrixBoardSize:e,answers:r})}}});e.exports=h},function(e,t,n){"use strict";var r=n(17),i=n(18),o=n(29),s=n(196),a=n(5).Options,l=n(6).shuffle,c=n(6).seededRNG,p=r.createClass({displayName:"Matcher",propTypes:{apiOptions:a.propTypes,labels:r.PropTypes.array,left:r.PropTypes.array,onChange:r.PropTypes.func,orderMatters:r.PropTypes.bool,padding:r.PropTypes.bool,problemNum:r.PropTypes.number,right:r.PropTypes.array,trackInteraction:r.PropTypes.func.isRequired},getDefaultProps:function(){return{left:[],right:[],labels:["",""],orderMatters:!1,padding:!0,problemNum:0,onChange:function(){}}},getInitialState:function(){return{leftHeight:0,rightHeight:0}},render:function(){var e,t=c(this.props.problemNum);e=this.props.orderMatters?l(this.props.left,t,!0):this.props.left;var n=l(this.props.right,t,!0),a=i.any(this.props.labels),p={height:i.max([this.state.leftHeight,this.state.rightHeight])},u=this.props.apiOptions.isMobile?8:5;return r.createElement("div",{className:"perseus-widget-matcher"},a&&r.createElement("div",{className:"perseus-clearfix"},r.createElement("div",{className:"column"},r.createElement("div",{className:"column-label"},r.createElement(o,{content:this.props.labels[0]||"..."}))),r.createElement("div",{className:"column"},r.createElement("div",{className:"column-label"},r.createElement(o,{content:this.props.labels[1]||"..."})))),r.createElement("div",{className:"perseus-clearfix"},r.createElement("div",{className:"column"},r.createElement(s,{options:e,layout:"vertical",padding:this.props.padding,disabled:!this.props.orderMatters,constraints:p,onMeasure:this.onMeasureLeft,onChange:this.changeAndTrack,margin:u,ref:"left"})),r.createElement("div",{className:"column"},r.createElement(s,{options:n,layout:"vertical",padding:this.props.padding,constraints:p,onMeasure:this.onMeasureRight,onChange:this.changeAndTrack,margin:u,ref:"right"}))))},changeAndTrack:function(e){this.props.onChange(e),this.props.trackInteraction()},onMeasureLeft:function(e){var t=i.max(e.heights);this.setState({leftHeight:t})},onMeasureRight:function(e){var t=i.max(e.heights);this.setState({rightHeight:t})},getUserInput:function(){return{left:this.refs.left.getOptions(),right:this.refs.right.getOptions()}},simpleValidate:function(e){return p.validate(this.getUserInput(),e)}});i.extend(p,{validate:function(e,t){var n=i.isEqual(e.left,t.left)&&i.isEqual(e.right,t.right);return{type:"points",earned:n?1:0,total:1,message:null}}}),e.exports={name:"matcher",displayName:"Two column matcher",widget:p}},function(e,t,n){"use strict";var r=n(17),i=n(18),o=n(71),s=n(39),a=n(64),l=r.createClass({displayName:"MatcherEditor",propTypes:{left:r.PropTypes.array,right:r.PropTypes.array,labels:r.PropTypes.array,orderMatters:r.PropTypes.bool,padding:r.PropTypes.bool},getDefaultProps:function(){return{left:["$x$","$y$","$z$"],right:["$1$","$2$","$3$"],labels:["test","label"],orderMatters:!1,padding:!0}},render:function(){var e=this;return r.createElement("div",{className:"perseus-matcher-editor"},r.createElement("div",null," ","Correct answer:"," ",r.createElement(o,null,r.createElement("p",null,"Enter the correct answers here. The preview on the right will show the cards in a randomized order, which is how the student will see them."))),r.createElement("div",{className:"perseus-clearfix"},r.createElement(a,{options:this.props.left,onChange:function(t,n){e.props.onChange({left:t},n)},layout:"vertical"}),r.createElement(a,{options:this.props.right,onChange:function(t,n){e.props.onChange({right:t},n)},layout:"vertical"})),r.createElement("span",null," ","Labels:"," ",r.createElement(o,null,r.createElement("p",null,"These are entirely optional."))),r.createElement("div",null,r.createElement("input",{type:"text",defaultValue:this.props.labels[0],onChange:this.onLabelChange.bind(this,0)}),r.createElement("input",{type:"text",defaultValue:this.props.labels[1],onChange:this.onLabelChange.bind(this,1)})),r.createElement("div",null,r.createElement(s,{label:"Order of the matched pairs matters:",orderMatters:this.props.orderMatters,onChange:this.props.onChange}),r.createElement(o,null,r.createElement("p",null,"With this option enabled, only the order provided above will be treated as correct. This is useful when ordering is significant, such as in the context of a proof."),r.createElement("p",null,"If disabled, pairwise matching is sufficient. To make this clear, the left column becomes fixed in the provided order and only the cards in the right column can be moved."))),r.createElement("div",null,r.createElement(s,{label:"Padding:",padding:this.props.padding,onChange:this.props.onChange}),r.createElement(o,null,r.createElement("p",null,"Padding is good for text, but not needed for images."))))},onLabelChange:function(e,t){var n=i.clone(this.props.labels);n[e]=t.target.value,this.props.onChange({labels:n})},getSaveWarnings:function(){return this.props.left.length!==this.props.right.length?["The two halves of the matcher have different numbers of cards."]:[];
},serialize:function(){return i.pick(this.props,"left","right","labels","orderMatters","padding")}});e.exports=l},function(e,t,n){"use strict";var r=n(17),i=n(19),o=n(18),s=n(5).Options,a=n(166),l={url:null,top:0,left:0},c=r.createClass({displayName:"Measurer",propTypes:{apiOptions:s.propTypes,box:r.PropTypes.arrayOf(r.PropTypes.number),image:r.PropTypes.shape({url:r.PropTypes.string,top:r.PropTypes.number,left:r.PropTypes.number}),showProtractor:r.PropTypes.bool,protractorX:r.PropTypes.number,protractorY:r.PropTypes.number,showRuler:r.PropTypes.bool,rulerLabel:r.PropTypes.string,rulerTicks:r.PropTypes.number,rulerPixels:r.PropTypes.number,rulerLength:r.PropTypes.number},getDefaultProps:function(){return{box:[480,480],image:{},showProtractor:!0,protractorX:7.5,protractorY:.5,showRuler:!1,rulerLabel:"",rulerTicks:10,rulerPixels:40,rulerLength:10}},getInitialState:function(){return{}},render:function(){var e=o.extend({},l,this.props.image);return r.createElement("div",{className:"perseus-widget perseus-widget-measurer graphie-container above-scratchpad",style:{width:this.props.box[0],height:this.props.box[1]}},e.url&&r.createElement("img",{src:e.url,style:{top:e.top,left:e.left}}),r.createElement("div",{className:"graphie",ref:"graphieDiv"}))},componentDidMount:function(){this.setupGraphie()},componentDidUpdate:function(e){var t=o.any(["box","showProtractor","showRuler","rulerLabel","rulerTicks","rulerPixels","rulerLength"],function(t){return e[t]!==this.props[t]},this);t&&this.setupGraphie()},setupGraphie:function(){var e=i.findDOMNode(this.refs.graphieDiv);$(e).empty();var t=this.graphie=a.createGraphie(e),n=[40,40],r=[[0,this.props.box[0]/n[0]],[0,this.props.box[1]/n[1]]];t.init({range:r,scale:n}),t.addMouseLayer({allowScratchpad:!0,setDrawingAreaAvailable:this.props.apiOptions.setDrawingAreaAvailable}),this.protractor&&this.protractor.remove(),this.props.showProtractor&&(this.protractor=t.protractor([this.props.protractorX,this.props.protractorY])),this.ruler&&this.ruler.remove(),this.props.showRuler&&(this.ruler=t.ruler({center:[(r[0][0]+r[0][1])/2,(r[1][0]+r[1][1])/2],label:this.props.rulerLabel,pixelsPerUnit:this.props.rulerPixels,ticksPerUnit:this.props.rulerTicks,units:this.props.rulerLength}))},getUserInput:function(){return{}},simpleValidate:function(e){return c.validate(this.getUserInput(),e)},focus:$.noop});o.extend(c,{validate:function(e,t){return{type:"points",earned:1,total:1,message:null}}});var p={1:function(e){var t=o(e).chain().omit("imageUrl","imageTop","imageLeft").extend({image:{url:e.imageUrl,top:e.imageTop,left:e.imageLeft}}).value();return t}};e.exports={name:"measurer",displayName:"Measurer",widget:c,version:{major:1,minor:0},propUpgrades:p}},function(e,t,n){"use strict";var r=n(17),i=n(18),o=n(175),s=n(176),a=n(71),l=n(178),c=n(39),p=n(193),u={url:null,top:0,left:0},h=r.createClass({displayName:"MeasurerEditor",mixins:[o,s],className:"perseus-widget-measurer",propTypes:{box:r.PropTypes.arrayOf(r.PropTypes.number),image:r.PropTypes.shape({url:r.PropTypes.string,top:r.PropTypes.number,left:r.PropTypes.number}),showProtractor:r.PropTypes.bool,showRuler:r.PropTypes.bool,rulerLabel:r.PropTypes.string,rulerTicks:r.PropTypes.number,rulerPixels:r.PropTypes.number,rulerLength:r.PropTypes.number},getDefaultProps:function(){return{box:[480,480],image:{},showProtractor:!0,showRuler:!1,rulerLabel:"",rulerTicks:10,rulerPixels:40,rulerLength:10}},render:function(){var e=this,t=i.extend({},u,this.props.image);return r.createElement("div",{className:"perseus-widget-measurer"},r.createElement("div",null,"Image displayed under protractor and/or ruler:"),r.createElement("div",null,"URL:"," ",r.createElement("input",{type:"text",className:"perseus-widget-measurer-url",ref:"image-url",defaultValue:t.url,onChange:this._changeUrl}),r.createElement(a,null,r.createElement("p",null,'Create an image in graphie, or use the "Add image" function to create a background.'))),t.url&&r.createElement("div",{className:"perseus-widget-row"},r.createElement("label",{className:"perseus-widget-left-col"},"Pixels from top:"," ",r.createElement(l,{placeholder:0,onChange:this._changeTop,value:t.top,useArrowKeys:!0})),r.createElement("label",{className:"perseus-widget-right-col"},"Pixels from left:"," ",r.createElement(l,{placeholder:0,onChange:this._changeLeft,value:t.left,useArrowKeys:!0}))),r.createElement("div",null,"Containing area [width, height]:"," ",r.createElement(p,{onChange:this.change("box"),value:this.props.box,useArrowKeys:!0})),r.createElement("div",{className:"perseus-widget-row"},r.createElement("div",{className:"perseus-widget-left-col"},r.createElement(c,{label:"Show ruler",showRuler:this.props.showRuler,onChange:this.props.onChange})),r.createElement("div",{className:"perseus-widget-right-col"},r.createElement(c,{label:"Show protractor",showProtractor:this.props.showProtractor,onChange:this.props.onChange}))),this.props.showRuler&&r.createElement("div",null,r.createElement("div",null,r.createElement("label",null," ","Ruler label:"," ",r.createElement("select",{onChange:function(t){return e.change("rulerLabel",t.target.value)},value:this.props.rulerLabel},r.createElement("option",{value:""},"None"),r.createElement("optgroup",{label:"Metric"},this.renderLabelChoices([["milimeters","mm"],["centimeters","cm"],["meters","m"],["kilometers","km"]])),r.createElement("optgroup",{label:"Imperial"},this.renderLabelChoices([["inches","in"],["feet","ft"],["yards","yd"],["miles","mi"]]))))),r.createElement("div",null,r.createElement("label",null," ","Ruler ticks:"," ",r.createElement("select",{onChange:function(t){return e.change("rulerTicks",+t.target.value)},value:this.props.rulerTicks},i.map([1,2,4,8,10,16],function(e){return r.createElement("option",{key:e,value:e},e)})))),r.createElement("div",null,r.createElement("label",null,"Ruler pixels per unit:"," ",r.createElement(l,{placeholder:40,onChange:this.change("rulerPixels"),value:this.props.rulerPixels,useArrowKeys:!0}))),r.createElement("div",null,r.createElement("label",null,"Ruler length in units:"," ",r.createElement(l,{placeholder:10,onChange:this.change("rulerLength"),value:this.props.rulerLength,useArrowKeys:!0})))))},_changeUrl:function(e){this._changeImage("url",e.target.value)},_changeTop:function(e){this._changeImage("top",e)},_changeLeft:function(e){this._changeImage("left",e)},_changeImage:function(e,t){var n=i.clone(this.props.image);n[e]=t,this.change("image",n)},renderLabelChoices:function(e){return i.map(e,function(e){var t=e[0],n=e[1];return r.createElement("option",{key:n,value:n},t)})}});e.exports=h},function(e,t,n){"use strict";var r=n(17),i=n(210),o=n(211),s=o.layout,a=n(212),l=a.parse,c=a.ParseError,p=30,u=r.createClass({displayName:"Molecule",propTypes:{id:r.PropTypes.string.isRequired,rotationAngle:r.PropTypes.number,smiles:r.PropTypes.string},getInitialState:function(){return{parsedSmiles:null,error:null}},componentWillMount:function(){this.stateFromSmiles(this.props.smiles)},componentDidMount:function(){this.canvasRender()},componentWillReceiveProps:function(e){this.stateFromSmiles(e.smiles)},componentDidUpdate:function(){this.canvasRender()},stateFromSmiles:function(e){try{this.setState({parsedSmiles:l(e),error:null})}catch(e){if(!(e instanceof c))throw e;this.setState({error:e.message})}},setCanvasBounds:function(e,t){var n=Math.max.apply(Math,t.map(function(e){return e.pos?e.pos[0]:-(1/0)})),r=Math.max.apply(Math,t.map(function(e){return e.pos?e.pos[1]:-(1/0)})),i=Math.min.apply(Math,t.map(function(e){return e.pos?e.pos[0]:1/0})),o=Math.min.apply(Math,t.map(function(e){return e.pos?e.pos[1]:1/0})),s=n-i+2*p,a=r-o+2*p;return e.width=s,e.height=a,[p-i,p-o]},canvasRender:function(){if(!this.state.error&&this.state.parsedSmiles){var e=s(this.state.parsedSmiles,this.props.rotationAngle),t=this.refs.canvas,n=this.setCanvasBounds(t,e),r=t.getContext("2d");r.clearRect(0,0,t.width,t.height),r.save(),r.translate(n[0],n[1]),i(r,e),r.restore()}},render:function(){var e=r.createElement("canvas",{className:"molecule-canvas",id:this.props.id+"-molecule",ref:"canvas"},"A molecular structure drawing.  SMILES notation:",this.props.smiles,".");return this.state.error&&(e=r.createElement("div",{className:"error"},this.state.error)),r.createElement("div",{className:"molecule-canvas"},e)}}),h=r.createClass({displayName:"MoleculeWidget",propTypes:{rotationAngle:r.PropTypes.number,smiles:r.PropTypes.string,widgetId:r.PropTypes.string},getDefaultProps:function(){return{rotationAngle:0}},simpleValidate:function(){return{type:"points",earned:0,total:0,message:null}},getUserInput:function(){return[]},validate:function(e,t){return{type:"points",earned:0,total:0,message:null}},render:function(){return r.createElement(u,{id:this.props.widgetId,smiles:this.props.smiles,rotationAngle:this.props.rotationAngle})}});e.exports={name:"molecule-renderer",displayName:"Molecule renderer",hidden:!1,widget:h,molecule:u}},function(e,t,n){"use strict";var r=n(17),i=n(176),o=n(175),s=n(178),a=n(179),l=r.createClass({displayName:"MoleculeWidgetEditor",propTypes:{rotationAngle:r.PropTypes.number,smiles:r.PropTypes.string},mixins:[o,i],updateMolecule:function(e){this.change({smiles:e})},updateRotation:function(e){this.change({rotationAngle:e})},render:function(){return r.createElement("div",null,r.createElement("div",null,r.createElement("label",null,"SMILES: ",r.createElement(a,{onChange:this.updateMolecule,value:this.props.smiles}))),r.createElement("div",null,r.createElement("label",null,"Rotation (deg): ",r.createElement(s,{onChange:this.updateRotation,value:this.props.rotationAngle}))))}});e.exports=l},function(e,t,n){"use strict";function r(e,t){return 1===t?""+e:e+"/"+t}function i(e,t){if(e<0)return"-"+i(-e,t);var n=Math.floor(e/t);return 0===n?r(e,t):e-n*t===0?""+n:n+"\\:"+r(e-n*t,t)}function o(e,t,n){var i=Math.floor(n/t);return r(e*i,n)}var s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},a=n(17),l=n(19),c=n(18),p=n(175),u=n(178),h=n(195),d=n(171),f=n(5).Options,g=n(162).propTypes.keypadElementPropType,m=n(66),v=m.MovablePoint,y=m.Line,b=n(199).number,E=n(88),T=n(190),w=function(e,t,n){return Math.min(Math.max(e,t),n)},x=n(165).assert,C="–",S=30,P={ge:"le",gt:"lt",le:"ge",lt:"gt"},k={ge:"gt",gt:"ge",le:"lt",lt:"le"},_=function(e,t,n,s,a){if(s=s||n,"decimal"===t||"decimal ticks"===t)return e.label([n,-.53],Math.round(100*s)/100,"center");if("improper"===t){var l=E.toFraction(s);return e.label([n,-.53],r(l[0],l[1]),"center")}if("mixed"===t){var c=E.toFraction(s);return e.label([n,-.53],i(c[0],c[1]),"center")}if("non-reduced"===t){var p=E.toFraction(s);return e.label([n,-.53],o(p[0],p[1],a),"center")}},M=m.createSimpleClass(function(e,t){if(!c.isFinite(t.tickStep)||t.tickStep<=0)return[];var n,r=[],i=t.range,o=t.labelRange,s=null==o[0]?i[0]:o[0],a=null==o[1]?i[1]:o[1];if("non-reduced"===t.labelStyle){for(var l=[s,a],p=0;p<=t.numDivisions;p++){var u=i[0]+p*t.tickStep;l.push(u)}var h=function(e){return b.toFraction(e)[1]},d=c.map(l,h);n=c.reduce(d,function(e,t){return E.getLCM(e,t)})}else n=void 0;for(var f=0;f<=t.numDivisions;f++){var g=i[0]+f*t.tickStep;r.push(e.line([g,-.2],[g,.2]));var m=t.labelTicks;(m||"decimal ticks"===t.labelStyle)&&r.push(_(e,t.labelStyle,g,g,n))}return r.push(e.style(t.isMobile?{color:T.BLUE_D}:{},function(){return _(e,t.labelStyle,s,s,n)})),r.push(e.style(t.isMobile?{color:T.BLUE_D}:{},function(){return _(e,t.labelStyle,a,a,n)})),e.style({stroke:t.isMobile?T.BLUE_D:T.DYNAMIC,strokeWidth:3.5},function(){r.push(e.line([s,-.2],[s,.2])),r.push(e.line([a,-.2],[a,.2]))}),r}),O=a.createClass({displayName:"NumberLine",propTypes:{range:a.PropTypes.arrayOf(a.PropTypes.number).isRequired,labelRange:a.PropTypes.arrayOf(a.PropTypes.number).isRequired,labelStyle:a.PropTypes.string.isRequired,labelTicks:a.PropTypes.bool.isRequired,divisionRange:a.PropTypes.arrayOf(a.PropTypes.number).isRequired,numDivisions:a.PropTypes.number.isRequired,snapDivisions:a.PropTypes.number.isRequired,isTickCtrl:a.PropTypes.bool.isRequired,isInequality:a.PropTypes.bool.isRequired,numLinePosition:a.PropTypes.number.isRequired,rel:a.PropTypes.oneOf(["lt","gt","le","ge"]),onFocus:a.PropTypes.func.isRequired,onBlur:a.PropTypes.func.isRequired,onChange:a.PropTypes.func.isRequired,apiOptions:f.propTypes,keypadElement:g,static:a.PropTypes.bool,showTooltips:a.PropTypes.bool,trackInteraction:a.PropTypes.func.isRequired},mixins:[p],getDefaultProps:function(){return{range:[0,10],labelStyle:"decimal",labelRange:[null,null],divisionRange:[1,12],labelTicks:!0,isTickCtrl:!1,isInequality:!1,numLinePosition:0,snapDivisions:2,showTooltips:!1,rel:"ge",apiOptions:f.defaults}},getInitialState:function(){return{numDivisionsEmpty:!1}},isValid:function(){var e=this.props.range,t=this.props.numLinePosition,n=this.props.divisionRange;return t=null==t?e[0]:t,e[0]<e[1]&&b.sign(t-e[0])>=0&&b.sign(t-e[1])<=0&&n[0]<n[1]&&0<this.props.numDivisions&&0<this.props.snapDivisions},onNumDivisionsChange:function(e,t){var n=this,r=this.props.divisionRange.slice(),i=this.props.range[1]-this.props.range[0];if(e=Math.round(e),e=e<0?e*-1:e){var o=c.extend({},this.props,{tickStep:i/e}),s=this.snapNumLinePosition(o,this.props.numLinePosition);this.setState({numDivisionsEmpty:!1},function(){n.props.onChange({divisionRange:r,numDivisions:e,numLinePosition:s},t)})}else this.setState({numDivisionsEmpty:!0},t)},_handleTickCtrlFocus:function(){this.props.onFocus(["tick-ctrl"])},_handleTickCtrlBlur:function(){this.props.onBlur(["tick-ctrl"])},focus:function(){if(this.props.isTickCtrl)return this.refs["tick-ctrl"].focus(),!0},focusInputPath:function(e){1===e.length&&this.refs[e[0]].focus()},blurInputPath:function(e){1===e.length&&this.refs[e[0]].blur()},getInputPaths:function(){return this.props.isTickCtrl?[["tick-ctrl"]]:[]},getDOMNodeForPath:function(e){if(1===e.length)return l.findDOMNode(this.refs[e[0]])},getGrammarTypeForPath:function(e){if(1===e.length&&"tick-ctrl"===e[0])return"number"},setInputValue:function(e,t,n){1===e.length&&"tick-ctrl"===e[0]&&this.onNumDivisionsChange(t,n)},_renderGraphie:function(){var e=this,t=this.props.range,n=t[1]-t[0],r=c.pick(this.props,["range","isTickCtrl"]),i=c.extend({},this.props,{tickStep:n/this.props.numDivisions});return a.createElement(m,{ref:"graphie",box:[460,80],options:r,onMouseDown:function(t){e.refs.graphie.movables.numberLinePoint.grab(t)},setup:this._setupGraphie,setDrawingAreaAvailable:this.props.apiOptions.setDrawingAreaAvailable,isMobile:this.props.apiOptions.isMobile},a.createElement(M,s({},c.pick(i,["range","numDivisions","labelTicks","labelStyle","labelRange","tickStep"]),{isMobile:this.props.apiOptions.isMobile})),this._renderInequality(i),this._renderNumberLinePoint(i))},snapNumLinePosition:function(e,t){var n=e.range[0],r=e.range[1],i=e.tickStep/e.snapDivisions,o=w(t,n,r);return o=n+b.roundTo(o-n,i),x(c.isFinite(o)),o},_renderNumberLinePoint:function(e){var t,n=this,r=c(["lt","gt"]).contains(e.rel);t=r?T._BACKGROUND:e.static?T.DYNAMIC:T.INTERACTIVE;var i={fill:t,stroke:e.static?T.DYNAMIC:T.INTERACTIVE,"stroke-width":r?3:1},o={fill:r?T._BACKGROUND:T.INTERACTING,"stroke-width":r?3:1},s=e.isInequality?{stroke:T.INTERACTIVE,"fill-opacity":r?0:1}:{};return a.createElement(v,{ref:"numberLinePoint",pointSize:6,coord:[e.numLinePosition,0],constraints:[function(e,t){return[e[0],t[1]]},function(t,r){var i=n.snapNumLinePosition(e,t[0]);return[i,t[1]]}],normalStyle:i,highlightStyle:o,onMove:function(e){n.change({numLinePosition:e[0]}),n.props.trackInteraction()},isMobile:this.props.apiOptions.isMobile,mobileStyleOverride:s,showTooltips:this.props.showTooltips,xOnlyTooltip:!0})},handleReverse:function(){var e=P[this.props.rel];this.props.onChange({rel:e})},handleToggleStrict:function(){var e=k[this.props.rel];this.props.onChange({rel:e})},_getInequalityEndpoint:function(e){var t=c(["ge","gt"]).contains(e.rel),n=400,r=e.range,i=(r[1]-r[0])/n,o=S*i,s=r[0]-o,a=r[1]+o,l=t?[a,0]:[s,0];return l},_renderInequality:function(e){if(e.isInequality){var t=this._getInequalityEndpoint(e),n={arrows:"->",stroke:this.props.apiOptions.isMobile?T.INTERACTIVE:T.DYNAMIC,strokeWidth:3.5},r=["ge","gt"].includes(e.rel);return a.createElement(y,{start:[(r?.4:-.4)+e.numLinePosition,0],end:t,style:n})}return null},_setupGraphie:function(e,t){if(this.isValid()){var n=this.props.apiOptions.isMobile?288-2*S:400,r=t.range,i=(r[1]-r[0])/n,o=S*i,s=r[0]-o,a=r[1]+o,l=-1,c=1;e.init({range:[[s,a],[l,c]],scale:[1/i,40],isMobile:this.props.apiOptions.isMobile});var p=(r[0]+r[1])/2;e.line([p,0],[a,0],{arrows:"->"}),e.line([p,0],[s,0],{arrows:"->"})}},getUserInput:function(){return{numLinePosition:this.props.numLinePosition,rel:this.props.isInequality?this.props.rel:"eq",numDivisions:this.props.numDivisions,divisionRange:this.props.divisionRange}},simpleValidate:function(e){return O.validate(this.getUserInput(),e)},render:function(){var e,t=this.props.divisionRange,n=t[0]+C+t[1],r=this.props.numDivisions<t[0]||this.props.numDivisions>t[1],i=a.createElement("div",null,a.createElement("input",{type:"button",className:"simple-button",value:i18n._("Switch direction"),onClick:this.handleReverse}),a.createElement("input",{type:"button",className:"simple-button",value:c(["le","ge"]).contains(this.props.rel)?i18n._("Make circle open"):i18n._("Make circle filled"),onClick:this.handleToggleStrict}));if(this.props.isTickCtrl){var o;o=this.props.apiOptions.customKeypad?d:this.props.apiOptions.staticRender?h:u,e=a.createElement("label",null,i18n._("Number of divisions:")," ",a.createElement(o,{ref:"tick-ctrl",value:this.state.numDivisionsEmpty?null:this.props.numDivisions||t[0],checkValidity:function(e){return e>=t[0]&&e<=t[1]},onChange:this.onNumDivisionsChange,onFocus:this._handleTickCtrlFocus,onBlur:this._handleTickCtrlBlur,useArrowKeys:!0,keypadElement:this.props.keypadElement}))}return a.createElement("div",{className:"perseus-widget perseus-widget-interactive-number-line"},e,this.isValid()?this.props.isTickCtrl&&r?a.createElement("div",{className:"perseus-error"},$_({divRangeString:n},"Please make sure the number of divisions is in the range %(divRangeString)s.")):this._renderGraphie():a.createElement("div",{className:"perseus-error"},"Invalid number line configuration."),!this.props.static&&this.props.isInequality&&i)}});c.extend(O,{validate:function(e,t){var n=t.range,r=e.divisionRange,i=null!=t.initialX?t.initialX:n[0],o=t.isInequality?"ge":"eq",s=t.correctRel||"eq",a=b.equal(e.numLinePosition,t.correctX||0),l=e.numDivisions>r[1]||e.numDivisions<r[0];return e.isTickCrtl&&l?{type:"invalid",message:"Number of divisions is outside the allowed range."}:a&&s===e.rel?{type:"points",earned:1,total:1,message:null}:e.numLinePosition===i&&e.rel===o?{type:"invalid",message:null}:{type:"points",earned:0,total:1,message:null}}});var N=function(e){var t,n=c.pick(e,["range","labelRange","labelStyle","labelTicks","divisionRange","snapDivisions","isTickCtrl","isInequality","showTooltips"]),r=null!=e.initialX?e.initialX:e.range[0],i=e.range[1]-e.range[0];return t=null!=e.numDivisions?e.numDivisions:null!=e.tickStep?i/e.tickStep:void 0,c.extend(n,{numLinePosition:r,numDivisions:t,snapDivisions:n.snapDivisions||void 0}),n},I=function(e){var t,n=c.pick(e,["range","labelRange","labelStyle","labelTicks","divisionRange","snapDivisions","isInequality"]),r=null!=e.correctX?e.correctX:e.range[0],i=e.range[1]-e.range[0];return t=null!=e.numDivisions?e.numDivisions:null!=e.tickStep?i/e.tickStep:void 0,c.extend(n,{numLinePosition:r,numDivisions:t,rel:e.isInequality?e.correctRel:null,snapDivisions:n.snapDivisions||void 0}),n};e.exports={name:"number-line",displayName:"Number line",widget:O,transform:N,staticTransform:I}},function(e,t,n){"use strict";var r=n(17),i=n(18),o=n(176),s=n(54),a=n(71),l=n(178),c=n(39),p=n(193),u=n(199).number,h=function(e,t,n){return Math.min(Math.max(e,t),n)},d="–",f=r.createClass({displayName:"NumberLineEditor",propTypes:{range:r.PropTypes.arrayOf(r.PropTypes.number).isRequired,labelRange:r.PropTypes.arrayOf(r.PropTypes.number).isRequired,labelStyle:r.PropTypes.string.isRequired,labelTicks:r.PropTypes.bool,divisionRange:r.PropTypes.arrayOf(r.PropTypes.number).isRequired,numDivisions:r.PropTypes.number.isRequired,snapDivisions:r.PropTypes.number,tickStep:r.PropTypes.number,correctRel:r.PropTypes.oneOf(["lt","gt","le","ge","eq"]),correctX:r.PropTypes.number,initialX:r.PropTypes.number,isTickCtrl:r.PropTypes.bool,onChange:r.PropTypes.func.isRequired,static:r.PropTypes.bool,showTooltips:r.PropTypes.bool},mixins:[o],getDefaultProps:function(){return{range:[0,10],labelRange:[null,null],labelStyle:"decimal",labelTicks:!0,divisionRange:[1,12],numDivisions:5,snapDivisions:2,tickStep:null,correctRel:"eq",correctX:null,initialX:null,showTooltips:!1}},onRangeChange:function(e){this.props.onChange({range:e})},onLabelRangeChange:function(e,t){var n=this.props.labelRange.slice(),r=n[1-e];null==t||null==r?n[e]=t:n=[Math.min(t,r),Math.max(t,r)],this.props.onChange({labelRange:n})},onDivisionRangeChange:function(e){var t=this.props.numDivisions;t=h(t,e[0],e[1]),this.props.onChange({divisionRange:e,numDivisions:t})},onNumChange:function(e,t){var n={};n[e]=t,this.props.onChange(n)},onNumDivisionsChange:function(e){var t=this.props.divisionRange.slice();i.isFinite(e)||(e=null),e=Math.round(e),e=e<0?e*-1:e,e&&(e=Math.min(t[1],Math.max(t[0],e)),this.props.onChange({tickStep:null,divisionRange:t,numDivisions:e}))},onTickStepChange:function(e){this.props.onChange({numDivisions:null,tickStep:e})},onChangeRelation:function(e){var t=e.target.value;this.props.onChange({correctRel:t,isInequality:"eq"!==t})},onLabelStyleChange:function(e){this.props.onChange({labelStyle:e})},render:function(){var e=this.props.range,t=this.props.labelRange,n=this.props.divisionRange;e[0]=+e[0],e[1]=+e[1];var i=e[1]-e[0],o=this.props.numDivisions,h=this.props.snapDivisions,f=this.props.tickStep,g=this.props.isTickCtrl,m=void 0;m=g?null:f?f/h:i/o/h;var v=[{value:"decimal",content:"0.75",title:"Decimals"},{value:"improper",content:"⁷⁄₄",title:"Improper fractions"},{value:"mixed",content:"1¾",title:"Mixed numbers"},{value:"non-reduced",content:"⁸⁄₄",title:"Non-reduced"}];return r.createElement("div",{className:"perseus-widget-number-line-editor"},r.createElement("div",{className:"perseus-widget-row"},"Correct x"," ",r.createElement("select",{value:this.props.correctRel,onChange:this.onChangeRelation},r.createElement("option",{value:"eq"}," = "),r.createElement("option",{value:"lt"}," < "),r.createElement("option",{value:"gt"}," > "),r.createElement("option",{value:"le"}," ≤ "),r.createElement("option",{value:"ge"}," ≥ "))," ",r.createElement(l,{value:this.props.correctX,format:this.props.labelStyle,onChange:this.onNumChange.bind(this,"correctX"),checkValidity:function(t){return t>=e[0]&&t<=e[1]&&(!m||u.isInteger((t-e[0])/m))},placeholder:"answer",size:"normal",useArrowKeys:!0}),r.createElement(a,null,r.createElement("p",null,"This is the correct answer. The answer is validated (as right or wrong) by using only the end position of the point and the relation (=, <, >, ≤, ≥)."))),r.createElement("div",{className:"perseus-widget-row"},this.props.static?r.createElement("label",null,"Range:"):r.createElement("label",null,"Position:"," ",r.createElement(l,{value:this.props.initialX,format:this.props.labelStyle,onChange:this.onNumChange.bind(this,"initialX"),placeholder:e[0],checkValidity:function(t){return t>=e[0]&&t<=e[1]},useArrowKeys:!0})," ∈ "),r.createElement(p,{value:e,onChange:this.onRangeChange,format:this.props.labelStyle,useArrowKeys:!0}),r.createElement(a,null,r.createElement("p",null,"This controls the initial position of the point along the number line and the ",r.createElement("strong",null,"range"),", the position of the endpoints of the number line. Setting the range constrains the position of the answer and the labels."),r.createElement("p",null,"In static mode, the initial position of the point is determined by Correct x instead of position."))),r.createElement("div",{className:"perseus-widget-row"},r.createElement("div",{className:"perseus-widget-left-col"},"Labels:"," ",r.createElement(l,{value:t[0],placeholder:e[0],format:this.props.labelStyle,checkValidity:function(t){return t>=e[0]&&t<=e[1]},onChange:this.onLabelRangeChange.bind(this,0),useArrowKeys:!0}),r.createElement("span",null," & "),r.createElement(l,{value:t[1],placeholder:e[1],format:this.props.labelStyle,checkValidity:function(t){return t>=e[0]&&t<=e[1]},onChange:this.onLabelRangeChange.bind(this,1),useArrowKeys:!0}),r.createElement(a,null,r.createElement("p",null,"This controls the position of the left / right labels. By default, the labels are set by the range ",r.createElement("br",null),r.createElement("strong",null,"Note:")," Ensure that the labels line up with the tick marks, or it may be confusing for users.")))),r.createElement("div",{className:"perseus-widget-row"},"Style:"," ",r.createElement(s,{allowEmpty:!1,value:this.props.labelStyle,buttons:v,onChange:this.onLabelStyleChange}),r.createElement(a,null,r.createElement("p",null,"This controls the styling of the labels for the two main labels as well as all the tick mark labels, if applicable. Your choices are decimal, improper fractions, mixed fractions, and non-reduced fractions."))),r.createElement("div",{className:"perseus-widget-row"},!this.props.static&&r.createElement("div",{className:"perseus-widget-left-col"},r.createElement(c,{label:"Show tick controller",isTickCtrl:this.props.isTickCtrl,onChange:this.props.onChange})),r.createElement("div",{className:"perseus-widget-right-col"},r.createElement(c,{label:"Show label ticks",labelTicks:this.props.labelTicks,onChange:this.props.onChange}))),r.createElement("div",{className:"perseus-widget-row"},!this.props.static&&r.createElement(c,{label:"Show tooltips",showTooltips:this.props.showTooltips,onChange:this.props.onChange})),r.createElement("div",{className:"perseus-widget-row"},g&&r.createElement("span",null,r.createElement("label",null,"Start num divisions at"," ",r.createElement(l,{value:this.props.numDivisions||null,format:"decimal",onChange:this.onNumDivisionsChange,checkValidity:function(e){return e>=n[0]&&e<=n[1]},placeholder:i/this.props.tickStep,useArrowKeys:!0})),r.createElement(a,null,r.createElement("p",null,"This controls the number (and position) of the tick marks. The number of divisions is constrained to"," "+n[0]+d+n[1],".",r.createElement("br",null),r.createElement("strong",null,"Note:")," The user will be able to specify the number of divisions in a number input."))),!g&&r.createElement("span",null,r.createElement("label",null,"Num divisions:"," ",r.createElement(l,{value:this.props.numDivisions||null,format:"decimal",onChange:this.onNumDivisionsChange,checkValidity:function(e){return e>=n[0]&&e<=n[1]},placeholder:i/this.props.tickStep,useArrowKeys:!0}))," ",r.createElement("label",null,"or tick step:"," ",r.createElement(l,{value:this.props.tickStep||null,format:this.props.labelStyle,onChange:this.onTickStepChange,checkValidity:function(e){return e>0&&e<=i},placeholder:i/this.props.numDivisions,useArrowKeys:!0})),r.createElement(a,null,r.createElement("p",null,"This controls the number (and position) of the tick marks; you can either set the number of divisions (2 divisions would split the entire range in two halves), or the tick step (the distance between ticks) and the other value will be updated accordingly. ",r.createElement("br",null),r.createElement("strong",null,"Note:")," There is no check to see if labels coordinate with the tick marks, which may be confusing for users if the blue labels and black ticks are off-step.")))),r.createElement("div",{className:"perseus-widget-row"},r.createElement("label",null,"Snap increments per tick:"," ",r.createElement(l,{value:h,checkValidity:function(e){return e>0},format:this.props.labelStyle,onChange:this.onNumChange.bind(this,"snapDivisions"),useArrowKeys:!0})),r.createElement(a,null,r.createElement("p",null,"This determines the number of different places the point will snap between two adjacent tick marks. ",r.createElement("br",null),r.createElement("strong",null,"Note:"),"Ensure the required number of snap increments is provided to answer the question."))))}});e.exports=f},function(e,t,n){"use strict";var r=n(17),i=n(19),o=n(18),s=n(29),a=n(6),l=n(5).ClassNames,c=r.createClass({displayName:"PlaceholderCard",propTypes:{width:r.PropTypes.number.isRequired,height:r.PropTypes.number.isRequired},render:function(){return r.createElement("div",{className:"card-wrap "+l.INTERACTIVE,style:{width:this.props.width}},r.createElement("div",{className:"card placeholder",style:{height:this.props.height}}))}}),p=r.createClass({displayName:"DragHintCard",render:function(){return r.createElement("div",{className:"card-wrap "+l.INTERACTIVE},r.createElement("div",{className:"card drag-hint"}))}}),u={position:r.PropTypes.shape({left:r.PropTypes.number,top:r.PropTypes.number})},h=r.createClass({displayName:"Card",propTypes:{floating:r.PropTypes.bool.isRequired,animating:r.PropTypes.bool,width:r.PropTypes.number,stack:r.PropTypes.bool,onMouseDown:r.PropTypes.func,onMouseMove:r.PropTypes.func,onMouseUp:r.PropTypes.func,startMouse:u.position,startOffset:u.position,animateTo:u.position,onAnimationEnd:r.PropTypes.func},getDefaultProps:function(){return{stack:!1,animating:!1}},render:function(){var e={};this.props.floating&&(e={position:"absolute",left:this.props.startOffset.left,top:this.props.startOffset.top}),this.props.width&&(e.width=this.props.width);var t=["card"];this.props.stack&&t.push("stack"),this.props.floating&&!this.props.animating&&(t.push("dragging"),e.left+=this.props.mouse.left-this.props.startMouse.left,e.top+=this.props.mouse.top-this.props.startMouse.top);var n=o.pick(this.props,"content"),i=this.props.animating?$.noop:this.onMouseDown;return r.createElement("div",{className:"card-wrap "+l.INTERACTIVE,style:e,onMouseDown:i,onTouchStart:i,onTouchMove:this.onMouseMove,onTouchEnd:this.onMouseUp,onTouchCancel:this.onMouseUp},r.createElement("div",{className:t.join(" ")},r.createElement(s,n)))},shouldComponentUpdate:function(e,t){return this.props.floating||e.floating||this.props.content!==e.content||this.props.fakeRef!==e.fakeRef},componentDidMount:function(){this.mouseMoveUpBound=!1},componentDidUpdate:function(e,t){if(this.props.animating&&!e.animating){var n=15*Math.sqrt(Math.sqrt(Math.pow(this.props.animateTo.left-this.props.startOffset.left,2)+Math.pow(this.props.animateTo.top-this.props.startOffset.top,2)));$(i.findDOMNode(this)).animate(this.props.animateTo,Math.max(n,1),this.props.onAnimationEnd)}},componentWillUnmount:function(){this.mouseMoveUpBound&&(console.warn("Removing an element with bound event handlers."),this.unbindMouseMoveUp(),a.resetTouchHandlers())},bindMouseMoveUp:function(){this.mouseMoveUpBound=!0,$(document).on("mousemove",this.onMouseMove),$(document).on("mouseup",this.onMouseUp)},unbindMouseMoveUp:function(){this.mouseMoveUpBound=!1,$(document).off("mousemove",this.onMouseMove),$(document).off("mouseup",this.onMouseUp)},onMouseDown:function(e){e.preventDefault();var t=a.extractPointerLocation(e);t&&(this.bindMouseMoveUp(),this.props.onMouseDown&&this.props.onMouseDown(t,this))},onMouseMove:function(e){e.preventDefault();var t=a.extractPointerLocation(e);t&&this.props.onMouseMove&&this.props.onMouseMove(t)},onMouseUp:function(e){e.preventDefault();var t=a.extractPointerLocation(e);t&&(this.unbindMouseMoveUp(),this.props.onMouseUp&&this.props.onMouseUp(t))}}),d="normal",f="auto",g="horizontal",m="vertical",v=r.createClass({displayName:"Orderer",propTypes:{correctOptions:r.PropTypes.array,current:r.PropTypes.array,height:r.PropTypes.oneOf([d,f]),layout:r.PropTypes.oneOf([g,m]),options:r.PropTypes.array,trackInteraction:r.PropTypes.func.isRequired},getDefaultProps:function(){return{current:[],options:[],correctOptions:[],height:d,layout:g}},getInitialState:function(){return{current:[],
dragging:!1,placeholderIndex:null}},componentWillReceiveProps:function(e){o.isEqual(this.props.current,e.current)||this.setState({current:e.current})},render:function(){var e=this,t=this.state.dragging&&r.createElement(h,{ref:"dragging",floating:!0,content:this.state.dragContent,startOffset:this.state.offsetPos,startMouse:this.state.grabPos,mouse:this.state.mousePos,width:this.state.dragWidth,onMouseUp:this.onRelease,onMouseMove:this.onMouseMove,key:this.state.dragKey||"draggingCard"}),n=this.state.animating&&r.createElement(h,{floating:!0,animating:!0,content:this.state.dragContent,startOffset:this.state.offsetPos,width:this.state.dragWidth,animateTo:this.state.animateTo,onAnimationEnd:this.state.onAnimationEnd,key:this.state.dragKey||"draggingCard"}),i=o.map(this.state.current,function(e,t){return r.createElement(h,{ref:"sortable"+t,fakeRef:"sortable"+t,floating:!1,content:e.content,width:e.width,key:e.key,onMouseDown:this.state.animating?$.noop:this.onClick.bind(null,"current",t)})},this);if(null!=this.state.placeholderIndex){var s=r.createElement(c,{ref:"placeholder",width:this.state.dragWidth,height:this.state.dragHeight,key:"placeholder"});i.splice(this.state.placeholderIndex,0,s)}var a=i.length>0;i.push(t,n);var u=r.createElement("div",{className:"perseus-clearfix draggable-box"},!a&&r.createElement(p,null),r.createElement("div",{ref:"dragList"},i)),d=r.createElement("div",{ref:"bank",className:"bank perseus-clearfix"},o.map(this.props.options,function(t,n){return r.createElement(h,{ref:"bank"+n,floating:!1,content:t.content,stack:!0,key:n,onMouseDown:e.state.animating?$.noop:e.onClick.bind(null,"bank",n),onMouseMove:e.onMouseMove,onMouseUp:e.onRelease})},this));return r.createElement("div",{className:"draggy-boxy-thing orderer height-"+this.props.height+" layout-"+this.props.layout+" above-scratchpad blank-background perseus-clearfix "+l.INTERACTIVE,ref:"orderer"},d,u)},onClick:function(e,t,n,r){var o,s=$(i.findDOMNode(r)),a=this.state.current.slice(),l=null;"current"===e?(a.splice(t,1),o=this.state.current[t],l=t):"bank"===e&&(o=this.props.options[t]),this.setState({current:a,dragging:!0,placeholderIndex:l,dragKey:o.key,dragContent:o.content,dragWidth:s.width(),dragHeight:s.height(),grabPos:n,mousePos:n,offsetPos:s.position()})},onRelease:function(e){var t=this,n=this.refs.dragging;if(null!=n){var r=this.isCardInBank(n),s=this.state.placeholderIndex,a=function(){var e=t.state.current.slice();if(!r){var n={content:t.state.dragContent,key:o.uniqueId("perseus_draggable_card_"),width:t.state.dragWidth};e.splice(s,0,n)}t.props.onChange({current:e}),t.setState({current:e,dragging:!1,placeholderIndex:null,animating:!1}),t.props.trackInteraction()},l=$(i.findDOMNode(n)).position(),c=null;r?o.each(this.props.options,function(e,t){if(e.content===this.state.dragContent){var n=i.findDOMNode(this.refs["bank"+t]);c=$(n).position()}},this):null!=this.refs.placeholder&&(c=$(i.findDOMNode(this.refs.placeholder)).position()),null==c?a():this.setState({offsetPos:l,animateTo:c,onAnimationEnd:a,animating:!0,dragging:!1})}},onMouseMove:function(e){var t=this.refs.dragging;if(null!=t){var n;n=this.isCardInBank(t)?null:this.findCorrectIndex(t,this.state.current),this.setState({mousePos:e,placeholderIndex:n})}},findCorrectIndex:function(e,t){var n=this.props.layout===g,r=$(i.findDOMNode(this.refs.dragList)),s=r.offset().left,a=r.offset().top,l=$(i.findDOMNode(e)).offset().left-s,c=$(i.findDOMNode(e)).offset().top-a,p=0,u=0,h=0;return n?o.each(t,function(e,t){var n=i.findDOMNode(this.refs["sortable"+t]),r=$(n).outerWidth(!0);l>u+r/2&&(p+=1),u+=r},this):o.each(t,function(e,t){var n=i.findDOMNode(this.refs["sortable"+t]),r=$(n).outerHeight(!0);c>h+r/2&&(p+=1),h+=r},this),p},isCardInBank:function(e){if(null==e)return!1;var t=this.props.layout===g,n=$(i.findDOMNode(e)),r=$(i.findDOMNode(this.refs.bank)),o=n.offset(),s=r.offset(),a=n.outerHeight(!0),l=r.outerHeight(!0),c=r.outerWidth(!0),p=i.findDOMNode(this.refs.dragList),u=($(p).width(),n.outerWidth(!0));return t?o.top+a/2<s.top+l:o.left+u/2<s.left+c},getUserInput:function(){return{current:o.map(this.props.current,function(e){return e.content})}},simpleValidate:function(e){return v.validate(this.getUserInput(),e)}});o.extend(v,{validate:function(e,t){if(0===e.current.length)return{type:"invalid",message:null};var n=o.isEqual(e.current,o.pluck(t.correctOptions,"content"));return{type:"points",earned:n?1:0,total:1,message:null}}}),e.exports={name:"orderer",displayName:"Orderer",widget:v}},function(e,t,n){"use strict";var r=n(17),i=n(18),o=n(71),s=n(64),a="normal",l="auto",c="horizontal",p="vertical",u=r.createClass({displayName:"OrdererEditor",propTypes:{correctOptions:r.PropTypes.array,otherOptions:r.PropTypes.array,height:r.PropTypes.oneOf([a,l]),layout:r.PropTypes.oneOf([c,p]),onChange:r.PropTypes.func.isRequired},getDefaultProps:function(){return{correctOptions:[{content:"$x$"}],otherOptions:[{content:"$y$"}],height:a,layout:c}},render:function(){return r.createElement("div",{className:"perseus-widget-orderer"},r.createElement("div",null," ","Correct answer:"," ",r.createElement(o,null,r.createElement("p",null,"Place the cards in the correct order. The same card can be used more than once in the answer but will only be displayed once at the top of a stack of identical cards."))),r.createElement(s,{options:i.pluck(this.props.correctOptions,"content"),onChange:this.onOptionsChange.bind(this,"correctOptions"),layout:this.props.layout}),r.createElement("div",null," ","Other cards:"," ",r.createElement(o,null,r.createElement("p",null,"Create cards that are not part of the answer."))),r.createElement(s,{options:i.pluck(this.props.otherOptions,"content"),onChange:this.onOptionsChange.bind(this,"otherOptions"),layout:this.props.layout}),r.createElement("div",null,r.createElement("label",null," ","Layout:"," ",r.createElement("select",{value:this.props.layout,onChange:this.onLayoutChange},r.createElement("option",{value:c},"Horizontal"),r.createElement("option",{value:p},"Vertical"))),r.createElement(o,null,r.createElement("p",null,"Use the horizontal layout for short text and small images. The vertical layout is best for longer text (e.g. proofs)."))),r.createElement("div",null,r.createElement("label",null," ","Height:"," ",r.createElement("select",{value:this.props.height,onChange:this.onHeightChange},r.createElement("option",{value:a},"Normal"),r.createElement("option",{value:l},"Automatic"))),r.createElement(o,null,r.createElement("p",null,'Use "Normal" for text, "Automatic" for images.'))))},onOptionsChange:function(e,t,n){var r={};r[e]=i.map(t,function(e){return{content:e}}),this.props.onChange(r,n)},onLayoutChange:function(e){this.props.onChange({layout:e.target.value})},onHeightChange:function(e){this.props.onChange({height:e.target.value})},serialize:function(){var e=i.chain(i.pluck(this.props.correctOptions,"content")).union(i.pluck(this.props.otherOptions,"content")).uniq().reject(function(e){return""===e}).sort().sortBy(function(e){return/\d/.test(e)?0:/^\$?[a-zA-Z]+\$?$/.test(e)?2:1}).map(function(e){return{content:e}}).value();return{options:e,correctOptions:this.props.correctOptions,otherOptions:this.props.otherOptions,height:this.props.height,layout:this.props.layout}}});e.exports=u},function(e,t,n){"use strict";var r=n(52),i=r.StyleSheet,o=r.css,s=n(17),a=n(19),l=n(18),c=n(175),p=n(29),u=n(213),h=s.createClass({displayName:"LineHeightMeasurer",measureLineHeight:function(){this.$body.text(" ");var e=this.$end.offset().top-this.$body.offset().top;return this.$body.text(""),e},render:function(){var e=this;return s.createElement("div",{className:o(d.measurer)},s.createElement("div",null,s.createElement("div",{ref:function(t){return e.$body=$(t)},className:"paragraph"}),s.createElement("div",{ref:function(t){return e.$end=$(t)}})))}}),d=i.create({measurer:{position:"absolute",width:"100%",top:0,left:0}}),f=s.createClass({displayName:"Passage",mixins:[c],propTypes:{passageTitle:s.PropTypes.string,passageText:s.PropTypes.string,footnotes:s.PropTypes.string,showLineNumbers:s.PropTypes.bool,onChange:s.PropTypes.func,highlightRanges:s.PropTypes.arrayOf(s.PropTypes.arrayOf(s.PropTypes.number)),reviewModeRubric:s.PropTypes.shape({passageTitle:s.PropTypes.string,passageText:s.PropTypes.string,footnotes:s.PropTypes.string,showLineNumbers:s.PropTypes.bool,static:s.PropTypes.bool})},getDefaultProps:function(){return{passageTitle:"",passageText:"",footnotes:"",showLineNumbers:!0,highlightRanges:[]}},getInitialState:function(){return{nLines:null,startLineNumbersAfter:0,newHighlightRange:null,selectedHighlightRange:null,mouseX:null,mouseY:null}},supportsHighlighting:function(){return!this.props.passageText.match(/\[\[1\]\]/)},canUpdateHighlighting:function(){return!this.props.reviewModeRubric&&this.supportsHighlighting()},wordsInSection:function(e){e=e.replace(/_+/g,""),e=e.replace(/\[Marker for question [0-9]+\]/g," "),e=e.replace(/\[Sentence [0-9]+\]/g," ");var t=e.split(/\s+/).filter(function(e){return e.length>0});return t.length},compareRanges:function(e,t){return e[0]<t[0]?-1:e[0]>t[0]?1:0},mergeOverlappingRanges:function(e){for(var t=[].concat(e).sort(this.compareRanges),n=[],r=t,i=Array.isArray(r),o=0,r=i?r:r[Symbol.iterator]();;){var s;if(i){if(o>=r.length)break;s=r[o++]}else{if(o=r.next(),o.done)break;s=o.value}var a=s,l=n[n.length-1];l&&a[0]<=l[1]?n[n.length-1]=[l[0],Math.max(l[1],a[1])]:n.push(a)}return n},addHighlightRange:function(){var e=[].concat(this.props.highlightRanges);e.push(this.state.newHighlightRange),e=this.mergeOverlappingRanges(e),this.props.onChange({highlightRanges:e}),this.forceUpdate()},isAnchorFirst:function(e,t,n,r){return e===t?n<r:4===e.compareDocumentPosition(t)},sortIndices:function(e){var t=this.getSelectionIndex(e,"anchor"),n=this.getSelectionIndex(e,"focus"),r=e.anchorNode,i=e.focusNode,o=e.anchorOffset,s=e.focusOffset;return this.isAnchorFirst(r,i,o,s)?{selectionStartIndex:t,selectionEndIndex:n,startNode:r,endNode:i,startNodeOffset:o,endNodeOffset:s}:{selectionStartIndex:n,selectionEndIndex:t,startNode:i,endNode:r,startNodeOffset:s,endNodeOffset:o}},getSelectionRange:function(e){var t=this.sortIndices(e),n=t.selectionStartIndex,r=t.selectionEndIndex,i=t.startNode,o=t.endNode,s=t.startNodeOffset,a=t.endNodeOffset;return null===n||null===r?null:(" "===i.textContent.charAt(s)&&r>n&&(n+=1)," "===o.textContent.charAt(a-1)&&r>n&&(r-=1),[n,r])},isInPassageText:function(e){for(var t=e;t;){if(t.classList&&t.classList.contains("passage-text")){for(;1!==e.nodeType;)e=e.parentNode;return t.contains(e)}t=t.parentNode}return!1},getSelectionIndex:function(e,t){var n=null,r=0,i=".?;:!,'\"";if("anchor"===t?(n=e.anchorNode,r=e.anchorOffset):(n=e.focusNode,r=e.focusOffset),!this.isInPassageText(n))return null;var o=n.textContent;i.indexOf(o.charAt(0))!==-1&&(o=o.slice(1));for(var s=this.charToWordOffset(r,o),a="",l="";n&&(!n.classList||!n.classList.contains("passage-text"));){for(;n.previousSibling;){n=n.previousSibling,l=n.textContent;var c="",p=l.charAt(l.length-1),u=i.indexOf(p)!==-1||!n.nextSibling||"_"===p&&n.nextSibling.textContent.charAt(0).match(/[\w ]/);u&&a.length>0&&(c=" "),a=l+c+a}n=n.parentNode}return s+=this.wordsInSection(a),"_"!==a.charAt(a.length-1)||o.charAt(0).match(/[\w ]/)||(s-=1),s},charToWordOffset:function(e,t){for(;e>0&&" "!==t.charAt(e-1);)e-=1;var n=t.substring(0,e),r=this.wordsInSection(n);return" "===t.charAt(0)&&0===e&&(r-=1),r},handleConfirmHighlightClick:function(){this.setState({newHighlightRange:null}),this.addHighlightRange();var e=window.getSelection();e.collapse(e.anchorNode,e.anchorOffset)},isHighlighted:function(e){for(var t=this.props.highlightRanges,n=t,r=Array.isArray(n),i=0,n=r?n:n[Symbol.iterator]();;){var o;if(r){if(i>=n.length)break;o=n[i++]}else{if(i=n.next(),i.done)break;o=i.value}var s=o;if(e[0]>=s[0]&&e[1]<=s[1])return s}return null},handleMouseDown:function(e){e.target.getAttribute("data-highlighting-tooltip")||this.setState({newHighlightRange:null,selectedHighlightRange:null})},handleMouseUp:function(e){var t=this.state.newHighlightRange||this.state.selectedHighlightRange;if(this.canUpdateHighlighting()&&!t){this.setState({mouseX:e.clientX,mouseY:e.clientY-60});var n=window.getSelection(),r=this.getSelectionRange(n);if(r){var i=this.isHighlighted(r);i?this.setState({newHighlightRange:null,selectedHighlightRange:i}):" "===n.toString()||n.isCollapsed||this.setState({newHighlightRange:r,selectedHighlightRange:null})}}},handleRemoveHighlightClick:function(){var e=this.state.selectedHighlightRange,t=this.props.highlightRanges.findIndex(function(t){return t[0]===e[0]&&t[1]===e[1]}),n=[].concat(this.props.highlightRanges);n.splice(t,1),this.setState({selectedHighlightRange:null}),this.props.onChange({highlightRanges:n})},stringToArrayOfWords:function(e){var t;return e=e.split(" "),e=e.map(function(e){var t=e.match(/\s+/);if(t){var n=t.index+t[0].length;return[e.slice(0,n),e.slice(n)]}return[e]}),e=(t=[]).concat.apply(t,e),e=e.filter(function(e){return""!==e})},adjustIndexforMarkdownAndWhitespace:function(e,t){for(var n=0;n<=e;n++){var r=t[n].match(/^\s+$/)||["{highlighting.end}{highlighting.start}","{highlighting.end}","{highlighting.start}"].includes(t[n]);r&&e++}return e},shouldComponentUpdate:function(e,t){return!l.isEqual(this.props,e)||!l.isEqual(this.state,t)},renderAddHighlightTooltip:function(){var e=this.state.mouseX+"px",t=this.state.mouseY+"px";return s.createElement("span",{onClick:this.handleConfirmHighlightClick,style:{position:"absolute",left:e,top:t}},s.createElement("img",{"data-highlighting-tooltip":!0,width:"130",height:"44",style:{position:"absolute",top:"-54px",left:"-65px"},src:"/images/perseus/add-highlight.svg"}))},renderRemoveHighlightTooltip:function(){var e=this.state.mouseX+"px",t=this.state.mouseY+"px";return s.createElement("span",{onClick:this.handleRemoveHighlightClick,style:{position:"absolute",left:e,top:t}},s.createElement("img",{"data-highlighting-tooltip":!0,width:"163",height:"44",style:{position:"absolute",top:"-54px",left:"-81px"},src:"/images/perseus/remove-highlight.svg"}))},render:function(){var e=this,t=void 0,n=this.state.nLines;this.props.showLineNumbers&&n&&(t=l.range(1,n+1).map(function(t){return 4===t&&n>4?s.createElement("span",{key:"line-marker",className:"line-marker"},"Line"):t+e.state.startLineNumbersAfter}));var r="{highlighting.start}",i="{highlighting.end}";this.props.reviewModeRubric&&(r="{review-highlighting.start}",i="{review-highlighting.end}");var o=this.props.passageText;l.each(this.props.highlightRanges,function(e){o=o.replace(/\n +\n/g,"\n\n"),o=o.replace(/\r\n +\r\n/g,"\r\n\r\n");var t=this.stringToArrayOfWords(o),n=this.adjustIndexforMarkdownAndWhitespace(e[0],t),s=this.adjustIndexforMarkdownAndWhitespace(e[1],t);o=t.slice(0,n).join(" ")+" "+t.slice(n,s+1).map(function(e){var t=new RegExp("[\\(\\)\\—\\-\\—\\-\\‑\\.                                            \\[\\]\\+\\$\\?,!A-Za-z0-9                                            À-ſ:;'‘’\"“”=%<>s]+"),n=e.match(t);if(n){var o=n.index,s=o+n[0].length;return e.slice(0,o)+r+e.slice(o,s)+i+e.slice(s)}return e}).join(r+" "+i)+" "+t.slice(s+1).join(" ")},this);var a={},c=u.parse(o,a);return s.createElement("div",null,s.createElement("div",{onMouseUp:this.handleMouseUp,className:"perseus-widget-passage-container"},this._renderInstructions(a),s.createElement("div",{className:"perseus-widget-passage"},s.createElement("div",{className:"passage-title"},s.createElement(p,{content:this.props.passageTitle})),t&&s.createElement("div",{className:"line-numbers","aria-hidden":!0},t),s.createElement("h3",{className:"perseus-sr-only"},i18n._("Beginning of reading passage.")),s.createElement("div",{className:"passage-text"},this._renderContent(c)),this._hasFootnotes()&&[s.createElement("h4",{key:"footnote-start",className:"perseus-sr-only"},i18n._("Beginning of reading passage footnotes.")),s.createElement("div",{key:"footnotes",className:"footnotes"},this._renderFootnotes())],s.createElement("div",{className:"perseus-sr-only"},i18n._("End of reading passage.")))),this.state.newHighlightRange&&this.renderAddHighlightTooltip(),this.state.selectedHighlightRange&&this.renderRemoveHighlightTooltip())},componentDidMount:function(){this._updateState(),window.addEventListener("mousedown",this.handleMouseDown),this._throttledUpdateState=l.throttle(this._updateState,500),window.addEventListener("resize",this._throttledUpdateState)},componentWillUnmount:function(){window.removeEventListener("mousedown",this.handleMouseDown),window.removeEventListener("resize",this._throttledUpdateState)},componentDidUpdate:function(){this._updateState()},_updateState:function(){this.setState({nLines:this._measureLines(),startLineNumbersAfter:this._getInitialLineNumber()})},_measureLines:function(){var e=$(a.findDOMNode(this.refs.content)),t=e.height(),n=this._getLineHeight(),r=Math.round(t/n);return r},_getInitialLineNumber:function(){var e=this,t=!0,n=this.props.interWidgets(function(n,r){return"passage"===r.type&&(n===e.props.widgetId&&(t=!1),t)});return n.map(function(e){return e.getLineCount()}).reduce(function(e,t){return e+t},0)},getLineCount:function(){return null!=this.state.nLines?this.state.nLines:this._measureLines()},_renderInstructions:function(e){var t=e.firstQuestionRef,n=e.firstSentenceRef,r="";t&&(r+=i18n._("The symbol %(questionSymbol)s indicates that question %(questionNumber)s references this portion of the passage.",{questionSymbol:"[["+t+"]]",questionNumber:t})),n&&(r+=i18n._(" The symbol %(sentenceSymbol)s indicates that the following sentence is referenced in a question.",{sentenceSymbol:"["+n+"]"}));var i=u.parse(r);return s.createElement("div",{className:"perseus-widget-passage-instructions"},u.output(i))},_renderContent:function(e){var t=this;return s.createElement("div",{ref:"content"},s.createElement(h,{ref:function(e){return t._lineHeightMeasurer=e}}),u.output(e))},_hasFootnotes:function(){var e=this.props.footnotes,t=/^\s*$/.test(e);return!t},_renderFootnotes:function(){var e=this.props.footnotes,t=u.parse(e);return u.output(t)},_getStartRefLineNumber:function(e){var t=u.START_REF_PREFIX+e,n=this.refs[t];if(!n)return null;var r=$(a.findDOMNode(n)),i=r.next();0===i.length&&(i=r);var o=i.offset().top;return this.state.startLineNumbersAfter+1+this._convertPosToLineNumber(o)},_getEndRefLineNumber:function(e){var t=u.END_REF_PREFIX+e,n=this.refs[t];if(!n)return null;var r=$(a.findDOMNode(n)),i=r.prev();0===i.length&&(i=r);var o=i.height(),s=i.offset().top,l=this._convertPosToLineNumber(s+o);return 0===o&&(l+=1),this.state.startLineNumbersAfter+l},_getLineHeight:function(){return this._lineHeightMeasurer.measureLineHeight()},_convertPosToLineNumber:function(e){var t=$(a.findDOMNode(this.refs.content)),n=e-t.offset().top,r=this._getLineHeight(),i=Math.round(n/r);return i},_getRefContent:function(e){var t=u.START_REF_PREFIX+e,n=this.refs[t];return n?n.getRefContent():null},getReference:function(e){var t=this._getStartRefLineNumber(e),n=this._getEndRefLineNumber(e);if(null==t||null==n)return null;var r=this._getRefContent(e);return{startLine:t,endLine:n,content:r}},getUserInput:function(){return null},simpleValidate:function(e){return f.validate(this.getUserInput(),e)}});l.extend(f,{validate:function(e,t){return{type:"points",earned:0,total:0,message:null}}}),e.exports={name:"passage",displayName:"Passage",widget:f,transform:function(e){return l.pick(e,"passageTitle","passageText","footnotes","showLineNumbers")}}},function(e,t,n){"use strict";var r=n(17),i=(n(18),n(175)),o=n(176),s=n(11),a=n(71),l=n(39),c=r.createClass({displayName:"PassageEditor",mixins:[o,i],propTypes:{passageTitle:r.PropTypes.string,passageText:r.PropTypes.string,footnotes:r.PropTypes.string,showLineNumbers:r.PropTypes.bool},getDefaultProps:function(){return{passageTitle:"",passageText:"",footnotes:"",showLineNumbers:!0}},render:function(){var e=this,t=r.createElement(s,{ref:"passage-editor",apiOptions:this.props.apiOptions,content:this.props.passageText,widgetEnabled:!1,placeholder:"Type passage here...",onChange:function(t){e.change({passageText:t.content})},showWordCount:!0}),n=r.createElement(s,{ref:"passage-footnotes-editor",apiOptions:this.props.apiOptions,content:this.props.footnotes,widgetEnabled:!1,placeholder:"Type footnotes here...",onChange:function(t){e.change({footnotes:t.content})}});return r.createElement("div",{className:"perseus-widget-passage-editor"},r.createElement("div",{className:"perseus-widget-row"},r.createElement(l,{label:"Show line numbers",labelAlignment:"right",showLineNumbers:this.props.showLineNumbers,onChange:this.props.onChange})),r.createElement("div",null,"Passage title:",r.createElement(a,null,r.createElement("p",null,"An optional title that will appear directly above the passage in the same font style. (E.g. Passage 1)")),r.createElement("div",null,r.createElement("input",{type:"text",defaultValue:this.props.passageTitle,onChange:function(t){e.change({passageTitle:t.target.value})}}))),r.createElement("div",null,"Passage Text:",t),r.createElement("div",null,"Footnotes:",r.createElement(a,null,r.createElement("p",null,"To add footnotes, add ^ characters where they belong in the passage. Then, add ^ in the footnotes area to reference the footnotes in the passage.")),n))}});e.exports=c},function(e,t,n){"use strict";var r=n(17),i=n(18),o=n(175),s=n(34),a=n(187),l="–",c=r.createClass({displayName:"PassageRef",mixins:[a,o],propTypes:{passageNumber:r.PropTypes.number,referenceNumber:r.PropTypes.number,summaryText:r.PropTypes.string},getDefaultProps:function(){return{passageNumber:1,referenceNumber:1,summaryText:""}},getInitialState:function(){return{lineRange:null,content:null}},shouldComponentUpdate:function(e,t){return!i.isEqual(this.props,e)||!i.isEqual(this.state,t)},render:function(){var e,t=this.state.lineRange;e=t?t[0]===t[1]?$_({lineNumber:t[0]},"line %(lineNumber)s"):$_({lineRange:t[0]+l+t[1]},"lines %(lineRange)s"):$_({lineRange:"?"+l+"?"},"lines %(lineRange)s");var n;if(this.props.summaryText){var i=s.parseInline(this.props.summaryText);n=r.createElement("span",{"aria-hidden":!0}," ","(“",s.basicOutput(i),"”)")}else n=null;return r.createElement("span",null,e,n,t&&r.createElement("div",{className:"perseus-sr-only"},this.state.content))},componentDidMount:function(){this._deferredUpdateRange(),this._throttledUpdateRange=i.throttle(this._deferredUpdateRange,500),window.addEventListener("resize",this._throttledUpdateRange)},componentDidUpdate:function(){this._deferredUpdateRange()},componentWillUnmount:function(){window.removeEventListener("resize",this._throttledUpdateRange)},_deferredUpdateRange:function(){i.defer(this._updateRange)},_updateRange:function(){var e=this.props.interWidgets("passage "+this.props.passageNumber)[0],t=null;e&&(t=e.getReference(this.props.referenceNumber)),this.isMounted()&&(t?this.setState({lineRange:[t.startLine,t.endLine],content:t.content}):this.setState({lineRange:null,content:null}))},simpleValidate:function(e){return c.validate(this.getUserInput(),e)}});i.extend(c,{validate:function(e,t){return{type:"points",earned:0,total:0,message:null}}}),e.exports={name:"passage-ref",displayName:"PassageRef",defaultAlignment:"inline",widget:c,transform:function(e){return i.pick(e,"passageNumber","referenceNumber","summaryText")},version:{major:0,minor:1}}},function(e,t,n){"use strict";var r=n(17),i=n(175),o=n(176),s=n(71),a=n(178),l=n(179),c=r.createClass({displayName:"PassageRefEditor",mixins:[o,i],propTypes:{passageNumber:r.PropTypes.number,referenceNumber:r.PropTypes.number,summaryText:r.PropTypes.string},getDefaultProps:function(){return{passageNumber:1,referenceNumber:1,summaryText:""}},render:function(){return r.createElement("div",null,r.createElement("div",null,r.createElement("label",null,"Passage Number: ",r.createElement(a,{value:this.props.passageNumber,onChange:this.change("passageNumber")}))),r.createElement("div",null,r.createElement("label",null,"Reference Number: ",r.createElement(a,{value:this.props.referenceNumber,onChange:this.change("referenceNumber")}))),r.createElement("div",null,r.createElement("label",null,"Summary Text: ",r.createElement(l,{value:this.props.summaryText,onChange:this.change("summaryText")}),r.createElement(s,null,r.createElement("p",null,"Short summary of the referenced section. This will be included in parentheses and quotes automatically."),r.createElement("p",null,"Ex: The start ... the end")))))}});e.exports=c},function(e,t,n){"use strict";var r=n(17),i=n(18),o=n(175),s=n(187),a=n(29),l=r.createClass({displayName:"PassageRefTarget",mixins:[s,o],propTypes:{content:r.PropTypes.string},getDefaultProps:function(){return{content:""}},render:function(){return r.createElement(a,{content:this.props.content,inline:!0,apiOptions:this.props.apiOptions})},simpleValidate:function(e){return l.validate(this.getUserInput(),e)}});i.extend(l,{validate:function(e,t){return{type:"points",earned:0,total:0,message:null}}}),e.exports={name:"passage-ref-target",displayName:"PassageRefTarget",defaultAlignment:"inline",widget:l,hidden:!0,transform:function(e){return i.pick(e,"content")},version:{major:0,minor:0}}},function(e,t,n){"use strict";var r=n(17),i=(n(18),n(175)),o=n(176),s=r.createClass({displayName:"PassageRefTargetEditor",mixins:[o,i],propTypes:{content:r.PropTypes.string},getDefaultProps:function(){return{content:""}},render:function(){return r.createElement("div",null,"Content:",r.createElement("input",{type:"text",value:this.props.content,onChange:this.handleContentChange}))},handleContentChange:function(e){this.change({content:e.target.value})}});e.exports=s},function(e,t,n){"use strict";var r=n(17),i=n(19),o=n(18),s=n(5).ClassNames,a=n(6).deepEq,l=n(88),c=n(190),p=n(166),u=n(188),h=n(189),d="bar",f="line",g="pic",m="histogram",v="dotplot",y=({type:r.PropTypes.oneOf([d,f,g,m,v]),labels:r.PropTypes.arrayOf(r.PropTypes.string),categories:r.PropTypes.arrayOf(r.PropTypes.oneOfType([r.PropTypes.number,r.PropTypes.string])),scaleY:r.PropTypes.number,maxY:r.PropTypes.number,snapsPerLine:r.PropTypes.number,picSize:r.PropTypes.number,pixBoxHeight:r.PropTypes.number,picUrl:r.PropTypes.string,plotDimensions:r.PropTypes.arrayOf(r.PropTypes.number),labelInterval:r.PropTypes.number,starting:r.PropTypes.arrayOf(r.PropTypes.number),static:r.PropTypes.bool},r.createClass({displayName:"Plotter",propTypes:{onChange:r.PropTypes.func.isRequired,trackInteraction:r.PropTypes.func.isRequired},getDefaultProps:function(){return{type:d,labels:["",""],categories:[""],scaleY:1,maxY:10,snapsPerLine:2,picSize:40,picBoxHeight:48,picUrl:"",plotDimensions:[380,300],labelInterval:1}},getInitialState:function(){return{values:this.props.starting||[1]}},DOT_PLOT_POINT_SIZE:function(){return this.props.apiOptions.isMobile?6:4},DOT_PLOT_POINT_PADDING:function(){return 8},DOT_TICK_POINT_SIZE:function(){return 2},render:function(){return r.createElement("div",{className:"perseus-widget-plotter graphie "+s.INTERACTIVE,ref:"graphieDiv"})},componentDidUpdate:function(e,t){this.shouldSetupGraphie&&this.setupGraphie(t)},componentDidMount:function(){this.setupGraphie(this.state)},componentWillReceiveProps:function(e){var t=["type","labels","categories","scaleY","maxY","snapsPerLine","picUrl","labelInterval","static"];this.shouldSetupGraphie=o.any(t,function(t){return!o.isEqual(this.props[t],e[t])},this),o.isEqual(this.props.starting,e.starting)||o.isEqual(this.state.values,e.starting)||(this.shouldSetupGraphie=!0,this.setState({values:e.starting}))},setupGraphie:function(e){var t=this;t.shouldSetupGraphie=!1;var n=i.findDOMNode(t.refs.graphieDiv);$(n).empty();var r=p.createGraphie(n);t.graphie=r,t.graphie.pics=[],t.graphie.dotTicks=[];var s=t.props.type===d,a=t.props.type===f,u=t.props.type===g,y=t.props.type===m,b=t.props.type===v,E=u||b,T={},w=T,x=this.props.apiOptions.isMobile;w.graph={lines:[],bars:[],points:[],dividers:[]},w.scaleY=t.props.scaleY,w.dimX=t.props.categories.length;var C=x?[288,336]:t.props.plotDimensions;if(a)w.dimX+=x?-.2:1;else if(y)w.barPad=0,w.barWidth=1;else if(s)w.barPad=x?.08:.15,w.barWidth=1-2*w.barPad,w.dimX+=(x?-2:2)*w.barPad;else if(E){w.picBoxHeight=t.props.picBoxHeight,w.picBoxWidthPx=C[0]/t.props.categories.length;var S=C[0]-w.dimX*w.picBoxWidthPx;w.picPad=S/(2*w.dimX+2);var P=w.picBoxWidthPx+2*w.picPad;w.picPad=w.picPad/P,w.picBoxWidth=w.picBoxWidthPx/P,w.dimX+=2*w.picPad}b&&(w.picBoxHeight=2*this.DOT_PLOT_POINT_SIZE()+this.DOT_PLOT_POINT_PADDING()),w.dimY=Math.ceil(t.props.maxY/w.scaleY)*w.scaleY;var k=25,_=25;if((s||a)&&x&&(k=0!==t.props.labels[1].length?17:11),b&&(k/=2),x&&E&&0===t.props.labels[1].length&&(k=0),x?w.scale=o.map([[w.dimX,k],[w.dimY,_]],function(e,t){var n=e[0],r=e[1];return(C[t]-4*r)/n}):w.scale=o.map([w.dimX,w.dimY],function(e,t){return C[t]/e}),k/=w.scale[0],_/=w.scale[1],E&&(w.scale[1]=w.picBoxHeight/w.scaleY),r.init({range:[[-3*k,w.dimX+k],[-3*_,w.dimY+_]],scale:w.scale,isMobile:this.props.apiOptions.isMobile}),r.addMouseLayer({allowScratchpad:!0,setDrawingAreaAvailable:this.props.apiOptions.setDrawingAreaAvailable}),!E)for(var M=x?w.scaleY:0,O=M;O<=w.dimY;O+=w.scaleY)r.label([0,O],l.roundToApprox(O,2),"left",!0),r.style({stroke:x?"#e9ebec":"#000",strokeWidth:1,opacity:x?1:.3},function(){r.line([0,O],[w.dimX,O])});(s||a)&&x&&(t.graphie.dragPrompt=r.label([w.dimX/2,w.dimY/2],"Drag handles to make graph","center",!1).css("font-weight","bold").css("color",c.KA_GREEN).css("display","none")),t.setupCategories(T),E&&x&&(t.graphie.dotPrompt=r.label([w.dimX/2,w.dimY/2],"Tap to add points","center",!1).css("font-weight","bold").css("color",c.KA_GREEN).css("display","none")),E&&t.drawPicHeights(t.state.values,e.values),r.style({stroke:"#000",strokeWidth:2,opacity:1},function(){E?b?r.style({stroke:x?c.GRAY_G:"#000",strokeWidth:x?1:2},function(){return r.line([x?0:.5,0],[w.dimX-(x?0:.5),0])}):(r.line([0,0],[w.dimX,0]),0===t.props.labels[1].length&&x||r.style({stroke:x?c.GRAY_G:"#000",strokeWidth:x?1:2},function(){return r.line([0,0],[0,w.dimY])})):(r.style({stroke:x?c.GRAY_G:"#000",strokeWidth:x?1:2},function(){return r.line([x?3*-k:0,0],[w.dimX+(x?k:0),0])}),(s||a)&&x||r.style({stroke:x?c.GRAY_G:"#000",strokeWidth:x?1:2},function(){return r.line([0,0],[0,w.dimY])}))}),r.label([w.dimX/2,x?3*-_:-35/w.scale[1]],t.props.labels[0],x?"above":"below",!1).css("font-weight","bold").css("color",x&&c.GRAY_F),r.label([(x?-35:-60)/w.scale[0],w.dimY/2],t.props.labels[1],"center",!1).css("font-weight","bold").css("color",x&&c.GRAY_F).addClass("rotate"),this.props.apiOptions.isMobile&&(this.horizHairline=new h(this.graphie,[0,0],[0,0],{normalStyle:{strokeWidth:1}}),this.horizHairline.attr({stroke:c.INTERACTIVE}),this.horizHairline.hide(),this.hairlineRange=[[0,w.dimX],[0,w.dimY]])},showHairlines:function(e){this.props.apiOptions.isMobile&&"none"!==this.props.markings&&(this.horizHairline.moveTo([this.hairlineRange[0][0],e[1]],[this.hairlineRange[0][1],e[1]]),this.horizHairline.show())},hideHairlines:function(){this.props.apiOptions.isMobile&&this.horizHairline.hide()},labelCategory:function(e,t){var n=this.props.apiOptions.isMobile,r=this.graphie;t+="";var i=!1,o=t.match(/^\$(.*)\$$/);o&&(t=o[1],i=!0);var s=(0!==this.props.labels[0].length,"translateX(-50%) translateX(5px) translateY(-50%) rotate(-45deg)");r.style({color:n?c.GRAY_G:"inherit",transform:n&&!o?s:"none",transformOrigin:"100%"},function(){return r.label([e,n?-.5:0],t,"below",i)})},setupCategories:function(e){var t=this,n=e,r=t.graphie,i=this.props.apiOptions.isMobile;t.props.type===m?(o.times(t.props.categories.length-1,function(n){t.setupBar({index:n,startHeight:t.state.values[n],config:e,isHistogram:!0})}),o.each(t.props.categories,function(e,o){var s=.5+o*n.barWidth;t.labelCategory(s,e);var a=6/n.scale[1];r.style({stroke:"#000",strokeWidth:i?1:2,opacity:1},function(){r.line([s,-a],[s,0])})})):o.each(t.props.categories,function(o,s){var a,l=t.state.values[s];t.props.type===d?a=t.setupBar({index:s,startHeight:l,config:e,isHistogram:!1}):t.props.type===f?a=t.setupLine(s,l,e):t.props.type===g?a=t.setupPic(s,e):t.props.type===v&&(a=t.setupDotplot(s,e));
var p=0,u=-6/n.scale[1];t.props.type!==v||i||(p=-u),t.props.type===v?s%t.props.labelInterval!==0&&s!==t.props.categories.length-1||(t.labelCategory(a,o),p*=1.5,u*=1.5):t.labelCategory(a,o),r.style({stroke:i?c.GRAY_G:"#000",strokeWidth:i?1:2,opacity:1},function(){r.line([a,p],[a,u])})})},_clampValue:function(e,t,n){return Math.max(Math.min(e,n),t)},_updateDragPrompt:function(e){var t=e.every(function(e){return 0===e});this.graphie.dragPrompt[0].style.display=t?"inline":"none"},setupBar:function(e){var t,n=this,r=this.props.apiOptions.isMobile,i=e.index,s=e.startHeight,a=e.config,l=e.isHistogram,p=this,h=p.graphie,d=a.barWidth/2;t=l?.5+i*a.barWidth+d:(r?d:.5+a.barPad)+i;var f=function(e,t){var n=h.scalePoint(0);if(a.graph.bars[e].scale(1,Math.max(r?.2:.01,t/a.scaleY),n[0],n[1]),l){var i=a.graph.dividers[e-1],o=a.graph.dividers[e];if(i){var s=Math.min(p.state.values[e-1],t);i.scale(1,Math.max(.01,s/a.scaleY),n[0],n[1])}if(o){var s=Math.min(p.state.values[e+1],t);o.scale(1,Math.max(.01,s/a.scaleY),n[0],n[1])}}};return h.style({stroke:"none",fill:r?c.BLUE_C:c.LIGHT_BLUE,opacity:1},function(){a.graph.bars[i]=h.path([[t-d,0],[t-d,a.scaleY],[t+d,a.scaleY],[t+d,0],[t-d,0]])}),l&&i>0&&h.style({stroke:"#000",strokeWidth:1,opacity:.3},function(){a.graph.dividers.push(h.path([[t-d,0],[t-d,a.scaleY]]))}),r?!function(){var e=a.scaleY/p.props.snapsPerLine;a.graph.lines[i]=u.addMaybeMobileMovablePoint(n,{coord:[t,s],constraints:[function(r,i,o){return[t,n._clampValue(Math.round(r[1]/e)*e,0,a.dimY)]}],onMoveStart:function(){a.graph.bars[i].attr({fill:c.INTERACTIVE})},onMove:function(){var e=a.graph.lines[i].coord()[1],t=o.clone(p.state.values);t[i]=e,p.setState({values:t}),p.changeAndTrack({values:t}),p._updateDragPrompt(t),f(i,e)},onMoveEnd:function(){a.graph.bars[i].attr({fill:c.BLUE_C})}}),a.graph.lines[i].state.visibleShape.wrapper.style.zIndex="1",p._updateDragPrompt(p.state.values)}():(a.graph.lines[i]=h.addMovableLineSegment({coordA:[t-d,s],coordZ:[t+d,s],snapY:a.scaleY/p.props.snapsPerLine,constraints:{constrainX:!0},normalStyle:{stroke:c.INTERACTIVE,"stroke-width":this.props.static?0:4}}),a.graph.lines[i].onMove=function(e,t){var n=this.coordA[1];(n<0||n>a.dimY)&&(n=Math.min(Math.max(n,0),a.dimY),this.coordA[1]=this.coordZ[1]=n,this.transform());var r=o.clone(p.state.values);r[i]=n,p.setState({values:r}),p.changeAndTrack({values:r}),f(i,n)}),f(i,s),t},setupLine:function(e,t,n){var r=this,i=this.props.apiOptions.isMobile,s=this,a=n,l=s.graphie,p=e+(i?.4:1);return i?!function(){var i=n.scaleY/s.props.snapsPerLine;a.graph.points[e]=u.addMaybeMobileMovablePoint(r,{coord:[p,t],constraints:[function(e,t,o){return[p,r._clampValue(Math.round(e[1]/i)*i,0,n.dimY)]}],onMove:function(){var t=a.graph.points[e].coord()[1],n=o.clone(s.state.values);n[e]=t,s.setState({values:n}),s.changeAndTrack({values:n}),s._updateDragPrompt(n)}}),s._updateDragPrompt(s.state.values),e>0&&(a.graph.lines[e]=u.addMovableLine(l,{points:[a.graph.points[e-1],a.graph.points[e]],constraints:u.MovablePoint.constraints.fixed(),normalStyle:{stroke:c.BLUE_C,"stroke-width":2},highlightStyle:{stroke:c.BLUE_C,"stroke-width":2}}))}():(a.graph.points[e]=l.addMovablePoint({coord:[p,t],constraints:{constrainX:!0},normalStyle:{fill:c.INTERACTIVE,stroke:c.INTERACTIVE},snapY:a.scaleY/s.props.snapsPerLine}),a.graph.points[e].onMove=function(t,n){n=Math.min(Math.max(n,0),a.dimY);var r=o.clone(s.state.values);return r[e]=n,s.setState({values:r}),s.changeAndTrack({values:r}),[t,n]},e>0&&(a.graph.lines[e]=l.addMovableLineSegment({pointA:a.graph.points[e-1],pointZ:a.graph.points[e],constraints:{fixed:!0},normalStyle:{stroke:"#9ab8ed","stroke-width":2}}))),p},setupDotplot:function(e,t){var n=this,r=this.graphie,i=this.props.apiOptions.isMobile;return this.setupTiledPlot(e,i?.5:1,t,function(e,t){return r.ellipse([e,t],[n.DOT_PLOT_POINT_SIZE()/r.scale[0],n.DOT_PLOT_POINT_SIZE()/r.scale[1]],{fill:c.INTERACTIVE,stroke:c.INTERACTIVE})})},setupPic:function(e,t){var n=this,r=this.graphie;return this.setupTiledPlot(e,0,t,function(e,t){var i=r.scalePoint([e,t]),o=n.props.picSize;return r.raphael.image(n.props.picUrl,i[0]-o/2,i[1]-o/2,o,o)})},setupTiledPlot:function(e,t,n,r){var i=this,s=n,a=i.graphie,l=a.pics,c=a.dotTicks,p=e+.5+s.picPad;l[e]=[],c[e]=[];var u=Math.round(s.dimY/s.scaleY)+1;return o(u).times(function(n){n-=1;var o=(n+.5)*s.scaleY,u=p-s.picBoxWidth/2,h=o+.5*s.scaleY,d=a.scalePoint([u,h+t]),f=a.mouselayer.rect(d[0],d[1],s.picBoxWidthPx,s.picBoxHeight);$(f[0]).css({fill:"#000",opacity:0,cursor:"pointer"}).on("vmousedown",function(n){n.preventDefault(),i.whichPicClicked=e,i.setPicHeight(e,h),$(document).on("vmouseup.plotTile",function(e){$(document).unbind(".plotTile")}),$(document).on("vmousemove.plotTile",function(e){e.preventDefault();var n=a.getMouseCoord(e)[1],r=Math.floor(n-t),o=Math.max(-1,Math.floor(r/s.scaleY)),l=(o+.5)*s.scaleY,c=l+.5*s.scaleY;i.setPicHeight(i.whichPicClicked,c)})}),n<0||(l[e][n]=r(p,o+t),c[e][n]=a.ellipse([p,o+t],[i.DOT_TICK_POINT_SIZE()/a.scale[0],i.DOT_TICK_POINT_SIZE()/a.scale[1]],{fill:"#dee1e3",stroke:"#dee1e3"}))}),p},setPicHeight:function(e,t){var n=o.clone(this.state.values);n[e]=t,this.drawPicHeights(n,this.state.values),this.setState({values:n}),this.changeAndTrack({values:n})},changeAndTrack:function(e){this.props.onChange(e),this.props.trackInteraction()},drawPicHeights:function(e,t){var n=this,r=n.graphie,i=r.pics,s=this.props.apiOptions.isMobile;if(s){var a=e.every(function(e){return 0===e});r.dotPrompt[0].style.display=a?"inline":"none"}o.each(i,function(i,a){o.each(i,function(i,o){var l=(o+1)*n.props.scaleY,c=l<=e[a];if(n.props.type===v){var p=l<=t[a],u=c&&!p;u&&i.animate({"stroke-width":8},75,function(){return i.animate({"stroke-width":2},75)})}$(i[0]).css({display:c?"inline":"none"}),r.dotTicks[a][o][0].style.display=c||!s?"none":"inline"})})},getUserInput:function(){return this.state.values},simpleValidate:function(e){return y.validate(this.getUserInput(),e)}}));o.extend(y,{validate:function(e,t){return a(e,t.starting)?{type:"invalid",message:null}:{type:"points",earned:a(e,t.correct)?1:0,total:1,message:null}}});var b=o.identity;e.exports={name:"plotter",displayName:"Plotter",widget:y,staticTransform:b}},function(e,t,n){"use strict";function r(e,t,n){var r=a.clone(e);r.length=t;for(var i=e.length;i<t;i++)r[i]=n;return r}var i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},o=n(17),s=n(19),a=n(18),l=n(174),c=n(71),p=n(178),u=n(193),h=n(32),d=n(64),f=n(136).widget,g=n(199).knumber,m="bar",v="line",y="pic",b="histogram",E="dotplot",T={scaleY:1,maxY:10,snapsPerLine:2},w={type:o.PropTypes.oneOf([m,v,y,b,E]),labels:o.PropTypes.arrayOf(o.PropTypes.string),categories:o.PropTypes.arrayOf(o.PropTypes.oneOfType([o.PropTypes.number,o.PropTypes.string])),scaleY:o.PropTypes.number,maxY:o.PropTypes.number,snapsPerLine:o.PropTypes.number,picSize:o.PropTypes.number,pixBoxHeight:o.PropTypes.number,picUrl:o.PropTypes.string,plotDimensions:o.PropTypes.arrayOf(o.PropTypes.number),labelInterval:o.PropTypes.number,starting:o.PropTypes.arrayOf(o.PropTypes.number),static:o.PropTypes.bool},x=function(e){return"$"+g.round(e,2)+"$"},C=o.createClass({displayName:"PlotterEditor",propTypes:w,getDefaultProps:function(){return a.extend({},T,{correct:[1],starting:[1],type:m,labels:["",""],categories:[""],picSize:30,picBoxHeight:36,picUrl:Khan.imageBase+"badges/earth-small.png",plotDimensions:[275,200],labelInterval:1})},getInitialState:function(){return{editing:"correct",pic:null,loadedUrl:null,minX:null,maxX:null,tickStep:null}},componentWillMount:function(){this.fetchPic(this.props.picUrl)},componentWillReceiveProps:function(e){this.fetchPic(e.picUrl)},fetchPic:function(e){var t=this;if(this.state.loadedUrl!==e){var n=new Image;n.src=e,n.onload=function(){t.setState({pic:n,loadedUrl:e})}}},render:function(){var e=a.contains([v,b,E],this.props.type),t=!a.contains([y,E],this.props.type),n=i({trackInteraction:function(){}},this.props);return o.createElement("div",{className:"perseus-widget-plotter-editor"},o.createElement("div",null,"Chart type:"," ",a.map([m,v,y,b,E],function(e){return o.createElement("label",{key:e},o.createElement("input",{type:"radio",name:"chart-type",checked:this.props.type===e,onChange:a.partial(this.changeType,e)}),e)},this)),o.createElement("div",null,"Labels:"," ",a.map(["x","y"],function(e,t){return o.createElement("label",{key:e},e+":",o.createElement("input",{type:"text",onChange:a.partial(this.changeLabel,t),defaultValue:this.props.labels[t]}))},this)),e&&o.createElement("div",{className:"set-from-scale-box"},o.createElement("span",{className:"categories-title"},"Set Categories From Scale"),o.createElement("div",null,o.createElement("label",null,"Tick Step:"," ",o.createElement(p,{placeholder:1,useArrowKeys:!0,value:this.state.tickStep,onChange:this.handleChangeTickStep})),o.createElement(c,null,o.createElement("p",null,"The difference between adjacent ticks."))),o.createElement("div",null,o.createElement("label",null,"Range:"," ",o.createElement(u,{placeholder:[0,10],useArrowKeys:!0,value:[this.state.minX,this.state.maxX],onChange:this.handleChangeRange}))),o.createElement("div",null,o.createElement("button",{onClick:this.setCategoriesFromScale},"Set Categories"," "))),o.createElement("div",null,o.createElement("label",null,"Label Interval:"," ",o.createElement(p,{useArrowKeys:!0,value:this.props.labelInterval,onChange:this.changeLabelInterval})),o.createElement(c,null,o.createElement("p",null,'Which ticks to display the labels for. For instance, setting this to "4" will only show every 4th label (plus the last one)'))),this.props.type===y&&o.createElement("div",null,o.createElement("label",null,"Picture:"," ",o.createElement(l,{className:"pic-url",value:this.props.picUrl,onChange:this.changePicUrl}),o.createElement(c,null,o.createElement("p",null,'Use the default picture of Earth, or insert the URL for a different picture using the "Add image" function.'))),this.state.pic&&this.state.pic.width!==this.state.pic.height&&o.createElement("p",{className:"warning"},o.createElement("b",null,"Warning"),": You are using a picture which is not square.  This means the image will get distorted. You should probably crop it to be square.")),o.createElement("div",null,o.createElement("label",null,"Categories:"," ",o.createElement(d,{ref:"categories",layout:"horizontal",options:this.props.categories,onChange:this.changeCategories}))),o.createElement("div",null,o.createElement("label",null,"Scale (y):"," ",o.createElement("input",{type:"text",onChange:this.changeScale,defaultValue:this.props.scaleY}))),o.createElement("div",null,o.createElement("label",null,"Max y:"," ",o.createElement("input",{type:"text",ref:"maxY",onChange:this.changeMax,defaultValue:this.props.maxY}))),t&&o.createElement("div",null,o.createElement("label",null,"Snaps per line:"," ",o.createElement("input",{type:"text",onChange:this.changeSnaps,defaultValue:this.props.snapsPerLine})),o.createElement(c,null,o.createElement("p",null,"Creates the specified number of divisions between the horizontal lines. Fewer snaps between lines makes the graph easier for the student to create correctly."))),o.createElement("div",null,"Editing values:"," ",a.map(["correct","starting"],function(e){return o.createElement("label",{key:e},o.createElement("input",{type:"radio",name:"editing",checked:this.state.editing===e,onChange:a.partial(this.changeEditing,e)}),e)},this),o.createElement(c,null,o.createElement("p",null,"Use this toggle to switch between editing the correct answer (what the student will be graded on) and the starting values (what the student will see plotted when they start the problem). Note: These cannot be the same."),o.createElement("p",null,"In static mode, the starting values are rendered out to the displayed widget."))),o.createElement(f,i({},n,{starting:this.props[this.state.editing],onChange:this.handlePlotterChange})))},handleChangeTickStep:function(e){this.setState({tickStep:e})},handleChangeRange:function(e){this.setState({minX:e[0],maxX:e[1]})},changeLabelInterval:function(e){this.props.onChange({labelInterval:e})},handlePlotterChange:function(e){var t={};t[this.state.editing]=e.values,this.props.onChange(t)},changeType:function(e){var t;e===b?(t=[x(0)].concat(this.props.categories),this.props.onChange({type:e,categories:t})):this.props.type===b?(t=this.props.categories.slice(1),this.props.onChange({type:e,categories:t})):this.props.onChange({type:e}),t&&(s.findDOMNode(this.refs.categories).value=t.join(", "))},changeLabel:function(e,t){var n=a.clone(this.props.labels);n[e]=t.target.value,this.props.onChange({labels:n})},changePicUrl:function(e){var t=h.getRealImageUrl(e);this.props.onChange({picUrl:t})},changeCategories:function(e){var t=e.length;this.props.type===b&&t--;var n=this.props.scaleY;this.props.onChange({categories:e,correct:r(this.props.correct,t,n),starting:r(this.props.starting,t,n)})},changeScale:function(e){var t=this.props.scaleY,n=+e.target.value||T.scaleY,r=function(e){return e*n/t},i=r(this.props.maxY);this.props.onChange({scaleY:n,maxY:i,correct:a.map(this.props.correct,r),starting:a.map(this.props.starting,r)}),s.findDOMNode(this.refs.maxY).value=i},changeMax:function(e){this.props.onChange({maxY:+e.target.value||T.maxY})},changeSnaps:function(e){this.props.onChange({snapsPerLine:+e.target.value||T.snapsPerLine})},changeEditing:function(e){this.setState({editing:e})},setCategoriesFromScale:function(){var e,t=this.state.tickStep||1,n=this.state.minX||0,r=this.state.maxX||0,i=Math.floor((r-n)/t)*t;e=this.props.type===b||this.props.type===E?a.range(0,i+t,t):a.range(t,i+t,t),e=a.map(e,function(e){return e+n}),e=a.map(e,x),this.changeCategories(e),s.findDOMNode(this.refs.categories).value=e.join(", ")},serialize:function(){var e=a.pick(this.props,"correct","starting","type","labels","categories","scaleY","maxY","snapsPerLine","labelInterval");return this.props.type===y&&(e.picUrl=this.props.picUrl),e}});e.exports=C},function(e,t,n){"use strict";var r=n(17),i=n(124).molecule,o=r.createClass({displayName:"Separator",propTypes:{data:r.PropTypes.any,index:r.PropTypes.number},componentDidMount:function(){this.drawArrow()},componentDidUpdate:function(){this.drawArrow()},arrowLength:100,drawArrow:function(){var e=this.refs["arrowCanvas"+this.props.index],t=e.getContext("2d");t.clearRect(0,0,e.width,e.height);var n=new Path2D;t.strokeStyle="rgb(0,0,0)",t.lineWidth=1.2,t.lineCap="round";var r=5;n.moveTo(r,e.height/2),n.lineTo(e.width-r,e.height/2),n.moveTo(e.width-2*r,e.height/2-r),n.lineTo(e.width-r,e.height/2),n.moveTo(e.width-2*r,e.height/2+r),n.lineTo(e.width-r,e.height/2),t.stroke(n)},render:function(){return r.createElement("div",{className:"arrow-container"},r.createElement("div",{className:"above-text"},this.props.data.topText),r.createElement("canvas",{height:"30",id:"arrowCanvas"+this.props.index,ref:"arrowCanvas"+this.props.index,width:this.arrowLength},"Reaction arrow pointing to the right."),r.createElement("div",{className:"below-text"},this.props.data.bottomText))}}),s=r.createClass({displayName:"ReactionDiagramWidget",propTypes:{rotationAngle:r.PropTypes.arrayOf(r.PropTypes.number),separators:r.PropTypes.arrayOf(r.PropTypes.object),smiles:r.PropTypes.arrayOf(r.PropTypes.string),widgetId:r.PropTypes.string},getDefaultProps:function(){return{smiles:[],rotationAngle:[],separators:[]}},simpleValidate:function(){return{type:"points",earned:0,total:0,message:null}},getUserInput:function(){return[]},validate:function(e,t){return{type:"points",earned:0,total:0,message:null}},focus:function(){return!0},render:function(){var e=this;return r.createElement("div",{className:"reaction",ref:"reaction"},this.props.smiles.map(function(t,n){var s=e.props.widgetId+"-"+n;return r.createElement("div",{key:s,className:"molecule-container"},r.createElement(i,{id:s,rotationAngle:e.props.rotationAngle[n],smiles:t}),n===e.props.smiles.length-1?null:r.createElement(o,{data:e.props.separators[n],index:n}))}))}});e.exports={name:"reaction-diagram",displayName:"Chemical reaction",hidden:!1,widget:s}},function(e,t,n){"use strict";var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},i=n(17),o=n(175),s=n(176),a=n(178),l=n(179),c=i.createClass({displayName:"ReactionDiagramWidgetEditor",propTypes:{rotationAngle:i.PropTypes.arrayOf(i.PropTypes.number),separators:i.PropTypes.arrayOf(i.PropTypes.object),smiles:i.PropTypes.arrayOf(i.PropTypes.string)},mixins:[o,s],getDefaultProps:function(){return{smiles:["",""],rotationAngle:[0,0],separators:[{type:"right",topText:"",bottomText:""}]}},updateMolecule:function(e){return function(t){var n=[].concat(this.props.smiles);n[e]=t,this.change({smiles:n})}.bind(this)},updateRotation:function(e){return function(t){var n=[].concat(this.props.rotationAngle);n[e]=t,this.change({rotationAngle:n})}.bind(this)},updateSeparators:function(e,t){var n=this;return function(i){var o=n.props.separators.map(function(e){return r({},e)});o[e][t]=i,n.change({separators:o})}},render:function(){return i.createElement("div",null,i.createElement("div",null,i.createElement("label",null,"LHS SMILES: ",i.createElement(l,{onChange:this.updateMolecule(0),value:this.props.smiles[0]}))),i.createElement("div",null,i.createElement("label",null,"LHS Rotation (deg): ",i.createElement(a,{onChange:this.updateRotation(0),value:this.props.rotationAngle[0]}))),i.createElement("div",null,i.createElement("label",null,"RHS SMILES: ",i.createElement(l,{onChange:this.updateMolecule(1),value:this.props.smiles[1]}))),i.createElement("div",null,i.createElement("label",null,"RHS Rotation (deg): ",i.createElement(a,{onChange:this.updateRotation(1),value:this.props.rotationAngle[1]}))),i.createElement("div",null,i.createElement("label",null,"Top of arrow text: ",i.createElement(l,{onChange:this.updateSeparators(0,"topText"),value:this.props.separators[0].topText}))),i.createElement("div",null,i.createElement("label",null,"Bottom of arrow text: ",i.createElement(l,{onChange:this.updateSeparators(0,"bottomText"),value:this.props.separators[0].bottomText}))))}});e.exports=c},function(e,t,n){"use strict";var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},i=n(17),o=n(18),s=n(5).Options,a=n(175),l=n(35),c=l.iconOk,p=n(36),u=n(29),h=n(6),d=i.createClass({displayName:"Sequence",mixins:[a],propTypes:{apiOptions:s.propTypes,json:i.PropTypes.arrayOf(i.PropTypes.shape({content:i.PropTypes.string,images:i.PropTypes.object,widgets:i.PropTypes.object})),trackInteraction:i.PropTypes.func.isRequired},getDefaultProps:function(){return{json:[{content:"",widgets:{},images:{}}]}},getInitialState:function(){return{visible:1}},shouldComponentUpdate:function(e,t){return e!==this.props||t!==this.state},render:function(){var e=this,t=i.createElement(p,r({},c,{style:{color:"green"}})),n=o.chain(this.props.json).first(this.state.visible).map(function(e,t){return"[["+h.snowman+" group "+t+"]]"}).join("\n\n").value(),s={};return o.each(this.props.json,function(n,r){var i="group "+r;s[i]={type:"group",graded:!0,version:{major:0,minor:0},options:o.extend({},n,{icon:r<e.state.visible-1?t:null})}}),i.createElement("div",{className:"perseus-sequence"},i.createElement(u,{ref:"renderer",content:n,widgets:s,onInteractWithWidget:this._handleInteraction,apiOptions:this.props.apiOptions}))},_handleInteraction:function(e){var t=parseInt(e.split(" ")[1]);if(t===this.state.visible-1){var n=this.refs.renderer.getWidgetInstance("group "+t),r=n.simpleValidate();"points"===r.type&&r.total===r.earned&&(this.setState({visible:this.state.visible+1}),this.props.trackInteraction({visible:this.state.visible+1}))}}}),f=function(e,t){var n=e.json;o.isArray(n)||(n=[n]);var r=o.map(n,function(e){return t(e)});return o.extend({},e,{json:r})};e.exports={name:"sequence",displayName:"Graded Sequence",widget:d,traverseChildWidgets:f,tracking:"all"}},function(e,t,n){"use strict";var r=n(17),i=n(18),o=n(5).Options,s=n(11),a=n(35),l=a.iconCircleArrowDown,c=a.iconCircleArrowUp,p=a.iconPlus,u=a.iconTrash,h=n(36),d=r.createClass({displayName:"StepControlButton",render:function(){var e=this;return r.createElement("a",{href:"#",className:"step-control-button simple-button simple-button--small orange",onClick:function(t){t.preventDefault(),e.props.onClick()}},r.createElement(h,this.props.icon))}}),f=r.createClass({displayName:"SequenceEditor",propTypes:{json:r.PropTypes.arrayOf(r.PropTypes.shape({content:r.PropTypes.string,widgets:r.PropTypes.object,images:r.PropTypes.object})),apiOptions:o.propTypes,onChange:r.PropTypes.func.isRequired},getDefaultProps:function(){return{json:[{content:"",widgets:{},images:{}}]}},render:function(){var e=this;return r.createElement("div",{className:"perseus-sequence-editor"},i.map(this.props.json,function(t,n){return r.createElement("div",{key:n},"Step ",n+1,r.createElement("div",{style:{display:"inline-block",float:"right"}},n+1<e.props.json.length&&r.createElement(d,{icon:l,onClick:function(){e._handleMoveStepLater(n)}}),n>0&&r.createElement(d,{icon:c,onClick:function(){e._handleMoveStepEarlier(n)}}),r.createElement(d,{icon:u,onClick:function(){var t="Are you sure you want to remove step "+(n+1)+"?";confirm(t)&&e._handleRemoveStep(n)}}),r.createElement(d,{icon:p,onClick:function(){e._handleAddStepAfter(n)}})),r.createElement(s,{ref:"editor"+n,apiOptions:e.props.apiOptions,content:t.content,widgets:t.widgets,images:t.images,widgetEnabled:!0,immutableWidgets:!1,onChange:i.partial(e._handleEditorChange,n)}))}))},_handleEditorChange:function(e,t){var n=i.clone(this.props.json);n[e]=i.extend({},n[e],t),this.props.onChange({json:n})},serialize:function(){var e=this;return{json:i.times(this.props.json.length,function(t){return e.refs["editor"+t].serialize()})}},_handleMoveStepEarlier:function(e){if(0!==e){var t=i.clone(this.props.json),n=t[e];t.splice(e,1),t.splice(e-1,0,n),this.props.onChange({json:t})}},_handleMoveStepLater:function(e){var t=i.clone(this.props.json);if(e+1!==t.length){var n=t[e];t.splice(e,1),t.splice(e+1,0,n),this.props.onChange({json:t})}},_handleAddStepAfter:function(e){var t=i.clone(this.props.json),n=e>=0?{widgets:t[e].widgets}:{};t.splice(e+1,0,n),this.props.onChange({json:t})},_handleRemoveStep:function(e){var t=i.clone(this.props.json);t.splice(e,1),this.props.onChange({json:t})}});e.exports=f},function(e,t,n){"use strict";var r=n(71),i=n(17),o=n(19),s=n(18),a=n(175),l=n(5).Options,c=n(165).assert,p=n(66),u=p.Path,h=p.Arc,d=(p.Circle,p.Label),f=p.Line,g=p.MovablePoint,m=p.MovableLine,v=n(178),y=n(195),b=(n(6).seededRNG,n(6)),E=n(199).number,T=n(190),w=n(88),x=400,C=1e3,S=i.createClass({displayName:"Histogram",propTypes:{data:i.PropTypes.arrayOf(i.PropTypes.number),xAxisLabel:i.PropTypes.string,yAxisLabel:i.PropTypes.string,box:i.PropTypes.arrayOf(i.PropTypes.number)},getDefaultProps:function(){return{data:null,xAxisLabel:"Proportion (%)",yAxisLabel:"Number of times seen",box:[x,x]}},getInitialState:function(){return{threshold:this._getInitialThreshold(this._range())}},componentWillReceiveProps:function(e){var t=this._range(),n=this._range(e);b.deepEq(t,n)||this.setState({threshold:this._getInitialThreshold(n)})},_renderThresholdLine:function(){var e=this,t=[0,this._range()[1][1]],n=s.map(t,function(t){return[e.state.threshold,t]}),r=function(e,t){return i.createElement(g,{key:t,static:!0,coord:e,normalStyle:{stroke:"none",fill:"none"}})};return i.createElement(m,{onMove:this.handleMouseInteraction},s.map(n,r))},_renderCircle:function(){var e=this,t=this.props.data,n=s.reduce(t,function(e,t){return e+t},0),r=s.reduce(t,function(t,n,r){return null!=e.state.threshold&&r<=e.state.threshold?t+n:t},0),o=r/n,a=1e-5,l=20,c=[this.props.box[0]-1.5*l,1.5*l],p=function(){var e={key:"below",center:c,radius:l,startAngle:0,endAngle:o<1?360*o:360-a,sector:1!==o,unscaled:!0,style:{fill:T.LIGHT_RED,stroke:T.RED}};return i.createElement(h,e)},u=function(){var e={key:"above",center:c,radius:l,startAngle:o>0?360*o:a,endAngle:360,sector:0!==o,unscaled:!0,style:{fill:T.LIGHT_BLUE,stroke:T.BLUE}};return i.createElement(h,e)},f=this._range()[0],g=Math.min(Math.max(this.state.threshold,f[0]),f[1]).toFixed(2),m=function(){var e={key:"label",coord:[c[0],c[1]+1.5*l],text:r+" of "+n+" results below "+g+"%",direction:"center",tex:!1,unscaled:!0,style:{fontSize:"12px"}};return i.createElement(d,e)};return[o>0&&p(),o<1&&u(),m()]},_renderData:function(){var e=this,t=this.props.data,n=(this._range(),1),r=function(t,r){if(t){var o=null!=e.state.threshold&&r<=e.state.threshold,s={fill:o?T.LIGHT_RED:T.LIGHT_BLUE,stroke:o?T.RED:T.BLUE},a=[[r,0],[r,t],[r+n,t],[r+n,0]];return i.createElement(u,{key:r,coords:a,style:s})}};return s.map(t,r)},render:function(){var e=this.props.data,t=this._range(),n={xAxisLabel:this.props.xAxisLabel,yAxisLabel:this.props.yAxisLabel,box:this.props.box,range:t,data:e,scale:[b.scaleFromExtent(t[0],this.props.box[0]),b.scaleFromExtent(t[1],this.props.box[1])]},r={stroke:"#000",strokeWidth:1,opacity:1},o=[t[0][0],0],s=[t[0][1],0];return i.createElement(p,{box:n.box,range:n.range,options:n,setup:this._setupGraphie,onMouseMove:this.handleMouseInteraction,onMouseDown:this.handleMouseInteraction,setDrawingAreaAvailable:this.props.setDrawingAreaAvailable},i.createElement(f,{start:o,end:s,style:r}),e&&this._renderData(),e&&this._renderCircle(),e&&this._renderThresholdLine())},_setupGraphie:function(e,t){var n=t.data,r=t.range,i=t.scale,o=r[0][1]-r[0][0],a=r[1][1]-0,l=20,c=Math.ceil(a/l);if(s.each(s.range(0,r[1][1],c),function(t){n&&e.label([r[0][0],t],w.roundToApprox(t,2),"left",!0),e.line([r[0][0],t],[r[0][1],t],{stroke:"#000",strokeWidth:1,opacity:.3})}),n){var p=15,u=Math.ceil(o/p);s.each(s.range(r[0][0],r[0][1],u),function(t){e.label([t,0],E.round(t,2),"below",!0);var n=8;e.line([t,0],[t,-n/i[1]],{stroke:"#000",strokeWidth:1})})}var h={stroke:"#000",strokeWidth:2,opacity:1},d=[r[0][0],0],f=[r[0][0],r[1][1]];e.line(d,f,h);var g=r[0][0]+o/2,m=n?25:0;e.label([g,-m/i[1]],t.xAxisLabel,"below",!1).css("font-weight","bold");var v=0+a/2,y=n?55:28;e.label([r[0][0]-y/i[0],v],t.yAxisLabel,"center",!1).css("font-weight","bold").css("-webkit-transform","rotate(-90deg)")},handleMouseInteraction:function(e){this.setState({threshold:e[0]})},_range:function(e){var t=[[0,100],[-1,10]];return e=e||this.props,e.data?this._getRangeForData(e.data):t},_getRangeForData:function(e){var t=10,n=s.indexOf(e,s.find(e,function(e){return e>0})),r=Math.max(0,n-t),i=s.lastIndexOf(e,s.last(s.filter(e,function(e){return e>0}))),o=Math.min(101,i+1+t),a=-1,l=s.max(e);return[[r,o],[a,l]]},_getInitialThreshold:function(e){var t=e[0];return t[0]+(t[1]-t[0])/3}}),P=i.createClass({displayName:"Simulator",mixins:[a],propTypes:{apiOptions:l.propTypes,data:i.PropTypes.arrayOf(i.PropTypes.number),numTrials:i.PropTypes.number,proportionLabel:i.PropTypes.string,proportionOrPercentage:i.PropTypes.string,randomSeed:i.PropTypes.number,sampleSize:i.PropTypes.number,trackInteraction:i.PropTypes.func.isRequired,userProportion:i.PropTypes.number,xAxisLabel:i.PropTypes.string,yAxisLabel:i.PropTypes.string},getInitialState:function(){return{invalidInput:!1}},getDefaultProps:function(){return{data:null,userProportion:null,sampleSize:null,numTrials:null,randomSeed:0,xAxisLabel:"Proportion (%)",yAxisLabel:"Number of times seen",proportionLabel:"Underlying proportion",proportionOrPercentage:"proportion",apiOptions:l.defaults}},componentWillMount:function(){null!=this.props.randomSeed&&(this.generateNumber=b.seededRNG(this.props.randomSeed))},componentWillReceiveProps:function(e){e.randomSeed!==this.props.randomSeed&&(this.generateNumber=b.seededRNG(e.randomSeed))},render:function(){var e=this,t={marginLeft:"5px"},n="0px 0px 0px 2px rgba(255, 165, 0, 1)",o=s.extend({},t,{WebkitBoxShadow:n,MozBoxShadow:n,boxShadow:n,transition:"all 0.15s"}),a=s.extend({},t,{transition:"all 0.15s"}),l=this.state.invalidInput?o:a,c=this.props.apiOptions.staticRender?y:v,p=i.createElement("div",null,i.createElement(c,{ref:"userProportion",style:l,value:this.calculateDisplayProportion(),checkValidity:this.checkProportionValidity,disabled:this.props.apiOptions.readOnly,onChange:this.handleUserProportionChange,onFocus:function(){return e.props.onFocus(["userProportion"])},onBlur:function(){return e.props.onBlur(["userProportion"])}}),i.createElement(r,null,i.createElement("p",null,"This controls the proportion or percentage that will be used in your simulation."))),u=i.createElement("div",null,i.createElement(c,{ref:"sampleSize",style:l,value:this.props.sampleSize,checkValidity:function(e){return e>=0},disabled:this.props.apiOptions.readOnly,onChange:this.handleSampleSizeChange,onFocus:function(){return e.props.onFocus(["sampleSize"])},onBlur:function(){return e.props.onBlur(["sampleSize"])}}),i.createElement(r,null,i.createElement("p",null,"This controls the sample size that will be used in your simulation. For example, if you set this to 100, then for each trial, responses from 100 participants will be simulated."))),h=i.createElement("div",{style:{textAlign:"right"}},i.createElement("b",null,this.props.numTrials),i.createElement(r,null,i.createElement("p",null,"This is the number of trials used in the simulation. For example, if set to 50, then the survey will be conducted 50 times."))),d=function(e){var t=i.createElement("thead",null,i.createElement("tr",null,i.createElement("th",null,"Parameter"),i.createElement("th",null,"Value"))),n=i.createElement("tbody",null,s.map(e,function(e,t){return i.createElement("tr",{key:t},i.createElement("td",null,e.title),i.createElement("td",null,e.value))}));return i.createElement("table",null,t,n)},f=[{title:this.props.proportionLabel+":",value:p},{title:"Sample size:",value:u},{title:"Number of trials:",value:h}],g={margin:"20px 0"},m=i.createElement("button",{className:"simple-button",style:g,disabled:this.props.apiOptions.readOnly,onClick:this.handleRunSimulation},i18n._("Run simulation")),b={paddingBottom:this.props.data?40:0},E=i.createElement("div",{style:b},i.createElement(S,{data:this.props.data,xAxisLabel:this.props.xAxisLabel,yAxisLabel:this.props.yAxisLabel,setDrawingAreaAvailable:this.props.apiOptions.setDrawingAreaAvailable}));return i.createElement("div",null,d(f),m,E)},calculateDisplayProportion:function(){var e=this.props.userProportion;return"percentage"===this.props.proportionOrPercentage?Math.round(100*e):e},checkProportionValidity:function(e){return e>=0&&"proportion"===this.props.proportionOrPercentage&&e<=1||"percentage"===this.props.proportionOrPercentage&&e<=100},handleUserProportionChange:function(e,t){var n;n="percentage"===this.props.proportionOrPercentage?e/100:e,null!=n&&(n=Math.min(1,Math.max(0,n))),this.props.onChange({userProportion:n},t)},handleSampleSizeChange:function(e,t){null!=e&&(e=Math.min(C,Math.max(0,Math.floor(e)))),this.props.onChange({sampleSize:e},t)},handleRunSimulation:function(){return null==this.props.numTrials||null==this.props.userProportion||null==this.props.sampleSize?void this.setState({invalidInput:!0}):(this.setState({invalidInput:!1}),this.props.onChange({data:this.generateData()}),void this.props.trackInteraction())},generateData:function(e){var t=this;e=e||this.props;var n=function(e,n,r){var i=function(){return t.generateNumber()<r},o=s.times(101,function(){return 0});return s.times(n,function(){var t=s.times(e,i),n=s.filter(t,s.identity).length,r=Math.floor(100*n/e);o[r]++}),o};return n(e.sampleSize,e.numTrials,e.userProportion)},getInputPaths:function(){return[["userProportion"],["sampleSize"]]},focus:function(){var e=s.head(this.getInputPaths());return this.focusInputPath(e),!0},focusInputPath:function(e){c(e.length>0);var t=s.head(e),n=this.refs[t];n.focus()},blurInputPath:function(e){c(e.length>0);var t=s.head(e),n=this.refs[t];n.blur();
},getDOMNodeForPath:function(e){c(e.length>0);var t=s.head(e);return o.findDOMNode(this.refs[t])},getGrammarTypeForPath:function(e){return c(e.length>0),"number"},setInputValue:function(e,t,n){c(e.length>0);var r=s.head(e),i=r.charAt(0).toUpperCase()+r.slice(1),o="handle"+i+"Change";this[o](t,n)},getUserInput:function(){return null},simpleValidate:function(e){return P.validate(this.getUserInput(),e)}});s.extend(P,{validate:function(e,t){return{type:"points",earned:0,total:0,message:null}}});var k=function(e){var t=s.clone(e);return t.randomSeed=e.problemNum,t};e.exports={name:"simulator",displayName:"Simulator",widget:P,transform:k}},function(e,t,n){"use strict";var r=n(17),i=n(18),o=n(175),s=n(176),a=n(71),l=n(178),c=5e3,p=r.createClass({displayName:"SimulatorEditor",mixins:[o,s],propTypes:{xAxisLabel:r.PropTypes.string,yAxisLabel:r.PropTypes.string,numTrials:r.PropTypes.number,proportionLabel:r.PropTypes.string,proportionOrPercentage:r.PropTypes.string},getDefaultProps:function(){return{xAxisLabel:"Proportion (%)",yAxisLabel:"Number of times seen",numTrials:100,proportionLabel:"Underlying proportion",proportionOrPercentage:"proportion"}},render:function(){return r.createElement("div",{className:"perseus-widget-simulator"},r.createElement("div",null,i18n._("X-Axis Label"),":",r.createElement("input",{type:"text",className:"graph-settings-axis-label",value:this.props.xAxisLabel,onChange:i.partial(this.handleTargetValueChange,"xAxisLabel")})),r.createElement("div",null,i18n._("Y-Axis Label"),":",r.createElement("input",{type:"text",className:"graph-settings-axis-label",value:this.props.yAxisLabel,onChange:i.partial(this.handleTargetValueChange,"yAxisLabel")})),r.createElement("div",null,i18n._('"True Proportion" Label'),":",r.createElement("input",{type:"text",className:"graph-settings-axis-label",value:this.props.proportionLabel,onChange:i.partial(this.handleTargetValueChange,"proportionLabel")}),r.createElement(a,null,r.createElement("p",null,'This text will be displayed next to the box in which the user enters the sample proportion for their simulation. For example, if your question is about surveying for approval ratings, you might want this to say "Sample approval rating".'))),r.createElement("div",null,i18n._("Proportion or Percentage"),":",r.createElement("select",{className:"perseus-widget-dropdown",value:this.props.proportionOrPercentage,onChange:i.partial(this.handleTargetValueChange,"proportionOrPercentage")},r.createElement("option",{key:"proportion",value:"proportion"},"Proportion"),r.createElement("option",{key:"percentage",value:"percentage"},"Percentage")),r.createElement(a,null,r.createElement("p",null,"Do you want the user to describe their simulation in terms of a proportion or a percentage?"))),r.createElement("div",null,i18n._("Number of trials"),":",r.createElement(l,{value:this.props.numTrials,checkValidity:function(e){return e>=0&&e<=c},onChange:this.change("numTrials")}),r.createElement(a,null,r.createElement("p",null,"This controls the number of trials used in the simulation. For example, if you set this to 50, then the survey will be conducted 50 times. Warning: setting this too high (i.e., greater than 5000 or so) will freeze the page."))))},handleTargetValueChange:function(e,t){this.change(e,t.target.value)}});e.exports=p},function(e,t,n){"use strict";var r=n(17),i=n(18),o=n(196),s=n(5).Options,a=n(6).shuffle,l="horizontal",c="vertical",p=r.createClass({displayName:"Sorter",propTypes:{apiOptions:s.propTypes,correct:r.PropTypes.array,layout:r.PropTypes.oneOf([l,c]),onChange:r.PropTypes.func,padding:r.PropTypes.bool,problemNum:r.PropTypes.number,trackInteraction:r.PropTypes.func.isRequired},getDefaultProps:function(){return{correct:[],layout:l,padding:!0,problemNum:0,onChange:function(){}}},render:function(){var e=a(this.props.correct,this.props.problemNum,!0),t=this.props.apiOptions.isMobile?8:5;return r.createElement("div",{className:"perseus-widget-sorter perseus-clearfix"},r.createElement(o,{options:e,layout:this.props.layout,margin:t,padding:this.props.padding,onChange:this.handleChange,ref:"sortable"}))},handleChange:function(e){this.props.onChange(e),this.props.trackInteraction()},getUserInput:function(){return{options:this.refs.sortable.getOptions()}},simpleValidate:function(e){return p.validate(this.getUserInput(),e)}});i.extend(p,{validate:function(e,t){var n=i.isEqual(e.options,t.correct);return{type:"points",earned:n?1:0,total:1,message:null}}}),e.exports={name:"sorter",displayName:"Sorter",widget:p}},function(e,t,n){"use strict";var r=n(17),i=n(18),o=n(71),s=n(39),a=n(64),l="horizontal",c="vertical",p=r.createClass({displayName:"SorterEditor",propTypes:{correct:r.PropTypes.array,layout:r.PropTypes.oneOf([l,c]),padding:r.PropTypes.bool},getDefaultProps:function(){return{correct:["$x$","$y$","$z$"],layout:l,padding:!0}},render:function(){var e=this;return r.createElement("div",null,r.createElement("div",null," ","Correct answer:"," ",r.createElement(o,null,r.createElement("p",null,"Enter the correct answer (in the correct order) here. The preview on the right will have the cards in a randomized order, which is how the student will see them."))),r.createElement(a,{options:this.props.correct,onChange:function(t,n){e.props.onChange({correct:t},n)},layout:this.props.layout}),r.createElement("div",null,r.createElement("label",null," ","Layout:"," ",r.createElement("select",{value:this.props.layout,onChange:this.onLayoutChange},r.createElement("option",{value:l},"Horizontal"),r.createElement("option",{value:c},"Vertical"))),r.createElement(o,null,r.createElement("p",null,"Use the horizontal layout for short text and small images. The vertical layout is best for longer text and larger images."))),r.createElement("div",null,r.createElement(s,{label:"Padding:",padding:this.props.padding,onChange:this.props.onChange}),r.createElement(o,null,r.createElement("p",null,"Padding is good for text, but not needed for images."))))},onLayoutChange:function(e){this.props.onChange({layout:e.target.value})},serialize:function(){return i.pick(this.props,"correct","layout","padding")}});e.exports=p},function(e,t,n){"use strict";var r=n(17),i=n(19),o=n(18),s=n(195),a=n(29),l=n(6),c=n(5).Options,p=n(46),u=n(165).assert,h=function(e,t){return[""+e,""+t]},d=function(){return h(0,0)},f=function(e){return u(o.isArray(e)&&2===e.length),+e[0]},g=function(e){return u(o.isArray(e)&&2===e.length),+e[1]},m=function(e){var t=f(e),n=g(e);return"answer"+t+","+n},v=r.createClass({displayName:"Table",propTypes:{answers:r.PropTypes.arrayOf(r.PropTypes.arrayOf(r.PropTypes.string)),editableHeaders:r.PropTypes.bool,Editor:r.PropTypes.func,headers:r.PropTypes.arrayOf(r.PropTypes.string),trackInteraction:r.PropTypes.func.isRequired},getDefaultProps:function(){var e=4,t=1,n=o(e).times(function(){return l.stringArrayOfSize(t)});return{apiOptions:c.defaults,headers:[""],editableHeaders:!1,rows:e,columns:t,answers:n}},_getRows:function(){return this.props.answers.length},_getColumns:function(){return this.props.answers[0].length},render:function(){var e,t=this,n=this._getRows(),i=this._getColumns(),l=this.props.headers;return e=this.props.apiOptions.staticRender?s:"input",r.createElement("table",{className:"perseus-widget-table-of-values non-markdown"},r.createElement("thead",null,r.createElement("tr",null,o.map(l,function(e,n){return t.props.editableHeaders?r.createElement("th",{key:n},r.createElement(t.props.Editor,{ref:"columnHeader"+n,apiOptions:t.props.apiOptions,content:e,widgetEnabled:!1,onChange:o.partial(t.onHeaderChange,n)})):r.createElement("th",{key:n},r.createElement(a,{content:e}))}))),r.createElement("tbody",null,o(n).times(function(n){return r.createElement("tr",{key:n},o(i).times(function(i){return r.createElement("td",{key:i},r.createElement(e,{ref:m(h(n,i)),type:"text",value:t.props.answers[n][i],disabled:t.props.apiOptions.readOnly,onFocus:o.partial(t._handleFocus,h(n,i)),onBlur:o.partial(t._handleBlur,h(n,i)),onChange:o.partial(t.onValueChange,n,i)}))}))})))},getUserInput:function(){return o.map(this.props.answers,o.clone)},onValueChange:function(e,t,n){var r=o.map(this.props.answers,o.clone);r[e][t]=n.target.value,this.props.onChange({answers:r}),this.props.trackInteraction()},onHeaderChange:function(e,t){var n=this.props.headers.slice();n[e]=t.content,this.props.onChange({headers:n})},simpleValidate:function(e){return v.validate(this.getUserInput(),e)},_handleFocus:function(e){this.props.onFocus(e)},_handleBlur:function(e){this.props.onBlur(e)},focus:function(){return this.focusInputPath(d()),!0},focusInputPath:function(e){var t=m(e),n=this.refs[t];this.props.apiOptions.staticRender?n.focus():i.findDOMNode(n).focus()},blurInputPath:function(e){var t=m(e),n=this.refs[t];this.props.apiOptions.staticRender?n.blur():i.findDOMNode(n).blur()},getDOMNodeForPath:function(e){var t=m(e);return i.findDOMNode(this.refs[t])},getInputPaths:function(){var e=this._getRows(),t=this._getColumns(),n=[];return o(e).times(function(e){o(t).times(function(t){var r=h(e,t);n.push(r)})}),n},getGrammarTypeForPath:function(e){return"number"},setInputValue:function(e,t,n){var r=f(e),i=g(e),s=o.map(this.props.answers,o.clone);s[r][i]=t,this.props.onChange({answers:s},n)}});o.extend(v,{validate:function(e,t){var n=function(e){return o.filter(e,function(e){return o.some(e,o.identity)})},r=n(t.answers),i=n(e),s=o.some(i,function(e){return o.some(e,function(e){return""===e})});if(s||!i.length)return{type:"invalid",message:null};if(i.length!==r.length)return{type:"points",earned:0,total:1,message:null};var a=p.number.createValidatorFunctional,l=null,c=o.every(r,function(e){var t;for(t=0;t<i.length;t++){var n=i[t],r=o.every(n,function(t,n){var r=e[n],i=a(r,{simplify:!0}),o=i(t);return o.message&&(l=o.message),o.correct});if(r)return i.splice(t,1),!0}return!1});return{type:"points",earned:c?1:0,total:1,message:l}}});var y=function(e){var t=e.answers.length,n=e.answers[0].length,r=o(t).times(function(){return l.stringArrayOfSize(n)});return o.extend({},e,{answers:r})};e.exports={name:"table",displayName:"Table of values",accessible:!0,widget:v,transform:y}},function(e,t,n){"use strict";var r=n(17),i=n(19),o=n(18),s=n(6),a=n(71),l=n(178),c=n(11),p=n(146).widget,u=r.createClass({displayName:"TableEditor",propTypes:{rows:r.PropTypes.number,columns:r.PropTypes.number,headers:r.PropTypes.arrayOf(r.PropTypes.string),answers:r.PropTypes.arrayOf(r.PropTypes.arrayOf(r.PropTypes.string))},getDefaultProps:function(){var e=4,t=1,n=o(e).times(function(){return s.stringArrayOfSize(t)});return{headers:[""],rows:e,columns:t,answers:n}},focus:function(){i.findDOMNode(this.refs.numberOfColumns).focus()},render:function(){var e=this,t=o.pick(this.props,"headers","answers","onChange","apiOptions");return o.extend(t,{editableHeaders:!0,Editor:c,onFocus:function(){},onBlur:function(){},trackInteraction:function(){}}),r.createElement("div",null,r.createElement("div",{className:"perseus-widget-row"},r.createElement("label",null,"Number of columns:"," ",r.createElement(l,{ref:"numberOfColumns",value:this.props.columns,onChange:function(t){t&&e.onSizeInput(e.props.rows,t)},useArrowKeys:!0}))),r.createElement("div",{className:"perseus-widget-row"},r.createElement("label",null,"Number of rows:"," ",r.createElement(l,{ref:"numberOfRows",value:this.props.rows,onChange:function(t){t&&e.onSizeInput(t,e.props.columns)},useArrowKeys:!0}))),r.createElement("div",null," ","Table of answers:"," ",r.createElement(a,null,r.createElement("p",null,"The student has to fill out all cells in the table.  For partially filled tables create a table using the template, and insert text input boxes as desired."))),r.createElement("div",null,r.createElement(p,t)))},onSizeInput:function(e,t){function n(e){i<=a?e.length=i:o(i-a).times(function(){e.push("")})}var r=+e||0,i=+t||0;r=Math.min(Math.max(1,r),30),i=Math.min(Math.max(1,i),6);var a=this.props.columns,l=this.props.rows,c=this.props.answers;r<=l?c.length=r:o(r-l).times(function(){c.push(s.stringArrayOfSize(a))});var p=this.props.headers;n(p),o.each(c,n),this.props.onChange({rows:r,columns:i,answers:c,headers:p})},serialize:function(){var e=o.pick(this.props,"headers","rows","columns");return o.extend({},e,{answers:o.map(this.props.answers,o.clone)})}});e.exports=u},function(e,t,n){"use strict";function r(e,t){return m.object(m.map(e,function(e,n){return[n,e[t]]}))}function i(e){return e.constraints.fixed?H.DYNAMIC:H.INTERACTIVE}function o(e,t){var n=t[0][1]-t[0][0],r=t[1][1]-t[1][0];return e*Math.max(n,r)/20}function s(e,t,n){var r=B.subtract(e,t),i=B.scale(r,n),o=B.add(t,i);return o}function a(e){return String(W.roundTo(9,e))}function l(e){var t=W.toFraction(e,F.DEFAULT_TOLERANCE);return 1===t[1]?a(e):a(t[0])+"/"+a(t[1])}function c(e){return[f.createElement(T,null,"("),a(e[0]),f.createElement(T,null,", {}"),a(e[1]),f.createElement(T,null,")")]}function p(e){return[f.createElement(T,null,"\\langle"),a(e[0]),f.createElement(T,null,", {}"),a(e[1]),f.createElement(T,null,"\\rangle")]}function u(e){return a(e)+P}function h(e,t){return e=m.clone(e).sort(z.compare),t=m.clone(t).sort(z.compare),m.all(m.map(e,function(e,n){var r=t[n];return z.equal(e,r)}))}var d=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},f=n(17),g=n(19),m=n(18),v=n(194),y=n(36),b=n(178),E=n(195),T=n(60),w=n(171),x=n(5).Options,C=n(162).propTypes.keypadElementPropType,S=15,P="°",k=300,_=1.5,M=2,O=1,N=n(35),I=N.iconPlus,A=N.iconUndo,R=n(6).deepEq,D=n(6).getGridStep,L=n(6).captureScratchpadTouchStart,F=n(199).number,B=n(199).vector,z=n(199).point,q=n(199).ray,U=n(199).line,W=n(88),H=n(190),j=n(165).assert,V=400,G={url:null},K=function(e,t){e=e||{};var n=e.labels||["x","y"],r=e.range||[[-10,10],[-10,10]],i=e.step||[1,1],o=e.gridStep||D(r,i,t);return{box:[t,t],labels:n,range:r,step:i,gridStep:o,valid:!0,backgroundImage:G,markings:"grid",showProtractor:!1}},Y={apiOptions:x.defaults,gradeEmpty:!1,graphMode:"interactive",listMode:"dynamic",graph:{},tools:{translation:{enabled:!0,required:!1,constraints:{}},rotation:{enabled:!0,required:!1,constraints:{fixed:!1},coord:[1,6]},reflection:{enabled:!0,required:!1,constraints:{fixed:!1},coords:[[2,-4],[2,2]]},dilation:{enabled:!0,required:!1,constraints:{fixed:!1},coord:[6,6]}},drawSolutionShape:!0,starting:{shape:{type:"polygon-3",coords:[[2,2],[2,6],[7,2]]},transformations:[]},correct:{shape:{type:"polygon-3",coords:[[2,2],[2,6],[7,2]]},transformations:[]}},X=function(e){return e.customKeypad?w:e.staticRender?E:b},J={apply:function(e){return Q[e.type].isValid(e)?Q[e.type].apply(e):m.identity},append:function(e,t){var n=J._appendAndCollapseLastTwo(e,t);return J._collapseFinalNoOps(n)},_collapseFinalNoOps:function(e){return e.length&&J.isNoOp(m.last(e))?m.initial(e):e},_appendAndCollapseLastTwo:function(e,t){if(e.length){var n=J.collapse(m.last(e),t);return m.initial(e).concat(n)}return[t]},isNoOp:function(e){return Q[e.type].isNoOp(e)},collapse:function(e,t){return e.type!==t.type?[e,t]:J.isEmpty(e)&&J.isEmpty(t)?[]:J.isValid(e)&&J.isValid(t)?J._collapseValidMonotypedTransforms(e,t):[e,t]},isValid:function(e){return Q[e.type].isValid(e)},isEmpty:function(e){return Q[e.type].isEmpty(e)},_collapseValidMonotypedTransforms:function(e,t){var n=Q[e.type].collapse(e,t);return n?(m.isArray(n)||(n=[n]),m.each(n,function(t){t.type=e.type}),n):[e,t]},toTeX:function(e){return Q[e.type].toTeX(e)},ListItem:f.createClass({displayName:"ListItem",render:function(){if("dynamic"===this.props.mode)return f.createElement("div",null,J.toTeX(this.props.transform));if("interactive"===this.props.mode){var e=Q[this.props.transform.type].Input;return f.createElement(e,d({ref:"transform",onChange:this.handleChange,onFocus:this.props.onFocus,onBlur:this.props.onBlur,keypadElement:this.props.keypadElement,apiOptions:this.props.apiOptions},this.props.transform))}throw new Error("Invalid mode: "+this.props.mode)},value:function(){return"interactive"===this.props.mode?m.extend({type:this.props.transform.type},this.refs.transform.value()):this.props.transform},handleChange:m.debounce(function(e){this.props.onChange(this.value(),e)},k),_getComponentAtPath:function(e){var t=this.refs.transform,n=m.head(e);return t.refs[n]},focus:function(){var e=this.refs.transform,t=m.head(e.getInputPaths());t&&this.focusInputPath(t)},focusInputPath:function(e){this._getComponentAtPath(e).focus()},blurInputPath:function(e){this._getComponentAtPath(e).blur()},getDOMNodeForPath:function(e){return g.findDOMNode(this._getComponentAtPath(e))},getGrammarTypeForPath:function(e){return"number"},setInputValue:function(e,t,n){t.length&&(t=parseFloat(t),isNaN(t))||this.refs.transform.setInputValue(e,t,n)},getInputPaths:function(){return"dynamic"===this.props.mode?[]:this.refs.transform.getInputPaths()}})},Q={translation:{verbName:i18n._("Translate"),nounName:i18n._("Translation"),lowerNounName:i18n._("translation"),apply:function(e){return function(t){return B.add(t,e.vector)}},isValid:function(e){return m.isFinite(e.vector[0])&&m.isFinite(e.vector[1])},isEmpty:function(e){return null===e.vector[0]&&null===e.vector[1]},isNoOp:function(e){return B.equal(e.vector,[0,0])},collapse:function(e,t){return{vector:B.add(e.vector,t.vector)}},toTeX:function(e){return $_({vector:p(e.vector)},"Translation by %(vector)s")},Input:f.createClass({displayName:"Input",getInitialState:function(){return{vector:this.props.vector||[null,null]}},componentDidUpdate:function(e){R(this.props,e)||this.setState({vector:this.props.vector})},render:function(){var e=this,t=X(this.props.apiOptions),n=[f.createElement(T,null,"\\langle"),f.createElement(t,{ref:"x",placeholder:0,value:this.state.vector[0],useArrowKeys:!0,onChange:function(t){var n=e.state.vector[1];e.setState({vector:[t,n]},function(){e.props.onChange()})},onFocus:m.partial(this.props.onFocus,"x"),onBlur:m.partial(this.props.onBlur,"x"),keypadElement:this.props.keypadElement}),f.createElement(T,null,", {}"),f.createElement(t,{ref:"y",placeholder:0,value:this.state.vector[1],useArrowKeys:!0,onChange:function(t){var n=e.state.vector[0];e.setState({vector:[n,t]},function(){e.props.onChange()})},onFocus:m.partial(this.props.onFocus,"y"),onBlur:m.partial(this.props.onBlur,"y"),keypadElement:this.props.keypadElement}),f.createElement(T,null,"\\rangle")];return f.createElement("div",null,$_({vector:n},"Translation by %(vector)s"))},value:function(){var e=this.refs.x.getValue(),t=this.refs.y.getValue();return{vector:[e,t]}},setInputValue:function(e,t,n){var r=this,i=m.first(e),o=m.clone(this.state.vector);"x"===i?o[0]=t:"y"===i&&(o[1]=t),this.setState({vector:o},function(){r.props.onChange(n)})},getInputPaths:function(){return[["x"],["y"]]}})},rotation:{verbName:i18n._("Rotate"),nounName:i18n._("Rotation"),lowerNounName:i18n._("rotation"),apply:function(e){return function(t){return z.rotateDeg(t,e.angleDeg,e.center)}},isValid:function(e){return m.isFinite(e.angleDeg)&&m.isFinite(e.center[0])&&m.isFinite(e.center[1])},isEmpty:function(e){return null===e.angleDeg&&null===e.center[0]&&null===e.center[1]},isNoOp:function(e){return F.equal(e.angleDeg,0)},collapse:function(e,t){return!!z.equal(e.center,t.center)&&{center:e.center,angleDeg:e.angleDeg+t.angleDeg}},toTeX:function(e){return $_({degrees:u(e.angleDeg),point:c(e.center)},"Rotation by %(degrees)s about %(point)s")},Input:f.createClass({displayName:"Input",getInitialState:function(){return{center:this.props.center||[null,null],angleDeg:this.props.angleDeg||null}},componentDidUpdate:function(e){R(this.props,e)||this.setState({center:this.props.center,angleDeg:this.props.angleDeg})},render:function(){var e=this,t=X(this.props.apiOptions),n=[f.createElement(T,null,"("),f.createElement(t,{ref:"centerX",placeholder:0,value:this.state.center[0],useArrowKeys:!0,onChange:function(t){var n=e.state.center[1];e.setState({center:[t,n]},function(){e.props.onChange()})},onFocus:m.partial(this.props.onFocus,"centerX"),onBlur:m.partial(this.props.onBlur,"centerX"),keypadElement:this.props.keypadElement}),f.createElement(T,null,", {}"),f.createElement(t,{ref:"centerY",placeholder:0,value:this.state.center[1],useArrowKeys:!0,onChange:function(t){var n=e.state.center[0];e.setState({center:[n,t]},function(){e.props.onChange()})},onFocus:m.partial(this.props.onFocus,"centerY"),onBlur:m.partial(this.props.onBlur,"centerY"),keypadElement:this.props.keypadElement}),f.createElement(T,null,")")],r=[f.createElement(t,{ref:"angleDeg",placeholder:0,value:this.state.angleDeg,useArrowKeys:!0,onChange:function(t){e.setState({angleDeg:t},function(){e.props.onChange()})},onFocus:m.partial(this.props.onFocus,"angleDeg"),onBlur:m.partial(this.props.onBlur,"angleDeg"),keypadElement:this.props.keypadElement}),P],i=$_({point:n,degrees:r},"Rotation about %(point)s by %(degrees)s");return f.createElement("div",null,i)},value:function(){var e=this.refs.angleDeg.getValue(),t=this.refs.centerX.getValue(),n=this.refs.centerY.getValue();return{angleDeg:e,center:[t,n]}},setInputValue:function(e,t,n){var r=this,i=m.first(e),o=m.clone(this.state.angleDeg),s=m.clone(this.state.center);"angleDeg"===i?o=t:"centerX"===i?s[0]=t:"centerY"===i&&(s[1]=t),this.setState({angleDeg:o,center:s},function(){r.props.onChange(n)})},getInputPaths:function(){return[["centerX"],["centerY"],["angleDeg"]]}})},reflection:{verbName:i18n._("Reflect"),nounName:i18n._("Reflection"),lowerNounName:i18n._("reflection"),apply:function(e){return function(t){return z.reflectOverLine(t,e.line)}},isValid:function(e){return m.all(m.flatten(e.line),m.isFinite)&&!z.equal(e.line[0],e.line[1])},isEmpty:function(e){return m.all(m.flatten(e.line),m.isNull)},isNoOp:function(e){return!1},collapse:function(e,t){return!!U.equal(e.line,t.line)&&[]},toTeX:function(e){var t=e.line[0],n=e.line[1];return $_({point1:c(t),point2:c(n)},"Reflection over the line from %(point1)s to %(point2)s")},Input:f.createClass({displayName:"Input",getInitialState:function(){return{line:this.props.line||[[null,null],[null,null]]}},componentDidUpdate:function(e){R(this.props,e)||this.setState({line:this.props.line})},render:function(){var e=X(this.props.apiOptions),t=[f.createElement(T,null,"("),f.createElement(e,{ref:"x1",value:this.state.line[0][0],useArrowKeys:!0,onChange:this.changePoint.bind(this,0,0),onFocus:m.partial(this.props.onFocus,"x1"),onBlur:m.partial(this.props.onBlur,"x1"),keypadElement:this.props.keypadElement}),f.createElement(T,null,", {}"),f.createElement(e,{ref:"y1",value:this.state.line[0][1],useArrowKeys:!0,onChange:this.changePoint.bind(this,0,1),onFocus:m.partial(this.props.onFocus,"y1"),onBlur:m.partial(this.props.onBlur,"y1"),keypadElement:this.props.keypadElement}),f.createElement(T,null,")")],n=[f.createElement(T,null,"("),f.createElement(e,{ref:"x2",value:this.state.line[1][0],useArrowKeys:!0,onChange:this.changePoint.bind(this,1,0),onFocus:m.partial(this.props.onFocus,"x2"),onBlur:m.partial(this.props.onBlur,"x2"),keypadElement:this.props.keypadElement}),f.createElement(T,null,", {}"),f.createElement(e,{ref:"y2",value:this.state.line[1][1],useArrowKeys:!0,onChange:this.changePoint.bind(this,1,1),onFocus:m.partial(this.props.onFocus,"y2"),onBlur:m.partial(this.props.onBlur,"y2"),keypadElement:this.props.keypadElement}),f.createElement(T,null,")")];return f.createElement("div",null,$_({point1:t,point2:n},"Reflection over the line from %(point1)s to %(point2)s"))},changePoint:function(e,t,n,r){var i=this,o=m.map(this.state.line,m.clone);o[e][t]=n,this.setState({line:o},function(){i.props.onChange(r)})},value:function(){var e=this.refs.x1.getValue(),t=this.refs.y1.getValue(),n=this.refs.x2.getValue(),r=this.refs.y2.getValue();return{line:[[e,t],[n,r]]}},setInputValue:function(e,t,n){var r,i=m.first(e);"x"===i[0]?r=0:"y"===i[0]&&(r=1);var o;"1"===i[1]?o=0:"2"===i[1]&&(o=1),this.changePoint(o,r,t,n)},getInputPaths:function(){return[["x1"],["y1"],["x2"],["y2"]]}})},dilation:{verbName:i18n._("Dilate"),nounName:i18n._("Dilation"),lowerNounName:i18n._("dilation"),apply:function(e){return function(t){return s(t,e.center,e.scale)}},isValid:function(e){return m.isFinite(e.scale)&&m.isFinite(e.center[0])&&m.isFinite(e.center[1])},isEmpty:function(e){return null===e.scale&&null===e.center[0]&&null===e.center[1]},isNoOp:function(e){return F.equal(e.scale,1)},collapse:function(e,t){return!!z.equal(e.center,t.center)&&{center:e.center,scale:e.scale*t.scale}},toTeX:function(e){var t=l(e.scale);return $_({scale:t,point:c(e.center)},"Dilation of scale %(scale)s about %(point)s")},Input:f.createClass({displayName:"Input",getInitialState:function(){return{center:this.props.center||[null,null],scale:this.props.scale||null}},componentDidUpdate:function(e){R(this.props,e)||this.setState({center:this.props.center,scale:this.props.scale})},render:function(){var e=this,t=X(this.props.apiOptions),n=[f.createElement(T,null,"("),f.createElement(t,{ref:"x",placeholder:0,value:this.state.center[0],useArrowKeys:!0,onChange:function(t){var n=e.state.center[1];e.setState({center:[t,n]},function(){e.props.onChange()})},onFocus:m.partial(this.props.onFocus,"x"),onBlur:m.partial(this.props.onBlur,"x"),keypadElement:this.props.keypadElement}),f.createElement(T,null,", {}"),f.createElement(t,{ref:"y",placeholder:0,value:this.state.center[1],useArrowKeys:!0,onChange:function(t){var n=e.state.center[0];e.setState({center:[n,t]},function(){e.props.onChange()})},onFocus:m.partial(this.props.onFocus,"y"),onBlur:m.partial(this.props.onBlur,"y"),keypadElement:this.props.keypadElement}),f.createElement(T,null,")")],r=f.createElement(t,{ref:"scale",placeholder:1,value:this.state.scale,useArrowKeys:!0,onChange:function(t){e.setState({scale:t},function(){e.props.onChange()})},onFocus:m.partial(this.props.onFocus,"scale"),onBlur:m.partial(this.props.onBlur,"scale"),keypadElement:this.props.keypadElement});return f.createElement("div",null,$_({point:n,scale:r},"Dilation about %(point)s by %(scale)s"))},value:function(){var e=this.refs.scale.getValue(),t=this.refs.x.getValue(),n=this.refs.y.getValue();return{scale:e,center:[t,n]}},setInputValue:function(e,t,n){var r=this,i=m.first(e),o=this.state.scale,s=m.clone(this.state.center);"x"===i?s[0]=t:"y"===i?s[1]=t:"scale"===i&&(o=t),this.setState({scale:o,center:s},function(){r.props.onChange(n)})},getInputPaths:function(){return[["x"],["y"],["scale"]]}})}},Z={getPointCountForType:function(e){var t=e.split("-");return"polygon"===t[0]?t[1]||3:"line"===t[0]||"lineSegment"===t[0]?2:"angle"===t[0]?3:"circle"===t[0]?2:"point"===t[0]?1:void 0},addMovableShape:function(e,t){if(t.editable&&t.translatable)throw new Error("It doesn't make sense to have a movable shape where you can stretch the points and translate them simultaneously. options: "+JSON.stringify(t));var n,r=m.map(t.shape.coords,function(i){var o,s=!1,a=i,l=function(e,i){s||(a=o.coord,s=!0);var l=B.subtract([e,i],o.coord);t.onMove&&(l=t.onMove(l[0],l[1])),t.translatable&&m.each(r,function(e){e!==o&&e.setCoord(B.add(e.coord,l))});var c=o.coord,p=B.add(o.coord,l);return o.coord=p,n.update(),o.coord=c,p},c=function(){if(t.onMoveEnd&&s){s=!1;var e=B.subtract(o.coord,a);t.onMoveEnd(e[0],e[1])}n.update()};return o=e.addMovablePoint({coord:i,normalStyle:t.normalPointStyle,highlightStyle:t.highlightPointStyle,constraints:{fixed:!t.translatable&&!t.editable},visible:t.showPoints,snapX:t.snap&&t.snap[0]||0,snapY:t.snap&&t.snap[1]||0,bounded:!1,onMove:l,onMoveEnd:c}),o.bounded=!0,o});n=Z.addShape(e,t,r);var i=n.remove;return n.remove=function(){i.apply(n),m.invoke(r,"remove")},n},addShape:function(e,t,n){n=n||t.shape.coords;var r=Z._typesOf(t.shape),i=t.shape.options||Z.defaultOptions(r),o=Z._mapTypes(r,n,function(n,r,o){var s=m.extend({},t,i[o]);return Z._addType(e,n,r,s)}),s=m.filter(m.pluck(o,"update"),m.identity),a=function(){m.invoke(s,"call")},l=m.filter(m.pluck(o,"remove"),m.identity),c=function(){m.invoke(l,"call")},p=function(){return m.map(o,function(e){return e.getOptions?e.getOptions():{}})},u=function(){var e=m.map(n,function(e){return m.isArray(e)?e:e.coord});return{type:r,coords:e,options:p()}};return{type:r,points:n,update:a,remove:c,toJSON:u,getOptions:p}},equal:function(e,t){var n=Z._typesOf(e),r=Z._typesOf(t);if(n.length!==r.length)return!1;var i=Z._mapTypes(n,e.coords,Z._combine),o=Z._mapTypes(r,t.coords,Z._combine);return m.all(m.map(i,function(e,t){var n=o[t];return e.type===n.type&&Z._forType(e.type).equal(e.coords,n.coords)}))},_typesOf:function(e){var t=e.type;return m.isArray(t)||(t=[t]),m.map(t,function(e){return"polygon"===e?"polygon-3":e})},defaultOptions:function(e){return m.map(e,function(e){var t=Z._forType(e).defaultOptions;return m.extend({},t)})},_forType:function(e){var t=e.split("-")[0];return Z[t]},_mapTypes:function(e,t,n,r){return m.map(e,function(e,i){var o=Z.getPointCountForType(e),s=m.first(t,o);return t=m.rest(t,o),n.call(r,e,s,i)})},_addType:function(e,t,n,r){var i=m.isArray(n[0])?{coordA:n[0],coordZ:n[1]}:{pointA:n[0],pointZ:n[1]};if(t=t.split("-")[0],"polygon"===t){var o=e.addMovablePolygon(m.extend({},r,{fixed:!r.editable,snapX:r.snap&&r.snap[0]||0,snapY:r.snap&&r.snap[1]||0,points:n,constrainToGraph:!1}));return{update:o.transform.bind(o),remove:o.remove.bind(o)}}if("line"===t||"lineSegment"===t){var s=e.addMovableLineSegment(m.extend({},r,i,{movePointsWithLine:!0,fixed:!0,constraints:{fixed:!0},extendLine:"line"===t}));return{update:s.transform.bind(s,!0),remove:s.remove.bind(s)}}if("angle"===t){var a=!!r.editable&&null,l=e.addMovableAngle({angleLabel:"$deg0",fixed:!0,points:n,normalStyle:r.normalStyle,reflex:r.reflex});return m.isArray(n[0])||r.editable||(n[0].remove(),n[2].remove()),{update:l.update.bind(l,a),remove:l.remove.bind(l),getOptions:function(){return{reflex:l.isReflex()}}}}if("circle"===t){var c={remove:m.identity},p=function(){var t=n[0].coord||n[0],i=n[1].coord||n[1],o=z.distanceToPoint(t,i);c.remove(),c=e.circle(t,o,m.extend({stroke:H.DYNAMIC,"stroke-width":2},r.normalStyle))};return p(),n[1].remove&&!r.editable&&n[1].remove(),{update:p,remove:function(){c.remove()}}}if("point"===t)return{update:null,remove:null};throw new Error("Invalid shape type "+t)},_combine:function(e,t){return{type:e,coords:t}},polygon:{equal:h},line:{equal:U.equal},lineSegment:{equal:h},angle:{equal:function(e,t){if(!z.equal(e[1],t[1]))return!1;var n=[e[1],e[0]],r=[e[1],e[2]],i=[t[1],t[0]],o=[t[1],t[2]],s=q.equal(n,i)&&q.equal(r,o),a=q.equal(n,o)&&q.equal(r,i);return s||a},defaultOptions:{reflex:!1}},circle:{equal:function(e,t){var n=z.distanceToPoint(e[0],e[1]),r=z.distanceToPoint(t[0],t[1]);return z.equal(e[0],t[0])&&F.equal(n,r)}},point:{equal:z.equal}},ee=J.ListItem,te=f.createClass({displayName:"TransformationList",render:function(){if("static"===this.props.mode)return f.createElement("span",null);var e=m.map(this.props.transformations,function(e,t){return f.createElement(ee,{ref:"transformation"+t,key:"transformation"+t,transform:e,mode:this.props.mode,onChange:this.handleChange,onFocus:m.partial(this.props.onFocus,""+t),onBlur:m.partial(this.props.onBlur,""+t),keypadElement:this.props.keypadElement,apiOptions:this.props.apiOptions})},this);return f.createElement("div",{className:"perseus-transformation-list"},e)},_transformationRefs:function(){var e=this;return m.times(this.props.transformations.length,function(t){return e.refs["transformation"+t]})},value:function(){return m.invoke(this._transformationRefs(),"value")},handleChange:function(e,t){this.props.onChange(this.value(),t)},focusLast:function(){var e=this._transformationRefs();0!==e.length&&m.last(e).focus()}}),ne=f.createClass({displayName:"ToolButton",render:function(){var e=this.props.toggled?"simple-button exercise-orange toggled highlighted-tool-button":"simple-button";return f.createElement("button",{type:"button",className:e,disabled:this.props.disabled,onClick:this.props.onClick,onTouchStart:L},this.props.children)}}),re=f.createClass({displayName:"ToolsBar",getInitialState:function(){return{selected:null}},render:function(){
var e=m.map(Q,function(e,t){if(this.props.enabled[t])return f.createElement(ne,{key:t,disabled:this.props.apiOptions.readOnly,toggled:this.state.selected===t,onClick:this.changeSelected.bind(this,t)},e.verbName)},this);return f.createElement("div",{className:"transformer-tools-bar"},f.createElement("span",{className:"simple-button-group"},e),f.createElement("button",{className:"transformer-undo-button simple-button",type:"button",disabled:this.props.apiOptions.readOnly,onClick:this.props.onUndoClick,onTouchStart:L},f.createElement(y,A)," ","Undo"),f.createElement("div",{className:"clear"}))},changeSelected:function(e){this.props.removeTool(this.state.selected),e&&e!==this.state.selected?(this.props.addTool(e),this.setState({selected:e})):this.setState({selected:null})}}),ie=f.createClass({displayName:"AddTransformBar",render:function(){var e=m.map(Q,function(e,t){if(this.props.enabled[t])return f.createElement(ne,{key:t,toggled:!1,disabled:this.props.apiOptions.readOnly,onClick:this.changeSelected.bind(this,t)},f.createElement(y,I)," ",e.nounName)},this);return f.createElement("div",{className:"transformer-tools-bar"},e,f.createElement("button",{className:"transformer-undo-button simple-button",type:"button",onClick:this.props.onUndoClick,disabled:this.props.apiOptions.readOnly,onTouchStart:L},f.createElement(y,A)," ","Undo"),f.createElement("div",{className:"clear"}))},changeSelected:function(e){e&&this.props.addTool(e)}}),oe=f.createClass({displayName:"Transformer",propTypes:{apiOptions:x.propTypes,keypadElement:C,trackInteraction:f.PropTypes.func.isRequired},getDefaultProps:function(){return m.defaults({transformations:[]},Y)},render:function(){var e=m.extend(K(this.props.graph,V),this.props.graph),t="interactive"===this.props.graphMode,n=t?re:ie,i=f.createElement("div",{style:{width:e.box[0]}},f.createElement(n,{ref:"toolsBar",enabled:r(this.props.tools,"enabled"),apiOptions:this.props.apiOptions,addTool:this.addTool,removeTool:this.removeTool,onUndoClick:this.handleUndoClick}));return f.createElement("div",{className:"perseus-widget perseus-widget-transformer"},f.createElement(v,{ref:"graph",box:e.box,range:e.range,labels:e.labels,step:e.step,gridStep:e.gridStep,markings:e.markings,backgroundImage:e.backgroundImage,showProtractor:e.showProtractor,onGraphieUpdated:this.setupGraphie,setDrawingAreaAvailable:this.props.apiOptions.setDrawingAreaAvailable}),!t&&"Add transformations below:","static"===this.props.graphMode&&[f.createElement("br",{key:"static-br"}),f.createElement("em",{key:"static-nomove"}," ","Note: For this question, the shape will not move."," ")],t&&i,f.createElement(te,{ref:"transformationList",mode:this.props.listMode,transformations:this.props.transformations,onChange:this.setTransformationProps,onFocus:this._handleFocus,onBlur:this._handleBlur,keypadElement:this.props.keypadElement,apiOptions:this.props.apiOptions}),!t&&i)},componentDidMount:function(){this.setupGraphie(this.graphie())},componentDidUpdate:function(e){this.shouldSetupGraphie(this.props,e)?this.refs.graph.reset():R(this.props.transformations,this.transformations)||this.setTransformations(this.props.transformations)},shouldSetupGraphie:function(e,t){return!R(t.starting,e.starting)||(t.graphMode!==e.graphMode||(t.listMode!==e.listMode||(t.drawSolutionShape!==e.drawSolutionShape||(!(!e.drawSolutionShape||R(t.correct.shape,e.correct.shape))||!R(this.tools,e.tools)))))},graphie:function(){return this.refs.graph.graphie()},setupGraphie:function(e){this.props.drawSolutionShape&&this.props.correct.shape&&this.props.correct.shape.coords&&Z.addShape(e,{fixed:!0,shape:this.props.correct.shape,normalStyle:{stroke:H.GRAY,"stroke-dasharray":"","stroke-width":2}}),this.currentTool=null,this.refs.toolsBar.changeSelected(null),this.addTransformerShape(this.props.starting.shape,!1),this.setTransformations(this.props.transformations),this.tools={translation:m.clone(this.props.tools.translation),rotation:m.clone(this.props.tools.rotation),reflection:m.clone(this.props.tools.reflection),dilation:m.clone(this.props.tools.dilation)}},setTransformations:function(e){this.resetCoords(),this.transformations=m.clone(e),m.each(this.transformations,this.applyTransform)},addTransformerShape:function(e,t){var n=this,r=this.graphie();this.shape=Z.addMovableShape(r,{shape:e,editable:!1,showPoints:"static"!==this.props.graphMode,translatable:t,onMove:function(e,t){return e=W.roundToNearest(r.snap[0],e),t=W.roundToNearest(r.snap[1],t),n.addTransform({type:"translation",vector:[e,t]}),[e,t]},normalPointStyle:{fill:t?H.INTERACTIVE:H.DYNAMIC,stroke:t?H.INTERACTIVE:H.DYNAMIC},highlightPointStyle:{fill:H.INTERACTING,stroke:H.INTERACTING}})},addTool:function(e){var t=this;if("interactive"===this.props.graphMode)if("translation"===e)this.currentTool=this.addTranslationTool();else if("rotation"===e)this.currentTool=this.addRotationTool();else if("reflection"===e)this.currentTool=this.addReflectionTool();else{if("dilation"!==e)throw new Error("Invalid tool id: "+e);this.currentTool=this.addDilationTool()}else{var n;if("translation"===e)n={type:e,vector:[null,null]};else if("rotation"===e)n={type:e,center:[null,null],angleDeg:null};else if("reflection"===e)n={type:e,line:[[null,null],[null,null]]};else{if("dilation"!==e)throw new Error("Invalid tool id: "+e);n={type:e,center:[null,null],scale:null}}this.doTransform(n,function(){t.refs.transformationList.focusLast()})}},removeTool:function(e){this.currentTool&&this.currentTool.remove(),this.currentTool=null},addTranslationTool:function(){var e=this;return this.shape.remove(),this.addTransformerShape(this.shape.toJSON(),!0),{remove:function(){e.shape.remove(),e.addTransformerShape(e.shape.toJSON(),!1)}}},snapCoord:function(e){var t=this.graphie();return m.map(e,function(e,n){return W.roundToNearest(t.snap[n],e)})},normalizeReflectionCoords:function(e){var t=this.snapCoord(U.midpoint(e)),n=B.polarDegFromCart(B.subtract(e[0],e[1])),r=[1,W.roundToNearest(45,n[1])],i=B.cartFromPolarDeg(r),o=m.map([-1,1],function(e){var n=B.add(t,B.scale(i,e*this.scaleToCurrentRange(M)));return this.snapCoord(n)},this);return o},addReflectionTool:function(){var e=this.props.tools.reflection;if(e.enabled){var t,n=this,r=this.refs.graph.graphie(),o=function(){n.changeTool("reflection",{coords:m.pluck(a,"coord")})},s=this.normalizeReflectionCoords(e.coords),a=m.map(s,function(e){return r.addMovablePoint({coord:e,visible:!1})},this),l=i(e);r.style({},function(){t=r.addMovableLineSegment({fixed:e.constraints.fixed,constraints:e.constraints,pointA:a[0],pointZ:a[1],snapX:r.snap[0],snapY:r.snap[1],extendLine:!0,normalStyle:{stroke:l,"stroke-width":2,"stroke-dasharray":"- "},highlightStyle:{stroke:H.INTERACTING,"stroke-width":2,"stroke-dasharray":"- "},movePointsWithLine:!0,onMoveEnd:o})});var c=r.addReflectButton({fixed:e.constraints.fixed,line:t,size:this.scaleToCurrentRange(O),onClick:function(){n.doTransform({type:"reflection",line:m.pluck(a,"coord")}),p&&(p.setCoord(B.add(c.coord,B.subtract(c.coord,p.coord))),p.update())},normalStyle:{stroke:l,"stroke-width":2,fill:l},highlightStyle:{stroke:H.INTERACTING,"stroke-width":3,fill:H.INTERACTING},onMoveEnd:o}),p=null;if(!e.constraints.fixed){var u=B.polarDegFromCart(B.subtract(a[1].coord,a[0].coord))[1]+90;p=r.addRotateHandle({center:c,radius:this.scaleToCurrentRange(M),angleDeg:u,width:this.scaleToCurrentRange(.24),hoverWidth:this.scaleToCurrentRange(.4),lengthAngle:17,onMove:function(e){return W.roundToNearest(45,e)},onMoveEnd:o})}return $(t).on("move",function(){c.update(),$(c).trigger("move")}),p&&$(p).on("move",function(){var e=n.snapCoord(p.coord),r=B.subtract(e,c.coord),i=c.isFlipped()?1:0;a[i].setCoord(B.add(c.coord,B.rotateDeg(r,90))),a[1-i].setCoord(B.add(c.coord,B.rotateDeg(r,-90))),t.transform(!0),c.update()}),{remove:function(){c.remove(),p&&p.remove(),t.remove(),a[0].remove(),a[1].remove()}}}},scaleToCurrentRange:function(e){return o(e,this.refs.graph.props.range)},addRotationTool:function(){var e=this.props.tools.rotation;if(e.enabled){var t=this,n=this.refs.graph.graphie(),r=i(e);return this.rotatePoint=n.addMovablePoint({constraints:e.constraints,coord:e.coord,snapX:n.snap[0],snapY:n.snap[1],normalStyle:{"stroke-dasharray":"",stroke:r,fill:r},highlightStyle:{"stroke-dasharray":"",stroke:H.INTERACTING,fill:H.INTERACTING}}),this.rotateHandle=n.addRotateHandle({center:this.rotatePoint,radius:this.scaleToCurrentRange(_),width:this.scaleToCurrentRange(.24),hoverWidth:this.scaleToCurrentRange(.4),onMove:function(e,n){var r=t.getRotationTransformFromAngle(t.rotatePoint.coord,e-n);return t.doTransform(r),n+r.angleDeg}}),this.rotatePoint.onMoveEnd=function(e,n){t.changeTool("rotation",{coord:[e,n]})},{remove:function(){t.rotateHandle.remove(),t.rotatePoint.remove()}}}},addDilationTool:function(){var e=this.props.tools.dilation;if(e.enabled){var t=this,n=this.refs.graph.graphie(),r=i(e);t.dilationCircle=n.addCircleGraph({centerConstraints:e.constraints,center:e.coord,radius:t.scaleToCurrentRange(2),snapX:n.snap[0],snapY:n.snap[1],minRadius:t.scaleToCurrentRange(1),snapRadius:t.scaleToCurrentRange(.5),onResize:function(e,n){t.doTransform({type:"dilation",center:t.dilationCircle.centerPoint.coord,scale:e/n})},circleNormalStyle:{stroke:r,"stroke-width":2,"stroke-dasharray":"- ","fill-opacity":0},circleHighlightStyle:{stroke:H.INTERACTING,"stroke-width":2,"stroke-dasharray":"",fill:H.INTERACTING,"fill-opacity":.05},centerNormalStyle:{stroke:r,fill:r,"stroke-width":2,"stroke-dasharray":""},centerHighlightStyle:{stroke:r,fill:r,"stroke-width":2,"stroke-dasharray":""}});var o=this.dilationCircle.centerPoint.onMoveEnd;return this.dilationCircle.centerPoint.onMoveEnd=function(){o&&o.apply(this,m.toArray(arguments)),t.changeTool("dilation",{coord:t.dilationCircle.centerPoint.coord})},{remove:function(){t.dilationCircle.remove()}}}},getRotationTransformFromAngle:function(e,t){t=(t+360)%360,t>180&&(t-=360);var n=Math.round(t/S)*S;return{type:"rotation",center:e,angleDeg:n}},doTransform:function(e,t){this.applyTransform(e),this.addTransform(e,t)},applyTransform:function(e){if("static"!==this.props.graphMode){var t=J.apply(e);this.applyCoordTransformation(t)}},applyCoordTransformation:function(e){m.each(this.shape.points,function(t){var n=e(t.coord);t.setCoord(n)}),this.shape.update()},resetCoords:function(){var e=this.props.starting.shape.coords;m.each(this.shape.points,function(t,n){t.setCoord(e[n])}),this.shape.update()},handleUndoClick:function(){this.refs.toolsBar.changeSelected(null),this.props.transformations.length&&this.props.onChange({transformations:m.initial(this.props.transformations)})},setTransformationProps:function(e,t){this.props.onChange({transformations:e},t)},addTransform:function(e,t){this.transformations=J.append(this.transformations,e),this.props.onChange({transformations:m.clone(this.transformations)},t)},changeTool:function(e,t){var n=m.clone(this.props.tools);n[e]=m.extend({},this.props.tools[e],t),this.tools[e]=m.clone(n[e]),this.props.onChange({tools:n}),this.props.trackInteraction()},simpleValidate:function(e){return oe.validate(this.getUserInput(),e)},getCoords:function(){var e=this.props.starting.shape.coords,t=this.props.transformations;return m.reduce(t,function(e,t){return m.map(e,J.apply(t))},e)},getEditorJSON:function(){var e=m.pick(this.props,"grading","starting","graphMode","listMode","tools","drawSolutionShape","gradeEmpty");return e.graph=this.refs.graph.toJSON(),e.version=1.2,e.answer=this.getUserInput(),e},getUserInput:function(){return{transformations:this.props.transformations,shape:{type:this.shape.type,coords:this.getCoords(),options:this.shape.getOptions()}}},_handleFocus:function(){var e=Array.prototype.slice.call(arguments);this.props.onFocus(e)},_handleBlur:function(){var e=Array.prototype.slice.call(arguments);this.props.onBlur(e)},_getTransformationForID:function(e){var t=["transformationList","transformation"+e],n=this;return m.each(t,function(e){n=n.refs[e]}),n},getInputPaths:function(){var e=this;if("static"===this.props.listMode)return[];var t=[];return m.each(this.props.transformations,function(n,r){var n=e._getTransformationForID(r),i=n.getInputPaths(),o=m.map(i,function(e){return[""+r].concat(e)});t=t.concat(o)}),t},_passToInner:function(e,t){if(t&&t.length){var n=m.rest(t),r=[n].concat(m.rest(arguments,2)),i=m.head(t),o=this._getTransformationForID(i);return o[e].apply(o,r)}},focus:function(){var e=this.getInputPaths();return e.length>0&&(this.focusInputPath(e[0]),!0)},focusInputPath:function(e){return 0!==e.length&&(j(e.length>=2),this._passToInner("focusInputPath",e))},blurInputPath:function(e){return 0!==e.length&&(j(e.length>=2),this._passToInner("blurInputPath",e))},setInputValue:function(e,t,n){return j(e.length>=2),this._passToInner("setInputValue",e,t,n)},getDOMNodeForPath:function(e){return j(e.length>=2),this._passToInner("getDOMNodeForPath",e)},getGrammarTypeForPath:function(e){return j(e.length>=2),this._passToInner("getGrammarTypeForPath",e)}});m.extend(oe,{validate:function(e,t){for(var n in Q)if(t.tools[n].required){var r=m.any(m.map(e.transformations,function(e){return e.type===n&&!J.isEmpty(e)&&!J.isNoOp(e)}));if(!r)return{type:"invalid",message:i18n._("Your transformation must use a %(type)s.",{type:Q[n].lowerNounName})}}return Z.equal(e.shape,t.correct.shape)?{type:"points",earned:1,total:1,message:null}:!t.gradeEmpty&&R(e.shape.coords,t.starting.shape.coords)?{type:"invalid",message:i18n._("Use the interactive graph to define a correct transformation.")}:{type:"points",earned:0,total:1,message:null}}}),e.exports={name:"transformer",displayName:"Transformer",widget:oe}},function(e,t,n){"use strict";function r(e){return a.reduce(e,function(e,t){return e+t},0)}function i(e,t){var n=t[0][1]-t[0][0],r=t[1][1]-t[1][0];return e*Math.max(n,r)/20}function o(e,t){return e=a.clone(e).sort(y.compare),t=a.clone(t).sort(y.compare),a.all(a.map(e,function(e,n){var r=t[n];return y.equal(e,r)}))}var s=n(17),a=n(18),l=n(5).Options,c=n(194),p=n(191),u=n(71),h=n(39),d=n(148).widget,f=n(6).deepEq,g=n(6).getGridStep,m=n(199).line,v=n(199).number,y=n(199).point,b=n(199).ray,E=n(199).vector,T=n(190),w={url:null},x=function(e,t){e=e||{};var n=e.labels||["x","y"],r=e.range||[[-10,10],[-10,10]],i=e.step||[1,1],o=e.gridStep||g(r,i,t);return{box:[t,t],labels:n,range:r,step:i,gridStep:o,valid:!0,backgroundImage:w,markings:"grid",showProtractor:!1}},C={apiOptions:l.defaults,gradeEmpty:!1,graphMode:"interactive",listMode:"dynamic",graph:{},tools:{translation:{enabled:!0,required:!1,constraints:{}},rotation:{enabled:!0,required:!1,constraints:{fixed:!1},coord:[1,6]},reflection:{enabled:!0,required:!1,constraints:{fixed:!1},coords:[[2,-4],[2,2]]},dilation:{enabled:!0,required:!1,constraints:{fixed:!1},coord:[6,6]}},drawSolutionShape:!0,starting:{shape:{type:"polygon-3",coords:[[2,2],[2,6],[7,2]]},transformations:[]},correct:{shape:{type:"polygon-3",coords:[[2,2],[2,6],[7,2]]},transformations:[]}},S=s.createClass({displayName:"ToolSettings",getDefaultProps:function(){return{allowFixed:!0}},render:function(){return s.createElement("div",null,this.props.name,":"," "," ",s.createElement(h,{label:"enabled:",enabled:this.props.settings.enabled,onChange:this.props.onChange})," ",this.props.settings.enabled&&s.createElement(h,{label:"required:",required:this.props.settings.required,onChange:this.props.onChange}),this.props.settings.enabled&&s.createElement(u,null,"'Required' will only grade the answer as correct if the student has used at least one such transformation.")," ",this.props.allowFixed&&this.props.settings.enabled&&s.createElement(h,{label:"fixed:",fixed:this.props.settings.constraints.fixed,onChange:this.changeConstraints}),this.props.allowFixed&&this.props.settings.enabled&&s.createElement(u,null,"Enable 'fixed' to prevent the student from repositioning the tool. The tool will appear in the position at which it is placed in the editor below."))},changeConstraints:function(e){var t=a.extend({},this.props.constraints,e);this.props.onChange({constraints:t})}}),P=s.createClass({displayName:"TransformationExplorerSettings",render:function(){return s.createElement("div",{className:"transformer-settings"},s.createElement("div",null," ","Mode:"," ",s.createElement("select",{value:this.getMode(),onChange:this.changeMode},s.createElement("option",{value:"interactive,dynamic"}," ","Exploration with text"," "),s.createElement("option",{value:"interactive,static"}," ","Exploration without text"," "),s.createElement("option",{value:"dynamic,interactive"}," ","Formal with movement"," "),s.createElement("option",{value:"static,interactive"}," ","Formal without movement"," ")),s.createElement(u,null,s.createElement("ul",null,s.createElement("li",null,s.createElement("b",null,"Exploration:")," Students create transformations with tools on the graph."," "),s.createElement("li",null,s.createElement("b",null,"Formal with movement:")," Students specify transformations mathematically in the transformation list. Graph shows the results of these transformations."," "),s.createElement("li",null,s.createElement("b",null,"Formal without movement:")," Students specify transformations mathematically in the transformation list. Graph does not update."," ")))),s.createElement(S,{name:"Translations",settings:this.props.tools.translation,allowFixed:!1,onChange:this.changeHandlerFor("translation")}),s.createElement(S,{name:"Rotations",settings:this.props.tools.rotation,onChange:this.changeHandlerFor("rotation")}),s.createElement(S,{name:"Reflections",settings:this.props.tools.reflection,onChange:this.changeHandlerFor("reflection")}),s.createElement(S,{name:"Dilations",settings:this.props.tools.dilation,onChange:this.changeHandlerFor("dilation")}),s.createElement(h,{label:"Draw Solution:",drawSolutionShape:this.props.drawSolutionShape,onChange:this.props.onChange}))},getMode:function(){return this.props.graphMode+","+this.props.listMode},changeMode:function(e){var t=e.target.value,n=t.split(",");this.props.onChange({graphMode:n[0],listMode:n[1]})},changeHandlerFor:function(e){var t=this;return function(n){var r=a.clone(t.props.tools);r[e]=a.extend({},t.props.tools[e],n),t.props.onChange({tools:r})}}}),k={getPointCountForType:function(e){var t=e.split("-");return"polygon"===t[0]?t[1]||3:"line"===t[0]||"lineSegment"===t[0]?2:"angle"===t[0]?3:"circle"===t[0]?2:"point"===t[0]?1:void 0},addMovableShape:function(e,t){if(t.editable&&t.translatable)throw new Error("It doesn't make sense to have a movable shape where you can stretch the points and translate them simultaneously. options: "+JSON.stringify(t));var n,r=a.map(t.shape.coords,function(i){var o,s=!1,l=i,c=function(e,i){s||(l=o.coord,s=!0);var c=E.subtract([e,i],o.coord);t.onMove&&(c=t.onMove(c[0],c[1])),t.translatable&&a.each(r,function(e){e!==o&&e.setCoord(E.add(e.coord,c))});var p=o.coord,u=E.add(o.coord,c);return o.coord=u,n.update(),o.coord=p,u},p=function(){if(t.onMoveEnd&&s){s=!1;var e=E.subtract(o.coord,l);t.onMoveEnd(e[0],e[1])}n.update()};return o=e.addMovablePoint({coord:i,normalStyle:t.normalPointStyle,highlightStyle:t.highlightPointStyle,constraints:{fixed:!t.translatable&&!t.editable},visible:t.showPoints,snapX:t.snap&&t.snap[0]||0,snapY:t.snap&&t.snap[1]||0,bounded:!1,onMove:c,onMoveEnd:p}),o.bounded=!0,o});n=k.addShape(e,t,r);var i=n.remove;return n.remove=function(){i.apply(n),a.invoke(r,"remove")},n},addShape:function(e,t,n){n=n||t.shape.coords;var r=k._typesOf(t.shape),i=t.shape.options||k.defaultOptions(r),o=k._mapTypes(r,n,function(n,r,o){var s=a.extend({},t,i[o]);return k._addType(e,n,r,s)}),s=a.filter(a.pluck(o,"update"),a.identity),l=function(){a.invoke(s,"call")},c=a.filter(a.pluck(o,"remove"),a.identity),p=function(){a.invoke(c,"call")},u=function(){return a.map(o,function(e){return e.getOptions?e.getOptions():{}})},h=function(){var e=a.map(n,function(e){return a.isArray(e)?e:e.coord});return{type:r,coords:e,options:u()}};return{type:r,points:n,update:l,remove:p,toJSON:h,getOptions:u}},equal:function(e,t){var n=k._typesOf(e),r=k._typesOf(t);if(n.length!==r.length)return!1;var i=k._mapTypes(n,e.coords,k._combine),o=k._mapTypes(r,t.coords,k._combine);return a.all(a.map(i,function(e,t){var n=o[t];return e.type===n.type&&k._forType(e.type).equal(e.coords,n.coords)}))},_typesOf:function(e){var t=e.type;return a.isArray(t)||(t=[t]),a.map(t,function(e){return"polygon"===e?"polygon-3":e})},defaultOptions:function(e){return a.map(e,function(e){var t=k._forType(e).defaultOptions;return a.extend({},t)})},_forType:function(e){var t=e.split("-")[0];return k[t]},_mapTypes:function(e,t,n,r){return a.map(e,function(e,i){var o=k.getPointCountForType(e),s=a.first(t,o);return t=a.rest(t,o),n.call(r,e,s,i)})},_addType:function(e,t,n,r){var i=a.isArray(n[0])?{coordA:n[0],coordZ:n[1]}:{pointA:n[0],pointZ:n[1]};if(t=t.split("-")[0],"polygon"===t){var o=e.addMovablePolygon(a.extend({},r,{fixed:!r.editable,snapX:r.snap&&r.snap[0]||0,snapY:r.snap&&r.snap[1]||0,points:n,constrainToGraph:!1}));return{update:o.transform.bind(o),remove:o.remove.bind(o)}}if("line"===t||"lineSegment"===t){var s=e.addMovableLineSegment(a.extend({},r,i,{movePointsWithLine:!0,fixed:!0,constraints:{fixed:!0},extendLine:"line"===t}));return{update:s.transform.bind(s,!0),remove:s.remove.bind(s)}}if("angle"===t){var l=!!r.editable&&null,c=e.addMovableAngle({angleLabel:"$deg0",fixed:!0,points:n,normalStyle:r.normalStyle,reflex:r.reflex});return a.isArray(n[0])||r.editable||(n[0].remove(),n[2].remove()),{update:c.update.bind(c,l),remove:c.remove.bind(c),getOptions:function(){return{reflex:c.isReflex()}}}}if("circle"===t){var p={remove:a.identity},u=function(){var t=n[0].coord||n[0],i=n[1].coord||n[1],o=y.distanceToPoint(t,i);p.remove(),p=e.circle(t,o,a.extend({stroke:T.DYNAMIC,"stroke-width":2},r.normalStyle))};return u(),n[1].remove&&!r.editable&&n[1].remove(),{update:u,remove:function(){p.remove()}}}if("point"===t)return{update:null,remove:null};throw new Error("Invalid shape type "+t)},_combine:function(e,t){return{type:e,coords:t}},polygon:{equal:o},line:{equal:m.equal},lineSegment:{equal:o},angle:{equal:function(e,t){if(!y.equal(e[1],t[1]))return!1;var n=[e[1],e[0]],r=[e[1],e[2]],i=[t[1],t[0]],o=[t[1],t[2]],s=b.equal(n,i)&&b.equal(r,o),a=b.equal(n,o)&&b.equal(r,i);return s||a},defaultOptions:{reflex:!1}},circle:{equal:function(e,t){var n=y.distanceToPoint(e[0],e[1]),r=y.distanceToPoint(t[0],t[1]);return y.equal(e[0],t[0])&&v.equal(n,r)}},point:{equal:y.equal}},_=s.createClass({displayName:"TransformationsShapeEditor",render:function(){return s.createElement("div",null,s.createElement(c,{ref:"graph",box:this.props.graph.box,range:this.props.graph.range,labels:this.props.graph.labels,step:this.props.graph.step,gridStep:this.props.graph.gridStep,markings:this.props.graph.markings,backgroundImage:this.props.graph.backgroundImage,onGraphieUpdated:this.setupGraphie}),s.createElement("select",{key:"type-select",value:this.getTypeString(this.props.shape.type),onChange:this.changeType},s.createElement("option",{value:"polygon-3"},"Triangle"),s.createElement("option",{value:"polygon-4"},"Quadrilateral"),s.createElement("option",{value:"polygon-5"},"Pentagon"),s.createElement("option",{value:"polygon-6"},"Hexagon"),s.createElement("option",{value:"line"},"Line"),s.createElement("option",{value:"line,line"},"2 lines"),s.createElement("option",{value:"lineSegment"},"Line segment"),s.createElement("option",{value:"lineSegment,lineSegment"}," ","2 line segments"," "),s.createElement("option",{value:"angle"},"Angle"),s.createElement("option",{value:"circle"},"Circle")))},getTypeString:function(e){return a.isArray(e)?a.map(e,this.getTypeString).join(","):"polygon"===e?"polygon-"+this.props.shape.coords.length:e},changeType:function(e){var t=String(e.target.value).split(","),n=r(a.map(t,k.getPointCountForType)),o=i(4,this.refs.graph.props.range),s=180*(.5-1/n),l=a.times(n,function(e){return y.rotateDeg([o,0],360*e/n+s)});this.props.onChange({shape:{type:t,coords:l,options:k.defaultOptions(t)}})},componentDidMount:function(){this.setupGraphie(this.refs.graph.graphie())},componentDidUpdate:function(e){f(e.shape,this.props.shape)||this.refs.graph.reset()},updateCoords:function(){this.props.onChange({shape:this.shape.toJSON()})},setupGraphie:function(e){this.shape=k.addMovableShape(e,{editable:!0,snap:e.snap,shape:this.props.shape,onMoveEnd:this.updateCoords})}}),M=s.createClass({displayName:"TransformerEditor",getDefaultProps:function(){return C},render:function(){var e=a.extend(x(this.props.graph,340),this.props.graph);return s.createElement("div",null,s.createElement("div",null,s.createElement(h,{label:"Grade empty answers as wrong:",gradeEmpty:this.props.gradeEmpty,onChange:this.props.onChange}),s.createElement(u,null,s.createElement("p",null,"We generally do not grade empty answers. This usually works well, but sometimes can result in giving away part of an answer in a multi-part question."),s.createElement("p",null,"If this is a multi-part question (there is another widget), you probably want to enable this option. Otherwise, you should leave it disabled."),s.createElement("p",null,"Confused? Talk to Elizabeth."))),s.createElement("div",null,"Graph settings:"),s.createElement(p,{box:e.box,labels:e.labels,range:e.range,step:e.step,gridStep:e.gridStep,valid:e.valid,backgroundImage:e.backgroundImage,markings:e.markings,showProtractor:e.showProtractor,onChange:this.changeGraph}),s.createElement("div",null,"Transformation settings:"),s.createElement(P,{ref:"transformationSettings",graphMode:this.props.graphMode,listMode:this.props.listMode,tools:this.props.tools,drawSolutionShape:this.props.drawSolutionShape,onChange:this.props.onChange}),s.createElement("div",null,"Starting location:"),s.createElement(_,{ref:"shapeEditor",graph:e,shape:this.props.starting.shape,onChange:this.changeStarting,setDrawingAreaAvailable:this.props.apiOptions.setDrawingAreaAvailable}),s.createElement("div",null,"Solution transformations:"),s.createElement(d,{ref:"explorer",graph:e,graphMode:this.props.graphMode,listMode:this.props.listMode,gradeEmpty:this.props.gradeEmpty,tools:this.props.tools,drawSolutionShape:this.props.drawSolutionShape,starting:this.props.starting,correct:this.props.starting,transformations:this.props.correct.transformations,onChange:this.changeTransformer,trackInteraction:function(){}}))},changeGraph:function(e,t){var n=a.extend({},this.props.graph,e);this.props.onChange({graph:n},t)},changeStarting:function(e){var t=a.extend({},this.props.starting,e);this.props.onChange({starting:t})},changeTransformer:function(e,t){e.transformations&&(e.correct={transformations:e.transformations},delete e.transformations),this.props.onChange(e,t)},serialize:function(){var e=this.refs.explorer.getEditorJSON();return e.correct=e.answer,delete e.answer,e}});e.exports=M},function(e,t,n){"use strict";var r=n(186),i=n(17),o=n(19),s=n(18),a=n(5).ClassNames,l=n(5).Options,c=n(175),p=n(195),u=n(197),h=u.SignificantFigures,d=u.displaySigFigs,f="all",g=10,m=function(e){return new h(e).sigFigs},v=function(e,t){return d(e,t,-g,!1)},y=i.createClass({displayName:"OldUnitInput",mixins:[c],propTypes:{value:i.PropTypes.string},getDefaultProps:function(){return{apiOptions:l.defaults,value:""}},render:function(){var e=this.props.apiOptions.staticRender?i.createFactory(p):i.DOM.input,t=e({onChange:this.handleChange,ref:"input",className:a.INTERACTIVE,value:this.props.value,onFocus:this.handleFocus,onBlur:this.handleBlur});return i.createElement("div",{className:"old-unit-input"},t,i.createElement("div",{ref:"error",className:"error",style:{display:"none"}},i18n._("I don't understand that")))},_errorTimeout:null,_showError:function(){if(""!==this.props.value){var e=$(o.findDOMNode(this.refs.error));e.is(":visible")||e.css({top:50,opacity:.1}).show().animate({top:0,opacity:1},300)}},_hideError:function(){var e=$(o.findDOMNode(this.refs.error));e.is(":visible")&&e.animate({top:50,opacity:.1},300,function(){$(this).hide()})},componentDidUpdate:function(){clearTimeout(this._errorTimeout),KAS.unitParse(this.props.value).parsed?this._hideError():this._errorTimeout=setTimeout(this._showError,2e3)},componentWillUnmount:function(){clearTimeout(this._errorTimeout)},handleBlur:function(){this.props.onBlur([]),clearTimeout(this._errorTimeout),KAS.unitParse(this.props.value).parsed||this._showError()},handleChange:function(e){this._hideError(),this.props.onChange({value:e.target.value})},simpleValidate:function(e,t){return t=t||function(){},y.validate(this.getUserInput(),e)},getUserInput:function(){return this.props.value},getInputPaths:function(){return[[]]},focusInputPath:function(e){o.findDOMNode(this.refs.input).focus()},handleFocus:function(){this.props.onFocus([])},blurInputPath:function(e){o.findDOMNode(this.refs.input).blur()},setInputValue:function(e,t,n){this.props.onChange({value:t},n)},getDOMNodeForPath:function(){return o.findDOMNode(this.refs.input)},getGrammarTypeForPath:function(e){return"unit"}}),b=function(e){return e.simplify().asMul().partition()[1].flatten().simplify()};s.extend(y,{validate:function(e,t){var n=KAS.unitParse(t.value).expr,r=KAS.unitParse(e);if(!r.parsed)return{type:"invalid",message:i18n._("I couldn't understand those units.")};var i=null,o=t.sigfigs,a=m(r.coefficient)===o;a||(i=i18n._("Check your significant figures."));var l;try{var c=new KAS.Var("x"),p=new KAS.Eq(n.simplify(),"=",new KAS.Mul(c,r.expr.simplify())),u=p.solveLinearEquationForVariable(c);l=Number(u.eval()).toPrecision(o)===Number(1).toPrecision(o)}catch(e){l=!1}l||(i=i18n._("That answer is numerically incorrect."));var h,d=b(r.expr.simplify()),g=b(n.simplify());if(h=t.accepting===f?KAS.compare(d,g).equal:s(t.acceptingUnits).any(function(e){var t=b(KAS.unitParse(e).unit.simplify());return KAS.compare(t,d).equal}),!h)var i=i18n._("Check your units.");var v=h&&l&&a;return{type:"points",earned:v?1:0,total:1,message:i}}}),e.exports={name:"unit-input",displayName:"Unit",defaultAlignment:"inline-block",widget:y,transform:function(e){return r(e).del(["value"]).freeze()},version:{major:0,minor:1},countSigfigs:m,sigfigPrint:v,hidden:!0}},function(e,t,n){"use strict";var r=n(17),i=n(18),o=n(175),s=n(176),a=n(36),l=n(178),c=n(35),p=c.iconOk,u=c.iconRemove,h=n(197),d=h.displaySigFigs,f="all",g="some",m=10,v=function(e,t){return d(e,t,-m,!1)},y=function(e){return e.simplify().asMul().partition()[1].flatten().simplify()},b=r.createClass({displayName:"UnitExample",render:function(){var e;return e=this.state.valid?r.createElement("span",null,r.createElement("span",{className:"unit-example-okay"},r.createElement(a,p)),this.state.solvedExample):r.createElement("span",{className:"unit-example-not-okay"},r.createElement(a,u)),r.createElement("div",null,e," ",this.props.name)},componentWillReceiveProps:function(e){this._checkValidity(e)},componentWillMount:function(){this._checkValidity(this.props)},_checkValidity:function(e){var t=e.name,n=e.original,r=e.sigfigs,i=KAS.unitParse(t),o="",s=!0;if(i.parsed&&n){var a=new KAS.Var("x"),l=i.unit,c=new KAS.Eq(n,"=",new KAS.Mul(a,l));try{var p=c.solveLinearEquationForVariable(a);o=v(p.eval(),r),s=KAS.compare(y(n),y(l)).equal}catch(e){s=!1}}else s=!1;this.setState({valid:s,solvedExample:o})}}),E=r.createClass({displayName:"UnitInputEditor",mixins:[o,s],propTypes:{value:r.PropTypes.string,acceptingUnits:r.PropTypes.arrayOf(r.PropTypes.string),accepting:r.PropTypes.oneOf([f,g]),sigfigs:r.PropTypes.number},getDefaultProps:function(){return{value:"5x10^5 kg m / s^2",accepting:f,sigfigs:3}},render:function(){var e=this,t=this.props,n=t.acceptingUnits,i=t.accepting;n=n||[];var o=null;if(i===g){var s=n.map(function(t,n){return r.createElement(b,{name:t,original:e.original||null,sigfigs:e.props.sigfigs,key:n})});o=r.createElement("div",null,r.createElement("input",{type:"text",defaultValue:n.join(", "),onChange:this.handleAcceptingUnitsChange})," ","(comma-separated)",s)}return r.createElement("div",{className:"unit-editor"},r.createElement("div",null,r.createElement("input",{value:this.props.value,
className:"unit-editor-canonical",onBlur:this._handleBlur,onKeyPress:this._handleBlur,onChange:this.onChange})," ",this.parsed?r.createElement("span",{className:"unit-example-okay"},r.createElement(a,p)):r.createElement("span",{className:"unit-example-not-okay"},r.createElement(a,u))),r.createElement("div",null,"Significant Figures:"," ",r.createElement(l,{value:this.props.sigfigs,onChange:this.handleSigfigChange,checkValidity:this._checkSigfigValidity,useArrowKeys:!0})),r.createElement("div",null,r.createElement("label",null,r.createElement("input",{type:"radio",name:this.groupId,onChange:function(){return e._setAccepting(f)},checked:this.props.accepting===f})," Any equivalent unit "),r.createElement("label",null,r.createElement("input",{type:"radio",name:this.groupId,onChange:function(){return e._setAccepting(g)},checked:this.props.accepting===g})," Only these units ")),o)},handleAcceptingUnitsChange:function(e){var t=e.target.value.split(",").map(function(e){return e.trim()}).filter(function(e){return""!==e});this.change({acceptingUnits:t})},handleSigfigChange:function(e){this.change({sigfigs:e})},_checkSigfigValidity:function(e){return e>0&&e<=m},_setAccepting:function(e){this.change({accepting:e})},componentWillMount:function(){this.groupId=i.uniqueId("accepting"),this._doOriginal(this.props)},componentWillReceiveProps:function(e){this._doOriginal(e)},_doOriginal:function(e){var t=KAS.unitParse(e.value);this.parsed=!1,t.parsed&&"unitMagnitude"===t.type&&(this.original=t.expr,this.parsed=!0)},onChange:function(e){this.props.onChange({value:e.target.value})},getSaveWarnings:function(){var e=this.props,t=e.value,n=e.accepting,r=e.acceptingUnits,i=[],o=KAS.unitParse(t);return o.parsed||i.push("Answer did not parse"),n===g&&0===r.length&&i.push("There are no accepted units"),i}});e.exports=E},function(e,t,n){"use strict";var r=n(17),i=n(18),o=n(175),s=n(65),a=1280,l=720,c="https://{hostname}/embed_video?slug={slug}&internal_video_only=1",p=/^https?:\/\//,u=/khanacademy\.org/,h=r.createClass({displayName:"Video",propTypes:{alignment:r.PropTypes.string,location:r.PropTypes.string},mixins:[o],getUserInput:function(){return null},simpleValidate:function(e){return h.validate(null,e)},render:function(){var e=this.props.location;if(!e)return r.createElement("div",null);var t;if(p.test(e))t=e;else{t=c.replace("{slug}",e);var n=document.location.hostname,i="www.khanacademy.org";u.test(n)&&(i=n),t=t.replace("{hostname}",i)}return r.createElement(s,{width:a,height:l,key:e+this.props.alignment},r.createElement("iframe",{className:"perseus-video-widget",sandbox:"allow-same-origin allow-scripts",width:a,height:l,src:t,allowFullScreen:!0}))}});i.extend(h,{validate:function(e,t){return{type:"points",earned:0,total:0,message:null}}}),e.exports={name:"video",displayName:"Video",defaultAlignment:"block",supportedAlignments:["block","float-left","float-right","full-width"],widget:h}},function(e,t,n){"use strict";function r(e){var t=c.exec(e);return t?t[1]:e}var i=n(17),o=(n(18),n(175)),s=n(176),a=n(71),l=n(174),c=/khanacademy\.org\/.*\/v\/(.*)$/,p=i.createClass({displayName:"VideoEditor",propTypes:{location:i.PropTypes.string,onChange:i.PropTypes.func},mixins:[o,s],getDefaultProps:function(){return{location:""}},_handleUrlChange:function(e){this.props.onChange({location:r(e)})},render:function(){return i.createElement("div",null,i.createElement("label",null,"URL or KA Video Slug:"," ",i.createElement(l,{name:"location",value:this.props.location,style:{width:290},onChange:this._handleUrlChange}),i.createElement(a,null,"You can paste any URL here. KA video URLs will be converted to just the slug.")))}});e.exports=p},function(e,t,n){"use strict";var r=n(17),i=n(18),o=n(5).Options,s=n(6),a=n(175),l=n(187),c=n(66),p=c.MovablePoint,u=(n(199).number,n(199).point),h=r.createClass({displayName:"ExampleGraphieWidget",mixins:[a,l],propTypes:{apiOptions:o.propTypes,graph:r.PropTypes.object.isRequired,coord:r.PropTypes.arrayOf(r.PropTypes.number)},getDefaultProps:function(){return{coord:null,graph:{box:[400,400],labels:["x","y"],range:[[-10,10],[-10,10]],step:[1,1],gridStep:[1,1],valid:!0,backgroundImage:null,markings:"grid",showProtractor:!1}}},render:function(){return r.createElement(c,{ref:"graphie",box:this.props.graph.box,range:this.props.graph.range,options:this.props.graph,setup:this.setupGraphie,setDrawingAreaAvailable:this.props.apiOptions.setDrawingAreaAvailable},r.createElement(p,{pointSize:5,coord:this.props.coord||[0,0],constraints:[p.constraints.snap(),p.constraints.bound()],onMove:this.movePoint}))},movePoint:function(e){this.change({coord:e})},_getGridConfig:function(e){return i.map(e.step,function(t,n){return s.gridDimensionConfig(t,e.range[n],e.box[n],e.gridStep[n])})},setupGraphie:function(e,t){var n=this._getGridConfig(t);e.graphInit({range:t.range,scale:i.pluck(n,"scale"),axisArrows:"<->",labelFormat:function(e){return"\\small{"+e+"}"},gridStep:t.gridStep,tickStep:i.pluck(n,"tickStep"),labelStep:1,unityLabels:i.pluck(n,"unityLabel")}),e.label([0,t.range[1][1]],t.labels[1],"above")},simpleValidate:function(e){return h.validate(this.getUserInput(),e)}});i.extend(h,{validate:function(e,t){return null==e.coord?{type:"invalid",message:null}:u.equal(e.coord,t.correct)?{type:"points",earned:1,total:1,message:null}:{type:"points",earned:0,total:1,message:null}}}),e.exports={name:"example-graphie-widget",displayName:"Example Graphie Widget",hidden:!0,widget:h}},function(e,t,n){"use strict";var r=n(17),i=n(175),o=n(176),s=n(154).widget,a=r.createClass({displayName:"ExampleGraphieWidgetEditor",mixins:[i,o],getDefaultProps:function(){return{correct:[4,4],graph:{box:[340,340],labels:["x","y"],range:[[-10,10],[-10,10]],step:[1,1],gridStep:[1,1],valid:!0,backgroundImage:null,markings:"grid",showProtractor:!1}}},render:function(){return r.createElement("div",null,r.createElement(s,{graph:this.props.graph,coord:this.props.correct,onChange:this.handleChange,apiOptions:this.props.apiOptions}))},handleChange:function(e){e.coord&&this.change({correct:e.coord})}});e.exports=a},function(e,t,n){"use strict";var r=n(17),i=n(175),o=n(18),s=r.createClass({displayName:"TextInput",render:function(){return r.createElement("input",{ref:"input",value:this.props.value||"",onChange:this.changeValue})},focus:function(){return this.refs.input.focus(),!0},changeValue:function(e){this.props.onChange(e.target.value)}}),a=r.createClass({displayName:"ExampleWidget",propTypes:{value:r.PropTypes.string},getDefaultProps:function(){return{value:""}},mixins:[i],render:function(){return r.createElement(s,{ref:"input",value:this.props.value,onChange:this.change("value")})},getUserInput:function(){return this.props.value},focus:function(){return this.refs.input.focus(),!0},simpleValidate:function(e){return a.validate(this.getUserInput(),e)}});o.extend(a,{validate:function(e,t){return""===e?{type:"invalid",message:"It looks like you haven't answered all of the question yet."}:e===t.correct?{type:"points",earned:1,total:1,message:null}:{type:"points",earned:0,total:1,message:null}}}),e.exports={name:"example-widget",displayName:"Example Widget",defaultAlignment:"inline-block",hidden:!0,widget:a}},function(e,t,n){"use strict";var r=n(17),i=n(175),o=n(176),s=r.createClass({displayName:"ExampleWidgetEditor",mixins:[i,o],getDefaultProps:function(){return{correct:""}},handleAnswerChange:function(e){this.change({correct:e.target.value})},render:function(){return r.createElement("div",null,r.createElement("label",null,"Correct answer:",r.createElement("input",{value:this.props.correct,onChange:this.handleAnswerChange,ref:"input"})))},focus:function(){return this.refs.input.focus(),!0}});e.exports=s},function(e,t,n){"use strict";var r=n(17),i=n(18),o=n(175),s=n(34),a=s.parse,l=s.basicOutput,c=r.createClass({displayName:"SimpleMarkdownTester",propTypes:{value:r.PropTypes.string},getDefaultProps:function(){return{value:""}},mixins:[o],toJSON:function(){return{}},render:function(){var e=a(this.props.value),t=l(e);return r.createElement("div",null,t)},focus:function(){return this.refs.input.focus(),!0},simpleValidate:function(e){return c.validate(this.toJSON(),e)}});i.extend(c,{validate:function(e,t){return{type:"points",earned:0,total:0,message:null}}}),e.exports={name:"simple-markdown-tester",displayName:"Simple Markdown Tester",hidden:!0,widget:c,transform:i.identity}},function(e,t,n){"use strict";var r=n(17),i=n(175),o=n(176),s=r.createClass({displayName:"TextArea",render:function(){return r.createElement("textarea",{ref:"input",value:this.props.value||"",onChange:this.changeValue})},focus:function(){return this.refs.input.focus(),!0},changeValue:function(e){this.props.onChange(e.target.value)}}),a=r.createClass({displayName:"SimpleMarkdownTesterEditor",mixins:[i,o],getDefaultProps:function(){return{value:""}},render:function(){return r.createElement("div",null,r.createElement("label",null,r.createElement("div",null,"Simple markdown contents:"),r.createElement("div",null,r.createElement(s,{value:this.props.value,onChange:this.change("value"),ref:"input"}))))},focus:function(){return this.refs.input.focus(),!0}});e.exports=a},function(e,t,n){"use strict";var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol?"symbol":typeof e},i=n(18),o={"(":"left parenthesis",")":"right parenthesis","[":"open bracket","]":"close bracket","\\{":"left brace","\\}":"right brace","\\lvert":"open vertical bar","\\rvert":"close vertical bar","|":"vertical bar","\\uparrow":"up arrow","\\Uparrow":"up arrow","\\downarrow":"down arrow","\\Downarrow":"down arrow","\\updownarrow":"up down arrow","\\leftarrow":"left arrow","\\Leftarrow":"left arrow","\\rightarrow":"right arrow","\\Rightarrow":"right arrow","\\langle":"open angle","\\rangle":"close angle","\\lfloor":"open floor","\\rfloor":"close floor","\\int":"integral","\\intop":"integral","\\lim":"limit","\\ln":"natural log","\\log":"log","\\sin":"sine","\\cos":"cosine","\\tan":"tangent","\\cot":"cotangent","\\sum":"sum","/":"slash",",":"comma",".":"point","-":"negative","+":"plus","~":"tilde",":":"colon","?":"question mark","'":"apostrophe","\\%":"percent"," ":"space","\\ ":"space","\\$":"dollar sign","\\angle":"angle","\\degree":"degree","\\circ":"circle","\\vec":"vector","\\triangle":"triangle","\\pi":"pi","\\prime":"prime","\\infty":"infinity","\\alpha":"alpha","\\beta":"beta","\\gamma":"gamma","\\omega":"omega","\\theta":"theta","\\sigma":"sigma","\\lambda":"lambda","\\tau":"tau","\\Delta":"delta","\\delta":"delta","\\mu":"mu","\\rho":"rho","\\nabla":"del","\\ell":"ell","\\ldots":"dots"},s={"\\prime":"prime","\\degree":"degree","\\circ":"degree"},a={"|":"open vertical bar",".":""},l={"|":"close vertical bar",".":""},c={"+":"plus","-":"minus","\\pm":"plus minus","\\cdot":"dot","*":"times","/":"divided by","\\times":"times","\\div":"divided by","\\circ":"circle","\\bullet":"bullet"},p={"=":"equals","\\approx":"approximately equals","\\neq":"does not equal","\\ne":"does not equal","\\geq":"is greater than or equal to","\\ge":"is greater than or equal to","\\leq":"is less than or equal to","\\le":"is less than or equal to",">":"is greater than","<":"is less than","\\leftarrow":"left arrow","\\Leftarrow":"left arrow","\\rightarrow":"right arrow","\\Rightarrow":"right arrow",":":"colon"},u=function(e,t,n){if(e){var r;if(r="open"===t?e in a?a[e]:o[e]||e:"close"===t?e in l?l[e]:o[e]||e:"bin"===t?c[e]||e:"rel"===t?p[e]||e:o[e]||e,r===e&&!/^\w+$/.test(e))throw"KaTeX a11y "+t+" string not found: "+e;/^\d+$/.test(r)&&n.length>0&&/^\d+$/.test(n[n.length-1])?n[n.length-1]+=r:r&&n.push(r)}},h=function(e,t){var n=[];e.push(n),t(n)},d={accent:function(e,t){h(t,function(t){f(e.value.base,t),t.push("with"),f(e.value.accent,t),t.push("on top")})},bin:function(e,t){u(e.value,"bin",t)},close:function(e,t){u(e.value,"close",t)},color:function e(t,n){var e=t.value.color.replace(/katex-/,"");h(n,function(n){n.push("start color "+e),f(t.value.value,n),n.push("end color "+e)})},delimsizing:function(e,t){e.value.value&&"."!==e.value.value&&u(e.value.value,"normal",t)},genfrac:function(e,t){h(t,function(t){e.value.hasBarLine?(t.push("start fraction"),u(e.value.leftDelim,"open",t),f(e.value.numer,t),t.push("divided by"),f(e.value.denom,t),u(e.value.rightDelim,"close",t),t.push("end fraction")):(t.push("start binomial"),u(e.value.leftDelim,"open",t),f(e.value.numer,t),t.push("over"),f(e.value.denom,t),u(e.value.rightDelim,"close",t),t.push("end binomial"))})},katex:function(e,t){t.push("KaTeX")},leftright:function(e,t){h(t,function(t){u(e.value.left,"open",t),f(e.value.body,t),u(e.value.right,"close",t)})},llap:function(e,t){f(e.value.body,t)},mathord:function(e,t){f(e.value,t)},op:function(e,t){u(e.value.body,"normal",t)},open:function(e,t){u(e.value,"open",t)},ordgroup:function(e,t){f(e.value,t)},overline:function(e,t){h(t,function(t){t.push("start overline"),f(e.value.body,t),t.push("end overline")})},phantom:function(e,t){t.push("empty space")},punct:function(e,t){u(e.value,"punct",t)},rel:function(e,t){u(e.value,"rel",t)},rlap:function(e,t){f(e.value.body,t)},rule:function(e,t){t.push("rule")},sizing:function(e,t){f(e.value.value,t)},spacing:function(e,t){t.push("space")},styling:function(e,t){f(e.value.value,t)},sqrt:function(e,t){h(t,function(t){e.value.index&&(t.push("root"),t.push("start index"),f(e.value.index,t),t.push("end index")),t.push("square root of"),f(e.value.body,t),t.push("end square root")})},supsub:function(e,t){e.value.base&&f(e.value.base,t),e.value.sub&&h(t,function(t){t.push("start subscript"),f(e.value.sub,t),t.push("end subscript")});var n=e.value.sup;if(n){var i=s[n],o=n.value;!i&&o&&(i="object"===("undefined"==typeof o?"undefined":r(o))&&1===o.length?s[o[0].value]:s[o]),h(t,function(t){return i?void t.push(i):(t.push("start superscript"),f(e.value.sup,t),void t.push("end superscript"))})}},text:function(e,t){"string"!=typeof e.value?f(e.value.body,t):u(e,"normal",t)},textord:function(e,t){f(e.value,t)}},f=function e(t,n){if(n=n||[],"string"==typeof t)u(t,"normal",n);else if(t.constructor===Array)for(var r=0;r<t.length;r++)e(t[r],n);else{if(!(t.type&&t.type in d))throw"KaTeX a11y un-recognized type: "+t.type;d[t.type](t,n)}return n},g=function e(t,n){for(var r=n.ownerDocument,i=0;i<t.length;i++){var o=t[i];if(i>0&&n.appendChild(r.createTextNode(", ")),"string"==typeof o)n.appendChild(r.createTextNode(o));else{var s=r.createElement("span");n.appendChild(s),e(o,s)}}},m=function(e){return katex.__parse(e)},v=function(e,t){var n=m(e),r=f(n);g(r,t)},y=function(e){var t=m(e),n=f(t);return i.flatten(n).join(", ")};e.exports={render:v,renderString:y,parseMath:m}},function(e,t,n){"use strict";var r=n(84),i=r.interactiveSizes,o=n(17),s=512,a=688,l={SMALL:"small",MEDIUM:"medium",LARGE:"large",XLARGE:"xlarge"};e.exports={containerSizeClass:l,containerSizeClassPropType:o.PropTypes.oneOf(Object.values(l)),getClassFromWidth:function(e){return e?e<=s?l.SMALL:e<=a?l.MEDIUM:l.LARGE:l.MEDIUM},getInteractiveBoxFromSizeClass:function(e){return e===l.SMALL?[i.defaultBoxSizeSmall,i.defaultBoxSizeSmall]:[i.defaultBoxSize,i.defaultBoxSize]}}},function(e,t,n){"use strict";var r={Keypad:n(214),KeypadInput:n(216)},i=n(198),o=i.KeypadTypes,s={KeypadTypes:o},a=n(215),l=a.keypadConfigurationPropType,c=a.keypadElementPropType,p={keypadConfigurationPropType:l,keypadElementPropType:c};e.exports={components:r,consts:s,propTypes:p}},function(e,t,n){"use strict";function r(e){a.extend(this,e)}var i=n(6),o=i.nestedMap,s=i.deepEq,a=n(18),l=function(){throw new Error("Abstract method! Must be implemented by Graphie Movable"+this.constructor.displayName)};a.extend(r.prototype,{movableProps:[],add:l,modify:l,remove:l,toFront:function(){}});var c=function(e,t){return a.extend({},e,{children:a.filter(a.flatten(t),a.identity)})},p=function(e){var t=function e(t){if(!(this instanceof e))throw new Error("Use createElement or JSX with graphie movables");return this.props=c(t,t.children||[]),this};return e.displayName=e.displayName||a.uniqueId("GraphieClass"),t.displayName=e.displayName,t.prototype=new r(e),t.prototype.constructor=t,t},u=function(e){return p({displayName:e.name||a.uniqueId("GraphieSimpleClass"),movableProps:["children"],add:function(t){this._elements=e(t,this.props),this._prevProps=this.props},modify:function(e){if(!s(this.props,this._prevProps))return this.remove(),this.add(e),this._prevProps=this.props,"reordered"},remove:function(){o(this._elements,function(e){e&&e.remove()}),this._elements=null,this._prevProps=null},toFront:function(){o(this._elements,function(e){a.isFunction(e.toFront)&&e.toFront()})}})};e.exports={GraphieMovable:r,createClass:p,createSimpleClass:u}},function(e,t,n){"use strict";var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},i=n(18),o=n(163),s=n(188),a=n(165),l=n(190),c=(a.assert,o.createClass({displayName:"MovablePoint",movableProps:["children"],_getProps:function(){if(this.props.isMobile){var e=this.props.isMobile,t=e?{stroke:"#ffffff","stroke-width":3,fill:l.INTERACTIVE}:{stroke:l.INTERACTIVE,fill:l.INTERACTIVE},n=e?Object.assign(t,this.props.mobileStyleOverride||{}):Object.assign(t,this.props.normalStyle),i=e?r({},t,{"stroke-width":0,scale:.75}):this.props.highlightStyle,o=Object.assign({normalStyle:n,highlightStyle:i,shadow:e,tooltip:e&&this.props.showTooltips},e?{pointSize:7}:{});return Object.assign(this.props,o)}return this.props},add:function(e){this.point=s.addMovablePoint(e,this._getProps())},modify:function(){this.point.modify(this._getProps())},remove:function(){this.point.remove()},toFront:function(){this.point.toFront()},grab:function(e){this.point.grab(e)}}));i.extend(c,s.MovablePoint);var p=o.createClass({displayName:"MovableLine",movableProps:["children"],add:function(e){var t=i.pluck(this.props.children,"point"),n=i.extend({},this.props,{points:t});this.line=s.addMovableLine(e,n)},modify:function(){var e=i.pluck(this.props.children,"point"),t=i.extend({},this.props,{points:e});this.line.modify(t)},remove:function(){this.line.remove()},toFront:function(){this.line.toFront()}});i.extend(p,s.MovableLine);var u=o.createSimpleClass(function(e,t){var n=t.coord;return t.unscaled&&(n=e.unscalePoint(n)),e.label(n,t.text,t.direction,t.tex,t.style)}),h=o.createClass({displayName:"Line",movableProps:["children"],add:function(e){var t=this.props;this.graphie=e,this.line=this.graphie.line(t.start,t.end,t.style)},modify:function(){var e=this.props,t=this.graphie.svgPath([e.start,e.end]);this.line.attr(i.extend({},e.style,{path:t}))},remove:function(){this.line.remove()},toFront:function(){this.line.toFront()}}),d=o.createClass({displayName:"Parabola",movableProps:["children"],add:function(e){var t=this.props;this.graphie=e,this.parabola=this.graphie.parabola(t.a,t.b,t.c,t.style)},modify:function(){var e=this.props,t=this.graphie.svgParabolaPath(e.a,e.b,e.c);this.parabola.attr(i.extend({},e.style,{path:t}))},remove:function(){this.parabola.remove()},toFront:function(){this.parabola.toFront()}}),f=o.createClass({displayName:"Sinusoid",movableProps:["children"],add:function(e){var t=this.props;this.graphie=e,this.sinusoid=this.graphie.sinusoid(t.a,t.b,t.c,t.d,t.style)},modify:function(){var e=this.props,t=this.graphie.svgSinusoidPath(e.a,e.b,e.c,e.d);this.sinusoid.attr(i.extend({},e.style,{path:t}))},remove:function(){this.sinusoid.remove()},toFront:function(){this.sinusoid.toFront()}}),g=o.createSimpleClass(function(e,t){return e.plot(t.fn,t.range,t.style)}),m=o.createSimpleClass(function(e,t){return e.plotParametric(t.fn,t.range,t.style)}),v=o.createSimpleClass(function(e,t){return e.ellipse(t.coord,e.unscaleVector([4,4]),{fill:t.color||l.BLACK,stroke:t.color||l.BLACK})}),y=o.createClass({displayName:"Path",movableProps:["children"],add:function(e){var t=this.props;this.graphie=e,this.path=this.graphie.path(t.coords,t.style)},modify:function(){var e=this.props,t=this.graphie.svgPath(e.coords);this.path.attr({path:t})},remove:function(){this.path.remove()},toFront:function(){this.path.toFront()}}),b=o.createSimpleClass(function(e,t){var n=t.center,r=t.radius;return t.unscaled&&(n=e.unscalePoint(n),r=e.unscaleVector(r)),e.arc(n,r,t.startAngle,t.endAngle,t.sector,t.style)}),E=o.createSimpleClass(function(e,t){return e.circle(t.center,t.radius,t.style)}),T=o.createSimpleClass(function(e,t){return e.rect(t.x,t.y,t.width,t.height,t.style)});e.exports={Arc:b,Circle:E,Label:u,Line:h,MovableLine:p,MovablePoint:c,Parabola:d,Path:y,Plot:g,PlotParametric:m,Point:v,Sinusoid:f,Rect:T}},function(e,t,n){"use strict";function r(){var e=document.createElement("div"),t=["transform","msTransform","MozTransform","WebkitTransform","OTransform"],n=null;return o.each(t,function(t){"undefined"!=typeof e.style[t]&&(n=t)}),n}function i(){var e=document.createElement("div"),t=c.getPrefixedTransform();return e.style[t]="translateZ(0px)",!!e.style[t]}var o=n(18),s=n(202),a=null,l=null,c={assert:function(e,t){if(!e)throw new Error("Assertion Error"+(t?": "+t:""))},createGettersFor:function(e,t){o.each(o.keys(t),function(t){void 0===e.prototype[t]&&(e.prototype[t]=function(){return this.state[t]})})},addMovableHelperMethodsTo:function(e){o.each(s,function(t,n){void 0===e.prototype[n]&&(e.prototype[n]=t)})},arrayify:function(e){return null==e?[]:o.isArray(e)?o.filter(o.flatten(e),o.identity):[e]},normalizeOptions:function(e,t){var n=o.clone(t);return o.each(e,function(e){var r=t[e];if(void 0!==r){var i=c.arrayify(r);n[e]=i}}),n},getPrefixedTransform:function(){return a=a||r()},getCanUse3dTransform:function(){return null==l&&(l=i()),l}};e.exports=c},function(e,t,n){"use strict";var r=n(200);n(201),e.exports=r},function(e,t,n){(function(t){!function(){var n=/\r\n?/g,r=/\t/g,i=/\f/g,o=function(e){return e.replace(n,"\n").replace(i,"").replace(r,"    ")},s=function(e){var t=Object.keys(e);t.sort(function(t,n){var r=e[t].order,i=e[n].order;return r!==i?r-i:t<n?-1:t>n?1:0});var n=function(r,i){var o=[];i=i||{};for(var s="";r;){for(var a=0;a<t.length;){var l,c=t[a],p=e[c];if(l=p.match?p.match(r,i,s):p.regex.exec(r)){var u=l[0];r=r.substring(u.length);var h=p.parse(l,n,i);null==h.type&&(h.type=c),o.push(h),s=u;break}a++}if(a===t.length)throw new Error("could not find rule to match content: "+r)}return o},r=function(e,t){return n(o(e),t)};return r},a=function(e){var t=function(t,n){return n.inline?e.exec(t):null};return t.regex=e,t},l=function(e){var t=function(t,n){return n.inline?null:e.exec(t)};return t.regex=e,t},c=function(e){var t=function(t,n){return e.exec(t)};return t.regex=e,t},p=function(e){var t=function(n,r){if(r=r||{},Array.isArray(n)){for(var i=r.key,o=[],s=!1,a=0;a<n.length;a++){r.key=a;var l=t(n[a],r),c="string"==typeof l;c&&s?o[o.length-1]+=l:o.push(l),s=c}return r.key=i,o}return e(n,t,r)};return t},u=function(e){var t=function(n,r){return r=r||{},Array.isArray(n)?n.map(function(e){return t(e,r)}).join(""):e(n,t,r)};return t},h="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103,d=function(e){return e._store={validated:!0,originalProps:e.props},e},f=function(e,t,n,r){n=n||{},r="undefined"==typeof r||r;var i="";for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&n[o]&&(i+=" "+o+'="'+n[o]+'"');var s="<"+e+i+">";return r?s+t+"</"+e+">":s},g={},m=function(e){if(null==e)return null;try{var t=decodeURIComponent(e).replace(/[^A-Za-z0-9/:]/g,"").toLowerCase();if(0===t.indexOf("javascript:"))return null}catch(e){return null}return e},v=function(e,t,n){var r=n.inline||!1;n.inline=!0;var i=e(t,n);return n.inline=r,i},y=function(e,t,n){var r=n.inline||!1;n.inline=!1;var i=e(t+"\n\n",n);return n.inline=r,i},b=function(e,t,n){return{content:v(t,e[1],n)}},E=function(){return{}},T="(?:[*+-]|\\d+\\.)",w="( *)("+T+") +",x=new RegExp("^"+w),C=new RegExp(w+"[^\\n]*(?:\\n(?!\\1"+T+" )[^\\n]*)*(\n|$)","gm"),S=/\n{2,}$/,P=S,k=/ *\n+$/,_=new RegExp("^( *)("+T+") [\\s\\S]+?(?:\n{2,}(?! )(?!\\1"+T+" )\\n*|\\s*\n*$)"),M=/^$|\n *$/,O=function(){var e=/^ *| *\| *$/g,t=/^ *|\| *$/g,n=/(?: *\| *)?\n$/,r=/\n$/,i=/^ *\| *| *\| *$/g,o=/ *\| */,s=/^ *-+: *$/,a=/^ *:-+: *$/,l=/^ *:-+ *$/,c=function(e){return s.test(e)?"right":a.test(e)?"center":l.test(e)?"left":null},p=function(t,n,r){var i=t[1].replace(e,"").split(o);return i.map(function(e){return n(e,r)})},u=function(e,n,r){var i=e[2].replace(t,"").split(o);return i.map(c)},h=function(e,t,r){var s=e[3].replace(n,"").split("\n");return s.map(function(e){var n=e.replace(i,"").split(o);return n.map(function(e){return t(e,r)})})},d=function(e,t,n){var i=e[3].replace(r,"").split("\n");return i.map(function(e){var r=e.split(o);return r.map(function(e){return t(e,n)})})},f=function(e,t,n){n.inline=!0;var r=p(e,t,n),i=u(e,t,n),o=h(e,t,n);return n.inline=!1,{type:"table",header:r,align:i,cells:o}},g=function(e,t,n){n.inline=!0;var r=p(e,t,n),i=u(e,t,n),o=d(e,t,n);return n.inline=!1,{type:"table",header:r,align:i,cells:o}};return{parseTable:f,parseNpTable:g,NPTABLE_REGEX:/^ *(\S.*\|.*)\n *([-:]+ *\|[-| :]*)\n((?:.*\|.*(?:\n|$))*)\n*/}}(),N="(?:\\[[^\\]]*\\]|[^\\]]|\\](?=[^\\[]*\\]))*",I="\\s*<?([^\\s]*?)>?(?:\\s+['\"]([\\s\\S]*?)['\"])?\\s*",A=/mailto:/i,R=function(e,t,n){var r=(e[2]||e[1]).replace(/\s+/g," ").toLowerCase();if(t._defs&&t._defs[r]){var i=t._defs[r];n.target=i.target,n.title=i.title}return t._refs=t._refs||{},t._refs[r]=t._refs[r]||[],t._refs[r].push(n),n},D={heading:{match:l(/^ *(#{1,6}) *([^\n]+?) *#* *(?:\n *)+\n/),parse:function(e,t,n){return{level:e[1].length,content:v(t,e[2],n)}},react:function(e,t,n){return d({type:"h"+e.level,key:n.key,props:{children:t(e.content,n)},$$typeof:h,_store:null})},html:function(e,t,n){return f("h"+e.level,t(e.content,n))}},nptable:{match:l(O.NPTABLE_REGEX),regex:O.NPTABLE_REGEX,parse:O.parseNpTable},lheading:{match:l(/^([^\n]+)\n *(=|-){3,} *(?:\n *)+\n/),parse:function(e,t,n){return{type:"heading",level:"="===e[2]?1:2,content:v(t,e[1],n)}}},hr:{match:l(/^( *[-*_]){3,} *(?:\n *)+\n/),parse:E,react:function(e,t,n){return d({type:"hr",key:n.key,props:g,$$typeof:h,_store:null})},html:function(e,t,n){return"<hr>"}},codeBlock:{match:l(/^(?:    [^\n]+\n*)+(?:\n *)+\n/),parse:function(e,t,n){var r=e[0].replace(/^    /gm,"").replace(/\n+$/,"");return{lang:void 0,content:r}},react:function(e,t,n){var r=e.lang?"markdown-code-"+e.lang:void 0;return d({type:"pre",key:n.key,props:{children:d({type:"code",props:{className:r,children:e.content},$$typeof:h,_store:null})},$$typeof:h,_store:null})},html:function(e,t,n){var r=e.lang?"markdown-code-"+e.lang:void 0,i=f("code",e.content,{class:r});return f("pre",i)}},fence:{match:l(/^ *(`{3,}|~{3,}) *(\S+)? *\n([\s\S]+?)\s*\1 *(?:\n *)+\n/),parse:function(e,t,n){return{type:"codeBlock",lang:e[2]||void 0,content:e[3]}}},blockQuote:{match:l(/^( *>[^\n]+(\n[^\n]+)*\n*)+\n{2,}/),parse:function(e,t,n){var r=e[0].replace(/^ *> ?/gm,"");return{content:t(r,n)}},react:function(e,t,n){return d({type:"blockquote",key:n.key,props:{children:t(e.content,n)},$$typeof:h,_store:null})},html:function(e,t,n){return f("blockquote",t(e.content,n))}},list:{match:function(e,t,n){var r=M.test(n),i=t._list||!t.inline;return r&&i?_.exec(e):null},parse:function(e,t,n){var r=e[2],i=r.length>1,o=i?+r:void 0,s=e[0].replace(P,"\n").match(C),a=!1,l=s.map(function(e,r){var i=x.exec(e)[0].length,o=new RegExp("^ {1,"+i+"}","gm"),l=e.replace(o,"").replace(x,""),c=r===s.length-1,p=l.indexOf("\n\n")!==-1,u=p||c&&a;a=u;var h=n.inline,d=n._list;n._list=!0;var f;u?(n.inline=!1,f=l.replace(k,"\n\n")):(n.inline=!0,f=l.replace(k,""));var g=t(f,n);return n.inline=h,n._list=d,g});return{ordered:i,start:o,items:l}},react:function(e,t,n){var r=e.ordered?"ol":"ul";return d({type:r,key:n.key,props:{start:e.start,children:e.items.map(function(e,r){return d({type:"li",key:r,props:{children:t(e,n)},$$typeof:h,_store:null})})},$$typeof:h,_store:null})},html:function(e,t,n){var r=e.items.map(function(e){return f("li",t(e,n))}).join(""),i=e.ordered?"ol":"ul",o={start:e.start};return f(i,r,o)}},def:{match:l(/^ *\[([^\]]+)\]: *<?([^\s>]*)>?(?: +["(]([^\n]+)[")])? *\n(?: *\n)?/),parse:function(e,t,n){var r=e[1].replace(/\s+/g," ").toLowerCase(),i=e[2],o=e[3];return n._refs&&n._refs[r]&&n._refs[r].forEach(function(e){e.target=i,e.title=o}),n._defs=n._defs||{},n._defs[r]={target:i,title:o},{def:r,target:i,title:o}},react:function(){return null},html:function(){return null}},table:{match:l(/^ *\|(.+)\n *\|( *[-:]+[-| :]*)\n((?: *\|.*(?:\n|$))*)\n*/),parse:O.parseTable,react:function(e,t,n){var r=function(t){return null==e.align[t]?{}:{textAlign:e.align[t]}},i=e.header.map(function(e,i){return d({type:"th",key:i,props:{style:r(i),children:t(e,n)},$$typeof:h,_store:null})}),o=e.cells.map(function(e,i){return d({type:"tr",key:i,props:{children:e.map(function(e,i){return d({type:"td",key:i,props:{style:r(i),children:t(e,n)},$$typeof:h,_store:null})})},$$typeof:h,_store:null})});return d({type:"table",key:n.key,props:{children:[d({type:"thead",key:"thead",props:{children:d({type:"tr",props:{children:i},$$typeof:h,_store:null})},$$typeof:h,_store:null}),d({type:"tbody",key:"tbody",props:{children:o},$$typeof:h,_store:null})]},$$typeof:h,_store:null})},html:function(e,t,n){var r=function(t){return null==e.align[t]?"":"text-align:"+e.align[t]+";"},i=e.header.map(function(e,i){return f("th",t(e,n),{style:r(i)})}).join(""),o=e.cells.map(function(e){var i=e.map(function(e,i){return f("td",t(e,n),{style:r(i)})}).join("");return f("tr",i)}).join(""),s=f("thead",f("tr",i)),a=f("tbody",o);return f("table",s+a)}},newline:{match:l(/^(?:\n *)*\n/),parse:E,react:function(e,t,n){return"\n"},html:function(e,t,n){return"\n"}},paragraph:{match:l(/^((?:[^\n]|\n(?! *\n))+)(?:\n *)+\n/),parse:b,react:function(e,t,n){return d({type:"div",key:n.key,props:{className:"paragraph",children:t(e.content,n)},$$typeof:h,_store:null})},html:function(e,t,n){var r={class:"paragraph"};return f("div",t(e.content,n),r)}},escape:{match:a(/^\\([^0-9A-Za-z\s])/),parse:function(e,t,n){return{type:"text",content:e[1]}}},autolink:{match:a(/^<([^ >]+:\/[^ >]+)>/),parse:function(e,t,n){return{type:"link",content:[{type:"text",content:e[1]}],target:e[1]}}},mailto:{match:a(/^<([^ >]+@[^ >]+)>/),parse:function(e,t,n){var r=e[1],i=e[1];return A.test(i)||(i="mailto:"+i),{type:"link",content:[{type:"text",content:r}],target:i}}},url:{match:a(/^(https?:\/\/[^\s<]+[^<.,:;"')\]\s])/),parse:function(e,t,n){return{type:"link",content:[{type:"text",content:e[1]}],target:e[1],title:void 0}}},link:{match:a(new RegExp("^\\[("+N+")\\]\\("+I+"\\)")),parse:function(e,t,n){var r={content:t(e[1],n),target:e[2],title:e[3]};return r},react:function(e,t,n){return d({type:"a",key:n.key,props:{href:m(e.target),title:e.title,children:t(e.content,n)},$$typeof:h,_store:null})},html:function(e,t,n){var r={href:m(e.target),title:e.title};return f("a",t(e.content,n),r)}},image:{match:a(new RegExp("^!\\[("+N+")\\]\\("+I+"\\)")),parse:function(e,t,n){var r={alt:e[1],target:e[2],title:e[3]};return r},react:function(e,t,n){return d({type:"img",key:n.key,props:{src:m(e.target),alt:e.alt,title:e.title},$$typeof:h,_store:null})},html:function(e,t,n){var r={src:m(e.target),alt:e.alt,title:e.title};return f("img","",r,!1)}},reflink:{match:a(new RegExp("^\\[("+N+")\\]\\s*\\[([^\\]]*)\\]")),parse:function(e,t,n){return R(e,n,{type:"link",content:t(e[1],n)})}},refimage:{match:a(new RegExp("^!\\[("+N+")\\]\\s*\\[([^\\]]*)\\]")),parse:function(e,t,n){return R(e,n,{type:"image",alt:e[1]})}},strong:{match:a(/^\*\*([\s\S]+?)\*\*(?!\*)/),parse:b,react:function(e,t,n){return d({type:"strong",key:n.key,props:{children:t(e.content,n)},$$typeof:h,_store:null})},html:function(e,t,n){return f("strong",t(e.content,n))}},u:{match:a(/^__([\s\S]+?)__(?!_)/),parse:b,react:function(e,t,n){return d({type:"u",key:n.key,props:{children:t(e.content,n)},$$typeof:h,_store:null})},html:function(e,t,n){return f("u",t(e.content,n))}},em:{match:a(new RegExp("^\\b_((?:__|[\\s\\S])+?)_\\b|^\\*(?=\\S)((?:\\*\\*|\\s+[^\\*\\s]|[^\\s\\*])*?[^\\s\\*])\\*(?!\\*)")),
parse:function(e,t,n){return{content:t(e[2]||e[1],n)}},react:function(e,t,n){return d({type:"em",key:n.key,props:{children:t(e.content,n)},$$typeof:h,_store:null})},html:function(e,t,n){return f("em",t(e.content,n))}},del:{match:a(/^~~(?=\S)([\s\S]*?\S)~~/),parse:b,react:function(e,t,n){return d({type:"del",key:n.key,props:{children:t(e.content,n)},$$typeof:h,_store:null})},html:function(e,t,n){return f("del",t(e.content,n))}},inlineCode:{match:a(/^(`+)\s*([\s\S]*?[^`])\s*\1(?!`)/),parse:function(e,t,n){return{content:e[2]}},react:function(e,t,n){return d({type:"code",key:n.key,props:{children:e.content},$$typeof:h,_store:null})},html:function(e,t,n){return f("code",e.content)}},br:{match:c(/^ {2,}\n/),parse:E,react:function(e,t,n){return d({type:"br",key:n.key,props:g,$$typeof:h,_store:null})},html:function(e,t,n){return"<br>"}},text:{match:a(/^[\s\S]+?(?=[^0-9A-Za-z\s\u00ff-\uffff]|\n\n| {2,}\n|\w+:\S|$)/),parse:function(e,t,n){return{content:e[0]}},react:function(e,t,n){return e.content},html:function(e,t,n){return e.content}}};Object.keys(D).forEach(function(e,t){D[e].order=t});var L=function(e,t){t||"undefined"==typeof console||console.warn("simple-markdown ruleOutput should take 'react' or 'html' as the second argument."),t=t||"react";var n=function(n,r,i){return e[n.type][t](n,r,i)};return n},F=s(D),B=function(e){return F(e+"\n\n",{inline:!1})},z=function(e){return F(e,{inline:!0})},q=function(e){return F(e,{inline:!S.test(e)})},U=p(L(D,"react")),W=u(L(D,"html")),H={defaultRules:D,parserFor:s,ruleOutput:L,reactFor:p,htmlFor:u,inlineRegex:a,blockRegex:l,anyScopeRegex:c,parseInline:v,parseBlock:y,defaultRawParse:F,defaultBlockParse:B,defaultInlineParse:z,defaultImplicitParse:q,defaultReactOutput:U,defaultHtmlOutput:W,preprocess:o,sanitizeUrl:m,defaultParse:q,outputFor:p,defaultOutput:U};"undefined"!=typeof e&&e.exports?e.exports=H:"undefined"!=typeof t?t.SimpleMarkdown=H:window.SimpleMarkdown=H}()}).call(t,function(){return this}())},function(e,t,n){"use strict";var r=n(52),i=r.StyleSheet,o=r.css,s=n(17),a=n(18),l={grayLight:"#aaa",basicBorderColor:"#ccc",white:"#fff"},c={borderBottom:"9px solid transparent",borderTop:"9px solid transparent",content:'" "',height:"0",position:"absolute",top:"0",width:"0"},p=i.create({infoTip:{display:"inline-block",marginLeft:"5px",position:"relative"},infoTipContainer:{position:"absolute",top:"-12px",left:"22px",zIndex:"1000"},infoTipTriangle:{height:"10px",left:"0",position:"absolute",top:"8px",width:"0",zIndex:"1",":before":a.extend({},c,{borderRight:"9px solid #bbb",right:"0"}),":after":a.extend({},c,{borderRight:"9px solid "+l.white,right:"-1px"})},verticalShadow:{border:"1px solid "+l.basicBorderColor,boxShadow:"0 1px 3px "+l.basicBorderColor,borderBottom:"1px solid "+l.grayLight},infoTipContentContainer:{background:l.white,padding:"5px 10px",width:"240px"}}),u="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAoAAAAKCAYAAACNMs+9AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAA3NpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNS1jMDIxIDc5LjE1NDkxMSwgMjAxMy8xMC8yOS0xMTo0NzoxNiAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wTU09Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9tbS8iIHhtbG5zOnN0UmVmPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VSZWYjIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtcE1NOk9yaWdpbmFsRG9jdW1lbnRJRD0ieG1wLmRpZDo2N2M3NTAxYS04YmVlLTQ0M2MtYmRiNS04OGM2N2IxN2NhYzEiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6OUJCRTk4Qjc4NjAwMTFFMzg3QUJDNEI4Mzk2QTRGQkQiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6OUJCRTk4QjY4NjAwMTFFMzg3QUJDNEI4Mzk2QTRGQkQiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIChNYWNpbnRvc2gpIj4gPHhtcE1NOkRlcml2ZWRGcm9tIHN0UmVmOmluc3RhbmNlSUQ9InhtcC5paWQ6NGE5ZDI0OTMtODk1NC00OGFkLTlhMTgtZDAwM2MwYWNjNDJlIiBzdFJlZjpkb2N1bWVudElEPSJ4bXAuZGlkOjY3Yzc1MDFhLThiZWUtNDQzYy1iZGI1LTg4YzY3YjE3Y2FjMSIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/Pqm89uYAAADMSURBVHjaXJA9DoJAEIUH1M4TUHIFsCMGen9OwCGw1YRGW2ntKel0exsojHIBC0ouQAyUviFDstmXfNmZeS+zm7XSNCXRFiRgJf0bXIHixpbhGdxBBJYC1w/xaA424MhNEATkui71fU9KqfEU78UbD9PdbJRlOdae55GmhIP+1NV1TcMwkOM41DSNHvRtMhTHMRVFQW3b6mOLgx99kue5GRp/gIOZuZGvNpTNwjD8oliANU+qqqKu6/TQBdymN57AHjzBT+B6Jx79BRgAvc49kQA4yxgAAAAASUVORK5CYII=",h=s.createClass({displayName:"InfoTip",getInitialState:function(){return{hover:!1}},render:function(){return s.createElement("div",{className:o(p.infoTip)},s.createElement("img",{width:10,height:10,src:u,onMouseEnter:this.handleMouseEnter,onMouseLeave:this.handleMouseLeave}),s.createElement("div",{className:o(p.infoTipContainer),style:{display:this.state.hover?"block":"none"}},s.createElement("div",{className:o(p.infoTipTriangle)}),s.createElement("div",{className:o(p.verticalShadow,p.infoTipContentContainer)},this.props.children)))},handleMouseEnter:function(){this.setState({hover:!0})},handleMouseLeave:function(){this.setState({hover:!1})}});e.exports=h},function(e,t,n){"use strict";var r=n(17),i=n(18),o=n(29),s=n(132),a=n(6),l=n(184),c=r.createClass({displayName:"Radio",propTypes:{apiOptions:l.propTypes.apiOptions,choices:l.propTypes.choices,deselectEnabled:r.PropTypes.bool,displayCount:r.PropTypes.any,interWidgets:r.PropTypes.func,multipleSelect:r.PropTypes.bool,onChange:r.PropTypes.func.isRequired,onePerLine:l.propTypes.onePerLine,questionCompleted:r.PropTypes.bool,reviewModeRubric:l.propTypes.reviewModeRubric,trackInteraction:r.PropTypes.func.isRequired,values:r.PropTypes.arrayOf(r.PropTypes.bool)},getDefaultProps:function(){return{choices:[{}],displayCount:null,multipleSelect:!1,deselectEnabled:!1}},_renderRenderer:function(e){e=e||"";var t=1,n={},i=e.replace(/\{\{passage-ref (\d+) (\d+)(?: "([^"]*)")?\}\}/g,function(e,r,i,o){var l="passage-ref "+t;return t++,n[l]={type:"passage-ref",graded:!1,options:{passageNumber:parseInt(r),referenceNumber:parseInt(i),summaryText:o},version:s.version},"[["+a.snowman+" "+l+"]]"});return r.createElement(o,{key:"choiceContentRenderer",content:i,widgets:n,interWidgets:this._interWidgets,alwaysUpdate:!0})},_interWidgets:function(e,t){return t.length?t:this.props.interWidgets(e)},focus:function(e){return this.refs.baseRadio.focus(e)},onCheckedChange:function(e){this.props.onChange({values:e}),this.props.trackInteraction()},getUserInput:function(){if(this.props.values){for(var e=null,t=!1,n=this.props.values.slice(),r=0;r<this.props.values.length;r++){var o=this.props.choices[r].originalIndex;n[o]=this.props.values[r],this.props.choices[r].isNoneOfTheAbove&&(e=o,n[r]&&(t=!0))}return{values:n,noneOfTheAboveIndex:e,noneOfTheAboveSelected:t}}return{values:i.map(this.props.choices,function(){return!1})}},simpleValidate:function(e){return c.validate(this.getUserInput(),e)},enforceOrdering:function(e){var t=i.pluck(e,"content");return i.isEqual(t,[i18n._("False"),i18n._("True")])||i.isEqual(t,[i18n._("No"),i18n._("Yes")])?[e[1]].concat([e[0]]):e},render:function(){var e=this,t=this.props.choices,n=this.props.values||i.map(t,function(){return!1});return t=i.map(t,function(t,r){var i=t.isNoneOfTheAbove&&!t.content?i18n._("None of the above"):t.content;return{content:e._renderRenderer(i),checked:n[r],correct:e.props.questionCompleted&&n[r],clue:e._renderRenderer(t.clue),isNoneOfTheAbove:t.isNoneOfTheAbove}}),t=this.enforceOrdering(t),r.createElement(l,{ref:"baseRadio",labelWrap:!0,onePerLine:this.props.onePerLine,multipleSelect:this.props.multipleSelect,choices:t,onCheckedChange:this.onCheckedChange,reviewModeRubric:this.props.reviewModeRubric,deselectEnabled:this.props.deselectEnabled,apiOptions:this.props.apiOptions})}});i.extend(c,{validate:function(e,t){var n=i.reduce(e.values,function(e,t){return e+(t?1:0)},0);if(0===n)return{type:"invalid",message:null};if(e.noneOfTheAboveSelected&&n>1)return{type:"invalid",message:i18n._("'None of the above' may not be selected when other answers are selected.")};var r=i.all(e.values,function(n,r){var o=void 0;return o=e.noneOfTheAboveIndex===r?i.all(t.choices,function(e,t){return r===t||!e.correct}):!!t.choices[r].correct,o===n});return{type:"points",earned:r?1:0,total:1,message:null}}}),e.exports=c},function(e,t,n){"use strict";var r=n(17),i=n(180),o=n(18),s=n(5).ClassNames,a=n(181),l=n(29),c=n(179),p=n(195),u=n(6).captureScratchpadTouchStart,h="math",d="text",f="tex",g=r.createClass({displayName:"InputWithExamples",propTypes:{type:r.PropTypes.oneOf([h,d,f]),value:r.PropTypes.string,onChange:r.PropTypes.func.isRequired,className:r.PropTypes.string,examples:r.PropTypes.arrayOf(r.PropTypes.string).isRequired,shouldShowExamples:r.PropTypes.bool,convertDotToTimes:r.PropTypes.bool,buttonSet:r.PropTypes.string,buttonsVisible:r.PropTypes.oneOf(["always","never","focused"]),labelText:r.PropTypes.string,onFocus:r.PropTypes.func,onBlur:r.PropTypes.func,disabled:r.PropTypes.bool,id:r.PropTypes.string.isRequired},getDefaultProps:function(){return{type:d,shouldShowExamples:!0,onFocus:function(){},onBlur:function(){},disabled:!1}},getInitialState:function(){return{focused:!1,showExamples:!1}},_getUniqueId:function(){return"input-with-examples-"+btoa(this.props.id).replace(/=/g,"")},_getInputClassName:function(){if(this.props.type===f)return this.props.className;var e=s.INPUT+" "+s.INTERACTIVE;return this.state.focused&&(e+=" "+s.FOCUSED),this.props.className&&(e+=" "+this.props.className),e},_getPropsForInputType:function(){var e={"aria-describedby":this._getUniqueId(),ref:"input",className:this._getInputClassName(),labelText:this.props.labelText,value:this.props.value,onFocus:this._handleFocus,onBlur:this._handleBlur,disabled:this.props.disabled};return this.props.type===f?e:(o.extend(e,{buttonSet:this.props.buttonSet,buttonsVisible:this.props.buttonsVisible,onChange:this.props.onChange,onTouchStart:u}),this.props.type===h?o.extend({convertDotToTimes:this.props.convertDotToTimes},e):this.props.type===d?o.extend({autoCapitalize:"off",autoComplete:"off",autoCorrect:"off",spellCheck:"false"},e):void 0)},_getComponentForInputType:function(){switch(this.props.type){case f:return p;case h:return a;case d:return c;default:return null}},_renderInput:function(){var e=this._getPropsForInputType(),t=this._getComponentForInputType();return r.createElement(t,e)},render:function(){var e=this._renderInput();if(this.props.type===f)return e;var t=o.map(this.props.examples,function(e){return"- "+e}).join("\n"),n=this.props.shouldShowExamples&&this.state.showExamples;return r.createElement(i,{ref:"tooltip",className:"perseus-formats-tooltip preview-measure",horizontalPosition:"left",horizontalAlign:"left",verticalPosition:"bottom",arrowSize:10,borderColor:"#ccc",show:n},e,r.createElement("div",{id:this._getUniqueId()},r.createElement(l,{content:t})))},_handleFocus:function(){this.props.onFocus(),this.setState({focused:!0,showExamples:!0})},show:function(){this.setState({showExamples:!0})},hide:function(){this.setState({showExamples:!1})},_handleBlur:function(){this.props.onBlur(),this.setState({focused:!1,showExamples:!1})},focus:function(){this.refs.input.focus()},blur:function(){this.refs.input.blur()},handleChange:function(e){this.props.onChange(e.target.value)}});e.exports=g},function(e,t,n){"use strict";function r(e,t){var n={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n}var i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},o=n(17),s=n(162).components.KeypadInput,a=n(162).consts.KeypadTypes,l=n(162).propTypes.keypadElementPropType,c=o.createClass({displayName:"SimpleKeypadInput",propTypes:{keypadElement:l,onFocus:o.PropTypes.func,value:o.PropTypes.oneOfType([o.PropTypes.string,o.PropTypes.number])},focus:function(){this.refs.input.focus()},blur:function(){this.refs.input.blur()},getValue:function(){return this.props.value},render:function(){var e=this,t=this.props,n=t.keypadElement,l=t.onFocus,c=t.value,p=r(t,["keypadElement","onFocus","value"]);return o.createElement(s,i({ref:"input",keypadElement:n,onFocus:function(){n?n.configure({keypadType:a.FRACTION},function(){e.isMounted()&&l&&l()}):l&&l()},value:null==c?"":""+c},p))}});e.exports=c},function(e,t,n){"use strict";function r(e,t){for(var n=0,r=t,i=e.length;r<i;r++){var o=e[r];if("{"===o?n++:"}"===o&&n--,n<0)return r}return e.length}function i(e,t,n){var i=e.indexOf("{",t),o=i+1,a=r(e,o),l=e.substring(o,a),c=s(l,n);return{endpoint:a,expression:c}}function o(e,t){var n="\\dfrac",r="\\frac",i=e.indexOf(r,t),o=e.indexOf(n,t);return i>-1&&o>-1?Math.min(i,o):i>-1?i:o>-1?o:-1}function s(e,t){for(var n="",r=0,s=o(e,r);s>-1;){n+=e.substring(r,s),r=s;var a=i(e,r,t);r=a.endpoint+1;var l=i(e,r,t);r=l.endpoint+1,n.length&&(n+=" "),n+=t(a.expression,l.expression),s=o(e,r)}return n+=e.slice(r)}function a(e){function t(e){return e.indexOf("\\frac")>-1||e.indexOf("\\dfrac")>-1}var n=function(e,n){var r;return r=t(e)||t(n)?"\\dfrac":"\\frac",r+" {"+e+"}{"+n+"}"};return s(e,n)}function l(e){var t=function(e,t){return e+"/"+t};return s(e,t)}e.exports={parseTex:l,modifyTex:a}},function(e,t,n){"use strict";var r=n(17),i=n(18),o=r.createClass({displayName:"PossibleAnswers",propTypes:{answers:r.PropTypes.arrayOf(r.PropTypes.string)},render:function(){var e=i.uniq(this.props.answers),t=i.map(e,function(e){return r.createElement("dd",{key:e},e)});return r.createElement("dl",{className:"perseus-possible-answers"},r.createElement("dt",null,"Correct Answer"),t)}});e.exports=o},function(e,t,n){"use strict";var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},i=n(17),o=i.createClass({displayName:"BlurInput",propTypes:{value:i.PropTypes.string.isRequired,onChange:i.PropTypes.func.isRequired},getInitialState:function(){return{value:this.props.value}},render:function(){return i.createElement("input",r({},this.props,{type:"text",value:this.state.value,onChange:this.handleChange,onBlur:this.handleBlur}))},componentWillReceiveProps:function(e){this.setState({value:e.value})},handleChange:function(e){this.setState({value:e.target.value})},handleBlur:function(e){this.props.onChange(e.target.value)}});e.exports=o},function(e,t,n){"use strict";var r=n(17),i=n(18),o=n(49),s='Usage:\n  this.change({propName: 5}, callback);\n  this.change("propName", 5, callback);\n  this.change("propName")',a=function(e,t,n){var r=i.omit(e.props,o),s=i.extend(r,t);e.props.onChange(s,n)},l=function e(t,n,r,o){if(void 0===r)return i.partial(e,t,n);var s={};s[n]=r,a(t,s,o)},c=function(e,t,n){if(i.isObject(e)&&void 0===n)return n=t,a(this,e,n);if(i.isString(e))return l(this,e,t,n);throw new Error("Invalid types sent to this.change(): "+i.toArray(arguments).join()+"\n"+s)},p={propTypes:{onChange:r.PropTypes.func.isRequired},change:c};e.exports=p},function(e,t,n){"use strict";var r=n(18),i=n(49),o={serialize:function(){return r.omit(this.props,i)}};e.exports=o},function(e,t,n){"use strict";var r=n(17),i=n(19),o=n(18),s=n(91),a=n(52).css,l=r.createClass({displayName:"MultiButtonGroup",propTypes:{values:r.PropTypes.arrayOf(r.PropTypes.any),buttons:r.PropTypes.arrayOf(r.PropTypes.shape({value:r.PropTypes.any.isRequired,content:r.PropTypes.node,title:r.PropTypes.string})).isRequired,onChange:r.PropTypes.func.isRequired,allowEmpty:r.PropTypes.bool},getDefaultProps:function(){return{values:[],allowEmpty:!0}},render:function(){var e=this,t=this.props.values,n=o(this.props.buttons).map(function(n,i){var l=o.contains(t,n.value);return r.createElement("button",{title:n.title,type:"button",id:""+i,key:""+i,ref:"button"+i,className:a(s.button.buttonStyle,l&&s.button.selectedStyle),onClick:e.toggleSelect.bind(e,n.value)},n.content||""+n.value)}),i={display:"inline-block"};return r.createElement("div",{style:i},n)},focus:function(){return i.findDOMNode(this).focus(),!0},toggleSelect:function(e){var t=this.props.values,n=this.props.allowEmpty;o.contains(t,e)&&(t.length>1||n)?this.props.onChange(o.without(t,e)):this.props.onChange(o.union(t,[e]))}});e.exports=l},function(e,t,n){"use strict";var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},i=n(51),o=n(17),s=n(19),a=n(18),l=n(6).firstNumericalParse,c=n(6).captureScratchpadTouchStart,p=n(199).number,u=n(88),h=u.toNumericString,d=u.getNumericFormat,f=o.createClass({displayName:"NumberInput",propTypes:{value:o.PropTypes.number,format:o.PropTypes.string,placeholder:o.PropTypes.oneOfType([o.PropTypes.string,o.PropTypes.number]),onChange:o.PropTypes.func.isRequired,onFormatChange:o.PropTypes.func,checkValidity:o.PropTypes.func,size:o.PropTypes.string,label:o.PropTypes.oneOf(["put your labels outside your inputs!"])},getDefaultProps:function(){return{value:null,placeholder:null,format:null,onFormatChange:function(){return null},checkValidity:function(){return!0},useArrowKeys:!1}},getInitialState:function(){return{format:this.props.format}},render:function(){var e=i({"number-input":!0,"invalid-input":!this._checkValidity(this.props.value),mini:"mini"===this.props.size,small:"small"===this.props.size,normal:"normal"===this.props.size});return null!=this.props.className&&(e=e+" "+this.props.className),o.createElement("input",r({},this.props,{className:e,type:"text",ref:"input",onChange:this._handleChange,onFocus:this._handleFocus,onBlur:this._handleBlur,onKeyPress:this._handleBlur,onKeyDown:this._onKeyDown,onTouchStart:c,defaultValue:h(this.props.value,this.state.format),value:void 0}))},componentDidUpdate:function(e){p.equal(this.getValue(),this.props.value)||this._setValue(this.props.value,this.state.format)},getValue:function(){return this.parseInputValue(s.findDOMNode(this.refs.input).value)},getStringValue:function(){return s.findDOMNode(this.refs.input).value.toString()},parseInputValue:function(e){if(""===e){var t=this.props.placeholder;return a.isFinite(t)?+t:null}var n=l(e);return a.isFinite(n)?n:this.props.value},focus:function(){s.findDOMNode(this.refs.input).focus(),this._handleFocus()},blur:function(){s.findDOMNode(this.refs.input).blur(),this._handleBlur()},setSelectionRange:function(e,t){s.findDOMNode(this).setSelectionRange(e,t)},getSelectionStart:function(){return s.findDOMNode(this).selectionStart},getSelectionEnd:function(){return s.findDOMNode(this).selectionEnd},_checkValidity:function(e){if(null==e)return!0;var t=l(e),n=this.props.checkValidity;return a.isFinite(t)&&n(t)},_handleChange:function(e){var t=e.target.value,n=this.parseInputValue(t),r=d(t);this.props.onChange(n),r&&(this.props.onFormatChange(n,r),this.setState({format:r}))},_handleFocus:function(){this.props.onFocus&&this.props.onFocus()},_handleBlur:function(e){e&&"keypress"===e.type&&13!==e.keyCode||(this._setValue(this.props.value,this.state.format),this.props.onBlur&&this.props.onBlur())},_onKeyDown:function(e){if(this.props.onKeyDown&&this.props.onKeyDown(e),this.props.useArrowKeys&&a.contains(["ArrowUp","ArrowDown"],e.key)){var t=this.getValue();t===Math.floor(t)&&("ArrowUp"===e.key?t+=1:"ArrowDown"===e.key&&(t-=1),this._checkValidity(t)&&this.props.onChange(t))}},_setValue:function(e,t){$(s.findDOMNode(this.refs.input)).val(h(e,t))}});e.exports=f},function(e,t,n){"use strict";var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},i=n(17),o=n(19),s=i.createClass({displayName:"TextInput",propTypes:{value:i.PropTypes.string,onChange:i.PropTypes.func.isRequired,className:i.PropTypes.string,labelText:i.PropTypes.string,onFocus:i.PropTypes.func,onBlur:i.PropTypes.func,disabled:i.PropTypes.bool},getDefaultProps:function(){return{value:"",disabled:!1}},render:function(){var e=this;return i.createElement("input",r({},this.props,{type:"text",disabled:this.props.disabled,"aria-label":this.props.labelText,onChange:function(t){return e.props.onChange(t.target.value)}}))},focus:function(){o.findDOMNode(this).focus()},blur:function(){o.findDOMNode(this).blur()},getValue:function(){return o.findDOMNode(this).value},getStringValue:function(){return o.findDOMNode(this).value.toString()},setSelectionRange:function(e,t){o.findDOMNode(this).setSelectionRange(e,t)},getSelectionStart:function(){return o.findDOMNode(this).selectionStart},getSelectionEnd:function(){return o.findDOMNode(this).selectionEnd}});e.exports=s},function(e,t,n){"use strict";var r=n(17),i=n(19),o=n(18),s=10,a=r.createClass({displayName:"Triangle",propTypes:{color:r.PropTypes.string.isRequired,left:r.PropTypes.number.isRequired,top:r.PropTypes.number.isRequired,width:r.PropTypes.number.isRequired,height:r.PropTypes.number.isRequired,horizontalDirection:r.PropTypes.oneOf(["left","right"]).isRequired,verticalDirection:r.PropTypes.oneOf(["top","bottom"]).isRequired},render:function(){var e,t,n,i,o=this.props.width+"px solid transparent";"right"===this.props.horizontalDirection?e=o:t=o;var s=this.props.height+"px solid "+this.props.color;return"top"===this.props.verticalDirection?n=s:i=s,r.createElement("div",{style:{display:"block",height:0,width:0,position:"absolute",left:this.props.left,top:this.props.top,borderLeft:e,borderRight:t,borderTop:n,borderBottom:i}})}}),l=r.createClass({displayName:"TooltipArrow",propTypes:{position:r.PropTypes.string,visibility:r.PropTypes.string,left:r.PropTypes.number,top:r.PropTypes.number,color:r.PropTypes.string.isRequired,border:r.PropTypes.string.isRequired,width:r.PropTypes.number.isRequired,height:r.PropTypes.number.isRequired,horizontalDirection:r.PropTypes.oneOf(["left","right"]).isRequired,verticalDirection:r.PropTypes.oneOf(["top","bottom"]).isRequired},getDefaultProps:function(){return{position:"relative",visibility:"visible",left:0,top:0}},render:function(){var e="top"===this.props.verticalDirection,t=e?0:1,n=e?0:-1;return r.createElement("div",{style:{display:"block",position:this.props.position,visibility:this.props.visibility,left:this.props.left,top:this.props.top,width:this.props.width+2,height:this.props.height+1,marginTop:-1,marginBottom:-2,zIndex:s}},r.createElement(a,{horizontalDirection:this.props.horizontalDirection,verticalDirection:this.props.verticalDirection,color:this.props.border,left:0,top:n,width:this.props.width+2,height:this.props.height+2}),r.createElement(a,{horizontalDirection:this.props.horizontalDirection,verticalDirection:this.props.verticalDirection,color:this.props.color,left:1,top:t,width:this.props.width,height:this.props.height}))}}),c={top:{top:"-100%"},bottom:{top:0}},p={left:{targetLeft:0},right:{targetLeft:"100%"}},u={left:{tooltipLeft:0,arrowLeft:function(e){return 0}},right:{tooltipLeft:"-100%",arrowLeft:function(e){return-e-2}}},h=r.createClass({displayName:"Tooltip",propTypes:{show:r.PropTypes.bool.isRequired,className:r.PropTypes.string,arrowSize:r.PropTypes.number,borderColor:r.PropTypes.string,verticalPosition:r.PropTypes.oneOf(o.keys(c)),horizontalPosition:r.PropTypes.oneOf(o.keys(p)),horizontalAlign:r.PropTypes.oneOf(o.keys(u)),children:r.PropTypes.arrayOf(r.PropTypes.element).isRequired},getDefaultProps:function(){return{className:"",arrowSize:10,borderColor:"#ccc",verticalPosition:"bottom",horizontalPosition:"left",horizontalAlign:"left"}},getInitialState:function(){return{height:null}},componentWillReceiveProps:function(){this.setState({height:null})},render:function(){var e="top"===this.props.verticalPosition;return r.createElement("span",null,e&&this._renderToolTipDiv(e),r.createElement("div",null,o.first(this.props.children)),!e&&this._renderToolTipDiv())},_renderToolTipDiv:function(e){var t,n,i=o.extend({},p[this.props.horizontalPosition],u[this.props.horizontalAlign],c[this.props.verticalPosition]);return e?(t=r.createElement(l,{verticalDirection:"top",horizontalDirection:this.props.horizontalAlign,position:"absolute",color:"white",border:this.props.borderColor,left:i.arrowLeft(this.props.arrowSize),top:-this.props.arrowSize+2,width:this.props.arrowSize,height:this.props.arrowSize,zIndex:s}),n=r.createElement(l,{verticalDirection:"top",horizontalDirection:this.props.horizontalAlign,visibility:"hidden",color:"white",border:this.props.borderColor,left:i.arrowLeft(this.props.arrowSize),top:-1,width:this.props.arrowSize,height:this.props.arrowSize,zIndex:s})):(t=r.createElement(l,{verticalDirection:"bottom",horizontalDirection:this.props.horizontalAlign,color:"white",border:this.props.borderColor,left:i.arrowLeft(this.props.arrowSize),top:-1,width:this.props.arrowSize,height:this.props.arrowSize,zIndex:s}),n=null),r.createElement("div",{style:{position:"relative",height:0,display:this.props.show?"block":"none"}},r.createElement("div",{ref:"tooltipContainer",className:"tooltipContainer",style:{position:"absolute",height:this.state.height||void 0,left:i.targetLeft}},t,r.createElement("div",{className:this.props.className,ref:"tooltipContent",style:{position:"relative",top:i.top,left:i.tooltipLeft,border:"1px solid "+this.props.borderColor,WebkitBoxShadow:"0 1px 3px "+this.props.borderColor,MozBoxShadow:"0 1px 3px "+this.props.borderColor,boxShadow:"0 1px 3px "+this.props.borderColor,zIndex:s-1}},o.rest(this.props.children)),n))},componentDidMount:function(){this._updateHeight()},componentDidUpdate:function(){this._updateHeight()},_updateHeight:function(){var e=i.findDOMNode(this.refs.tooltipContainer).offsetHeight;e!==this.state.height&&this.setState({height:e})}});e.exports=h},function(e,t,n){"use strict";var r=n(51),i=n(17),o=n(19),s=n(18),a=n(182),l=window.MathQuill,c=i.PropTypes,p=i.createClass({displayName:"MathInput",propTypes:{value:c.string,onChange:c.func.isRequired,convertDotToTimes:c.bool,buttonsVisible:c.oneOf(["always","never","focused"]),buttonSets:a.buttonSetsType.isRequired,labelText:i.PropTypes.string,onFocus:c.func,onBlur:c.func},render:function(){var e=r({"perseus-math-input":!0,"mq-editable-field":!0,"mq-math-mode":!0});this.props.className&&(e=e+" "+this.props.className);var t=null;return this._shouldShowButtons()&&(t=i.createElement(a,{sets:this.props.buttonSets,className:"math-input-buttons absolute",convertDotToTimes:this.props.convertDotToTimes,onInsert:this.insert})),i.createElement("div",{style:{display:"inline-block"}},i.createElement("div",{style:{display:"inline-block"}},i.createElement("span",{className:e,ref:"mathinput","aria-label":this.props.labelText,onFocus:this.handleFocus,onBlur:this.handleBlur})),i.createElement("div",{style:{position:"relative"}},t))},handleFocus:function(){this.setState({focused:!0})},handleMouseDown:function(e){var t=o.findDOMNode(this).contains(e.target);this.mouseDown=t,t||this.setState({focused:!1})},handleMouseUp:function(){this.mouseDown&&this.focus(),this.mouseDown=!1},handleBlur:function(){this.mouseDown||this.setState({focused:!1})},_shouldShowButtons:function(){return"always"===this.props.buttonsVisible||"never"!==this.props.buttonsVisible&&this.state.focused},getDefaultProps:function(){return{value:"",convertDotToTimes:!1,buttonsVisible:"focused"}},getInitialState:function(){return{focused:!1}},insert:function(e){var t=this.mathField();s(e).isFunction()?e(t):"\\"===e[0]?t.cmd(e).focus():t.write(e).focus(),t.focus()},mathField:function(e){var t=l.getInterface(2);return t.MathField(o.findDOMNode(this.refs.mathinput),e)},componentWillUnmount:function(){window.removeEventListener("mousedown",this.handleMouseDown),window.removeEventListener("mouseup",this.handleMouseUp)},componentDidMount:function(){var e=this;window.addEventListener("mousedown",this.handleMouseDown),window.addEventListener("mouseup",this.handleMouseUp);var t=!1;this.mathField({autoCommands:"pi theta phi sqrt nthroot",charsThatBreakOutOfSupSub:"+-*/=<>≠≤≥",supSubsRequireOperand:!0,spaceBehavesLikeTab:!0,handlers:{edited:function(n){var r=n.latex();if(r=r.replace(/<>/g,"\\ne"),e.props.convertDotToTimes){r=r.replace(/\\cdot/g,"\\times");var i=n.__controller.cursor[l.L];i&&"\\cdot "===i.ctrlSeq&&(n.__controller.backspace(),n.cmd("\\times"))}else r=r.replace(/\\times/g,"\\cdot");t&&e.props.value!==r&&e.props.onChange(r)},enter:function(){$(o.findDOMNode(e.refs.mathinput)).submit()},upOutOf:function(e){e.typedText("^")}}}),this.mathField().latex(this.props.value),t=!0},componentDidUpdate:function(){s.isEqual(this.mathField().latex(),this.props.value)||this.mathField().latex(this.props.value)},focus:function(){this.mathField().focus(),this.setState({focused:!0})},blur:function(){this.mathField().blur(),this.setState({focused:!1})}});e.exports=p},function(e,t,n){"use strict";var r=n(17),i=n(18),o=n(60),s={fontSize:"150%"},a={fontSize:"120%"},l={fontSize:"130%"},c=[function(){return[r.createElement("span",{key:"plus",style:a},"+"),"+"]},function(){return[r.createElement("span",{key:"minus",style:s},"-"),"-"]},function(e){return e.convertDotToTimes?[r.createElement(o,{key:"times",style:s},"\\times"),"\\times"]:[r.createElement(o,{key:"times",style:s},"\\cdot"),"\\cdot"]},function(){return[r.createElement(o,{key:"frac",style:s},"\\frac{□}{□}"),function(e){var t=e.latex();e.typedText("/"),e.latex()===t&&e.cmd("\\frac")}]}],p={basic:c,"basic+div":c.concat([function(){return[r.createElement(o,{key:"div"},"\\div"),"\\div"]}]),trig:[function(){return[r.createElement(o,{key:"sin"},"\\sin"),"\\sin"]},function(){return[r.createElement(o,{key:"cos"},"\\cos"),"\\cos"]},function(){return[r.createElement(o,{key:"tan"},"\\tan"),"\\tan"]},function(){return[r.createElement(o,{key:"theta",style:l},"\\theta"),"\\theta"]},function(){return[r.createElement(o,{key:"pi",style:l},"\\phi"),"\\phi"]}],prealgebra:[function(){return[r.createElement(o,{key:"sqrt"},"\\sqrt{x}"),"\\sqrt"]},function(){return[r.createElement(o,{key:"nthroot"},"\\sqrt[3]{x}"),function(e){e.typedText("nthroot3"),e.keystroke("Right")}]},function(){return[r.createElement(o,{key:"pow",style:a},"□^a"),function(e){var t=e.latex();e.typedText("^"),e.latex()===t&&e.typedText("a^b")}]},function(){return[r.createElement(o,{key:"pi",style:a},"\\pi"),"\\pi"]}],logarithms:[function(){return[r.createElement(o,{key:"log"},"\\log"),"\\log"]},function(){return[r.createElement(o,{key:"ln"},"\\ln"),"\\ln"]},function(){return[r.createElement(o,{key:"log_b"},"\\log_b"),function(e){e.typedText("log_"),e.keystroke("Right"),e.typedText("("),e.keystroke("Left"),e.keystroke("Left")}]}],"basic relations":[function(){return[r.createElement(o,{key:"eq"},"="),"="]},function(){return[r.createElement(o,{key:"lt"},"\\lt"),"\\lt"]},function(){return[r.createElement(o,{key:"gt"},"\\gt"),"\\gt"]}],"advanced relations":[function(){return[r.createElement(o,{key:"neq"},"\\neq"),"\\neq"]},function(){return[r.createElement(o,{key:"leq"},"\\leq"),"\\leq"]},function(){return[r.createElement(o,{key:"geq"},"\\geq"),"\\geq"]}]},u=r.PropTypes.arrayOf(r.PropTypes.oneOf(i(p).keys())),h=r.createClass({displayName:"TexButtons",propTypes:{sets:u.isRequired,onInsert:r.PropTypes.func.isRequired},render:function(){var e=this,t=i.sortBy(this.props.sets,function(e){return i.keys(p).indexOf(e)}),n=i(t).map(function(e){return p[e]}),o=i(n).map(function(t){return t.map(function(t){var n=t(e.props);return r.createElement("button",{onClick:function(){return e.props.onInsert(n[1])},className:"tex-button",key:n[0].key,tabIndex:-1,type:"button"},n[0])})}),s=i(o).map(function(t,n){return r.createElement("div",{className:"clearfix tex-button-row",key:e.props.sets[n]},t)});return r.createElement("div",{className:this.props.className+" preview-measure"},s)},statics:{buttonSets:p,buttonSetsType:u}});e.exports=h},function(e,t,n){"use strict";var r=n(17),i=n(19),o=n(18),s=r.PropTypes,a=r.createClass({displayName:"SortableArea",propTypes:{components:s.arrayOf(s.node).isRequired,onReorder:s.func.isRequired,verify:s.func},render:function(){var e=this,t=o(this.state.components).map(function(t,n){return r.createElement(l,{
index:n,component:t,area:e,key:t.key,draggable:t.props.draggable,dragging:n===e.state.dragging})});return r.createElement("ol",{className:this.props.className,style:this.props.style},t)},getDefaultProps:function(){return{verify:function(){return!0}}},getInitialState:function(){return{dragging:null,components:this.props.components}},componentWillReceiveProps:function(e){this.setState({components:e.components})},onDragStart:function(e){this.setState({dragging:e})},onDrop:function(){this.setState({dragging:null}),this.props.onReorder(this.state.components)},onDragEnter:function(e){if(this.state.dragging!==e){var t=this.state.components.slice(),n=t.splice(this.state.dragging,1);t.splice(e,0,n[0]);var r=this.props.verify(t);return r&&this.setState({dragging:e,components:t}),r}},componentDidMount:function(){this._setDragEvents()},componentDidUpdate:function(){this._setDragEvents()},_listenEvent:function(e){e.dataTransfer.setData("hackhackhack","because browsers!")},_cancelEvent:function(e){e.preventDefault()},_setDragEvents:function(){var e=this;this._dragItems=this._dragItems||[];var t=i.findDOMNode(this).querySelectorAll("[draggable=true]"),n=o(this._dragItems).difference(t),r=o(t).difference(this._dragItems);o(r).each(function(t){t.addEventListener("dragstart",e._listenEvent),t.addEventListener("drop",e._cancelEvent)}),o(n).each(function(t){t.removeEventListener("dragstart",e._listenEvent),t.removeEventListener("drop",e._cancelEvent)})}}),l=r.createClass({displayName:"SortableItem",propTypes:{},render:function(){var e="sortable-disabled";return this.props.dragging?e="sortable-dragging":this.props.draggable&&(e="sortable-enabled"),r.createElement("li",{draggable:this.props.draggable,className:e,onDragStart:this.handleDragStart,onDrop:this.handleDrop,onDragEnter:this.handleDragEnter,onDragOver:this.handleDragOver},this.props.component)},handleDragStart:function(e){e.nativeEvent.dataTransfer.effectAllowed="move",this.props.area.onDragStart(this.props.index)},handleDrop:function(){this.props.area.onDrop(this.props.index)},handleDragEnter:function(e){var t=this.props.area.onDragEnter(this.props.index);e.nativeEvent.dataTransfer.effectAllowed=t?"move":"none"},handleDragOver:function(e){e.preventDefault()}});e.exports=a},function(e,t,n){"use strict";var r,i,o,s,a,l=n(52),c=l.StyleSheet,p=l.css,u=n(51),h=n(17),d=n(19),f=n(18),g=n(5).ClassNames,m=n(29),v=n(83),y=n(84),b=n(82),E=n(6).captureScratchpadTouchStart,T=n(203),w=h.createClass({displayName:"ChoiceNoneAbove",propTypes:{className:h.PropTypes.string,content:h.PropTypes.node,showContent:h.PropTypes.bool},getDefaultProps:function(){return{showContent:!0}},render:function(){var e=f.extend({},this.props,{className:u(this.props.className,"none-of-above"),content:this.props.showContent?this.props.content:h.createElement(m,{key:"noneOfTheAboveRenderer",content:i18n._("None of the above")})});return h.createElement(T,e)}}),x=h.PropTypes.arrayOf(h.PropTypes.shape({checked:h.PropTypes.bool,content:h.PropTypes.node,clue:h.PropTypes.node,correct:h.PropTypes.bool,originalIndex:h.PropTypes.number,isNoneOfTheAbove:h.PropTypes.bool})),C=y.radioBorderColor,S=y.checkedColor,P="1px 16px",k="0px 15px",_=h.createClass({displayName:"BaseRadio",propTypes:{apiOptions:h.PropTypes.shape({readOnly:h.PropTypes.bool,satStyling:h.PropTypes.bool,isMobile:h.PropTypes.bool}),choices:x,deselectEnabled:h.PropTypes.bool,editMode:h.PropTypes.bool,labelWrap:h.PropTypes.bool,multipleSelect:h.PropTypes.bool,onCheckedChange:h.PropTypes.func,onePerLine:h.PropTypes.bool,reviewModeRubric:h.PropTypes.shape({choices:x})},statics:{styles:c.create({instructions:{display:"block",color:y.gray17,fontStyle:"normal",fontWeight:"bold",margin:"8px 0"},radio:{width:"100%"},responsiveRadio:(r={},r[b.lgOrSmaller]={borderBottom:"1px solid "+C,borderTop:"1px solid "+C,width:"auto"},r[b.smOrSmaller]={marginLeft:y.negativePhoneMargin,marginRight:y.negativePhoneMargin},r),responsiveMobileRadio:(i={},i[b.lgOrSmaller]={width:"auto"},i),satRadio:{background:"none",marginLeft:0,userSelect:"none"},satRadioOption:{margin:0,padding:0},satReviewRadioOption:{pointerEvents:"none"},item:{padding:"7px 0",marginLeft:20},inlineItem:{display:"inline-block",paddingLeft:20,verticalAlign:"top"},responsiveItem:(o={},o[b.lgOrSmaller]={marginLeft:0,padding:0,":active":{backgroundColor:y.grayLight},":not(:last-child)":{borderBottom:"1px solid "+C}},o),responsiveMobileItem:(s={backgroundColor:"#FFFFFF"},s[b.lgOrSmaller]={border:"1px solid "+C,borderRadius:"4px",margin:0,minHeight:48,padding:P,":active":{border:"2px solid "+C,padding:k},":not(:last-child)":{marginBottom:"16px"}},s),responsiveSelected:(a={},a[b.lgOrSmaller]={border:"2px solid "+S,padding:k},a),responsiveContainer:{overflow:"auto",marginLeft:y.negativePhoneMargin,marginRight:y.negativePhoneMargin,paddingLeft:y.phoneMargin},responsiveFieldset:{paddingRight:y.phoneMargin}})},getDefaultProps:function(){return{onePerLine:!0,editMode:!1}},checkOption:function(e,t){var n=void 0;n=this.props.multipleSelect?f.map(this.props.choices,function(n,r){return r===e?t:n.checked}):f.map(this.props.choices,function(n,r){return r===e&&t}),this.props.onCheckedChange(n)},focus:function(e){return d.findDOMNode(this.refs["radio"+(e||0)]).focus(),!0},getInstructionsText:function(){return this.props.apiOptions.isMobile?this.props.multipleSelect?i18n._("Choose all answers that apply."):i18n._("Choose 1 answer."):this.props.multipleSelect?i18n._("Select all that apply."):i18n._("Please choose from one of the following options.")},showOnePerLine:function(){return this.props.apiOptions.isMobile||this.props.onePerLine},deselectEnabled:function(){return this.props.apiOptions.isMobile||this.props.deselectEnabled},render:function(){var e=f.uniqueId("perseus_radio_"),t=this.props.multipleSelect?"checkbox":"radio",n=this.props.reviewModeRubric,r=_.styles,i=this.props.apiOptions.satStyling,o=this.props.apiOptions.isMobile,s=u("perseus-widget-radio",!this.props.editMode&&"perseus-rendered-radio",p(v.aboveScratchpad,!o&&v.blankBackground,r.radio,!i&&(o?r.responsiveMobileRadio:r.responsiveRadio),i&&r.satRadio)),a="instructions "+p(r.instructions,v.responsiveLabel),l=this.getInstructionsText(),c=o||this.props.multipleSelect,m=p(r.responsiveFieldset),y=h.createElement("fieldset",{className:"perseus-widget-radio-fieldset "+m},h.createElement("legend",{className:"perseus-sr-only"},l),c&&h.createElement("div",{className:a},l),h.createElement("ul",{className:s},this.props.choices.map(function(s,a){var l=this,c=!(!n||!n.choices[a].clue),m=T,v={ref:"radio"+a,apiOptions:this.props.apiOptions,checked:s.checked,reviewMode:!!n,correct:n&&n.choices[a].correct,clue:s.clue,content:s.content,disabled:this.props.apiOptions.readOnly,editMode:this.props.editMode,groupName:e,isLastChoice:a===this.props.choices.length-1,showClue:c,type:t,pos:a,deselectEnabled:this.deselectEnabled(),onChecked:function(e){l.checkOption(a,e)}};s.isNoneOfTheAbove&&(m=w,f.extend(v,{showContent:s.correct}));var y=function(e,t){return p(r.item,!l.showOnePerLine()&&r.inlineItem,!i&&(t?r.responsiveMobileItem:r.responsiveItem),e&&t&&r.responsiveSelected,i&&r.satRadioOption,i&&e&&r.satRadioSelected,i&&n&&r.satReviewRadioOption)};y(!0,o);var b=u(y(s.checked,o),g.RADIO.OPTION,!this.showOnePerLine()&&"inline",s.checked&&g.RADIO.SELECTED,n&&n.choices[a].correct&&g.CORRECT,n&&!n.choices[a].correct&&g.INCORRECT),x=null;return this.props.editMode&&(x=function(e){var t=l.refs["radio"+a],n=[b,s.content.className,d.findDOMNode(t).className];n.indexOf(e.target.className)!==-1&&l.checkOption(a,!0)}),h.createElement("li",{className:b,key:a,onClick:x,onTouchStart:this.props.labelWrap?E:null},h.createElement(m,v))},this)));return h.createElement("div",{className:p(!i&&r.responsiveContainer)},y)}});e.exports=_},function(e,t,n){"use strict";var r=n(218),i=n(219),o=n(220),s=n(221),a=n(222),l=n(223),c=n(224),p=n(225),u=n(226),h=n(227),d=n(228),f=n(229),g=n(230),m=n(231),v=n(232),y=n(233),b=n(234),E=n(235),T=n(236),w=n(237),x=n(238),C=n(239),S=n(240),P={Editor:u,EditorBlock:h,EditorState:m,CompositeDecorator:s,Entity:f,EntityInstance:g,BlockMapBuilder:i,CharacterMetadata:o,ContentBlock:a,ContentState:l,SelectionState:b,AtomicBlockUtils:r,KeyBindingUtil:v,Modifier:d,RichUtils:y,DefaultDraftBlockRenderMap:c,DefaultDraftInlineStyle:p,convertFromHTML:T,convertFromRaw:w,convertToRaw:E,genKey:x,getDefaultKeyBinding:C,getVisibleSelectionRect:S};e.exports=P},function(e,t,n){var r=n(241),i=r.clone,o=r.isObject,s=r.merge,a=n(242),l=n(243),c=n(244),p=function(e){return Array.isArray(e)?a:o(e)?l:"string"==typeof e?c:void 0},u=function(e){if(e instanceof u)return e;if(!(this instanceof u))return new u(e);var t=p(e);this._wrapped=t.thaw?t.thaw(e):e};u.prototype.freeze=function(){var e=this._wrapped,t=p(e);return t.freeze?t.freeze(e):e},u.prototype.zoom=function(e){return void 0===this._zoomStack&&(this._zoomStack=[]),this._zoomStack.push({zoom:e,wrapped:this._wrapped}),this._wrapped=u(this._wrapped).get(e),this},u.prototype.deZoom=function(){var e=this._zoomStack.pop();return this._wrapped=u(e.wrapped).set(e.zoom,this._wrapped).freeze(),this},u.prototype.get=function(e){for(var t=this._wrapped,n=0;n<e.length;n++)t=p(t).get(t,e[n]);return t},u.prototype.mod=function(e,t){var n=this._wrapped,r=i(n),o=p(n);if(0===e.length)this._wrapped=t(this._wrapped);else if(1===e.length)this._wrapped=o.mod(r,e[0],t);else{var s=e[0],a=e.slice(1);r[s]=u(n[s]).mod(a,t).freeze(),this._wrapped=r}return this},u.prototype.merge=function(e,t){return this._wrapped=u(this._wrapped).mod(e,function(e){return s(e,t)}).freeze(),this},u.prototype.del=function(e){var t=this._wrapped,n=p(t);if(1===e.length)this._wrapped=n.del(t,e[0]);else{var r=e[0],i=e.slice(1),o=n.get(t,r);this._wrapped=n.set(t,r,n.del(o,i))}return this},u.prototype.set=function(e,t){return this.mod(e,function(){return t})},e.exports=u},function(e,t,n){"use strict";var r=n(49),i=n(18),o={getUserInput:function(){return i.omit(this.props,r)}};e.exports=o},function(e,t,n){"use strict";var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},i=n(245),o=n(246),s=n(247),a=n(248),l=n(190),c={MovablePoint:o,addMovablePoint:function(e,t){var n=new i(e,{});return new o(e,n,t)},MovableLine:s,addMovableLine:function(e,t){var n=new i(e,{});return new s(e,n,t)},MovablePolygon:a,addMovablePolygon:function(e,t){var n=new i(e,{});return new a(e,n,t)},addMaybeMobileMovablePoint:function(e,t){var n=e.props.apiOptions.isMobile,i=n?{stroke:"#ffffff","stroke-width":3,fill:l.INTERACTIVE}:{stroke:l.INTERACTIVE,fill:l.INTERACTIVE},o=Object.assign(i,t.normalStyle),s=Object.assign(n?r({},i,{"stroke-width":0,scale:.75}):{},t.highlightStyle),a=Object.assign({normalStyle:o,highlightStyle:s,shadow:n,tooltip:n&&e.props.showTooltips,showHairlines:e.showHairlines,hideHairlines:e.hideHairlines},n?{pointSize:7}:{});return c.addMovablePoint(e.graphie,Object.assign(t,a))}};e.exports=c},function(e,t,n){"use strict";var r=n(18),i=n(165),o=n(249),s=n(199).point,a=n(199).vector,l=n(88),c={thickness:2,mouselayer:!1},p=function(e,t,n,i){i=r.extend({},c,i);var o=[e.range[0][0],0],a=[e.range[0][1],0];r.extend(this,e.fixedLine(o,a,i.thickness)),this.visibleShape.attr(i.normalStyle),r.extend(this,{graphie:e,initialPoint:e.scalePoint(o),initialLength:s.distanceToPoint(e.scalePoint(o),e.scalePoint(a))}),i.mouselayer?this.graphie.addToMouseLayerWrapper(this.wrapper):this.graphie.addToVisibleLayerWrapper(this.wrapper),this.moveTo(t,n)};r.extend(p.prototype,o,{getMouseTarget:function(){return this.wrapper},moveTo:function(e,t){var n=this.graphie.scalePoint(e),r=this.graphie.scalePoint(t),o=a.polarDegFromCart(a.subtract(r,n)),s=o[0],c=l.bound(o[1]),p=a.subtract(n,this.initialPoint),u=l.bound(s/this.initialLength),h=i.getCanUse3dTransform(),d="translateX("+p[0]+"px) translateY("+p[1]+"px) "+(h?" translateZ(0)":"")+"rotate("+c+"deg) scaleX("+u+") scaleY(1)";this.transform(d)}}),e.exports=p},function(e,t,n){"use strict";var r={BLUE:"#6495ED",ORANGE:"#FFA500",PINK:"#FF00AF",GREEN:"#28AE7B",PURPLE:"#9D38BD",RED:"#DF0030",GRAY:"gray",BLACK:"black",LIGHT_BLUE:"#9AB8ED",LIGHT_ORANGE:"#EDD19B",LIGHT_PINK:"#ED9BD3",LIGHT_GREEN:"#9BEDCE",LIGHT_PURPLE:"#DA9BED",LIGHT_RED:"#ED9AAC",LIGHT_GRAY:"#ED9B9B",LIGHT_BLACK:"#ED9B9B",GRAY10:"#D6D6D6",GRAY20:"#CDCDCD",GRAY30:"#B3B3B3",GRAY40:"#9A9A9A",GRAY50:"#808080",GRAY60:"#666666",GRAY70:"#4D4D4D",GRAY80:"#333333",GRAY90:"#1A1A1A",BLUE_A:"#CCFAFF",BLUE_B:"#80F6FF",BLUE_C:"#63D9EA",BLUE_D:"#11ACCD",BLUE_E:"#0C7F99",TEAL_A:"#94FFF5",TEAL_B:"#26EDD5",TEAL_C:"#01D1C1",TEAL_D:"#01A995",TEAL_E:"#208170",GREEN_A:"#B6FFB0",GREEN_B:"#8AF281",GREEN_C:"#74CF70",GREEN_D:"#1FAB54",GREEN_E:"#0D923F",GOLD_A:"#FFD0A9",GOLD_B:"#FFBB71",GOLD_C:"#FF9C39",GOLD_D:"#E07D10",GOLD_E:"#A75A05",RED_A:"#FCA9A9",RED_B:"#FF8482",RED_C:"#F9685D",RED_D:"#E84D39",RED_E:"#BC2612",MAROON_A:"#FFBDE0",MAROON_B:"#FF92C6",MAROON_C:"#ED5FA6",MAROON_D:"#CA337C",MAROON_E:"#9E034E",PURPLE_A:"#DDD7FF",PURPLE_B:"#C6B9FC",PURPLE_C:"#AA87FF",PURPLE_D:"#7854AB",PURPLE_E:"#543B78",MINT_A:"#F5F9E8",MINT_B:"#EDF2DF",MINT_C:"#E0E5CC",GRAY_A:"#F6F7F7",GRAY_B:"#F0F1F2",GRAY_C:"#E3E5E6",GRAY_D:"#D6D8DA",GRAY_E:"#BABEC2",GRAY_F:"#888D93",GRAY_G:"#626569",GRAY_H:"#3B3E40",GRAY_I:"#21242C",KA_BLUE:"#314453",KA_GREEN:"#71B307",_BACKGROUND:"#FDFDFD"};r.INTERACTING=r.KA_GREEN,r.INTERACTIVE=r.KA_GREEN,r.DYNAMIC=r.BLUE,e.exports=r},function(e,t,n){"use strict";function r(e,t){return Math.floor((e[1]-e[0])/t)}var i=n(17),o=n(19),s=n(18),a=n(175),l=n(54),c=n(71),p=n(39),u=n(193),h=n(60),d=n(6),f=n(88),g=n(84),m=g.interactiveSizes,v={url:null,width:0,height:0},y=i.createClass({displayName:"GraphSettings",mixins:[a],propTypes:{editableSettings:i.PropTypes.arrayOf(i.PropTypes.oneOf(["canvas","graph","snap","image","measure"])),box:i.PropTypes.arrayOf(i.PropTypes.number),labels:i.PropTypes.arrayOf(i.PropTypes.string),range:i.PropTypes.arrayOf(i.PropTypes.arrayOf(i.PropTypes.number)),step:i.PropTypes.arrayOf(i.PropTypes.number),gridStep:i.PropTypes.arrayOf(i.PropTypes.number),snapStep:i.PropTypes.arrayOf(i.PropTypes.number),valid:i.PropTypes.oneOfType([i.PropTypes.bool,i.PropTypes.string]),backgroundImage:i.PropTypes.object,markings:i.PropTypes.oneOf(["graph","grid","none"]),showProtractor:i.PropTypes.bool,showRuler:i.PropTypes.bool,showTooltips:i.PropTypes.bool,rulerLabel:i.PropTypes.string,rulerTicks:i.PropTypes.number},getDefaultProps:function(){return{editableSettings:["graph","snap","image","measure"],box:[m.defaultBoxSizeSmall,m.defaultBoxSizeSmall],labels:["x","y"],range:[[-10,10],[-10,10]],step:[1,1],gridStep:[1,1],snapStep:[1,1],valid:!0,backgroundImage:v,markings:"graph",showProtractor:!1,showRuler:!1,showTooltips:!1,rulerLabel:"",rulerTicks:10}},getInitialState:function(){return this.stateFromProps(this.props)},componentWillReceiveProps:function(e){s.isEqual(this.props.labels,e.labels)&&s.isEqual(this.props.gridStep,e.gridStep)&&s.isEqual(this.props.snapStep,e.snapStep)&&s.isEqual(this.props.step,e.step)&&s.isEqual(this.props.range,e.range)&&s.isEqual(this.props.backgroundImage,e.backgroundImage)||this.setState(this.stateFromProps(e))},stateFromProps:function(e){return{labelsTextbox:e.labels,gridStepTextbox:e.gridStep,snapStepTextbox:e.snapStep,stepTextbox:e.step,rangeTextbox:e.range,backgroundImage:s.clone(e.backgroundImage)}},render:function(){var e=this,t=[f.roundTo(2,d.scaleFromExtent(this.props.range[0],this.props.box[0])),f.roundTo(2,d.scaleFromExtent(this.props.range[1],this.props.box[1]))];return i.createElement("div",null,s.contains(this.props.editableSettings,"canvas")&&i.createElement("div",{className:"graph-settings"},i.createElement("div",{className:"perseus-widget-row"},"Canvas size (x,y pixels)",i.createElement(u,{value:this.props.box,onChange:function(t){e.change({box:t})}})),i.createElement("div",{className:"perseus-widget-row"},"Scale (px per div): ",i.createElement(h,null,"("+t[0]+", "+t[1]+")"))),s.contains(this.props.editableSettings,"graph")&&i.createElement("div",{className:"graph-settings"},i.createElement("div",{className:"perseus-widget-row"},i.createElement("div",{className:"perseus-widget-left-col"}," x Label",i.createElement("input",{type:"text",className:"graph-settings-axis-label",ref:"labels-0",onChange:function(t){return e.changeLabel(0,t)},value:this.state.labelsTextbox[0]})),i.createElement("div",{className:"perseus-widget-right-col"},"y Label",i.createElement("input",{type:"text",className:"graph-settings-axis-label",ref:"labels-1",onChange:function(t){return e.changeLabel(1,t)},value:this.state.labelsTextbox[1]}))),i.createElement("div",{className:"perseus-widget-row"},i.createElement("div",{className:"perseus-widget-left-col"},"x Range",i.createElement(u,{value:this.state.rangeTextbox[0],onChange:function(t){return e.changeRange(0,t)}})),i.createElement("div",{className:"perseus-widget-right-col"},"y Range",i.createElement(u,{value:this.state.rangeTextbox[1],onChange:function(t){return e.changeRange(1,t)}}))),i.createElement("div",{className:"perseus-widget-row"},i.createElement("div",{className:"perseus-widget-left-col"},"Tick Step",i.createElement(u,{value:this.state.stepTextbox,onChange:this.changeStep})),i.createElement("div",{className:"perseus-widget-right-col"},"Grid Step",i.createElement(u,{value:this.state.gridStepTextbox,onChange:this.changeGridStep}))),s.contains(this.props.editableSettings,"snap")&&i.createElement("div",{className:"perseus-widget-row"},i.createElement("div",{className:"perseus-widget-left-col"},"Snap Step",i.createElement(u,{value:this.state.snapStepTextbox,onChange:this.changeSnapStep}))),i.createElement("div",{className:"perseus-widget-row"},i.createElement("label",null,"Markings:"," "," "),i.createElement(l,{value:this.props.markings,allowEmpty:!1,buttons:[{value:"graph",content:"Graph"},{value:"grid",content:"Grid"},{value:"none",content:"None"}],onChange:this.change("markings")})),i.createElement("div",{className:"perseus-widget-left-col"},i.createElement(p,{label:"Show tooltips",showTooltips:this.props.showTooltips,onChange:this.change}))),s.contains(this.props.editableSettings,"image")&&i.createElement("div",{className:"image-settings"},i.createElement("div",null,"Background image:"),i.createElement("div",null,"Url:"," ",i.createElement("input",{type:"text",className:"graph-settings-background-url",ref:"bg-url",value:this.state.backgroundImage.url,onChange:function(t){var n=s.clone(e.props.backgroundImage);n.url=t.target.value,e.setState({backgroundImage:n})},onKeyPress:this.changeBackgroundUrl,onBlur:this.changeBackgroundUrl}),i.createElement(c,null,i.createElement("p",null,'Create an image in graphie, or use the "Add image" function to create a background.')))),s.contains(this.props.editableSettings,"measure")&&i.createElement("div",{className:"misc-settings"},i.createElement("div",{className:"perseus-widget-row"},i.createElement("div",{className:"perseus-widget-left-col"},i.createElement(p,{label:"Show ruler",showRuler:this.props.showRuler,onChange:this.change})),i.createElement("div",{className:"perseus-widget-right-col"},i.createElement(p,{label:"Show protractor",showProtractor:this.props.showProtractor,onChange:this.change}))),this.props.showRuler&&i.createElement("div",null,i.createElement("div",null,i.createElement("label",null," ","Ruler label:"," ",i.createElement("select",{onChange:this.changeRulerLabel,value:this.props.rulerLabel},i.createElement("option",{value:""},"None"),i.createElement("optgroup",{label:"Metric"},this.renderLabelChoices([["milimeters","mm"],["centimeters","cm"],["meters","m"],["kilometers","km"]])),i.createElement("optgroup",{label:"Imperial"},this.renderLabelChoices([["inches","in"],["feet","ft"],["yards","yd"],["miles","mi"]]))))),i.createElement("div",null,i.createElement("label",null," ","Ruler ticks:"," ",i.createElement("select",{onChange:this.changeRulerTicks,value:this.props.rulerTicks},s.map([1,2,4,8,10,16],function(e){return i.createElement("option",{value:e},e)})))))))},renderLabelChoices:function(e){return s.map(e,function(e){return i.createElement("option",{value:e[1]},e[0])})},componentDidMount:function(){this.changeGraph=s.debounce(this.changeGraph,300)},validRange:function(e){var t=s.every(e,function(e){return s.isFinite(e)});return t?!(e[0]>=e[1])||"Range must have a higher number on the right":"Range must be a valid number"},validateStepValue:function(e){var t=e.step,n=e.range,i=e.name,o=e.minTicks,a=e.maxTicks;if(!s.isFinite(t))return i+" must be a valid number";var l=r(n,t);return l<o?i+" is too large, there must be at least "+o+" ticks.":!(l>a)||i+" is too small, there can be at most "+a+" ticks."},validSnapStep:function(e,t){return this.validateStepValue({step:e,range:t,name:"Snap step",minTicks:5,maxTicks:60})},validGridStep:function(e,t){return this.validateStepValue({step:e,range:t,name:"Grid step",minTicks:3,maxTicks:60})},validStep:function(e,t){return this.validateStepValue({step:e,range:t,name:"Step",minTicks:3,maxTicks:20})},validBackgroundImageSize:function(e){if(!e.url)return!0;var t=e.width<=450&&e.height<=450;return!!t||"Image must be smaller than 450px x 450px."},validateGraphSettings:function(e,t,n,r,i){var o=this,a=void 0,l=s.every(e,function(e){return a=o.validRange(e),a===!0});if(!l)return a;var c=s.every(t,function(t,n){return a=o.validStep(t,e[n]),a===!0});if(!c)return a;var p=s.every(n,function(t,n){return a=o.validGridStep(t,e[n]),a===!0});if(!p)return a;var u=s.every(r,function(t,n){return a=o.validSnapStep(t,e[n]),a===!0});if(!u)return a;var h=this.validBackgroundImageSize(i);return h===!0||(a=h)},changeLabel:function(e,t){var n=t.target.value,r=this.state.labelsTextbox.slice();r[e]=n,this.setState({labelsTextbox:r},this.changeGraph)},changeRange:function(e,t){var n=this.state.rangeTextbox.slice();n[e]=t;var r=this.state.stepTextbox.slice(),i=this.state.gridStepTextbox.slice(),o=this.state.snapStepTextbox.slice(),s=d.scaleFromExtent(n[e],this.props.box[e]);this.validRange(n[e])===!0&&(r[e]=d.tickStepFromExtent(n[e],this.props.box[e]),i[e]=d.gridStepFromTickStep(r[e],s),o[e]=i[e]/2),this.setState({stepTextbox:r,gridStepTextbox:i,snapStepTextbox:o,rangeTextbox:n},this.changeGraph)},changeStep:function(e){this.setState({stepTextbox:e},this.changeGraph)},changeSnapStep:function(e){this.setState({snapStepTextbox:e},this.changeGraph)},changeGridStep:function(e){this.setState({gridStepTextbox:e,snapStepTextbox:s.map(e,function(e){return e/2})},this.changeGraph)},changeGraph:function(){var e=this.state.labelsTextbox,t=s.map(this.state.rangeTextbox,function(e){return s.map(e,Number)}),n=s.map(this.state.stepTextbox,Number),r=this.state.gridStepTextbox,i=this.state.snapStepTextbox,o=this.state.backgroundImage,a=this.validateGraphSettings(t,n,r,i,o);a===!0?this.change({valid:!0,labels:e,range:t,step:n,gridStep:r,snapStep:i,backgroundImage:o}):this.change({valid:a})},changeBackgroundUrl:function(e){var t=this;if("keypress"!==e.type||"Enter"===e.key){var n=function(e,n,r){var i=s.clone(t.props.backgroundImage);i.url=e,i.width=n,i.height=r,t.setState({backgroundImage:i},t.changeGraph)},r=o.findDOMNode(this.refs["bg-url"]).value;r?d.getImageSize(r,function(e,i){t.isMounted()&&n(r,e,i)}):n(null,0,0)}},changeRulerLabel:function(e){this.change({rulerLabel:e.target.value})},changeRulerTicks:function(e){this.change({rulerTicks:+e.target.value})}});e.exports=y},function(e,t,n){"use strict";var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},i=n(17),o=n(5).Options,s=n(36),a=n(35),l=a.iconStar,c=a.iconTryAgain,p=n(84),u=p.boldFontFamily,h=p.gray68,d=p.gray76,f=p.gray85,g=p.gray95,m=p.kaGreen,v=p.phoneMargin,y=p.negativePhoneMargin,b={HIDDEN:Symbol("HIDDEN"),ACTIVE:Symbol("ACTIVE"),INACTIVE:Symbol("INACTIVE"),INCORRECT:Symbol("INCORRECT"),CORRECT:Symbol("CORRECT")},E=i.createClass({displayName:"GradedGroupAnswerBar",propTypes:{answerBarState:i.PropTypes.any.isRequired,apiOptions:o.propTypes,onCheckAnswer:i.PropTypes.func.isRequired,onNextQuestion:i.PropTypes.func},render:function(){var e=this.props,t=e.apiOptions,n=e.answerBarState,o=e.onCheckAnswer,a=e.onNextQuestion,p=r({},w.answerBar,{backgroundColor:n===b.CORRECT?g:"white",justifyContent:n!==b.CORRECT||a?"space-between":"center"}),u=r({},w.button,{backgroundColor:n===b.ACTIVE||n===b.CORRECT?m:f}),d=r({},w.text,{color:n===b.CORRECT?m:h}),v=n===b.INCORRECT?i.createElement("span",{style:d},i.createElement("span",{style:w.tryAgainIcon},i.createElement(s,c)),i.createElement("span",{style:{marginLeft:8}},i18n._("Keep trying"))):i.createElement("span",null);if(n!==b.CORRECT){var y=n===b.INCORRECT?i18n._("Try again"):i18n._("Check");return i.createElement("div",{style:p},v,i.createElement("button",{style:u,disabled:t.readOnly||n!==b.ACTIVE,onClick:o},y))}return i.createElement("div",{style:p},i.createElement("span",{style:d},i.createElement("span",{style:{fontSize:28,color:"#FFB300"}},i.createElement(s,r({},l,{style:{marginBottom:5}}))),i.createElement("span",{style:{marginLeft:8}},i18n._("Correct!"))),a&&i.createElement("button",{style:u,onClick:a},i18n._("Next question")))}}),T=17,w={answerBar:{display:"flex",alignItems:"center",height:68,marginLeft:y,marginRight:y,marginBottom:y,marginTop:v,paddingLeft:v,paddingRight:10,borderTop:"1px solid "+d},button:{height:48,width:143,borderRadius:4,color:"white",fontFamily:u,fontSize:T,border:"none"},tryAgainIcon:{fontSize:28,color:"#63D9EA",transform:"scale(-1,1) rotate(-268deg)"},text:{display:"flex",flexDirection:"row",alignItems:"center",fontFamily:u,fontSize:T}};E.ANSWER_BAR_STATES=b,e.exports=E},function(e,t,n){"use strict";var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},i=n(17),o=n(178),s=function(){return!0},a=i.createClass({displayName:"RangeInput",propTypes:{value:i.PropTypes.array.isRequired,onChange:i.PropTypes.func.isRequired,placeholder:i.PropTypes.array,checkValidity:i.PropTypes.func},getDefaultProps:function(){return{placeholder:[null,null]}},render:function(){var e=this.props.value,t=this.props.checkValidity||s;return i.createElement("div",{className:"range-input"},i.createElement(o,r({},this.props,{value:e[0],checkValidity:function(n){return t([n,e[1]])},onChange:this.onChange.bind(this,0),placeholder:this.props.placeholder[0]})),i.createElement(o,r({},this.props,{value:e[1],checkValidity:function(n){return t([e[0],n])},onChange:this.onChange.bind(this,1),placeholder:this.props.placeholder[1]})))},onChange:function(e,t){var n=this.props.value;0===e?this.props.onChange([t,n[1]]):this.props.onChange([n[0],t])}});e.exports=a},function(e,t,n){"use strict";function r(e,t){return Math.floor((e[1]-e[0])/t)}var i=n(17),o=n(19),s=n(18),a=n(6),l=n(166),c=n(84),p=c.interactiveSizes,u=n(32),h={url:null},d={fontStyle:"italic",fontWeight:"bold",fontSize:"32px",width:"100%",height:"100%",textAlign:"center",backgroundColor:"white",position:"absolute",zIndex:1,transition:"opacity .25s ease-in-out","-moz-transition":"opacity .25s ease-in-out","-webkit-transition":"opacity .25s ease-in-out"},f={position:"relative",top:"25%"},g=i.createClass({displayName:"Graph",propTypes:{box:i.PropTypes.array.isRequired,labels:i.PropTypes.arrayOf(i.PropTypes.string),range:i.PropTypes.arrayOf(i.PropTypes.arrayOf(i.PropTypes.number)),step:i.PropTypes.arrayOf(i.PropTypes.number),gridStep:i.PropTypes.arrayOf(i.PropTypes.number),snapStep:i.PropTypes.arrayOf(i.PropTypes.number),markings:i.PropTypes.string,backgroundImage:i.PropTypes.shape({url:i.PropTypes.string}),showProtractor:i.PropTypes.bool,showRuler:i.PropTypes.bool,rulerLabel:i.PropTypes.string,rulerTicks:i.PropTypes.number,onGraphieUpdated:i.PropTypes.func,instructions:i.PropTypes.string,onClick:i.PropTypes.func,setDrawingAreaAvailable:i.PropTypes.func,isMobile:i.PropTypes.bool},getDefaultProps:function(){return{labels:["x","y"],range:[[-10,10],[-10,10]],step:[1,1],gridStep:[1,1],snapStep:[.5,.5],markings:"graph",backgroundImage:h,showProtractor:!1,showRuler:!1,rulerLabel:"",rulerTicks:10,instructions:null,onGraphieUpdated:null,onClick:null,onMouseDown:null,isMobile:!1}},render:function(){var e,t=this.props.backgroundImage;if(t.url){var n=this.props.box[0]/p.defaultBoxSize;e=i.createElement(u,{src:t.url,width:t.width,height:t.height,scale:n,responsive:!1})}else e=null;return i.createElement("div",{className:"graphie-container above-scratchpad",style:{width:this.props.box[0],height:this.props.box[1]},onMouseOut:this.onMouseOut,onMouseOver:this.onMouseOver,onClick:this.onClick},e,i.createElement("div",{className:"graphie",ref:"graphieDiv"}))},componentDidMount:function(){this._setupGraphie(!0)},componentDidUpdate:function(){this._hasSetupGraphieThisUpdate=!1,this._shouldSetupGraphie&&(this._setupGraphie(!1),this._shouldSetupGraphie=!1)},componentWillReceiveProps:function(e){var t=["labels","range","step","markings","showProtractor","showRuler","rulerLabel","rulerTicks","gridStep","snapStep"],n=this;s.each(t,function(t){s.isEqual(n.props[t],e[t])||(n._shouldSetupGraphie=!0)})},reset:function(){this._setupGraphie(!1)},graphie:function(){return this._graphie},pointsFromNormalized:function(e,t){var n=this;return s.map(e,function(e){return s.map(e,function(e,i){var o=n.props.range[i];if(t)return o[0]+(o[1]-o[0])*e;var s=n.props.step[i],a=r(o,s),l=Math.round(e*a);return o[0]+s*l})})},_setupGraphie:function(e){if(!this._hasSetupGraphieThisUpdate){var t=o.findDOMNode(this.refs.graphieDiv);$(t).empty();var n=this.props.labels,r=this.props.range,i=this._graphie=l.createGraphie(t),a=this._getGridConfig();i.snap=this.props.snapStep,"graph"===this.props.markings?(i.graphInit({range:r,scale:s.pluck(a,"scale"),axisArrows:"<->",labelFormat:function(e){return"\\small{"+e+"}"},gridStep:this.props.gridStep,tickStep:s.pluck(a,"tickStep"),labelStep:1,unityLabels:s.pluck(a,"unityLabel"),isMobile:this.props.isMobile}),i.label([0,r[1][1]],n[1],this.props.isMobile?"below right":"above"),i.label([r[0][1],0],n[0],this.props.isMobile?"above left":"right")):"grid"===this.props.markings?i.graphInit({range:r,scale:s.pluck(a,"scale"),gridStep:this.props.gridStep,axes:!1,ticks:!1,labels:!1,isMobile:this.props.isMobile}):"none"===this.props.markings&&i.init({range:r,scale:s.pluck(a,"scale"),isMobile:this.props.isMobile});var c,p=.5,u=0;if(this.props.instructions){var c=$("<div/>");s.each(d,function(e,t){c.css(t,e)}),c.css("opacity",p);var h=$("<span/>",{text:this.props.instructions});s.each(f,function(e,t){h.css(t,e)}),c.append(h),$(t).append(c)}else c=void 0;var g=c||this.props.onMouseDown?s.bind(function(e){c&&(c.remove(),c=null),this.props.onMouseDown(e)},this):null,m=c?function(){c&&c.css("opacity",u)}:null,v=c?function(){c&&c.css("opacity",p)}:null;i.addMouseLayer({onClick:this.props.onClick,onMouseDown:g,onMouseOver:m,onMouseOut:v,onMouseUp:this.props.onMouseUp,onMouseMove:this.props.onMouseMove,allowScratchpad:!0,setDrawingAreaAvailable:this.props.setDrawingAreaAvailable}),this._updateProtractor(),this._updateRuler(),this._hasSetupGraphieThisUpdate=!0,!e&&this.props.onGraphieUpdated&&this.props.onGraphieUpdated(i)}},_getGridConfig:function(){var e=this;return s.map(e.props.step,function(t,n){return a.gridDimensionConfig(t,e.props.range[n],e.props.box[n],e.props.gridStep[n])})},_updateProtractor:function(){if(this.protractor&&this.protractor.remove(),this.props.showProtractor){var e=this.pointsFromNormalized([[.5,.05]])[0];this.protractor=this._graphie.protractor(e)}},_updateRuler:function(){if(this.ruler&&this.ruler.remove(),this.props.showRuler){var e=this.pointsFromNormalized([[.5,.25]])[0],t=this._graphie.range[0][1]-this._graphie.range[0][0];this.ruler=this._graphie.ruler({center:e,label:this.props.rulerLabel,pixelsPerUnit:this._graphie.scale[0],ticksPerUnit:this.props.rulerTicks,units:Math.round(.8*t)})}},toJSON:function(){return s.pick(this.props,"range","step","markings","labels","backgroundImage","showProtractor","showRuler","rulerLabel","rulerTicks","gridStep","snapStep");
}});e.exports=g},function(e,t,n){"use strict";var r=n(17),i=n(19),o=n(18),s=n(60),a=n(5).ClassNames,l=(n(180),n(172).modifyTex),c=r.createClass({displayName:"MathOutput",propTypes:{value:r.PropTypes.oneOfType([r.PropTypes.string,r.PropTypes.number]),className:r.PropTypes.string,labelText:r.PropTypes.string,onFocus:r.PropTypes.func,onBlur:r.PropTypes.func},getDefaultProps:function(){return{value:"",onFocus:function(){},onBlur:function(){}}},getInitialState:function(){return{focused:!1,selectorNamespace:o.uniqueId("math-output")}},_getInputClassName:function(){var e="math-output "+a.INPUT+" "+a.INTERACTIVE;return this.state.focused&&(e+=" "+a.FOCUSED),this.props.className&&(e+=" "+this.props.className),e},_getDisplayValue:function(e){var t;return t=null!=e?""+e:"",l(t)},render:function(){var e={textAlign:"center"};return r.createElement("span",{ref:"input",className:this._getInputClassName(),"aria-label":this.props.labelText,onMouseDown:this.focus,onTouchStart:this.focus},r.createElement("div",{style:e},r.createElement(s,null,this._getDisplayValue(this.props.value))))},getValue:function(){return this.props.value},focus:function(){this.state.focused||(this.props.onFocus(),this._bindBlurHandler(),this.setState({focused:!0}))},blur:function(){this.state.focused&&(this.props.onBlur(),this._unbindBlurHandler(),this.setState({focused:!1}))},_bindBlurHandler:function(){var e=this;$(document).bind("vclick."+this.state.selectorNamespace,function(t){var n=$(t.target).closest(i.findDOMNode(e));n.length||e.blur()})},_unbindBlurHandler:function(){$(document).unbind("."+this.state.selectorNamespace)},componentWillUnmount:function(){this._unbindBlurHandler()}});e.exports=c},function(e,t,n){"use strict";var r=n(17),i=n(19),o=n(18),s=n(6),a=n(29),l=n(5).ClassNames,c="perseus-sortable",p=r.createClass({displayName:"Placeholder",propTypes:{width:r.PropTypes.number.isRequired,height:r.PropTypes.number.isRequired},render:function(){var e=[c+"-card",c+"-placeholder"].join(" "),t={width:this.props.width,height:this.props.height};return null!=this.props.margin&&(t.margin=this.props.margin),r.createElement("li",{className:e,style:t})}}),u="static",h="dragging",d="animating",f="disabled",g=r.createClass({displayName:"Draggable",propTypes:{type:r.PropTypes.oneOf([u,h,d,f]),content:r.PropTypes.string.isRequired,endPosition:r.PropTypes.object.isRequired,onRender:r.PropTypes.func.isRequired,onMouseDown:r.PropTypes.func.isRequired,onMouseMove:r.PropTypes.func.isRequired,onMouseUp:r.PropTypes.func.isRequired,onAnimationEnd:r.PropTypes.func.isRequired},getDefaultProps:function(){return{type:u}},getInitialState:function(){return{startPosition:{left:0,top:0},startMouse:{left:0,top:0},mouse:{left:0,top:0}}},componentDidMount:function(){this.isMouseMoveUpBound=!1},componentWillUnmount:function(){this.isMouseMoveUpBound&&this.unbindMouseMoveUp()},getCurrentPosition:function(){return{left:this.state.startPosition.left+this.state.mouse.left-this.state.startMouse.left,top:this.state.startPosition.top+this.state.mouse.top-this.state.startMouse.top}},render:function(){var e=[c+"-card",c+"-draggable",c+"-"+this.props.type,l.INTERACTIVE].join(" "),t={position:"static"};return this.props.type!==h&&this.props.type!==d||o.extend(t,{position:"absolute"},this.getCurrentPosition()),this.props.width&&(t.width=this.props.width+1),this.props.height&&(t.height=this.props.height),null!=this.props.margin&&(t.margin=this.props.margin),r.createElement("li",{className:e,style:t,onMouseDown:this.onMouseDown,onTouchStart:this.onMouseDown,onTouchMove:this.onMouseMove,onTouchEnd:this.onMouseUp,onTouchCancel:this.onMouseUp},r.createElement(a,{content:this.props.content,onRender:this.props.onRender}))},componentDidUpdate:function(e){if(this.props.type!==e.type)if(this.props.type===d){var t=this.getCurrentPosition(),n=15*Math.sqrt(Math.sqrt(Math.pow(this.props.endPosition.left-t.left,2)+Math.pow(this.props.endPosition.top-t.top,2)));$(i.findDOMNode(this)).animate(this.props.endPosition,{duration:Math.max(n,1),complete:this.props.onAnimationEnd})}else this.props.type===u&&$(i.findDOMNode(this)).finish()},bindMouseMoveUp:function(){this.isMouseMoveUpBound=!0,$(document).on("mousemove",this.onMouseMove),$(document).on("mouseup",this.onMouseUp)},unbindMouseMoveUp:function(){this.isMouseMoveUpBound=!1,$(document).off("mousemove",this.onMouseMove),$(document).off("mouseup",this.onMouseUp)},onMouseDown:function(e){if(this.props.type===u&&(0===e.button||null!=e.touches&&1===e.touches.length)){e.preventDefault();var t=s.extractPointerLocation(e);t&&this.setState({startPosition:$(i.findDOMNode(this)).position(),startMouse:t,mouse:t},function(){this.bindMouseMoveUp(),this.props.onMouseDown()})}},onMouseMove:function(e){if(this.props.type===h){e.preventDefault();var t=s.extractPointerLocation(e);t&&this.setState({mouse:t},this.props.onMouseMove)}},onMouseUp:function(e){if(this.props.type===h){e.preventDefault();var t=s.extractPointerLocation(e);t&&(this.unbindMouseMoveUp(),this.props.onMouseUp())}}}),m="horizontal",v="vertical",y=r.createClass({displayName:"Sortable",propTypes:{options:r.PropTypes.array.isRequired,layout:r.PropTypes.oneOf([m,v]),padding:r.PropTypes.bool,disabled:r.PropTypes.bool,constraints:r.PropTypes.object,onMeasure:r.PropTypes.func,margin:r.PropTypes.number,onChange:r.PropTypes.func},getDefaultProps:function(){return{layout:m,padding:!0,disabled:!1,constraints:{},onMeasure:function(){},margin:5,onChange:function(){}}},getInitialState:function(){return{items:this.itemsFromProps(this.props)}},componentWillReceiveProps:function(e){var t=this.props;o.isEqual(e.options,t.options)?e.layout===t.layout&&e.padding===t.padding&&e.disabled===t.disabled&&o.isEqual(e.constraints,t.constraints)||this.setState({items:this.clearItemMeasurements(this.state.items)}):this.setState({items:this.itemsFromProps(e)})},componentDidUpdate:function(e){this.state.items.length&&!this.state.items[0].width&&this.measureItems()},itemsFromProps:function(e){var t=e.disabled?f:u;return o.map(e.options,function(e,n){return{option:e,key:n,type:t,endPosition:{},width:0,height:0}})},clearItemMeasurements:function(e){return o.map(e,function(e){return o.extend(e,{width:0,height:0})})},measureItems:function(){var e,t=this,n=o.clone(this.state.items),r=o.map(n,function(e){return $(i.findDOMNode(this.refs[e.key]))},this),s=o.invoke(r,"outerWidth"),a=o.invoke(r,"outerHeight"),l=this.props.constraints,c=this.props.layout;l.width?e=o.max(s.concat(l.width)):c===v&&(e=o.max(s));var p;l.height?p=o.max(a.concat(l.height)):c===m&&(p=o.max(a)),n=o.map(n,function(t,n){return t.width=e||s[n],t.height=p||a[n],t}),this.setState({items:n},function(){t.props.onMeasure({widths:s,heights:a})})},remeasureItems:o.debounce(function(){this.setState({items:this.clearItemMeasurements(this.state.items)},this.measureItems)},20),render:function(){var e=[c,"layout-"+this.props.layout].join(" "),t=[];return e+=this.props.padding?"":" unpadded",o.each(this.state.items,function(e,n,i){var o,s=n===i.length-1,a=e.type===u||e.type===f;this.props.layout===m?o="0 "+this.props.margin+"px 0 0":this.props.layout===v&&(o="0 0 "+this.props.margin+"px 0"),t.push(r.createElement(g,{content:e.option,key:e.key,type:e.type,ref:e.key,width:e.width,height:e.height,margin:s&&a?0:o,endPosition:e.endPosition,onRender:this.remeasureItems,onMouseDown:this.onMouseDown.bind(this,e.key),onMouseMove:this.onMouseMove.bind(this,e.key),onMouseUp:this.onMouseUp.bind(this,e.key),onTouchMove:this.onMouseMove.bind(this,e.key),onTouchEnd:this.onMouseUp.bind(this,e.key),onTouchCancel:this.onMouseUp.bind(this,e.key),onAnimationEnd:this.onAnimationEnd.bind(this,e.key)})),e.type!==h&&e.type!==d||t.push(r.createElement(p,{key:"placeholder_"+e.key,ref:"placeholder_"+e.key,width:e.width,height:e.height,margin:s?0:o}))},this),r.createElement("ul",{className:e},t)},onMouseDown:function(e){var t=o.map(this.state.items,function(t){return t.key===e&&(t.type=h),t});this.setState({items:t})},onMouseMove:function(e){var t=$(i.findDOMNode(this.refs[e])),n=$(i.findDOMNode(this)),r=o.clone(this.state.items),s=o.findWhere(this.state.items,{key:e}),a=this.props.margin,l=o.indexOf(r,s),c=0;if(r.splice(l,1),this.props.layout===m){var p,u=t.offset().left-n.offset().left,h=0;o.each(r,function(e){p=e.width,u>h+p/2&&(c+=1),h+=p+a})}else{var d,f=t.offset().top-n.offset().top,g=0;o.each(r,function(e){d=e.height,f>g+d/2&&(c+=1),g+=d+a})}c!==l&&(r.splice(c,0,s),this.setState({items:r}))},onMouseUp:function(e){var t=o.map(this.state.items,function(t){return t.key===e&&(t.type=d,t.endPosition=$(i.findDOMNode(this.refs["placeholder_"+e])).position()),t},this);this.setState({items:t}),this.props.onChange({})},onAnimationEnd:function(e){var t=o.map(this.state.items,function(t){return t.key===e&&(t.type=u),t});this.setState({items:t})},getOptions:function(){return o.pluck(this.state.items,"option")}});e.exports=y},function(e,t,n){"use strict";function r(e){this.order=l(e),this.mantissa=a(e),this.positive=s(e),this.sigFigs=this.mantissa.length,this.sigDecs=this.order-this.mantissa.length}function i(e,t,n,r){var i,p,u,h=""+e,d=l(h),f=a(h),g=s(h),m=!1;if(0==e||""==f||"0"==f){for(f="",x=0;x<t;x++)f+="0";d=t+n,n<0&&-n>=t&&(m=!0)}else{if(p=d-f.length-n,u=t-f.length,i=Math.min(u,p),i<0){var v=c(f,-i);v.length>f.length+i&&(d++,p>u&&(v=c(v,1))),f=v}else if(i>0)for(x=0;x<i;x++)f+="0";""!=f&&"0"!=f||(f="0",g=!0,d=1+n,0!=d&&(m=!0))}var y=r||f.length>20||d>4||d<-2||d-f.length>0&&o(f)>0||m,b="";if(g||(b+="-"),y)b+=f.charAt(0),f.length>1&&(b+="."+f.substring(1,f.length)),d-1!=0&&(b+=" x 10^"+(d-1));else{var E="",T="",w=!0;if(d>0)if(f.length>d)E=f.substring(0,d),T=f.substring(d,f.length);else{E=f,w=0!=o(f);for(var x=0;x<d-f.length;x++)E+="0"}else{for(x=0;x<-d;x++)T+="0";T+=f}b+=(""==E?"0":E)+(w?".":"")+T}return b}function o(e){for(var t=0,n=e.length-1;n>=0;n--){var r=e.charAt(n);if("0"!=r)return t;t++}return t}function s(e){for(var t=!0,n=!1,r=!1,i="",o="",s="",a=0,l=0,c=!0,p=0;p<e.length;p++){var u=e.charAt(p);if(u>="1"&&u<="9")s+=i+u,i="",r=!0,n||(l++,a++),t=!1;else if("0"==u)n?r?(s+=i+u,i=""):(o+=u,a--):(l++,r?(o+=u,a++,i+=u):o+=u),t=!1;else if(n||"."!=u)if("e"==u||"E"==u&&p+1<e.length){var h=parseInt(e.substring(p+1,e.length));a+=h,l+=h,p=e.length}else!t||"+"!=u&&"-"!=u||"-"==u&&(c=!c);else s+=i,i="",n=!0,t=!1}return""==s||c}function a(e){for(var t=!0,n=!1,r=!1,i="",o="",s="",a=0,l=0,c=!0,p=0;p<e.length;p++){var u=e.charAt(p);if(u>="1"&&u<="9")s+=i+u,i="",r=!0,n||(l++,a++),t=!1;else if("0"==u)n?r?(s+=i+u,i=""):(o+=u,a--):(l++,r?(o+=u,a++,i+=u):o+=u),t=!1;else if(n||"."!=u)if("e"==u||"E"==u&&p+1<e.length){var h=parseInt(e.substring(p+1,e.length));a+=h,l+=h,p=e.length}else!t||"+"!=u&&"-"!=u||"-"==u&&(c=!c);else s+=i,i="",n=!0,t=!1}return""==s?o:s}function l(e){for(var t=!0,n=!1,r=!1,i="",o="",s="",a=0,l=0,c=!0,p=0;p<e.length;p++){var u=e.charAt(p);if(u>="1"&&u<="9")s+=i+u,i="",r=!0,n||(l++,a++),t=!1;else if("0"==u)n?r?(s+=i+u,i=""):(o+=u,a--):(l++,r?(o+=u,a++,i+=u):o+=u),t=!1;else if(n||"."!=u)if("e"==u||"E"==u&&p+1<e.length){var h=parseInt(e.substring(p+1,e.length));a+=h,l+=h,p=e.length}else!t||"+"!=u&&"-"!=u||"-"==u&&(c=!c);else s+=i,i="",n=!0,t=!1}return""==s?l:a}function c(e,t){var n=e.length-t-1;if(n<0)return"";if(n>=e.length-1)return e;var r=e.charAt(n+1),i=e.charAt(n),o=!1;if(r>"5")o=!0;else if("5"==r){for(var s=n+2;s<e.length;s++)"0"!=e.charAt(s)&&(o=!0);i%2==1&&(o=!0)}for(var a="",l=n;l>=0;l--){var c=e.charAt(l);if(o){var p;if("9"==c)p="0";else{switch(c){case"0":p="1";break;case"1":p="2";break;case"2":p="3";break;case"3":p="4";break;case"4":p="5";break;case"5":p="6";break;case"6":p="7";break;case"7":p="8";break;case"8":p="9"}o=!1}a=p+a}else a=c+a}return o&&(a="1"+a),a}e.exports={SignificantFigures:r,displaySigFigs:i}},function(e,t,n){"use strict";e.exports={KeypadTypes:{FRACTION:"FRACTION",EXPRESSION:"EXPRESSION"},KeyTypes:{EMPTY:"EMPTY",VALUE:"VALUE",OPERATOR:"OPERATOR",INPUT_NAVIGATION:"INPUT_NAVIGATION",KEYPAD_NAVIGATION:"KEYPAD_NAVIGATION",MANY:"MANY",ECHO:"ECHO"},DeviceOrientations:{LANDSCAPE:"LANDSCAPE",PORTRAIT:"PORTRAIT"},DeviceTypes:{PHONE:"PHONE",TABLET:"TABLET"},LayoutModes:{FULLSCREEN:"FULLSCREEN",COMPACT:"COMPACT"},BorderDirections:{LEFT:"LEFT",BOTTOM:"BOTTOM"},BorderStyles:{LEFT:["LEFT"],BOTTOM:["BOTTOM"],ALL:["LEFT","BOTTOM"],NONE:[]},IconTypes:{MATH:"MATH",SVG:"SVG",TEXT:"TEXT"},DecimalSeparators:{COMMA:"COMMA",PERIOD:"PERIOD"},EchoAnimationTypes:{SLIDE_AND_FADE:"SLIDE_AND_FADE",FADE_ONLY:"FADE_ONLY",LONG_FADE_ONLY:"LONG_FADE_ONLY"}}},function(e,t,n){e.exports={number:n(250),vector:n(251),point:n(252),line:n(253),ray:n(254)}},function(e,t,n){"use strict";function r(e,t){var n=Math.sqrt(Math.pow(e[0],2)+Math.pow(e[1],2)),r=Math.atan2(e[1],e[0]);return r<0&&(r+=2*Math.PI),t||(r=180*r/Math.PI),[n,r]}function i(e,t){return"number"==typeof e&&(e=[e,e]),t=t*Math.PI/180,[e[0]*Math.cos(t),e[1]*Math.sin(t)]}var o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol?"symbol":typeof e},a=n(199).point,l=n(199).vector,c=n(18);n(255);var p=n(88),u=n(256).processMath,h=n(190),d={unscaledSvgPath:function(e){return e[0]===!0?"":$.map(e,function(e,t){return e===!0?"z":(0===t?"M":"L")+e[0]+" "+e[1]}).join("")},getDistance:function(e,t){return a.distanceToPoint(e,t)},coordDiff:function(e,t){return c.map(t,function(n,r){return t[r]-e[r]})},snapCoord:function(e,t){return c.map(e,function(e,n){return p.roundToNearest(t[n],e)})},findAngle:function(e,t,n){if(void 0===n){var r=e[0]-t[0],i=e[1]-t[1];return r||i?(180+180*Math.atan2(-i,-r)/Math.PI+360)%360:0}return d.findAngle(e,n)-d.findAngle(t,n)},graphs:{}},f=d.Graphie=function(){};c.extend(f.prototype,{cartToPolar:r,polar:i});var g={center:[-.5,-.5],above:[-.5,-1],"above right":[0,-1],right:[0,-.5],"below right":[0,0],below:[-.5,0],"below left":[-1,0],left:[-1,-.5],"above left":[-1,-1]};d.createGraphie=function(e){var t=40,n=40,r=void 0,a=void 0;$(e).css("position","relative");var m=Raphael(e);$(e).children("div").css("position","absolute");var v={"stroke-width":2,fill:"none"},y=function e(r){if("number"==typeof r)return e([r,r]);var i=r[0],o=r[1];return[i*t,o*n]},b=function e(i){if("number"==typeof i)return e([i,i]);var o=i[0],s=i[1];return[(o-r[0])*t,(a[1]-s)*n]},E=function e(i){if("number"==typeof i)return e([i,i]);var o=i[0],s=i[1];return[o/t+r[0],a[1]-s/n]},T=function e(r){return"number"==typeof r?e([r,r]):[r[0]/t,r[1]/n]},w=function(e,t){var n=$(e),r=n.data("labelDirection");if(n.css("visibility",""),"number"==typeof r){var i=Math.cos(r),o=Math.sin(r),s=Math.min(t[0]/2/Math.abs(i),t[1]/2/Math.abs(o));n.css({marginLeft:-t[0]/2+i*s,marginTop:-t[1]/2-o*s})}else{var a=g[r||"center"];n.css({marginLeft:Math.round(t[0]*a[0]),marginTop:Math.round(t[1]*a[1])})}},x=function(e,t){return $.map(e,function(e,n){if(e===!0)return"z";var r=t?e:b(e);return(0===n?"M":"L")+p.bound(r[0])+" "+p.bound(r[1])}).join("")},C=function(e,t,n){var i=function(r){return(e*r+t)*r+n};if(0===e){var o=c.map(r,function(e){return[e,i(e)]});return x(o)}var s=-t/(2*e),a=Math.max(Math.abs(s-r[0]),Math.abs(s-r[1])),l=s+a,u=[s,i(s)],h=[l,i(l)],d=[u[0],u[1]-(h[1]-u[1])],f=Math.abs(u[0]-h[0]),g=[u[0]-f,h[1]],m=[u[0]+f,h[1]],v=c.map([g,d,m],b),y=c.map(c.flatten(v),p.bound);return"M"+y[0]+","+y[1]+" Q"+y[2]+","+y[3]+" "+y[4]+","+y[5]},S=function(e,t,n,i){var o=Math.abs(Math.PI/(2*t)),s=function(r){return e*Math.sin(t*r-n)+i},a=function(r){return e*t*Math.cos(n-t*r)},l=function(e,t){var n=e+o*t,r=n+o,i=[n,2*n/3+1*r/3,1*n/3+2*r/3,r],l=[s(n),s(n)+a(n)*(r-n)/3,s(r)-a(r)*(r-n)/3,s(r)];return c.map(c.zip(i,l),b)},p=r[1]-r[0],u=Math.ceil(p/o)+1,h=n/t,d=h-r[0];h-=o*Math.ceil(d/o);for(var f=l(h,0),g="M"+f[0][0]+","+f[0][1]+" C"+f[1][0]+","+f[1][1]+" "+f[2][0]+","+f[2][1]+" "+f[3][0]+","+f[3][1],m=1;m<u;m++)f=l(h,m),g+=" C"+f[1][0]+","+f[1][1]+" "+f[2][0]+","+f[2][1]+" "+f[3][0]+","+f[3][1];return g};d.svgPath=x;var P=function(e){var i={scale:function(e){"number"==typeof e&&(e=[e,e]),t=e[0],n=e[1],m.setSize((r[1]-r[0])*t,(a[1]-a[0])*n)},clipRect:function(e){var t=e[0],n=e[1];return t[1]+=n[1],{"clip-rect":b(t).concat(y(n)).join(" ")}},strokeWidth:function(e){return{"stroke-width":parseFloat(e)}},rx:function(e){return{rx:y([e,0])[0]}},ry:function(e){return{ry:y([0,e])[1]}},r:function(e){var t=y([e,e]);return{rx:t[0],ry:t[1]}}},o={};return $.each(e||{},function(e,t){var n=i[e];if("function"==typeof n)$.extend(o,n(t));else{var r=e.replace(/([A-Z]+)([A-Z][a-z])/g,"$1-$2").replace(/([a-z\d])([A-Z])/g,"$1-$2").toLowerCase();o[r]=t}}),o},k=function e(t){var n=t.constructor.prototype;if(n===Raphael.el){if("path"===t.type&&"undefined"==typeof t.arrowheadsDrawn){var r=t.attr("stroke-width"),i=.6+.4*r,o=t.getTotalLength(),s=m.set(),a=m.path(M.isMobile?"M-4,4 C-4,4 -0.25,0 -0.25,0 C-0.25,0 -4,-4 -4,-4":"M-3 4 C-2.75 2.5 0 0.25 0.75 0C0 -0.25 -2.75 -2.5 -3 -4"),l=t.getPointAtLength(o-.4),c=t.getPointAtLength(o-.75*i),p=180*Math.atan2(l.y-c.y,l.x-c.x)/Math.PI,u=t.attr();delete u.path;var h=t.getSubpath(0,o-.75*i);return h=m.path(h).attr(u),h.arrowheadsDrawn=!0,t.remove(),a.rotate(p,M.isMobile?1e-5:.75,0).scale(i,i,.75,0).translate(c.x,c.y).attr(u).attr({"stroke-linejoin":"round","stroke-linecap":"round"}),a.arrowheadsDrawn=!0,s.push(h),s.push(a),s}}else if(n===Raphael.st)for(var d=0,f=t.items.length;d<f;d++)e(t.items[d]);return t},_={circle:function(e,t){return m.ellipse.apply(m,b(e).concat(y([t,t])))},rect:function(e,t,n,r){var i=b([e,t+r]),o=y([n,r]),s=m.rect.apply(m,i.concat(o));return M.isMobile&&(s.node.style.shapeRendering="crispEdges"),s},ellipse:function(e,t){return m.ellipse.apply(m,b(e).concat(y(t)))},fixedEllipse:function(e,t,n,r){var i=b(e),o=y(t),s=2*o[0]*n+r,a=2*o[1]*n+r,l=i[0]-s/2,c=i[1]-a/2,p=document.createElement("div");$(p).css({position:"absolute",width:s+"px",height:a+"px",left:l+"px",top:c+"px"});var u=Raphael(p,s,a),h=u.ellipse(s/2,a/2,o[0],o[1]);return{wrapper:p,visibleShape:h}},arc:function(e,t,n,r,o){n=(n%360+360)%360,r=(r%360+360)%360;var s=b(e),a=y(t),l=i(t,n),c=i(t,r),p=b([e[0]+l[0],e[1]+l[1]]),u=b([e[0]+c[0],e[1]+c[1]]),h=((r-n)%360+360)%360>180;return m.path("M"+p.join(" ")+"A"+a.join(" ")+" 0 "+(h?1:0)+" 0 "+u.join(" ")+(o?"L"+s.join(" ")+"z":""))},path:function(e){var t=m.path(x(e));return t.graphiePath=e,t},fixedPath:function(e,t,n){e=c.map(e,b),t=t?b(t):null,n=n||x;var r=c.min(c.pluck(e,0)),i=c.max(c.pluck(e,0)),o=c.min(c.pluck(e,1)),s=c.max(c.pluck(e,1)),a=[4,4],p=[r,o];e=c.map(e,function(e){return l.add(l.subtract(e,p),l.scale(a,.5))});var u=i-r+a[0],h=s-o+a[1],d=p[0]-a[0]/2,f=p[1]-a[1]/2,g=document.createElement("div");$(g).css({position:"absolute",width:u+"px",height:h+"px",left:d+"px",top:f+"px",transformOrigin:t?u/2+t[0]+"px "+(h/2+t[1])+"px":null});var m=Raphael(g,u,h),v=m.path(n(e));return{wrapper:g,visibleShape:v}},scaledPath:function(e){var t=m.path(x(e,!0));return t.graphiePath=e,t},line:function(e,t){var n=this.path([e,t]);return M.isMobile&&(n.node.style.shapeRendering="crispEdges"),n},parabola:function(e,t,n){return m.path(C(e,t,n))},fixedLine:function(e,t,n){var r=[n,n];e=b(e),t=b(t);var i=[Math.min(e[0],t[0]),Math.min(e[1],t[1])];e=l.add(l.subtract(e,i),l.scale(r,.5)),t=l.add(l.subtract(t,i),l.scale(r,.5));var o=i[0]-r[0]/2,s=i[1]-r[1]/2,a=Math.abs(e[0]-t[0])+r[0],c=Math.abs(e[1]-t[1])+r[1],p=document.createElement("div");$(p).css({position:"absolute",width:a+"px",height:c+"px",left:o+"px",top:s+"px",transformOrigin:e[0]+"px "+e[1]+"px"});var u=Raphael(p,a,c),h="M"+e[0]+" "+e[1]+" L"+t[0]+" "+t[1],d=u.path(h);return d.graphiePath=[e,t],{wrapper:p,visibleShape:d}},sinusoid:function(e,t,n,r){return m.path(S(e,t,n,r))},grid:function(e,t){for(var n=v.step||[1,1],r=m.set(),i=n[0]*Math.ceil(e[0]/n[0]);i<=e[1];i+=n[0])r.push(this.line([i,t[0]],[i,t[1]]));for(var o=n[1]*Math.ceil(t[0]/n[1]);o<=t[1];o+=n[1])r.push(this.line([e[0],o],[e[1],o]));return r},label:function(t,n,r,i){i="undefined"==typeof i||i;var o=$("<span>").addClass("graphie-label"),s=v["label-distance"];o.css($.extend({},v,{position:"absolute",padding:(null!=s?s:7)+"px"})).data("labelDirection",r).appendTo(e),o.setPosition=function(e){var t=b(e);o.css({left:t[0],top:t[1]})},o.setPosition(t);var a=o[0];return o.processMath=function(e,t){u(a,e,t,function(){var e=a.scrollWidth,t=a.scrollHeight;w(a,[e,t])})},o.processText=function(e){o.html(e);var t=a.scrollWidth,n=a.scrollHeight;w(a,[t,n])},i?o.processMath(n,!1):o.processText(n),o},plotParametric:function(e,t,r,i){i=i||function(e){return[e,0]},v.strokeLinejoin||(v.strokeLinejoin="round"),v.strokeLinecap||(v.strokeLinecap="round");var o=t[0],s=t[1],a=(s-o)/(v["plot-points"]||800);0===a&&(a=1);for(var l=m.set(),c=[],p=d.coordDiff(e(o),i(o)),u=o,h=o;h<=s;h+=a){var f=e(h),g=i(h),y=d.coordDiff(f,g);if(y[1]<0!=p[1]<0&&Math.abs(y[1]-p[1])>2*n||Math.abs(y[1])>1e7||isNaN(y[1])){if(r){c.push(f);for(var b=h-a;b>=u;b-=a)c.push(i(b));u=h}l.push(this.path(c)),c=[],r&&c.push(f)}else c.push(f);p=y}if(r)for(var E=s-a;E>=u;E-=a)c.push(i(E));return l.push(this.path(c)),l},plotPolar:function(e,n){var r=n[0],o=n[1];return v["plot-points"]||(v["plot-points"]=2*(o-r)*t),this.plotParametric(function(t){return i(e(t),180*t/Math.PI)},n)},plot:function(e,n,r,i,o){var s=n[0],a=n[1];if(v["plot-points"]||(v["plot-points"]=2*(a-s)*t),r){if(o)throw new Error("Can't shade area between functions with swapped axes.");return this.plotParametric(function(t){return[e(t),t]},n,i)}if(o){if(i)return this.plotParametric(function(t){return[t,e(t)]},n,i,function(e){return[e,o(e)]});throw new Error("fn2 should only be set when 'shade' is True.")}return this.plotParametric(function(t){return[t,e(t)]},n,i)},plotPiecewise:function(e,t){var n=m.set(),r=this;return c.times(e.length,function(i){var o=e[i],s=t[i],a=r.plotParametric(function(e){return[e,o(e)]},s);c.each(a,function(e){n.push(e)})}),n},plotEndpointCircles:function(e){var t=m.set(),n=this;return c.each(e,function(e,r){t.push(n.circle(e,.15))}),t},plotAsymptotes:function(e,t){for(var r=t[0],i=t[1],o=(i-r)/(v["plot-points"]||800),s=m.set(),a=e(r),l=r;l<=i;l+=o){var c=e(l);c<0!=a<0&&Math.abs(c-a)>2*n&&s.push(this.line([l,n],[l,-n])),a=c}return s}},M=new f;return c.extend(M,{raphael:m,init:function(i){var o=i.scale||[40,40];if(o="number"==typeof o?[o,o]:o,t=o[0],n=o[1],null==i.range)return Khan.error("range should be specified in graph init");r=i.range[0],a=i.range[1];var s=(r[1]-r[0])*t,l=(a[1]-a[0])*n;return m.setSize(s,l),$(e).css({width:s,height:l}),this.range=i.range,this.scale=o,this.dimensions=[s,l],this.xpixels=s,this.ypixels=l,this.isMobile=i.isMobile,this},style:function(e,t){var n=P(e);if("function"==typeof t){var r=v;v=$.extend({},v,n);var i=t.call(M);return v=r,i}$.extend(v,n)},scalePoint:b,scaleVector:y,unscalePoint:E,unscaleVector:T,svgPath:x,svgParabolaPath:C,svgSinusoidPath:S}),$.each(_,function(e){M[e]=function(){var t=arguments[arguments.length-1],n=v,r=void 0;if("object"!==("undefined"==typeof t?"undefined":s(t))||c.isArray(t))v=$.extend({},v),r=_[e].apply(_,arguments);else{v=o({},v,P(t));var i=[].slice.call(arguments,0,arguments.length-1);r=_[e].apply(_,i)}var a=r.constructor.prototype;return a===Raphael.el||a===Raphael.st?(r.attr(v),v.arrows&&(r=k(r))):r instanceof $&&r.css(v),v=n,r}}),M.graphInit=function(e){var t=this;e=e||{},$.each(e,function(t,n){t.match(/.*Opacity$/)||"range"===t||"number"!=typeof n||(e[t]=[n,n]),"range"!==t&&"gridRange"!==t||(n.constructor===Array?n[0].constructor!==Array&&(e[t]=[[-n[0],n[0]],[-n[1],n[1]]]):"number"==typeof n&&(e[t]=[[-n,n],[-n,n]]))});var n=e.range||[[-10,10],[-10,10]],r=e.gridRange||e.range,i=e.scale||[20,20],o=null==e.grid||e.grid,s=e.gridOpacity||.1,a=e.gridStep||[1,1],l=null==e.axes||e.axes,p=e.axisArrows||"",u=e.axisOpacity||1,d=e.axisCenter||[Math.min(Math.max(n[0][0],0),n[0][1]),Math.min(Math.max(n[1][0],0),n[1][1])],f=null!=e.axisLabels&&e.axisLabels,g=null==e.ticks||e.ticks,m=e.tickStep||[2,2],v=e.tickLen||[5,5],y=e.tickOpacity||1,b=e.labels||e.labelStep||!1,E=e.labelStep||[1,1],T=e.labelOpacity||1,w=e.unityLabels||!1,x=e.labelFormat||function(e){return e},C=e.xLabelFormat||x,S=e.yLabelFormat||x,P=null==e.smartLabelPositioning||e.smartLabelPositioning,k=[[n[0][0]-(n[0][0]>0?1:0),n[0][1]+(n[0][1]<0?1:0)],[n[1][0]-(n[1][0]>0?1:0),n[1][1]+(n[1][1]<0?1:0)]];if(c.isArray(w)||(w=[w,w]),P){var _=function(e){return function(t){return(e(t)+"").replace(/-(\d)/g,"\\llap{-}$1")}};C=_(C),S=_(S)}this.init({range:k,scale:i,isMobile:e.isMobile}),o&&this.grid(r[0],r[1],{stroke:e.isMobile?h.GRAY_C:"#000000",opacity:e.isMobile?1:s,step:a,strokeWidth:e.isMobile?1:2}),l&&("<->"===p||p===!0?this.style({stroke:e.isMobile?h.GRAY_G:"#000000",opacity:e.isMobile?1:u,strokeWidth:e.isMobile?1:2,arrows:"->"},function(){n[1][0]<0&&n[1][1]>0&&(this.path([d,[r[0][0],d[1]]]),this.path([d,[r[0][1],d[1]]])),n[0][0]<0&&n[0][1]>0&&(this.path([d,[d[0],r[1][0]]]),this.path([d,[d[0],r[1][1]]]))}):"->"!==p&&""!==p||this.style({stroke:"#000000",opacity:u,strokeWidth:2,arrows:p},function(){this.path([[r[0][0],d[1]],[r[0][1],d[1]]]),this.path([[d[0],r[1][0]],[d[0],r[1][1]]])}),f&&2===f.length&&(this.label([r[0][1],d[1]],f[0],"right"),this.label([d[0],r[1][1]],f[1],"above"))),g&&!function(){var o=e.isMobile;t.style({stroke:e.isMobile?h.GRAY_G:"#000000",opacity:e.isMobile?1:y,strokeWidth:1},function(){var e=a[0]*m[0],t=v[0]/i[1],s=r[0][0],l=r[0][1];if(n[1][0]<0&&n[1][1]>0){for(var c=e+d[0];c<=l;c+=e)(c<l||!p)&&this.line([c,-t+d[1]],[c,o?0:t+d[1]]);for(var u=-e+d[0];u>=s;u-=e)(u>s||!p)&&this.line([u,-t+d[1]],[u,o?0:t+d[1]])}if(e=a[1]*m[1],t=v[1]/i[0],s=r[1][0],l=r[1][1],n[0][0]<0&&n[0][1]>0){for(var h=e+d[1];h<=l;h+=e)(h<l||!p)&&this.line([-t+d[0],h],[o?0:t+d[0],h]);for(var f=-e+d[1];f>=s;f-=e)(f>s||!p)&&this.line([-t+d[0],f],[o?0:t+d[0],f])}})}(),b&&this.style({stroke:e.isMobile?h.GRAY_G:"#000000",opacity:e.isMobile?1:T},function(){for(var e=a[0]*m[0]*E[0],t=r[0][0],n=r[0][1],i=d[0]<0?"above":"below",o=d[0]<0?"right":"left",s=0===d[0]&&0!==d[1],l=0!==d[0]&&0===d[1],c=0!==d[0]||0!==d[1],u=w[0]||c,h=w[1]||c,f=(s?0:e)+d[0];f<=n;f+=e)(f<n||!p)&&this.label([f,d[1]],C(f),i);for(var g=-e*(u?1:2)+d[0];g>=t;g-=e)(g>t||!p)&&this.label([g,d[1]],C(g),i);e=a[1]*m[1]*E[1],t=r[1][0],n=r[1][1];for(var v=(l?0:e)+d[1];v<=n;v+=e)(v<n||!p)&&this.label([d[0],v],S(v),o);for(var y=-e*(h?1:2)+d[1];y>=t;y-=e)(y>t||!p)&&this.label([d[0],y],S(y),o)})},M},e.exports=d},function(e,t,n){"use strict";function r(e){return f.reduce(e,function(e,t){return e+t},0)}function i(e){var t=f.zip(e,e.slice(1).concat(e.slice(0,1))),n=f.map(t,function(e){var t=e[0],n=e[1];return(n[0]-t[0])*(n[1]+t[1])});return r(n)>0}function o(){var e=f.toArray(arguments),t=f.zip.apply(f,e);return f.map(t,r)}function s(e){return f.map(e,function(e){return e*-1})}function a(e){var t=70.2941120352484,n=11.374597405497571,r=-.037587715462826674;return(t-n)*Math.exp(r*e)+n}function l(e,t){return[e*Math.cos(t),e*Math.sin(t)*-1]}function c(e,t){var n=t*Math.PI/180;return l(e,n)}function p(e,t){this.set=e.raphael.set(),this.cx=t[0],this.cy=t[1];var n=this,r=e.unscaleVector(180.5)[0],i=e.scalePoint([this.cx-r,this.cy+r-e.unscaleVector(10.5)[1]]);this.set.push(e.mouselayer.image("https://ka-perseus-graphie.s3.amazonaws.com/e9d032f2ab8b95979f674fbfa67056442ba1ff6a.png",i[0],i[1],360,180));var o=function(n,i){var o=e.scaleVector(r);o[0]-=16,o[1]-=16;var s=e.scalePoint(t),a=Math.sin((n+90)*Math.PI/180)*(o[0]+i)+s[0],l=Math.cos((n+90)*Math.PI/180)*(o[1]+i)+s[1];return a+","+l},s=e.raphael.path(" M"+o(180,6)+" L"+o(180,2)+" L"+o(183,10)+" L"+o(180,18)+" L"+o(180,14)+" A"+(e.scaleVector(r)[0]+10)+","+(e.scaleVector(r)[1]+10)+",0,0,1,"+o(170,14)+" L"+o(170,18)+" L"+o(167,10)+" L"+o(170,2)+" L"+o(170,6)+" A"+(e.scaleVector(r)[0]+10)+","+(e.scaleVector(r)[1]+10)+",0,0,0,"+o(180,6)+" Z").attr({stroke:null,fill:x.INTERACTIVE});this.set.push(s),this.centerPoint=e.addMovablePoint({coord:t,visible:!1}),this.rotateHandle=e.addMovablePoint({coord:[Math.sin(275*Math.PI/180)*(r+.5)+this.cx,Math.cos(275*Math.PI/180)*(r+.5)+this.cy],onMove:function(e,t){var r=180*Math.atan2(n.centerPoint.coord[1]-t,n.centerPoint.coord[0]-e)/Math.PI;n.rotate(-r-5,!0)}}),this.rotateHandle.constraints.fixedDistance.dist=r+.5,this.rotateHandle.constraints.fixedDistance.point=this.centerPoint,this.rotateHandle.visibleShape.remove(),this.rotateHandle.mouseTarget.attr({scale:2});var a=!1,l=!1,c=function(){return l||a},p=this,u=$(p.rotateHandle.mouseTarget.getMouseTarget());u.bind("vmousedown",function(e){a=!0,s.animate({scale:1.5,fill:x.INTERACTING},50),$(document).bind("vmouseup.rotateHandle",function(e){a=!1,c()||s.animate({scale:1,fill:x.INTERACTIVE},50),$(document).unbind("vmouseup.rotateHandle")})}),u.bind("vmouseover",function(e){l=!0,s.animate({scale:1.5,fill:x.INTERACTING},50)}),u.bind("vmouseout",function(e){l=!1,c()||s.animate({scale:1,fill:x.INTERACTIVE},50)});var h=$.map(this.set,function(e){return e.node});return this.makeTranslatable=function(){$(h).css("cursor","move"),$(h).bind("vmousedown",function(t){t.preventDefault();var r=t.pageX-$(e.raphael.canvas.parentNode).offset().left,i=t.pageY-$(e.raphael.canvas.parentNode).offset().top;$(document).bind("vmousemove.protractor",function(t){var o=t.pageX-$(e.raphael.canvas.parentNode).offset().left,s=t.pageY-$(e.raphael.canvas.parentNode).offset().top;o=Math.max(10,Math.min(e.xpixels-10,o)),s=Math.max(10,Math.min(e.ypixels-10,s));var a=o-r,l=s-i;$.each(n.set.items,function(){this.translate(a,l)}),n.centerPoint.setCoord([n.centerPoint.coord[0]+a/e.scale[0],n.centerPoint.coord[1]-l/e.scale[1]]),n.rotateHandle.setCoord([n.rotateHandle.coord[0]+a/e.scale[0],n.rotateHandle.coord[1]-l/e.scale[1]]),r=o,i=s}),$(document).one("vmouseup",function(e){$(document).unbind("vmousemove.protractor")})})},this.rotation=0,this.rotate=function(t,n){var r=e.scalePoint(this.centerPoint.coord);return n&&(this.rotation=0),this.set.rotate(this.rotation+t,r[0],r[1]),this.rotation=this.rotation+t,this},this.moveTo=function(t,r){var i=e.scalePoint(n.centerPoint.coord),o=e.scalePoint([t,r]),s=2*g.getDistance(i,o);$({x:i[0],y:i[1]}).animate({x:o[0],y:o[1]},{duration:s,step:function(t,r){var i=0,o=0;"x"===r.prop?i=t-e.scalePoint(n.centerPoint.coord)[0]:"y"===r.prop&&(o=t-e.scalePoint(n.centerPoint.coord)[1]),$.each(n.set.items,function(){this.translate(i,o)}),n.centerPoint.setCoord([n.centerPoint.coord[0]+i/e.scale[0],n.centerPoint.coord[1]-o/e.scale[1]]),n.rotateHandle.setCoord([n.rotateHandle.coord[0]+i/e.scale[0],n.rotateHandle.coord[1]-o/e.scale[1]])}})},this.rotateTo=function(e){Math.abs(this.rotation-e)>180&&(this.rotation+=360);var t=5*Math.abs(this.rotation-e);$({0:this.rotation}).animate({0:e},{duration:t,step:function(e,t){n.rotate(e,!0),n.rotateHandle.setCoord([Math.sin((e+275)*Math.PI/180)*(r+.5)+n.centerPoint.coord[0],Math.cos((e+275)*Math.PI/180)*(r+.5)+n.centerPoint.coord[1]])}})},this.remove=function(){this.set.remove()},this.makeTranslatable(),this}function u(e,t){function n(e){for(var t=0;t<y.length;t++){var n=y[t];if(e%n===0)return h[n]}}f.defaults(t,{center:[0,0],pixelsPerUnit:40,ticksPerUnit:10,units:10,label:"",style:{fill:null,stroke:x.GRAY}});var r=f.extend({},t.style,{strokeWidth:1}),i=f.extend({},t.style,{strokeWidth:2}),o=t.units*t.pixelsPerUnit,s=50,a=e.unscalePoint(m.subtract(e.scalePoint(t.center),m.scale([o,-s],.5))),l=t.pixelsPerUnit/e.scale[0],c=s/e.scale[0],p=m.add(a,[t.units*l,c]),u=1,h=void 0;if(10===t.ticksPerUnit)h={10:u,5:.55*u,1:.35*u};else{var d=[1,.6,.45,.3];h={};for(var v=t.ticksPerUnit;v>=1;v/=2)h[v]=u*(d.shift()||.2)}var y=f.keys(h).sort(function(e,t){return t-e}),b=a[0],E=a[1],T=p[0],w=p[1],C=t.units*t.ticksPerUnit+1,S=e.raphael.set(),P=1/e.scale[0];S.push(e.line([b-P,E],[T+P,E],i)),S.push(e.line([b-P,w],[T+P,w],i)),f.times(C,function(o){var s=o/t.ticksPerUnit,a=b+s*l,p=n(o)*c,u=0===o||o===C-1?i:r;if(S.push(e.line([a,E],[a,E+p],u)),s%1===0){var h=e.scalePoint([a,w]),d=void 0,f=void 0;0===s?(d=t.label,
f={mm:13,cm:11,m:8,km:11,in:8,ft:8,yd:10,mi:10}[d]||3*d.toString().length):(d=s,f=-3*(s.toString().length+1));var g=e.raphael.text(h[0]+f,h[1]+10,d);g.attr({"font-family":"KaTeX_Main","font-size":"12px",color:"#444"}),S.push(g)}});var k=e.mouselayer.path(g.svgPath([a,[b,w],p,[T,E],!0]));k.attr({fill:"#000",opacity:0,stroke:"#000","stroke-width":2}),S.push(k);var _=$.map(S,function(e){return e.node});$(_).css("cursor","move"),$(_).bind("vmousedown",function(t){t.preventDefault();var n=t.pageX-$(e.raphael.canvas.parentNode).offset().left,r=t.pageY-$(e.raphael.canvas.parentNode).offset().top;$(document).bind("vmousemove.ruler",function(t){var i=t.pageX-$(e.raphael.canvas.parentNode).offset().left,o=t.pageY-$(e.raphael.canvas.parentNode).offset().top;i=Math.max(10,Math.min(e.xpixels-10,i)),o=Math.max(10,Math.min(e.ypixels-10,o));var s=i-n,a=o-r;S.translate(s,a),M.setCoord([M.coord[0]+s/e.scale[0],M.coord[1]-a/e.scale[1]]),O.setCoord([O.coord[0]+s/e.scale[0],O.coord[1]-a/e.scale[1]]),n=i,r=o}),$(document).one("vmouseup",function(e){$(document).unbind("vmousemove.ruler")})});var M=e.addMovablePoint({coord:a,normalStyle:{fill:x.INTERACTIVE,"fill-opacity":0,stroke:x.INTERACTIVE},highlightStyle:{fill:x.INTERACTING,"fill-opacity":.1,stroke:x.INTERACTING},pointSize:6,onMove:function(t,n){var r=O.coord[1]-n,i=O.coord[0]-t,o=180*Math.atan2(r,i)/Math.PI,s=m.scale(m.add([t,n],O.coord),.5),a=e.scalePoint(s),l=m.scale(m.add(M.coord,O.coord),.5),c=e.scalePoint(l),p=m.subtract(a,c);S.rotate(-o,c[0],c[1]),S.translate(p[0],p[1])}}),O=e.addMovablePoint({coord:[T,E],normalStyle:{fill:x.INTERACTIVE,"fill-opacity":0,stroke:x.INTERACTIVE},highlightStyle:{fill:x.INTERACTING,"fill-opacity":.1,stroke:x.INTERACTING},pointSize:6,onMove:function(t,n){var r=n-M.coord[1],i=t-M.coord[0],o=180*Math.atan2(r,i)/Math.PI,s=m.scale(m.add([t,n],M.coord),.5),a=e.scalePoint(s),l=m.scale(m.add(M.coord,O.coord),.5),c=e.scalePoint(l),p=m.subtract(a,c);S.rotate(-o,c[0],c[1]),S.translate(p[0],p[1])}});return M.constraints.fixedDistance.dist=o/e.scale[0],M.constraints.fixedDistance.point=O,O.constraints.fixedDistance.dist=o/e.scale[0],O.constraints.fixedDistance.point=M,this.remove=function(){S.remove(),M.remove(),O.remove()},this}function h(e,t){if(this.graphie=e,f.extend(this,t),f.defaults(this,{normalStyle:{stroke:x.INTERACTIVE,"stroke-width":2,fill:x.INTERACTIVE},highlightStyle:{stroke:x.INTERACTING,"stroke-width":2,fill:x.INTERACTING},labelStyle:{stroke:x.DYNAMIC,"stroke-width":1,color:x.DYNAMIC},angleStyle:{stroke:x.DYNAMIC,"stroke-width":1,color:x.DYNAMIC},allowReflex:!0}),!this.points||3!==this.points.length)throw new Error("MovableAngle requires 3 points");this.points=f.map(t.points,function(t){return f.isArray(t)?e.addMovablePoint({coord:t,visible:!1,constraints:{fixed:!0},normalStyle:this.normalStyle}):t},this),this.coords=f.pluck(this.points,"coord"),null==this.reflex&&(this.allowReflex?this.reflex=this._getClockwiseAngle(this.coords)>180:this.reflex=!1),this.rays=f.map([0,2],function(t){return e.addMovableLineSegment({pointA:this.points[1],pointZ:this.points[t],fixed:!0,extendRay:!0})},this),this.temp=[],this.labeledAngle=e.label([0,0],"","center",this.labelStyle),this.fixed||(this.addMoveHandlers(),this.addHighlightHandlers()),this.update()}var d="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol?"symbol":typeof e},f=n(18);n(257);var g=n(200),m=n(199).vector,v=n(199).point,y=n(199).line,b=n(258),E=n(189),T=n(259),w=n(88),x=n(190),C=n(165),S=C.getCanUse3dTransform,P=!1,k={bogusShape:{animate:function(){},attr:function(){},remove:function(){}}};f.extend(g.Graphie.prototype,{addMouseLayer:function(e){var t=this;e=f.extend({allowScratchpad:!1,setDrawingAreaAvailable:function(){}},e);var n=2;t.mouselayer=Raphael(t.raphael.canvas.parentNode,t.xpixels,t.ypixels),$(t.mouselayer.canvas).css("z-index",n),(e.onClick||e.onMouseDown||e.onMouseMove||e.onMouseOver||e.onMouseOut)&&!function(){var n=t.mouselayer.rect(0,0,t.xpixels,t.ypixels).attr({fill:"#000",opacity:0}),r=!1;$(t.mouselayer.canvas).on("vmousedown",function(i){i.target===n[0]&&(e.onMouseDown&&e.onMouseDown(t.getMouseCoord(i)),r=!0,e.onMouseMove&&$(document).bind("vmousemove.mouseLayer",function(n){r&&(n.preventDefault(),e.onMouseMove(t.getMouseCoord(n)))}),$(document).bind("vmouseup.mouseLayer",function(n){$(document).unbind(".mouseLayer"),r&&e.onClick&&e.onClick(t.getMouseCoord(n)),r=!1}))}),e.onMouseOver&&$(t.mouselayer.canvas).on("vmouseover",function(n){e.onMouseOver(t.getMouseCoord(n))}),e.onMouseOut&&$(t.mouselayer.canvas).on("vmouseout",function(n){e.onMouseOut(t.getMouseCoord(n))})}(),e.allowScratchpad||e.setDrawingAreaAvailable(!1),t._mouselayerWrapper=document.createElement("div"),$(t._mouselayerWrapper).css({position:"absolute",left:0,top:0,zIndex:n}),t._visiblelayerWrapper=document.createElement("div"),$(t._visiblelayerWrapper).css({position:"absolute",left:0,top:0});var r=t.raphael.canvas.parentNode;r.appendChild(t._visiblelayerWrapper),r.appendChild(t._mouselayerWrapper),t.addToMouseLayerWrapper=function(e){this._mouselayerWrapper.appendChild(e)},t.addToVisibleLayerWrapper=function(e){this._visiblelayerWrapper.appendChild(e)}},getMousePx:function(e){var t=this,n=e.pageX-$(t.raphael.canvas.parentNode).offset().left,r=e.pageY-$(t.raphael.canvas.parentNode).offset().top;return[n,r]},getMouseCoord:function(e){return this.unscalePoint(this.getMousePx(e))},labelAngle:function(e){var t=this;f.defaults(e,{point1:[0,0],vertex:[0,0],point3:[0,0],label:null,numArcs:1,showRightAngleMarker:!0,pushOut:0,clockwise:!1,style:{}});var n=void 0===e.text?"":e.text,r=e.vertex,i=t.scalePoint(r),s=void 0,l=void 0;e.clockwise?(s=e.point1,l=e.point3):(s=e.point3,l=e.point1);var p=g.findAngle(s,r),u=g.findAngle(l,r),h=(u+360-p)%360,d=(p+h/2)%360,m=5*e.pushOut,v=m+a(h),y=[];if(Math.abs(h-90)<1e-9&&e.showRightAngleMarker?!function(){var n=o(i,c(v,p)),r=o(i,c(v,u));v*=Math.SQRT2;var s=o(i,c(v,d));f.each([n,r],function(n){y.push(t.scaledPath([n,s],e.style))})}():f.times(e.numArcs,function(n){y.push(t.arc(r,t.unscaleVector(v),p,u,e.style)),v+=3}),n){var b=n.match(/\$deg(\d)?/);if(b){var E=b[1]||1;n=n.replace(b[0],w.toFixedApprox(h,E)+"^{\\circ}")}var T=c(v+15,d),x=o(i,T),C=t.unscalePoint(x);e.label?(e.label.setPosition(C),e.label.processMath(n,!0)):t.label(C,n,"center",e.style)}return y},labelSide:function(e){var t=this;f.defaults(e,{point1:[0,0],point2:[0,0],label:null,text:"",numTicks:0,numArrows:0,clockwise:!1,style:{}});var n=void 0,r=void 0;e.clockwise?(n=e.point1,r=e.point2):(n=e.point2,r=e.point1);var i=[(n[0]+r[0])/2,(n[1]+r[1])/2],a=t.scalePoint(i),c=Math.atan2(r[1]-n[1],r[0]-n[0]),p=c+Math.PI/2,u=[],h=0;e.numTicks&&!function(){var n=e.numTicks,r=5,i=5,d=f.extend({},e.style,{strokeWidth:2});f.times(n,function(e){var h=r*(e-(n-1)/2),f=l(h,c),g=l(i,p),m=[o(a,f,g),o(a,f,s(g))];u.push(t.scaledPath(m,d))}),h+=r*(n-1)+15}(),e.numArrows&&!function(){var i=e.numArrows,p=[n,r].sort(function(e,t){return e[1]===t[1]?e[0]-t[0]:e[1]-t[1]})[0],d=t.scalePoint(p),g=f.extend({},e.style,{arrows:"->",strokeWidth:2}),m=5;f.times(i,function(e){var r=h+m*e,i=l(r,c);p!==n&&(i=s(i));var f=o(a,i);u.push(t.scaledPath([d,f],g))})}();var d=e.text;if(d){var m=d.match(/\$len(\d)?/);if(m){var v=g.getDistance(n,r),y=m[1]||1;d=d.replace(m[0],w.toFixedApprox(v,y))}var b=20,E=l(b,p),T=o(a,E),x=t.unscalePoint(T);e.label?(e.label.setPosition(x),e.label.processMath(d,!0)):t.label(x,d,"center",e.style)}return u},labelVertex:function(e){var t=this;if(f.defaults(e,{point1:null,vertex:[0,0],point3:null,label:null,text:"",clockwise:!1,style:{}}),e.text){var n=e.vertex,r=t.scalePoint(n),i=void 0,s=void 0;e.clockwise?(i=e.point1,s=e.point3):(i=e.point3,s=e.point1);var l=135,p=void 0;if(i&&s){var u=g.findAngle(i,n),h=g.findAngle(s,n);l=(h+360-u)%360,p=(u+l/2+180)%360}else if(i){var d=g.findAngle(n,i);p=d+90}else if(s){var m=g.findAngle(s,n);p=m+90}else p=135;var v=10+a(360-l),y=c(v,p),b=o(r,y),E=t.unscalePoint(b);e.label?(e.label.setPosition(E),e.label.processMath(e.text,!0)):t.label(E,e.text,"center",e.style)}},addMovablePoint:function(e){var t=$.extend(!0,{graph:this,coord:[0,0],snapX:0,snapY:0,pointSize:4,highlight:!1,dragging:!1,visible:!0,bounded:!0,constraints:{fixed:!1,constrainX:!1,constrainY:!1,fixedAngle:{},fixedDistance:{}},lineStarts:[],lineEnds:[],polygonVertices:[],normalStyle:{},highlightStyle:{fill:x.INTERACTING,stroke:x.INTERACTING},labelStyle:{color:x.INTERACTIVE},vertexLabel:"",mouseTarget:null},e),n=t.constraints.fixed?x.DYNAMIC:x.INTERACTIVE;t.normalStyle=f.extend({},{fill:n,stroke:n},e.normalStyle),void 0!==e.coordX&&(t.coord[0]=e.coordX),void 0!==e.coordY&&(t.coord[1]=e.coordY);var r=t.graph,i=function(e){t.visible&&t.bounded&&!t.constraints.fixed&&(e=r.constrainToBounds(e,10));var n=e[0],i=e[1];if(0!==t.snapX&&(n=Math.round(n/t.snapX)*t.snapX),0!==t.snapY&&(i=Math.round(i/t.snapY)*t.snapY),t.constraints.fixedDistance.snapPoints){var o=r.scalePoint(e),s=o[0],a=o[1],l=2*Math.PI/t.constraints.fixedDistance.snapPoints,c=t.constraints.fixedDistance.dist,p=t.constraints.fixedDistance.point,u=(p[0]-r.range[0][0])*r.scale[0],h=(-p[1]+r.range[1][1])*r.scale[1],d=s-u,f=-a+h,g=Math.atan(f/d),m=d<0;m&&(g+=Math.PI),g=Math.round(g/l)*l,d=c*Math.cos(g),f=c*Math.sin(g),s=d+u,a=-f+h,n=w.roundTo(5,s/r.scale[0]+r.range[0][0]),i=w.roundTo(5,r.range[1][1]-a/r.scale[1])}var v=t.applyConstraint([n,i]);return v};t.applyConstraint=function(e,n,r){var i=e.slice(),o={};if(r?$.extend(o,{fixed:!1,constrainX:!1,constrainY:!1,fixedAngle:{},fixedDistance:{}},n):$.extend(o,this.constraints,n),o.constrainX)i=[this.coord[0],e[1]];else if(o.constrainY)i=[e[0],this.coord[1]];else if("number"==typeof o.fixedAngle.angle&&"number"==typeof o.fixedDistance.dist){var s=o.fixedAngle.vertex.coord||o.fixedAngle.vertex,a=o.fixedAngle.ref.coord||o.fixedAngle.ref,l=o.fixedDistance.point.coord||o.fixedDistance.point,c=(o.fixedAngle.angle+g.findAngle(a,s))*Math.PI/180,p=o.fixedDistance.dist;i[0]=p*Math.cos(c)+l[0],i[1]=p*Math.sin(c)+l[1]}else if("number"==typeof o.fixedAngle.angle){var u=o.fixedAngle.vertex.coord||o.fixedAngle.vertex,h=o.fixedAngle.ref.coord||o.fixedAngle.ref,d=(o.fixedAngle.angle+g.findAngle(h,u))*Math.PI/180,f=g.findAngle(e,u)*Math.PI/180,m=g.getDistance(e,u),v=m*Math.cos(d-f);v=v<1?1:v,i[0]=v*Math.cos(d)+u[0],i[1]=v*Math.sin(d)+u[1]}else if("number"==typeof o.fixedDistance.dist){var y=o.fixedDistance.point.coord||o.fixedDistance.point,b=g.findAngle(e,y),E=o.fixedDistance.dist;b=b*Math.PI/180,i[0]=E*Math.cos(b)+y[0],i[1]=E*Math.sin(b)+y[1]}else o.fixed&&(i=t.coord);return i},t.coord=i(t.coord);var o=2;if(t.visible&&r.style(t.normalStyle,function(){var e=[t.pointSize/r.scale[0],t.pointSize/r.scale[1]],n={maxScale:o,padding:2};t.visibleShape=new b(r,t.coord,e,n),t.visibleShape.attr(f.omit(t.normalStyle,"scale")),t.visibleShape.toFront()}),t.normalStyle.scale=1,t.highlightStyle.scale=o,t.vertexLabel&&(t.labeledVertex=this.label([0,0],"","center",t.labelStyle)),t.drawLabel=function(){t.vertexLabel&&t.graph.labelVertex({vertex:t.coord,label:t.labeledVertex,text:t.vertexLabel,style:t.labelStyle})},t.drawLabel(),t.grab=function(e){e=e||[0,0],$(document).bind("vmousemove.point vmouseup.point",function(n){n.preventDefault(),t.dragging=!0,P=!0;var o=m.add(r.getMouseCoord(n),e);o=i(o);var s=o[0],a=o[1],l=void 0,c=void 0;if("vmousemove"===n.type){var p=!0;if(f.isFunction(t.onMove)){var u=t.onMove(s,a);u===!1&&(p=!1),f.isArray(u)&&(s=u[0],a=u[1])}if(l=(s-r.range[0][0])*r.scale[0],c=(-a+r.range[1][1])*r.scale[1],p){var h=r.unscalePoint([l,c]);t.visibleShape.moveTo(h),t.mouseTarget.moveTo(h),t.coord=[s,a],t.updateLineEnds(),$(t).trigger("move")}t.drawLabel()}else if("vmouseup"===n.type){if($(document).unbind(".point"),t.dragging=!1,P=!1,f.isFunction(t.onMoveEnd)){var d=t.onMoveEnd(s,a);if(f.isArray(d)){s=d[0],a=d[1],l=(s-r.range[0][0])*r.scale[0],c=(-a+r.range[1][1])*r.scale[1];var g=r.unscalePoint([l,c]);t.visibleShape.moveTo(g),t.mouseTarget.moveTo(g),t.coord=[s,a]}}t.highlight||(t.visibleShape.animate(t.normalStyle,50),t.onUnhighlight&&t.onUnhighlight())}})},t.visible&&!t.constraints.fixed){if(!t.mouseTarget){var s=r.unscaleVector(24),a={mouselayer:!0,padding:0};t.mouseTarget=new b(r,t.coord,s,a),t.mouseTarget.attr({fill:"#000",opacity:0})}var l=$(t.mouseTarget.getMouseTarget());l.css("cursor","move"),l.bind("vmousedown vmouseover vmouseout",function(e){if("vmouseover"===e.type)t.highlight=!0,P||(t.visibleShape.animate(t.highlightStyle,50),t.onHighlight&&t.onHighlight());else if("vmouseout"===e.type)t.highlight=!1,t.dragging||P||(t.visibleShape.animate(t.normalStyle,50),t.onUnhighlight&&t.onUnhighlight());else if("vmousedown"===e.type&&(1===e.which||0===e.which)){e.preventDefault();var n=t.coord,i=r.getMouseCoord(e),o=!("ontouchstart"in window),s=o?[0,0]:m.subtract(n,i);t.grab(s)}})}return t.moveTo=function(e,n,r){var i=g.getDistance(this.graph.scalePoint([e,n]),this.graph.scalePoint(this.coord)),o=5*i,s=r&&function(e){t.coord=e,t.updateLineEnds()};this.visibleShape.animateTo([e,n],o,s),this.mouseTarget.animateTo([e,n],o,s),this.coord=[e,n],f.isFunction(this.onMove)&&this.onMove(e,n)},t.updateLineEnds=function(){$(this.lineStarts).each(function(){this.coordA=t.coord,this.transform()}),$(this.lineEnds).each(function(){this.coordZ=t.coord,this.transform()}),$(this.polygonVertices).each(function(){this.transform()})},t.setCoord=function(e){this.visible&&(this.visibleShape.moveTo(e),null!=this.mouseTarget&&this.mouseTarget.moveTo(e)),this.coord=e.slice()},t.setCoordConstrained=function(e){this.setCoord(i(e))},t.toBack=function(){this.visible&&(null!=this.mouseTarget&&this.mouseTarget.toBack(),this.visibleShape.toBack())},t.toFront=function(){this.visible&&(null!=this.mouseTarget&&this.mouseTarget.toFront(),this.visibleShape.toFront())},t.remove=function(){this.visibleShape&&this.visibleShape.remove(),this.mouseTarget&&this.mouseTarget.remove(),this.labeledVertex&&this.labeledVertex.remove()},t},addMovableLineSegment:function(e){var t=$.extend({graph:this,coordA:[0,0],coordZ:[1,1],snapX:0,snapY:0,fixed:!1,ticks:0,normalStyle:{},highlightStyle:{stroke:x.INTERACTING,"stroke-width":6},labelStyle:{stroke:x.INTERACTIVE,color:x.INTERACTIVE},highlight:!1,dragging:!1,tick:[],extendLine:!1,extendRay:!1,constraints:{fixed:!1,constrainX:!1,constrainY:!1},sideLabel:"",vertexLabels:[],numArrows:0,numTicks:0,movePointsWithLine:!1},e),n=t.fixed?x.DYNAMIC:x.INTERACTIVE;t.normalStyle=f.extend({},{"stroke-width":2,stroke:n},e.normalStyle),t.arrowStyle=f.extend({},t.normalStyle,{color:t.normalStyle.stroke}),void 0!==e.pointA?(t.coordA=e.pointA.coord,t.pointA.lineStarts.push(t)):void 0!==e.coordA&&(t.coordA=e.coordA.slice()),void 0!==e.pointZ?(t.coordZ=e.pointZ.coord,t.pointZ.lineEnds.push(t)):void 0!==e.coordA&&(t.coordA=t.coordA.slice());var r=t.graph;r.style(t.normalStyle);for(var i=0;i<t.ticks;++i)t.tick[i]=k.bogusShape;for(var o=g.unscaledSvgPath([[0,0],[1,0]]),s=0;s<t.ticks;++s){var a=.5-(t.ticks-1+2*s)/r.scale[0];o+=g.unscaledSvgPath([[a,-7],[a,7]])}if(e={thickness:Math.max(t.normalStyle["stroke-width"],t.highlightStyle["stroke-width"])},t.visibleLine=new E(r,[0,0],[1,0],e),t.visibleLine.attr(t.normalStyle),!t.fixed){var l={thickness:30,mouselayer:!0};t.mouseTarget=new E(r,[0,0],[1,0],l),t.mouseTarget.attr({fill:"#000",opacity:0})}if(t.transform=function(e){e&&("object"===d(this.pointA)&&(this.coordA=this.pointA.coord),"object"===d(this.pointZ)&&(this.coordZ=this.pointZ.coord));var n=function(e){var t=e.graph.scalePoint(e.coordA),n=e.graph.scalePoint(e.coordZ);return m.polarDegFromCart(m.subtract(n,t))[1]},i=function(e,n,r){e=t.graph;var i=e.range[0][1]-e.range[0][0],o=e.range[1][1]-e.range[1][0],s=i+o,a=e.unscaleVector(m.cartFromPolarDeg([1,r])),l=m.scale(m.normalize(a),s),c=m.add(n,l),p=m.polarDegFromCart(a)[1],u=e.constrainToBoundsOnAngle(c,4,p*Math.PI/180);return u},o=n(this),s=this.coordA,a=this.coordZ;this.extendLine?(s=i(r,s,360-o),a=i(r,a,(540-o)%360)):this.extendRay&&(a=i(r,s,360-o));var l=[this.visibleLine];this.fixed||l.push(this.mouseTarget),f.each(l,function(e){e.moveTo(s,a)});var c=function(e,t){var n=[.75,0],r=[[-3,4],[-2.75,2.5],[0,.25],n,[0,-.25],[-2.75,-2.5],[-3,-4]],o=1.4;r=f.map(r,function(e){var t=m.subtract(e,n),r=m.scale(t,o);return m.add(n,r)});var s=function(e){for(var t="M"+e[0][0]+" "+e[0][1],n=1;n<e.length;n+=3)t+="C"+e[n][0]+" "+e[n][1]+" "+e[n+1][0]+" "+e[n+1][1]+" "+e[n+2][0]+" "+e[n+2][1];return t},a=f.map(r,e.unscalePoint),l={center:e.unscalePoint(n),createPath:s},c=new T(e,a,l);return c.attr(f.extend({"stroke-linejoin":"round","stroke-linecap":"round","stroke-dasharray":""},t)),c.toCoordAtAngle=function(t,r){var s=e.scalePoint(i(e,t,r)),a=S();c.transform("translateX("+(s[0]+o*n[0])+"px) translateY("+(s[1]+o*n[1])+"px) "+(a?"translateZ(0) ":"")+"rotate("+(360-w.bound(r))+"deg)")},c};null==this._arrows&&(this._arrows=[],this.extendLine?(this._arrows.push(c(r,this.normalStyle)),this._arrows.push(c(r,this.normalStyle))):this.extendRay&&this._arrows.push(c(r,this.normalStyle)));var p=[this.coordA,this.coordZ],u=[360-o,(540-o)%360];f.each(this._arrows,function(e,t){e.toCoordAtAngle(p[t],u[t])}),f.invoke(this.temp,"remove"),this.temp=[];var h=this.coordA[0]<this.coordZ[0]||this.coordA[0]===this.coordZ[0]&&this.coordA[1]>this.coordZ[1];this.sideLabel&&this.temp.push(this.graph.labelSide({point1:this.coordA,point2:this.coordZ,label:this.labeledSide,text:this.sideLabel,numArrows:this.numArrows,numTicks:this.numTicks,clockwise:h,style:this.labelStyle})),this.vertexLabels.length&&(this.graph.labelVertex({vertex:this.coordA,point3:this.coordZ,label:this.labeledVertices[0],text:this.vertexLabels[0],clockwise:h,style:this.labelStyle}),this.graph.labelVertex({point1:this.coordA,vertex:this.coordZ,label:this.labeledVertices[1],text:this.vertexLabels[1],clockwise:h,style:this.labelStyle})),this.temp=f.flatten(this.temp)},t.toBack=function(){t.fixed||t.mouseTarget.toBack(),t.visibleLine.toBack()},t.toFront=function(){t.fixed||t.mouseTarget.toFront(),t.visibleLine.toFront()},t.remove=function(){t.fixed||t.mouseTarget.remove(),t.visibleLine.remove(),t.labeledSide&&t.labeledSide.remove(),t.labeledVertices&&f.invoke(t.labeledVertices,"remove"),t._arrows&&f.invoke(t._arrows,"remove"),t.temp.length&&f.invoke(t.temp,"remove")},t.hide=function(){t.visibleLine.hide(),t.temp.length&&f.invoke(t.temp,"hide"),t._arrows&&f.invoke(t._arrows,"hide")},t.show=function(){t.visibleLine.show(),t.temp.length&&f.invoke(t.temp,"show"),t._arrows&&f.invoke(t._arrows,"show")},t.sideLabel&&(t.labeledSide=this.label([0,0],"","center",t.labelStyle)),t.vertexLabels.length&&(t.labeledVertices=f.map(t.vertexLabels,function(e){return this.label([0,0],"","center",t.labelStyle)},this)),!t.fixed&&!t.constraints.fixed){var c=$(t.mouseTarget.getMouseTarget());c.css("cursor","move"),c.bind("vmousedown vmouseover vmouseout",function(e){"vmouseover"===e.type?P||(t.highlight=!0,t.visibleLine.animate(t.highlightStyle,50),t.arrowStyle=f.extend({},t.arrowStyle,{color:t.highlightStyle.stroke,stroke:t.highlightStyle.stroke}),t.transform()):"vmouseout"===e.type?(t.highlight=!1,t.dragging||(t.visibleLine.animate(t.normalStyle,50),t.arrowStyle=f.extend({},t.arrowStyle,{color:t.normalStyle.stroke,stroke:t.normalStyle.stroke}),t.transform())):"vmousedown"!==e.type||1!==e.which&&0!==e.which||!function(){e.preventDefault();var n=(e.pageX-$(r.raphael.canvas.parentNode).offset().left)/r.scale[0]+r.range[0][0],i=r.range[1][1]-(e.pageY-$(r.raphael.canvas.parentNode).offset().top)/r.scale[1];t.snapX>0&&(n=Math.round(n/t.snapX)*t.snapX),t.snapY>0&&(i=Math.round(i/t.snapY)*t.snapY);var o=[t.coordA[0]-n,t.coordA[1]-i],s=[t.coordZ[0]-n,t.coordZ[1]-i],a=-Math.min(r.scaleVector(o)[0],r.scaleVector(s)[0]),l=Math.max(r.scaleVector(o)[0],r.scaleVector(s)[0]),c=Math.max(r.scaleVector(o)[1],r.scaleVector(s)[1]),p=-Math.min(r.scaleVector(o)[1],r.scaleVector(s)[1]);$(document).bind("vmousemove.lineSegment vmouseup.lineSegment",function(e){e.preventDefault(),t.dragging=!0,P=!0;var n=e.pageX-$(r.raphael.canvas.parentNode).offset().left,i=e.pageY-$(r.raphael.canvas.parentNode).offset().top;n=Math.max(a+10,Math.min(r.xpixels-10-l,n)),i=Math.max(c+10,Math.min(r.ypixels-10-p,i));var u=n/r.scale[0]+r.range[0][0],h=r.range[1][1]-i/r.scale[1];if(t.snapX>0&&(u=Math.round(u/t.snapX)*t.snapX),t.snapY>0&&(h=Math.round(h/t.snapY)*t.snapY),"vmousemove"===e.type){t.constraints.constrainX&&(u=t.coordA[0]-o[0]),t.constraints.constrainY&&(h=t.coordA[1]-o[1]);var g=u+o[0]-t.coordA[0],m=h+o[1]-t.coordA[1];t.coordA=[u+o[0],h+o[1]],t.coordZ=[u+s[0],h+s[1]],t.transform(),t.movePointsWithLine&&("object"===d(t.pointA)&&t.pointA.setCoord([t.pointA.coord[0]+g,t.pointA.coord[1]+m]),"object"===d(t.pointZ)&&t.pointZ.setCoord([t.pointZ.coord[0]+g,t.pointZ.coord[1]+m])),f.isFunction(t.onMove)&&t.onMove(g,m)}else"vmouseup"===e.type&&($(document).unbind(".lineSegment"),t.dragging=!1,P=!1,t.highlight||(t.visibleLine.animate(t.normalStyle,50),t.arrowStyle=f.extend({},t.arrowStyle,{color:t.normalStyle.stroke,stroke:t.normalStyle.stroke}),t.transform()),f.isFunction(t.onMoveEnd)&&t.onMoveEnd());$(t).trigger("move")})}()})}return void 0!==t.pointA&&t.pointA.toFront(),void 0!==t.pointZ&&t.pointZ.toFront(),t.transform(),t},addMovablePolygon:function(e){var t=this,n=$.extend({snapX:0,snapY:0,fixed:!1,constrainToGraph:!0,normalStyle:{},highlightStyle:{stroke:x.INTERACTING,"stroke-width":2,fill:x.INTERACTING,"fill-opacity":.05},pointHighlightStyle:{fill:x.INTERACTING,stroke:x.INTERACTING},labelStyle:{stroke:x.DYNAMIC,"stroke-width":1,color:x.DYNAMIC},angleLabels:[],showRightAngleMarkers:[],sideLabels:[],vertexLabels:[],numArcs:[],numArrows:[],numTicks:[],updateOnPointMove:!0,closed:!0},f.omit(e,"points")),r=n.fixed?x.DYNAMIC:x.INTERACTIVE;n.normalStyle=f.extend({"stroke-width":2,"fill-opacity":0,fill:r,stroke:r},e.normalStyle),n.points=e.points;var o=function(e){return!f.isArray(e)};if(n.update=function(){var e=n.points.length;n.coords=f.map(n.points,function(e,t){return o(e)?e.coord:e}),n.left=f.min(f.pluck(n.coords,0)),n.right=f.max(f.pluck(n.coords,0)),n.top=f.max(f.pluck(n.coords,1)),n.bottom=f.min(f.pluck(n.coords,1));var r=f.map(n.coords,function(e){return t.scalePoint(e)});n.closed?r.push(!0):r=r.concat(f.clone(r).reverse()),n.path=g.unscaledSvgPath(r),f.invoke(n.temp,"remove"),n.temp=[];var s=i(n.coords);(n.angleLabels.length||n.showRightAngleMarkers.length)&&f.each(n.labeledAngles,function(r,i){n.temp.push(t.labelAngle({point1:n.coords[(i-1+e)%e],vertex:n.coords[i],point3:n.coords[(i+1)%e],label:r,text:n.angleLabels[i],showRightAngleMarker:n.showRightAngleMarkers[i],numArcs:n.numArcs[i],clockwise:s,style:n.labelStyle}))}),n.sideLabels.length&&f.each(n.labeledSides,function(r,i){n.temp.push(t.labelSide({point1:n.coords[i],point2:n.coords[(i+1)%e],label:r,text:n.sideLabels[i],numArrows:n.numArrows[i],numTicks:n.numTicks[i],clockwise:s,style:n.labelStyle}))}),n.vertexLabels.length&&f.each(n.labeledVertices,function(r,i){t.labelVertex({point1:n.coords[(i-1+e)%e],vertex:n.coords[i],point3:n.coords[(i+1)%e],label:r,text:n.vertexLabels[i],clockwise:s,style:n.labelStyle})}),n.temp=f.flatten(n.temp)},n.transform=function(){n.update(),n.visibleShape.attr({path:n.path}),n.fixed||n.mouseTarget.attr({path:n.path})},n.remove=function(){n.visibleShape.remove(),n.fixed||n.mouseTarget.remove(),n.labeledAngles&&f.invoke(n.labeledAngles,"remove"),n.labeledSides&&f.invoke(n.labeledSides,"remove"),n.labeledVertices&&f.invoke(n.labeledVertices,"remove"),n.temp.length&&f.invoke(n.temp,"remove")},n.toBack=function(){n.fixed||n.mouseTarget.toBack(),n.visibleShape.toBack()},n.toFront=function(){n.fixed||n.mouseTarget.toFront(),n.visibleShape.toFront()},n.updateOnPointMove&&f.each(f.filter(n.points,o),function(e){e.polygonVertices.push(n)}),n.coords=new Array(n.points.length),n.angleLabels.length){var s=Math.max(n.angleLabels.length,n.showRightAngleMarkers.length);n.labeledAngles=f.times(s,function(){return this.label([0,0],"","center",n.labelStyle)},this)}return n.sideLabels.length&&(n.labeledSides=f.map(n.sideLabels,function(e){return this.label([0,0],"","center",n.labelStyle)},this)),n.vertexLabels.length&&(n.labeledVertices=f.map(n.vertexLabels,function(e){return this.label([0,0],"","center",n.labelStyle)},this)),n.update(),n.visibleShape=t.raphael.path(n.path),n.visibleShape.attr(n.normalStyle),n.fixed||(n.mouseTarget=t.mouselayer.path(n.path),n.mouseTarget.attr({fill:"#000",opacity:0,cursor:"move"}),$(n.mouseTarget[0]).bind("vmousedown vmouseover vmouseout",function(e){if("vmouseover"===e.type)P&&!n.dragging||(n.highlight=!0,n.visibleShape.animate(n.highlightStyle,50),f.each(f.filter(n.points,o),function(e){e.visibleShape.animate(n.pointHighlightStyle,50)}));else if("vmouseout"===e.type){if(n.highlight=!1,!n.dragging){n.visibleShape.animate(n.normalStyle,50);var r=f.filter(n.points,o);f.any(f.pluck(r,"dragging"))||f.each(r,function(e){e.visibleShape.animate(e.normalStyle,50)})}}else"vmousedown"!==e.type||1!==e.which&&0!==e.which||!function(){e.preventDefault(),f.each(f.filter(n.points,o),function(e){e.dragging=!0});var r=(e.pageX-$(t.raphael.canvas.parentNode).offset().left)/t.scale[0]+t.range[0][0],i=t.range[1][1]-(e.pageY-$(t.raphael.canvas.parentNode).offset().top)/t.scale[1];n.snapX>0&&(r=Math.round(r/n.snapX)*n.snapX),n.snapY>0&&(i=Math.round(i/n.snapY)*n.snapY);var s=r,a=i,l=n.coords.slice(),c=(r-n.left)*t.scale[0],p=(n.right-r)*t.scale[0],u=(n.top-i)*t.scale[1],h=(i-n.bottom)*t.scale[1];$(document).bind("vmousemove.polygon vmouseup.polygon",function(e){e.preventDefault(),n.dragging=!0,P=!0;var d=e.pageX-$(t.raphael.canvas.parentNode).offset().left,g=e.pageY-$(t.raphael.canvas.parentNode).offset().top;n.constrainToGraph&&(d=Math.max(c+10,Math.min(t.xpixels-10-p,d)),g=Math.max(u+10,Math.min(t.ypixels-10-h,g)));var m=d/t.scale[0]+t.range[0][0],v=t.range[1][1]-g/t.scale[1];if(n.snapX>0&&(m=Math.round(m/n.snapX)*n.snapX),n.snapY>0&&(v=Math.round(v/n.snapY)*n.snapY),"vmousemove"===e.type)!function(){var e=m-r,t=v-i,c=!0;if(f.isFunction(n.onMove)){var p=n.onMove(e,t);p===!1?c=!1:f.isArray(p)&&(e=p[0],t=p[1],m=r+e,v=i+t)}var u=function(n){return[l[n][0]+e,l[n][1]+t]};c&&(f.each(n.points,function(e,t){o(e)?e.setCoord(u(t)):n.points[t]=u(t)}),n.transform(),$(n).trigger("move"),s=m,a=v)}();else if("vmouseup"===e.type){$(document).unbind(".polygon");var y=f.filter(n.points,o);f.each(y,function(e){e.dragging=!1}),n.dragging=!1,P=!1,n.highlight||(n.visibleShape.animate(n.normalStyle,50),f.each(y,function(e){e.visibleShape.animate(e.normalStyle,50)})),f.isFunction(n.onMoveEnd)&&n.onMoveEnd(s-r,a-i)}})}()})),f.invoke(f.filter(n.points,o),"toFront"),n},constrainToBounds:function(e,t){var n=this.unscalePoint([t,this.ypixels-t]),r=this.unscalePoint([this.xpixels-t,t]),i=Math.max(n[0],Math.min(r[0],e[0])),o=Math.max(n[1],Math.min(r[1],e[1]));return[i,o]},constrainToBoundsOnAngle:function(e,t,n){var r=this.unscalePoint([t,this.ypixels-t]),i=this.unscalePoint([this.xpixels-t,t]),o=e.slice();return o[0]<r[0]?o=[r[0],o[1]+(r[0]-o[0])*Math.tan(n)]:o[0]>i[0]&&(o=[i[0],o[1]-(o[0]-i[0])*Math.tan(n)]),o[1]<r[1]?o=[o[0]+(r[1]-o[1])/Math.tan(n),r[1]]:o[1]>i[1]&&(o=[o[0]-(o[1]-i[1])/Math.tan(n),i[1]]),o},addMovableAngle:function(e){return new h(this,e)},addCircleGraph:function(e){var t=this,n=$.extend({center:[0,0],radius:2,snapX:.5,snapY:.5,snapRadius:.5,minRadius:1,centerConstraints:{},centerNormalStyle:{},centerHighlightStyle:{stroke:x.INTERACTING,fill:x.INTERACTING},circleNormalStyle:{stroke:x.INTERACTIVE,"fill-opacity":0},circleHighlightStyle:{stroke:x.INTERACTING,fill:x.INTERACTING,"fill-opacity":.05}},e),r=n.centerConstraints.fixed?x.DYNAMIC:x.INTERACTIVE,i=e?e.centerNormalStyle:null;return n.centerNormalStyle=f.extend({},{fill:r,stroke:r},i),n.centerPoint=t.addMovablePoint({graph:t,coord:n.center,normalStyle:n.centerNormalStyle,snapX:n.snapX,snapY:n.snapY,constraints:n.centerConstraints}),n.circ=t.circle(n.center,n.radius,n.circleNormalStyle),n.perim=t.mouselayer.circle(t.scalePoint(n.center)[0],t.scalePoint(n.center)[1],t.scaleVector(n.radius)[0]).attr({"stroke-width":20,opacity:.002}),n.centerConstraints.fixed||$(n.centerPoint.mouseTarget.getMouseTarget()).on("vmouseover vmouseout",function(e){n.centerPoint.highlight||n.centerPoint.dragging?n.circ.animate(n.circleHighlightStyle,50):n.circ.animate(n.circleNormalStyle,50)}),n.toFront=function(){n.circ.toFront(),n.perim.toFront(),n.centerPoint.visibleShape.toFront(),n.centerConstraints.fixed||n.centerPoint.mouseTarget.toFront()},n.centerPoint.onMove=function(e,r){n.toFront(),n.circ.attr({cx:t.scalePoint(e)[0],cy:t.scalePoint(r)[1]}),n.perim.attr({cx:t.scalePoint(e)[0],cy:t.scalePoint(r)[1]}),n.onMove&&n.onMove(e,r)},$(n.centerPoint).on("move",function(){n.center=this.coord,$(n).trigger("move")}),n.setCenter=function(e,t){n.centerPoint.setCoord([e,t]),n.centerPoint.onMove(e,t),n.center=[e,t]},n.setRadius=function(e){n.radius=e,n.perim.attr({r:t.scaleVector(e)[0]}),n.circ.attr({rx:t.scaleVector(e)[0],ry:t.scaleVector(e)[1]})},n.remove=function(){n.centerPoint.remove(),n.circ.remove(),n.perim.remove()},$(n.perim[0]).css("cursor","move"),$(n.perim[0]).on("vmouseover vmouseout vmousedown",function(e){"vmouseover"===e.type?(n.highlight=!0,P||(n.circ.animate(n.circleHighlightStyle,50),n.centerPoint.visibleShape.animate(n.centerHighlightStyle,50))):"vmouseout"===e.type?(n.highlight=!1,n.dragging||n.centerPoint.dragging||(n.circ.animate(n.circleNormalStyle,50),n.centerPoint.visibleShape.animate(n.centerNormalStyle,50))):"vmousedown"!==e.type||1!==e.which&&0!==e.which||!function(){e.preventDefault(),n.toFront();var r=n.radius;$(document).on("vmousemove vmouseup",function(e){if(e.preventDefault(),n.dragging=!0,P=!0,"vmousemove"===e.type){var i=t.constrainToBounds(t.getMouseCoord(e),10),o=g.getDistance(n.centerPoint.coord,i);o=Math.max(n.minRadius,Math.round(o/n.snapRadius)*n.snapRadius);var s=n.radius,a=!0;if(n.onResize){var l=n.onResize(o,s);f.isNumber(l)?o=l:l===!1&&(a=!1)}a&&(n.setRadius(o),$(n).trigger("move"))}else"vmouseup"===e.type&&($(document).off("vmousemove vmouseup"),n.dragging=!1,P=!1,n.onResizeEnd&&n.onResizeEnd(n.radius,r))})}()}),n},addRotateHandle:function(){var e=function(e,t,n,r,i,o,s){var a=function(r,i){var s=n+i,a=m.cartFromPolarDeg([s,o+r]),l=m.add(t,a),c=e.scalePoint(l);return c[0]+","+c[1]},l=e.scaleVector(n-r),c=e.scaleVector(n+r);return e.raphael.path(" M"+a(i,-r)+" L"+a(i,-3*r)+" L"+a(2*i,0)+" L"+a(i,3*r)+" L"+a(i,r)+" A"+c[0]+","+c[1]+",0,0,1,"+a(-i,r)+" L"+a(-i,3*r)+" L"+a(-2*i,0)+" L"+a(-i,-3*r)+" L"+a(-i,-r)+" A"+l[0]+","+l[1]+",0,0,0,"+a(i,-r)+" Z").attr({stroke:null,fill:s?x.INTERACTING:x.INTERACTIVE})};return function(t){var n=this,r=t.center,i=t.radius,o=t.lengthAngle||30,s=t.hideArrow||!1,a=t.mouseTarget,l=f.uniqueId("rotateHandle");f.isArray(r)&&(r={coord:r});var c=n.addMovablePoint({coord:v.addVector(r.coord,m.cartFromPolarDeg(i,t.angleDeg||0)),constraints:{fixedDistance:{dist:i,point:r}},mouseTarget:a});r.toFront();var p=r.coord,u=c.coord,h=u,d=!1,g=!1,y=void 0,b=function(i){if(!s){var a=m.subtract(i,r.coord),l=m.polarDegFromCart(a),c=l[1];y&&y.remove(),y=e(n,r.coord,t.radius,d||g?t.hoverWidth/2:t.width/2,o,c,d||g)}};$(r).on("move."+l,function(){var e=m.subtract(r.coord,p);c.setCoord(m.add(c.coord,e)),b(c.coord),p=r.coord,c.constraints.fixedDistance.point=r,u=c.coord}),c.onMove=function(e,n){d||(h=u,d=!0);var i=[e,n];if(t.onMove){var o=m.polarDegFromCart(m.subtract(u,r.coord)),s=m.polarDegFromCart(m.subtract(i,r.coord)),a=o[1],l=s[1],c=t.onMove(l,a);null!=c&&c!==!0&&(c===!1&&(c=a),i=m.add(r.coord,m.cartFromPolarDeg([o[0],c])))}return b(i),u=i,i},c.onMoveEnd=function(){if(d=!1,b(c.coord),t.onMoveEnd){var e=m.polarDegFromCart(m.subtract(h,r.coord)),n=m.polarDegFromCart(m.subtract(c.coord,r.coord));t.onMoveEnd(n[1],e[1])}},c.visibleShape.remove(),a||c.mouseTarget.attr({scale:2});var E=$(c.mouseTarget.getMouseTarget());E.bind("vmouseover",function(e){g=!0,b(c.coord)}),E.bind("vmouseout",function(e){g=!1,
b(c.coord)}),b(c.coord);var T=c.remove;return c.remove=function(){T.call(c),y&&y.remove(),$(r).off("move."+l)},c.update=function(){b(c.coord)},c}}(),addReflectButton:function(){var e=function(e,t,n,r,i,o,s){v.equal(n[0],n[1])&&(n=[n[0],v.addVector(n[0],[1,1])]);var a=m.normalize(m.subtract(n[1],n[0])),l=m.scale(a,r/2),c=m.scale(a,i),p=m.rotateDeg(c,90),u=m.rotateDeg(c,-90),h=m.negate(l),d=m.rotateDeg(l,90),f=m.rotateDeg(l,-90),g=v.addVectors(t,p),y=v.addVectors(t,u),b=v.addVectors(t,p,l,d),E=v.addVectors(t,p,h,d),T=v.addVectors(t,u,l,f),w=v.addVectors(t,u,h,f),x=e.path([g,b,E,!0],o),C=e.path([y,T,w,!0],s);return{remove:function(){x.remove(),C.remove()}}};return function(t){var n=this,r=t.line,i=n.addMovablePoint({constraints:t.constraints,coord:y.midpoint([r.pointA.coord,r.pointZ.coord]),snapX:n.snap[0],snapY:n.snap[1],onMove:function(e,t){return!1},onMoveEnd:function(e,n){t.onMoveEnd&&t.onMoveEnd.call(this,e,n)}}),o=!1,s=!1,a=void 0,l=function(){return o},c=f.map([0,1],function(e){var n=e?t.highlightStyle:t.normalStyle;return f.map([0,1],function(e){return f.defaults({"fill-opacity":e},n)})}),p=function(e){return s&&(e=!e),c[+l()][+e]},u=function(r,i){a&&a.remove(),a=e(n,r,i,l()?1.5*t.size:t.size,l()?.125*t.size:.25,p(0),p(1))},h=function(e,t){e=e||r.pointA.coord,t=t||r.pointZ.coord;var n=y.midpoint([e,t]);i.setCoord(n),u(n,[e,t])};$(r).on("move",f.bind(h,i,null,null));var d=$(i.mouseTarget.getMouseTarget());d.on("vclick",function(){var e=t.onClick();e!==!1&&(s=!s,u(i.coord,[r.pointA.coord,r.pointZ.coord]))}),r.pointA.toFront(),r.pointZ.toFront(),i.visibleShape.remove();var g=n.scaleVector(t.size)[0]/20;i.mouseTarget.attr({scale:1.5*g}),d.css("cursor","pointer"),d.bind("vmouseover",function(e){o=!0,u(i.coord,[r.pointA.coord,r.pointZ.coord])}),d.bind("vmouseout",function(e){o=!1,u(i.coord,[r.pointA.coord,r.pointZ.coord])});var m=i.remove;return i.remove=function(){a.remove(),m.call(i)},i.update=h,i.isFlipped=function(){return s},h(),i}}(),protractor:function(e){return new p(this,e)},ruler:function(e){return new u(this,e||{})},addPoints:o}),f.extend(h.prototype,{points:[],snapDegrees:0,snapOffsetDeg:0,angleLabel:"",numArcs:1,pushOut:0,fixed:!1,addMoveHandlers:function(){function e(e,n){var r=30,i=g.getDistance(t.scalePoint(e),t.scalePoint(n));return i<r}var t=this.graphie,n=this.points;n[1].onMove=function(r,i){var a=n[1].coord,l=[r,i],c=o(l,s(a)),p=!0,u={};return f.each([0,2],function(r){var i=n[r].coord,s=o(i,c),a=g.findAngle(l,s);a*=Math.PI/180,s=t.constrainToBoundsOnAngle(s,10,a),u[r]=s,e(l,s)&&(p=!1)}),p&&f.each(u,function(e,t){n[t].setCoord(e)}),p};var r=this.snapDegrees,i=this.snapOffsetDeg;f.each([0,2],function(s){n[s].onMove=function(s,a){var l=[s,a],c=n[1].coord;if(e(c,l))return!1;if(r){var p=g.findAngle(l,c);p=Math.round((p-i)/r)*r+i;var u=g.getDistance(l,c);return o(c,t.polar(u,p))}return!0}}),$(n).on("move",function(){this.update(),$(this).trigger("move")}.bind(this))},addHighlightHandlers:function(){var e=this.points[1];e.onHighlight=function(){f.each(this.points,function(e){e.visibleShape.animate(this.highlightStyle,50)},this),f.each(this.rays,function(e){e.visibleLine.animate(this.highlightStyle,50),e.arrowStyle=f.extend({},e.arrowStyle,{color:this.highlightStyle.stroke,stroke:this.highlightStyle.stroke})},this),this.angleStyle=f.extend({},this.angleStyle,{color:this.highlightStyle.stroke,stroke:this.highlightStyle.stroke}),this.update()}.bind(this),e.onUnhighlight=function(){f.each(this.points,function(e){e.visibleShape.animate(this.normalStyle,50)},this),f.each(this.rays,function(e){e.visibleLine.animate(e.normalStyle,50),e.arrowStyle=f.extend({},e.arrowStyle,{color:e.normalStyle.stroke,stroke:e.normalStyle.stroke})},this),this.angleStyle=f.extend({},this.angleStyle,{color:x.DYNAMIC,stroke:x.DYNAMIC}),this.update()}.bind(this)},_getClockwiseAngle:function(e){var t=(g.findAngle(e[2],e[0],e[1])+360)%360;return t},isReflex:function(){return this.reflex},isClockwise:function(){var e=this._getClockwiseAngle(this.coords)>180;return e===this.reflex},getClockwiseCoords:function(){return this.isClockwise()?f.clone(this.coords):f.clone(this.coords).reverse()},update:function(e){var t=this.coords;this.coords=f.pluck(this.points,"coord"),f.invoke(this.points,"updateLineEnds");var n=this._getClockwiseAngle(t),r=this._getClockwiseAngle(this.coords),i=n>180,o=r>180;this.allowReflex&&(null==e&&(e=i!==o&&Math.abs(r-n)<180),e&&(this.reflex=!this.reflex)),f.invoke(this.temp,"remove"),this.temp=this.graphie.labelAngle({point1:this.coords[0],vertex:this.coords[1],point3:this.coords[2],label:this.labeledAngle,text:this.angleLabel,numArcs:this.numArcs,pushOut:this.pushOut,clockwise:this.reflex===o,style:this.angleStyle})},remove:function(){f.invoke(this.rays,"remove"),f.invoke(this.temp,"remove"),this.labeledAngle.remove()}}),e.exports=k},function(e,t,n){"use strict";function r(e,t){return e+":"+t}function i(e){return e.split(":")[0]}var o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},s=n(18),a=n(199).point,l={_fireEvent:function(e,t,n){s.invoke(e,"call",this,t,n)},_applyConstraints:function(e,t,n){var r=this,i=!1;return s.reduce(this.state.constraints,function(e,s){if(e===!1)return!1;if(i)return e;var l=s.call(r,e,t,o({onSkipRemaining:function(){i=!0}},n));if(l===!1)return!1;if(a.is(l,2))return l;if(l===!0||null==l)return e;throw new Error("Constraint returned invalid result: "+l)},e,this)},draw:function(){var e=this.cloneState();l._fireEvent.call(this,this.state.draw,e,this.prevState),this.prevState=e},listen:function(e,t,n){this._listenerMap=this._listenerMap||{};var i=r(e,t),o=this._listenerMap[i]=this._listenerMap[i]||this.state[e].length;this.state[e][o]=n},unlisten:function(e,t){this._listenerMap=this._listenerMap||{};var n=r(e,t),o=this._listenerMap[n];if(void 0!==o){this.state[e].splice(o,1),delete this._listenerMap[n];var a=s.keys(this._listenerMap);s.each(a,function(t){i(t)===e&&this._listenerMap[t]>o&&this._listenerMap[t]--},this)}}};e.exports=l},function(e,t,n){"use strict";var r,i,o,s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},a=n(52),l=a.StyleSheet,c=a.css,p=(n(18),n(17)),u=n(51),h=n(5),d=h.ClassNames,f=n(83),g=n(84),m=n(82),v=n(260),y=g.checkedColor,b={backgroundColor:g.satSelectedBackgroundColor,borderTopColor:"transparent",borderBottomColor:"transparent",outline:"2px solid "+g.satBlue,zIndex:1},E=p.createClass({displayName:"Choice",propTypes:{apiOptions:p.PropTypes.shape({satStyling:p.PropTypes.bool,isMobile:p.PropTypes.bool}),checked:p.PropTypes.bool,className:p.PropTypes.string,clue:p.PropTypes.node,content:p.PropTypes.node,correct:p.PropTypes.bool,deselectEnabled:p.PropTypes.bool,disabled:p.PropTypes.bool,editMode:p.PropTypes.bool,groupName:p.PropTypes.string,isLastChoice:p.PropTypes.bool,onChecked:p.PropTypes.func.isRequired,pos:p.PropTypes.number,reviewMode:p.PropTypes.bool,showClue:p.PropTypes.bool,type:p.PropTypes.string},statics:{styles:l.create({pos:{display:"none"},satDescription:{display:"block",position:"relative",borderTop:"1px solid #ccc",boxSizing:"border-box",cursor:"pointer",marginLeft:0,padding:"17px 14px","::after":{bottom:-1,content:'" "',height:1,left:0,position:"absolute",width:"100%",zIndex:1}},satDescriptionLastChoice:{borderBottom:"1px solid #ccc"},satDescriptionInputFocused:s({},b),satDescriptionInputActive:s({},b,{backgroundColor:g.satActiveBackgroundColor}),satDescriptionCorrect:{color:g.satCorrectColor,":focus":{borderColor:g.satCorrectColor,outlineColor:g.satCorrectColor}},satDescriptionCorrectChecked:{backgroundColor:g.satCorrectBackgroundColor,borderBottomColor:g.satCorrectBorderColor,borderTopColor:g.satCorrectBorderColor,":after":{backgroundColor:g.satCorrectBorderColor}},satDescriptionIncorrectChecked:{color:g.satIncorrectColor,backgroundColor:g.satIncorrectBackgroundColor,borderBottomColor:g.satIncorrectBorderColor,borderTopColor:g.satIncorrectBorderColor,":after":{backgroundColor:g.satIncorrectBorderColor},":focus":{borderColor:g.satIncorrectColor,outlineColor:g.satIncorrectColor}},input:{display:"inline-block",width:20,margin:3,marginLeft:-20,marginRight:0,float:"none"},satReviewInput:{pointerEvents:"none"},satRadioOptionContent:{userSelect:"text",display:"block",marginLeft:45,cursor:"inherit"},satReviewRadioOptionContent:{fontWeight:"bold"},responsiveCheckboxInput:(r={},r[m.lgOrSmaller]={border:"none",borderRadius:4,":checked":{backgroundColor:y,boxShadow:"none"},":checked::before":{display:"flex",alignItems:"center",justifyContent:"center",content:'"✓"',color:"white",fontFamily:"monospace",fontSize:17,height:g.circleSize,width:g.circleSize}},r),responsiveMobileCheckboxInput:(i={},i[m.lgOrSmaller]={display:"none"},i),satCheckboxOptionContent:{position:"absolute",display:"block",top:"50%",margin:"-16px 0 0 0",width:"auto"},satPosBack:{display:"block",borderRadius:25,border:"2px solid "+g.satBlue,content:"''",height:25,width:25,position:"absolute",top:1,left:1},satPosBackChecked:{background:g.satBlue},satPosBackCorrect:{borderColor:g.satCorrectColor},satPosBackCorrectChecked:{background:g.satCorrectColor},satPosBackIncorrectChecked:{borderColor:g.satIncorrectColor,background:g.satIncorrectColor},satPos:{display:"block",color:g.satBlue,fontFamily:g.boldFontFamily,fontSize:13,textAlign:"center",position:"absolute",left:0,top:7,width:32},satPosChecked:{color:"#fff"},satPosCorrect:{color:g.satCorrectColor},clue:{display:"block"},satReviewClue:{marginTop:13,marginLeft:45},label:{display:"block"},responsiveLabel:(o={},o[m.lgOrSmaller]={WebkitTapHighlightColor:"transparent",alignItems:"center",display:"flex",padding:"17px 0"},o),satLabel:{cursor:"pointer"}})},getDefaultProps:function(){return{checked:!1,classSet:{},disabled:!1,editMode:!1,showClue:!1,type:"radio",pos:0}},getInitialState:function(){return{isInputFocused:!1,isInputActive:!1}},onInputFocus:function(){this.setState({isInputFocused:!0})},onInputBlur:function(){this.setState({isInputFocused:!1})},onInputMouseDown:function(){this.setState({isInputActive:!0}),this.props.apiOptions.satStyling&&this._input&&this._input.focus()},onInputMouseUp:function(){this.setState({isInputActive:!1}),this.props.apiOptions.satStyling&&this._input&&this._input.focus()},onInputMouseOut:function(){this.setState({isInputActive:!1})},inputRef:function(e){this._input=e},render:function(){var e=this,t=String.fromCharCode(65+this.props.pos),n=function(){return e.props.checked?"boolean"==typeof e.props.correct?e.props.correct?i18n._("(Choice %(letter)s, Checked, Correct)",{letter:t}):i18n._("(Choice %(letter)s, Checked, Incorrect)",{letter:t}):i18n._("(Choice %(letter)s, Checked)",{letter:t}):e.props.correct?i18n._("(Choice %(letter)s, Correct Answer)",{letter:t}):i18n._("(Choice %(letter)s)",{letter:t})},r=E.styles,i=this.props.apiOptions.satStyling,o=this.props.apiOptions.isMobile,a=u(this.props.className,"checkbox-label",c(r.label,o&&f.disableTextSelection,!i&&r.responsiveLabel,i&&r.satLabel)),l={type:this.props.type,name:this.props.groupName,checked:this.props.checked,disabled:this.props.disabled,onFocus:this.onInputFocus,onBlur:this.onInputBlur,className:c(f.perseusInteractive,r.input,f.responsiveInput,"radio"===this.props.type&&!i&&f.responsiveRadioInput,"radio"===this.props.type&&o&&!i&&f.responsiveMobileRadioInput,"checkbox"===this.props.type&&!i&&r.responsiveCheckboxInput,"checkbox"===this.props.type&&o&&!i&&r.responsiveMobileCheckboxInput,i&&"radio"===this.props.type&&f.perseusSrOnly,i&&"checkbox"===this.props.type&&r.satCheckboxInput,i&&this.props.reviewMode&&r.satReviewInput)},h=null;h="radio"===this.props.type&&this.props.deselectEnabled?p.createElement(v,s({onChecked:this.props.onChecked,inputRef:this.inputRef},l)):p.createElement("input",s({onChange:function(t){e.props.onChecked(t.target.checked)},ref:this.inputRef},l));var g=this.props,m=g.reviewMode,y=g.correct,b=g.checked,T=g.isLastChoice,w=i&&m&&y,x=i&&m&&!y&&b,C=u("description",w&&"sat-correct",x&&"sat-incorrect",c(i&&this.state.isInputFocused&&r.satDescriptionInputFocused,i&&this.state.isInputActive&&r.satDescriptionInputActive,i&&r.satDescription,w&&r.satDescriptionCorrect,w&&b&&r.satDescriptionCorrectChecked,x&&r.satDescriptionIncorrectChecked,i&&T&&r.satDescriptionLastChoice)),S="checkbox "+c(i&&f.perseusInteractive,i&&r.satCheckboxOptionContent),P="pos-back "+c(r.pos,i&&r.satPosBack,i&&(this.props.checked||this.state.isInputActive)&&r.satPosBackChecked,i&&m&&y&&r.satPosBackCorrect,i&&m&&y&&b&&r.satPosBackCorrectChecked,i&&m&&!y&&b&&r.satPosBackIncorrectChecked),k="pos "+c(r.pos,i&&r.satPos,i&&y&&r.satPosCorrect,i&&(this.props.checked||this.state.isInputActive)&&r.satPosChecked),_=this.props.editMode?"div":"label";return p.createElement(_,{isLabel:!this.props.editMode,className:a,style:{opacity:!i&&this.props.disabled?.5:1}},h,p.createElement("div",{className:C,onMouseDown:this.onInputMouseDown,onMouseUp:this.onInputMouseUp,onMouseOut:this.onInputMouseOut},p.createElement("div",{className:"checkbox-and-option"},p.createElement("span",{className:S},p.createElement("div",{className:P}),p.createElement("div",{className:k},p.createElement("span",{className:"perseus-sr-only"},n()),p.createElement("span",{"aria-hidden":"true"},t))),p.createElement("span",{className:u(d.RADIO.OPTION_CONTENT,d.INTERACTIVE,c(i&&r.satRadioOptionContent,i&&m&&r.satReviewRadioOptionContent)),style:{cursor:"default"}},p.createElement("div",null,this.props.content))),this.props.showClue&&p.createElement("div",{className:u("perseus-radio-clue",c(r.clue,m&&r.satReviewClue))},this.props.clue)))}});e.exports=E},function(e,t,n){"use strict";function r(e){var t=e[0],n=e[1],r=e[2],i=e[3];t<0&&(t*=-1,n*=-1,r*=-1);var o=2*Math.PI;for(n<0&&(n*=-1,r*=-1,r+=o/2);r>0;)r-=o;for(;r<0;)r+=o;return[t,n,r,i]}function i(e){var t=e[0],n=e[1],r=e[2],i=e[3];t<0&&(t*=-1,n*=-1,r*=-1);var o=Math.PI;for(n<0&&(n*=-1,r*=-1,r+=o/2);r>0;)r-=o;for(;r<0;)r+=o;return[t,n,r,i]}function o(e){return T[e]}function s(e){var t=e.charAt(0).toUpperCase()+e.substring(1);return{value:e,title:t,content:React.createElement("img",{src:o(e).url,alt:t})}}var a=n(18),l=n(6),c=n(66),p=c.Plot,u=n(199).point,h={url:null},d={areEqual:function(e,t){return l.deepEq(e,t)},Movable:p,getPropsForCoeffs:function(e){return{fn:a.partial(this.getFunctionForCoeffs,e)}}},f=a.extend({},d,{url:"https://ka-perseus-graphie.s3.amazonaws.com/67aaf581e6d9ef9038c10558a1f70ac21c11c9f8.png",defaultCoords:[[.25,.75],[.75,.75]],getCoefficients:function(e){var t=e[0],n=e[1],r=n[0]-t[0],i=n[1]-t[1];if(0!==r){var o=i/r,s=n[1]-o*n[0];return[o,s]}},getFunctionForCoeffs:function(e,t){var n=e[0],r=e[1];return n*t+r},getEquationString:function(e){var t=this.getCoefficients(e),n=t[0],r=t[1];return"y = "+n.toFixed(3)+"x + "+r.toFixed(3)}}),g=a.extend({},d,{url:"https://ka-perseus-graphie.s3.amazonaws.com/e23d36e6fc29ee37174e92c9daba2a66677128ab.png",defaultCoords:[[.5,.5],[.75,.75]],Movable:c.Parabola,getCoefficients:function(e){var t=e[0],n=e[1],r=t[0],i=t[1],o=(n[1]-i)/((n[0]-r)*(n[0]-r)),s=-2*r*o,a=o*r*r+i;return[o,s,a]},getFunctionForCoeffs:function(e,t){var n=e[0],r=e[1],i=e[2];return(n*t+r)*t+i},getPropsForCoeffs:function(e){return{a:e[0],b:e[1],c:e[2]}},getEquationString:function(e){var t=this.getCoefficients(e),n=t[0],r=t[1],i=t[2];return"y = "+n.toFixed(3)+"x^2 + "+r.toFixed(3)+"x + "+i.toFixed(3)}}),m=a.extend({},d,{url:"https://ka-perseus-graphie.s3.amazonaws.com/3d68e7718498475f53b206c2ab285626baf8857e.png",defaultCoords:[[.5,.5],[.6,.6]],Movable:c.Sinusoid,getCoefficients:function(e){var t=e[0],n=e[1],r=n[1]-t[1],i=Math.PI/(2*(n[0]-t[0])),o=t[0]*i,s=t[1];return[r,i,o,s]},getFunctionForCoeffs:function(e,t){var n=e[0],r=e[1],i=e[2],o=e[3];return n*Math.sin(r*t-i)+o},getPropsForCoeffs:function(e){return{a:e[0],b:e[1],c:e[2],d:e[3]}},getEquationString:function(e){var t=this.getCoefficients(e),n=t[0],r=t[1],i=t[2],o=t[3];return"y = "+n.toFixed(3)+" sin("+r.toFixed(3)+"x - "+i.toFixed(3)+") + "+o.toFixed(3)},areEqual:function(e,t){return l.deepEq(r(e),r(t))}}),v=a.extend({},d,{url:"https://ka-perseus-graphie.s3.amazonaws.com/7db80d23c35214f98659fe1cf0765811c1bbfbba.png",defaultCoords:[[.5,.5],[.75,.75]],getCoefficients:function(e){var t=e[0],n=e[1],r=n[1]-t[1],i=Math.PI/(4*(n[0]-t[0])),o=t[0]*i,s=t[1];return[r,i,o,s]},getFunctionForCoeffs:function(e,t){var n=e[0],r=e[1],i=e[2],o=e[3];return n*Math.tan(r*t-i)+o},getEquationString:function(e){var t=this.getCoefficients(e),n=t[0],r=t[1],i=t[2],o=t[3];return"y = "+n.toFixed(3)+" sin("+r.toFixed(3)+"x - "+i.toFixed(3)+") + "+o.toFixed(3)},areEqual:function(e,t){return l.deepEq(i(e),i(t))}}),y=a.extend({},d,{url:"https://ka-perseus-graphie.s3.amazonaws.com/9cbfad55525e3ce755a31a631b074670a5dad611.png",defaultCoords:[[.5,.55],[.75,.75]],defaultAsymptote:[[0,.5],[1,.5]],extraCoordConstraint:function(e,t,n,r,i){var o=a.head(r)[1];return a.all(n,function(e){return e[1]!==o})},extraAsymptoteConstraint:function(e,t,n,r,i){var o=e[1],s=a.all(n,function(e){return e[1]>o})||a.all(n,function(e){return e[1]<o});if(s)return[t[0],o];var l=t[1],c=a.all(n,function(e){return e[1]>l});if(c){var p=a.min(a.map(n,function(e){return e[1]}));return[t[0],p-i.snapStep[1]]}var u=a.max(a.map(n,function(e){return e[1]}));return[t[0],u+i.snapStep[1]]},allowReflectOverAsymptote:!0,getCoefficients:function(e,t){var n=e[0],r=e[1],i=a.head(t)[1],o=Math.log((n[1]-i)/(r[1]-i))/(n[0]-r[0]),s=(n[1]-i)/Math.exp(o*n[0]);return[s,o,i]},getFunctionForCoeffs:function(e,t){var n=e[0],r=e[1],i=e[2];return n*Math.exp(r*t)+i},getEquationString:function(e,t){if(!t)return null;var n=this.getCoefficients(e,t),r=n[0],i=n[1],o=n[2];return"y = "+r.toFixed(3)+"e^("+i.toFixed(3)+"x) + "+o.toFixed(3)}}),b=a.extend({},d,{url:"https://ka-perseus-graphie.s3.amazonaws.com/f6491e99d34af34d924bfe0231728ad912068dc3.png",defaultCoords:[[.55,.5],[.75,.75]],defaultAsymptote:[[.5,0],[.5,1]],extraCoordConstraint:function(e,t,n,r,i){var o=a.head(r)[0];return a.all(n,function(e){return e[0]!==o})&&n[0][1]!==n[1][1]},extraAsymptoteConstraint:function(e,t,n,r,i){var o=e[0],s=a.all(n,function(e){return e[0]>o})||a.all(n,function(e){return e[0]<o});if(s)return[o,t[1]];var l=t[0],c=a.all(n,function(e){return e[0]>l});if(c){var p=a.min(a.map(n,function(e){return e[0]}));return[p-i.snapStep[0],t[1]]}var u=a.max(a.map(n,function(e){return e[0]}));return[u+i.snapStep[0],t[1]]},allowReflectOverAsymptote:!0,getCoefficients:function(e,t){var n=function(e){return[e[1],e[0]]},r=y.getCoefficients(a.map(e,n),a.map(t,n)),i=-r[2]/r[0],o=1/r[0],s=1/r[1];return[s,o,i]},getFunctionForCoeffs:function(e,t,n){var r=e[0],i=e[1],o=e[2];return r*Math.log(i*t+o)},getEquationString:function(e,t){if(!t)return null;var n=this.getCoefficients(e,t),r=n[0],i=n[1],o=n[2];return"y = ln("+r.toFixed(3)+"x + "+i.toFixed(3)+") + "+o.toFixed(3)}}),E=a.extend({},d,{url:"https://ka-perseus-graphie.s3.amazonaws.com/8256a630175a0cb1d11de223d6de0266daf98721.png",defaultCoords:[[.5,.5],[.75,.75]],getCoefficients:function(e){var t=e[0],n=e[1],r=n[0]-t[0],i=n[1]-t[1];if(0!==r){var o=Math.abs(i/r);n[1]<t[1]&&(o*=-1);var s=t[0],a=t[1];return[o,s,a]}},getFunctionForCoeffs:function(e,t){var n=e[0],r=e[1],i=e[2];return n*Math.abs(t-r)+i},getEquationString:function(e){var t=this.getCoefficients(e),n=t[0],r=t[1],i=t[2];return"y = "+n.toFixed(3)+"| x - "+r.toFixed(3)+"| + "+i.toFixed(3)}}),T={linear:f,quadratic:g,sinusoid:m,tangent:v,exponential:y,logarithm:b,absolute_value:E},w=a.keys(T),x={validate:function(e,t){if(e.type!==t.correct.type)return{type:"points",earned:0,total:1,message:null};if(null==e.coords)return{type:"invalid",message:null};var n=o(e.type),r=n.getCoefficients(e.coords,e.asymptote),i=n.getCoefficients(t.correct.coords,t.correct.asymptote);return null==r||null==i?{type:"invalid",message:null}:n.areEqual(r,i)?{type:"points",earned:1,total:1,message:null}:{type:"points",earned:0,total:1,message:null}},getEquationString:function(e){var t=e.plot;if(t.type&&t.coords){var n=o(t.type),r=n.getEquationString(t.coords,t.asymptote);return r||""}return""},pointsFromNormalized:function(e,t,n,r){var i=function(e,t){return Math.floor((e[1]-e[0])/t)};return a.map(e,function(e){var o=a.map(e,function(e,r){var o=t[r],s=n[r],a=i(o,s),l=Math.round(e*a);return o[0]+s*l});return u.roundTo(o,r)})},maybePointsFromNormalized:function(e,t,n,r){return e?this.pointsFromNormalized(e,t,n,r):e},defaultPlotProps:function(e,t){var n=o(e),r=[1,1],i=l.snapStepFromGridStep(r);return{type:e,asymptote:this.maybePointsFromNormalized(n.defaultAsymptote,t.range,t.step,i),coords:null}},chooseType:a.first,getGridAndSnapSteps:function(e,t){var n=e.gridStep||l.getGridStep(e.range,e.step,t),r=e.snapStep||l.snapStepFromGridStep(n);return{gridStep:n,snapStep:r}}},C={};C.graph={labels:["x","y"],range:[[-10,10],[-10,10]],step:[1,1],backgroundImage:h,markings:"graph",rulerLabel:"",rulerTicks:10,valid:!0,showTooltips:!1},C.plot=x.defaultPlotProps("linear",C.graph),C.availableTypes=[C.plot.type],e.exports={GrapherUtil:x,allTypes:w,typeToButton:s,functionForType:o,DEFAULT_GRAPHER_PROPS:C,DEFAULT_BACKGROUND_IMAGE:h}},function(e,t,n){"use strict";var r=n(54),i=n(17),o=i.createClass({displayName:"ArrowPicker",propTypes:{value:i.PropTypes.string,onChange:i.PropTypes.func.isRequired},getDefaultProps:function(){return{value:""}},render:function(){return i.createElement(r,{value:this.props.value,allowEmpty:!1,buttons:[{value:"",content:i.createElement("span",null,"—")},{value:"->",content:i.createElement("span",null,"→")}],onChange:this.props.onChange})}});e.exports=o},function(e,t,n){"use strict";var r=n(54),i=n(17),o=n(18),s=n(190),a=i.createClass({displayName:"ColorPicker",COLORS:[s.BLACK,s.BLUE,s.GREEN,s.PINK,s.PURPLE,s.RED,s.GRAY],LIGHT_COLORS:[s.LIGHT_BLUE,s.LIGHT_ORANGE,s.LIGHT_PINK,s.LIGHT_GREEN,s.LIGHT_PURPLE,s.LIGHT_RED,"#fff"],propTypes:{value:i.PropTypes.string,lightColors:i.PropTypes.bool,onChange:i.PropTypes.func.isRequired},getDefaultProps:function(){return{value:s.BLACK,lightColors:!1}},render:function(){var e=this.props.lightColors?this.LIGHT_COLORS:this.COLORS;return i.createElement(r,{value:this.props.value,allowEmpty:!1,buttons:o.map(e,function(e){return{value:e,content:i.createElement("span",null,i.createElement("span",{className:"colorpicker-circle",style:{background:e}})," ")}}),onChange:this.props.onChange})}});e.exports=a},function(e,t,n){"use strict";var r=n(17),i=n(60),o=n(54),s=n(175),a=n(181),l=n(178),c=r.createClass({displayName:"ConstraintEditor",mixins:[s],propTypes:{constraint:r.PropTypes.string,snap:r.PropTypes.number,constraintFn:r.PropTypes.string,onChange:r.PropTypes.func.isRequired,constraintXMin:r.PropTypes.string,constraintXMax:r.PropTypes.string,constraintYMin:r.PropTypes.string,constraintYMax:r.PropTypes.string},getDefaultProps:function(){return{constraint:"none",snap:.5,constraintFn:"0",constraintXMin:"-10",constraintXMax:"10",constraintYMin:"-10",constraintYMax:"10"}},render:function(){return r.createElement("div",null,r.createElement("div",{className:"perseus-widget-row"},"Constraint: ",r.createElement(o,{value:this.props.constraint,allowEmpty:!1,buttons:[{value:"none",content:"None"},{value:"snap",content:"Snap"},{value:"x",content:"x="},{value:"y",content:"y="}],onChange:this.change("constraint")})),"snap"===this.props.constraint&&r.createElement("div",{className:"perseus-widget-row"},"Snap: ",r.createElement(l,{value:this.props.snap,placeholder:0,onChange:this.change("snap")})),"x"===this.props.constraint&&r.createElement("div",{className:"graph-settings"},r.createElement("div",{className:"perseus-widget-row"},r.createElement(i,null,"x=")," ",r.createElement(a,{buttonSets:[],buttonsVisible:"never",value:this.props.constraintFn,onChange:this.change("constraintFn")}))),"y"===this.props.constraint&&r.createElement("div",{className:"graph-settings"},r.createElement("div",{className:"perseus-widget-row"},r.createElement(i,null,"y=")," ",r.createElement(a,{buttonSets:[],buttonsVisible:"never",value:this.props.constraintFn,onChange:this.change("constraintFn")}))),"Ensure these are set so nothing can be dragged off the canvas:",r.createElement("div",{className:"perseus-widget-row"},r.createElement("div",{className:"perseus-widget-row"},r.createElement(i,null,"x \\in \\Large[")," ",r.createElement(a,{buttonSets:[],buttonsVisible:"never",value:this.props.constraintXMin,onChange:this.change("constraintXMin")}),r.createElement(i,null,", ")," ",r.createElement(a,{buttonSets:[],buttonsVisible:"never",value:this.props.constraintXMax,onChange:this.change("constraintXMax")})," ",r.createElement(i,null,"\\Large]"))),r.createElement("div",{className:"perseus-widget-row"},r.createElement("div",{className:"perseus-widget-row"},r.createElement(i,null,"y \\in \\Large[")," ",r.createElement(a,{buttonSets:[],buttonsVisible:"never",value:this.props.constraintYMin,onChange:this.change("constraintYMin")}),r.createElement(i,null,", ")," ",r.createElement(a,{buttonSets:[],buttonsVisible:"never",value:this.props.constraintYMax,onChange:this.change("constraintYMax")})," ",r.createElement(i,null,"\\Large]"))))}});e.exports=c},function(e,t,n){"use strict";var r=n(54),i=n(17),o=i.createClass({displayName:"DashPicker",propTypes:{value:i.PropTypes.string,onChange:i.PropTypes.func.isRequired},getDefaultProps:function(){return{value:""}},render:function(){return i.createElement(r,{value:this.props.value,allowEmpty:!1,buttons:[{value:"",content:i.createElement("span",null,"—")},{value:"-",content:i.createElement("span",null,"–––")},{value:"- ",content:i.createElement("span",null,"–  –")},{value:".",content:i.createElement("span",null,"····")},{value:". ",content:i.createElement("span",null,"· · ·")}],onChange:this.props.onChange})}});e.exports=o},function(e,t,n){"use strict";var r=n(17),i=n(35),o=i.iconChevronDown,s=i.iconChevronRight,a=i.iconCircleArrowDown,l=i.iconCircleArrowUp,c=i.iconTrash,p=n(36),u=r.createClass({displayName:"ElementContainer",propTypes:{initiallVisible:r.PropTypes.bool,title:r.PropTypes.node},getDefaultProps:function(){return{initiallyVisible:!1,title:"More"}},getInitialState:function(){return{show:this.props.initiallyVisible,title:"More",onUp:null,onDown:null,onDelete:null}},render:function(){return r.createElement("div",{className:"perseus-interaction-element"},r.createElement("a",{href:"#",className:"perseus-interaction-element-title "+(this.state.show?"open":"closed"),onClick:this.toggle},this.state.show?r.createElement(p,o):r.createElement(p,s),this.props.title),r.createElement("div",{className:"perseus-interaction-element-content "+(this.state.show?"enter":"leave")},this.props.children,(null!=this.props.onUp||null!=this.props.onDown||null!=this.props.onDelete)&&r.createElement("div",{className:"edit-controls"},null!=this.props.onUp&&r.createElement("button",{onClick:this.props.onUp},r.createElement(p,l)),null!=this.props.onDown&&r.createElement("button",{onClick:this.props.onDown},r.createElement(p,a)),null!=this.props.onDelete&&r.createElement("button",{onClick:this.props.onDelete},r.createElement(p,c)))))},toggle:function(e){e.preventDefault(),this.setState({show:!this.state.show})}});e.exports=u},function(e,t,n){"use strict";function r(e,t){null!==t.value&&(e.fillStyle=h.fgColor,e.font=h.font,e.fillText(t.value,t.pos[0]-h.fontSizePx/2+1,t.pos[1]+h.fontSizePx/2))}function i(e,t){var n=new Path2D;e.lineWidth=5*h.lineWidth,e.strokeStyle=h.fgColor,n.moveTo(t.startPos[0],t.startPos[1]),n.lineTo(t.endPos[0],t.endPos[1]),e.stroke(n),n=new Path2D,e.lineWidth=3*h.lineWidth,e.strokeStyle=h.bgColor,n.moveTo(t.startPos[0],t.startPos[1]),n.lineTo(t.endPos[0],t.endPos[1]),e.stroke(n)}function o(e,t){var n=new Path2D;e.lineWidth=7*h.lineWidth,e.strokeStyle=h.fgColor,n.moveTo(t.startPos[0],t.startPos[1]),n.lineTo(t.endPos[0],t.endPos[1]),e.stroke(n),n=new Path2D,e.lineWidth=5*h.lineWidth,e.strokeStyle=h.bgColor,n.moveTo(t.startPos[0],t.startPos[1]),n.lineTo(t.endPos[0],t.endPos[1]),e.stroke(n),s(e,t)}function s(e,t){var n=new Path2D;e.lineWidth=h.lineWidth,e.strokeStyle=h.fgColor,n.moveTo(t.startPos[0],t.startPos[1]),n.lineTo(t.endPos[0],t.endPos[1]),e.stroke(n)}function a(e){return function(t){p[t.type](e,t)}}function l(e,t){return u[e.type]-u[t.type]}function c(e,t){t.sort(l).forEach(a(e))}var p={text:r,"line:single":s,"line:double":i,"line:triple":o},u={"line:single":0,"line:double":0,"line:triple":0,text:1},h={bgColor:"rgb(255, 255, 255)",fgColor:"rgb(0, 0, 0)",fontSizePx:12,lineWidth:1};h.font=h.fontSizePx+"px sans",e.exports=c},function(e,t,n){"use strict";function r(e,t,n){var r=e[0],i=e[1];return[r+Math.cos(2*t*Math.PI/360)*n,i+-1*Math.sin(2*t*Math.PI/360)*n]}function i(e,t,n,i){var o=e.symbol;if("C"===o&&1!==Object.keys(t).length&&(o=null),"1,0"===e.idx){var s=[0,0];return e.pos=s,e.baseAngle=-30+i,{type:"text",value:o,pos:s,idx:e.idx}}var a=t[e.connections.find(function(e){return t[e].pos})],l=a.connections.indexOf(e.idx),c=60,p=120;4===a.connections.length?(p=90,c=90):(n.find(function(t){return"triple"===t.bondType&&t.to===e.idx})||n.find(function(e){return"triple"===e.bondType&&e.to===a.idx}))&&(p=0,c=0);var u=0,d=a.idx.split(":"),f=d[d.length-1].split(",")[0];u=parseInt(f)%2!==0?a.baseAngle-(c-p*l):a.baseAngle+(c-p*l);var g=r(a.pos,u,h);return e.pos=g,e.baseAngle=u,{type:"text",value:o,pos:g,idx:e.idx}}function o(e,t){var n=.25,r=[e.pos[0],e.pos[1]],i=[t.pos[0],t.pos[1]];return"C"!==e.symbol&&(r=[t.pos[0]-(1-n)*(t.pos[0]-e.pos[0]),t.pos[1]-(1-n)*(t.pos[1]-e.pos[1])]),"C"!==t.symbol&&(i=[e.pos[0]-(1-n)*(e.pos[0]-t.pos[0]),e.pos[1]-(1-n)*(e.pos[1]-t.pos[1])]),[r,i]}function s(e,t){var n=t[e.from],r=t[e.to],i=o(n,r);return{type:"line:"+e.bondType,startPos:i[0],endPos:i[1]}}function a(e){return e.join(":")}function l(e,t,n){return null===n?[e,t]:("atom"===n.type&&!function(){var r=a(n.idx);e[r]={idx:r,symbol:n.symbol,connections:[]},n.bonds&&n.bonds.forEach(function(n){var i=a(n.to.idx);e[r].connections.push(i),t.push({from:r,to:i,bondType:n.bondType}),l(e,t,n.to),e[i].connections.push(r)})}(),[e,t])}function c(e,t,n,r,o){if(0===t.length)return e;var s=t.shift(),a=n[s];return a.connections.forEach(function(e){n[e].pos||t.push(e)}),c(e.concat(i(a,n,r,o)),t,n,r,o)}function p(e,t,n){return 0===n.length?e:p(e.concat(s(n[0],t)),t,n.slice(1))}function u(e,t){var n=l({},[],e),r=n[0],i=n[1],o=c([],["1,0"],r,i,t);return p(o,r,i)}var h=30;e.exports={layout:u,_atomLayout:i,_bondLayout:s,_bondLength:h,_convertTree:l}},function(e,t,n){"use strict";function r(e){this.message=e}function i(e,t,n){var r=t[0],o=t.slice(1),s=void 0;s=Array.isArray(e)?[].concat(e):g({},e||{});var a=n;return o.length>0&&(a=i(s[r],o,n)),s[r]=a,s}function o(e,t){var n=t.reduce(function(e,t){return e[t]},e);return i(e,t,n+1)}function s(e){return m.test(e)}function a(e,t){var n=e[0],o=e.slice(1);if("="===n)return f(o,i(t,["bond","bondType"],"double"));if("#"===n)return f(o,i(t,["bond","bondType"],"triple"));throw new r("Invalid character: "+n)}function l(e,t){if(0===t.length)return e;if(""===e)throw new r("Mismatched parentheses");var n=e[0],i=e.slice(1);return"("===n?l(i,t.concat(n)):")"===n?l(i,t.slice(1)):l(i,t)}function c(e,t){var n=e[0],i=e.slice(1);if("("===n){var s=g({},t,{parens:t.parens+"("});s=o(t,["idx",t.idx.length-1,1]);var a=-1;t.idx[t.idx.length-1][0]%2===0&&(a=0);var c=g({},s,{idx:s.idx.concat([[a,0]]),parens:s.parens.concat("(")}),p=f(i,c),u=f(l(i,["("]),s);return[p].concat(u)}if(")"===n){if("("!==t.parens[t.parens.length-1])throw new r("Mismatched parentheses");return null}throw new r("Invalid bare character: "+n)}function p(e,t){var n=null,r=null;if("["===e[0]){var i=e.indexOf("]");if(i===-1)return["",e];n=e.slice(1,i),r=e.slice(i+1)}else{var o=v.exec(e);n=o[1],r=e.slice(n.length)}return[n,r]}function u(e,t){var n=p(e,t),r=n[0];if(""===r)return["error","Unable to parse bracketed atom."];var o=n[1],s=i(t,["idx",t.idx.length-1],[1+t.idx[t.idx.length-1][0],0]),a=f(o,i(s,["bond","bondType"],"single"));!Array.isArray(a)&&a&&(a=[a]);
var l={type:"atom",symbol:r,bonds:a,idx:s.idx};return t.bond?{type:"bond",bondType:t.bond.bondType,to:l}:l}function h(e){return v.test(e)}function d(e){return"="===e||"#"===e}function f(e,t){if(!s(e))throw new r("Invalid input.");return e&&0!==e.length?h(e)?u(e,t||{idx:[[0,0]],parens:[],stack:[],bondModifiers:[]}):d(e[0])?a(e,t):c(e,t):null}var g=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},m=new RegExp("^[A-Za-z\\[\\]()=#+-]*$"),v=new RegExp("^(Cl|Br|[CONPSFBI]|\\[)");e.exports={parse:f,ParseError:r}},function(e,t,n){"use strict";var r=n(17),i=n(167),o=n(18),s="start-ref-",a="end-ref-",l={display:"inline-block",width:0,visibility:"hidden"},c={display:"inline",whiteSpace:"nowrap"},p={display:"inline-block",color:"rgb(255, 255, 255)",backgroundColor:"rgb(90, 90, 90)",paddingLeft:10,paddingRight:10,userSelect:"none",WebkitUserSelect:"none"},u={display:"inline-block",color:"rgb(255, 255, 255)",backgroundColor:"rgb(90, 90, 90)",userSelect:"none",WebkitUserSelect:"none",width:22,height:22,borderRadius:"50%",textAlign:"center"},h=r.createClass({displayName:"RefStart",propTypes:{refContent:r.PropTypes.node.isRequired},render:function(){return r.createElement("span",{style:l},"_")},getRefContent:function(){return this.props.refContent}}),d=r.createClass({displayName:"RefEnd",render:function(){return r.createElement("span",{style:l},"_")}}),f={newline:i.defaultRules.newline,paragraph:i.defaultRules.paragraph,escape:i.defaultRules.escape,passageFootnote:{order:i.defaultRules.escape.order+.1,match:i.inlineRegex(/^\^/),parse:function(e,t,n){var r=n.lastFootnote.id+1,i={id:r,text:1===r?"*":""+r};return"*"===n.lastFootnote.text&&(n.lastFootnote.text=""+n.lastFootnote.id),n.lastFootnote=i,i},react:function(e,t,n){return r.createElement("sup",{key:n.key},e.text)}},refStart:{order:i.defaultRules.escape.order+.2,match:function(e,t){var n=/^\{\{/.exec(e);if(n){for(var r=2,i=0;r<e.length;){var o=e.slice(r,r+2);if("{{"===o)i++,r++;else if("}}"===o){if(!(i>0))break;i--,r++}r++}var s=e.slice(2,r);return[n[0],s]}return null},parse:function(e,t,n){if(!n.useRefs)return{ref:null,refContent:null};var r=n.lastRef+1;n.lastRef=r,n.currentRef.push(r);var i=t("(“"+e[1]+"”)\n\n",o.defaults({useRefs:!1},g));return{ref:r,refContent:i}},react:function(e,t,n){if(null==e.ref)return null;var i=t(e.refContent,{});return r.createElement(h,{ref:s+e.ref,key:s+e.ref,refContent:i})}},refEnd:{order:i.defaultRules.escape.order+.3,match:i.inlineRegex(/^\}\}/),parse:function(e,t,n){if(!n.useRefs)return{ref:null};var r=n.currentRef.pop()||null;return{ref:r}},react:function(e,t,n){return null!=e.ref?r.createElement(d,{ref:a+e.ref,key:a+e.ref}):null}},squareLabel:{order:i.defaultRules.escape.order+.4,match:i.inlineRegex(/^\[\[(\w+)\]\]( *)/),parse:function(e,t,n){return n.firstQuestionRef||(n.firstQuestionRef=e[1]),{content:e[1],space:e[2].length>0}},react:function(e,t,n){return[r.createElement("span",{key:"visual-square",className:"perseus-passage-square-label",style:c,"aria-hidden":"true"},r.createElement("span",{style:p},e.content)),r.createElement("span",{key:"alt-text",className:"perseus-sr-only"},$_({number:e.content},"[Marker for question %(number)s]")),e.space?" ":null]}},circleLabel:{order:i.defaultRules.escape.order+.5,match:i.inlineRegex(/^\(\((\w+)\)\)( *)/),parse:function(e,t,n){return{content:e[1],space:e[2].length>0}},react:function(e,t,n){return[r.createElement("span",{key:"visual-circle",className:"perseus-passage-circle-label",style:c,"aria-hidden":!0},r.createElement("span",{style:u},e.content)),r.createElement("span",{key:"alt-text",className:"perseus-sr-only"},$_({number:e.content},"[Circle marker %(number)s]")),e.space?" ":null]}},squareBracketRef:{order:i.defaultRules.escape.order+.6,match:i.inlineRegex(/^\[(\d+)\]( *)/),parse:function(e,t,n){return n.firstSentenceRef||(n.firstSentenceRef=e[1]),{content:e[1],space:e[2].length>0}},react:function(e,t,n){return[r.createElement("span",{key:"visual-brackets",className:"perseus-passage-bracket-label","aria-hidden":"true"},"[",e.content,"]"),r.createElement("span",{key:"alt-text",className:"perseus-sr-only"},$_({number:e.content},"[Sentence %(number)s]")),e.space?" ":null]}},highlight:{order:i.defaultRules.escape.order+.7,match:i.inlineRegex(/^{highlighting.start}(.+?){highlighting.end}/),parse:function(e,t,n){return{content:e[1]}},react:function(e,t,n){return[r.createElement("span",{className:"perseus-highlight"},e.content)]}},reviewHighlight:{order:i.defaultRules.escape.order+.7,match:i.inlineRegex(/^{review-highlighting.start}(.+?){review-highlighting.end}/),parse:function(e,t,n){return{content:e[1]}},react:function(e,t,n){return[r.createElement("span",{className:"perseus-review-highlight"},e.content)]}},strong:i.defaultRules.strong,u:i.defaultRules.u,em:i.defaultRules.em,del:i.defaultRules.del,text:i.defaultRules.text},g={currentRef:[],useRefs:!0,lastRef:0,lastFootnote:{id:0,text:""}},m=i.parserFor(f),v=function(e,t){t=t||{};var n=e+"\n\n";return m(n,o.extend(t,g))};e.exports={parse:v,output:i.reactFor(i.ruleOutput(f,"react")),START_REF_PREFIX:s,END_REF_PREFIX:a,_rulesForTesting:f}},function(e,t,n){"use strict";function r(e,t){var n={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n}var i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},o=n(17),s=n(359),a=s.Provider,l=n(261),c=n(298),p=c.activateKeypad,u=c.dismissKeypad,h=c.configureKeypad,d=c.setCursor,f=c.setKeyHandler,g=n(299),m=o.createClass({displayName:"ProvidedKeypad",propTypes:{onElementMounted:o.PropTypes.func},componentWillMount:function(){this.store=g()},activate:function(){this.store.dispatch(p())},dismiss:function(){this.store.dispatch(u())},configure:function(e,t){this.store.dispatch(h(e)),setTimeout(function(){return t&&t()})},setCursor:function(e){this.store.dispatch(d(e))},setKeyHandler:function(e){this.store.dispatch(f(e))},render:function(){var e=this,t=this.props,n=t.onElementMounted,s=r(t,["onElementMounted"]);return o.createElement(a,{store:this.store},o.createElement(l,i({onElementMounted:function(t){var r=i({},t,{activate:e.activate,dismiss:e.dismiss,configure:e.configure,setCursor:e.setCursor,setKeyHandler:e.setKeyHandler});n&&n(r)}},s)))}});e.exports=m},function(e,t,n){"use strict";var r=n(17),i=n(301),o=n(267),s=n(198),a=s.BorderDirections,l=s.EchoAnimationTypes,c=s.IconTypes,p=s.KeyTypes,u=s.KeypadTypes,h=r.PropTypes.shape({type:r.PropTypes.oneOf(Object.keys(c)).isRequired,data:r.PropTypes.string.isRequired}),d=r.PropTypes.oneOf(Object.keys(i)),f=r.PropTypes.shape({ariaLabel:r.PropTypes.string,id:d.isRequired,type:r.PropTypes.oneOf(Object.keys(p)).isRequired,childKeyIds:r.PropTypes.arrayOf(d),icon:h.isRequired}),g=r.PropTypes.shape({keypadType:r.PropTypes.oneOf(Object.keys(u)).isRequired,extraKeys:r.PropTypes.arrayOf(d)}),m=r.PropTypes.shape({activate:r.PropTypes.func.isRequired,dismiss:r.PropTypes.func.isRequired,configure:r.PropTypes.func.isRequired,setCursor:r.PropTypes.func.isRequired,setKeyHandler:r.PropTypes.func.isRequired}),v=r.PropTypes.arrayOf(r.PropTypes.oneOf(Object.keys(a))),y=r.PropTypes.shape({height:r.PropTypes.number,width:r.PropTypes.number,top:r.PropTypes.number,right:r.PropTypes.number,bottom:r.PropTypes.number,left:r.PropTypes.number}),b=r.PropTypes.shape({animationId:r.PropTypes.string.isRequired,animationType:r.PropTypes.oneOf(Object.keys(l)).isRequired,borders:v,id:d.isRequired,initialBounds:y.isRequired}),E=r.PropTypes.oneOf(Object.keys(o)),T=r.PropTypes.shape({parentId:d.isRequired,bounds:y.isRequired,childKeyIds:r.PropTypes.arrayOf(d).isRequired}),w=r.PropTypes.oneOfType([r.PropTypes.arrayOf(r.PropTypes.node),r.PropTypes.node]);e.exports={keyConfigPropType:f,keyIdPropType:d,keypadConfigurationPropType:g,keypadElementPropType:m,bordersPropType:v,boundingBoxPropType:y,echoPropType:b,cursorContextPropType:E,popoverPropType:T,iconPropType:h,childrenPropType:w}},function(e,t,n){"use strict";var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},i=n(17),o=n(19),s=n(52),a=s.StyleSheet,l=n(300),c=l.View,p=n(262),u=n(263),h=n(264),d=n(265),f=n(266),g=f.cursorHandleRadiusPx,m=f.cursorHandleDistanceMultiplier,v=f.gray76,y=n(215),b=y.keypadElementPropType,E=n(266),T=E.brightGreen,w=E.gray17,x=.8,C=i.createClass({displayName:"MathInput",propTypes:{keypadElement:b,onBlur:i.PropTypes.func,onChange:i.PropTypes.func.isRequired,onFocus:i.PropTypes.func,scrollable:i.PropTypes.bool,style:i.PropTypes.any,value:i.PropTypes.string},getDefaultProps:function(){return{scrollable:!1,style:{},value:""}},getInitialState:function(){return{focused:!1,handle:{animateIntoPosition:!1,visible:!1,x:0,y:0}}},componentDidMount:function(){var e=this;this.mathField=new u(this._mathContainer,{},{onCursorMove:function(t){e.props.keypadElement&&e.props.keypadElement.setCursor(t)}}),this.mathField.mathField.__controller.container.unbind("mousedown.mathquill"),this.props.scrollable||(this.mathField.mathField.__controller.scrollHoriz=function(){}),this.mathField.setContent(this.props.value),this._container=o.findDOMNode(this),this._root=this._container.querySelector(".mq-root-block"),this._root.style.fontSize=S+"pt",this.touchStartInitialScroll=null,this.recordTouchStartOutside=function(t){if(e.state.focused&&!e._container.contains(t.target)){var n=!1;if(e.props.keypadElement)for(var r=e._getKeypadBounds(),i=0;i<t.changedTouches.length;i++){var o=t.changedTouches[i].clientX,s=t.changedTouches[i].clientY;if(r.left<=o&&r.right>=o&&r.top<=s&&r.bottom>=s||r.bottom<s){n=!0;break}}n||(e.didTouchOutside=!0,e.dragListener&&e.dragListener.detach(),e.dragListener=new d(function(){e.didScroll=!0,e.dragListener.detach()},t),e.dragListener.attach())}},this.blurOnTouchEndOutside=function(t){e.state.focused&&e.didTouchOutside&&!e.didScroll&&e.blur(),e.didTouchOutside=!1,e.didScroll=!1,e.dragListener&&(e.dragListener.detach(),e.removeListeners=null)},window.addEventListener("touchstart",this.recordTouchStartOutside),window.addEventListener("touchend",this.blurOnTouchEndOutside),window.addEventListener("touchcancel",this.blurOnTouchEndOutside),window.addEventListener("resize",this._clearKeypadBoundsCache),window.addEventListener("orientationchange",this._clearKeypadBoundsCache)},componentWillReceiveProps:function(e){this.props.keypadElement!==e.keypadElement&&this._clearKeypadBoundsCache()},componentDidUpdate:function(){this.mathField.getContent()!==this.props.value&&this.mathField.setContent(this.props.value)},componentWillUnmount:function(){window.removeEventListener("touchstart",this.recordTouchStartOutside),window.removeEventListener("touchend",this.blurOnTouchEndOutside),window.removeEventListener("touchcancel",this.blurOnTouchEndOutside),window.removeEventListener("resize",this._clearKeypadBoundsCache()),window.removeEventListener("orientationchange",this._clearKeypadBoundsCache())},_clearKeypadBoundsCache:function(e){this._keypadBounds=null},_cacheKeypadBounds:function(e){this._keypadBounds=e.getBoundingClientRect()},_getKeypadBounds:function(){if(!this._keypadBounds){var e=o.findDOMNode(this.props.keypadElement);this._cacheKeypadBounds(e)}return this._keypadBounds},_updateCursorHandle:function(e){var t=this._container.getBoundingClientRect(),n=this._container.querySelector(".mq-cursor"),r=n.getBoundingClientRect(),i=r.width,o=2;this.setState({handle:{visible:!0,animateIntoPosition:e,x:r.left+i/2-t.left,y:r.bottom+o-t.top}})},_hideCursorHandle:function(){this.setState({handle:{visible:!1,x:0,y:0}})},blur:function(){this.mathField.blur(),this.props.onBlur&&this.props.onBlur(),this.setState({focused:!1,handle:{visible:!1}})},focus:function(){var e=this;this.props.keypadElement.setKeyHandler(function(t){var n=e.mathField.pressKey(t),r=function(){e.setState({handle:{visible:!1}})},i=e.mathField.getContent();return e.props.value!==i?e.props.onChange(i,r):r(),n}),this.mathField.focus(),this.props.onFocus&&this.props.onFocus(),this.setState({focused:!0},function(){setTimeout(function(){if(e.isMounted()){var t=e.props.keypadElement&&o.findDOMNode(e.props.keypadElement);h(e._container,t)}})})},_findHitNode:function(e,t,n,r,i){for(var o=this;n>=e.top&&n<=e.bottom;){n+=i;for(var s=[[t-r,n],[t,n],[t+r,n]],a=s.map(function(e){var t;return(t=document).elementFromPoint.apply(t,e)}).filter(function(e){return e&&o._root.contains(e)&&(!e.classList.contains("mq-root-block")&&!e.classList.contains("mq-non-leaf")||e.classList.contains("mq-empty")||e.classList.contains("mq-hasCursor"))}),l=null,c=[],p=[],u=0,h={},d={},f=a,g=Array.isArray(f),m=0,f=g?f:f[Symbol.iterator]();;){var v;if(g){if(m>=f.length)break;v=f[m++]}else{if(m=f.next(),m.done)break;v=m.value}var y=v,b=y.getAttribute("mathquill-command-id");null!=b?(c.push(y),h[b]=(h[b]||0)+1,d[b]=y):p.push(y)}for(var E=Object.entries(h),T=Array.isArray(E),w=0,E=T?E:E[Symbol.iterator]();;){var x;if(T){if(w>=E.length)break;x=E[w++]}else{if(w=E.next(),w.done)break;x=w.value}var C=x,S=C[0],P=C[1];P>u&&(u=P,l=d[S])}if(null==l&&p.length>0&&(l=p[0]),null!==l)return this.mathField.setCursorPosition(t,n,l),!0}return!1},_insertCursorAtClosestNode:function(e,t){var n=this.mathField.getCursor();if(!this._root.hasChildNodes())return void n.insAtLeftEnd(this.mathField.mathField.__controller.root);t>this._containerBounds.bottom?t=this._containerBounds.bottom:t<this._containerBounds.top&&(t=this._containerBounds.top+10);var r=void 0,i=void 0;if(i=-8,r=5,!this._findHitNode(this._containerBounds,e,t,r,i)&&(t=this._containerBounds.top,i=8,!this._findHitNode(this._containerBounds,e,t,r,i))){var o=this._root.firstChild.getBoundingClientRect(),s=this._root.lastChild.getBoundingClientRect(),a=o.left,l=s.right;Math.abs(e-l)<Math.abs(e-a)?n.insAtRightEnd(this.mathField.mathField.__controller.root):n.insAtLeftEnd(this.mathField.mathField.__controller.root),this.props.keypadElement&&this.props.keypadElement.setCursor({context:this.mathField.contextForCursor(n)})}},handleTouchStart:function(e){if(e.stopPropagation(),this._hideCursorHandle(),""!==this.mathField.getContent()){this._containerBounds=this._container.getBoundingClientRect();var t=e.changedTouches[0];this._insertCursorAtClosestNode(t.clientX,t.clientY)}this.state.focused||this.focus()},handleTouchMove:function(e){if(e.stopPropagation(),""!==this.mathField.getContent()){var t=e.changedTouches[0];this._insertCursorAtClosestNode(t.clientX,t.clientY)}},handleTouchEnd:function(e){e.stopPropagation(),""!==this.mathField.getContent()&&this._updateCursorHandle()},onCursorHandleTouchStart:function(e){e.stopPropagation(),e.preventDefault(),this._containerBounds=this._container.getBoundingClientRect()},_constrainToBound:function(e,t,n,r){return e<t?t+(e-t)*r:e>n?n+(e-n)*r:e},onCursorHandleTouchMove:function(e){e.stopPropagation();var t=e.changedTouches[0].clientX,n=e.changedTouches[0].clientY,r=t-this._containerBounds.left,i=n-2*g*m-this._containerBounds.top;this.setState({handle:{animateIntoPosition:!1,visible:!0,x:this._constrainToBound(r,0,this._containerBounds.width,x),y:this._constrainToBound(i,0,this._containerBounds.height,x)}});var o=22,s=n-o;this._insertCursorAtClosestNode(t,s)},onCursorHandleTouchEnd:function(e){e.stopPropagation(),this._updateCursorHandle(!0)},onCursorHandleTouchCancel:function(e){e.stopPropagation(),this._updateCursorHandle(!0)},render:function(){var e=this,t=this.state,n=t.focused,s=t.handle,a=this.props.style,l=1,u=2,h=this.state.focused?u:l,d=2,f=k-h-d,g=3,m=1,v={paddingTop:f-m,paddingRight:f,paddingBottom:f-g,paddingLeft:f},y=r({},N.innerContainer,{borderWidth:h},v,n?{borderColor:T}:{},a);return i.createElement(c,{style:O.input,onTouchStart:this.handleTouchStart,onTouchMove:this.handleTouchMove,onTouchEnd:this.handleTouchEnd,onClick:function(e){return e.stopPropagation()},role:"textbox",ariaLabel:i18n._("Math input box")},i.createElement("div",{className:"keypad-input"},i.createElement("div",{ref:function(t){e._mathContainer=o.findDOMNode(t)},style:y})),n&&s.visible&&i.createElement(p,r({},s,{onTouchStart:this.onCursorHandleTouchStart,onTouchMove:this.onCursorHandleTouchMove,onTouchEnd:this.onCursorHandleTouchEnd,onTouchCancel:this.onCursorHandleTouchCancel})))}}),S=18,P=20,k=8,_=P+2*k,M=64,O=a.create({input:{position:"relative",display:"inline-block",verticalAlign:"middle"}}),N={innerContainer:{backgroundColor:"white",display:"flex",minHeight:_,minWidth:M,boxSizing:"border-box",position:"relative",overflow:"hidden",borderStyle:"solid",borderColor:v,borderRadius:4,color:w}};e.exports=C},function(e,t,n){!function(t,n){e.exports=n()}(this,function(){"use strict";function e(e,t){t&&(e.prototype=Object.create(t.prototype)),e.prototype.constructor=e}function t(e){return o(e)?e:M(e)}function n(e){return s(e)?e:O(e)}function r(e){return a(e)?e:N(e)}function i(e){return o(e)&&!l(e)?e:I(e)}function o(e){return!(!e||!e[cn])}function s(e){return!(!e||!e[pn])}function a(e){return!(!e||!e[un])}function l(e){return s(e)||a(e)}function c(e){return!(!e||!e[hn])}function p(e){return e.value=!1,e}function u(e){e&&(e.value=!0)}function h(){}function d(e,t){t=t||0;for(var n=Math.max(0,e.length-t),r=new Array(n),i=0;i<n;i++)r[i]=e[i+t];return r}function f(e){return void 0===e.size&&(e.size=e.__iterate(m)),e.size}function g(e,t){if("number"!=typeof t){var n=t>>>0;if(""+n!==t||4294967295===n)return NaN;t=n}return t<0?f(e)+t:t}function m(){return!0}function v(e,t,n){return(0===e||void 0!==n&&e<=-n)&&(void 0===t||void 0!==n&&t>=n)}function y(e,t){return E(e,t,0)}function b(e,t){return E(e,t,t)}function E(e,t,n){return void 0===e?n:e<0?Math.max(0,t+e):void 0===t?e:Math.min(t,e)}function T(e){this.next=e}function w(e,t,n,r){var i=0===e?t:1===e?n:[t,n];return r?r.value=i:r={value:i,done:!1},r}function x(){return{value:void 0,done:!0}}function C(e){return!!k(e)}function S(e){return e&&"function"==typeof e.next}function P(e){var t=k(e);return t&&t.call(e)}function k(e){var t=e&&(xn&&e[xn]||e[Cn]);if("function"==typeof t)return t}function _(e){return e&&"number"==typeof e.length}function M(e){return null===e||void 0===e?B():o(e)?e.toSeq():U(e)}function O(e){return null===e||void 0===e?B().toKeyedSeq():o(e)?s(e)?e.toSeq():e.fromEntrySeq():z(e)}function N(e){return null===e||void 0===e?B():o(e)?s(e)?e.entrySeq():e.toIndexedSeq():q(e)}function I(e){return(null===e||void 0===e?B():o(e)?s(e)?e.entrySeq():e:q(e)).toSetSeq()}function A(e){this._array=e,this.size=e.length}function R(e){var t=Object.keys(e);this._object=e,this._keys=t,this.size=t.length}function D(e){this._iterable=e,this.size=e.length||e.size}function L(e){this._iterator=e,this._iteratorCache=[]}function F(e){return!(!e||!e[Pn])}function B(){return kn||(kn=new A([]))}function z(e){var t=Array.isArray(e)?new A(e).fromEntrySeq():S(e)?new L(e).fromEntrySeq():C(e)?new D(e).fromEntrySeq():"object"==typeof e?new R(e):void 0;if(!t)throw new TypeError("Expected Array or iterable object of [k, v] entries, or keyed object: "+e);return t}function q(e){var t=W(e);if(!t)throw new TypeError("Expected Array or iterable object of values: "+e);return t}function U(e){var t=W(e)||"object"==typeof e&&new R(e);if(!t)throw new TypeError("Expected Array or iterable object of values, or keyed object: "+e);return t}function W(e){return _(e)?new A(e):S(e)?new L(e):C(e)?new D(e):void 0}function H(e,t,n,r){var i=e._cache;if(i){for(var o=i.length-1,s=0;s<=o;s++){var a=i[n?o-s:s];if(t(a[1],r?a[0]:s,e)===!1)return s+1}return s}return e.__iterateUncached(t,n)}function j(e,t,n,r){var i=e._cache;if(i){var o=i.length-1,s=0;return new T(function(){var e=i[n?o-s:s];return s++>o?x():w(t,r?e[0]:s-1,e[1])})}return e.__iteratorUncached(t,n)}function V(e,t){return t?G(t,e,"",{"":e}):K(e)}function G(e,t,n,r){return Array.isArray(t)?e.call(r,n,N(t).map(function(n,r){return G(e,n,r,t)})):$(t)?e.call(r,n,O(t).map(function(n,r){return G(e,n,r,t)})):t}function K(e){return Array.isArray(e)?N(e).map(K).toList():$(e)?O(e).map(K).toMap():e}function $(e){return e&&(e.constructor===Object||void 0===e.constructor)}function Y(e,t){if(e===t||e!==e&&t!==t)return!0;if(!e||!t)return!1;if("function"==typeof e.valueOf&&"function"==typeof t.valueOf){if(e=e.valueOf(),t=t.valueOf(),e===t||e!==e&&t!==t)return!0;if(!e||!t)return!1}return!("function"!=typeof e.equals||"function"!=typeof t.equals||!e.equals(t))}function X(e,t){if(e===t)return!0;if(!o(t)||void 0!==e.size&&void 0!==t.size&&e.size!==t.size||void 0!==e.__hash&&void 0!==t.__hash&&e.__hash!==t.__hash||s(e)!==s(t)||a(e)!==a(t)||c(e)!==c(t))return!1;if(0===e.size&&0===t.size)return!0;var n=!l(e);if(c(e)){var r=e.entries();return t.every(function(e,t){var i=r.next().value;return i&&Y(i[1],e)&&(n||Y(i[0],t))})&&r.next().done}var i=!1;if(void 0===e.size)if(void 0===t.size)"function"==typeof e.cacheResult&&e.cacheResult();else{i=!0;var p=e;e=t,t=p}var u=!0,h=t.__iterate(function(t,r){if(n?!e.has(t):i?!Y(t,e.get(r,vn)):!Y(e.get(r,vn),t))return u=!1,!1});return u&&e.size===h}function J(e,t){if(!(this instanceof J))return new J(e,t);if(this._value=e,this.size=void 0===t?1/0:Math.max(0,t),0===this.size){if(_n)return _n;_n=this}}function Q(e,t){if(!e)throw new Error(t)}function Z(e,t,n){if(!(this instanceof Z))return new Z(e,t,n);if(Q(0!==n,"Cannot step a Range by 0"),e=e||0,void 0===t&&(t=1/0),n=void 0===n?1:Math.abs(n),t<e&&(n=-n),this._start=e,this._end=t,this._step=n,this.size=Math.max(0,Math.ceil((t-e)/n-1)+1),0===this.size){if(Mn)return Mn;Mn=this}}function ee(){throw TypeError("Abstract")}function te(){}function ne(){}function re(){}function ie(e){return e>>>1&1073741824|3221225471&e}function oe(e){if(e===!1||null===e||void 0===e)return 0;if("function"==typeof e.valueOf&&(e=e.valueOf(),e===!1||null===e||void 0===e))return 0;if(e===!0)return 1;var t=typeof e;if("number"===t){var n=0|e;for(n!==e&&(n^=4294967295*e);e>4294967295;)e/=4294967295,n^=e;return ie(n)}if("string"===t)return e.length>Fn?se(e):ae(e);if("function"==typeof e.hashCode)return e.hashCode();if("object"===t)return le(e);if("function"==typeof e.toString)return ae(e.toString());throw new Error("Value type "+t+" cannot be hashed.")}function se(e){var t=qn[e];return void 0===t&&(t=ae(e),zn===Bn&&(zn=0,qn={}),zn++,qn[e]=t),t}function ae(e){for(var t=0,n=0;n<e.length;n++)t=31*t+e.charCodeAt(n)|0;return ie(t)}function le(e){var t;if(Rn&&(t=On.get(e),void 0!==t))return t;if(t=e[Ln],void 0!==t)return t;if(!An){if(t=e.propertyIsEnumerable&&e.propertyIsEnumerable[Ln],void 0!==t)return t;if(t=ce(e),void 0!==t)return t}if(t=++Dn,1073741824&Dn&&(Dn=0),Rn)On.set(e,t);else{if(void 0!==In&&In(e)===!1)throw new Error("Non-extensible objects are not allowed as keys.");if(An)Object.defineProperty(e,Ln,{enumerable:!1,configurable:!1,writable:!1,value:t});else if(void 0!==e.propertyIsEnumerable&&e.propertyIsEnumerable===e.constructor.prototype.propertyIsEnumerable)e.propertyIsEnumerable=function(){return this.constructor.prototype.propertyIsEnumerable.apply(this,arguments)},e.propertyIsEnumerable[Ln]=t;else{if(void 0===e.nodeType)throw new Error("Unable to set a non-enumerable property on object.");e[Ln]=t}}return t}function ce(e){if(e&&e.nodeType>0)switch(e.nodeType){case 1:return e.uniqueID;case 9:return e.documentElement&&e.documentElement.uniqueID}}function pe(e){Q(e!==1/0,"Cannot perform this action with an infinite size.")}function ue(e){return null===e||void 0===e?we():he(e)&&!c(e)?e:we().withMutations(function(t){var r=n(e);pe(r.size),r.forEach(function(e,n){return t.set(n,e)})})}function he(e){return!(!e||!e[Un])}function de(e,t){this.ownerID=e,this.entries=t}function fe(e,t,n){this.ownerID=e,this.bitmap=t,this.nodes=n}function ge(e,t,n){this.ownerID=e,this.count=t,this.nodes=n}function me(e,t,n){this.ownerID=e,this.keyHash=t,this.entries=n}function ve(e,t,n){this.ownerID=e,this.keyHash=t,this.entry=n}function ye(e,t,n){this._type=t,this._reverse=n,this._stack=e._root&&Ee(e._root)}function be(e,t){return w(e,t[0],t[1])}function Ee(e,t){return{node:e,index:0,__prev:t}}function Te(e,t,n,r){var i=Object.create(Wn);return i.size=e,i._root=t,i.__ownerID=n,i.__hash=r,i.__altered=!1,i}function we(){return Hn||(Hn=Te(0))}function xe(e,t,n){var r,i;if(e._root){var o=p(yn),s=p(bn);if(r=Ce(e._root,e.__ownerID,0,void 0,t,n,o,s),!s.value)return e;i=e.size+(o.value?n===vn?-1:1:0)}else{if(n===vn)return e;i=1,r=new de(e.__ownerID,[[t,n]])}return e.__ownerID?(e.size=i,e._root=r,e.__hash=void 0,e.__altered=!0,e):r?Te(i,r):we()}function Ce(e,t,n,r,i,o,s,a){return e?e.update(t,n,r,i,o,s,a):o===vn?e:(u(a),u(s),new ve(t,r,[i,o]))}function Se(e){return e.constructor===ve||e.constructor===me}function Pe(e,t,n,r,i){if(e.keyHash===r)return new me(t,r,[e.entry,i]);var o,s=(0===n?e.keyHash:e.keyHash>>>n)&mn,a=(0===n?r:r>>>n)&mn,l=s===a?[Pe(e,t,n+fn,r,i)]:(o=new ve(t,r,i),s<a?[e,o]:[o,e]);return new fe(t,1<<s|1<<a,l)}function ke(e,t,n,r){e||(e=new h);for(var i=new ve(e,oe(n),[n,r]),o=0;o<t.length;o++){var s=t[o];i=i.update(e,0,void 0,s[0],s[1])}return i}function _e(e,t,n,r){for(var i=0,o=0,s=new Array(n),a=0,l=1,c=t.length;a<c;a++,l<<=1){var p=t[a];void 0!==p&&a!==r&&(i|=l,s[o++]=p)}return new fe(e,i,s)}function Me(e,t,n,r,i){for(var o=0,s=new Array(gn),a=0;0!==n;a++,n>>>=1)s[a]=1&n?t[o++]:void 0;return s[r]=i,new ge(e,o+1,s)}function Oe(e,t,r){for(var i=[],s=0;s<r.length;s++){var a=r[s],l=n(a);o(a)||(l=l.map(function(e){return V(e)})),i.push(l)}return Ae(e,t,i)}function Ne(e,t,n){return e&&e.mergeDeep&&o(t)?e.mergeDeep(t):Y(e,t)?e:t}function Ie(e){return function(t,n,r){if(t&&t.mergeDeepWith&&o(n))return t.mergeDeepWith(e,n);var i=e(t,n,r);return Y(t,i)?t:i}}function Ae(e,t,n){return n=n.filter(function(e){return 0!==e.size}),0===n.length?e:0!==e.size||e.__ownerID||1!==n.length?e.withMutations(function(e){for(var r=t?function(n,r){e.update(r,vn,function(e){return e===vn?n:t(e,n,r)})}:function(t,n){e.set(n,t)},i=0;i<n.length;i++)n[i].forEach(r)}):e.constructor(n[0])}function Re(e,t,n,r){var i=e===vn,o=t.next();if(o.done){var s=i?n:e,a=r(s);return a===s?e:a}Q(i||e&&e.set,"invalid keyPath");var l=o.value,c=i?vn:e.get(l,vn),p=Re(c,t,n,r);return p===c?e:p===vn?e.remove(l):(i?we():e).set(l,p)}function De(e){return e-=e>>1&1431655765,e=(858993459&e)+(e>>2&858993459),e=e+(e>>4)&252645135,e+=e>>8,e+=e>>16,127&e}function Le(e,t,n,r){var i=r?e:d(e);return i[t]=n,i}function Fe(e,t,n,r){var i=e.length+1;if(r&&t+1===i)return e[t]=n,e;for(var o=new Array(i),s=0,a=0;a<i;a++)a===t?(o[a]=n,s=-1):o[a]=e[a+s];return o}function Be(e,t,n){var r=e.length-1;if(n&&t===r)return e.pop(),e;for(var i=new Array(r),o=0,s=0;s<r;s++)s===t&&(o=1),i[s]=e[s+o];return i}function ze(e){var t=je();if(null===e||void 0===e)return t;if(qe(e))return e;var n=r(e),i=n.size;return 0===i?t:(pe(i),i>0&&i<gn?He(0,i,fn,null,new Ue(n.toArray())):t.withMutations(function(e){e.setSize(i),n.forEach(function(t,n){return e.set(n,t)})}))}function qe(e){return!(!e||!e[Kn])}function Ue(e,t){this.array=e,this.ownerID=t}function We(e,t){function n(e,t,n){return 0===t?r(e,n):i(e,t,n)}function r(e,n){var r=n===a?l&&l.array:e&&e.array,i=n>o?0:o-n,c=s-n;return c>gn&&(c=gn),function(){if(i===c)return Xn;var e=t?--c:i++;return r&&r[e]}}function i(e,r,i){var a,l=e&&e.array,c=i>o?0:o-i>>r,p=(s-i>>r)+1;return p>gn&&(p=gn),function(){for(;;){if(a){var e=a();if(e!==Xn)return e;a=null}if(c===p)return Xn;var o=t?--p:c++;a=n(l&&l[o],r-fn,i+(o<<r))}}}var o=e._origin,s=e._capacity,a=Je(s),l=e._tail;return n(e._root,e._level,0)}function He(e,t,n,r,i,o,s){var a=Object.create($n);return a.size=t-e,a._origin=e,a._capacity=t,a._level=n,a._root=r,a._tail=i,a.__ownerID=o,a.__hash=s,a.__altered=!1,a}function je(){return Yn||(Yn=He(0,0,fn))}function Ve(e,t,n){if(t=g(e,t),t!==t)return e;if(t>=e.size||t<0)return e.withMutations(function(e){t<0?Ye(e,t).set(0,n):Ye(e,0,t+1).set(t,n)});t+=e._origin;var r=e._tail,i=e._root,o=p(bn);return t>=Je(e._capacity)?r=Ge(r,e.__ownerID,0,t,n,o):i=Ge(i,e.__ownerID,e._level,t,n,o),o.value?e.__ownerID?(e._root=i,e._tail=r,e.__hash=void 0,e.__altered=!0,e):He(e._origin,e._capacity,e._level,i,r):e}function Ge(e,t,n,r,i,o){var s=r>>>n&mn,a=e&&s<e.array.length;if(!a&&void 0===i)return e;var l;if(n>0){var c=e&&e.array[s],p=Ge(c,t,n-fn,r,i,o);return p===c?e:(l=Ke(e,t),l.array[s]=p,l)}return a&&e.array[s]===i?e:(u(o),l=Ke(e,t),void 0===i&&s===l.array.length-1?l.array.pop():l.array[s]=i,l)}function Ke(e,t){return t&&e&&t===e.ownerID?e:new Ue(e?e.array.slice():[],t)}function $e(e,t){if(t>=Je(e._capacity))return e._tail;if(t<1<<e._level+fn){for(var n=e._root,r=e._level;n&&r>0;)n=n.array[t>>>r&mn],r-=fn;return n}}function Ye(e,t,n){void 0!==t&&(t=0|t),void 0!==n&&(n=0|n);var r=e.__ownerID||new h,i=e._origin,o=e._capacity,s=i+t,a=void 0===n?o:n<0?o+n:i+n;if(s===i&&a===o)return e;if(s>=a)return e.clear();for(var l=e._level,c=e._root,p=0;s+p<0;)c=new Ue(c&&c.array.length?[void 0,c]:[],r),l+=fn,p+=1<<l;p&&(s+=p,i+=p,a+=p,o+=p);for(var u=Je(o),d=Je(a);d>=1<<l+fn;)c=new Ue(c&&c.array.length?[c]:[],r),l+=fn;var f=e._tail,g=d<u?$e(e,a-1):d>u?new Ue([],r):f;if(f&&d>u&&s<o&&f.array.length){c=Ke(c,r);for(var m=c,v=l;v>fn;v-=fn){var y=u>>>v&mn;m=m.array[y]=Ke(m.array[y],r)}m.array[u>>>fn&mn]=f}if(a<o&&(g=g&&g.removeAfter(r,0,a)),s>=d)s-=d,a-=d,l=fn,c=null,g=g&&g.removeBefore(r,0,s);else if(s>i||d<u){for(p=0;c;){var b=s>>>l&mn;if(b!==d>>>l&mn)break;b&&(p+=(1<<l)*b),l-=fn,c=c.array[b]}c&&s>i&&(c=c.removeBefore(r,l,s-p)),c&&d<u&&(c=c.removeAfter(r,l,d-p)),p&&(s-=p,a-=p)}return e.__ownerID?(e.size=a-s,e._origin=s,e._capacity=a,e._level=l,e._root=c,e._tail=g,e.__hash=void 0,e.__altered=!0,e):He(s,a,l,c,g)}function Xe(e,t,n){for(var i=[],s=0,a=0;a<n.length;a++){var l=n[a],c=r(l);c.size>s&&(s=c.size),o(l)||(c=c.map(function(e){return V(e)})),i.push(c)}return s>e.size&&(e=e.setSize(s)),Ae(e,t,i)}function Je(e){return e<gn?0:e-1>>>fn<<fn}function Qe(e){return null===e||void 0===e?tt():Ze(e)?e:tt().withMutations(function(t){var r=n(e);pe(r.size),r.forEach(function(e,n){return t.set(n,e)})})}function Ze(e){return he(e)&&c(e)}function et(e,t,n,r){var i=Object.create(Qe.prototype);return i.size=e?e.size:0,i._map=e,i._list=t,i.__ownerID=n,i.__hash=r,i}function tt(){return Jn||(Jn=et(we(),je()))}function nt(e,t,n){var r,i,o=e._map,s=e._list,a=o.get(t),l=void 0!==a;if(n===vn){if(!l)return e;s.size>=gn&&s.size>=2*o.size?(i=s.filter(function(e,t){return void 0!==e&&a!==t}),r=i.toKeyedSeq().map(function(e){return e[0]}).flip().toMap(),e.__ownerID&&(r.__ownerID=i.__ownerID=e.__ownerID)):(r=o.remove(t),i=a===s.size-1?s.pop():s.set(a,void 0))}else if(l){if(n===s.get(a)[1])return e;r=o,i=s.set(a,[t,n])}else r=o.set(t,s.size),i=s.set(s.size,[t,n]);return e.__ownerID?(e.size=r.size,e._map=r,e._list=i,e.__hash=void 0,e):et(r,i)}function rt(e,t){this._iter=e,this._useKeys=t,this.size=e.size}function it(e){this._iter=e,this.size=e.size}function ot(e){this._iter=e,this.size=e.size}function st(e){this._iter=e,this.size=e.size}function at(e){var t=_t(e);return t._iter=e,t.size=e.size,t.flip=function(){return e},t.reverse=function(){var t=e.reverse.apply(this);return t.flip=function(){return e.reverse()},t},t.has=function(t){return e.includes(t)},t.includes=function(t){return e.has(t)},t.cacheResult=Mt,t.__iterateUncached=function(t,n){var r=this;return e.__iterate(function(e,n){return t(n,e,r)!==!1},n)},t.__iteratorUncached=function(t,n){if(t===wn){var r=e.__iterator(t,n);return new T(function(){var e=r.next();if(!e.done){var t=e.value[0];e.value[0]=e.value[1],e.value[1]=t}return e})}return e.__iterator(t===Tn?En:Tn,n)},t}function lt(e,t,n){var r=_t(e);return r.size=e.size,r.has=function(t){return e.has(t)},r.get=function(r,i){var o=e.get(r,vn);return o===vn?i:t.call(n,o,r,e)},r.__iterateUncached=function(r,i){var o=this;return e.__iterate(function(e,i,s){return r(t.call(n,e,i,s),i,o)!==!1},i)},r.__iteratorUncached=function(r,i){var o=e.__iterator(wn,i);return new T(function(){var i=o.next();if(i.done)return i;var s=i.value,a=s[0];
return w(r,a,t.call(n,s[1],a,e),i)})},r}function ct(e,t){var n=_t(e);return n._iter=e,n.size=e.size,n.reverse=function(){return e},e.flip&&(n.flip=function(){var t=at(e);return t.reverse=function(){return e.flip()},t}),n.get=function(n,r){return e.get(t?n:-1-n,r)},n.has=function(n){return e.has(t?n:-1-n)},n.includes=function(t){return e.includes(t)},n.cacheResult=Mt,n.__iterate=function(t,n){var r=this;return e.__iterate(function(e,n){return t(e,n,r)},!n)},n.__iterator=function(t,n){return e.__iterator(t,!n)},n}function pt(e,t,n,r){var i=_t(e);return r&&(i.has=function(r){var i=e.get(r,vn);return i!==vn&&!!t.call(n,i,r,e)},i.get=function(r,i){var o=e.get(r,vn);return o!==vn&&t.call(n,o,r,e)?o:i}),i.__iterateUncached=function(i,o){var s=this,a=0;return e.__iterate(function(e,o,l){if(t.call(n,e,o,l))return a++,i(e,r?o:a-1,s)},o),a},i.__iteratorUncached=function(i,o){var s=e.__iterator(wn,o),a=0;return new T(function(){for(;;){var o=s.next();if(o.done)return o;var l=o.value,c=l[0],p=l[1];if(t.call(n,p,c,e))return w(i,r?c:a++,p,o)}})},i}function ut(e,t,n){var r=ue().asMutable();return e.__iterate(function(i,o){r.update(t.call(n,i,o,e),0,function(e){return e+1})}),r.asImmutable()}function ht(e,t,n){var r=s(e),i=(c(e)?Qe():ue()).asMutable();e.__iterate(function(o,s){i.update(t.call(n,o,s,e),function(e){return e=e||[],e.push(r?[s,o]:o),e})});var o=kt(e);return i.map(function(t){return Ct(e,o(t))})}function dt(e,t,n,r){var i=e.size;if(void 0!==t&&(t=0|t),void 0!==n&&(n=0|n),v(t,n,i))return e;var o=y(t,i),s=b(n,i);if(o!==o||s!==s)return dt(e.toSeq().cacheResult(),t,n,r);var a,l=s-o;l===l&&(a=l<0?0:l);var c=_t(e);return c.size=0===a?a:e.size&&a||void 0,!r&&F(e)&&a>=0&&(c.get=function(t,n){return t=g(this,t),t>=0&&t<a?e.get(t+o,n):n}),c.__iterateUncached=function(t,n){var i=this;if(0===a)return 0;if(n)return this.cacheResult().__iterate(t,n);var s=0,l=!0,c=0;return e.__iterate(function(e,n){if(!l||!(l=s++<o))return c++,t(e,r?n:c-1,i)!==!1&&c!==a}),c},c.__iteratorUncached=function(t,n){if(0!==a&&n)return this.cacheResult().__iterator(t,n);var i=0!==a&&e.__iterator(t,n),s=0,l=0;return new T(function(){for(;s++<o;)i.next();if(++l>a)return x();var e=i.next();return r||t===Tn?e:t===En?w(t,l-1,void 0,e):w(t,l-1,e.value[1],e)})},c}function ft(e,t,n){var r=_t(e);return r.__iterateUncached=function(r,i){var o=this;if(i)return this.cacheResult().__iterate(r,i);var s=0;return e.__iterate(function(e,i,a){return t.call(n,e,i,a)&&++s&&r(e,i,o)}),s},r.__iteratorUncached=function(r,i){var o=this;if(i)return this.cacheResult().__iterator(r,i);var s=e.__iterator(wn,i),a=!0;return new T(function(){if(!a)return x();var e=s.next();if(e.done)return e;var i=e.value,l=i[0],c=i[1];return t.call(n,c,l,o)?r===wn?e:w(r,l,c,e):(a=!1,x())})},r}function gt(e,t,n,r){var i=_t(e);return i.__iterateUncached=function(i,o){var s=this;if(o)return this.cacheResult().__iterate(i,o);var a=!0,l=0;return e.__iterate(function(e,o,c){if(!a||!(a=t.call(n,e,o,c)))return l++,i(e,r?o:l-1,s)}),l},i.__iteratorUncached=function(i,o){var s=this;if(o)return this.cacheResult().__iterator(i,o);var a=e.__iterator(wn,o),l=!0,c=0;return new T(function(){var e,o,p;do{if(e=a.next(),e.done)return r||i===Tn?e:i===En?w(i,c++,void 0,e):w(i,c++,e.value[1],e);var u=e.value;o=u[0],p=u[1],l&&(l=t.call(n,p,o,s))}while(l);return i===wn?e:w(i,o,p,e)})},i}function mt(e,t){var r=s(e),i=[e].concat(t).map(function(e){return o(e)?r&&(e=n(e)):e=r?z(e):q(Array.isArray(e)?e:[e]),e}).filter(function(e){return 0!==e.size});if(0===i.length)return e;if(1===i.length){var l=i[0];if(l===e||r&&s(l)||a(e)&&a(l))return l}var c=new A(i);return r?c=c.toKeyedSeq():a(e)||(c=c.toSetSeq()),c=c.flatten(!0),c.size=i.reduce(function(e,t){if(void 0!==e){var n=t.size;if(void 0!==n)return e+n}},0),c}function vt(e,t,n){var r=_t(e);return r.__iterateUncached=function(r,i){function s(e,c){var p=this;e.__iterate(function(e,i){return(!t||c<t)&&o(e)?s(e,c+1):r(e,n?i:a++,p)===!1&&(l=!0),!l},i)}var a=0,l=!1;return s(e,0),a},r.__iteratorUncached=function(r,i){var s=e.__iterator(r,i),a=[],l=0;return new T(function(){for(;s;){var e=s.next();if(e.done===!1){var c=e.value;if(r===wn&&(c=c[1]),t&&!(a.length<t)||!o(c))return n?e:w(r,l++,c,e);a.push(s),s=c.__iterator(r,i)}else s=a.pop()}return x()})},r}function yt(e,t,n){var r=kt(e);return e.toSeq().map(function(i,o){return r(t.call(n,i,o,e))}).flatten(!0)}function bt(e,t){var n=_t(e);return n.size=e.size&&2*e.size-1,n.__iterateUncached=function(n,r){var i=this,o=0;return e.__iterate(function(e,r){return(!o||n(t,o++,i)!==!1)&&n(e,o++,i)!==!1},r),o},n.__iteratorUncached=function(n,r){var i,o=e.__iterator(Tn,r),s=0;return new T(function(){return(!i||s%2)&&(i=o.next(),i.done)?i:s%2?w(n,s++,t):w(n,s++,i.value,i)})},n}function Et(e,t,n){t||(t=Ot);var r=s(e),i=0,o=e.toSeq().map(function(t,r){return[r,t,i++,n?n(t,r,e):t]}).toArray();return o.sort(function(e,n){return t(e[3],n[3])||e[2]-n[2]}).forEach(r?function(e,t){o[t].length=2}:function(e,t){o[t]=e[1]}),r?O(o):a(e)?N(o):I(o)}function Tt(e,t,n){if(t||(t=Ot),n){var r=e.toSeq().map(function(t,r){return[t,n(t,r,e)]}).reduce(function(e,n){return wt(t,e[1],n[1])?n:e});return r&&r[0]}return e.reduce(function(e,n){return wt(t,e,n)?n:e})}function wt(e,t,n){var r=e(n,t);return 0===r&&n!==t&&(void 0===n||null===n||n!==n)||r>0}function xt(e,n,r){var i=_t(e);return i.size=new A(r).map(function(e){return e.size}).min(),i.__iterate=function(e,t){for(var n,r=this.__iterator(Tn,t),i=0;!(n=r.next()).done&&e(n.value,i++,this)!==!1;);return i},i.__iteratorUncached=function(e,i){var o=r.map(function(e){return e=t(e),P(i?e.reverse():e)}),s=0,a=!1;return new T(function(){var t;return a||(t=o.map(function(e){return e.next()}),a=t.some(function(e){return e.done})),a?x():w(e,s++,n.apply(null,t.map(function(e){return e.value})))})},i}function Ct(e,t){return F(e)?t:e.constructor(t)}function St(e){if(e!==Object(e))throw new TypeError("Expected [K, V] tuple: "+e)}function Pt(e){return pe(e.size),f(e)}function kt(e){return s(e)?n:a(e)?r:i}function _t(e){return Object.create((s(e)?O:a(e)?N:I).prototype)}function Mt(){return this._iter.cacheResult?(this._iter.cacheResult(),this.size=this._iter.size,this):M.prototype.cacheResult.call(this)}function Ot(e,t){return e>t?1:e<t?-1:0}function Nt(e){var n=P(e);if(!n){if(!_(e))throw new TypeError("Expected iterable or array-like: "+e);n=P(t(e))}return n}function It(e,t){var n,r=function(o){if(o instanceof r)return o;if(!(this instanceof r))return new r(o);if(!n){n=!0;var s=Object.keys(e);Dt(i,s),i.size=s.length,i._name=t,i._keys=s,i._defaultValues=e}this._map=ue(o)},i=r.prototype=Object.create(Qn);return i.constructor=r,r}function At(e,t,n){var r=Object.create(Object.getPrototypeOf(e));return r._map=t,r.__ownerID=n,r}function Rt(e){return e._name||e.constructor.name||"Record"}function Dt(e,t){try{t.forEach(Lt.bind(void 0,e))}catch(e){}}function Lt(e,t){Object.defineProperty(e,t,{get:function(){return this.get(t)},set:function(e){Q(this.__ownerID,"Cannot set on an immutable record."),this.set(t,e)}})}function Ft(e){return null===e||void 0===e?Ut():Bt(e)&&!c(e)?e:Ut().withMutations(function(t){var n=i(e);pe(n.size),n.forEach(function(e){return t.add(e)})})}function Bt(e){return!(!e||!e[Zn])}function zt(e,t){return e.__ownerID?(e.size=t.size,e._map=t,e):t===e._map?e:0===t.size?e.__empty():e.__make(t)}function qt(e,t){var n=Object.create(er);return n.size=e?e.size:0,n._map=e,n.__ownerID=t,n}function Ut(){return tr||(tr=qt(we()))}function Wt(e){return null===e||void 0===e?Vt():Ht(e)?e:Vt().withMutations(function(t){var n=i(e);pe(n.size),n.forEach(function(e){return t.add(e)})})}function Ht(e){return Bt(e)&&c(e)}function jt(e,t){var n=Object.create(nr);return n.size=e?e.size:0,n._map=e,n.__ownerID=t,n}function Vt(){return rr||(rr=jt(tt()))}function Gt(e){return null===e||void 0===e?Yt():Kt(e)?e:Yt().unshiftAll(e)}function Kt(e){return!(!e||!e[ir])}function $t(e,t,n,r){var i=Object.create(or);return i.size=e,i._head=t,i.__ownerID=n,i.__hash=r,i.__altered=!1,i}function Yt(){return sr||(sr=$t(0))}function Xt(e,t){var n=function(n){e.prototype[n]=t[n]};return Object.keys(t).forEach(n),Object.getOwnPropertySymbols&&Object.getOwnPropertySymbols(t).forEach(n),e}function Jt(e,t){return t}function Qt(e,t){return[t,e]}function Zt(e){return function(){return!e.apply(this,arguments)}}function en(e){return function(){return-e.apply(this,arguments)}}function tn(e){return"string"==typeof e?JSON.stringify(e):e}function nn(){return d(arguments)}function rn(e,t){return e<t?1:e>t?-1:0}function on(e){if(e.size===1/0)return 0;var t=c(e),n=s(e),r=t?1:0,i=e.__iterate(n?t?function(e,t){r=31*r+an(oe(e),oe(t))|0}:function(e,t){r=r+an(oe(e),oe(t))|0}:t?function(e){r=31*r+oe(e)|0}:function(e){r=r+oe(e)|0});return sn(i,r)}function sn(e,t){return t=Nn(t,3432918353),t=Nn(t<<15|t>>>-15,461845907),t=Nn(t<<13|t>>>-13,5),t=(t+3864292196|0)^e,t=Nn(t^t>>>16,2246822507),t=Nn(t^t>>>13,3266489909),t=ie(t^t>>>16)}function an(e,t){return e^t+2654435769+(e<<6)+(e>>2)|0}var ln=Array.prototype.slice;e(n,t),e(r,t),e(i,t),t.isIterable=o,t.isKeyed=s,t.isIndexed=a,t.isAssociative=l,t.isOrdered=c,t.Keyed=n,t.Indexed=r,t.Set=i;var cn="@@__IMMUTABLE_ITERABLE__@@",pn="@@__IMMUTABLE_KEYED__@@",un="@@__IMMUTABLE_INDEXED__@@",hn="@@__IMMUTABLE_ORDERED__@@",dn="delete",fn=5,gn=1<<fn,mn=gn-1,vn={},yn={value:!1},bn={value:!1},En=0,Tn=1,wn=2,xn="function"==typeof Symbol&&Symbol.iterator,Cn="@@iterator",Sn=xn||Cn;T.prototype.toString=function(){return"[Iterator]"},T.KEYS=En,T.VALUES=Tn,T.ENTRIES=wn,T.prototype.inspect=T.prototype.toSource=function(){return this.toString()},T.prototype[Sn]=function(){return this},e(M,t),M.of=function(){return M(arguments)},M.prototype.toSeq=function(){return this},M.prototype.toString=function(){return this.__toString("Seq {","}")},M.prototype.cacheResult=function(){return!this._cache&&this.__iterateUncached&&(this._cache=this.entrySeq().toArray(),this.size=this._cache.length),this},M.prototype.__iterate=function(e,t){return H(this,e,t,!0)},M.prototype.__iterator=function(e,t){return j(this,e,t,!0)},e(O,M),O.prototype.toKeyedSeq=function(){return this},e(N,M),N.of=function(){return N(arguments)},N.prototype.toIndexedSeq=function(){return this},N.prototype.toString=function(){return this.__toString("Seq [","]")},N.prototype.__iterate=function(e,t){return H(this,e,t,!1)},N.prototype.__iterator=function(e,t){return j(this,e,t,!1)},e(I,M),I.of=function(){return I(arguments)},I.prototype.toSetSeq=function(){return this},M.isSeq=F,M.Keyed=O,M.Set=I,M.Indexed=N;var Pn="@@__IMMUTABLE_SEQ__@@";M.prototype[Pn]=!0,e(A,N),A.prototype.get=function(e,t){return this.has(e)?this._array[g(this,e)]:t},A.prototype.__iterate=function(e,t){for(var n=this._array,r=n.length-1,i=0;i<=r;i++)if(e(n[t?r-i:i],i,this)===!1)return i+1;return i},A.prototype.__iterator=function(e,t){var n=this._array,r=n.length-1,i=0;return new T(function(){return i>r?x():w(e,i,n[t?r-i++:i++])})},e(R,O),R.prototype.get=function(e,t){return void 0===t||this.has(e)?this._object[e]:t},R.prototype.has=function(e){return this._object.hasOwnProperty(e)},R.prototype.__iterate=function(e,t){for(var n=this._object,r=this._keys,i=r.length-1,o=0;o<=i;o++){var s=r[t?i-o:o];if(e(n[s],s,this)===!1)return o+1}return o},R.prototype.__iterator=function(e,t){var n=this._object,r=this._keys,i=r.length-1,o=0;return new T(function(){var s=r[t?i-o:o];return o++>i?x():w(e,s,n[s])})},R.prototype[hn]=!0,e(D,N),D.prototype.__iterateUncached=function(e,t){if(t)return this.cacheResult().__iterate(e,t);var n=this._iterable,r=P(n),i=0;if(S(r))for(var o;!(o=r.next()).done&&e(o.value,i++,this)!==!1;);return i},D.prototype.__iteratorUncached=function(e,t){if(t)return this.cacheResult().__iterator(e,t);var n=this._iterable,r=P(n);if(!S(r))return new T(x);var i=0;return new T(function(){var t=r.next();return t.done?t:w(e,i++,t.value)})},e(L,N),L.prototype.__iterateUncached=function(e,t){if(t)return this.cacheResult().__iterate(e,t);for(var n=this._iterator,r=this._iteratorCache,i=0;i<r.length;)if(e(r[i],i++,this)===!1)return i;for(var o;!(o=n.next()).done;){var s=o.value;if(r[i]=s,e(s,i++,this)===!1)break}return i},L.prototype.__iteratorUncached=function(e,t){if(t)return this.cacheResult().__iterator(e,t);var n=this._iterator,r=this._iteratorCache,i=0;return new T(function(){if(i>=r.length){var t=n.next();if(t.done)return t;r[i]=t.value}return w(e,i,r[i++])})};var kn;e(J,N),J.prototype.toString=function(){return 0===this.size?"Repeat []":"Repeat [ "+this._value+" "+this.size+" times ]"},J.prototype.get=function(e,t){return this.has(e)?this._value:t},J.prototype.includes=function(e){return Y(this._value,e)},J.prototype.slice=function(e,t){var n=this.size;return v(e,t,n)?this:new J(this._value,b(t,n)-y(e,n))},J.prototype.reverse=function(){return this},J.prototype.indexOf=function(e){return Y(this._value,e)?0:-1},J.prototype.lastIndexOf=function(e){return Y(this._value,e)?this.size:-1},J.prototype.__iterate=function(e,t){for(var n=0;n<this.size;n++)if(e(this._value,n,this)===!1)return n+1;return n},J.prototype.__iterator=function(e,t){var n=this,r=0;return new T(function(){return r<n.size?w(e,r++,n._value):x()})},J.prototype.equals=function(e){return e instanceof J?Y(this._value,e._value):X(e)};var _n;e(Z,N),Z.prototype.toString=function(){return 0===this.size?"Range []":"Range [ "+this._start+"..."+this._end+(this._step>1?" by "+this._step:"")+" ]"},Z.prototype.get=function(e,t){return this.has(e)?this._start+g(this,e)*this._step:t},Z.prototype.includes=function(e){var t=(e-this._start)/this._step;return t>=0&&t<this.size&&t===Math.floor(t)},Z.prototype.slice=function(e,t){return v(e,t,this.size)?this:(e=y(e,this.size),t=b(t,this.size),t<=e?new Z(0,0):new Z(this.get(e,this._end),this.get(t,this._end),this._step))},Z.prototype.indexOf=function(e){var t=e-this._start;if(t%this._step===0){var n=t/this._step;if(n>=0&&n<this.size)return n}return-1},Z.prototype.lastIndexOf=function(e){return this.indexOf(e)},Z.prototype.__iterate=function(e,t){for(var n=this.size-1,r=this._step,i=t?this._start+n*r:this._start,o=0;o<=n;o++){if(e(i,o,this)===!1)return o+1;i+=t?-r:r}return o},Z.prototype.__iterator=function(e,t){var n=this.size-1,r=this._step,i=t?this._start+n*r:this._start,o=0;return new T(function(){var s=i;return i+=t?-r:r,o>n?x():w(e,o++,s)})},Z.prototype.equals=function(e){return e instanceof Z?this._start===e._start&&this._end===e._end&&this._step===e._step:X(this,e)};var Mn;e(ee,t),e(te,ee),e(ne,ee),e(re,ee),ee.Keyed=te,ee.Indexed=ne,ee.Set=re;var On,Nn="function"==typeof Math.imul&&Math.imul(4294967295,2)===-2?Math.imul:function(e,t){e=0|e,t=0|t;var n=65535&e,r=65535&t;return n*r+((e>>>16)*r+n*(t>>>16)<<16>>>0)|0},In=Object.isExtensible,An=function(){try{return Object.defineProperty({},"@",{}),!0}catch(e){return!1}}(),Rn="function"==typeof WeakMap;Rn&&(On=new WeakMap);var Dn=0,Ln="__immutablehash__";"function"==typeof Symbol&&(Ln=Symbol(Ln));var Fn=16,Bn=255,zn=0,qn={};e(ue,te),ue.prototype.toString=function(){return this.__toString("Map {","}")},ue.prototype.get=function(e,t){return this._root?this._root.get(0,void 0,e,t):t},ue.prototype.set=function(e,t){return xe(this,e,t)},ue.prototype.setIn=function(e,t){return this.updateIn(e,vn,function(){return t})},ue.prototype.remove=function(e){return xe(this,e,vn)},ue.prototype.deleteIn=function(e){return this.updateIn(e,function(){return vn})},ue.prototype.update=function(e,t,n){return 1===arguments.length?e(this):this.updateIn([e],t,n)},ue.prototype.updateIn=function(e,t,n){n||(n=t,t=void 0);var r=Re(this,Nt(e),t,n);return r===vn?void 0:r},ue.prototype.clear=function(){return 0===this.size?this:this.__ownerID?(this.size=0,this._root=null,this.__hash=void 0,this.__altered=!0,this):we()},ue.prototype.merge=function(){return Oe(this,void 0,arguments)},ue.prototype.mergeWith=function(e){var t=ln.call(arguments,1);return Oe(this,e,t)},ue.prototype.mergeIn=function(e){var t=ln.call(arguments,1);return this.updateIn(e,we(),function(e){return"function"==typeof e.merge?e.merge.apply(e,t):t[t.length-1]})},ue.prototype.mergeDeep=function(){return Oe(this,Ne,arguments)},ue.prototype.mergeDeepWith=function(e){var t=ln.call(arguments,1);return Oe(this,Ie(e),t)},ue.prototype.mergeDeepIn=function(e){var t=ln.call(arguments,1);return this.updateIn(e,we(),function(e){return"function"==typeof e.mergeDeep?e.mergeDeep.apply(e,t):t[t.length-1]})},ue.prototype.sort=function(e){return Qe(Et(this,e))},ue.prototype.sortBy=function(e,t){return Qe(Et(this,t,e))},ue.prototype.withMutations=function(e){var t=this.asMutable();return e(t),t.wasAltered()?t.__ensureOwner(this.__ownerID):this},ue.prototype.asMutable=function(){return this.__ownerID?this:this.__ensureOwner(new h)},ue.prototype.asImmutable=function(){return this.__ensureOwner()},ue.prototype.wasAltered=function(){return this.__altered},ue.prototype.__iterator=function(e,t){return new ye(this,e,t)},ue.prototype.__iterate=function(e,t){var n=this,r=0;return this._root&&this._root.iterate(function(t){return r++,e(t[1],t[0],n)},t),r},ue.prototype.__ensureOwner=function(e){return e===this.__ownerID?this:e?Te(this.size,this._root,e,this.__hash):(this.__ownerID=e,this.__altered=!1,this)},ue.isMap=he;var Un="@@__IMMUTABLE_MAP__@@",Wn=ue.prototype;Wn[Un]=!0,Wn[dn]=Wn.remove,Wn.removeIn=Wn.deleteIn,de.prototype.get=function(e,t,n,r){for(var i=this.entries,o=0,s=i.length;o<s;o++)if(Y(n,i[o][0]))return i[o][1];return r},de.prototype.update=function(e,t,n,r,i,o,s){for(var a=i===vn,l=this.entries,c=0,p=l.length;c<p&&!Y(r,l[c][0]);c++);var h=c<p;if(h?l[c][1]===i:a)return this;if(u(s),(a||!h)&&u(o),!a||1!==l.length){if(!h&&!a&&l.length>=jn)return ke(e,l,r,i);var f=e&&e===this.ownerID,g=f?l:d(l);return h?a?c===p-1?g.pop():g[c]=g.pop():g[c]=[r,i]:g.push([r,i]),f?(this.entries=g,this):new de(e,g)}},fe.prototype.get=function(e,t,n,r){void 0===t&&(t=oe(n));var i=1<<((0===e?t:t>>>e)&mn),o=this.bitmap;return 0===(o&i)?r:this.nodes[De(o&i-1)].get(e+fn,t,n,r)},fe.prototype.update=function(e,t,n,r,i,o,s){void 0===n&&(n=oe(r));var a=(0===t?n:n>>>t)&mn,l=1<<a,c=this.bitmap,p=0!==(c&l);if(!p&&i===vn)return this;var u=De(c&l-1),h=this.nodes,d=p?h[u]:void 0,f=Ce(d,e,t+fn,n,r,i,o,s);if(f===d)return this;if(!p&&f&&h.length>=Vn)return Me(e,h,c,a,f);if(p&&!f&&2===h.length&&Se(h[1^u]))return h[1^u];if(p&&f&&1===h.length&&Se(f))return f;var g=e&&e===this.ownerID,m=p?f?c:c^l:c|l,v=p?f?Le(h,u,f,g):Be(h,u,g):Fe(h,u,f,g);return g?(this.bitmap=m,this.nodes=v,this):new fe(e,m,v)},ge.prototype.get=function(e,t,n,r){void 0===t&&(t=oe(n));var i=(0===e?t:t>>>e)&mn,o=this.nodes[i];return o?o.get(e+fn,t,n,r):r},ge.prototype.update=function(e,t,n,r,i,o,s){void 0===n&&(n=oe(r));var a=(0===t?n:n>>>t)&mn,l=i===vn,c=this.nodes,p=c[a];if(l&&!p)return this;var u=Ce(p,e,t+fn,n,r,i,o,s);if(u===p)return this;var h=this.count;if(p){if(!u&&(h--,h<Gn))return _e(e,c,h,a)}else h++;var d=e&&e===this.ownerID,f=Le(c,a,u,d);return d?(this.count=h,this.nodes=f,this):new ge(e,h,f)},me.prototype.get=function(e,t,n,r){for(var i=this.entries,o=0,s=i.length;o<s;o++)if(Y(n,i[o][0]))return i[o][1];return r},me.prototype.update=function(e,t,n,r,i,o,s){void 0===n&&(n=oe(r));var a=i===vn;if(n!==this.keyHash)return a?this:(u(s),u(o),Pe(this,e,t,n,[r,i]));for(var l=this.entries,c=0,p=l.length;c<p&&!Y(r,l[c][0]);c++);var h=c<p;if(h?l[c][1]===i:a)return this;if(u(s),(a||!h)&&u(o),a&&2===p)return new ve(e,this.keyHash,l[1^c]);var f=e&&e===this.ownerID,g=f?l:d(l);return h?a?c===p-1?g.pop():g[c]=g.pop():g[c]=[r,i]:g.push([r,i]),f?(this.entries=g,this):new me(e,this.keyHash,g)},ve.prototype.get=function(e,t,n,r){return Y(n,this.entry[0])?this.entry[1]:r},ve.prototype.update=function(e,t,n,r,i,o,s){var a=i===vn,l=Y(r,this.entry[0]);return(l?i===this.entry[1]:a)?this:(u(s),a?void u(o):l?e&&e===this.ownerID?(this.entry[1]=i,this):new ve(e,this.keyHash,[r,i]):(u(o),Pe(this,e,t,oe(r),[r,i])))},de.prototype.iterate=me.prototype.iterate=function(e,t){for(var n=this.entries,r=0,i=n.length-1;r<=i;r++)if(e(n[t?i-r:r])===!1)return!1},fe.prototype.iterate=ge.prototype.iterate=function(e,t){for(var n=this.nodes,r=0,i=n.length-1;r<=i;r++){var o=n[t?i-r:r];if(o&&o.iterate(e,t)===!1)return!1}},ve.prototype.iterate=function(e,t){return e(this.entry)},e(ye,T),ye.prototype.next=function(){for(var e=this._type,t=this._stack;t;){var n,r=t.node,i=t.index++;if(r.entry){if(0===i)return be(e,r.entry)}else if(r.entries){if(n=r.entries.length-1,i<=n)return be(e,r.entries[this._reverse?n-i:i])}else if(n=r.nodes.length-1,i<=n){var o=r.nodes[this._reverse?n-i:i];if(o){if(o.entry)return be(e,o.entry);t=this._stack=Ee(o,t)}continue}t=this._stack=this._stack.__prev}return x()};var Hn,jn=gn/4,Vn=gn/2,Gn=gn/4;e(ze,ne),ze.of=function(){return this(arguments)},ze.prototype.toString=function(){return this.__toString("List [","]")},ze.prototype.get=function(e,t){if(e=g(this,e),e>=0&&e<this.size){e+=this._origin;var n=$e(this,e);return n&&n.array[e&mn]}return t},ze.prototype.set=function(e,t){return Ve(this,e,t)},ze.prototype.remove=function(e){return this.has(e)?0===e?this.shift():e===this.size-1?this.pop():this.splice(e,1):this},ze.prototype.insert=function(e,t){return this.splice(e,0,t)},ze.prototype.clear=function(){return 0===this.size?this:this.__ownerID?(this.size=this._origin=this._capacity=0,this._level=fn,this._root=this._tail=null,this.__hash=void 0,this.__altered=!0,this):je()},ze.prototype.push=function(){var e=arguments,t=this.size;return this.withMutations(function(n){Ye(n,0,t+e.length);for(var r=0;r<e.length;r++)n.set(t+r,e[r])})},ze.prototype.pop=function(){return Ye(this,0,-1)},ze.prototype.unshift=function(){var e=arguments;return this.withMutations(function(t){Ye(t,-e.length);for(var n=0;n<e.length;n++)t.set(n,e[n])})},ze.prototype.shift=function(){return Ye(this,1)},ze.prototype.merge=function(){return Xe(this,void 0,arguments)},ze.prototype.mergeWith=function(e){var t=ln.call(arguments,1);return Xe(this,e,t)},ze.prototype.mergeDeep=function(){return Xe(this,Ne,arguments)},ze.prototype.mergeDeepWith=function(e){var t=ln.call(arguments,1);return Xe(this,Ie(e),t)},ze.prototype.setSize=function(e){return Ye(this,0,e)},ze.prototype.slice=function(e,t){var n=this.size;return v(e,t,n)?this:Ye(this,y(e,n),b(t,n))},ze.prototype.__iterator=function(e,t){var n=0,r=We(this,t);return new T(function(){var t=r();return t===Xn?x():w(e,n++,t)})},ze.prototype.__iterate=function(e,t){for(var n,r=0,i=We(this,t);(n=i())!==Xn&&e(n,r++,this)!==!1;);return r},ze.prototype.__ensureOwner=function(e){return e===this.__ownerID?this:e?He(this._origin,this._capacity,this._level,this._root,this._tail,e,this.__hash):(this.__ownerID=e,this)},ze.isList=qe;var Kn="@@__IMMUTABLE_LIST__@@",$n=ze.prototype;$n[Kn]=!0,$n[dn]=$n.remove,$n.setIn=Wn.setIn,$n.deleteIn=$n.removeIn=Wn.removeIn,$n.update=Wn.update,$n.updateIn=Wn.updateIn,$n.mergeIn=Wn.mergeIn,$n.mergeDeepIn=Wn.mergeDeepIn,$n.withMutations=Wn.withMutations,$n.asMutable=Wn.asMutable,$n.asImmutable=Wn.asImmutable,$n.wasAltered=Wn.wasAltered,Ue.prototype.removeBefore=function(e,t,n){if(n===t?1<<t:0===this.array.length)return this;var r=n>>>t&mn;if(r>=this.array.length)return new Ue([],e);var i,o=0===r;if(t>0){var s=this.array[r];if(i=s&&s.removeBefore(e,t-fn,n),i===s&&o)return this}if(o&&!i)return this;var a=Ke(this,e);if(!o)for(var l=0;l<r;l++)a.array[l]=void 0;return i&&(a.array[r]=i),a},Ue.prototype.removeAfter=function(e,t,n){if(n===(t?1<<t:0)||0===this.array.length)return this;var r=n-1>>>t&mn;if(r>=this.array.length)return this;var i;if(t>0){var o=this.array[r];if(i=o&&o.removeAfter(e,t-fn,n),i===o&&r===this.array.length-1)return this}var s=Ke(this,e);return s.array.splice(r+1),i&&(s.array[r]=i),s};var Yn,Xn={};e(Qe,ue),Qe.of=function(){return this(arguments)},Qe.prototype.toString=function(){return this.__toString("OrderedMap {","}")},Qe.prototype.get=function(e,t){var n=this._map.get(e);return void 0!==n?this._list.get(n)[1]:t},Qe.prototype.clear=function(){return 0===this.size?this:this.__ownerID?(this.size=0,this._map.clear(),this._list.clear(),this):tt()},Qe.prototype.set=function(e,t){return nt(this,e,t)},Qe.prototype.remove=function(e){return nt(this,e,vn)},Qe.prototype.wasAltered=function(){return this._map.wasAltered()||this._list.wasAltered()},Qe.prototype.__iterate=function(e,t){var n=this;return this._list.__iterate(function(t){return t&&e(t[1],t[0],n)},t)},Qe.prototype.__iterator=function(e,t){return this._list.fromEntrySeq().__iterator(e,t)},Qe.prototype.__ensureOwner=function(e){if(e===this.__ownerID)return this;var t=this._map.__ensureOwner(e),n=this._list.__ensureOwner(e);return e?et(t,n,e,this.__hash):(this.__ownerID=e,this._map=t,this._list=n,this)},Qe.isOrderedMap=Ze,Qe.prototype[hn]=!0,Qe.prototype[dn]=Qe.prototype.remove;var Jn;e(rt,O),rt.prototype.get=function(e,t){return this._iter.get(e,t)},rt.prototype.has=function(e){return this._iter.has(e)},rt.prototype.valueSeq=function(){return this._iter.valueSeq()},rt.prototype.reverse=function(){var e=this,t=ct(this,!0);return this._useKeys||(t.valueSeq=function(){return e._iter.toSeq().reverse()}),t},rt.prototype.map=function(e,t){var n=this,r=lt(this,e,t);return this._useKeys||(r.valueSeq=function(){return n._iter.toSeq().map(e,t)}),r},rt.prototype.__iterate=function(e,t){var n,r=this;return this._iter.__iterate(this._useKeys?function(t,n){return e(t,n,r)}:(n=t?Pt(this):0,function(i){return e(i,t?--n:n++,r)}),t)},rt.prototype.__iterator=function(e,t){if(this._useKeys)return this._iter.__iterator(e,t);var n=this._iter.__iterator(Tn,t),r=t?Pt(this):0;return new T(function(){var i=n.next();return i.done?i:w(e,t?--r:r++,i.value,i)})},rt.prototype[hn]=!0,e(it,N),it.prototype.includes=function(e){return this._iter.includes(e)},it.prototype.__iterate=function(e,t){var n=this,r=0;return this._iter.__iterate(function(t){return e(t,r++,n)},t)},it.prototype.__iterator=function(e,t){var n=this._iter.__iterator(Tn,t),r=0;return new T(function(){var t=n.next();return t.done?t:w(e,r++,t.value,t)})},e(ot,I),ot.prototype.has=function(e){return this._iter.includes(e)},ot.prototype.__iterate=function(e,t){var n=this;return this._iter.__iterate(function(t){return e(t,t,n)},t)},ot.prototype.__iterator=function(e,t){var n=this._iter.__iterator(Tn,t);return new T(function(){var t=n.next();return t.done?t:w(e,t.value,t.value,t)})},e(st,O),st.prototype.entrySeq=function(){return this._iter.toSeq()},st.prototype.__iterate=function(e,t){var n=this;return this._iter.__iterate(function(t){if(t){St(t);var r=o(t);return e(r?t.get(1):t[1],r?t.get(0):t[0],n)}},t)},st.prototype.__iterator=function(e,t){var n=this._iter.__iterator(Tn,t);return new T(function(){for(;;){var t=n.next();if(t.done)return t;var r=t.value;if(r){St(r);var i=o(r);return w(e,i?r.get(0):r[0],i?r.get(1):r[1],t)}}})},it.prototype.cacheResult=rt.prototype.cacheResult=ot.prototype.cacheResult=st.prototype.cacheResult=Mt,e(It,te),It.prototype.toString=function(){return this.__toString(Rt(this)+" {","}")},It.prototype.has=function(e){return this._defaultValues.hasOwnProperty(e)},It.prototype.get=function(e,t){if(!this.has(e))return t;var n=this._defaultValues[e];return this._map?this._map.get(e,n):n},It.prototype.clear=function(){if(this.__ownerID)return this._map&&this._map.clear(),this;var e=this.constructor;return e._empty||(e._empty=At(this,we()))},It.prototype.set=function(e,t){if(!this.has(e))throw new Error('Cannot set unknown key "'+e+'" on '+Rt(this));var n=this._map&&this._map.set(e,t);return this.__ownerID||n===this._map?this:At(this,n)},It.prototype.remove=function(e){if(!this.has(e))return this;var t=this._map&&this._map.remove(e);return this.__ownerID||t===this._map?this:At(this,t)},It.prototype.wasAltered=function(){return this._map.wasAltered()},It.prototype.__iterator=function(e,t){var r=this;return n(this._defaultValues).map(function(e,t){return r.get(t)}).__iterator(e,t)},It.prototype.__iterate=function(e,t){var r=this;return n(this._defaultValues).map(function(e,t){return r.get(t)}).__iterate(e,t)},It.prototype.__ensureOwner=function(e){if(e===this.__ownerID)return this;var t=this._map&&this._map.__ensureOwner(e);return e?At(this,t,e):(this.__ownerID=e,this._map=t,this)};var Qn=It.prototype;Qn[dn]=Qn.remove,Qn.deleteIn=Qn.removeIn=Wn.removeIn,Qn.merge=Wn.merge,Qn.mergeWith=Wn.mergeWith,Qn.mergeIn=Wn.mergeIn,Qn.mergeDeep=Wn.mergeDeep,Qn.mergeDeepWith=Wn.mergeDeepWith,Qn.mergeDeepIn=Wn.mergeDeepIn,Qn.setIn=Wn.setIn,Qn.update=Wn.update,Qn.updateIn=Wn.updateIn,Qn.withMutations=Wn.withMutations,Qn.asMutable=Wn.asMutable,Qn.asImmutable=Wn.asImmutable,e(Ft,re),Ft.of=function(){return this(arguments)},Ft.fromKeys=function(e){return this(n(e).keySeq())},Ft.prototype.toString=function(){return this.__toString("Set {","}")},Ft.prototype.has=function(e){return this._map.has(e)},Ft.prototype.add=function(e){return zt(this,this._map.set(e,!0))},Ft.prototype.remove=function(e){return zt(this,this._map.remove(e))},Ft.prototype.clear=function(){return zt(this,this._map.clear())},Ft.prototype.union=function(){var e=ln.call(arguments,0);return e=e.filter(function(e){return 0!==e.size}),0===e.length?this:0!==this.size||this.__ownerID||1!==e.length?this.withMutations(function(t){for(var n=0;n<e.length;n++)i(e[n]).forEach(function(e){return t.add(e)})}):this.constructor(e[0])},Ft.prototype.intersect=function(){var e=ln.call(arguments,0);if(0===e.length)return this;e=e.map(function(e){return i(e)});var t=this;return this.withMutations(function(n){t.forEach(function(t){e.every(function(e){return e.includes(t)})||n.remove(t)})})},Ft.prototype.subtract=function(){var e=ln.call(arguments,0);if(0===e.length)return this;e=e.map(function(e){return i(e)});var t=this;return this.withMutations(function(n){t.forEach(function(t){e.some(function(e){return e.includes(t)})&&n.remove(t)})})},Ft.prototype.merge=function(){return this.union.apply(this,arguments)},Ft.prototype.mergeWith=function(e){var t=ln.call(arguments,1);return this.union.apply(this,t)},Ft.prototype.sort=function(e){return Wt(Et(this,e))},Ft.prototype.sortBy=function(e,t){return Wt(Et(this,t,e))},Ft.prototype.wasAltered=function(){return this._map.wasAltered()},Ft.prototype.__iterate=function(e,t){var n=this;return this._map.__iterate(function(t,r){return e(r,r,n)},t)},Ft.prototype.__iterator=function(e,t){return this._map.map(function(e,t){return t}).__iterator(e,t)},Ft.prototype.__ensureOwner=function(e){if(e===this.__ownerID)return this;var t=this._map.__ensureOwner(e);return e?this.__make(t,e):(this.__ownerID=e,this._map=t,this)},Ft.isSet=Bt;var Zn="@@__IMMUTABLE_SET__@@",er=Ft.prototype;er[Zn]=!0,er[dn]=er.remove,er.mergeDeep=er.merge,er.mergeDeepWith=er.mergeWith,er.withMutations=Wn.withMutations,er.asMutable=Wn.asMutable,er.asImmutable=Wn.asImmutable,er.__empty=Ut,er.__make=qt;var tr;e(Wt,Ft),Wt.of=function(){return this(arguments)},Wt.fromKeys=function(e){return this(n(e).keySeq())},Wt.prototype.toString=function(){return this.__toString("OrderedSet {","}")},Wt.isOrderedSet=Ht;var nr=Wt.prototype;nr[hn]=!0,nr.__empty=Vt,nr.__make=jt;var rr;e(Gt,ne),Gt.of=function(){return this(arguments)},Gt.prototype.toString=function(){return this.__toString("Stack [","]")},Gt.prototype.get=function(e,t){var n=this._head;for(e=g(this,e);n&&e--;)n=n.next;return n?n.value:t},Gt.prototype.peek=function(){return this._head&&this._head.value},Gt.prototype.push=function(){if(0===arguments.length)return this;for(var e=this.size+arguments.length,t=this._head,n=arguments.length-1;n>=0;n--)t={value:arguments[n],next:t};return this.__ownerID?(this.size=e,this._head=t,this.__hash=void 0,this.__altered=!0,this):$t(e,t)},Gt.prototype.pushAll=function(e){if(e=r(e),0===e.size)return this;pe(e.size);var t=this.size,n=this._head;return e.reverse().forEach(function(e){t++,n={value:e,next:n}}),this.__ownerID?(this.size=t,this._head=n,this.__hash=void 0,this.__altered=!0,this):$t(t,n)},Gt.prototype.pop=function(){return this.slice(1)},Gt.prototype.unshift=function(){return this.push.apply(this,arguments)},Gt.prototype.unshiftAll=function(e){return this.pushAll(e)},Gt.prototype.shift=function(){return this.pop.apply(this,arguments);
},Gt.prototype.clear=function(){return 0===this.size?this:this.__ownerID?(this.size=0,this._head=void 0,this.__hash=void 0,this.__altered=!0,this):Yt()},Gt.prototype.slice=function(e,t){if(v(e,t,this.size))return this;var n=y(e,this.size),r=b(t,this.size);if(r!==this.size)return ne.prototype.slice.call(this,e,t);for(var i=this.size-n,o=this._head;n--;)o=o.next;return this.__ownerID?(this.size=i,this._head=o,this.__hash=void 0,this.__altered=!0,this):$t(i,o)},Gt.prototype.__ensureOwner=function(e){return e===this.__ownerID?this:e?$t(this.size,this._head,e,this.__hash):(this.__ownerID=e,this.__altered=!1,this)},Gt.prototype.__iterate=function(e,t){if(t)return this.reverse().__iterate(e);for(var n=0,r=this._head;r&&e(r.value,n++,this)!==!1;)r=r.next;return n},Gt.prototype.__iterator=function(e,t){if(t)return this.reverse().__iterator(e);var n=0,r=this._head;return new T(function(){if(r){var t=r.value;return r=r.next,w(e,n++,t)}return x()})},Gt.isStack=Kt;var ir="@@__IMMUTABLE_STACK__@@",or=Gt.prototype;or[ir]=!0,or.withMutations=Wn.withMutations,or.asMutable=Wn.asMutable,or.asImmutable=Wn.asImmutable,or.wasAltered=Wn.wasAltered;var sr;t.Iterator=T,Xt(t,{toArray:function(){pe(this.size);var e=new Array(this.size||0);return this.valueSeq().__iterate(function(t,n){e[n]=t}),e},toIndexedSeq:function(){return new it(this)},toJS:function(){return this.toSeq().map(function(e){return e&&"function"==typeof e.toJS?e.toJS():e}).__toJS()},toJSON:function(){return this.toSeq().map(function(e){return e&&"function"==typeof e.toJSON?e.toJSON():e}).__toJS()},toKeyedSeq:function(){return new rt(this,(!0))},toMap:function(){return ue(this.toKeyedSeq())},toObject:function(){pe(this.size);var e={};return this.__iterate(function(t,n){e[n]=t}),e},toOrderedMap:function(){return Qe(this.toKeyedSeq())},toOrderedSet:function(){return Wt(s(this)?this.valueSeq():this)},toSet:function(){return Ft(s(this)?this.valueSeq():this)},toSetSeq:function(){return new ot(this)},toSeq:function(){return a(this)?this.toIndexedSeq():s(this)?this.toKeyedSeq():this.toSetSeq()},toStack:function(){return Gt(s(this)?this.valueSeq():this)},toList:function(){return ze(s(this)?this.valueSeq():this)},toString:function(){return"[Iterable]"},__toString:function(e,t){return 0===this.size?e+t:e+" "+this.toSeq().map(this.__toStringMapper).join(", ")+" "+t},concat:function(){var e=ln.call(arguments,0);return Ct(this,mt(this,e))},includes:function(e){return this.some(function(t){return Y(t,e)})},entries:function(){return this.__iterator(wn)},every:function(e,t){pe(this.size);var n=!0;return this.__iterate(function(r,i,o){if(!e.call(t,r,i,o))return n=!1,!1}),n},filter:function(e,t){return Ct(this,pt(this,e,t,!0))},find:function(e,t,n){var r=this.findEntry(e,t);return r?r[1]:n},findEntry:function(e,t){var n;return this.__iterate(function(r,i,o){if(e.call(t,r,i,o))return n=[i,r],!1}),n},findLastEntry:function(e,t){return this.toSeq().reverse().findEntry(e,t)},forEach:function(e,t){return pe(this.size),this.__iterate(t?e.bind(t):e)},join:function(e){pe(this.size),e=void 0!==e?""+e:",";var t="",n=!0;return this.__iterate(function(r){n?n=!1:t+=e,t+=null!==r&&void 0!==r?r.toString():""}),t},keys:function(){return this.__iterator(En)},map:function(e,t){return Ct(this,lt(this,e,t))},reduce:function(e,t,n){pe(this.size);var r,i;return arguments.length<2?i=!0:r=t,this.__iterate(function(t,o,s){i?(i=!1,r=t):r=e.call(n,r,t,o,s)}),r},reduceRight:function(e,t,n){var r=this.toKeyedSeq().reverse();return r.reduce.apply(r,arguments)},reverse:function(){return Ct(this,ct(this,!0))},slice:function(e,t){return Ct(this,dt(this,e,t,!0))},some:function(e,t){return!this.every(Zt(e),t)},sort:function(e){return Ct(this,Et(this,e))},values:function(){return this.__iterator(Tn)},butLast:function(){return this.slice(0,-1)},isEmpty:function(){return void 0!==this.size?0===this.size:!this.some(function(){return!0})},count:function(e,t){return f(e?this.toSeq().filter(e,t):this)},countBy:function(e,t){return ut(this,e,t)},equals:function(e){return X(this,e)},entrySeq:function(){var e=this;if(e._cache)return new A(e._cache);var t=e.toSeq().map(Qt).toIndexedSeq();return t.fromEntrySeq=function(){return e.toSeq()},t},filterNot:function(e,t){return this.filter(Zt(e),t)},findLast:function(e,t,n){return this.toKeyedSeq().reverse().find(e,t,n)},first:function(){return this.find(m)},flatMap:function(e,t){return Ct(this,yt(this,e,t))},flatten:function(e){return Ct(this,vt(this,e,!0))},fromEntrySeq:function(){return new st(this)},get:function(e,t){return this.find(function(t,n){return Y(n,e)},void 0,t)},getIn:function(e,t){for(var n,r=this,i=Nt(e);!(n=i.next()).done;){var o=n.value;if(r=r&&r.get?r.get(o,vn):vn,r===vn)return t}return r},groupBy:function(e,t){return ht(this,e,t)},has:function(e){return this.get(e,vn)!==vn},hasIn:function(e){return this.getIn(e,vn)!==vn},isSubset:function(e){return e="function"==typeof e.includes?e:t(e),this.every(function(t){return e.includes(t)})},isSuperset:function(e){return e="function"==typeof e.isSubset?e:t(e),e.isSubset(this)},keySeq:function(){return this.toSeq().map(Jt).toIndexedSeq()},last:function(){return this.toSeq().reverse().first()},max:function(e){return Tt(this,e)},maxBy:function(e,t){return Tt(this,t,e)},min:function(e){return Tt(this,e?en(e):rn)},minBy:function(e,t){return Tt(this,t?en(t):rn,e)},rest:function(){return this.slice(1)},skip:function(e){return this.slice(Math.max(0,e))},skipLast:function(e){return Ct(this,this.toSeq().reverse().skip(e).reverse())},skipWhile:function(e,t){return Ct(this,gt(this,e,t,!0))},skipUntil:function(e,t){return this.skipWhile(Zt(e),t)},sortBy:function(e,t){return Ct(this,Et(this,t,e))},take:function(e){return this.slice(0,Math.max(0,e))},takeLast:function(e){return Ct(this,this.toSeq().reverse().take(e).reverse())},takeWhile:function(e,t){return Ct(this,ft(this,e,t))},takeUntil:function(e,t){return this.takeWhile(Zt(e),t)},valueSeq:function(){return this.toIndexedSeq()},hashCode:function(){return this.__hash||(this.__hash=on(this))}});var ar=t.prototype;ar[cn]=!0,ar[Sn]=ar.values,ar.__toJS=ar.toArray,ar.__toStringMapper=tn,ar.inspect=ar.toSource=function(){return this.toString()},ar.chain=ar.flatMap,ar.contains=ar.includes,function(){try{Object.defineProperty(ar,"length",{get:function(){if(!t.noLengthWarning){var e;try{throw new Error}catch(t){e=t.stack}if(e.indexOf("_wrapObject")===-1)return console&&console.warn&&console.warn("iterable.length has been deprecated, use iterable.size or iterable.count(). This warning will become a silent error in a future version. "+e),this.size}}})}catch(e){}}(),Xt(n,{flip:function(){return Ct(this,at(this))},findKey:function(e,t){var n=this.findEntry(e,t);return n&&n[0]},findLastKey:function(e,t){return this.toSeq().reverse().findKey(e,t)},keyOf:function(e){return this.findKey(function(t){return Y(t,e)})},lastKeyOf:function(e){return this.findLastKey(function(t){return Y(t,e)})},mapEntries:function(e,t){var n=this,r=0;return Ct(this,this.toSeq().map(function(i,o){return e.call(t,[o,i],r++,n)}).fromEntrySeq())},mapKeys:function(e,t){var n=this;return Ct(this,this.toSeq().flip().map(function(r,i){return e.call(t,r,i,n)}).flip())}});var lr=n.prototype;lr[pn]=!0,lr[Sn]=ar.entries,lr.__toJS=ar.toObject,lr.__toStringMapper=function(e,t){return JSON.stringify(t)+": "+tn(e)},Xt(r,{toKeyedSeq:function(){return new rt(this,(!1))},filter:function(e,t){return Ct(this,pt(this,e,t,!1))},findIndex:function(e,t){var n=this.findEntry(e,t);return n?n[0]:-1},indexOf:function(e){var t=this.toKeyedSeq().keyOf(e);return void 0===t?-1:t},lastIndexOf:function(e){var t=this.toKeyedSeq().reverse().keyOf(e);return void 0===t?-1:t},reverse:function(){return Ct(this,ct(this,!1))},slice:function(e,t){return Ct(this,dt(this,e,t,!1))},splice:function(e,t){var n=arguments.length;if(t=Math.max(0|t,0),0===n||2===n&&!t)return this;e=y(e,e<0?this.count():this.size);var r=this.slice(0,e);return Ct(this,1===n?r:r.concat(d(arguments,2),this.slice(e+t)))},findLastIndex:function(e,t){var n=this.toKeyedSeq().findLastKey(e,t);return void 0===n?-1:n},first:function(){return this.get(0)},flatten:function(e){return Ct(this,vt(this,e,!1))},get:function(e,t){return e=g(this,e),e<0||this.size===1/0||void 0!==this.size&&e>this.size?t:this.find(function(t,n){return n===e},void 0,t)},has:function(e){return e=g(this,e),e>=0&&(void 0!==this.size?this.size===1/0||e<this.size:this.indexOf(e)!==-1)},interpose:function(e){return Ct(this,bt(this,e))},interleave:function(){var e=[this].concat(d(arguments)),t=xt(this.toSeq(),N.of,e),n=t.flatten(!0);return t.size&&(n.size=t.size*e.length),Ct(this,n)},last:function(){return this.get(-1)},skipWhile:function(e,t){return Ct(this,gt(this,e,t,!1))},zip:function(){var e=[this].concat(d(arguments));return Ct(this,xt(this,nn,e))},zipWith:function(e){var t=d(arguments);return t[0]=this,Ct(this,xt(this,e,t))}}),r.prototype[un]=!0,r.prototype[hn]=!0,Xt(i,{get:function(e,t){return this.has(e)?e:t},includes:function(e){return this.has(e)},keySeq:function(){return this.valueSeq()}}),i.prototype.has=ar.includes,Xt(O,n.prototype),Xt(N,r.prototype),Xt(I,i.prototype),Xt(te,n.prototype),Xt(ne,r.prototype),Xt(re,i.prototype);var cr={Iterable:t,Seq:M,Collection:ee,Map:ue,OrderedMap:Qe,List:ze,Stack:Gt,Set:Ft,OrderedSet:Wt,Record:It,Range:Z,Repeat:J,is:Y,fromJS:V};return cr})},function(e,t,n){"use strict";var r=n(219),i=n(220),o=n(222),s=n(228),a=n(231),l=n(217),c=n(238),p=l.List,u=l.Repeat,h={insertAtomicBlock:function(e,t,n){var l=e.getCurrentContent(),h=e.getSelection(),d=s.removeRange(l,h,"backward"),f=d.getSelectionAfter(),g=s.splitBlock(d,f),m=g.getSelectionAfter(),v=s.setBlockType(g,m,"atomic"),y=i.create({entity:t}),b=[new o({key:c(),type:"atomic",text:n,characterList:p(u(y,n.length))}),new o({key:c(),type:"unstyled",text:"",characterList:p()})],E=r.createFromArray(b),T=s.replaceWithFragment(v,m,E),w=T.merge({selectionBefore:h,selectionAfter:T.getSelectionAfter().set("hasFocus",!0)});return a.push(e,w,"insert-fragment")}};e.exports=h},function(e,t,n){"use strict";var r=n(217),i=r.OrderedMap,o={createFromArray:function(e){return i(e.map(function(e){return[e.getKey(),e]}))}};e.exports=o},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=function(e,t,n){for(var r=!0;r;){var i=e,o=t,s=n;r=!1,null===i&&(i=Function.prototype);var a=Object.getOwnPropertyDescriptor(i,o);if(void 0!==a){if("value"in a)return a.value;var l=a.get;if(void 0===l)return;return l.call(s)}var c=Object.getPrototypeOf(i);if(null===c)return;e=c,t=o,n=s,r=!0,a=c=void 0}},a=n(217),l=a.Map,c=a.OrderedSet,p=a.Record,u=c(),h={style:u,entity:null},d=p(h),f=function(e){function t(){r(this,t),s(Object.getPrototypeOf(t.prototype),"constructor",this).apply(this,arguments)}return i(t,e),o(t,[{key:"getStyle",value:function(){return this.get("style")}},{key:"getEntity",value:function(){return this.get("entity")}},{key:"hasStyle",value:function(e){return this.getStyle().has(e)}}],[{key:"applyStyle",value:function(e,n){var r=e.set("style",e.getStyle().add(n));return t.create(r)}},{key:"removeStyle",value:function(e,n){var r=e.set("style",e.getStyle().remove(n));return t.create(r)}},{key:"applyEntity",value:function(e,n){var r=e.getEntity()===n?e:e.set("entity",n);return t.create(r)}},{key:"create",value:function(e){if(!e)return g;var n=l({style:u,entity:null}).merge(e),r=m.get(n);if(r)return r;var i=new t(n);return m=m.set(n,i),i}}]),t}(d),g=new f,m=l([[l(h),g]]);f.EMPTY=g,e.exports=f},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t,n){for(var r=t;r<n;r++)if(null!=e[r])return!1;return!0}function o(e,t,n,r){for(var i=t;i<n;i++)e[i]=r}var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=n(217),l=a.List,c=".",p=function(){function e(t){r(this,e),this._decorators=t.slice()}return s(e,[{key:"getDecorations",value:function(e){var t=Array(e.getText().length).fill(null);return this._decorators.forEach(function(n,r){var s=0,a=n.strategy;a(e,function(e,n){i(t,e,n)&&(o(t,e,n,r+c+s),s++)})}),l(t)}},{key:"getComponentForKey",value:function(e){var t=parseInt(e.split(c)[0],10);return this._decorators[t].component}},{key:"getPropsForKey",value:function(e){var t=parseInt(e.split(c)[0],10);return this._decorators[t].props}}]),e}();e.exports=p},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function o(e,t){return e.getStyle()===t.getStyle()}function s(e,t){return e.getEntity()===t.getEntity()}var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=function(e,t,n){for(var r=!0;r;){var i=e,o=t,s=n;r=!1,null===i&&(i=Function.prototype);var a=Object.getOwnPropertyDescriptor(i,o);if(void 0!==a){if("value"in a)return a.value;var l=a.get;if(void 0===l)return;return l.call(s)}var c=Object.getPrototypeOf(i);if(null===c)return;e=c,t=o,n=s,r=!0,a=c=void 0}},c=n(217),p=n(268),u=c.List,h=c.OrderedSet,d=c.Record,f=h(),g={key:"",type:"unstyled",text:"",characterList:u(),depth:0},m=d(g),v=function(e){function t(){r(this,t),l(Object.getPrototypeOf(t.prototype),"constructor",this).apply(this,arguments)}return i(t,e),a(t,[{key:"getKey",value:function(){return this.get("key")}},{key:"getType",value:function(){return this.get("type")}},{key:"getText",value:function(){return this.get("text")}},{key:"getCharacterList",value:function(){return this.get("characterList")}},{key:"getLength",value:function(){return this.getText().length}},{key:"getDepth",value:function(){return this.get("depth")}},{key:"getInlineStyleAt",value:function(e){var t=this.getCharacterList().get(e);return t?t.getStyle():f}},{key:"getEntityAt",value:function(e){var t=this.getCharacterList().get(e);return t?t.getEntity():null}},{key:"findStyleRanges",value:function(e,t){p(this.getCharacterList(),o,e,t)}},{key:"findEntityRanges",value:function(e,t){p(this.getCharacterList(),s,e,t)}}]),t}(m);e.exports=v},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=function(e,t,n){for(var r=!0;r;){var i=e,o=t,s=n;r=!1,null===i&&(i=Function.prototype);var a=Object.getOwnPropertyDescriptor(i,o);if(void 0!==a){if("value"in a)return a.value;var l=a.get;if(void 0===l)return;return l.call(s)}var c=Object.getPrototypeOf(i);if(null===c)return;e=c,t=o,n=s,r=!0,a=c=void 0}},a=n(219),l=n(220),c=n(222),p=n(217),u=n(234),h=n(238),d=n(269),f=p.List,g=p.Record,m=p.Repeat,v={blockMap:null,selectionBefore:null,selectionAfter:null},y=g(v),b=function(e){function t(){r(this,t),s(Object.getPrototypeOf(t.prototype),"constructor",this).apply(this,arguments)}return i(t,e),o(t,[{key:"getBlockMap",value:function(){return this.get("blockMap")}},{key:"getSelectionBefore",value:function(){return this.get("selectionBefore")}},{key:"getSelectionAfter",value:function(){return this.get("selectionAfter")}},{key:"getBlockForKey",value:function(e){var t=this.getBlockMap().get(e);return t}},{key:"getKeyBefore",value:function(e){return this.getBlockMap().reverse().keySeq().skipUntil(function(t){return t===e}).skip(1).first()}},{key:"getKeyAfter",value:function(e){return this.getBlockMap().keySeq().skipUntil(function(t){return t===e}).skip(1).first()}},{key:"getBlockAfter",value:function(e){return this.getBlockMap().skipUntil(function(t,n){return n===e}).skip(1).first()}},{key:"getBlockBefore",value:function(e){return this.getBlockMap().reverse().skipUntil(function(t,n){return n===e}).skip(1).first()}},{key:"getBlocksAsArray",value:function(){return this.getBlockMap().toArray()}},{key:"getFirstBlock",value:function(){return this.getBlockMap().first()}},{key:"getLastBlock",value:function(){return this.getBlockMap().last()}},{key:"getPlainText",value:function(e){return this.getBlockMap().map(function(e){return e?e.getText():""}).join(e||"\n")}},{key:"hasText",value:function(){var e=this.getBlockMap();return e.size>1||e.first().getLength()>0}}],[{key:"createFromBlockArray",value:function(e){var n=a.createFromArray(e),r=u.createEmpty(n.first().getKey());return new t({blockMap:n,selectionBefore:r,selectionAfter:r})}},{key:"createFromText",value:function(e){var n=arguments.length<=1||void 0===arguments[1]?/\r\n?|\n/g:arguments[1],r=e.split(n),i=r.map(function(e){return e=d(e),new c({key:h(),text:e,type:"unstyled",characterList:f(m(l.EMPTY,e.length))})});return t.createFromBlockArray(i)}}]),t}(y);e.exports=b},function(e,t,n){"use strict";var r=n(217),i=r.Map,o=n(17),s=n(341),a=o.createElement("ul",{className:s("public/DraftStyleDefault/ul")}),l=o.createElement("ol",{className:s("public/DraftStyleDefault/ol")}),c=o.createElement("pre",{className:s("public/DraftStyleDefault/pre")});e.exports=i({"header-one":{element:"h1"},"header-two":{element:"h2"},"header-three":{element:"h3"},"header-four":{element:"h4"},"header-five":{element:"h5"},"header-six":{element:"h6"},"unordered-list-item":{element:"li",wrapper:a},"ordered-list-item":{element:"li",wrapper:l},blockquote:{element:"blockquote"},atomic:{element:"figure"},"code-block":{element:"pre",wrapper:c},unstyled:{element:"div"}})},function(e,t,n){"use strict";e.exports={BOLD:{fontWeight:"bold"},CODE:{fontFamily:"monospace",wordWrap:"break-word"},ITALIC:{fontStyle:"italic"},STRIKETHROUGH:{textDecoration:"line-through"},UNDERLINE:{textDecoration:"underline"}}},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=function(e,t,n){for(var r=!0;r;){var i=e,o=t,s=n;r=!1,null===i&&(i=Function.prototype);var a=Object.getOwnPropertyDescriptor(i,o);if(void 0!==a){if("value"in a)return a.value;var l=a.get;if(void 0===l)return;return l.call(s)}var c=Object.getPrototypeOf(i);if(null===c)return;e=c,t=o,n=s,r=!0,a=c=void 0}},l=n(224),c=n(225),p=n(270),u=n(271),h=n(272),d=n(273),f=n(274),g=n(231),m=n(17),v=n(19),y=n(342),b=n(343),E=n(344),T=n(341),w=n(345),x=n(238),C=n(239),S=n(346),P=n(347),k=E.isBrowser("IE"),_=!k,M={edit:d,composite:p,drag:h,cut:null,render:null},O=function(e){function t(e){var n=this;r(this,t),a(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,e),this._blockSelectEvents=!1,this._clipboard=null,this._guardAgainstRender=!1,this._handler=null,this._dragCount=0,this._editorKey=x(),this._placeholderAccessibilityID="placeholder-"+this._editorKey,this._onBeforeInput=this._buildHandler("onBeforeInput"),this._onBlur=this._buildHandler("onBlur"),this._onCharacterData=this._buildHandler("onCharacterData"),this._onCompositionEnd=this._buildHandler("onCompositionEnd"),this._onCompositionStart=this._buildHandler("onCompositionStart"),this._onCopy=this._buildHandler("onCopy"),this._onCut=this._buildHandler("onCut"),this._onDragEnd=this._buildHandler("onDragEnd"),this._onDragOver=this._buildHandler("onDragOver"),this._onDragStart=this._buildHandler("onDragStart"),this._onDrop=this._buildHandler("onDrop"),this._onInput=this._buildHandler("onInput"),this._onFocus=this._buildHandler("onFocus"),this._onKeyDown=this._buildHandler("onKeyDown"),this._onKeyPress=this._buildHandler("onKeyPress"),this._onKeyUp=this._buildHandler("onKeyUp"),this._onMouseDown=this._buildHandler("onMouseDown"),this._onMouseUp=this._buildHandler("onMouseUp"),this._onPaste=this._buildHandler("onPaste"),this._onSelect=this._buildHandler("onSelect"),this.focus=this._focus.bind(this),this.blur=this._blur.bind(this),this.setMode=this._setMode.bind(this),this.exitCurrentMode=this._exitCurrentMode.bind(this),this.restoreEditorDOM=this._restoreEditorDOM.bind(this),this.setRenderGuard=this._setRenderGuard.bind(this),this.removeRenderGuard=this._removeRenderGuard.bind(this),this.setClipboard=this._setClipboard.bind(this),this.getClipboard=this._getClipboard.bind(this),this.getEditorKey=function(){return n._editorKey},this.update=this._update.bind(this),this.onDragEnter=this._onDragEnter.bind(this),this.onDragLeave=this._onDragLeave.bind(this),this.state={containerKey:0}}return i(t,e),s(t,null,[{key:"defaultProps",value:{blockRenderMap:l,blockRendererFn:w.thatReturnsNull,blockStyleFn:w.thatReturns(""),keyBindingFn:C,readOnly:!1,spellCheck:!1,stripPastedStyles:!1},enumerable:!0}]),s(t,[{key:"_buildHandler",value:function(e){var t=this;return function(n){if(!t.props.readOnly){var r=t._handler&&t._handler[e];r&&r.call(t,n)}}}},{key:"_showPlaceholder",value:function(){return!!this.props.placeholder&&!this.props.editorState.isInCompositionMode()&&!this.props.editorState.getCurrentContent().hasText()}},{key:"_renderPlaceholder",value:function(){return this._showPlaceholder()?m.createElement(f,{text:S(this.props.placeholder),editorState:this.props.editorState,textAlignment:this.props.textAlignment,accessibilityID:this._placeholderAccessibilityID}):null}},{key:"render",value:function(){var e=this.props,t=e.readOnly,n=e.textAlignment,r=T({"DraftEditor/root":!0,"DraftEditor/alignLeft":"left"===n,"DraftEditor/alignRight":"right"===n,"DraftEditor/alignCenter":"center"===n}),i=(this.props.editorState.getCurrentContent().hasText(),{outline:"none",whiteSpace:"pre-wrap",wordWrap:"break-word"});return m.createElement("div",{className:r},this._renderPlaceholder(),m.createElement("div",{className:T("DraftEditor/editorContainer"),key:"editor"+this.state.containerKey,ref:"editorContainer"},m.createElement("div",{"aria-activedescendant":t?null:this.props.ariaActiveDescendantID,"aria-autocomplete":t?null:this.props.ariaAutoComplete,"aria-describedby":this._showPlaceholder()?this._placeholderAccessibilityID:null,"aria-expanded":t?null:this.props.ariaExpanded,"aria-haspopup":t?null:this.props.ariaHasPopup,"aria-label":this.props.ariaLabel,"aria-owns":t?null:this.props.ariaOwneeID,className:T("public/DraftEditor/content"),contentEditable:!t,"data-testid":this.props.webDriverTestID,onBeforeInput:this._onBeforeInput,onBlur:this._onBlur,onCompositionEnd:this._onCompositionEnd,onCompositionStart:this._onCompositionStart,onCopy:this._onCopy,onCut:this._onCut,onDragEnd:this._onDragEnd,onDragEnter:this.onDragEnter,onDragLeave:this.onDragLeave,onDragOver:this._onDragOver,onDragStart:this._onDragStart,onDrop:this._onDrop,onFocus:this._onFocus,onInput:this._onInput,onKeyDown:this._onKeyDown,onKeyPress:this._onKeyPress,onKeyUp:this._onKeyUp,onMouseUp:this._onMouseUp,onPaste:this._onPaste,onSelect:this._onSelect,ref:"editor",role:t?null:this.props.role||"textbox",spellCheck:_&&this.props.spellCheck,style:i,suppressContentEditableWarning:!0,tabIndex:this.props.tabIndex},m.createElement(u,{blockRenderMap:this.props.blockRenderMap,blockRendererFn:this.props.blockRendererFn,blockStyleFn:this.props.blockStyleFn,customStyleMap:o({},c,this.props.customStyleMap),editorKey:this._editorKey,editorState:this.props.editorState}))))}},{key:"componentDidMount",value:function(){this.setMode("edit"),k&&document.execCommand("AutoUrlDetect",!1,!1)}},{key:"componentWillUpdate",value:function(){this._blockSelectEvents=!0}},{key:"componentDidUpdate",value:function(){this._blockSelectEvents=!1}},{key:"_focus",value:function(e){var t=this.props.editorState,n=t.getSelection().getHasFocus(),r=v.findDOMNode(this.refs.editor),i=b.getScrollParent(r),o=e||P(i),s=o.x,a=o.y;r.focus(),i===window?window.scrollTo(s,a):y.setTop(i,a),n||this.update(g.forceSelection(t,t.getSelection()))}},{key:"_blur",value:function(){v.findDOMNode(this.refs.editor).blur()}},{key:"_setMode",value:function(e){this._handler=M[e]}},{key:"_exitCurrentMode",value:function(){this.setMode("edit")}},{key:"_restoreEditorDOM",value:function(e){var t=this;this.setState({containerKey:this.state.containerKey+1},function(){t._focus(e)})}},{key:"_setRenderGuard",value:function(){this._guardAgainstRender=!0}},{key:"_removeRenderGuard",value:function(){this._guardAgainstRender=!1}},{key:"_setClipboard",value:function(e){this._clipboard=e}},{key:"_getClipboard",value:function(){return this._clipboard}},{key:"_update",value:function(e){this.props.onChange(e)}},{key:"_onDragEnter",value:function(){this._dragCount++}},{key:"_onDragLeave",value:function(){this._dragCount--,0===this._dragCount&&this.exitCurrentMode()}}]),t}(m.Component);e.exports=O},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function o(e,t){return e.getAnchorKey()===t||e.getFocusKey()===t}var s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=function(e,t,n){for(var r=!0;r;){var i=e,o=t,s=n;r=!1,null===i&&(i=Function.prototype);var a=Object.getOwnPropertyDescriptor(i,o);if(void 0!==a){if("value"in a)return a.value;var l=a.get;if(void 0===l)return;return l.call(s)}var c=Object.getPrototypeOf(i);if(null===c)return;e=c,t=o,n=s,r=!0,a=c=void 0}},c=(n(222),n(285)),p=n(286),u=n(17),h=n(19),d=n(342),f=(n(234),n(343)),g=n(349),m=n(350),v=n(341),y=n(351),b=n(347),E=n(352),T=n(346),w=10,x=function(e){function t(){r(this,t),l(Object.getPrototypeOf(t.prototype),"constructor",this).apply(this,arguments)}return i(t,e),a(t,[{key:"shouldComponentUpdate",value:function(e){return this.props.block!==e.block||this.props.tree!==e.tree||this.props.direction!==e.direction||o(e.selection,e.block.getKey())&&e.forceSelection}},{key:"componentDidMount",value:function(){var e=this.props.selection,t=e.getEndKey();if(e.getHasFocus()&&t===this.props.block.getKey()){var n,r=h.findDOMNode(this),i=f.getScrollParent(r),o=b(i);if(i===window){var s=y(r),a=s.y+s.height,l=E().height;n=a-l,n>0&&window.scrollTo(o.x,o.y+n+w)}else{var c=r.offsetHeight+r.offsetTop,p=i.offsetHeight+o.y;n=c-p,n>0&&d.setTop(i,d.getTop(i)+n+w)}}}},{key:"_renderChildren",value:function(){var e=this,t=this.props.block,n=t.getKey(),r=t.getText(),i=this.props.tree.size-1,a=o(this.props.selection,n);return this.props.tree.map(function(o,l){var h=o.get("leaves"),d=h.size-1,f=h.map(function(o,s){var h=p.encode(n,l,s),f=o.get("start"),g=o.get("end");return u.createElement(c,{key:h,offsetKey:h,blockKey:n,start:f,selection:a?e.props.selection:void 0,forceSelection:e.props.forceSelection,text:r.slice(f,g),styleSet:t.getInlineStyleAt(f),customStyleMap:e.props.customStyleMap,isLast:l===i&&s===d})}).toArray(),v=o.get("decoratorKey");if(null==v)return f;if(!e.props.decorator)return f;var y=T(e.props.decorator),b=y.getComponentForKey(v);if(!b)return f;var E=y.getPropsForKey(v),w=p.encode(n,l,0),x=r.slice(h.first().get("start"),h.last().get("end")),C=m.getHTMLDirIfDifferent(g.getDirection(x),e.props.direction);return u.createElement(b,s({},E,{decoratedText:x,dir:C,key:w,entityKey:t.getEntityAt(o.get("start")),offsetKey:w}),f)}).toArray()}},{key:"render",value:function(){var e=this.props,t=e.direction,n=e.offsetKey,r=v({"public/DraftStyleDefault/block":!0,"public/DraftStyleDefault/ltr":"LTR"===t,"public/DraftStyleDefault/rtl":"RTL"===t});return u.createElement("div",{"data-offset-key":n,className:r},this._renderChildren())}}]),t}(u.Component);e.exports=x},function(e,t,n){"use strict";var r=n(220),i=n(275),o=n(217),s=o.OrderedSet,a=n(276),l=n(277),c=n(278),p=n(279),u=n(280),h=n(348),d=n(281),f=n(282),g=n(283),m=n(284),v={replaceText:function(e,t,n,i,o){var a=d(e,t),l=f(a,t),c=r.create({style:i||s(),entity:o||null});return u(l,l.getSelectionAfter(),n,c)},insertText:function(e,t,n,r,i){return t.isCollapsed()?void 0:h(!1),v.replaceText(e,t,n,r,i)},moveText:function(e,t,n){var r=c(e,t),i=v.removeRange(e,t,"backward");return v.replaceWithFragment(i,n,r)},replaceWithFragment:function(e,t,n){var r=d(e,t),i=f(r,t);return p(i,i.getSelectionAfter(),n)},removeRange:function(e,t,n){if(t.getAnchorKey()===t.getFocusKey()){var r=t.getAnchorKey(),i=t.getStartOffset(),o=t.getEndOffset(),s=e.getBlockForKey(r),a=s.getEntityAt(i),c=s.getEntityAt(o-1);if(a&&a===c){var p=l(s,t,n);return f(e,p)}}var u=d(e,t);return f(u,t)},splitBlock:function(e,t){var n=d(e,t),r=f(n,t);return m(r,r.getSelectionAfter())},applyInlineStyle:function(e,t,n){return i.add(e,t,n)},removeInlineStyle:function(e,t,n){return i.remove(e,t,n)},setBlockType:function(e,t,n){return g(e,t,n)},applyEntity:function(e,t,n){var r=d(e,t);return a(r,t,n)}};e.exports=v},function(e,t,n){"use strict";var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},i=n(230),o=n(217),s=n(348),a=o.Map,l=a(),c=0,p={create:function(e,t,n){return p.add(new i({type:e,mutability:t,data:n||{}}))},add:function(e){var t=""+ ++c;return l=l.set(t,e),t},get:function(e){var t=l.get(e);return t?void 0:s(!1),t},mergeData:function(e,t){var n=p.get(e),i=r({},n.getData(),t),o=n.set("data",i);return l=l.set(e,o),o},replaceData:function(e,t){var n=p.get(e),r=n.set("data",t);return l=l.set(e,r),r}};e.exports=p},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){
if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=function(e,t,n){for(var r=!0;r;){var i=e,o=t,s=n;r=!1,null===i&&(i=Function.prototype);var a=Object.getOwnPropertyDescriptor(i,o);if(void 0!==a){if("value"in a)return a.value;var l=a.get;if(void 0===l)return;return l.call(s)}var c=Object.getPrototypeOf(i);if(null===c)return;e=c,t=o,n=s,r=!0,a=c=void 0}},a=n(217),l=a.Record,c=l({type:"TOKEN",mutability:"IMMUTABLE",data:Object}),p=function(e){function t(){r(this,t),s(Object.getPrototypeOf(t.prototype),"constructor",this).apply(this,arguments)}return i(t,e),o(t,[{key:"getType",value:function(){return this.get("type")}},{key:"getMutability",value:function(){return this.get("mutability")}},{key:"getData",value:function(){return this.get("data")}}]),t}(c);e.exports=p},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t,n){return C.set(e,{selection:t,forceSelection:n,nativelyRenderedContent:null,inlineStyleOverride:null})}function o(e,t){return e.getBlockMap().map(function(e){return f.generate(e,t)}).toOrderedMap()}function s(e,t,n){var r=e.getCurrentContent().getBlockMap(),i=e.getImmutable().get("treeMap");return i.merge(t.toSeq().filter(function(e,t){return e!==r.get(t)}).map(function(e){return f.generate(e,n)}))}function a(e,t,n,r){return t.merge(e.toSeq().filter(function(e){return n.getDecorations(e)!==r.getDecorations(e)}).map(function(e){return f.generate(e,n)}))}function l(e,t){var n=e.getLastChangeType();return t!==n||"insert-characters"!==t&&"backspace-character"!==t&&"delete-character"!==t}function c(e,t){var n=t.getStartKey(),r=t.getStartOffset(),i=e.getBlockForKey(n);return r>0?i.getInlineStyleAt(r-1):i.getLength()?i.getInlineStyleAt(0):u(e,n)}function p(e,t){var n=t.getStartKey(),r=t.getStartOffset(),i=e.getBlockForKey(n);return r<i.getLength()?i.getInlineStyleAt(r):r>0?i.getInlineStyleAt(r-1):u(e,n)}function u(e,t){for(var n,r=e.getBlockBefore(t);r;){if(n=r.getLength())return r.getInlineStyleAt(n-1);r=e.getBlockBefore(r.getKey())}return b()}var h=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},d=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),f=n(287),g=n(223),m=n(288),v=n(217),y=n(234),b=v.OrderedSet,E=v.Record,T=v.Stack,w={allowUndo:!0,currentContent:null,decorator:null,directionMap:null,forceSelection:!1,inCompositionMode:!1,inlineStyleOverride:null,lastChangeType:null,nativelyRenderedContent:null,redoStack:T(),selection:null,treeMap:null,undoStack:T()},x=E(w),C=function(){function e(t){r(this,e),this._immutable=t}return d(e,[{key:"toJS",value:function(){return this.getImmutable().toJS()}},{key:"getAllowUndo",value:function(){return this.getImmutable().get("allowUndo")}},{key:"getCurrentContent",value:function(){return this.getImmutable().get("currentContent")}},{key:"getUndoStack",value:function(){return this.getImmutable().get("undoStack")}},{key:"getRedoStack",value:function(){return this.getImmutable().get("redoStack")}},{key:"getSelection",value:function(){return this.getImmutable().get("selection")}},{key:"getDecorator",value:function(){return this.getImmutable().get("decorator")}},{key:"isInCompositionMode",value:function(){return this.getImmutable().get("inCompositionMode")}},{key:"mustForceSelection",value:function(){return this.getImmutable().get("forceSelection")}},{key:"getNativelyRenderedContent",value:function(){return this.getImmutable().get("nativelyRenderedContent")}},{key:"getLastChangeType",value:function(){return this.getImmutable().get("lastChangeType")}},{key:"getInlineStyleOverride",value:function(){return this.getImmutable().get("inlineStyleOverride")}},{key:"getCurrentInlineStyle",value:function(){var e=this.getInlineStyleOverride();if(null!=e)return e;var t=this.getCurrentContent(),n=this.getSelection();return n.isCollapsed()?c(t,n):p(t,n)}},{key:"getBlockTree",value:function(e){return this.getImmutable().getIn(["treeMap",e])}},{key:"isSelectionAtStartOfContent",value:function(){var e=this.getCurrentContent().getBlockMap().first().getKey();return this.getSelection().hasEdgeWithin(e,0,0)}},{key:"isSelectionAtEndOfContent",value:function(){var e=this.getCurrentContent(),t=e.getBlockMap(),n=t.last(),r=n.getLength();return this.getSelection().hasEdgeWithin(n.getKey(),r,r)}},{key:"getDirectionMap",value:function(){return this.getImmutable().get("directionMap")}}],[{key:"createEmpty",value:function(t){return e.createWithContent(g.createFromText(""),t)}},{key:"createWithContent",value:function(t,n){var r=t.getBlockMap().first().getKey();return e.create({currentContent:t,undoStack:T(),redoStack:T(),decorator:n||null,selection:y.createEmpty(r)})}},{key:"create",value:function(t){var n=t.currentContent,r=t.decorator,i=h({},t,{treeMap:o(n,r),directionMap:m.getDirectionMap(n)});return new e(new x(i))}},{key:"set",value:function(t,n){var r=t.getImmutable().withMutations(function(e){var r=e.get("decorator"),i=r;null===n.decorator?i=null:n.decorator&&(i=n.decorator);var l=n.currentContent||t.getCurrentContent();if(i!==r){var c,p=e.get("treeMap");return c=i&&r?a(l.getBlockMap(),p,i,r):o(l,i),void e.merge({decorator:i,treeMap:c,nativelyRenderedContent:null})}var u=t.getCurrentContent();l!==u&&e.set("treeMap",s(t,l.getBlockMap(),i)),e.merge(n)});return new e(r)}},{key:"setInlineStyleOverride",value:function(t,n){return e.set(t,{inlineStyleOverride:n})}},{key:"acceptSelection",value:function(e,t){return i(e,t,!1)}},{key:"forceSelection",value:function(e,t){return t.getHasFocus()||(t=t.set("hasFocus",!0)),i(e,t,!0)}},{key:"moveSelectionToEnd",value:function(t){var n=t.getCurrentContent(),r=n.getLastBlock(),i=r.getKey(),o=r.getLength();return e.acceptSelection(t,new y({anchorKey:i,anchorOffset:o,focusKey:i,focusOffset:o,isBackward:!1}))}},{key:"moveFocusToEnd",value:function(t){var n=e.moveSelectionToEnd(t);return e.forceSelection(n,n.getSelection())}},{key:"push",value:function(t,n,r){if(t.getCurrentContent()===n)return t;var i="insert-characters"!==r,o=m.getDirectionMap(n,t.getDirectionMap());if(!t.getAllowUndo())return e.set(t,{currentContent:n,directionMap:o,lastChangeType:r,selection:n.getSelectionAfter(),forceSelection:i,inlineStyleOverride:null});var s=t.getSelection(),a=t.getCurrentContent(),c=t.getUndoStack(),p=n;s!==a.getSelectionAfter()||l(t,r)?(c=c.push(a),p=p.set("selectionBefore",s)):"insert-characters"!==r&&"backspace-character"!==r&&"delete-character"!==r||(p=p.set("selectionBefore",a.getSelectionBefore()));var u=t.getInlineStyleOverride();"adjust-depth"!==r&&"change-block-type"!==r&&(u=null);var h={currentContent:p,directionMap:o,undoStack:c,redoStack:T(),lastChangeType:r,selection:n.getSelectionAfter(),forceSelection:i,inlineStyleOverride:u};return e.set(t,h)}},{key:"undo",value:function(t){if(!t.getAllowUndo())return t;var n=t.getUndoStack(),r=n.peek();if(!r)return t;var i=t.getCurrentContent(),o=m.getDirectionMap(r,t.getDirectionMap());return e.set(t,{currentContent:r,directionMap:o,undoStack:n.shift(),redoStack:t.getRedoStack().push(i),forceSelection:!0,inlineStyleOverride:null,lastChangeType:"undo",nativelyRenderedContent:null,selection:i.getSelectionBefore()})}},{key:"redo",value:function(t){if(!t.getAllowUndo())return t;var n=t.getRedoStack(),r=n.peek();if(!r)return t;var i=t.getCurrentContent(),o=m.getDirectionMap(r,t.getDirectionMap());return e.set(t,{currentContent:r,directionMap:o,undoStack:t.getUndoStack().push(i),redoStack:n.shift(),forceSelection:!0,inlineStyleOverride:null,lastChangeType:"redo",nativelyRenderedContent:null,selection:r.getSelectionAfter()})}}]),d(e,[{key:"getImmutable",value:function(){return this._immutable}}]),e}();e.exports=C},function(e,t,n){"use strict";var r=n(344),i=r.isPlatform("Mac OS X"),o={isCtrlKeyCommand:function(e){return!!e.ctrlKey&&!e.altKey},isOptionKeyCommand:function(e){return i&&e.altKey},hasCommandModifier:function(e){return i?!!e.metaKey&&!e.altKey:o.isCtrlKeyCommand(e)}};e.exports=o},function(e,t,n){"use strict";var r=n(229),i=n(228),o=n(231),s=(n(234),n(289)),a=n(346),l={currentBlockContainsLink:function(e){var t=e.getSelection();return e.getCurrentContent().getBlockForKey(t.getAnchorKey()).getCharacterList().slice(t.getStartOffset(),t.getEndOffset()).some(function(e){var t=e.getEntity();return!!t&&"LINK"===r.get(t).getType()})},getCurrentBlockType:function(e){var t=e.getSelection();return e.getCurrentContent().getBlockForKey(t.getStartKey()).getType()},getDataObjectForLinkURL:function(e){return{url:e.toString()}},handleKeyCommand:function(e,t){switch(t){case"bold":return l.toggleInlineStyle(e,"BOLD");case"italic":return l.toggleInlineStyle(e,"ITALIC");case"underline":return l.toggleInlineStyle(e,"UNDERLINE");case"code":return l.toggleCode(e);case"backspace":case"backspace-word":case"backspace-to-start-of-line":return l.onBackspace(e);case"delete":case"delete-word":case"delete-to-end-of-block":return l.onDelete(e);default:return null}},insertSoftNewline:function(e){var t=i.insertText(e.getCurrentContent(),e.getSelection(),"\n",e.getCurrentInlineStyle(),null),n=o.push(e,t,"insert-characters");return o.forceSelection(n,t.getSelectionAfter())},onBackspace:function(e){var t=e.getSelection();if(!t.isCollapsed()||t.getAnchorOffset()||t.getFocusOffset())return null;var n=e.getCurrentContent(),r=t.getStartKey(),s=n.getBlockBefore(r);if(s&&"atomic"===s.getType()){var a=t.merge({anchorKey:s.getKey(),anchorOffset:0}),c=i.setBlockType(n,a,n.getBlockForKey(r).getType()),p=i.removeRange(c,a,"backward");if(p!==n)return o.push(e,p,"remove-range")}var u=l.tryToRemoveBlockStyle(e);return u?o.push(e,u,"change-block-type"):null},onDelete:function(e){var t=e.getSelection();if(!t.isCollapsed())return null;var n=e.getCurrentContent(),r=t.getStartKey(),s=n.getBlockForKey(r),a=s.getLength();if(t.getStartOffset()<a)return null;var l=n.getBlockAfter(r);if(!l||"atomic"!==l.getType())return null;var c=t.merge({focusKey:l.getKey(),focusOffset:l.getLength()}),p=i.removeRange(n,c,"forward");return p!==n?o.push(e,p,"remove-range"):null},onTab:function(e,t,n){var r=t.getSelection(),i=r.getAnchorKey();if(i!==r.getFocusKey())return t;var a=t.getCurrentContent(),l=a.getBlockForKey(i),c=l.getType();if("unordered-list-item"!==c&&"ordered-list-item"!==c)return t;e.preventDefault();var p=a.getBlockBefore(i);if(!p)return t;var u=p.getType();if("unordered-list-item"!==u&&"ordered-list-item"!==u)return t;var h=l.getDepth();if(!e.shiftKey&&h===n)return t;n=Math.min(p.getDepth()+1,n);var d=s(a,r,e.shiftKey?-1:1,n);return o.push(t,d,"adjust-depth")},toggleBlockType:function(e,t){var n=e.getSelection(),r=n.getStartKey(),s=n.getEndKey(),l=e.getCurrentContent(),c=n;if(r!==s&&0===n.getEndOffset()){var p=a(l.getBlockBefore(s));s=p.getKey(),c=c.merge({anchorKey:r,anchorOffset:n.getStartOffset(),focusKey:s,focusOffset:p.getLength(),isBackward:!1})}var u=l.getBlockMap().skipWhile(function(e,t){return t!==r}).takeWhile(function(e,t){return t!==s}).some(function(e){return"atomic"===e.getType()});if(u)return e;var h=l.getBlockForKey(r).getType()===t?"unstyled":t;return o.push(e,i.setBlockType(l,c,h),"change-block-type")},toggleCode:function(e){var t=e.getSelection(),n=t.getAnchorKey(),r=t.getFocusKey();return t.isCollapsed()||n!==r?l.toggleBlockType(e,"code-block"):l.toggleInlineStyle(e,"CODE")},toggleInlineStyle:function(e,t){var n=e.getSelection(),r=e.getCurrentInlineStyle();if(n.isCollapsed())return o.setInlineStyleOverride(e,r.has(t)?r.remove(t):r.add(t));var s,a=e.getCurrentContent();return s=r.has(t)?i.removeInlineStyle(a,n,t):i.applyInlineStyle(a,n,t),o.push(e,s,"change-inline-style")},toggleLink:function(e,t,n){var r=i.applyEntity(e.getCurrentContent(),t,n);return o.push(e,r,"apply-entity")},tryToRemoveBlockStyle:function(e){var t=e.getSelection(),n=t.getAnchorOffset();if(t.isCollapsed()&&0===n){var r=t.getAnchorKey(),o=e.getCurrentContent(),s=o.getBlockForKey(r);if(s.getLength()>0)return null;var a=s.getType(),l=o.getBlockBefore(r);if("code-block"===a&&l&&"code-block"===l.getType())return null;if("unstyled"!==a)return i.setBlockType(o,t,"unstyled")}return null}};e.exports=l},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=function(e,t,n){for(var r=!0;r;){var i=e,o=t,s=n;r=!1,null===i&&(i=Function.prototype);var a=Object.getOwnPropertyDescriptor(i,o);if(void 0!==a){if("value"in a)return a.value;var l=a.get;if(void 0===l)return;return l.call(s)}var c=Object.getPrototypeOf(i);if(null===c)return;e=c,t=o,n=s,r=!0,a=c=void 0}},a=n(217),l=a.Record,c={anchorKey:"",anchorOffset:0,focusKey:"",focusOffset:0,isBackward:!1,hasFocus:!1},p=l(c),u=function(e){function t(){r(this,t),s(Object.getPrototypeOf(t.prototype),"constructor",this).apply(this,arguments)}return i(t,e),o(t,[{key:"serialize",value:function(){return"Anchor: "+this.getAnchorKey()+":"+this.getAnchorOffset()+", Focus: "+this.getFocusKey()+":"+this.getFocusOffset()+", Is Backward: "+String(this.getIsBackward())+", Has Focus: "+String(this.getHasFocus())}},{key:"getAnchorKey",value:function(){return this.get("anchorKey")}},{key:"getAnchorOffset",value:function(){return this.get("anchorOffset")}},{key:"getFocusKey",value:function(){return this.get("focusKey")}},{key:"getFocusOffset",value:function(){return this.get("focusOffset")}},{key:"getIsBackward",value:function(){return this.get("isBackward")}},{key:"getHasFocus",value:function(){return this.get("hasFocus")}},{key:"hasEdgeWithin",value:function(e,t,n){var r=this.getAnchorKey(),i=this.getFocusKey();if(r===i&&r===e){var o=this.getStartOffset(),s=this.getEndOffset();return t<=s&&o<=n}if(e!==r&&e!==i)return!1;var a=e===r?this.getAnchorOffset():this.getFocusOffset();return t<=a&&n>=a}},{key:"isCollapsed",value:function(){return this.getAnchorKey()===this.getFocusKey()&&this.getAnchorOffset()===this.getFocusOffset()}},{key:"getStartKey",value:function(){return this.getIsBackward()?this.getFocusKey():this.getAnchorKey()}},{key:"getStartOffset",value:function(){return this.getIsBackward()?this.getFocusOffset():this.getAnchorOffset()}},{key:"getEndKey",value:function(){return this.getIsBackward()?this.getAnchorKey():this.getFocusKey()}},{key:"getEndOffset",value:function(){return this.getIsBackward()?this.getAnchorOffset():this.getFocusOffset()}}],[{key:"createEmpty",value:function(e){return new t({anchorKey:e,anchorOffset:0,focusKey:e,focusOffset:0,isBackward:!1,hasFocus:!1})}}]),t}(p);e.exports=u},function(e,t,n){"use strict";function r(e){var t=0,n={},r=[];e.getBlockMap().forEach(function(e,o){e.findEntityRanges(function(e){return null!==e.getEntity()},function(r){var i=s.stringify(e.getEntityAt(r));n.hasOwnProperty(i)||(n[i]=""+t++)}),r.push({key:o,text:e.getText(),type:e.getType(),depth:i(e)?e.getDepth():0,inlineStyleRanges:l(e),entityRanges:a(e,n)})});var c=Object.keys(n),p={};return c.forEach(function(e,t){var n=o.get(s.unstringify(e));p[t]={type:n.getType(),mutability:n.getMutability(),data:n.getData()}}),{entityMap:p,blocks:r}}function i(e){var t=e.getType();return"ordered-list-item"===t||"unordered-list-item"===t}var o=n(229),s=n(290),a=n(291),l=n(292);e.exports=r},function(e,t,n){"use strict";function r(){return{text:"",inlines:[],entities:[],blocks:[]}}function i(e){var t=new Array(1);return e&&(t[0]=e),{text:A,inlines:[N()],entities:t,blocks:[]}}function o(){return{text:"\n",inlines:[N()],entities:new Array(1),blocks:[]}}function s(e,t){return{text:"\r",inlines:[N()],entities:new Array(1),blocks:[{type:e,depth:Math.max(0,Math.min(R,t))}]}}function a(e,t){return"li"===e?"ol"===t?"ordered-list-item":"unordered-list-item":null}function l(e){var t=e.get("unstyled").element;return e.map(function(e){return e.element}).valueSeq().toSet().filter(function(e){return e!==t}).toArray().sort()}function c(e,t,n){for(var r=0;r<n.length;r++){var i=n[r](e,t);if(i)return i}return null}function p(e,t,n){var r=n.filter(function(t){return t.element===e||t.wrapper===e}).keySeq().toSet().toArray().sort();switch(r.length){case 0:return"unstyled";case 1:return r[0];default:return c(e,t,[a])||"unstyled"}}function u(e,t,n){var r=B[e];return r?n=n.add(r).toOrderedSet():t instanceof HTMLElement&&!function(){var e=t;n=n.withMutations(function(t){"bold"===e.style.fontWeight&&t.add("BOLD"),"italic"===e.style.fontStyle&&t.add("ITALIC"),"underline"===e.style.textDecoration&&t.add("UNDERLINE"),"line-through"===e.style.textDecoration&&t.add("STRIKETHROUGH")}).toOrderedSet()}(),n}function h(e,t){var n=t.text.slice(0,1);if("\r"===e.text.slice(-1)&&"\r"===n&&(e.text=e.text.slice(0,-1),e.inlines.pop(),e.entities.pop(),e.blocks.pop()),"\r"===e.text.slice(-1)){if(t.text===A||"\n"===t.text)return e;n!==A&&"\n"!==n||(t.text=t.text.slice(1),t.inlines.shift(),t.entities.shift())}return{text:e.text+t.text,inlines:e.inlines.concat(t.inlines),entities:e.entities.concat(t.entities),blocks:e.blocks.concat(t.blocks)}}function d(e,t){return t.some(function(t){return e.indexOf("<"+t)!==-1})}function f(e){e instanceof HTMLAnchorElement?void 0:k(!1);var t=e.protocol;return"http:"===t||"https:"===t}function g(e,t,n,a,l,c,d,m){var v=e.nodeName.toLowerCase(),b=!1,E="unstyled",T=y;if("#text"===v){var x=e.textContent;return""===x.trim()&&"pre"!==a?i(m):("pre"!==a&&(x=x.replace(L,A)),y=v,{text:x,inlines:Array(x.length).fill(t),entities:Array(x.length).fill(m),blocks:[]})}if(y=v,"br"===v)return"br"!==T||a&&"unstyled"!==p(a,n,d)?o():s("unstyled",c);var S=r(),P=null;t=u(v,e,t),"ul"!==v&&"ol"!==v||(n&&(c+=1),n=v),a||l.indexOf(v)===-1?n&&"li"===a&&"li"===v&&(S=s(p(v,n,d),c),a=v,b=!0,E="ul"===n?"unordered-list-item":"ordered-list-item"):(S=s(p(v,n,d),c),a=v,b=!0);var k=e.firstChild;null!=k&&(v=k.nodeName.toLowerCase());for(var _=null,M=null;k;){"a"===v&&k.href&&f(k)?(M=new C(k.href).toString(),_=w.create("LINK","MUTABLE",{url:M})):_=void 0,P=g(k,t,n,a,l,c,d,_||m),S=h(S,P);var O=k.nextSibling;O&&l.indexOf(v)>=0&&a&&(S=h(S,o())),O&&(v=O.nodeName.toLowerCase()),k=O}return b&&(S=h(S,s(E,c))),S}function m(e,t,n){e=e.trim().replace(D,"").replace(F,A);var r=l(n),i=t(e);if(!i)return null;y=null;var o=d(e,r)?r:["div"],s=g(i,N(),"ul",null,o,-1,n);return 0===s.text.indexOf("\r")&&(s={text:s.text.slice(1),inlines:s.inlines.slice(1),entities:s.entities.slice(1),blocks:s.blocks}),"\r"===s.text.slice(-1)&&(s.text=s.text.slice(0,-1),s.inlines=s.inlines.slice(0,-1),s.entities=s.entities.slice(0,-1),s.blocks.pop()),0===s.blocks.length&&s.blocks.push({type:"unstyled",depth:0}),s.text.split("\r").length===s.blocks.length+1&&s.blocks.unshift({type:"unstyled",depth:0}),s}function v(e){var t=arguments.length<=1||void 0===arguments[1]?P:arguments[1],n=arguments.length<=2||void 0===arguments[2]?T:arguments[2],r=m(e,t,n);if(null==r)return null;var i=0;return r.text.split("\r").map(function(e,t){e=M(e);var n=i+e.length,o=_(r).inlines.slice(i,n),s=_(r).entities.slice(i,n),a=O(o.map(function(e,t){var n={style:e,entity:null};return s[t]&&(n.entity=s[t]),b.create(n)}));return i=n+1,new E({key:S(),type:_(r).blocks[t].type,depth:_(r).blocks[t].depth,text:e,characterList:a})})}var y,b=n(220),E=n(222),T=n(224),w=n(229),x=n(217),C=n(353),S=n(238),P=n(293),k=n(348),_=n(346),M=n(269),O=x.List,N=x.OrderedSet,I="&nbsp;",A=" ",R=4,D=new RegExp("\r","g"),L=new RegExp("\n","g"),F=new RegExp(I,"g"),B={b:"BOLD",code:"CODE",del:"STRIKETHROUGH",em:"ITALIC",i:"ITALIC",s:"STRIKETHROUGH",strike:"STRIKETHROUGH",strong:"BOLD",u:"UNDERLINE"};e.exports=v},function(e,t,n){"use strict";function r(e){var t=e.blocks,n=e.entityMap,r={};Object.keys(n).forEach(function(e){var t=n[e],i=t.type,o=t.mutability,s=t.data,l=a.create(i,o,s||{});r[e]=l});var h=t.map(function(e){var t=e.key,n=e.type,s=e.text,a=e.depth,h=e.inlineStyleRanges,d=e.entityRanges;t=t||u(),a=a||0,h=h||[],d=d||[];var f=p(s,h),g=d.filter(function(e){return r.hasOwnProperty(e.key)}).map(function(e){return i({},e,{key:r[e.key]})}),m=c(s,g),v=l(f,m);return new o({key:t,type:n,text:s,depth:a,characterList:v})});return s.createFromBlockArray(h)}var i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},o=n(222),s=n(223),a=n(229),l=n(294),c=n(295),p=n(296),u=n(238);e.exports=r},function(e,t,n){"use strict";function r(){for(var e=void 0;void 0===e||i.hasOwnProperty(e)||!isNaN(+e);)e=Math.floor(Math.random()*o).toString(32);return i[e]=!0,e}var i={},o=Math.pow(2,24);e.exports=r},function(e,t,n){"use strict";function r(e){return u&&e.altKey||g(e)}function i(e){if(f(e))return e.shiftKey?"redo":"undo"}function o(e){return h&&e.shiftKey?null:r(e)?"delete-word":"delete"}function s(e){return f(e)&&u?"backspace-to-start-of-line":r(e)?"backspace-word":"backspace"}function a(e){switch(e.keyCode){case 66:return f(e)?"bold":null;case 68:return g(e)?"delete":null;case 72:return g(e)?"backspace":null;case 73:return f(e)?"italic":null;case 74:return f(e)?"code":null;case 75:return!h&&g(e)?"secondary-cut":null;case 77:return g(e)?"split-block":null;case 79:return g(e)?"split-block":null;case 84:return u&&g(e)?"transpose-characters":null;case 85:return f(e)?"underline":null;case 87:return u&&g(e)?"backspace-word":null;case 89:return g(e)?h?"redo":"secondary-paste":null;case 90:return i(e)||null;case c.RETURN:return"split-block";case c.DELETE:return o(e);case c.BACKSPACE:return s(e);case c.LEFT:return d&&f(e)?"move-selection-to-start-of-block":null;case c.RIGHT:return d&&f(e)?"move-selection-to-end-of-block":null;default:return null}}var l=n(232),c=n(354),p=n(344),u=p.isPlatform("Mac OS X"),h=p.isPlatform("Windows"),d=u&&p.isBrowser("Firefox < 29"),f=l.hasCommandModifier,g=l.isCtrlKeyCommand;e.exports=a},function(e,t,n){"use strict";function r(e){var t=e.getSelection();if(!t.rangeCount)return null;var n=t.getRangeAt(0),r=i(n),o=r.top,s=r.right,a=r.bottom,l=r.left;return 0===o&&0===s&&0===a&&0===l?null:r}var i=n(297);e.exports=r},function(e,t,n){var r=function(e){return e===Object(e)},i=function(){for(var e={},t=0;t<arguments.length;t++){var n=arguments[t];if(n)for(var r in n)e[r]=n[r]}return e},o=function(e){return r(e)?Array.isArray(e)?e.slice():i(e):e};e.exports={isObject:r,merge:i,clone:o}},function(e,t,n){var r=function(e,t){return e[t]},i=function(e,t,n){var r=e.splice();return r[t]=n,r},o=function(e,t,n){var r=e.slice();return r[t]=n(e[t]),r},s=function(e,t){var n=e.slice();return n.splice(t,1),n};e.exports={get:r,set:i,mod:o,del:s}},function(e,t,n){var r=n(241).clone,i=function(e,t){return e[t]},o=function(e,t,n){var i=r(e);return i[t]=n,i},s=function(e,t,n){var i=r(e);return i[t]=n(e[t]),i},a=function(e,t){var n=r(e);return delete n[t],n};e.exports={get:i,set:o,mod:s,del:a}},function(e,t,n){var r=function(e,t){return e[t]},i=function(e,t,n){var r=e.splice();return r[t]=n,r},o=function(e,t,n){var r=e.splice();return r[t]=n(e[t]),r},s=function(e,t){var n=e.slice();return n.splice(t),n};e.exports={get:r,set:i,mod:o,del:s}},function(e,t,n){"use strict";var r=n(18),i=n(165),o=i.normalizeOptions,s=i.assert,a=n(199).point,l=["add","modify","draw","remove","onMoveStart","onMove","onMoveEnd","onClick"],c={cursor:null},p={added:!1,isHovering:!1,isMouseOver:!1,isDragging:!1,mouseTarget:null},u=function(e,t){r.extend(this,{graphie:e,state:{id:r.uniqueId("movable")}}),this.modify(r.extend({},p,t))};i.createGettersFor(u,r.extend({},c,p)),i.addMovableHelperMethodsTo(u),r.extend(u.prototype,{cloneState:function(){return r.clone(this.state)},_createDefaultState:function(){return r.extend({id:this.state.id,add:[],modify:[],draw:[],remove:[],onMoveStart:[],onMove:[],onMoveEnd:[],onClick:[]},c)},modify:function(e){this.update(r.extend({},this._createDefaultState(),e))},grab:function(e){s(a.is(e));var t=this,n=t.graphie,r=t.state;r.isHovering=!0,r.isDragging=!0,n.isDragging=!0;var i=e,o=i;t._fireEvent(r.onMoveStart,i,i);var l=function(e){e.preventDefault();var i=n.getMouseCoord(e);t._fireEvent(r.onMove,i,o),t.draw(),o=i},c=function e(s){$(document).unbind("vmousemove",l),$(document).unbind("vmouseup",e),r.isHovering&&t._fireEvent(r.onClick,o,i),r.isHovering=t.state.isMouseOver,r.isDragging=!1,n.isDragging=!1,t._fireEvent(r.onMoveEnd,o,i),t.draw()};$(document).bind("vmousemove",l),$(document).bind("vmouseup",c)},update:function(e){var t=this,n=t.graphie,i=t.cloneState(),s=r.extend(t.state,o(l,e));if(s.mouseTarget&&!i.mouseTarget){var a;a=s.mouseTarget.getMouseTarget?$(s.mouseTarget.getMouseTarget()):$(s.mouseTarget[0]);var c=!("ontouchstart"in window);c&&(a.on("vmouseover",function(){s.isMouseOver=!0,n.isDragging||(s.isHovering=!0),t.state.added&&t.draw()}),a.on("vmouseout",function(){s.isMouseOver=!1,s.isDragging||(s.isHovering=!1),t.state.added&&t.draw()})),a.on("vmousedown",function(e){if(0===e.which||1===e.which){e.preventDefault();var r=n.getMouseCoord(e);t.grab(r)}})}if(s.mouseTarget&&void 0!==s.cursor){var a;a=s.mouseTarget.getMouseTarget?$(s.mouseTarget.getMouseTarget()):$(s.mouseTarget[0]),a.css("cursor",s.cursor||"")}s.added||(t._fireEvent(s.modify,t.cloneState(),{}),s.added=!0,t.prevState=t.cloneState()),t._fireEvent(s.modify,t.cloneState(),t.prevState)},remove:function(){this.state.added=!1,this._fireEvent(this.state.remove),this.state.mouseTarget&&($(this.state.mouseTarget).off(),this.state.mouseTarget.remove(),this.state.mouseTarget=null)},toBack:function(){this.state.mouseTarget&&this.state.mouseTarget.toBack()},toFront:function(){this.state.mouseTarget&&this.state.mouseTarget.toFront()}}),e.exports=u},function(e,t,n){"use strict";var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},i=n(18),o=n(302),s=n(258),a=n(165),l=n(81),c=a.assert,p=a.normalizeOptions,u=n(199).point,h=n(199).vector,d=n(190),f=n(256).processMath,g=n(35),m=g.iconTrash,v=n(17),y=n(19),b=n(36),E=i.keys(o),T={coord:[0,0],pointSize:4,static:!1,cursor:"move",normalStyle:null,highlightStyle:null,shadow:!1,tooltip:!1},w={added:!1,hasMoved:!1,visibleShape:null,outOfBounds:!1,mouseTarget:null,touchOffset:null},x=[],C=function(e,t,n){i.extend(this,{graphie:e,movable:t,state:{id:i.uniqueId("movablePoint")}}),this.modify(i.extend({},w,n))};i.extend(C,o),a.createGettersFor(C,i.extend({},T,w)),a.addMovableHelperMethodsTo(C),i.extend(C.prototype,{cloneState:function(){return i.extend(this.movable.cloneState(),this.state)},_createDefaultState:function(){return i.extend({id:this.state.id},p(E,l.pluck(o,"standard")),T)},modify:function(e){this.update(i.extend(this._createDefaultState(),e))},_showTooltip:function(e){var t=this;this._tooltip||(this._tooltip=document.createElement("div"),this._tooltip.className="tooltip-content",this.state.visibleShape.wrapper.className="tooltip",this.state.visibleShape.wrapper.appendChild(this._tooltip),x.push(function(){t.state.added&&t._hideTooltip()})),this._tooltip.firstChild&&this._tooltip.removeChild(this._tooltip.firstChild),this.state.visibleShape.wrapper.className="tooltip visible",this._tooltip.appendChild(document.createElement("span")),"string"==typeof e?f(this._tooltip.firstChild,e,!1):"function"==typeof e?e(this._tooltip.firstChild):this._tooltip.firstChild.appendChild(e)},_hideTooltip:function(){this._tooltip&&(this.state.visibleShape.wrapper.className="tooltip")},update:function(e){var t=this,n=this,o=n.graphie,a=i.extend(n.state,p(E,e));c(u.is(a.coord));var l=a.static?d.DYNAMIC:d.INTERACTIVE;if(a.normalStyle=i.extend({fill:l,stroke:l,scale:1},a.normalStyle),a.highlightStyle=i.extend({fill:d.INTERACTING,stroke:d.INTERACTING,scale:2},a.highlightStyle),!a.static&&!a.mouseTarget){var f=n.state.coord,g=o.unscaleVector(24),e={mouselayer:!0,padding:0};a.mouseTarget=new s(o,f,g,e),a.mouseTarget.attr({fill:"#000",opacity:0})}var T=function(){t._showTooltip(function(e){y.render(v.createElement("span",{style:{fontSize:"2em"}},v.createElement(b,r({},m,{style:{position:"static",color:d.INTERACTIVE,marginLeft:9,marginRight:9}}))),e)})},w=a.coord;n.movable.modify(i.extend({},a,{add:null,modify:null,draw:n.draw.bind(n),remove:null,onMoveStart:function(e){if(a.hasMoved=!1,w=a.coord,null==a.touchOffset){var r=!("ontouchstart"in window);a.touchOffset=r?[0,0]:h.subtract(w,e)}var i=a.visibleShape.wrapper;if(a.shadow){var o="none";i.style.webkitFilter=o,i.style.filter=o}if(a.showHairlines&&a.showHairlines(a.coord),x.forEach(function(e){return e()}),a.tooltip&&(a.xOnlyTooltip?t._showTooltip(""+a.coord[0]):t._showTooltip("("+a.coord[0]+", "+a.coord[1]+")"),a.shadow)){var s=i.getElementsByClassName("tooltip-content")[0],l="drop-shadow(0px 0px 5px rgba(0, 0, 0, 0.5))";s.style.webkitFilter=l,s.style.filter=l}n._fireEvent(a.onMoveStart,w,w),n.draw()},onMove:function(e,r){var i=h.add(e,a.touchOffset);n.moveTo(i),a.showHairlines&&(t.state.outOfBounds?a.hideHairlines():a.showHairlines(a.coord)),a.tooltip&&(t.state.outOfBounds||(a.xOnlyTooltip?t._showTooltip(""+a.coord[0]):t._showTooltip("("+a.coord[0]+", "+a.coord[1]+")"))),a.onRemove&&t.state.outOfBounds&&T()},onMoveEnd:function(){n.isHovering()&&!a.hasMoved&&n._fireEvent(a.onClick,a.coord,w);var e=a.visibleShape.wrapper;if(a.shadow){var r="drop-shadow(0px 0px 5px rgba(0, 0, 0, 0.5))";e.style.webkitFilter=r,e.style.filter=r}if(a.hideHairlines&&a.hideHairlines(),a.hasMoved)t._hideTooltip();else if(a.onRemove){T();var i=e.getElementsByClassName("tooltip-content")[0];i.style.webkitFilter="none",i.style.filter="none",t._tooltip.firstChild.addEventListener("touchstart",function(e){e.stopPropagation()},!0),t._tooltip.firstChild.addEventListener("touchend",function(e){a.onRemove(),e.stopPropagation()},!0)}else a.tooltip&&t._hideTooltip();a.outOfBounds&&a.onRemove(),n._fireEvent(a.onMoveEnd,a.coord,w),a.hasMoved=!1,a.touchOffset=null,n.draw()}})),a.added||(n.prevState={},n._fireEvent(a.add,n.cloneState(),n.prevState),a.added=!0,n.prevState=n.cloneState()),n._fireEvent(a.modify,n.cloneState(),n.prevState)},remove:function(){this.state.added=!1,this._fireEvent(this.state.remove),this.movable&&this.movable.remove(),this.state.mouseTarget=null},constrain:function(){var e=this._applyConstraints(this.coord(),this.coord());return u.is(e)&&this.setCoord(e),e!==!1},setCoord:function(e){c(u.is(e,2)),this.state.coord=i.clone(e),this.draw()},setCoordConstrained:function(e){c(u.is(e,2));var t=this._applyConstraints(e,this.coord());t!==!1&&(this.state.coord=i.clone(t),this.draw())},moveTo:function(e){var t=this,n=this.state;this.state.outOfBounds=!1;var r=this._applyConstraints(e,n.coord,n.onRemove?{onOutOfBounds:function(){t.state.outOfBounds=!0}}:{});if(r!==!1&&(u.is(r)&&(e=r),!u.equal(e,n.coord))){var i=n.coord;n.coord=e,n.hasMoved=!0,this._fireEvent(n.onMove,n.coord,i),this.draw()}},normalStyle:function(){return i.clone(this.state.normalStyle)},highlightStyle:function(){return i.clone(this.state.highlightStyle);
},toBack:function(){this.movable.toBack(),this.state.visibleShape&&this.state.visibleShape.toBack()},toFront:function(){this.state.visibleShape&&this.state.visibleShape.toFront(),this.movable.toFront()},isHovering:function(){return this.movable.isHovering()},isDragging:function(){return this.movable.isDragging()},mouseTarget:function(){return this.movable.mouseTarget()},grab:function(e){this.state.touchOffset=[0,0],this.movable.grab(e),this.moveTo(e)}}),e.exports=C},function(e,t,n){"use strict";var r=n(18),i=n(303),o=n(189),s=n(165),a=n(81),l=s.assert,c=s.normalizeOptions,p=n(199).vector,u=n(190),h=["add","draw","remove","onMoveStart","constraints","onMove","onMoveEnd"],d={points:null,static:!1,cursor:"move",normalStyle:null,highlightStyle:null,extendLine:!1,extendRay:!1},f={visibleShape:null,mouseTarget:null},g=function(e,t,n){l(null!=e),l(null!=n),r.extend(this,{graphie:e,movable:t,state:{id:r.uniqueId("movableLine")}}),this.modify(r.extend({},f,n))};r.extend(g,i),s.createGettersFor(g,r.extend({},d,f)),s.addMovableHelperMethodsTo(g),r.extend(g.prototype,{cloneState:function(){return r.extend(this.movable.cloneState(),{coords:this.coords()},this.state)},_createDefaultState:function(){return r.extend({id:this.state.id},c(h,a.pluck(i,"standard")),d)},modify:function(e){this.update(r.extend(this._createDefaultState(),e))},update:function(e){var t=this,n=this.graphie,i=t.state=r.extend(t.state,c(h,e)),s=i.static?u.DYNAMIC:u.INTERACTIVE;if(i.normalStyle=r.extend({stroke:s,"stroke-width":2},i.normalStyle),i.highlightStyle=r.extend({stroke:u.INTERACTING,"stroke-width":3},i.highlightStyle),!i.static&&!i.mouseTarget){var e={thickness:30,mouselayer:!0};i.mouseTarget=new o(n,this.coord(0),this.coord(1),e),i.mouseTarget.attr({fill:"#000",opacity:0})}i.static&&i.mouseTarget&&(i.mouseTarget.remove(),i.mouseTarget=null),t.movable.modify(r.extend({},i,{mouseTarget:i.mouseTarget,add:null,modify:null,draw:t.draw.bind(t),remove:null,onMoveStart:function(){t._initialRefCoord=t.coord(0),t._prevRefCoord=t._initialRefCoord,t._totalDelta=[0,0],t._fireEvent(t.state.onMoveStart,t.coord(0),t.coord(0))},onMove:function(e,n){var r=p.subtract(e,n);t._totalDelta=p.add(t._totalDelta,r);var i=p.add(t._initialRefCoord,t._totalDelta);i=t._applyConstraints(i,t._prevRefCoord),i!==!1&&(t._fireEvent(t.state.onMove,i,t._prevRefCoord),t._prevRefCoord=i)},onMoveEnd:function(){t._fireEvent(t.state.onMoveEnd,t._prevRefCoord,t._initialRefCoord)}})),i.added||(t.prevState={},t._fireEvent(i.add,t.cloneState(),t.prevState),i.added=!0,r.invoke(i.points,"listen","onMove",i.id,t.draw.bind(t)),t.prevState=t.cloneState()),t._fireEvent(i.modify,t.cloneState(),t.prevState)},coords:function(){return r.invoke(this.state.points,"coord")},point:function(e){return this.state.points[e]},coord:function(e){return this.point(e).coord()},remove:function(){this.state.added=!1,this._fireEvent(this.state.remove),this.points&&r.invoke(this.points,"unlisten","onMove",this.state.id),this.movable&&this.movable.remove()},toBack:function(){this.movable.toBack(),this.state.visibleShape&&this.state.visibleShape.toBack()},toFront:function(){this.state.visibleShape&&this.state.visibleShape.toFront(),this.movable.toFront()},isHovering:function(){return this.movable.isHovering()},isDragging:function(){return this.movable.isDragging()},mouseTarget:function(){return this.movable.mouseTarget()}}),e.exports=g},function(e,t,n){"use strict";var r=n(199).vector,i=n(18),o=n(304),s=n(165),a=n(81),l=s.assert,c=s.normalizeOptions,p=n(190),u=n(166),h=i.keys(o),d={points:null,angleLabels:[],showRightAngleMarkers:[],sideLabels:[],vertexLabels:[],numArcs:[],numArrows:[],numTicks:[],closed:!0,static:!1,cursor:"move",normalStyle:null,highlightStyle:null,labelStyle:null},f={added:!1,hasMoved:!1,visibleShape:null,mouseTarget:null},g=function(e,t,n){l(null!=e),l(null!=n),i.extend(this,{graphie:e,movable:t,state:{id:i.uniqueId("movablePolygon")}}),this.modify(i.extend({},f,n))};i.extend(g,o),s.createGettersFor(g,i.extend({},d,f)),s.addMovableHelperMethodsTo(g),i.extend(g.prototype,{cloneState:function(){return i.extend(this.movable.cloneState(),this.state)},_createDefaultState:function(){return i.extend({id:this.state.id},c(h,a.pluck(o,"standard")),d)},modify:function(e){this.update(i.extend(this._createDefaultState(),e))},update:function(e){var t=this,n=t.graphie,o=i.extend(t.state,c(h,e)),s=o.static?p.DYNAMIC:p.INTERACTIVE;o.normalStyle=i.extend({},o.normalStyle,{"stroke-width":2,"fill-opacity":0,fill:s,stroke:s},e.normalStyle),o.highlightStyle=i.extend({},{stroke:p.INTERACTING,"stroke-width":2,fill:p.INTERACTING,"fill-opacity":.05},o.highlightStyle),o.labelStyle=i.extend({},{stroke:p.DYNAMIC,"stroke-width":1,color:p.DYNAMIC},o.labelStyle),o.static||o.mouseTarget||(o.mouseTarget=n.mouselayer.path(this.path()),o.mouseTarget.attr({fill:"#000",opacity:0,cursor:"move"})),t.movable.modify(i.extend({},o,{modify:null,draw:t.draw.bind(t),remove:null,onMoveStart:function(){t._initialRefCoord=t.coord(0),t._prevRefCoord=t._initialRefCoord,t._totalDelta=[0,0],t._fireEvent(t.state.onMoveStart,t.coord(0),t.coord(0))},onMove:function(e,n){var i=r.subtract(e,n);t._totalDelta=r.add(t._totalDelta,i);var o=r.add(t._initialRefCoord,t._totalDelta);o=t._applyConstraints(o,t._prevRefCoord),o!==!1&&(t._fireEvent(t.state.onMove,o,t._prevRefCoord),t._prevRefCoord=o)},onMoveEnd:function(){t._fireEvent(t.state.onMoveEnd,t._prevRefCoord,t._initialRefCoord)}})),i.invoke(o.points,"listen","onMove",o.id,t.draw.bind(t)),o.added||(t.prevState={},t._fireEvent(o.add,t.cloneState(),t.prevState),o.added=!0,t.prevState=t.cloneState()),t._fireEvent(o.modify,t.cloneState(),t.prevState)},path:function(e){var t=this.graphie;e=e||this.state;var n=i.map(e.points,function(e){return t.scalePoint(e.coord())});return e.closed?n.push(!0):n=n.concat(i.clone(n).reverse()),u.unscaledSvgPath(n)},coords:function(){return i.invoke(this.state.points,"coord")},point:function(e){return this.state.points[e]},coord:function(e){return this.point(e).coord()},remove:function(){this.state.added=!1,this._fireEvent(this.state.remove),this.state.points&&i.invoke(this.state.points,"unlisten","onMove",this.state.id),this.movable&&this.movable.remove(),this.state.mouseTarget=null},constrain:function(){if(null!=this.points&&0!==this.points.length){var e=this.coord(0),t=this._applyConstraints(e,e);t!==!1&&this._fireEvent(this.state.onMove,t,e)}},normalStyle:function(){return i.clone(this.state.normalStyle)},highlightStyle:function(){return i.clone(this.state.highlightStyle)},toBack:function(){this.movable.toBack(),this.state.visibleShape&&this.state.visibleShape.toBack()},toFront:function(){this.state.visibleShape&&this.state.visibleShape.toFront(),this.movable.toFront()},isHovering:function(){return this.movable.isHovering()},isDragging:function(){return this.movable.isDragging()},mouseTarget:function(){return this.movable.mouseTarget()}}),e.exports=g},function(e,t,n){"use strict";var r=n(18),i=n(165),o=n(81),s=n(199).vector,a=["attr","animate"],l=r.extend({transform:function(e){var t=i.getPrefixedTransform();this.wrapper.style[t]=e},toFront:function(){var e=this.wrapper.parentNode;e&&e.appendChild(this.wrapper)},toBack:function(){var e=this.wrapper.parentNode;e.firstChild!==this.wrapper&&e.insertBefore(this.wrapper,e.firstChild)},remove:function(){this.visibleShape.remove(),$(this.wrapper).remove()},getMouseTarget:function(){return this.visibleShape[0]},moveTo:function(e){var t=s.subtract(this.graphie.scalePoint(e),this.graphie.scalePoint(this.initialPoint)),n=i.getCanUse3dTransform(),r="translateX("+t[0]+"px) translateY("+t[1]+"px)"+(n?" translateZ(0)":"");this.transform(r)},hide:function(){this.visibleShape.hide()},show:function(){this.visibleShape.show()}},o.mapObjectFromArray(a,function(e){return function(){this.visibleShape[e].apply(this.visibleShape,arguments)}}));e.exports=l},function(e,t,n){var r=n(18),i=1e-9,o=Math.pow(2,-42),s={DEFAULT_TOLERANCE:i,EPSILON:o,is:function(e){return r.isNumber(e)&&!r.isNaN(e)},equal:function(e,t,n){return null==e||null==t?e===t:e===t||(null==n&&(n=i),Math.abs(e-t)<n)},sign:function(e,t){return s.equal(e,0,t)?0:Math.abs(e)/e},isInteger:function(e,t){return s.equal(Math.round(e),e,t)},round:function(e,t){var n=Math.pow(10,t);return Math.round(e*n)/n},roundTo:function(e,t){return Math.round(e/t)*t},floorTo:function(e,t){return Math.floor(e/t)*t},ceilTo:function(e,t){return Math.ceil(e/t)*t},toFraction:function(e,t,n){n=n||1e3,t=t||o;for(var r=[1,0],i=[0,1],a=Math.floor(e),l=e-a;i[0]<=n;){if(s.equal(r[0]/i[0],e,t))return[r[0],i[0]];r=[a*r[0]+r[1],r[0]],i=[a*i[0]+i[1],i[0]],a=Math.floor(1/l),l=1/l-a}return[e,1]}};e.exports=s},function(e,t,n){function r(e){return o.reduce(e,function(e,t){return e+t},0)}function i(e){return o.reduce(e,function(e,t){return e*t},1)}var o=n(18),s=n(250),a={is:function(e,t){return!!o.isArray(e)&&((void 0===t||e.length===t)&&o.all(e,s.is))},normalize:function(e){return a.scale(e,1/a.length(e))},length:function(e){return Math.sqrt(a.dot(e,e))},dot:function(e,t){var n=o.toArray(arguments),s=o.zip.apply(o,n),a=o.map(s,i);return r(a)},add:function(){var e=o.toArray(arguments),t=o.zip.apply(o,e);return o.map(t,r)},subtract:function(e,t){return o.map(o.zip(e,t),function(e){return e[0]-e[1]})},negate:function(e){return o.map(e,function(e){return-e})},scale:function(e,t){return o.map(e,function(e){return e*t})},equal:function(e,t,n){return o.all(o.zip(e,t),function(e){return s.equal(e[0],e[1],n)})},codirectional:function(e,t,n){return!(!s.equal(a.length(e),0,n)&&!s.equal(a.length(t),0,n))||(e=a.normalize(e),t=a.normalize(t),a.equal(e,t,n))},collinear:function(e,t,n){return a.codirectional(e,t,n)||a.codirectional(e,a.negate(t),n)},polarRadFromCart:function(e){var t=a.length(e),n=Math.atan2(e[1],e[0]);return n<0&&(n+=2*Math.PI),[t,n]},polarDegFromCart:function(e){var t=a.polarRadFromCart(e);return[t[0],180*t[1]/Math.PI]},cartFromPolarRad:function(e,t){return o.isUndefined(t)&&(t=e[1],e=e[0]),[e*Math.cos(t),e*Math.sin(t)]},cartFromPolarDeg:function(e,t){return o.isUndefined(t)&&(t=e[1],e=e[0]),a.cartFromPolarRad(e,t*Math.PI/180)},rotateRad:function(e,t){var n=a.polarRadFromCart(e),r=n[1]+t;return a.cartFromPolarRad(n[0],r)},rotateDeg:function(e,t){var n=a.polarDegFromCart(e),r=n[1]+t;return a.cartFromPolarDeg(n[0],r)},angleRad:function(e,t){return Math.acos(a.dot(e,t)/(a.length(e)*a.length(t)))},angleDeg:function(e,t){return 180*a.angleRad(e,t)/Math.PI},projection:function(e,t){var n=a.dot(e,t)/a.dot(t,t);return a.scale(t,n)},round:function(e,t){return o.map(e,function(e,n){return s.round(e,t[n]||t)})},roundTo:function(e,t){return o.map(e,function(e,n){return s.roundTo(e,t[n]||t)})},floorTo:function(e,t){return o.map(e,function(e,n){return s.floorTo(e,t[n]||t)})},ceilTo:function(e,t){return o.map(e,function(e,n){return s.ceilTo(e,t[n]||t)})}};e.exports=a},function(e,t,n){var r=n(18),i=n(251),o=n(250),s={rotateRad:function(e,t,n){return void 0===n?i.rotateRad(e,t):i.add(n,i.rotateRad(i.subtract(e,n),t))},rotateDeg:function(e,t,n){return void 0===n?i.rotateDeg(e,t):i.add(n,i.rotateDeg(i.subtract(e,n),t))},distanceToPoint:function(e,t){return i.length(i.subtract(e,t))},distanceToLine:function(e,t){var n=i.subtract(t[1],t[0]),r=i.subtract(e,t[0]),o=i.projection(r,n),s=i.subtract(o,r);return i.length(s)},reflectOverLine:function(e,t){var n=i.subtract(t[1],t[0]),r=i.subtract(e,t[0]),o=i.projection(r,n),s=i.subtract(i.scale(o,2),r);return i.add(t[0],s)},compare:function(e,t,n){if(e.length!==t.length)return e.length-t.length;for(var r=0;r<e.length;r++)if(!o.equal(e[r],t[r],n))return e[r]-t[r];return 0}};r.extend(s,{is:i.is,addVector:i.add,addVectors:i.add,subtractVector:i.subtract,equal:i.equal,polarRadFromCart:i.polarRadFromCart,polarDegFromCart:i.polarDegFromCart,cartFromPolarRad:i.cartFromPolarRad,cartFromPolarDeg:i.cartFromPolarDeg,round:i.round,roundTo:i.roundTo,floorTo:i.floorTo,ceilTo:i.ceilTo}),e.exports=s},function(e,t,n){var r=n(252),i=n(251),o={distanceToPoint:function(e,t){return r.distanceToLine(t,e)},reflectPoint:function(e,t){return r.reflectOverLine(t,e)},midpoint:function(e){return[(e[0][0]+e[1][0])/2,(e[0][1]+e[1][1])/2]},equal:function(e,t,n){var o=i.subtract(e[1],e[0]),s=i.subtract(t[1],t[0]);if(!i.collinear(o,s,n))return!1;if(r.equal(e[0],t[0]))return!0;var a=i.subtract(t[0],e[0]);return i.collinear(o,a,n)}};e.exports=o},function(e,t,n){var r=n(251),i=n(252),o={equal:function(e,t,n){var o=r.subtract(e[1],e[0]),s=r.subtract(t[1],t[0]),a=i.equal(e[0],t[0]),l=r.codirectional(o,s,n);return a&&l}};e.exports=o},function(e,t,n){!function(){function e(){if(e.is(arguments[0],z)){for(var t=arguments[0],n=Xe[b](e,t.splice(0,3+e.is(t[0],F))),r=n.set(),i=0,o=t[M];i<o;i++){var s=t[i]||{};p[d](s.type)&&r[H](n[s.type]().attr(s))}return r}return Xe[b](e,arguments)}function t(){for(var e=[],t=0;t<32;t++)e[t]=(~~(16*N.random()))[q](16);return e[12]=4,e[16]=(3&e[16]|8)[q](16),"r-"+e[_]("")}function n(e,t,n){function r(){var i=Array[h].slice.call(arguments,0),o=i[_]("►"),s=r.cache=r.cache||{},a=r.count=r.count||[];return s[d](o)?n?n(s[o]):s[o]:(a[M]>=1e3&&delete s[a.shift()],a[H](o),s[o]=e[b](t,i),n?n(s[o]):s[o])}return r}function r(t,n,r,i,o){return o?e.format("M{0},{1}l{2},0a{3},{3},0,0,1,{3},{3}l0,{5}a{3},{3},0,0,1,{4},{3}l{6},0a{3},{3},0,0,1,{4},{4}l0,{7}a{3},{3},0,0,1,{3},{4}z",t+o,n,r-2*o,o,-o,i-2*o,2*o-r,2*o-i):e.format("M{0},{1}l{2},0,0,{3},{4},0z",t,n,r,i,-r)}function i(){return this.x+x+this.y}function o(t){return function(n,r,i,o){var s={back:t};return e.is(i,"function")?o=i:s.rot=i,n&&n.constructor==We&&(n=n.attrs.path),n&&(s.along=n),this.animate(s,r,o)}}function s(e,t,n,r,i,o){function s(e){return((u*e+p)*e+c)*e}function a(e,t){var n=l(e,t);return((f*n+d)*n+h)*n}function l(e,t){var n,r,i,o,a,l;for(i=e,l=0;l<8;l++){if(o=s(i)-e,R(o)<t)return i;if(a=(3*u*i+2*p)*i+c,R(a)<1e-6)break;i-=o/a}if(n=0,r=1,i=e,i<n)return n;if(i>r)return r;for(;n<r;){if(o=s(i),R(o-e)<t)return i;e>o?n=i:r=i,i=(r-n)/2+n}return i}var c=3*t,p=3*(r-t)-c,u=1-c-p,h=3*n,d=3*(i-n)-h,f=1-h-d;return a(e,1/(200*o))}var a;a="".trim?function(e,t,n){e.setAttribute(t,String(n).trim())}:function(e,t,n){e.setAttribute(t,String(n))},e.version="1.5.2";var l,c=/[, ]+/,p={circle:1,rect:1,path:1,ellipse:1,text:1,image:1},u=/\{(\d+)\}/g,h="prototype",d="hasOwnProperty",f=document,g=window,m={was:Object[h][d].call(g,"Raphael"),is:g.Raphael},v=function(){this.customAttributes={}},y="appendChild",b="apply",E="concat",T="createTouch"in f,w="",x=" ",C=String,S="split",P="click dblclick mousedown mousemove mouseout mouseover mouseup touchstart touchmove touchend orientationchange touchcancel gesturestart gesturechange gestureend"[S](x),k={mousedown:"touchstart",mousemove:"touchmove",mouseup:"touchend"},_="join",M="length",O=C[h].toLowerCase,N=Math,I=N.max,A=N.min,R=N.abs,D=N.pow,L=N.PI,F="number",B="string",z="array",q="toString",U="fill",W=Object[h][q],H="push",j=/^url\(['"]?([^\)]+?)['"]?\)$/i,V=/^\s*((#[a-f\d]{6})|(#[a-f\d]{3})|rgba?\(\s*([\d\.]+%?\s*,\s*[\d\.]+%?\s*,\s*[\d\.]+(?:%?\s*,\s*[\d\.]+)?)%?\s*\)|hsba?\(\s*([\d\.]+(?:deg|\xb0|%)?\s*,\s*[\d\.]+%?\s*,\s*[\d\.]+(?:%?\s*,\s*[\d\.]+)?)%?\s*\)|hsla?\(\s*([\d\.]+(?:deg|\xb0|%)?\s*,\s*[\d\.]+%?\s*,\s*[\d\.]+(?:%?\s*,\s*[\d\.]+)?)%?\s*\))\s*$/i,G={NaN:1,Infinity:1,"-Infinity":1},K=/^(?:cubic-)?bezier\(([^,]+),([^,]+),([^,]+),([^\)]+)\)/,$=N.round,Y=parseFloat,X=parseInt,J=" progid:DXImageTransform.Microsoft",Q=C[h].toUpperCase,Z={blur:0,"clip-rect":"0 0 1e9 1e9",cursor:"default",cx:0,cy:0,fill:"#fff","fill-opacity":1,font:'10px "Arial"',"font-family":'"Arial"',"font-size":"10","font-style":"normal","font-weight":400,gradient:0,height:0,href:"http://raphaeljs.com/",opacity:1,path:"M0,0",r:0,rotation:0,rx:0,ry:0,scale:"1 1",src:"",stroke:"#000","stroke-dasharray":"","stroke-linecap":"butt","stroke-linejoin":"butt","stroke-miterlimit":0,"stroke-opacity":1,"stroke-width":1,target:"_blank","text-anchor":"middle",title:"Raphael",translation:"0 0",width:0,x:0,y:0},ee={along:"along",blur:F,"clip-rect":"csv",cx:F,cy:F,fill:"colour","fill-opacity":F,"font-size":F,height:F,opacity:F,path:"path",r:F,rotation:"csv",rx:F,ry:F,scale:"csv",stroke:"colour","stroke-opacity":F,"stroke-width":F,translation:"csv",width:F,x:F,y:F},te="replace",ne=/^(from|to|\d+%?)$/,re=/\s*,\s*/,ie={hs:1,rg:1},oe=/,?([achlmqrstvxz]),?/gi,se=/([achlmqstvz])[\s,]*((-?\d*\.?\d*(?:e[-+]?\d+)?\s*,?\s*)+)/gi,ae=/(-?\d*\.?\d*(?:e[-+]?\d+)?)\s*,?\s*/gi,le=/^r(?:\(([^,]+?)\s*,\s*([^\)]+?)\))?/,ce=function(e,t){return e.key-t.key};if(e.type=g.SVGAngle||f.implementation.hasFeature("http://www.w3.org/TR/SVG11/feature#BasicStructure","1.1")?"SVG":"VML","VML"==e.type){var pe,ue=f.createElement("div");if(ue.innerHTML='<v:shape adj="1"/>',pe=ue.firstChild,pe.style.behavior="url(#default#VML)",!pe||"object"!=typeof pe.adj)return e.type=null;ue=null}e.svg=!(e.vml="VML"==e.type),v[h]=e[h],l=v[h],e._id=0,e._oid=0,e.fn={},e.is=function(e,t){return t=O.call(t),"finite"==t?!G[d](+e):"null"==t&&null===e||t==typeof e||"object"==t&&e===Object(e)||"array"==t&&Array.isArray&&Array.isArray(e)||W.call(e).slice(8,-1).toLowerCase()==t},e.angle=function(t,n,r,i,o,s){if(null==o){var a=t-r,l=n-i;return a||l?(180*(a<0)+180*N.atan(-l/-a)/L+360)%360:0}return e.angle(t,n,o,s)-e.angle(r,i,o,s)},e.rad=function(e){return e%360*L/180},e.deg=function(e){return 180*e/L%360},e.snapTo=function(t,n,r){if(r=e.is(r,"finite")?r:10,e.is(t,z)){for(var i=t.length;i--;)if(R(t[i]-n)<=r)return t[i]}else{t=+t;var o=n%t;if(o<r)return n-o;if(o>t-r)return n-o+t}return n},e.setWindow=function(e){g=e,f=g.document};var he=function(t){if(e.vml){var r,i=/^\s+|\s+$/g;try{var o=new ActiveXObject("htmlfile");o.write("<body>"),o.close(),r=o.body}catch(e){r=createPopup().document.body}var s=r.createTextRange();he=n(function(e){try{r.style.color=C(e)[te](i,w);var t=s.queryCommandValue("ForeColor");return t=(255&t)<<16|65280&t|(16711680&t)>>>16,"#"+("000000"+t[q](16)).slice(-6)}catch(e){return"none"}})}else{var a=f.createElement("i");a.title="Raphaël Colour Picker",a.style.display="none",f.body[y](a),he=n(function(e){return a.style.color=e,f.defaultView.getComputedStyle(a,w).getPropertyValue("color")})}return he(t)},de=function(){return"hsb("+[this.h,this.s,this.b]+")"},fe=function(){return"hsl("+[this.h,this.s,this.l]+")"},ge=function(){return this.hex};e.hsb2rgb=function(t,n,r,i){return e.is(t,"object")&&"h"in t&&"s"in t&&"b"in t&&(r=t.b,n=t.s,t=t.h,i=t.o),e.hsl2rgb(t,n,r/2,i)},e.hsl2rgb=function(t,n,r,i){e.is(t,"object")&&"h"in t&&"s"in t&&"l"in t&&(r=t.l,n=t.s,t=t.h),(t>1||n>1||r>1)&&(t/=360,n/=100,r/=100);var o,s,a,l={},c=["r","g","b"];if(n){o=r<.5?r*(1+n):r+n-r*n,s=2*r-o;for(var p=0;p<3;p++)a=t+1/3*-(p-1),a<0&&a++,a>1&&a--,6*a<1?l[c[p]]=s+6*(o-s)*a:2*a<1?l[c[p]]=o:3*a<2?l[c[p]]=s+(o-s)*(2/3-a)*6:l[c[p]]=s}else l={r:r,g:r,b:r};return l.r*=255,l.g*=255,l.b*=255,l.hex="#"+(16777216|l.b|l.g<<8|l.r<<16).toString(16).slice(1),e.is(i,"finite")&&(l.opacity=i),l.toString=ge,l},e.rgb2hsb=function(t,n,r){if(null==n&&e.is(t,"object")&&"r"in t&&"g"in t&&"b"in t&&(r=t.b,n=t.g,t=t.r),null==n&&e.is(t,B)){var i=e.getRGB(t);t=i.r,n=i.g,r=i.b}(t>1||n>1||r>1)&&(t/=255,n/=255,r/=255);var o,s,a=I(t,n,r),l=A(t,n,r),c=a;if(l==a)return{h:0,s:0,b:a,toString:de};var p=a-l;return s=p/a,o=t==a?(n-r)/p:n==a?2+(r-t)/p:4+(t-n)/p,o/=6,o<0&&o++,o>1&&o--,{h:o,s:s,b:c,toString:de}},e.rgb2hsl=function(t,n,r){if(null==n&&e.is(t,"object")&&"r"in t&&"g"in t&&"b"in t&&(r=t.b,n=t.g,t=t.r),null==n&&e.is(t,B)){var i=e.getRGB(t);t=i.r,n=i.g,r=i.b}(t>1||n>1||r>1)&&(t/=255,n/=255,r/=255);var o,s,a,l=I(t,n,r),c=A(t,n,r),p=(l+c)/2;if(c==l)a={h:0,s:0,l:p};else{var u=l-c;s=p<.5?u/(l+c):u/(2-l-c),o=t==l?(n-r)/u:n==l?2+(r-t)/u:4+(t-n)/u,o/=6,o<0&&o++,o>1&&o--,a={h:o,s:s,l:p}}return a.toString=fe,a},e._path2string=function(){return this.join(",")[te](oe,"$1")},e.getRGB=n(function(t){if(!t||(t=C(t)).indexOf("-")+1)return{r:-1,g:-1,b:-1,hex:"none",error:1};if("none"==t)return{r:-1,g:-1,b:-1,hex:"none"};!(ie[d](t.toLowerCase().substring(0,2))||"#"==t.charAt())&&(t=he(t));var n,r,i,o,s,a,l=t.match(V);return l?(l[2]&&(i=X(l[2].substring(5),16),r=X(l[2].substring(3,5),16),n=X(l[2].substring(1,3),16)),l[3]&&(i=X((s=l[3].charAt(3))+s,16),r=X((s=l[3].charAt(2))+s,16),n=X((s=l[3].charAt(1))+s,16)),l[4]&&(a=l[4][S](re),n=Y(a[0]),"%"==a[0].slice(-1)&&(n*=2.55),r=Y(a[1]),"%"==a[1].slice(-1)&&(r*=2.55),i=Y(a[2]),"%"==a[2].slice(-1)&&(i*=2.55),"rgba"==l[1].toLowerCase().slice(0,4)&&(o=Y(a[3])),a[3]&&"%"==a[3].slice(-1)&&(o/=100)),l[5]?(a=l[5][S](re),n=Y(a[0]),"%"==a[0].slice(-1)&&(n*=2.55),r=Y(a[1]),"%"==a[1].slice(-1)&&(r*=2.55),i=Y(a[2]),"%"==a[2].slice(-1)&&(i*=2.55),("deg"==a[0].slice(-3)||"°"==a[0].slice(-1))&&(n/=360),"hsba"==l[1].toLowerCase().slice(0,4)&&(o=Y(a[3])),a[3]&&"%"==a[3].slice(-1)&&(o/=100),e.hsb2rgb(n,r,i,o)):l[6]?(a=l[6][S](re),n=Y(a[0]),"%"==a[0].slice(-1)&&(n*=2.55),r=Y(a[1]),"%"==a[1].slice(-1)&&(r*=2.55),i=Y(a[2]),"%"==a[2].slice(-1)&&(i*=2.55),("deg"==a[0].slice(-3)||"°"==a[0].slice(-1))&&(n/=360),"hsla"==l[1].toLowerCase().slice(0,4)&&(o=Y(a[3])),a[3]&&"%"==a[3].slice(-1)&&(o/=100),e.hsl2rgb(n,r,i,o)):(l={r:n,g:r,b:i},l.hex="#"+(16777216|i|r<<8|n<<16).toString(16).slice(1),e.is(o,"finite")&&(l.opacity=o),l)):{r:-1,g:-1,b:-1,hex:"none",error:1}},e),e.getColor=function(e){var t=this.getColor.start=this.getColor.start||{h:0,s:1,b:e||.75},n=this.hsb2rgb(t.h,t.s,t.b);return t.h+=.075,t.h>1&&(t.h=0,t.s-=.2,t.s<=0&&(this.getColor.start={h:0,s:1,b:t.b})),n.hex},e.getColor.reset=function(){delete this.start},e.parsePathString=n(function(t){if(!t)return null;var n={a:7,c:6,h:1,l:2,m:2,q:4,s:4,t:2,v:1,z:0},r=[];return e.is(t,z)&&e.is(t[0],z)&&(r=ve(t)),r[M]||C(t)[te](se,function(e,t,i){var o=[],s=O.call(t);for(i[te](ae,function(e,t){t&&o[H](+t)}),"m"==s&&o[M]>2&&(r[H]([t][E](o.splice(0,2))),s="l",t="m"==t?"l":"L");o[M]>=n[s]&&(r[H]([t][E](o.splice(0,n[s]))),n[s]););}),r[q]=e._path2string,r}),e.findDotsAtSegment=function(e,t,n,r,i,o,s,a,l){var c=1-l,p=D(c,3)*e+3*D(c,2)*l*n+3*c*l*l*i+D(l,3)*s,u=D(c,3)*t+3*D(c,2)*l*r+3*c*l*l*o+D(l,3)*a,h=e+2*l*(n-e)+l*l*(i-2*n+e),d=t+2*l*(r-t)+l*l*(o-2*r+t),f=n+2*l*(i-n)+l*l*(s-2*i+n),g=r+2*l*(o-r)+l*l*(a-2*o+r),m=(1-l)*e+l*n,v=(1-l)*t+l*r,y=(1-l)*i+l*s,b=(1-l)*o+l*a,E=90-180*N.atan((h-f)/(d-g))/L;return(h>f||d<g)&&(E+=180),{x:p,y:u,m:{x:h,y:d},n:{x:f,y:g},start:{x:m,y:v},end:{x:y,y:b},alpha:E}};var me=n(function(e){if(!e)return{x:0,y:0,width:0,height:0};e=Se(e);for(var t,n=0,r=0,i=[],o=[],s=0,a=e[M];s<a;s++)if(t=e[s],"M"==t[0])n=t[1],r=t[2],i[H](n),o[H](r);else{var l=Ce(n,r,t[1],t[2],t[3],t[4],t[5],t[6]);i=i[E](l.min.x,l.max.x),o=o[E](l.min.y,l.max.y),n=t[5],r=t[6]}var c=A[b](0,i),p=A[b](0,o);return{x:c,y:p,width:I[b](0,i)-c,height:I[b](0,o)-p}}),ve=function(t){var n=[];e.is(t,z)&&e.is(t&&t[0],z)||(t=e.parsePathString(t));for(var r=0,i=t[M];r<i;r++){n[r]=[];for(var o=0,s=t[r][M];o<s;o++)n[r][o]=t[r][o]}return n[q]=e._path2string,n},ye=n(function(t){e.is(t,z)&&e.is(t&&t[0],z)||(t=e.parsePathString(t));var n=[],r=0,i=0,o=0,s=0,a=0;"M"==t[0][0]&&(r=t[0][1],i=t[0][2],o=r,s=i,a++,n[H](["M",r,i]));for(var l=a,c=t[M];l<c;l++){var p=n[l]=[],u=t[l];if(u[0]!=O.call(u[0]))switch(p[0]=O.call(u[0]),p[0]){case"a":p[1]=u[1],p[2]=u[2],p[3]=u[3],p[4]=u[4],p[5]=u[5],p[6]=+(u[6]-r).toFixed(3),p[7]=+(u[7]-i).toFixed(3);break;case"v":p[1]=+(u[1]-i).toFixed(3);break;case"m":o=u[1],s=u[2];default:for(var h=1,d=u[M];h<d;h++)p[h]=+(u[h]-(h%2?r:i)).toFixed(3)}else{p=n[l]=[],"m"==u[0]&&(o=u[1]+r,s=u[2]+i);for(var f=0,g=u[M];f<g;f++)n[l][f]=u[f]}var m=n[l][M];switch(n[l][0]){case"z":r=o,i=s;break;case"h":r+=+n[l][m-1];break;case"v":i+=+n[l][m-1];break;default:r+=+n[l][m-2],i+=+n[l][m-1]}}return n[q]=e._path2string,n},0,ve),be=n(function(t){e.is(t,z)&&e.is(t&&t[0],z)||(t=e.parsePathString(t));var n=[],r=0,i=0,o=0,s=0,a=0;"M"==t[0][0]&&(r=+t[0][1],i=+t[0][2],o=r,s=i,a++,n[0]=["M",r,i]);for(var l=a,c=t[M];l<c;l++){var p=n[l]=[],u=t[l];if(u[0]!=Q.call(u[0]))switch(p[0]=Q.call(u[0]),p[0]){case"A":p[1]=u[1],p[2]=u[2],p[3]=u[3],p[4]=u[4],p[5]=u[5],p[6]=+(u[6]+r),p[7]=+(u[7]+i);break;case"V":p[1]=+u[1]+i;break;case"H":p[1]=+u[1]+r;break;case"M":o=+u[1]+r,s=+u[2]+i;default:for(var h=1,d=u[M];h<d;h++)p[h]=+u[h]+(h%2?r:i)}else for(var f=0,g=u[M];f<g;f++)n[l][f]=u[f];switch(p[0]){case"Z":r=o,i=s;break;case"H":r=p[1];break;case"V":i=p[1];break;case"M":o=n[l][n[l][M]-2],s=n[l][n[l][M]-1];default:r=n[l][n[l][M]-2],i=n[l][n[l][M]-1]}}return n[q]=e._path2string,n},null,ve),Ee=function(e,t,n,r){return[e,t,n,r,n,r]},Te=function(e,t,n,r,i,o){var s=1/3,a=2/3;return[s*e+a*n,s*t+a*r,s*i+a*n,s*o+a*r,i,o]},we=function(e,t,r,i,o,s,a,l,c,p){var u,h=120*L/180,d=L/180*(+o||0),f=[],g=n(function(e,t,n){var r=e*N.cos(n)-t*N.sin(n),i=e*N.sin(n)+t*N.cos(n);return{x:r,y:i}});if(p)P=p[0],k=p[1],x=p[2],C=p[3];else{u=g(e,t,-d),e=u.x,t=u.y,u=g(l,c,-d),l=u.x,c=u.y;var m=(N.cos(L/180*o),N.sin(L/180*o),(e-l)/2),v=(t-c)/2,y=m*m/(r*r)+v*v/(i*i);y>1&&(y=N.sqrt(y),r=y*r,i=y*i);var b=r*r,T=i*i,w=(s==a?-1:1)*N.sqrt(R((b*T-b*v*v-T*m*m)/(b*v*v+T*m*m))),x=w*r*v/i+(e+l)/2,C=w*-i*m/r+(t+c)/2,P=N.asin(((t-C)/i).toFixed(9)),k=N.asin(((c-C)/i).toFixed(9));P=e<x?L-P:P,k=l<x?L-k:k,P<0&&(P=2*L+P),k<0&&(k=2*L+k),a&&P>k&&(P-=2*L),!a&&k>P&&(k-=2*L)}var O=k-P;if(R(O)>h){var I=k,A=l,D=c;k=P+h*(a&&k>P?1:-1),l=x+r*N.cos(k),c=C+i*N.sin(k),f=we(l,c,r,i,o,0,a,A,D,[k,I,x,C])}O=k-P;var F=N.cos(P),B=N.sin(P),z=N.cos(k),q=N.sin(k),U=N.tan(O/4),W=4/3*r*U,H=4/3*i*U,j=[e,t],V=[e+W*B,t-H*F],G=[l+W*q,c-H*z],K=[l,c];if(V[0]=2*j[0]-V[0],V[1]=2*j[1]-V[1],p)return[V,G,K][E](f);f=[V,G,K][E](f)[_]()[S](",");for(var $=[],Y=0,X=f[M];Y<X;Y++)$[Y]=Y%2?g(f[Y-1],f[Y],d).y:g(f[Y],f[Y+1],d).x;return $},xe=function(e,t,n,r,i,o,s,a,l){var c=1-l;return{x:D(c,3)*e+3*D(c,2)*l*n+3*c*l*l*i+D(l,3)*s,y:D(c,3)*t+3*D(c,2)*l*r+3*c*l*l*o+D(l,3)*a}},Ce=n(function(e,t,n,r,i,o,s,a){var l,c=i-2*n+e-(s-2*i+n),p=2*(n-e)-2*(i-n),u=e-n,h=(-p+N.sqrt(p*p-4*c*u))/2/c,d=(-p-N.sqrt(p*p-4*c*u))/2/c,f=[t,a],g=[e,s];return R(h)>"1e12"&&(h=.5),R(d)>"1e12"&&(d=.5),h>0&&h<1&&(l=xe(e,t,n,r,i,o,s,a,h),g[H](l.x),f[H](l.y)),d>0&&d<1&&(l=xe(e,t,n,r,i,o,s,a,d),g[H](l.x),f[H](l.y)),c=o-2*r+t-(a-2*o+r),p=2*(r-t)-2*(o-r),u=t-r,h=(-p+N.sqrt(p*p-4*c*u))/2/c,d=(-p-N.sqrt(p*p-4*c*u))/2/c,R(h)>"1e12"&&(h=.5),R(d)>"1e12"&&(d=.5),h>0&&h<1&&(l=xe(e,t,n,r,i,o,s,a,h),g[H](l.x),f[H](l.y)),d>0&&d<1&&(l=xe(e,t,n,r,i,o,s,a,d),g[H](l.x),f[H](l.y)),{min:{x:A[b](0,g),y:A[b](0,f)},max:{x:I[b](0,g),y:I[b](0,f)}}}),Se=n(function(e,t){for(var n=be(e),r=t&&be(t),i={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null},o={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null},s=(function(e,t){var n,r;if(!e)return["C",t.x,t.y,t.x,t.y,t.x,t.y];switch(!(e[0]in{T:1,Q:1})&&(t.qx=t.qy=null),e[0]){case"M":t.X=e[1],t.Y=e[2];break;case"A":e=["C"][E](we[b](0,[t.x,t.y][E](e.slice(1))));break;case"S":n=t.x+(t.x-(t.bx||t.x)),r=t.y+(t.y-(t.by||t.y)),e=["C",n,r][E](e.slice(1));break;case"T":t.qx=t.x+(t.x-(t.qx||t.x)),t.qy=t.y+(t.y-(t.qy||t.y)),e=["C"][E](Te(t.x,t.y,t.qx,t.qy,e[1],e[2]));break;case"Q":t.qx=e[1],t.qy=e[2],e=["C"][E](Te(t.x,t.y,e[1],e[2],e[3],e[4]));break;case"L":e=["C"][E](Ee(t.x,t.y,e[1],e[2]));break;case"H":e=["C"][E](Ee(t.x,t.y,e[1],t.y));break;case"V":e=["C"][E](Ee(t.x,t.y,t.x,e[1]));break;case"Z":e=["C"][E](Ee(t.x,t.y,t.X,t.Y))}return e}),a=function(e,t){if(e[t][M]>7){e[t].shift();for(var i=e[t];i[M];)e.splice(t++,0,["C"][E](i.splice(0,6)));e.splice(t,1),p=I(n[M],r&&r[M]||0)}},l=function(e,t,i,o,s){e&&t&&"M"==e[s][0]&&"M"!=t[s][0]&&(t.splice(s,0,["M",o.x,o.y]),i.bx=0,i.by=0,i.x=e[s][1],i.y=e[s][2],p=I(n[M],r&&r[M]||0))},c=0,p=I(n[M],r&&r[M]||0);c<p;c++){n[c]=s(n[c],i),a(n,c),r&&(r[c]=s(r[c],o)),r&&a(r,c),l(n,r,i,o,c),l(r,n,o,i,c);var u=n[c],h=r&&r[c],d=u[M],f=r&&h[M];i.x=u[d-2],i.y=u[d-1],i.bx=Y(u[d-4])||i.x,i.by=Y(u[d-3])||i.y,o.bx=r&&(Y(h[f-4])||o.x),o.by=r&&(Y(h[f-3])||o.y),o.x=r&&h[f-2],o.y=r&&h[f-1]}return r?[n,r]:n},null,ve),Pe=n(function(t){for(var n=[],r=0,i=t[M];r<i;r++){var o={},s=t[r].match(/^([^:]*):?([\d\.]*)/);if(o.color=e.getRGB(s[1]),o.color.error)return null;o.color=o.color.hex,s[2]&&(o.offset=s[2]+"%"),n[H](o)}for(r=1,i=n[M]-1;r<i;r++)if(!n[r].offset){for(var a=Y(n[r-1].offset||0),l=0,c=r+1;c<i;c++)if(n[c].offset){l=n[c].offset;break}l||(l=100,c=i),l=Y(l);for(var p=(l-a)/(c-r+1);r<c;r++)a+=p,n[r].offset=a+"%"}return n}),ke=function(t,n,r,i){var o;return e.is(t,B)||e.is(t,"object")?(o=e.is(t,B)?f.getElementById(t):t,o.tagName?null==n?{container:o,width:o.style.pixelWidth||o.offsetWidth,height:o.style.pixelHeight||o.offsetHeight}:{container:o,width:n,height:r}:void 0):{container:1,x:t,y:n,width:r,height:i}},_e=function(e,t){var n=this;for(var r in t)if(t[d](r)&&!(r in e))switch(typeof t[r]){case"function":!function(t){e[r]=e===n?t:function(){return t[b](n,arguments)}}(t[r]);break;case"object":e[r]=e[r]||{},_e.call(this,e[r],t[r]);break;default:e[r]=t[r]}},Me=function(e,t){e==t.top&&(t.top=e.prev),e==t.bottom&&(t.bottom=e.next),e.next&&(e.next.prev=e.prev),e.prev&&(e.prev.next=e.next)},Oe=function(e,t){t.top!==e&&(Me(e,t),e.next=null,e.prev=t.top,t.top.next=e,t.top=e)},Ne=function(e,t){t.bottom!==e&&(Me(e,t),e.next=t.bottom,e.prev=null,t.bottom.prev=e,t.bottom=e)},Ie=function(e,t,n){Me(e,n),t==n.top&&(n.top=e),t.next&&(t.next.prev=e),e.next=t.next,e.prev=t,t.next=e},Ae=function(e,t,n){Me(e,n),t==n.bottom&&(n.bottom=e),t.prev&&(t.prev.next=e),e.prev=t.prev,t.prev=e,e.next=t},Re=function(e){return function(){throw new Error("Raphaël: you are calling to method “"+e+"” of removed object")}};if(e.pathToRelative=ye,e.svg){l.svgns="http://www.w3.org/2000/svg",l.xlink="http://www.w3.org/1999/xlink",$=function(e){return+e+.5*(~~e===e)};var De=function(e,t){if(!t)return e=f.createElementNS(l.svgns,e),e.style.webkitTapHighlightColor="rgba(0,0,0,0)",e;for(var n in t)t[d](n)&&a(e,n,C(t[n]))};e[q]=function(){return"Your browser supports SVG.\nYou are running Raphaël "+this.version};var Le=function(e,t){var n=De("path");t.canvas&&t.canvas[y](n);var r=new We(n,t);return r.type="path",ze(r,{fill:"none",stroke:"#000",path:e}),r},Fe=function(e,n,r){var i="linear",o=.5,s=.5,a=e.style;if(n=C(n)[te](le,function(e,t,n){if(i="radial",t&&n){o=Y(t),s=Y(n);var r=2*(s>.5)-1;D(o-.5,2)+D(s-.5,2)>.25&&(s=N.sqrt(.25-D(o-.5,2))*r+.5)&&.5!=s&&(s=s.toFixed(5)-1e-5*r)}return w}),n=n[S](/\s*\-\s*/),"linear"==i){var l=n.shift();if(l=-Y(l),isNaN(l))return null;var c=[0,0,N.cos(l*L/180),N.sin(l*L/180)],p=1/(I(R(c[2]),R(c[3]))||1);c[2]*=p,c[3]*=p,c[2]<0&&(c[0]=-c[2],c[2]=0),c[3]<0&&(c[1]=-c[3],c[3]=0)}var u=Pe(n);if(!u)return null;var h=e.getAttribute(U);h=h.match(/^url\(#(.*)\)$/),h&&r.defs.removeChild(f.getElementById(h[1]));var d=De(i+"Gradient");d.id=t(),De(d,"radial"==i?{fx:o,fy:s}:{x1:c[0],y1:c[1],x2:c[2],y2:c[3]}),r.defs[y](d);for(var g=0,m=u[M];g<m;g++){var v=De("stop");De(v,{offset:u[g].offset?u[g].offset:g?"100%":"0%","stop-color":u[g].color||"#fff"}),d[y](v)}return De(e,{fill:"url(#"+d.id+")",opacity:1,"fill-opacity":1}),a.fill=w,a.opacity=1,a.fillOpacity=1,1},Be=function(t){var n=t.getBBox();De(t.pattern,{patternTransform:e.format("translate({0},{1})",n.x,n.y)})},ze=function(n,r){var i={"":[0],none:[0],"-":[3,1],".":[1,1],"-.":[3,1,1,1],"-..":[3,1,1,1,1,1],". ":[1,3],"- ":[4,3],"--":[8,3],"- .":[4,3,1,3],"--.":[8,3,1,3],"--..":[8,3,1,3,1,3]},o=n.node,s=n.attrs,l=n.rotate(),p=function(e,t){if(t=i[O.call(t)]){for(var n=e.attrs["stroke-width"]||"1",s={round:n,square:n,butt:0}[e.attrs["stroke-linecap"]||r["stroke-linecap"]]||0,a=[],l=t[M];l--;)a[l]=t[l]*n+(l%2?1:-1)*s;De(o,{"stroke-dasharray":a[_](",")})}};r[d]("rotation")&&(l=r.rotation);var u=C(l)[S](c);u.length-1?(u[1]=+u[1],u[2]=+u[2]):u=null,Y(l)&&n.rotate(0,!0);for(var h in r)if(r[d](h)){if(!Z[d](h))continue;var g=r[h];switch(s[h]=g,h){case"blur":n.blur(g);break;case"rotation":n.rotate(g,!0);break;case"href":case"title":case"target":var m=o.parentNode;if("a"!=O.call(m.tagName)){var v=De("a");m.insertBefore(v,o),v[y](o),m=v}"target"==h&&"blank"==g?m.setAttributeNS(n.paper.xlink,"show","new"):m.setAttributeNS(n.paper.xlink,h,g);break;case"cursor":o.style.cursor=g;break;case"clip-rect":var b=C(g)[S](c);if(4==b[M]){n.clip&&n.clip.parentNode.parentNode.removeChild(n.clip.parentNode);
var E=De("clipPath"),T=De("rect");E.id=t(),De(T,{x:b[0],y:b[1],width:b[2],height:b[3]}),E[y](T),n.paper.defs[y](E),De(o,{"clip-path":"url(#"+E.id+")"}),n.clip=T}if(!g){var P=f.getElementById(o.getAttribute("clip-path")[te](/(^url\(#|\)$)/g,w));P&&P.parentNode.removeChild(P),De(o,{"clip-path":w}),delete n.clip}break;case"path":"path"==n.type&&De(o,{d:g?s.path=be(g):"M0,0"});break;case"width":if(a(o,h,g),!s.fx)break;h="x",g=s.x;case"x":s.fx&&(g=-s.x-(s.width||0));case"rx":if("rx"==h&&"rect"==n.type)break;case"cx":u&&("x"==h||"cx"==h)&&(u[1]+=g-s[h]),a(o,h,g),n.pattern&&Be(n);break;case"height":if(a(o,h,g),!s.fy)break;h="y",g=s.y;case"y":s.fy&&(g=-s.y-(s.height||0));case"ry":if("ry"==h&&"rect"==n.type)break;case"cy":u&&("y"==h||"cy"==h)&&(u[2]+=g-s[h]),a(o,h,g),n.pattern&&Be(n);break;case"r":"rect"==n.type?De(o,{rx:g,ry:g}):a(o,h,g);break;case"src":"image"==n.type&&o.setAttributeNS(n.paper.xlink,"href",g);break;case"stroke-width":o.style.strokeWidth=g,a(o,h,g),s["stroke-dasharray"]&&p(n,s["stroke-dasharray"]);break;case"stroke-dasharray":p(n,g);break;case"translation":var k=C(g)[S](c);k[0]=+k[0]||0,k[1]=+k[1]||0,u&&(u[1]+=k[0],u[2]+=k[1]),Pt.call(n,k[0],k[1]);break;case"scale":k=C(g)[S](c),n.scale(+k[0]||1,+k[1]||+k[0]||1,isNaN(Y(k[2]))?null:+k[2],isNaN(Y(k[3]))?null:+k[3]);break;case U:var N=C(g).match(j);if(N){E=De("pattern");var I=De("image");E.id=t(),De(E,{x:0,y:0,patternUnits:"userSpaceOnUse",height:1,width:1}),De(I,{x:0,y:0}),I.setAttributeNS(n.paper.xlink,"href",N[1]),E[y](I);var A=f.createElement("img");A.style.cssText="position:absolute;left:-9999em;top-9999em",A.onload=function(){De(E,{width:this.offsetWidth,height:this.offsetHeight}),De(I,{width:this.offsetWidth,height:this.offsetHeight}),f.body.removeChild(this),n.paper.safari()},f.body[y](A),A.src=N[1],n.paper.defs[y](E),o.style.fill="url(#"+E.id+")",De(o,{fill:"url(#"+E.id+")"}),n.pattern=E,n.pattern&&Be(n);break}var R=e.getRGB(g);if(R.error){if(({circle:1,ellipse:1}[d](n.type)||"r"!=C(g).charAt())&&Fe(o,g,n.paper)){s.gradient=g,s.fill="none";break}}else delete r.gradient,delete s.gradient,!e.is(s.opacity,"undefined")&&e.is(r.opacity,"undefined")&&De(o,{opacity:s.opacity}),!e.is(s["fill-opacity"],"undefined")&&e.is(r["fill-opacity"],"undefined")&&De(o,{"fill-opacity":s["fill-opacity"]});R[d]("opacity")&&De(o,{"fill-opacity":R.opacity>1?R.opacity/100:R.opacity});case"stroke":R=e.getRGB(g),a(o,h,R.hex),"stroke"==h&&R[d]("opacity")&&De(o,{"stroke-opacity":R.opacity>1?R.opacity/100:R.opacity});break;case"gradient":(({circle:1,ellipse:1})[d](n.type)||"r"!=C(g).charAt())&&Fe(o,g,n.paper);break;case"opacity":s.gradient&&!s[d]("stroke-opacity")&&De(o,{"stroke-opacity":g>1?g/100:g});case"fill-opacity":if(s.gradient){var D=f.getElementById(o.getAttribute(U)[te](/^url\(#|\)$/g,w));if(D){var L=D.getElementsByTagName("stop");a(L[L[M]-1],"stop-opacity",g)}break}default:"font-size"==h&&(g=X(g,10)+"px");var F=h[te](/(\-.)/g,function(e){return Q.call(e.substring(1))});o.style[F]=g,a(o,h,g)}}Ue(n,r),u?n.rotate(u.join(x)):Y(l)&&n.rotate(l,!0)},qe=1.2,Ue=function(t,n){if("text"==t.type&&(n[d]("text")||n[d]("font")||n[d]("font-size")||n[d]("x")||n[d]("y"))){var r=t.attrs,i=t.node,o=i.firstChild?X(f.defaultView.getComputedStyle(i.firstChild,w).getPropertyValue("font-size"),10):10;if(n[d]("text")){for(r.text=n.text;i.firstChild;)i.removeChild(i.firstChild);for(var s=C(n.text)[S]("\n"),a=0,l=s[M];a<l;a++)if(s[a]){var c=De("tspan");a&&De(c,{dy:o*qe,x:r.x}),c[y](f.createTextNode(s[a])),i[y](c)}}else for(s=i.getElementsByTagName("tspan"),a=0,l=s[M];a<l;a++)a&&De(s[a],{dy:o*qe,x:r.x});De(i,{y:r.y});var p=t.getBBox(),u=r.y-(p.y+p.height/2);u&&e.is(u,"finite")&&De(i,{y:r.y+u})}},We=function(t,n){this[0]=t,this.id=e._oid++,this.node=t,t.raphael=this,this.paper=n,this.attrs=this.attrs||{},this.transformations=[],this._={tx:0,ty:0,rt:{deg:0,cx:0,cy:0},sx:1,sy:1},!n.bottom&&(n.bottom=this),this.prev=n.top,n.top&&(n.top.next=this),n.top=this,this.next=null},He=We[h];We[h].rotate=function(t,n,r){if(this.removed)return this;if(null==t)return this._.rt.cx?[this._.rt.deg,this._.rt.cx,this._.rt.cy][_](x):this._.rt.deg;var i=this.getBBox();return t=C(t)[S](c),t[M]-1&&(n=Y(t[1]),r=Y(t[2])),t=Y(t[0]),null!=n&&n!==!1?this._.rt.deg=t:this._.rt.deg+=t,null==r&&(n=null),this._.rt.cx=n,this._.rt.cy=r,n=null==n?i.x+i.width/2:n,r=null==r?i.y+i.height/2:r,this._.rt.deg?(this.transformations[0]=e.format("rotate({0} {1} {2})",this._.rt.deg,n,r),this.clip&&De(this.clip,{transform:e.format("rotate({0} {1} {2})",-this._.rt.deg,n,r)})):(this.transformations[0]=w,this.clip&&De(this.clip,{transform:w})),De(this.node,{transform:this.transformations[_](x)}),this},We[h].hide=function(){return!this.removed&&(this.node.style.display="none"),this},We[h].show=function(){return!this.removed&&(this.node.style.display=""),this},We[h].remove=function(){if(!this.removed){Me(this,this.paper),this.node.parentNode.removeChild(this.node);for(var e in this)delete this[e];this.removed=!0}},We[h].getBBox=function(){if(this.removed)return this;if("path"==this.type)return me(this.attrs.path);if("none"==this.node.style.display){this.show();var e=!0}var t={};try{t=this.node.getBBox()}catch(e){}finally{t=t||{}}if("text"==this.type){t={x:t.x,y:1/0,width:0,height:0};for(var n=0,r=this.node.getNumberOfChars();n<r;n++){var i=this.node.getExtentOfChar(n);i.y<t.y&&(t.y=i.y),i.y+i.height-t.y>t.height&&(t.height=i.y+i.height-t.y),i.x+i.width-t.x>t.width&&(t.width=i.x+i.width-t.x)}}return e&&this.hide(),t},We[h].attr=function(t,n){if(this.removed)return this;if(null==t){var r={};for(var i in this.attrs)this.attrs[d](i)&&(r[i]=this.attrs[i]);return this._.rt.deg&&(r.rotation=this.rotate()),(1!=this._.sx||1!=this._.sy)&&(r.scale=this.scale()),r.gradient&&"none"==r.fill&&(r.fill=r.gradient)&&delete r.gradient,r}if(null==n&&e.is(t,B))return"translation"==t?Pt.call(this):"rotation"==t?this.rotate():"scale"==t?this.scale():t==U&&"none"==this.attrs.fill&&this.attrs.gradient?this.attrs.gradient:this.attrs[t];if(null==n&&e.is(t,z)){for(var o={},s=0,a=t.length;s<a;s++)o[t[s]]=this.attr(t[s]);return o}if(null!=n){var l={};l[t]=n}else null!=t&&e.is(t,"object")&&(l=t);for(var c in this.paper.customAttributes)if(this.paper.customAttributes[d](c)&&l[d](c)&&e.is(this.paper.customAttributes[c],"function")){var p=this.paper.customAttributes[c].apply(this,[][E](l[c]));this.attrs[c]=l[c];for(var u in p)p[d](u)&&(l[u]=p[u])}return ze(this,l),this},We[h].toFront=function(){if(this.removed)return this;this.node.parentNode[y](this.node);var e=this.paper;return e.top!=this&&Oe(this,e),this},We[h].toBack=function(){if(this.removed)return this;if(this.node.parentNode.firstChild!=this.node){this.node.parentNode.insertBefore(this.node,this.node.parentNode.firstChild),Ne(this,this.paper);this.paper}return this},We[h].insertAfter=function(e){if(this.removed)return this;var t=e.node||e[e.length-1].node;return t.nextSibling?t.parentNode.insertBefore(this.node,t.nextSibling):t.parentNode[y](this.node),Ie(this,e,this.paper),this},We[h].insertBefore=function(e){if(this.removed)return this;var t=e.node||e[0].node;return t.parentNode.insertBefore(this.node,t),Ae(this,e,this.paper),this},We[h].blur=function(e){var n=this;if(0!==+e){var r=De("filter"),i=De("feGaussianBlur");n.attrs.blur=e,r.id=t(),De(i,{stdDeviation:+e||1.5}),r.appendChild(i),n.paper.defs.appendChild(r),n._blur=r,De(n.node,{filter:"url(#"+r.id+")"})}else n._blur&&(n._blur.parentNode.removeChild(n._blur),delete n._blur,delete n.attrs.blur),n.node.removeAttribute("filter")};var je=function(e,t,n,r){var i=De("circle");e.canvas&&e.canvas[y](i);var o=new We(i,e);return o.attrs={cx:t,cy:n,r:r,fill:"none",stroke:"#000"},o.type="circle",De(i,o.attrs),o},Ve=function(e,t,n,r,i,o){var s=De("rect");e.canvas&&e.canvas[y](s);var a=new We(s,e);return a.attrs={x:t,y:n,width:r,height:i,r:o||0,rx:o||0,ry:o||0,fill:"none",stroke:"#000"},a.type="rect",De(s,a.attrs),a},Ge=function(e,t,n,r,i){var o=De("ellipse");e.canvas&&e.canvas[y](o);var s=new We(o,e);return s.attrs={cx:t,cy:n,rx:r,ry:i,fill:"none",stroke:"#000"},s.type="ellipse",De(o,s.attrs),s},Ke=function(e,t,n,r,i,o){var s=De("image");De(s,{x:n,y:r,width:i,height:o,preserveAspectRatio:"none"}),s.setAttributeNS(e.xlink,"href",t),e.canvas&&e.canvas[y](s);var a=new We(s,e);return a.attrs={x:n,y:r,width:i,height:o,src:t},a.type="image",a},$e=function(e,t,n,r){var i=De("text");De(i,{x:t,y:n,"text-anchor":"middle"}),e.canvas&&e.canvas[y](i);var o=new We(i,e);return o.attrs={x:t,y:n,"text-anchor":"middle",text:r,font:Z.font,stroke:"none",fill:"#000"},o.type="text",ze(o,o.attrs),o},Ye=function(e,t){return this.width=e||this.width,this.height=t||this.height,a(this.canvas,"width",this.width),a(this.canvas,"height",this.height),this},Xe=function(){var t=ke[b](0,arguments),n=t&&t.container,r=t.x,i=t.y,o=t.width,s=t.height;if(!n)throw new Error("SVG container not found.");var a=De("svg");return r=r||0,i=i||0,o=o||512,s=s||342,De(a,{xmlns:"http://www.w3.org/2000/svg",version:1.1,width:o,height:s}),1==n?(a.style.cssText="position:absolute;left:"+r+"px;top:"+i+"px",f.body[y](a)):n.firstChild?n.insertBefore(a,n.firstChild):n[y](a),n=new v,n.width=o,n.height=s,n.canvas=a,_e.call(n,n,e.fn),n.clear(),n};l.clear=function(){for(var e=this.canvas;e.firstChild;)e.removeChild(e.firstChild);this.bottom=this.top=null,(this.desc=De("desc"))[y](f.createTextNode("Created with Raphaël")),e[y](this.desc),e[y](this.defs=De("defs"))},l.remove=function(){this.canvas.parentNode&&this.canvas.parentNode.removeChild(this.canvas);for(var e in this)this[e]=Re(e)}}if(e.vml){var Je={M:"m",L:"l",C:"c",Z:"x",m:"t",l:"r",c:"v",z:"x"},Qe=/([clmz]),?([^clmz]*)/gi,Ze=/ progid:\S+Blur\([^\)]+\)/g,et=/-?[^,\s-]+/g,tt=1e3+x+1e3,nt=10,rt={path:1,rect:1},it=function(e){var t=/[ahqstv]/gi,n=be;if(C(e).match(t)&&(n=Se),t=/[clmz]/g,n==be&&!C(e).match(t)){var r=C(e)[te](Qe,function(e,t,n){var r=[],i="m"==O.call(t),o=Je[t];return n[te](et,function(e){i&&2==r[M]&&(o+=r+Je["m"==t?"l":"L"],r=[]),r[H]($(e*nt))}),o+r});return r}var i,o,s=n(e);r=[];for(var a=0,l=s[M];a<l;a++){i=s[a],o=O.call(s[a][0]),"z"==o&&(o="x");for(var c=1,p=i[M];c<p;c++)o+=$(i[c]*nt)+(c!=p-1?",":w);r[H](o)}return r[_](x)};e[q]=function(){return"Your browser doesn’t support SVG. Falling down to VML.\nYou are running Raphaël "+this.version},Le=function(e,t){var n=ot("group");n.style.cssText="position:absolute;left:0;top:0;width:"+t.width+"px;height:"+t.height+"px",n.coordsize=t.coordsize,n.coordorigin=t.coordorigin;var r=ot("shape"),i=r.style;i.width=t.width+"px",i.height=t.height+"px",r.coordsize=tt,r.coordorigin=t.coordorigin,n[y](r);var o=new We(r,n,t),s={fill:"none",stroke:"#000"};return e&&(s.path=e),o.type="path",o.path=[],o.Path=w,ze(o,s),t.canvas[y](n),o},ze=function(t,n){t.attrs=t.attrs||{};var i,o=t.node,s=t.attrs,a=o.style,l=(n.x!=s.x||n.y!=s.y||n.width!=s.width||n.height!=s.height||n.r!=s.r)&&"rect"==t.type,p=t;for(var u in n)n[d](u)&&(s[u]=n[u]);if(l&&(s.path=r(s.x,s.y,s.width,s.height,s.r),t.X=s.x,t.Y=s.y,t.W=s.width,t.H=s.height),n.href&&(o.href=n.href),n.title&&(o.title=n.title),n.target&&(o.target=n.target),n.cursor&&(a.cursor=n.cursor),"blur"in n&&t.blur(n.blur),(n.path&&"path"==t.type||l)&&(o.path=it(s.path)),null!=n.rotation&&t.rotate(n.rotation,!0),n.translation&&(i=C(n.translation)[S](c),Pt.call(t,i[0],i[1]),null!=t._.rt.cx&&(t._.rt.cx+=+i[0],t._.rt.cy+=+i[1],t.setBox(t.attrs,i[0],i[1]))),n.scale&&(i=C(n.scale)[S](c),t.scale(+i[0]||1,+i[1]||+i[0]||1,+i[2]||null,+i[3]||null)),"clip-rect"in n){var h=C(n["clip-rect"])[S](c);if(4==h[M]){h[2]=+h[2]+ +h[0],h[3]=+h[3]+ +h[1];var g=o.clipRect||f.createElement("div"),m=g.style,v=o.parentNode;m.clip=e.format("rect({1}px {2}px {3}px {0}px)",h),o.clipRect||(m.position="absolute",m.top=0,m.left=0,m.width=t.paper.width+"px",m.height=t.paper.height+"px",v.parentNode.insertBefore(g,v),g[y](v),o.clipRect=g)}n["clip-rect"]||o.clipRect&&(o.clipRect.style.clip=w)}if("image"==t.type&&n.src&&(o.src=n.src),"image"==t.type&&n.opacity&&(o.filterOpacity=J+".Alpha(opacity="+100*n.opacity+")",a.filter=(o.filterMatrix||w)+(o.filterOpacity||w)),n.font&&(a.font=n.font),n["font-family"]&&(a.fontFamily='"'+n["font-family"][S](",")[0][te](/^['"]+|['"]+$/g,w)+'"'),n["font-size"]&&(a.fontSize=n["font-size"]),n["font-weight"]&&(a.fontWeight=n["font-weight"]),n["font-style"]&&(a.fontStyle=n["font-style"]),null!=n.opacity||null!=n["stroke-width"]||null!=n.fill||null!=n.stroke||null!=n["stroke-width"]||null!=n["stroke-opacity"]||null!=n["fill-opacity"]||null!=n["stroke-dasharray"]||null!=n["stroke-miterlimit"]||null!=n["stroke-linejoin"]||null!=n["stroke-linecap"]){o=t.shape||o;var b=o.getElementsByTagName(U)&&o.getElementsByTagName(U)[0],E=!1;if(!b&&(E=b=ot(U)),"fill-opacity"in n||"opacity"in n){var T=((+s["fill-opacity"]+1||2)-1)*((+s.opacity+1||2)-1)*((+e.getRGB(n.fill).o+1||2)-1);T=A(I(T,0),1),b.opacity=T}if(n.fill&&(b.on=!0),null!=b.on&&"none"!=n.fill||(b.on=!1),b.on&&n.fill){var x=n.fill.match(j);x?(b.src=x[1],b.type="tile"):(b.color=e.getRGB(n.fill).hex,b.src=w,b.type="solid",e.getRGB(n.fill).error&&(p.type in{circle:1,ellipse:1}||"r"!=C(n.fill).charAt())&&Fe(p,n.fill)&&(s.fill="none",s.gradient=n.fill))}E&&o[y](b);var P=o.getElementsByTagName("stroke")&&o.getElementsByTagName("stroke")[0],k=!1;!P&&(k=P=ot("stroke")),(n.stroke&&"none"!=n.stroke||n["stroke-width"]||null!=n["stroke-opacity"]||n["stroke-dasharray"]||n["stroke-miterlimit"]||n["stroke-linejoin"]||n["stroke-linecap"])&&(P.on=!0),("none"==n.stroke||null==P.on||0==n.stroke||0==n["stroke-width"])&&(P.on=!1);var _=e.getRGB(n.stroke);P.on&&n.stroke&&(P.color=_.hex),T=((+s["stroke-opacity"]+1||2)-1)*((+s.opacity+1||2)-1)*((+_.o+1||2)-1);var O=.75*(Y(n["stroke-width"])||1);if(T=A(I(T,0),1),null==n["stroke-width"]&&(O=s["stroke-width"]),n["stroke-width"]&&(P.weight=O),O&&O<1&&(T*=O)&&(P.weight=1),P.opacity=T,n["stroke-linejoin"]&&(P.joinstyle=n["stroke-linejoin"]||"miter"),P.miterlimit=n["stroke-miterlimit"]||8,n["stroke-linecap"]&&(P.endcap="butt"==n["stroke-linecap"]?"flat":"square"==n["stroke-linecap"]?"square":"round"),n["stroke-dasharray"]){var N={"-":"shortdash",".":"shortdot","-.":"shortdashdot","-..":"shortdashdotdot",". ":"dot","- ":"dash","--":"longdash","- .":"dashdot","--.":"longdashdot","--..":"longdashdotdot"};P.dashstyle=N[d](n["stroke-dasharray"])?N[n["stroke-dasharray"]]:w}k&&o[y](P)}if("text"==p.type)switch(a=p.paper.span.style,s.font&&(a.font=s.font),s["font-family"]&&(a.fontFamily=s["font-family"]),s["font-size"]&&(a.fontSize=s["font-size"]),s["font-weight"]&&(a.fontWeight=s["font-weight"]),s["font-style"]&&(a.fontStyle=s["font-style"]),p.node.string&&(p.paper.span.innerHTML=C(p.node.string)[te](/</g,"&#60;")[te](/&/g,"&#38;")[te](/\n/g,"<br>")),p.W=s.w=p.paper.span.offsetWidth,p.H=s.h=p.paper.span.offsetHeight,p.X=s.x,p.Y=s.y+$(p.H/2),s["text-anchor"]){case"start":p.node.style["v-text-align"]="left",p.bbx=$(p.W/2);break;case"end":p.node.style["v-text-align"]="right",p.bbx=-$(p.W/2);break;default:p.node.style["v-text-align"]="center"}},Fe=function(e,t){e.attrs=e.attrs||{};var n,r=(e.attrs,"linear"),i=".5 .5";if(e.attrs.gradient=t,t=C(t)[te](le,function(e,t,n){return r="radial",t&&n&&(t=Y(t),n=Y(n),D(t-.5,2)+D(n-.5,2)>.25&&(n=N.sqrt(.25-D(t-.5,2))*(2*(n>.5)-1)+.5),i=t+x+n),w}),t=t[S](/\s*\-\s*/),"linear"==r){var o=t.shift();if(o=-Y(o),isNaN(o))return null}var s=Pe(t);if(!s)return null;if(e=e.shape||e.node,n=e.getElementsByTagName(U)[0]||ot(U),!n.parentNode&&e.appendChild(n),s[M]){n.on=!0,n.method="none",n.color=s[0].color,n.color2=s[s[M]-1].color;for(var a=[],l=0,c=s[M];l<c;l++)s[l].offset&&a[H](s[l].offset+x+s[l].color);n.colors&&(n.colors.value=a[M]?a[_]():"0% "+n.color),"radial"==r?(n.type="gradientradial",n.focus="100%",n.focussize=i,n.focusposition=i):(n.type="gradient",n.angle=(270-o)%360)}return 1},We=function(t,n,r){this[0]=t,this.id=e._oid++,this.node=t,t.raphael=this,this.X=0,this.Y=0,this.attrs={},this.Group=n,this.paper=r,this._={tx:0,ty:0,rt:{deg:0},sx:1,sy:1},!r.bottom&&(r.bottom=this),this.prev=r.top,r.top&&(r.top.next=this),r.top=this,this.next=null},He=We[h],He.rotate=function(e,t,n){return this.removed?this:null==e?this._.rt.cx?[this._.rt.deg,this._.rt.cx,this._.rt.cy][_](x):this._.rt.deg:(e=C(e)[S](c),e[M]-1&&(t=Y(e[1]),n=Y(e[2])),e=Y(e[0]),null!=t?this._.rt.deg=e:this._.rt.deg+=e,null==n&&(t=null),this._.rt.cx=t,this._.rt.cy=n,this.setBox(this.attrs,t,n),this.Group.style.rotation=this._.rt.deg,this)},He.setBox=function(e,t,n){if(this.removed)return this;var r=this.Group.style,i=this.shape&&this.shape.style||this.node.style;e=e||{};for(var o in e)e[d](o)&&(this.attrs[o]=e[o]);t=t||this._.rt.cx,n=n||this._.rt.cy;var s,a,l,c,p=this.attrs;switch(this.type){case"circle":s=p.cx-p.r,a=p.cy-p.r,l=c=2*p.r;break;case"ellipse":s=p.cx-p.rx,a=p.cy-p.ry,l=2*p.rx,c=2*p.ry;break;case"image":s=+p.x,a=+p.y,l=p.width||0,c=p.height||0;break;case"text":this.textpath.v=["m",$(p.x),", ",$(p.y-2),"l",$(p.x)+1,", ",$(p.y-2)][_](w),s=p.x-$(this.W/2),a=p.y-this.H/2,l=this.W,c=this.H;break;case"rect":case"path":if(this.attrs.path){var u=me(this.attrs.path);s=u.x,a=u.y,l=u.width,c=u.height}else s=0,a=0,l=this.paper.width,c=this.paper.height;break;default:s=0,a=0,l=this.paper.width,c=this.paper.height}t=null==t?s+l/2:t,n=null==n?a+c/2:n;var h,f=t-this.paper.width/2,g=n-this.paper.height/2;r.left!=(h=f+"px")&&(r.left=h),r.top!=(h=g+"px")&&(r.top=h),this.X=rt[d](this.type)?-f:s,this.Y=rt[d](this.type)?-g:a,this.W=l,this.H=c,rt[d](this.type)?(i.left!=(h=-f*nt+"px")&&(i.left=h),i.top!=(h=-g*nt+"px")&&(i.top=h)):"text"==this.type?(i.left!=(h=-f+"px")&&(i.left=h),i.top!=(h=-g+"px")&&(i.top=h)):(r.width!=(h=this.paper.width+"px")&&(r.width=h),r.height!=(h=this.paper.height+"px")&&(r.height=h),i.left!=(h=s-f+"px")&&(i.left=h),i.top!=(h=a-g+"px")&&(i.top=h),i.width!=(h=l+"px")&&(i.width=h),i.height!=(h=c+"px")&&(i.height=h))},He.hide=function(){return!this.removed&&(this.Group.style.display="none"),this},He.show=function(){return!this.removed&&(this.Group.style.display="block"),this},He.getBBox=function(){return this.removed?this:rt[d](this.type)?me(this.attrs.path):{x:this.X+(this.bbx||0),y:this.Y,width:this.W,height:this.H}},He.remove=function(){if(!this.removed){Me(this,this.paper),this.node.parentNode.removeChild(this.node),this.Group.parentNode.removeChild(this.Group),this.shape&&this.shape.parentNode.removeChild(this.shape);for(var e in this)delete this[e];this.removed=!0}},He.attr=function(t,n){if(this.removed)return this;if(null==t){var r={};for(var i in this.attrs)this.attrs[d](i)&&(r[i]=this.attrs[i]);return this._.rt.deg&&(r.rotation=this.rotate()),(1!=this._.sx||1!=this._.sy)&&(r.scale=this.scale()),r.gradient&&"none"==r.fill&&(r.fill=r.gradient)&&delete r.gradient,r}if(null==n&&e.is(t,"string"))return"translation"==t?Pt.call(this):"rotation"==t?this.rotate():"scale"==t?this.scale():t==U&&"none"==this.attrs.fill&&this.attrs.gradient?this.attrs.gradient:this.attrs[t];if(this.attrs&&null==n&&e.is(t,z)){var o,s={};for(i=0,o=t[M];i<o;i++)s[t[i]]=this.attr(t[i]);return s}var a;if(null!=n&&(a={},a[t]=n),null==n&&e.is(t,"object")&&(a=t),a){for(var l in this.paper.customAttributes)if(this.paper.customAttributes[d](l)&&a[d](l)&&e.is(this.paper.customAttributes[l],"function")){var c=this.paper.customAttributes[l].apply(this,[][E](a[l]));this.attrs[l]=a[l];for(var p in c)c[d](p)&&(a[p]=c[p])}a.text&&"text"==this.type&&(this.node.string=a.text),ze(this,a),a.gradient&&({circle:1,ellipse:1}[d](this.type)||"r"!=C(a.gradient).charAt())&&Fe(this,a.gradient),(!rt[d](this.type)||this._.rt.deg)&&this.setBox(this.attrs)}return this},He.toFront=function(){return!this.removed&&this.Group.parentNode[y](this.Group),this.paper.top!=this&&Oe(this,this.paper),this},He.toBack=function(){return this.removed?this:(this.Group.parentNode.firstChild!=this.Group&&(this.Group.parentNode.insertBefore(this.Group,this.Group.parentNode.firstChild),Ne(this,this.paper)),this)},He.insertAfter=function(e){return this.removed?this:(e.constructor==kt&&(e=e[e.length-1]),e.Group.nextSibling?e.Group.parentNode.insertBefore(this.Group,e.Group.nextSibling):e.Group.parentNode[y](this.Group),Ie(this,e,this.paper),this)},He.insertBefore=function(e){return this.removed?this:(e.constructor==kt&&(e=e[0]),e.Group.parentNode.insertBefore(this.Group,e.Group),Ae(this,e,this.paper),this)},He.blur=function(t){var n=this.node.runtimeStyle,r=n.filter;r=r.replace(Ze,w),0!==+t?(this.attrs.blur=t,n.filter=r+x+J+".Blur(pixelradius="+(+t||1.5)+")",n.margin=e.format("-{0}px 0 0 -{0}px",$(+t||1.5))):(n.filter=r,n.margin=0,delete this.attrs.blur)},je=function(e,t,n,r){var i=ot("group"),o=ot("oval");o.style;i.style.cssText="position:absolute;left:0;top:0;width:"+e.width+"px;height:"+e.height+"px",i.coordsize=tt,i.coordorigin=e.coordorigin,i[y](o);var s=new We(o,i,e);return s.type="circle",ze(s,{stroke:"#000",fill:"none"}),s.attrs.cx=t,s.attrs.cy=n,s.attrs.r=r,s.setBox({x:t-r,y:n-r,width:2*r,height:2*r}),e.canvas[y](i),s},Ve=function(e,t,n,i,o,s){var a=r(t,n,i,o,s),l=e.path(a),c=l.attrs;return l.X=c.x=t,l.Y=c.y=n,l.W=c.width=i,l.H=c.height=o,c.r=s,c.path=a,l.type="rect",l},Ge=function(e,t,n,r,i){var o=ot("group"),s=ot("oval");s.style;o.style.cssText="position:absolute;left:0;top:0;width:"+e.width+"px;height:"+e.height+"px",o.coordsize=tt,o.coordorigin=e.coordorigin,o[y](s);var a=new We(s,o,e);return a.type="ellipse",ze(a,{stroke:"#000"}),a.attrs.cx=t,a.attrs.cy=n,a.attrs.rx=r,a.attrs.ry=i,a.setBox({x:t-r,y:n-i,width:2*r,height:2*i}),e.canvas[y](o),a},Ke=function(e,t,n,r,i,o){var s=ot("group"),a=ot("image");s.style.cssText="position:absolute;left:0;top:0;width:"+e.width+"px;height:"+e.height+"px",s.coordsize=tt,s.coordorigin=e.coordorigin,a.src=t,s[y](a);var l=new We(a,s,e);return l.type="image",l.attrs.src=t,l.attrs.x=n,l.attrs.y=r,l.attrs.w=i,l.attrs.h=o,l.setBox({x:n,y:r,width:i,height:o}),e.canvas[y](s),l},$e=function(t,n,r,i){var o=ot("group"),s=ot("shape"),a=s.style,l=ot("path"),c=(l.style,ot("textpath"));o.style.cssText="position:absolute;left:0;top:0;width:"+t.width+"px;height:"+t.height+"px",o.coordsize=tt,o.coordorigin=t.coordorigin,l.v=e.format("m{0},{1}l{2},{1}",$(10*n),$(10*r),$(10*n)+1),l.textpathok=!0,a.width=t.width,a.height=t.height,c.string=C(i),c.on=!0,s[y](c),s[y](l),o[y](s);var p=new We(c,o,t);return p.shape=s,p.textpath=l,p.type="text",p.attrs.text=i,p.attrs.x=n,p.attrs.y=r,p.attrs.w=1,p.attrs.h=1,ze(p,{font:Z.font,stroke:"none",fill:"#000"}),p.setBox(),t.canvas[y](o),p},Ye=function(e,t){var n=this.canvas.style;return e==+e&&(e+="px"),t==+t&&(t+="px"),n.width=e,n.height=t,n.clip="rect(0 "+e+" "+t+" 0)",this};var ot;f.createStyleSheet().addRule(".rvml","behavior:url(#default#VML)");try{!f.namespaces.rvml&&f.namespaces.add("rvml","urn:schemas-microsoft-com:vml"),ot=function(e){return f.createElement("<rvml:"+e+' class="rvml">')}}catch(e){ot=function(e){return f.createElement("<"+e+' xmlns="urn:schemas-microsoft.com:vml" class="rvml">')}}Xe=function(){var t=ke[b](0,arguments),n=t.container,r=t.height,i=t.width,o=t.x,s=t.y;if(!n)throw new Error("VML container not found.");var a=new v,l=a.canvas=f.createElement("div"),c=l.style;return o=o||0,s=s||0,i=i||512,r=r||342,i==+i&&(i+="px"),r==+r&&(r+="px"),a.width=1e3,a.height=1e3,a.coordsize=1e3*nt+x+1e3*nt,a.coordorigin="0 0",a.span=f.createElement("span"),a.span.style.cssText="position:absolute;left:-9999em;top:-9999em;padding:0;margin:0;line-height:1;display:inline;",l[y](a.span),c.cssText=e.format("top:0;left:0;width:{0};height:{1};display:inline-block;position:relative;clip:rect(0 {0} {1} 0);overflow:hidden",i,r),1==n?(f.body[y](l),c.left=o+"px",c.top=s+"px",c.position="absolute"):n.firstChild?n.insertBefore(l,n.firstChild):n[y](l),_e.call(a,a,e.fn),a},l.clear=function(){this.canvas.innerHTML=w,this.span=f.createElement("span"),this.span.style.cssText="position:absolute;left:-9999em;top:-9999em;padding:0;margin:0;line-height:1;display:inline;",this.canvas[y](this.span),this.bottom=this.top=null},l.remove=function(){this.canvas.parentNode.removeChild(this.canvas);for(var e in this)this[e]=Re(e);return!0}}var st=navigator.userAgent.match(/Version\/(.*?)\s/);"Apple Computer, Inc."==navigator.vendor&&(st&&st[1]<4||"iP"==navigator.platform.slice(0,2))?l.safari=function(){var e=this.rect(-99,-99,this.width+99,this.height+99).attr({stroke:"none"});g.setTimeout(function(){e.remove()})}:l.safari=function(){};for(var at=function(){this.returnValue=!1},lt=function(){return this.originalEvent.preventDefault()},ct=function(){this.cancelBubble=!0},pt=function(){return this.originalEvent.stopPropagation()},ut=function(){return f.addEventListener?function(e,t,n,r){var i=T&&k[t]?k[t]:t,o=function(i){if(T&&k[d](t))for(var o=0,s=i.targetTouches&&i.targetTouches.length;o<s;o++)if(i.targetTouches[o].target==e){var a=i;i=i.targetTouches[o],i.originalEvent=a,i.preventDefault=lt,i.stopPropagation=pt;break}return n.call(r,i)};return e.addEventListener(i,o,!1),function(){return e.removeEventListener(i,o,!1),!0}}:f.attachEvent?function(e,t,n,r){var i=function(e){return e=e||g.event,e.preventDefault=e.preventDefault||at,e.stopPropagation=e.stopPropagation||ct,n.call(r,e)};e.attachEvent("on"+t,i);var o=function(){return e.detachEvent("on"+t,i),!0};return o}:void 0}(),ht=[],dt=function(e){for(var t,n=e.clientX,r=e.clientY,i=f.documentElement.scrollTop||f.body.scrollTop,o=f.documentElement.scrollLeft||f.body.scrollLeft,s=ht.length;s--;){if(t=ht[s],T){for(var a,l=e.touches.length;l--;)if(a=e.touches[l],a.identifier==t.el._drag.id){n=a.clientX,r=a.clientY,(e.originalEvent?e.originalEvent:e).preventDefault();break}}else e.preventDefault();n+=o,r+=i,t.move&&t.move.call(t.move_scope||t.el,n-t.el._drag.x,r-t.el._drag.y,n,r,e)}},ft=function(t){e.unmousemove(dt).unmouseup(ft);for(var n,r=ht.length;r--;)n=ht[r],n.el._drag={},n.end&&n.end.call(n.end_scope||n.start_scope||n.move_scope||n.el,t);ht=[]},gt=P[M];gt--;)!function(t){e[t]=We[h][t]=function(n,r){return e.is(n,"function")&&(this.events=this.events||[],this.events.push({name:t,f:n,unbind:ut(this.shape||this.node||f,t,n,r||this)})),this},e["un"+t]=We[h]["un"+t]=function(e){for(var n=this.events,r=n[M];r--;)if(n[r].name==t&&n[r].f==e)return n[r].unbind(),n.splice(r,1),!n.length&&delete this.events,this;return this}}(P[gt]);He.hover=function(e,t,n,r){return this.mouseover(e,n).mouseout(t,r||n)},He.unhover=function(e,t){return this.unmouseover(e).unmouseout(t)},He.drag=function(t,n,r,i,o,s){return this._drag={},this.mousedown(function(a){(a.originalEvent||a).preventDefault();var l=f.documentElement.scrollTop||f.body.scrollTop,c=f.documentElement.scrollLeft||f.body.scrollLeft;this._drag.x=a.clientX+c,this._drag.y=a.clientY+l,this._drag.id=a.identifier,n&&n.call(o||i||this,a.clientX+c,a.clientY+l,a),!ht.length&&e.mousemove(dt).mouseup(ft),ht.push({el:this,move:t,end:r,move_scope:i,start_scope:o,end_scope:s})}),this},He.undrag=function(t,n,r){for(var i=ht.length;i--;)ht[i].el==this&&ht[i].move==t&&ht[i].end==r&&ht.splice(i++,1);!ht.length&&e.unmousemove(dt).unmouseup(ft)},l.circle=function(e,t,n){return je(this,e||0,t||0,n||0)},l.rect=function(e,t,n,r,i){return Ve(this,e||0,t||0,n||0,r||0,i||0)},l.ellipse=function(e,t,n,r){return Ge(this,e||0,t||0,n||0,r||0)},l.path=function(t){return t&&!e.is(t,B)&&!e.is(t[0],z)&&(t+=w),Le(e.format[b](e,arguments),this)},l.image=function(e,t,n,r,i){return Ke(this,e||"about:blank",t||0,n||0,r||0,i||0)},l.text=function(e,t,n){return $e(this,e||0,t||0,C(n))},l.set=function(e){return arguments[M]>1&&(e=Array[h].splice.call(arguments,0,arguments[M])),new kt(e)},l.setSize=Ye,l.top=l.bottom=null,l.raphael=e,He.resetScale=function(){return this.removed?this:(this._.sx=1,this._.sy=1,void(this.attrs.scale="1 1"))},He.scale=function(e,t,n,r){if(this.removed)return this;if(null==e&&null==t)return{x:this._.sx,y:this._.sy,toString:i};t=t||e,!+t&&(t=e);var o,s,l=this.attrs;if(0!=e){var c=this.getBBox(),p=c.x+c.width/2,u=c.y+c.height/2,h=R(e/this._.sx),d=R(t/this._.sy);n=+n||0==n?n:p,r=+r||0==r?r:u;var f=this._.sx>0,g=this._.sy>0,m=~~(e/R(e)),v=~~(t/R(t)),y=h*m,b=d*v,T=this.node.style,C=n+R(p-n)*y*(p>n==f?1:-1),S=r+R(u-r)*b*(u>r==g?1:-1),P=e*m>t*v?d:h;switch(this.type){case"rect":case"image":var k=l.width*h,O=l.height*d;this.attr({height:O,r:l.r*P,width:k,x:C-k/2,y:S-O/2});break;case"circle":case"ellipse":this.attr({rx:l.rx*h,ry:l.ry*d,r:l.r*P,cx:C,cy:S});break;case"text":this.attr({x:C,y:S});break;case"path":for(var N=ye(l.path),I=!0,A=f?y:h,D=g?b:d,L=0,F=N[M];L<F;L++){var B=N[L],z=Q.call(B[0]);if("M"!=z||!I)if(I=!1,"A"==z)B[N[L][M]-2]*=A,B[N[L][M]-1]*=D,B[1]*=h,B[2]*=d,B[5]=+(m+v?!!+B[5]:!+B[5]);else if("H"==z)for(var q=1,U=B[M];q<U;q++)B[q]*=A;else if("V"==z)for(q=1,U=B[M];q<U;q++)B[q]*=D;else for(q=1,U=B[M];q<U;q++)B[q]*=q%2?A:D}var W=me(N);o=C-W.x-W.width/2,s=S-W.y-W.height/2,N[0][1]+=o,N[0][2]+=s,this.attr({path:N})}this.type in{text:1,image:1}&&(1!=m||1!=v)?this.transformations?(this.transformations[2]="scale("[E](m,",",v,")"),a(this.node,"transform",this.transformations[_](x)),o=m==-1?-l.x-(k||0):l.x,s=v==-1?-l.y-(O||0):l.y,this.attr({x:o,y:s}),l.fx=m-1,l.fy=v-1):(this.node.filterMatrix=J+".Matrix(M11="[E](m,", M12=0, M21=0, M22=",v,", Dx=0, Dy=0, sizingmethod='auto expand', filtertype='bilinear')"),T.filter=(this.node.filterMatrix||w)+(this.node.filterOpacity||w)):this.transformations?(this.transformations[2]=w,a(this.node,"transform",this.transformations[_](x)),l.fx=0,l.fy=0):(this.node.filterMatrix=w,T.filter=(this.node.filterMatrix||w)+(this.node.filterOpacity||w)),l.scale=[e,t,n,r][_](x),this._.sx=e,this._.sy=t}return this},He.clone=function(){if(this.removed)return null;var e=this.attr();return delete e.scale,delete e.translation,this.paper[this.type]().attr(e)};var mt={},vt=function(t,n,r,i,o,s,a,l,c){if(t===r&&n===i&&o===a&&s==l){var p=a-t,u=l-n,h=Math.sqrt(p*p+u*u);if(null==c)return h;var d=c/h;return{start:{x:t,y:n},m:{x:t,y:n},n:{x:a,y:l},end:{x:a,y:l},x:t+d*p,y:n+d*u,alpha:90-180*N.atan(p/u)/L}}var f,g,m=0,v=100,y=[t,n,r,i,o,s,a,l].join(),b=mt[y];if(!b&&(mt[y]=b={data:[]}),b.timer&&clearTimeout(b.timer),b.timer=setTimeout(function(){delete mt[y]},2e3),null!=c){var E=vt(t,n,r,i,o,s,a,l);v=10*~~E}for(var T=0;T<v+1;T++){if(b.data[c]>T?g=b.data[T*v]:(g=e.findDotsAtSegment(t,n,r,i,o,s,a,l,T/v),b.data[T]=g),T&&(m+=D(D(f.x-g.x,2)+D(f.y-g.y,2),.5)),null!=c&&m>=c)return g;f=g}if(null==c)return m},yt=function(t,n){return function(r,i,o){r=Se(r);for(var s,a,l,c,p,u="",h={},d=0,f=0,g=r.length;f<g;f++){if(l=r[f],"M"==l[0])s=+l[1],a=+l[2];else{if(c=vt(s,a,l[1],l[2],l[3],l[4],l[5],l[6]),d+c>i){if(n&&!h.start){if(p=vt(s,a,l[1],l[2],l[3],l[4],l[5],l[6],i-d),u+=["C",p.start.x,p.start.y,p.m.x,p.m.y,p.x,p.y],o)return u;h.start=u,u=["M",p.x,p.y+"C",p.n.x,p.n.y,p.end.x,p.end.y,l[5],l[6]][_](),d+=c,s=+l[5],a=+l[6];continue}if(!t&&!n)return p=vt(s,a,l[1],l[2],l[3],l[4],l[5],l[6],i-d),{x:p.x,y:p.y,alpha:p.alpha}}d+=c,s=+l[5],a=+l[6]}u+=l}return h.end=u,p=t?d:n?h:e.findDotsAtSegment(s,a,l[1],l[2],l[3],l[4],l[5],l[6],1),p.alpha&&(p={x:p.x,y:p.y,alpha:p.alpha}),p}},bt=yt(1),Et=yt(),Tt=yt(0,1);He.getTotalLength=function(){if("path"==this.type)return this.node.getTotalLength?this.node.getTotalLength():bt(this.attrs.path)},He.getPointAtLength=function(e){if("path"==this.type)return Et(this.attrs.path,e)},He.getSubpath=function(e,t){if("path"==this.type){if(R(this.getTotalLength()-t)<"1e-6")return Tt(this.attrs.path,e).end;var n=Tt(this.attrs.path,t,1);return e?Tt(n,e).end:n}},e.easing_formulas={linear:function(e){return e},"<":function(e){return D(e,3)},">":function(e){return D(e-1,3)+1},"<>":function(e){return e=2*e,e<1?D(e,3)/2:(e-=2,(D(e,3)+2)/2)},backIn:function(e){var t=1.70158;return e*e*((t+1)*e-t)},backOut:function(e){e-=1;var t=1.70158;return e*e*((t+1)*e+t)+1},elastic:function(e){if(0==e||1==e)return e;var t=.3,n=t/4;return D(2,-10*e)*N.sin((e-n)*(2*L)/t)+1},bounce:function(e){var t,n=7.5625,r=2.75;return e<1/r?t=n*e*e:e<2/r?(e-=1.5/r,t=n*e*e+.75):e<2.5/r?(e-=2.25/r,t=n*e*e+.9375):(e-=2.625/r,t=n*e*e+.984375),t}};var wt=[],xt=function(){for(var t=+new Date,n=0;n<wt[M];n++){var r=wt[n];if(!r.stop&&!r.el.removed){var i,o=t-r.start,s=r.ms,a=r.easing,l=r.from,c=r.diff,p=r.to,u=r.t,h=r.el,f={};
if(o<s){var g=a(o/s);for(var m in l)if(l[d](m)){switch(ee[m]){case"along":i=g*s*c[m],p.back&&(i=p.len-i);var v=Et(p[m],i);h.translate(c.sx-c.x||0,c.sy-c.y||0),c.x=v.x,c.y=v.y,h.translate(v.x-c.sx,v.y-c.sy),p.rot&&h.rotate(c.r+v.alpha,v.x,v.y);break;case F:i=+l[m]+g*s*c[m];break;case"colour":i="rgb("+[St($(l[m].r+g*s*c[m].r)),St($(l[m].g+g*s*c[m].g)),St($(l[m].b+g*s*c[m].b))][_](",")+")";break;case"path":i=[];for(var y=0,b=l[m][M];y<b;y++){i[y]=[l[m][y][0]];for(var E=1,T=l[m][y][M];E<T;E++)i[y][E]=+l[m][y][E]+g*s*c[m][y][E];i[y]=i[y][_](x)}i=i[_](x);break;case"csv":switch(m){case"translation":var C=g*s*c[m][0]-u.x,S=g*s*c[m][1]-u.y;u.x+=C,u.y+=S,i=C+x+S;break;case"rotation":i=+l[m][0]+g*s*c[m][0],l[m][1]&&(i+=","+l[m][1]+","+l[m][2]);break;case"scale":i=[+l[m][0]+g*s*c[m][0],+l[m][1]+g*s*c[m][1],2 in p[m]?p[m][2]:w,3 in p[m]?p[m][3]:w][_](x);break;case"clip-rect":for(i=[],y=4;y--;)i[y]=+l[m][y]+g*s*c[m][y]}break;default:var P=[].concat(l[m]);for(i=[],y=h.paper.customAttributes[m].length;y--;)i[y]=+P[y]+g*s*c[m][y]}f[m]=i}h.attr(f),h._run&&h._run.call(h)}else p.along&&(v=Et(p.along,p.len*!p.back),h.translate(c.sx-(c.x||0)+v.x-c.sx,c.sy-(c.y||0)+v.y-c.sy),p.rot&&h.rotate(c.r+v.alpha,v.x,v.y)),(u.x||u.y)&&h.translate(-u.x,-u.y),p.scale&&(p.scale+=w),h.attr(p),wt.splice(n--,1)}}e.svg&&h&&h.paper&&h.paper.safari(),wt[M]&&setTimeout(xt)},Ct=function(t,n,r,i,o){var s=r-i;n.timeouts.push(setTimeout(function(){e.is(o,"function")&&o.call(n),n.animate(t,s,t.easing)},i))},St=function(e){return I(A(e,255),0)},Pt=function(e,t){if(null==e)return{x:this._.tx,y:this._.ty,toString:i};switch(this._.tx+=+e,this._.ty+=+t,this.type){case"circle":case"ellipse":this.attr({cx:+e+this.attrs.cx,cy:+t+this.attrs.cy});break;case"rect":case"image":case"text":this.attr({x:+e+this.attrs.x,y:+t+this.attrs.y});break;case"path":var n=ye(this.attrs.path);n[0][1]+=+e,n[0][2]+=+t,this.attr({path:n})}return this};He.animateWith=function(e,t,n,r,i){for(var o=0,s=wt.length;o<s;o++)wt[o].el.id==e.id&&(t.start=wt[o].start);return this.animate(t,n,r,i)},He.animateAlong=o(),He.animateAlongBack=o(1),He.onAnimation=function(e){return this._run=e||0,this},He.animate=function(t,n,r,i){var o=this;if(o.timeouts=o.timeouts||[],!e.is(r,"function")&&r||(i=r||null),o.removed)return i&&i.call(o),o;var a={},l={},p=!1,u={};for(var h in t)if(t[d](h)&&(ee[d](h)||o.paper.customAttributes[d](h)))switch(p=!0,a[h]=o.attr(h),null==a[h]&&(a[h]=Z[h]),l[h]=t[h],ee[h]){case"along":var f=bt(t[h]),g=Et(t[h],f*!!t.back),m=o.getBBox();u[h]=f/n,u.tx=m.x,u.ty=m.y,u.sx=g.x,u.sy=g.y,l.rot=t.rot,l.back=t.back,l.len=f,t.rot&&(u.r=Y(o.rotate())||0);break;case F:u[h]=(l[h]-a[h])/n;break;case"colour":a[h]=e.getRGB(a[h]);var v=e.getRGB(l[h]);u[h]={r:(v.r-a[h].r)/n,g:(v.g-a[h].g)/n,b:(v.b-a[h].b)/n};break;case"path":var y=Se(a[h],l[h]);a[h]=y[0];var b=y[1];u[h]=[];for(var E=0,T=a[h][M];E<T;E++){u[h][E]=[0];for(var w=1,x=a[h][E][M];w<x;w++)u[h][E][w]=(b[E][w]-a[h][E][w])/n}break;case"csv":var P=C(t[h])[S](c),k=C(a[h])[S](c);switch(h){case"translation":a[h]=[0,0],u[h]=[P[0]/n,P[1]/n];break;case"rotation":a[h]=k[1]==P[1]&&k[2]==P[2]?k:[0,P[1],P[2]],u[h]=[(P[0]-a[h][0])/n,0,0];break;case"scale":t[h]=P,a[h]=C(a[h])[S](c),u[h]=[(P[0]-a[h][0])/n,(P[1]-a[h][1])/n,0,0];break;case"clip-rect":for(a[h]=C(a[h])[S](c),u[h]=[],E=4;E--;)u[h][E]=(P[E]-a[h][E])/n}l[h]=P;break;default:for(P=[].concat(t[h]),k=[].concat(a[h]),u[h]=[],E=o.paper.customAttributes[h][M];E--;)u[h][E]=((P[E]||0)-(k[E]||0))/n}if(p){var _=e.easing_formulas[r];if(!_)if(_=C(r).match(K),_&&5==_[M]){var O=_;_=function(e){return s(e,+O[1],+O[2],+O[3],+O[4],n)}}else _=function(e){return e};wt.push({start:t.start||+new Date,ms:n,easing:_,from:a,diff:u,to:l,el:o,t:{x:0,y:0}}),e.is(i,"function")&&(o._ac=setTimeout(function(){i.call(o)},n)),1==wt[M]&&setTimeout(xt)}else{var N,I=[];for(var A in t)t[d](A)&&ne.test(A)&&(h={value:t[A]},"from"==A&&(A=0),"to"==A&&(A=100),h.key=X(A,10),I.push(h));for(I.sort(ce),I[0].key&&I.unshift({key:0,value:o.attrs}),E=0,T=I[M];E<T;E++)Ct(I[E].value,o,n/100*I[E].key,n/100*(I[E-1]&&I[E-1].key||0),I[E-1]&&I[E-1].value.callback);N=I[I[M]-1].value.callback,N&&o.timeouts.push(setTimeout(function(){N.call(o)},n))}return this},He.stop=function(){for(var e=0;e<wt.length;e++)wt[e].el.id==this.id&&wt.splice(e--,1);for(e=0,ii=this.timeouts&&this.timeouts.length;e<ii;e++)clearTimeout(this.timeouts[e]);return this.timeouts=[],clearTimeout(this._ac),delete this._ac,this},He.translate=function(e,t){return this.attr({translation:e+" "+t})},He[q]=function(){return"Raphaël’s object"},e.ae=wt;var kt=function(e){if(this.items=[],this[M]=0,this.type="set",e)for(var t=0,n=e[M];t<n;t++)!e[t]||e[t].constructor!=We&&e[t].constructor!=kt||(this[this.items[M]]=this.items[this.items[M]]=e[t],this[M]++)};kt[h][H]=function(){for(var e,t,n=0,r=arguments[M];n<r;n++)e=arguments[n],!e||e.constructor!=We&&e.constructor!=kt||(t=this.items[M],this[t]=this.items[t]=e,this[M]++);return this},kt[h].pop=function(){return delete this[this[M]--],this.items.pop()};for(var _t in He)He[d](_t)&&(kt[h][_t]=function(e){return function(){for(var t=0,n=this.items[M];t<n;t++)this.items[t][e][b](this.items[t],arguments);return this}}(_t));kt[h].attr=function(t,n){if(t&&e.is(t,z)&&e.is(t[0],"object"))for(var r=0,i=t[M];r<i;r++)this.items[r].attr(t[r]);else for(var o=0,s=this.items[M];o<s;o++)this.items[o].attr(t,n);return this},kt[h].animate=function(t,n,r,i){(e.is(r,"function")||!r)&&(i=r||null);var o,s,a=this.items[M],l=a,c=this;for(i&&(s=function(){!--a&&i.call(c)}),r=e.is(r,B)?r:s,o=this.items[--l].animate(t,n,r,s);l--;)this.items[l]&&!this.items[l].removed&&this.items[l].animateWith(o,t,n,r,s);return this},kt[h].insertAfter=function(e){for(var t=this.items[M];t--;)this.items[t].insertAfter(e);return this},kt[h].getBBox=function(){for(var e=[],t=[],n=[],r=[],i=this.items[M];i--;){var o=this.items[i].getBBox();e[H](o.x),t[H](o.y),n[H](o.x+o.width),r[H](o.y+o.height)}return e=A[b](0,e),t=A[b](0,t),{x:e,y:t,width:I[b](0,n)-e,height:I[b](0,r)-t}},kt[h].clone=function(e){e=new kt;for(var t=0,n=this.items[M];t<n;t++)e[H](this.items[t].clone());return e},e.registerFont=function(e){if(!e.face)return e;this.fonts=this.fonts||{};var t={w:e.w,face:{},glyphs:{}},n=e.face["font-family"];for(var r in e.face)e.face[d](r)&&(t.face[r]=e.face[r]);if(this.fonts[n]?this.fonts[n][H](t):this.fonts[n]=[t],!e.svg){t.face["units-per-em"]=X(e.face["units-per-em"],10);for(var i in e.glyphs)if(e.glyphs[d](i)){var o=e.glyphs[i];if(t.glyphs[i]={w:o.w,k:{},d:o.d&&"M"+o.d[te](/[mlcxtrv]/g,function(e){return{l:"L",c:"C",x:"z",t:"m",r:"l",v:"c"}[e]||"M"})+"z"},o.k)for(var s in o.k)o[d](s)&&(t.glyphs[i].k[s]=o.k[s])}}return e},l.getFont=function(t,n,r,i){if(i=i||"normal",r=r||"normal",n=+n||{normal:400,bold:700,lighter:300,bolder:800}[n]||400,e.fonts){var o=e.fonts[t];if(!o){var s=new RegExp("(^|\\s)"+t[te](/[^\w\d\s+!~.:_-]/g,w)+"(\\s|$)","i");for(var a in e.fonts)if(e.fonts[d](a)&&s.test(a)){o=e.fonts[a];break}}var l;if(o)for(var c=0,p=o[M];c<p&&(l=o[c],l.face["font-weight"]!=n||l.face["font-style"]!=r&&l.face["font-style"]||l.face["font-stretch"]!=i);c++);return l}},l.print=function(t,n,r,i,o,s,a){s=s||"middle",a=I(A(a||0,1),-1);var l,p=this.set(),u=C(r)[S](w),h=0;if(e.is(i,r)&&(i=this.getFont(i)),i){l=(o||16)/i.face["units-per-em"];for(var d=i.face.bbox.split(c),f=+d[0],g=+d[1]+("baseline"==s?d[3]-d[1]+ +i.face.descent:(d[3]-d[1])/2),m=0,v=u[M];m<v;m++){var y=m&&i.glyphs[u[m-1]]||{},b=i.glyphs[u[m]];h+=m?(y.w||i.w)+(y.k&&y.k[u[m]]||0)+i.w*a:0,b&&b.d&&p[H](this.path(b.d).attr({fill:"#000",stroke:"none",translation:[h,0]}))}p.scale(l,l,f,g).translate(t-f,n-g)}return p},e.format=function(t,n){var r=e.is(n,z)?[0][E](n):arguments;return t&&e.is(t,B)&&r[M]-1&&(t=t[te](u,function(e,t){return null==r[++t]?w:r[t]})),t||w},e.ninja=function(){return m.was?g.Raphael=m.is:delete Raphael,e},e.el=He,e.st=kt[h],m.was?g.Raphael=e:Raphael=e}()},function(e,t,n){"use strict";function r(e,t){var n=$(e).find("."+t);return 0===n.length?$("<span>").addClass(t).appendTo($(e)):n}function i(e,t){var n=0;!function r(){var i=e.scrollHeight;i>18||n>=10?t():(n++,setTimeout(r,100))}()}var o=n(88);e.exports={processMath:function(e,t,n,s){var a=$(e);if(null==a.attr("data-math-formula")||n){var l=r(a,"katex-holder"),c=r(a,"mathjax-holder"),p=c.find("script[type='math/tex']")[0];if(null==t&&(a.attr("data-math-formula")?t=a.attr("data-math-formula"):p&&(t=p.text||p.textContent)),t=null!=t?t+"":"",t=o.cleanMath(t),a.attr("data-math-formula",t),Exercises.useKatex)try{if(katex.render(t,l[0]),"mathjax"===a.attr("data-math-type")){var u=MathJax.Hub.getJaxFor(p);if(u){var h=u.SourceElement();h.previousSibling&&h.previousSibling.className&&u.Remove()}}return a.attr("data-math-type","katex"),void(s&&i(e,s))}catch(e){if(e.__proto__!==katex.ParseError.prototype)throw e}a.attr("data-math-type","mathjax"),p?"text"in p?p.text=t:p.textContent=t:c.append("<script type='math/tex'>"+t.replace(/<\//g,"< /")+"</script>"),"undefined"!=typeof MathJax&&(MathJax.Hub.Queue(["Reprocess",MathJax.Hub,c[0]]),MathJax.Hub.Queue(function(){KhanUtil.debugLog("MathJax done typesetting ("+t+")")}),s&&MathJax.Hub.Queue(function(){var t=MathJax.Callback(function(){});return i(e,function(){s(),t()}),t}))}},processAllMath:function(e,t){var n=$(e);n.filter("code").add(n.find("code")).each(function(){var e=$(this),n=e.attr("data-math-formula");null==n&&(n=e.text(),e.empty()),KhanUtil.processMath(this,n,t)})},cleanupMath:function(e){var t=$(e);if(t.attr("data-math-formula")){if("undefined"!=typeof MathJax){var n=MathJax.Hub.getJaxFor(t.find("script")[0]);if(n){var r=n.SourceElement();r.previousSibling&&r.previousSibling.className&&n.Remove()}}t.text(t.attr("data-math-formula")),t.attr("data-math-formula",null),t.attr("data-math-type",null)}return e},retrieveMathFormula:function(e){return $(e).attr("data-math-formula")}}},function(e,t,n){!function(e,t,n,r){function i(e){for(;e&&"undefined"!=typeof e.originalEvent;)e=e.originalEvent;return e}function o(t,n){var o,s,a,l,c,p,u,h,d=t.type;if(t=e.Event(t),t.type=n,o=t.originalEvent,s=e.event.props,d.search(/mouse/)>-1&&(s=_),o)for(u=s.length,l;u;)l=s[--u],t[l]=o[l];if(d.search(/mouse(down|up)|click/)>-1&&!t.which&&(t.which=1),d.search(/^touch/)!==-1&&(a=i(o),d=a.touches,c=a.changedTouches,p=d&&d.length?d[0]:c&&c.length?c[0]:r))for(h=0,len=P.length;h<len;h++)l=P[h],t[l]=p[l];return t}function s(t){for(var n,r,i={};t;){n=e.data(t,x);for(r in n)n[r]&&(i[r]=i.hasVirtualBinding=!0);t=t.parentNode}return i}function a(t,n){for(var r;t;){if(r=e.data(t,x),r&&(!n||r[n]))return t;t=t.parentNode}return null}function l(){L=!1}function c(){L=!0}function p(){q=0,R.length=0,D=!1,c()}function u(){l()}function h(){d(),O=setTimeout(function(){O=0,p()},e.vmouse.resetTimerDuration)}function d(){O&&(clearTimeout(O),O=0)}function f(t,n,r){var i;return(r&&r[t]||!r&&a(n.target,t))&&(i=o(n,t),e(n.target).trigger(i)),i}function g(t){var n=e.data(t.target,C);if(!(D||q&&q===n)){var r=f("v"+t.type,t);r&&(r.isDefaultPrevented()&&t.preventDefault(),r.isPropagationStopped()&&t.stopPropagation(),r.isImmediatePropagationStopped()&&t.stopImmediatePropagation())}}function m(t){var n,r,o=i(t).touches;if(o&&1===o.length&&(n=t.target,r=s(n),r.hasVirtualBinding)){q=z++,e.data(n,C,q),d(),u(),A=!1;var a=i(t).touches[0];N=a.pageX,I=a.pageY,f("vmouseover",t,r),f("vmousedown",t,r)}}function v(e){L||(A||f("vmousecancel",e,s(e.target)),A=!0,h())}function y(t){if(!L){var n=i(t).touches[0],r=A,o=e.vmouse.moveDistanceThreshold;A=A||Math.abs(n.pageX-N)>o||Math.abs(n.pageY-I)>o,flags=s(t.target),A&&!r&&f("vmousecancel",t,flags),f("vmousemove",t,flags),h()}}function b(e){if(!L){c();var t,n=s(e.target);if(f("vmouseup",e,n),!A){var r=f("vclick",e,n);r&&r.isDefaultPrevented()&&(t=i(e).changedTouches[0],R.push({touchID:q,x:t.clientX,y:t.clientY}),D=!0)}f("vmouseout",e,n),A=!1,h()}}function E(t){var n,r=e.data(t,x);if(r)for(n in r)if(r[n])return!0;return!1}function T(){}function w(t){var n=t.substr(1);return{setup:function(r,i){E(this)||e.data(this,x,{});var o=e.data(this,x);o[t]=!0,M[t]=(M[t]||0)+1,1===M[t]&&B.bind(n,g),e(this).bind(n,T),F&&(M.touchstart=(M.touchstart||0)+1,1===M.touchstart&&B.bind("touchstart",m).bind("touchend",b).bind("touchmove",y).bind("scroll",v))},teardown:function(r,i){--M[t],M[t]||B.unbind(n,g),F&&(--M.touchstart,M.touchstart||B.unbind("touchstart",m).unbind("touchmove",y).unbind("touchend",b).unbind("scroll",v));var o=e(this),s=e.data(this,x);s&&(s[t]=!1),o.unbind(n,T),E(this)||o.removeData(x)}}}var x="virtualMouseBindings",C="virtualTouchID",S="vmouseover vmousedown vmousemove vmouseup vclick vmouseout vmousecancel".split(" "),P="clientX clientY pageX pageY screenX screenY".split(" "),k=e.event.mouseHooks?e.event.mouseHooks.props:[],_=e.event.props.concat(k),M={},O=0,N=0,I=0,A=!1,R=[],D=!1,L=!1,F="addEventListener"in n,B=e(n),z=1,q=0;e.vmouse={moveDistanceThreshold:10,clickDistanceThreshold:10,resetTimerDuration:1500};for(var U=0;U<S.length;U++)e.event.special[S[U]]=w(S[U]);F&&n.addEventListener("click",function(t){var n,r,i,o,s,a,l=R.length,c=t.target;if(l)for(n=t.clientX,r=t.clientY,threshold=e.vmouse.clickDistanceThreshold,i=c;i;){for(o=0;o<l;o++)if(s=R[o],a=0,i===c&&Math.abs(s.x-n)<threshold&&Math.abs(s.y-r)<threshold||e.data(i,C)===s.touchID)return t.preventDefault(),void t.stopPropagation();i=i.parentNode}},!0)}(jQuery,window,document)},function(e,t,n){"use strict";var r=n(18),i=n(249),o=n(165),s=n(199).vector,a={maxScale:1,mouselayer:!1,shadow:!1},l=function(e,t,n,i){i=r.extend({},a,i);var l=e.fixedEllipse(t,n,i.maxScale,i.padding);if(r.extend(this,l,{graphie:e,initialPoint:t}),i.mouselayer?this.graphie.addToMouseLayerWrapper(this.wrapper):this.graphie.addToVisibleLayerWrapper(this.wrapper),i.shadow){var c="drop-shadow(0px 0px 5px rgba(0, 0, 0, 0.5))",p=this.wrapper;p.style.webkitFilter=c,p.style.filter=c,this.moveTo=function(e){var t=s.subtract(this.graphie.scalePoint(e),this.graphie.scalePoint(this.initialPoint)),n=o.getCanUse3dTransform(),r="translateX("+Math.round(t[0])+"px) translateY("+Math.round(t[1])+"px)"+(n?" translateZ(0)":"");this.transform(r)}}};r.extend(l.prototype,i),e.exports=l},function(e,t,n){"use strict";var r=n(18),i=n(249),o={center:null,createPath:null,mouselayer:!1},s=function(e,t,n){n=r.extend({},o,n),r.extend(this,e.fixedPath(t,n.center,n.createPath)),r.extend(this,{graphie:e,initialPoint:e.scalePoint(r.head(t))}),n.mouselayer?this.graphie.addToMouseLayerWrapper(this.wrapper):this.graphie.addToVisibleLayerWrapper(this.wrapper)};r.extend(s.prototype,i),e.exports=s},function(e,t,n){"use strict";var r=n(17),i=n(18),o=r.createClass({displayName:"ToggleableRadioButton",propTypes:{checked:r.PropTypes.bool.isRequired,inputRef:r.PropTypes.func,onChecked:r.PropTypes.func.isRequired},handleClick:function(e){this.props.onChecked(!this.props.checked)},handleKeyUp:function(e){" "===e.key&&(this.props.onChecked(!this.props.checked),e.preventDefault())},handleChange:function(e){!this.props.checked&&e.target.checked&&this.props.onChecked(!0)},handleKeyDown:function(e){" "===e.key&&e.preventDefault()},render:function(){var e=i.extend({},this.props,{type:"radio",onChange:this.handleChange,onClick:this.handleClick,onKeyDown:this.handleKeyDown,onKeyUp:this.handleKeyUp,ref:this.props.inputRef});return r.createElement("input",e)}});e.exports=o},function(e,t,n){"use strict";var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},i=n(17),o=n(359),s=o.connect,a=n(52),l=a.StyleSheet,c=n(300),p=c.View,u=n(305),h=n(306),d=n(307),f=n(308),g=n(298),m=g.setPageSize,v=n(215),y=v.keyIdPropType,b=n(198),E=b.KeypadTypes,T=b.LayoutModes,w=n(309),x=w.row,C=w.centered,S=w.fullWidth,P=n(266),k=P.innerBorderColor,_=P.innerBorderStyle,M=P.innerBorderWidthPx,O=P.compactKeypadBorderRadiusPx,N=i.createClass({displayName:"KeypadContainer",propTypes:{active:i.PropTypes.bool,extraKeys:i.PropTypes.arrayOf(y),keypadType:i.PropTypes.oneOf(Object.keys(E)).isRequired,layoutMode:i.PropTypes.oneOf(Object.keys(T)).isRequired,navigationPadEnabled:i.PropTypes.bool.isRequired,onDismiss:i.PropTypes.func,onElementMounted:i.PropTypes.func,onPageSizeChange:i.PropTypes.func.isRequired,style:i.PropTypes.any},getInitialState:function(){return{hasBeenActivated:!1,viewportWidth:"100vw"}},componentWillMount:function(){this.props.active&&this.setState({hasBeenActivated:this.props.active})},componentDidMount:function(){this._onResize(),window.addEventListener("resize",this._throttleResizeHandler),window.addEventListener("orientationchange",this._throttleResizeHandler)},componentWillReceiveProps:function(e){!this.state.hasBeenActivated&&e.active&&this.setState({hasBeenActivated:!0})},componentDidUpdate:function(e){e.active&&!this.props.active&&this.props.onDismiss&&this.props.onDismiss()},componentWillUnmount:function(){window.removeEventListener("resize",this._throttleResizeHandler),window.removeEventListener("orientationchange",this._throttleResizeHandler)},_throttleResizeHandler:function(){var e=this;null==this._resizeTimeout&&(this._resizeTimeout=setTimeout(function(){e._resizeTimeout=null,e._onResize()},66))},_onResize:function(){this.setState({viewportWidth:window.innerWidth}),this.props.onPageSizeChange(window.innerWidth,window.innerHeight)},renderKeypad:function(){var e=this.props,t=e.extraKeys,n=e.keypadType,r=e.layoutMode,o=e.navigationPadEnabled,s={extraKeys:t,roundTopLeft:r===T.COMPACT&&!o,roundTopRight:r===T.COMPACT};switch(n){case E.FRACTION:return i.createElement(u,s);case E.EXPRESSION:return i.createElement(h,s);default:throw new Error("Invalid keypad type: "+n)}},render:function(){var e=this,t=this.props,n=t.active,o=t.layoutMode,s=t.navigationPadEnabled,a=t.onElementMounted,l=t.style,c=this.state.hasBeenActivated,u=r({},n?D.active:D.hidden,n||c?{}:D.invisible),h=[x,C,S,R.keypadContainer].concat(Array.isArray(l)?l:[l]),f=[x,R.keypadBorder,o===T.FULLSCREEN?R.fullscreen:R.compact];return i.createElement(p,{style:h,dynamicStyle:u},i.createElement(p,{style:f,ref:function(t){!e.hasMounted&&t&&(e.hasMounted=!0,a(t))}},s&&i.createElement(d,{roundTopLeft:o===T.COMPACT,style:R.navigationPadContainer}),i.createElement(p,{style:R.keypadLayout},this.renderKeypad())))}}),I=300,A=1,R=l.create({keypadContainer:{bottom:0,left:0,right:0,position:"fixed",transition:I+"ms ease-out",transitionProperty:"transform",zIndex:f.keypad},keypadBorder:{boxShadow:"0 1px 4px 0 rgba(0, 0, 0, 0.1)",borderColor:"rgba(0, 0, 0, 0.2)",borderStyle:"solid"},fullscreen:{borderTopWidth:A},compact:{borderTopRightRadius:O,borderTopLeftRadius:O,borderTopWidth:A,borderRightWidth:A,borderLeftWidth:A},navigationPadContainer:{borderRight:M+"px "+_+" "+k,boxSizing:"content-box"},keypadLayout:{flexGrow:1,flexBasis:"0%"}}),D={invisible:{visibility:"hidden"},hidden:{msTransform:"translate3d(0, 100%, 0)",WebkitTransform:"translate3d(0, 100%, 0)",transform:"translate3d(0, 100%, 0)"},active:{msTransform:"translate3d(0, 0, 0)",WebkitTransform:"translate3d(0, 0, 0)",transform:"translate3d(0, 0, 0)"}},L=function(e){return r({},e.keypad,{layoutMode:e.layout.layoutMode,navigationPadEnabled:e.layout.navigationPadEnabled})},F=function(e){return{onPageSizeChange:function(t,n){e(m(t,n))}}};e.exports=s(L,F)(N)},function(e,t,n){"use strict";var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},i=n(17),o=n(266),s=o.cursorHandleRadiusPx,a=o.brightGreen,l=o.cursorHandleDistanceMultiplier,c=22,p=2*c,u=2*c,h=s,d=l*h+h,f=2*h,g=i.createClass({displayName:"CursorHandle",propTypes:{animateIntoPosition:i.PropTypes.bool,onTouchCancel:i.PropTypes.func.isRequired,onTouchEnd:i.PropTypes.func.isRequired,onTouchMove:i.PropTypes.func.isRequired,onTouchStart:i.PropTypes.func.isRequired,visible:i.PropTypes.bool.isRequired,x:i.PropTypes.number.isRequired,y:i.PropTypes.number.isRequired},getDefaultProps:function(){return{animateIntoPosition:!1,visible:!1,x:0,y:0}},render:function(){var e=this.props,t=e.x,n=e.y,o=e.animateIntoPosition,s=o?{msTransitionDuration:"100ms",WebkitTransitionDuration:"100ms",transitionDuration:"100ms",msTransitionProperty:"transform",WebkitTransitionProperty:"transform",transitionProperty:"transform"}:{},l="translate("+t+"px, "+n+"px)",g=r({position:"absolute",zIndex:4,left:-u/2,top:0,msTransform:l,WebkitTransform:l,transform:l,width:u,height:p},s),m={marginLeft:c-h};return i.createElement("span",{style:g,onTouchStart:this.props.onTouchStart,onTouchMove:this.props.onTouchMove,onTouchEnd:this.props.onTouchEnd,onTouchCancel:this.props.onTouchCancel},i.createElement("svg",{width:f,height:d,viewBox:"-"+h+" 0 "+f+" "+d,style:m},i.createElement("path",{d:"M 0 0\n                        L -"+.707*h+" "+.707*h+"\n                        A "+h+" "+h+", 0, 1, 0,\n                          "+.707*h+" "+.707*h+"\n                        Z",fill:a})))}});e.exports=g},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var i,o,s,a=n(21),l=window.MathQuill,c=n(310),p=n(267),u=n(198),h=u.DecimalSeparators,d=n(311),f=d.decimalSeparator,g=f===h.COMMA?",":".",m="write",v="cmd",y="keystroke",b=0,E=(i={},i[c.PLUS]={str:"+",fn:m},i[c.MINUS]={str:"-",fn:m},i[c.NEGATIVE]={str:"-",fn:m},i[c.TIMES]={str:"\\times",fn:m},i[c.DIVIDE]={str:"\\div",fn:m},i[c.DECIMAL]={str:g,fn:m},i[c.EQUAL]={str:"=",fn:m},i[c.NEQ]={str:"\\neq",fn:m},i[c.CDOT]={str:"\\cdot",fn:m},i[c.PERCENT]={str:"%",fn:m},i[c.LEFT_PAREN]={str:"(",fn:v},i[c.RIGHT_PAREN]={str:")",fn:v},i[c.SQRT]={str:"sqrt",fn:v},i[c.PI]={str:"pi",fn:v},i[c.THETA]={str:"theta",fn:v},i[c.RADICAL]={str:"nthroot",fn:v},i[c.LT]={str:"<",fn:m},i[c.LEQ]={str:"\\leq",fn:m},i[c.GT]={str:">",fn:m},i[c.GEQ]={str:"\\geq",fn:m},i[c.UP]={str:"Up",fn:y},i[c.DOWN]={str:"Down",fn:y},i[c.FRAC_INCLUSIVE]={str:"/",fn:v},i),T=(o={},o[c.LOG]="log",o[c.LN]="ln",o[c.SIN]="sin",o[c.COS]="cos",o[c.TAN]="tan",o),w=["+","-","\\cdot","\\times","\\div"],x=["=","\\neq","<","\\leq",">","\\geq"],C=["0","1","2","3","4","5","6","7","8","9"],S=["\\theta","\\pi"],P=["A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"],k=[].concat(C,S,P.map(function(e){return e.toLowerCase()}),P.map(function(e){return e.toUpperCase()})),_=(s={},s[p.IN_PARENS]=c.JUMP_OUT_PARENTHESES,s[p.IN_SUPER_SCRIPT]=c.JUMP_OUT_EXPONENT,s[p.IN_SUB_SCRIPT]=c.JUMP_OUT_BASE,s[p.BEFORE_FRACTION]=c.JUMP_INTO_NUMERATOR,s[p.IN_NUMERATOR]=c.JUMP_OUT_NUMERATOR,s[p.IN_DENOMINATOR]=c.JUMP_OUT_DENOMINATOR,s),M=function(){function e(t){var n=(arguments.length<=1||void 0===arguments[1]?{}:arguments[1],arguments.length<=2||void 0===arguments[2]?{}:arguments[2]);r(this,e),this.MQ=l.getInterface(2),this.mathField=this.MQ.MathField(t,{substituteTextarea:function(){return document.createElement("span")}}),this.callbacks=n}return e.prototype.focus=function(){var e=this.mathField.__controller;e.cursor.show(),e.blurred=!1},e.prototype.blur=function(){var e=this.mathField.__controller;e.cursor.hide(),e.blurred=!0},e.prototype._writeNormalFunction=function(e){this.mathField.write("\\"+e+"\\left(\\right)"),this.mathField.keystroke("Left")},e.prototype.pressKey=function(e){var t=this.mathField.__controller.cursor;if(e in E){var n=E[e],r=n.str,i=n.fn;r&&i&&this.mathField[i](r)}else if(Object.keys(T).includes(e))this._writeNormalFunction(T[e]);else if(e===c.FRAC_EXCLUSIVE){var o=t[this.MQ.L]===b;this.mathField.cmd("\\frac"),o&&this.mathField.keystroke("Left")}else e===c.LOG_N?(this.mathField.write("log_{ }\\left(\\right)"),this.mathField.keystroke("Left"),this.mathField.keystroke("Left"),this.mathField.keystroke("Left")):e===c.CUBE_ROOT?(this.mathField.write("\\sqrt[3]{}"),this.mathField.keystroke("Left")):e===c.EXP||e===c.EXP_2||e===c.EXP_3?this._handleExponent(t,e):e===c.JUMP_OUT_PARENTHESES||e===c.JUMP_OUT_EXPONENT||e===c.JUMP_OUT_BASE||e===c.JUMP_INTO_NUMERATOR||e===c.JUMP_OUT_NUMERATOR||e===c.JUMP_OUT_DENOMINATOR?this._handleJumpOut(t,e):e===c.BACKSPACE?this._handleBackspace(t):e===c.LEFT?this._handleLeftArrow(t):e===c.RIGHT||e===c.JUMP_OUT?this._handleRightArrow(t):/^[a-zA-Z]$/.test(e)?this.mathField[m](e):/^NUM_\d/.test(e)&&this.mathField[m](e[4]);return t.selection||t.show(),this.callbacks.onSelectionChanged&&this.callbacks.onSelectionChanged(t.selection),{context:this.contextForCursor(t)}},e.prototype.setCursorPosition=function(e,t,n){var r=n||document.elementFromPoint(e,t);if(r){var i=this.getCursor();if(r.hasAttribute("mq-root-block"))i.insAtRightEnd(this.mathField.__controller.root);else{var o=this.mathField.__controller,s=e-document.body.scrollLeft,l=t-document.body.scrollTop;o.seek(a(r),s,l).cursor.startSelection();var c=this._maybeFindCommand(i[this.MQ.L]);c&&c.endNode&&(i.insLeftOf(c.endNode),this.mathField.keystroke("Right"))}this.callbacks.onCursorMove&&this.callbacks.onCursorMove({context:this.contextForCursor(i)})}},e.prototype.getCursor=function(){return this.mathField.__controller.cursor},e.prototype.getSelection=function(){return this.getCursor().selection},e.prototype.getContent=function(){return this.mathField.latex()},e.prototype.setContent=function(e){this.mathField.latex(e)},e.prototype.isEmpty=function(){var e=this.getCursor();return 1===e.parent.id&&0===e[1]&&0===e[-1]},e.prototype._handleBackspaceInNthRoot=function(e){var t=e[this.MQ.L]===b,n=this._isInsideEmptyNode(e.parent.parent.blocks[0].ends);t?(this._selectNode(e.parent.parent,e),n&&this.mathField.keystroke("Backspace")):this.mathField.keystroke("Backspace")},e.prototype._handleJumpOut=function(e,t){var n=this.contextForCursor(e);if(_[n]===t)switch(n){case p.IN_PARENS:e.insRightOf(e.parent.parent);break;case p.BEFORE_FRACTION:for(var r=void 0,i=e;i[this.MQ.R]!==b;)this._isFraction(i[this.MQ.R])&&(r=i[this.MQ.R]),i=i[this.MQ.R];e.insLeftOf(r),this.mathField.keystroke("Right");break;case p.IN_NUMERATOR:for(var o=e.parent.parent.blocks[1];e.parent!==o;)this.mathField.keystroke("Right");break;case p.IN_DENOMINATOR:e.insRightOf(e.parent.parent);break;case p.IN_SUB_SCRIPT:e.insRightOf(e.parent.parent),this._isParens(e[this.MQ.R])&&this.mathField.keystroke("Right");break;case p.IN_SUPER_SCRIPT:e.insRightOf(e.parent.parent);break;default:throw new Error("Attempted to 'Jump Out' from node, but found no appropriate cursor context: "+n)}},e.prototype._handleBackspace=function(e){if(e.selection)this.mathField.keystroke("Backspace");else{var t=e.parent,n=t.parent,r=e[this.MQ.L];this._isFraction(r)?this._selectNode(r,e):this._isSquareRoot(r)?this._selectNode(r,e):this._isNthRoot(r)?this._selectNode(r,e):this._isNthRootIndex(t)?this._handleBackspaceInRootIndex(e):"\\left("===r.ctrlSeq?this._handleBackspaceOutsideParens(e):"\\left("===n.ctrlSeq?this._handleBackspaceInsideParens(e):this._isInsideLogIndex(e)?this._handleBackspaceInLogIndex(e):"\\ge "===r.ctrlSeq||"\\le "===r.ctrlSeq?this._handleBackspaceAfterLigaturedSymbol(e):this._isNthRoot(n)&&r===b?this._handleBackspaceInNthRoot(e):this.mathField.keystroke("Backspace")}},e.prototype._handleLeftArrow=function(e){if(e[this.MQ.L]===b){var t=e.parent,n=t.parent;if("\\left("===n.ctrlSeq){var r=this._maybeFindCommandBeforeParens(n);if(r)return void e.insLeftOf(r.startNode)}}this.mathField.keystroke("Left")},e.prototype._handleRightArrow=function(e){var t=this._maybeFindCommand(e[this.MQ.R]);t?(e.insLeftOf(t.endNode),this.mathField.keystroke("Right")):this.mathField.keystroke("Right")},e.prototype._handleExponent=function(e,t){var n=[].concat(w,x),r=e[this.MQ.L],i=r===b||n.includes(r.ctrlSeq.trim());switch(i&&this.mathField.write("\\left(\\right)"),t){case c.EXP:this.mathField.cmd("^");break;case c.EXP_2:case c.EXP_3:this.mathField.write("^"+(t===c.EXP_2?2:3)),i&&(this.mathField.keystroke("Left"),this.mathField.keystroke("Left"),this.mathField.keystroke("Left"),this.mathField.keystroke("Left"));break;default:throw new Error("Invalid exponent key: "+t)}},e.prototype._maybeFindCommand=function(e){if(!e)return null;for(var t=/^[a-z]$/,n=/^\\[a-z]$/,r="\\left(",i=["\\log","\\ln","\\cos","\\sin","\\tan"],o="",s=void 0,a=void 0,l=e;0!==l;){var c=l.ctrlSeq.trim();if(!t.test(c)){if(n.test(c)){o=c+o,s=l;break}break}o=c+o,l=l[this.MQ.L]}if(s){for(l=e[this.MQ.R];0!==l;){var p=l.ctrlSeq.trim();if(t.test(p))o+=p;else if(p===r){a=l;break}l=l[this.MQ.R]}return i.includes(o)?{name:o,startNode:s,endNode:a}:null}return null},e.prototype._maybeFindCommandBeforeParens=function(e){return this._maybeFindCommand(e[this.MQ.L])},e.prototype._selectNode=function(e,t){t.insLeftOf(e),t.startSelection(),t.insRightOf(e),t.select(),t.endSelection()},e.prototype._isFraction=function(e){return e.jQ&&e.jQ.hasClass("mq-fraction")},e.prototype._isNumerator=function(e){return e.jQ&&e.jQ.hasClass("mq-numerator")},e.prototype._isDenominator=function(e){return e.jQ&&e.jQ.hasClass("mq-denominator")},e.prototype._isSubScript=function(e){return e.jQ&&(e.jQ.hasClass("mq-sub-only")||e.jQ.hasClass("mq-sub"))},e.prototype._isSuperScript=function(e){return e.jQ&&(e.jQ.hasClass("mq-sup-only")||e.jQ.hasClass("mq-sup"))},e.prototype._isParens=function(e){return e&&"\\left("===e.ctrlSeq},e.prototype._isLeaf=function(e){return e&&e.ctrlSeq&&k.includes(e.ctrlSeq.trim())},e.prototype._isSquareRoot=function(e){return e.blocks&&e.blocks[0].jQ&&e.blocks[0].jQ.hasClass("mq-sqrt-stem")},e.prototype._isNthRoot=function(e){return e.blocks&&e.blocks[0].jQ&&e.blocks[0].jQ.hasClass("mq-nthroot")},e.prototype._isNthRootIndex=function(e){return e.jQ&&e.jQ.hasClass("mq-nthroot")},e.prototype._isInsideLogIndex=function(e){var t=e.parent.parent;if(t&&t.jQ.hasClass("mq-supsub")){var n=this._maybeFindCommandBeforeParens(t);if(n&&"\\log"===n.name)return!0}return!1},e.prototype._isInsideEmptyNode=function(e){return e[this.MQ.L]===b&&e[this.MQ.R]===b},e.prototype._handleBackspaceInRootIndex=function(e){if(this._isInsideEmptyNode(e)){var t=e.parent.parent,n=t.latex(),r=t[this.MQ.L];this._selectNode(t,e);var i=""===t.blocks[1].jQ.text();i?this.mathField.keystroke("Backspace"):(this.mathField.keystroke("Backspace"),this.mathField.write(n.replace(/^\\sqrt\[\]/,"\\sqrt")),r===b?this.mathField.moveToDirEnd(this.MQ.L):e.insRightOf(r))}else e[this.MQ.L]!==b&&this.mathField.keystroke("Backspace")},e.prototype._handleBackspaceInLogIndex=function(e){if(this._isInsideEmptyNode(e)){var t=e.parent.parent,n=this._maybeFindCommandBeforeParens(t);e.insLeftOf(n.startNode),e.startSelection(),t[this.MQ.R]!==b?e.insRightOf(t[this.MQ.R]):e.insRightOf(t),e.select(),e.endSelection();var r=""===t[this.MQ.R].contentjQ.text();r&&this.mathField.keystroke("Backspace")}else this.mathField.keystroke("Backspace")},e.prototype._handleBackspaceOutsideParens=function(e){var t=e[this.MQ.L],n=e[this.MQ.R],r=this._maybeFindCommandBeforeParens(t);r&&r.startNode?(e.insLeftOf(r.startNode),e.startSelection(),n===b?e.insAtRightEnd(e.parent):e.insLeftOf(n),e.select(),e.endSelection()):(e.startSelection(),e.insLeftOf(t),e.select(),e.endSelection())},e.prototype._handleBackspaceInsideParens=function(e){if(e[this.MQ.L]!==b)return void this.mathField.keystroke("Backspace");var t=e.parent.parent;if(t[this.MQ.L].sub&&t[this.MQ.L].sub.jQ.text())return void e.insAtRightEnd(t[this.MQ.L].sub);var n=this._isInsideEmptyNode(e),r=this._maybeFindCommandBeforeParens(t);e.insLeftOf(r&&r.startNode||t),e.startSelection(),e.insRightOf(t),e.select(),e.endSelection(),n&&this.mathField.keystroke("Backspace")},e.prototype._handleBackspaceAfterLigaturedSymbol=function(e){this.mathField.keystroke("Backspace"),this.mathField.keystroke("Backspace")},e.prototype.contextForCursor=function(e){for(var t=e;t[this.MQ.R]!==b;){if(this._isFraction(t[this.MQ.R]))return p.BEFORE_FRACTION;if(!this._isLeaf(t[this.MQ.R]))break;t=t[this.MQ.R]}return this._isParens(e.parent&&e.parent.parent)?p.IN_PARENS:this._isNumerator(e.parent)?p.IN_NUMERATOR:this._isDenominator(e.parent)?p.IN_DENOMINATOR:this._isSubScript(e.parent)?p.IN_SUB_SCRIPT:this._isSuperScript(e.parent)?p.IN_SUPER_SCRIPT:p.NONE;
},e.prototype._isAtTopLevel=function(e){return!e.parent.parent},e}();e.exports=M},function(e,t,n){"use strict";var r=n(266),i=r.toolbarHeightPx,o=function(e,t){var n=e.getBoundingClientRect(),r=n.bottom,o=n.top,s=16;if(t){var a=window.innerHeight,l=t.clientHeight,c=a-(l+i);if(r>c){var p=Math.min(r-c+s,o);return void(document.body.scrollTop+=p)}}o<s&&(document.body.scrollTop-=n.height+s)};e.exports=o},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var i=8,o=function(){function e(t,n){r(this,e),this._scrollListener=function(){t()};for(var o={},s=0;s<n.changedTouches.length;s++){var a=n.changedTouches[s];o[a.identifier]=[a.clientX,a.clientY]}this._moveListener=function(e){for(var n=0;n<e.changedTouches.length;n++){var r=e.changedTouches[n],s=o[r.identifier];if(s){var a=[r.clientX,r.clientY],l=a[0]-s[0],c=a[1]-s[1],p=l*l+c*c,u=i*i;p>u&&t()}}},this._endAndCancelListener=function(e){for(var t=0;t<e.changedTouches.length;t++)delete o[e.changedTouches[t].identifier]}}return e.prototype.attach=function(){window.addEventListener("scroll",this._scrollListener),window.addEventListener("touchmove",this._moveListener),window.addEventListener("touchend",this._endAndCancelListener),window.addEventListener("touchcancel",this._endAndCancelListener)},e.prototype.detach=function(){window.removeEventListener("scroll",this._scrollListener),window.removeEventListener("touchmove",this._moveListener),window.removeEventListener("touchend",this._endAndCancelListener),window.removeEventListener("touchcancel",this._endAndCancelListener)},e}();e.exports=o},function(e,t,n){"use strict";var r="#D6D8DA";e.exports={brightGreen:"#78C008",gray17:"#21242C",gray25:"#3B3E40",gray68:"#888D93",gray76:"#BABEC2",gray85:r,iconSizeHeightPx:48,iconSizeWidthPx:48,compactKeypadBorderRadiusPx:4,cursorHandleRadiusPx:11,cursorHandleDistanceMultiplier:1.41,valueGrey:"#FFF",operatorGrey:"#FAFAFA",controlGrey:"#F6F7F7",emptyGrey:"#F0F1F2",innerBorderColor:r,innerBorderStyle:"solid",innerBorderWidthPx:1,tabletCutoffPx:600,pageIndicatorHeightPx:16,navigationPadWidthPx:192,toolbarHeightPx:60}},function(e,t,n){"use strict";e.exports={NONE:"NONE",IN_PARENS:"IN_PARENS",IN_SUPER_SCRIPT:"IN_SUPER_SCRIPT",IN_SUB_SCRIPT:"IN_SUB_SCRIPT",IN_NUMERATOR:"IN_NUMERATOR",IN_DENOMINATOR:"IN_DENOMINATOR",BEFORE_FRACTION:"BEFORE_FRACTION"}},function(e,t,n){"use strict";function r(e,t,n,r){if(e.size){var i=0;e.reduce(function(e,o,s){return t(e,o)||(n(e)&&r(i,s),i=s),o}),n(e.last())&&r(i,e.count())}}e.exports=r},function(e,t,n){"use strict";function r(e){return e.replace(i,"")}var i=new RegExp("\r","g");e.exports=r},function(e,t,n){"use strict";var r=n(228),i=n(231),o=n(354),s=n(312),a=n(313),l=20,c=!1,p=!1,u="",h={onBeforeInput:function(e){u=(u||"")+e.data},onCompositionStart:function(){p=!0},onCompositionEnd:function(){var e=this;c=!1,p=!1,setTimeout(function(){c||h.resolveComposition.call(e)},l)},onKeyDown:function(e){e.which!==o.RIGHT&&e.which!==o.LEFT||e.preventDefault()},onKeyPress:function(e){e.which===o.RETURN&&e.preventDefault()},resolveComposition:function(){if(!p){c=!0;var e=u;u="";var t=i.set(this.props.editorState,{inCompositionMode:!1}),n=t.getCurrentInlineStyle(),o=s(t.getCurrentContent(),t.getSelection()),l=!e||a(t)||n.size>0||null!==o;if(l&&this.restoreEditorDOM(),this.exitCurrentMode(),this.removeRenderGuard(),e){var h=r.replaceText(t.getCurrentContent(),t.getSelection(),e,n,o);return void this.update(i.push(t,h,"insert-characters"))}l&&this.update(i.set(t,{nativelyRenderedContent:null,forceSelection:!0}))}}};e.exports=h},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function o(e,t,n,r){return h({"public/DraftStyleDefault/unorderedListItem":"unordered-list-item"===e,"public/DraftStyleDefault/orderedListItem":"ordered-list-item"===e,"public/DraftStyleDefault/reset":n,"public/DraftStyleDefault/depth0":0===t,"public/DraftStyleDefault/depth1":1===t,"public/DraftStyleDefault/depth2":2===t,"public/DraftStyleDefault/depth3":3===t,"public/DraftStyleDefault/depth4":4===t,"public/DraftStyleDefault/listLTR":"LTR"===r,"public/DraftStyleDefault/listRTL":"RTL"===r})}var s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=function(e,t,n){for(var r=!0;r;){var i=e,o=t,s=n;r=!1,null===i&&(i=Function.prototype);var a=Object.getOwnPropertyDescriptor(i,o);if(void 0!==a){if("value"in a)return a.value;var l=a.get;if(void 0===l)return;return l.call(s)}var c=Object.getPrototypeOf(i);if(null===c)return;e=c,t=o,n=s,r=!0,a=c=void 0}},c=n(227),p=n(286),u=(n(231),n(17)),h=n(341),d=n(355),f=n(346),g=function(e){function t(){r(this,t),l(Object.getPrototypeOf(t.prototype),"constructor",this).apply(this,arguments)}return i(t,e),a(t,[{key:"shouldComponentUpdate",value:function(e){var t=this.props.editorState,n=e.editorState,r=t.getDirectionMap(),i=n.getDirectionMap();if(r!==i)return!0;var o=t.getSelection().getHasFocus(),s=n.getSelection().getHasFocus();if(o!==s)return!0;var a=n.getNativelyRenderedContent(),l=t.isInCompositionMode(),c=n.isInCompositionMode();if(t===n||null!==a&&n.getCurrentContent()===a||l&&c)return!1;var p=t.getCurrentContent(),u=n.getCurrentContent(),h=t.getDecorator(),d=n.getDecorator();return l!==c||p!==u||h!==d||n.mustForceSelection()}},{key:"render",value:function(){for(var e=this.props,t=e.blockRenderMap,n=e.blockRendererFn,r=e.customStyleMap,i=e.editorState,a=i.getCurrentContent(),l=i.getSelection(),h=i.mustForceSelection(),g=i.getDecorator(),m=f(i.getDirectionMap()),v=a.getBlocksAsArray(),y=[],b=null,E=null,T=null,w=void 0,x=void 0,C=void 0,S=void 0,P=void 0,k=void 0,_=void 0,M=0;M<v.length;M++){x=v[M],C=x.getKey(),S=x.getType();var O=n(x),N=void 0,I=void 0,A=void 0;O&&(N=O.component,I=O.props,A=O.editable);var R=m.get(C),D=p.encode(C,0,0),L={block:x,blockProps:I,customStyleMap:r,decorator:g,direction:R,forceSelection:h,key:C,offsetKey:D,selection:l,tree:i.getBlockTree(C)},F=f(t.get(S));_=F.wrapper;var B=_!==E,z=t.get(S).element||t.get("unstyled").element,q=x.getDepth(),U=this.props.blockStyleFn(x);if("li"===z){var W=B||null===T||q>T;U=d(U,o(S,q,W,R))}var H=N||c;k={className:U,"data-block":!0,"data-editor":this.props.editorKey,"data-offset-key":D,key:C},void 0!==A&&(k=s({},k,{contentEditable:A,suppressContentEditableWarning:!0})),P=u.createElement(z,k,u.createElement(H,L)),_?(B&&(w=[],b=u.cloneElement(_,{key:C+"-wrap","data-offset-key":D},w),E=_,y.push(b)),T=x.getDepth(),f(w).push(P)):(w=null,b=null,E=null,T=null,y.push(P))}return u.createElement("div",{"data-contents":"true"},y)}}]),t}(u.Component);e.exports=g},function(e,t,n){"use strict";function r(e,t){var n=null,r=null;if(document.caretRangeFromPoint){var i=document.caretRangeFromPoint(e.x,e.y);n=i.startContainer,r=i.startOffset}else{if(!e.rangeParent)return null;n=e.rangeParent,r=e.rangeOffset}n=h(n),r=h(r);var o=h(c(n));return u(t,o,r,o,r)}function i(e,t){var n=a.moveText(e.getCurrentContent(),e.getSelection(),t);return l.push(e,n,"insert-fragment")}function o(e,t,n){var r=a.insertText(e.getCurrentContent(),t,n,e.getCurrentInlineStyle());return l.push(e,r,"insert-fragment")}var s=n(356),a=n(228),l=n(231),c=n(314),p=n(315),u=n(316),h=n(346),d={onDragEnd:function(){this.exitCurrentMode()},onDrop:function(e){var t=this,n=new s(e.nativeEvent.dataTransfer),a=this.props.editorState,l=r(e.nativeEvent,a);if(e.preventDefault(),this.exitCurrentMode(),null!=l){var c=n.getFiles();if(c.length>0){if(this.props.handleDroppedFiles&&this.props.handleDroppedFiles(l,c))return;return void p(c,function(e){e&&t.update(o(a,h(l),e))})}var u=this._internalDrag?"internal":"external";if(!this.props.handleDrop||!this.props.handleDrop(l,n,u))return this._internalDrag?void this.update(i(a,l)):void this.update(o(a,l,n.getText()))}}};e.exports=d},function(e,t,n){"use strict";var r=n(317),i=n(318),o=n(319),s=n(320),a=n(321),l=n(322),c=n(323),p=n(324),u=n(325),h=n(326),d=n(327),f=n(328),g={onBeforeInput:r,onBlur:i,onCompositionStart:o,onCopy:s,onCut:a,onDragOver:l,onDragStart:c,onFocus:p,onInput:u,onKeyDown:h,onPaste:d,onSelect:f};e.exports=g},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=function(e,t,n){for(var r=!0;r;){var i=e,o=t,s=n;r=!1,null===i&&(i=Function.prototype);var a=Object.getOwnPropertyDescriptor(i,o);if(void 0!==a){if("value"in a)return a.value;var l=a.get;if(void 0===l)return;return l.call(s)}var c=Object.getPrototypeOf(i);if(null===c)return;e=c,t=o,n=s,r=!0,a=c=void 0}},a=n(17),l=n(341),c=function(e){function t(){r(this,t),s(Object.getPrototypeOf(t.prototype),"constructor",this).apply(this,arguments)}return i(t,e),o(t,[{key:"shouldComponentUpdate",value:function(e){return this.props.text!==e.text||this.props.editorState.getSelection().getHasFocus()!==e.editorState.getSelection().getHasFocus()}},{key:"render",value:function(){var e=this.props.editorState.getSelection().getHasFocus(),t=l({"public/DraftEditorPlaceholder/root":!0,"public/DraftEditorPlaceholder/hasFocus":e});return a.createElement("div",{className:t},a.createElement("div",{className:l("public/DraftEditorPlaceholder/inner"),id:this.props.accessibilityID},this.props.text))}}]),t}(a.Component);e.exports=c},function(e,t,n){"use strict";function r(e,t,n,r){var o=e.getBlockMap(),a=t.getStartKey(),l=t.getStartOffset(),c=t.getEndKey(),p=t.getEndOffset(),u=o.skipUntil(function(e,t){return t===a}).takeUntil(function(e,t){return t===c}).concat(s([[c,o.get(c)]])).map(function(e,t){var o,s;a===c?(o=l,s=p):(o=t===a?l:0,s=t===c?p:e.getLength());for(var u,h=e.getCharacterList();o<s;)u=h.get(o),h=h.set(o,r?i.applyStyle(u,n):i.removeStyle(u,n)),o++;return e.set("characterList",h)});return e.merge({blockMap:o.merge(u),selectionBefore:t,selectionAfter:t})}var i=n(220),o=n(217),s=o.Map,a={add:function(e,t,n){return r(e,t,n,!0)},remove:function(e,t,n){return r(e,t,n,!1)}};e.exports=a},function(e,t,n){"use strict";function r(e,t,n){var r=e.getBlockMap(),s=t.getStartKey(),a=t.getStartOffset(),l=t.getEndKey(),c=t.getEndOffset(),p=r.skipUntil(function(e,t){return t===s}).takeUntil(function(e,t){return t===l}).toOrderedMap().merge(i.OrderedMap([[l,r.get(l)]])).map(function(e,t){var r=t===s?a:0,i=t===l?c:e.getLength();return o(e,r,i,n)});return e.merge({blockMap:r.merge(p),selectionBefore:t,selectionAfter:t})}var i=n(217),o=n(329);e.exports=r},function(e,t,n){"use strict";function r(e,t,n){var r=t.getStartOffset(),l=t.getEndOffset(),c=e.getEntityAt(r);if(!c)return t;var p=i.get(c),u=p.getMutability();if("MUTABLE"===u)return t;var h=s(e,c).filter(function(e){return r<e.end&&l>e.start});1!=h.length?a(!1):void 0;var d=h[0];if("IMMUTABLE"===u)return t.merge({anchorOffset:d.start,focusOffset:d.end,isBackward:!1});var f=o.getRemovalRange(r,l,e.getText().slice(d.start,d.end),d.start,n);return t.merge({anchorOffset:f.start,focusOffset:f.end,isBackward:!1})}var i=n(229),o=n(330),s=n(331),a=n(348);e.exports=r},function(e,t,n){"use strict";function r(e,t){var n=t.getStartKey(),r=t.getStartOffset(),s=t.getEndKey(),a=t.getEndOffset(),l=o(e,t),c=l.getBlockMap(),p=c.keySeq(),u=p.indexOf(n),h=p.indexOf(s)+1,d=c.slice(u,h).map(function(e,t){var o=i(),l=e.getText(),c=e.getCharacterList();return n===s?e.merge({key:o,text:l.slice(r,a),characterList:c.slice(r,a)}):t===n?e.merge({key:o,text:l.slice(r),characterList:c.slice(r)}):t===s?e.merge({key:o,text:l.slice(0,a),characterList:c.slice(0,a)}):e.set("key",o)});return d.toOrderedMap()}var i=n(238),o=n(281);e.exports=r},function(e,t,n){"use strict";function r(e,t,n){t.isCollapsed()?void 0:a(!1);var r,l,c=t.getStartKey(),p=t.getStartOffset(),u=e.getBlockMap(),h=n.size;if(1===h){var d=u.get(c),f=n.first(),g=d.getText(),m=d.getCharacterList(),v=d.merge({text:g.slice(0,p)+f.getText()+g.slice(p),characterList:s(m,f.getCharacterList(),p)});return u=u.set(c,v),r=c,l=p+f.getText().length,e.merge({blockMap:u.set(c,v),selectionBefore:t,selectionAfter:t.merge({anchorKey:r,anchorOffset:l,focusKey:r,focusOffset:l,isBackward:!1})})}var y=[];return e.getBlockMap().forEach(function(e,t){if(t!==c)return void y.push(e);var i=e.getText(),s=e.getCharacterList(),a=i.length,l=i.slice(0,p),u=s.slice(0,p),d=n.first(),f=e.merge({text:l+d.getText(),characterList:u.concat(d.getCharacterList())});y.push(f),n.slice(1,h-1).forEach(function(e){y.push(e.set("key",o()))});var g=i.slice(p,a),m=s.slice(p,a),v=n.last();r=o();var b=v.merge({key:r,text:v.getText()+g,characterList:v.getCharacterList().concat(m)});y.push(b)}),l=n.last().getLength(),e.merge({blockMap:i.createFromArray(y),selectionBefore:t,selectionAfter:t.merge({anchorKey:r,anchorOffset:l,focusKey:r,focusOffset:l,isBackward:!1})})}var i=n(219),o=n(238),s=n(332),a=n(348);e.exports=r},function(e,t,n){"use strict";function r(e,t,n,r){t.isCollapsed()?void 0:s(!1);var i=n.length;if(!i)return e;var l=e.getBlockMap(),c=t.getStartKey(),p=t.getStartOffset(),u=l.get(c),h=u.getText(),d=u.merge({text:h.slice(0,p)+n+h.slice(p,u.getLength()),characterList:o(u.getCharacterList(),a(r,i).toList(),p)}),f=p+i;return e.merge({blockMap:l.set(c,d),selectionAfter:t.merge({anchorOffset:f,focusOffset:f})})}var i=n(217),o=n(332),s=n(348),a=i.Repeat;e.exports=r},function(e,t,n){"use strict";function r(e,t){var n=e.getBlockMap(),r={},i=t.getStartKey(),s=t.getStartOffset(),a=n.get(i),l=o(a,s);l!==a&&(r[i]=l);var c=t.getEndKey(),p=t.getEndOffset(),u=n.get(c);i===c&&(u=l);var h=o(u,p);return h!==u&&(r[c]=h),Object.keys(r).length?e.merge({blockMap:n.merge(r),selectionAfter:t}):e.set("selectionAfter",t)}function i(e,t,n){var r;return l(e,function(e,t){return e.getEntity()===t.getEntity()},function(e){return e.getEntity()===t},function(e,t){e<=n&&t>=n&&(r={start:e,end:t})}),"object"!=typeof r?c(!1):void 0,r}function o(e,t){var n=e.getCharacterList(),r=t>0?n.get(t-1):void 0,o=t<n.count()?n.get(t):void 0,l=r?r.getEntity():void 0,c=o?o.getEntity():void 0;if(c&&c===l){var p=a.get(c);if("MUTABLE"!==p.getMutability()){for(var u,h=i(n,c,t),d=h.start,f=h.end;d<f;)u=n.get(d),n=n.set(d,s.applyEntity(u,null)),d++;return e.set("characterList",n)}}return e}var s=n(220),a=n(229),l=n(268),c=n(348);e.exports=r},function(e,t,n){"use strict";function r(e,t){if(t.isCollapsed())return e;var n,r=e.getBlockMap(),s=t.getStartKey(),a=t.getStartOffset(),l=t.getEndKey(),c=t.getEndOffset(),p=r.get(s),u=r.get(l);n=p===u?i(p.getCharacterList(),a,c):p.getCharacterList().slice(0,a).concat(u.getCharacterList().slice(c));var h=p.merge({text:p.getText().slice(0,a)+u.getText().slice(c),characterList:n}),d=r.toSeq().skipUntil(function(e,t){return t===s}).takeUntil(function(e,t){return t===l}).concat(o.Map([[l,null]])).map(function(e,t){return t===s?h:null});return r=r.merge(d).filter(function(e){return!!e}),e.merge({blockMap:r,selectionBefore:t,selectionAfter:t.merge({anchorKey:s,anchorOffset:a,focusKey:s,focusOffset:a,isBackward:!1})})}function i(e,t,n){if(0===t)for(;t<n;)e=e.shift(),t++;else if(n===e.count())for(;n>t;)e=e.pop(),n--;else{var r=e.slice(0,t),i=e.slice(n);e=r.concat(i).toList()}return e}var o=n(217);e.exports=r},function(e,t,n){"use strict";function r(e,t,n){var r=t.getStartKey(),o=t.getEndKey(),s=e.getBlockMap(),a=s.toSeq().skipUntil(function(e,t){return t===r}).takeUntil(function(e,t){return t===o}).concat(i.Map([[o,s.get(o)]])).map(function(e){return e.merge({type:n,depth:0})});return e.merge({blockMap:s.merge(a),selectionBefore:t,selectionAfter:t})}var i=n(217);e.exports=r},function(e,t,n){"use strict";function r(e,t){t.isCollapsed()?void 0:o(!1);var n=t.getAnchorKey(),r=t.getAnchorOffset(),s=e.getBlockMap(),a=s.get(n),l=a.getText(),c=a.getCharacterList(),p=a.merge({text:l.slice(0,r),characterList:c.slice(0,r)}),u=i(),h=p.merge({key:u,text:l.slice(r),characterList:c.slice(r)}),d=s.toSeq().takeUntil(function(e){return e===a}),f=s.toSeq().skipUntil(function(e){return e===a}).rest(),g=d.concat([[p.getKey(),p],[h.getKey(),h]],f).toOrderedMap();return e.merge({blockMap:g,selectionBefore:t,selectionAfter:t.merge({anchorKey:u,anchorOffset:0,focusKey:u,focusOffset:0,isBackward:!1})})}var i=n(238),o=n(348);e.exports=r},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=function(e,t,n){for(var r=!0;r;){var i=e,o=t,s=n;r=!1,null===i&&(i=Function.prototype);var a=Object.getOwnPropertyDescriptor(i,o);if(void 0!==a){if("value"in a)return a.value;var l=a.get;if(void 0===l)return;return l.call(s)}var c=Object.getPrototypeOf(i);if(null===c)return;e=c,t=o,n=s,r=!0,a=c=void 0}},a=n(333),l=n(17),c=n(19),p=(n(234),n(334)),u=function(e){function t(){r(this,t),s(Object.getPrototypeOf(t.prototype),"constructor",this).apply(this,arguments)}return i(t,e),o(t,[{key:"_setSelection",value:function(){var e=this.props.selection;if(null!=e&&e.getHasFocus()){var t=this.props,n=t.blockKey,r=t.start,i=t.text,o=r+i.length;if(e.hasEdgeWithin(n,r,o)){var s=c.findDOMNode(this),a=s.firstChild,l=void 0;l=a.nodeType===Node.TEXT_NODE?a:"BR"===a.tagName?s:a.firstChild,p(e,l,n,r,o)}}}},{key:"shouldComponentUpdate",value:function(e){return c.findDOMNode(this.refs.leaf).textContent!==e.text||e.styleSet!==this.props.styleSet||e.forceSelection}},{key:"componentDidUpdate",value:function(){this._setSelection()}},{key:"componentDidMount",value:function(){this._setSelection()}},{key:"render",value:function(){var e=this.props.text;e.endsWith("\n")&&this.props.isLast&&(e+="\n");var t=this.props,n=t.customStyleMap,r=t.offsetKey,i=t.styleSet,o=i.reduce(function(e,t){var r={},i=n[t];return void 0!==i&&e.textDecoration!==i.textDecoration&&(r.textDecoration=[e.textDecoration,i.textDecoration].join(" ")),Object.assign(e,i,r)},{});return l.createElement("span",{"data-offset-key":r,ref:"leaf",style:o},l.createElement(a,null,e))}}]),t}(l.Component);e.exports=u},function(e,t,n){"use strict";var r=function(){function e(e,t){var n=[],r=!0,i=!1,o=void 0;try{for(var s,a=e[Symbol.iterator]();!(r=(s=a.next()).done)&&(n.push(s.value),!t||n.length!==t);r=!0);}catch(e){i=!0,o=e}finally{try{!r&&a.return&&a.return()}finally{if(i)throw o}}return n}return function(t,n){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),i="-",o={encode:function(e,t,n){return e+i+t+i+n},decode:function(e){var t=e.split(i),n=r(t,3),o=n[0],s=n[1],a=n[2];return{blockKey:o,decoratorKey:parseInt(s,10),leafKey:parseInt(a,10)}}};e.exports=o},function(e,t,n){"use strict";function r(e,t){var n=[],r=e.map(function(e){return e.getStyle()}).toList();return a(r,i,u,function(e,r){n.push(new f({start:e+t,end:r+t}))}),l(n)}function i(e,t){return e===t}var o=n(217),s=n(345),a=n(268),l=o.List,c=o.Repeat,p=o.Record,u=s.thatReturnsTrue,h="-",d={start:null,end:null},f=p(d),g={start:null,end:null,decoratorKey:null,leaves:null},m=p(g),v={generate:function(e,t){var n=e.getLength();if(!n)return l.of(new m({start:0,end:0,decoratorKey:null,leaves:l.of(new f({start:0,end:0}))}));var o=[],s=t?t.getDecorations(e):l(c(null,n)),p=e.getCharacterList();return a(s,i,u,function(e,t){o.push(new m({start:e,end:t,decoratorKey:s.get(e),leaves:r(p.slice(e,t).toList(),e)}))}),l(o)},getFingerprint:function(e){return e.map(function(e){var t=e.get("decoratorKey"),n=null!==t?t+"."+(e.get("end")-e.get("start")):"";return""+n+"."+e.get("leaves").size}).join(h)}};e.exports=v},function(e,t,n){"use strict";var r,i=n(217),o=n(357),s=n(346),a=i.OrderedMap,l={getDirectionMap:function(e,t){r?r.reset():r=new o;var n=e.getBlockMap(),l=n.valueSeq().map(function(e){return s(r).getDirection(e.getText())}),c=a(n.keySeq().zip(l));return null!=t&&i.is(t,c)?t:c}};e.exports=l},function(e,t,n){"use strict";function r(e,t,n,r){var i=t.getStartKey(),o=t.getEndKey(),s=e.getBlockMap(),a=s.toSeq().skipUntil(function(e,t){return t===i}).takeUntil(function(e,t){return t===o}).concat([[o,s.get(o)]]).map(function(e){var t=e.getDepth()+n;return t=Math.max(0,Math.min(t,r)),e.set("depth",t)});return s=s.merge(a),e.merge({blockMap:s,selectionBefore:t,selectionAfter:t})}e.exports=r},function(e,t,n){"use strict";var r={stringify:function(e){return"_"+String(e)},unstringify:function(e){return e.slice(1)}};e.exports=r},function(e,t,n){"use strict";function r(e,t){var n=[];return e.findEntityRanges(function(e){return!!e.getEntity()},function(r,o){var a=e.getText(),l=e.getEntityAt(r);n.push({offset:s(a.slice(0,r)),length:s(a.slice(r,o)),key:Number(t[i.stringify(l)])})}),n}var i=n(290),o=n(358),s=o.strlen;e.exports=r},function(e,t,n){"use strict";function r(e,t,n){var r=[],i=t.map(function(e){return e.has(n)}).toList();return s(i,a,l,function(t,i){var s=e.getText();r.push({offset:o.strlen(s.slice(0,t)),length:o.strlen(s.slice(t,i)),style:n})}),r}function i(e){var t=e.getCharacterList().map(function(e){return e.getStyle()}).toList(),n=t.flatten().toSet().map(function(n){return r(e,t,n)});return Array.prototype.concat.apply(c,n.toJS())}var o=n(358),s=n(268),a=function(e,t){return e===t},l=function(e){return!!e},c=[];e.exports=i},function(e,t,n){"use strict";function r(e){var t,n=null;return!o&&document.implementation&&document.implementation.createHTMLDocument&&(t=document.implementation.createHTMLDocument("foo"),t.documentElement.innerHTML=e,n=t.getElementsByTagName("body")[0]),n}var i=n(344),o=i.isBrowser("IE <= 9");e.exports=r},function(e,t,n){"use strict";function r(e,t){var n=e.map(function(e,n){var r=t[n];return i.create({style:e,entity:r})});return s(n)}var i=n(220),o=n(217),s=o.List;e.exports=r},function(e,t,n){"use strict";function r(e,t){var n=Array(e.length).fill(null);return t&&t.forEach(function(t){for(var r=o(e,0,t.offset).length,i=r+o(e,t.offset,t.length).length,s=r;s<i;s++)n[s]=t.key}),n}var i=n(358),o=i.substr;e.exports=r},function(e,t,n){"use strict";function r(e,t){var n=Array(e.length).fill(l);return t&&t.forEach(function(t){for(var r=a(e,0,t.offset).length,i=r+a(e,t.offset,t.length).length;r<i;)n[r]=n[r].add(t.style),r++}),n}var i=n(358),o=n(217),s=o.OrderedSet,a=i.substr,l=s();e.exports=r},function(e,t,n){"use strict";function r(e){var t=i(e),n=0,r=0,o=0,s=0;if(t.length){var a=t[0];n=a.top,r=a.right,o=a.bottom,s=a.left;for(var l=1;l<t.length;l++){var c=t[l];0===c.height&&0===c.width||(n=Math.min(n,c.top),r=Math.max(r,c.right),o=Math.max(o,c.bottom),s=Math.min(s,c.left))}}return{top:n,right:r,bottom:o,left:s,width:r-s,height:o-n}}Object.defineProperty(t,"__esModule",{value:!0});var i=n(335);e.exports=r},function(e,t,n){"use strict";e.exports={dismissKeypad:function(){return{type:"DismissKeypad"}},activateKeypad:function(){return{type:"ActivateKeypad"}},configureKeypad:function(e){return{type:"ConfigureKeypad",configuration:e}},setPageSize:function(e,t){return{type:"SetPageSize",pageWidthPx:e,pageHeightPx:t}},removeEcho:function(e){return{type:"RemoveEcho",animationId:e}},setKeyHandler:function(e){return{type:"SetKeyHandler",keyHandler:e}},setCursor:function(e){return{type:"SetCursor",cursor:e}}}},function(e,t,n){"use strict";var r,i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},o=n(395),s=n(266),a=s.tabletCutoffPx,l=n(336),c=n(198),p=c.DeviceOrientations,u=c.DeviceTypes,h=c.EchoAnimationTypes,d=c.KeyTypes,f=c.KeypadTypes,g=c.LayoutModes,m=n(310),v=n(301),y=n(267),b=n(337),E=n(338),T=n(305),w=n(306),x=(r={},r[f.FRACTION]=T,r[f.EXPRESSION]=w,r),C=function(){var e={keyHandler:null,cursor:{context:y.NONE}},t=function(){var t=arguments.length<=0||void 0===arguments[0]?e:arguments[0],n=arguments[1];switch(n.type){case"SetKeyHandler":return i({},t,{keyHandler:n.keyHandler});case"PressKey":var r=v[n.key];return r.type!==d.KEYPAD_NAVIGATION?i({},t,{cursor:t.keyHandler(r.id)}):t;case"SetCursor":return i({},t,{cursor:n.cursor});default:return t}},n=f.EXPRESSION,r={extraKeys:["x","y",m.THETA,m.PI],keypadType:n,active:!1},s=function e(){var t=arguments.length<=0||void 0===arguments[0]?r:arguments[0],n=arguments[1];switch(n.type){case"DismissKeypad":return i({},t,{active:!1});case"ActivateKeypad":return i({},t,{active:!0});case"ConfigureKeypad":return i({},t,{extraKeys:[]},n.configuration);case"PressKey":var o=v[n.key];return o.id===m.DISMISS?e(t,{type:"DismissKeypad"}):t;default:return t}},c=function(e){return e-1},T={animateToPosition:!1,currentPage:c(x[n].numPages),dx:0,numPages:x[n].numPages,pageWidthPx:0,velocityTracker:new E},w=function e(){var t=arguments.length<=0||void 0===arguments[0]?T:arguments[0],n=arguments[1];switch(n.type){case"ConfigureKeypad":var r=n.configuration.keypadType,o=x[r].numPages;return i({},t,{numPages:o,animateToPosition:!1,currentPage:c(o),dx:0});case"SetPageSize":return i({},t,{pageWidthPx:n.pageWidthPx});case"PressKey":var s=v[n.key];return s.type===d.VALUE||s.type===d.OPERATOR?e(t,{type:"ResetKeypadPage"}):t;case"ResetKeypadPage":return i({},t,{animateToPosition:!0,currentPage:c(t.numPages),dx:0});case"PageKeypadRight":var a=Math.min(t.currentPage+1,t.numPages-1);return i({},t,{animateToPosition:!0,currentPage:a,dx:0});case"PageKeypadLeft":var l=Math.max(t.currentPage-1,0);return i({},t,{animateToPosition:!0,currentPage:l,dx:0});case"OnSwipeChange":return t.velocityTracker.push(n.dx),i({},t,{animateToPosition:!1,dx:n.dx});case"OnSwipeEnd":var p=t.pageWidthPx,u=t.velocityTracker,h=n.dx,f=u.getVelocity(),g=.1,m=10,y=h<-p/2||f<-g&&h<-m,b=h>p/2||f>g&&h>m;return y?e(t,{type:"PageKeypadRight"}):b?e(t,{type:"PageKeypadLeft"}):i({},t,{animateToPosition:!0,dx:0});default:return t}},C=function(e){return new b({swipeEnabled:e},{onSwipeChange:function(e){R.dispatch({type:"OnSwipeChange",dx:e})},onSwipeEnd:function(e){R.dispatch({type:"OnSwipeEnd",dx:e})},onActiveNodesChanged:function(e){R.dispatch({type:"SetActiveNodes",activeNodes:e})},onClick:function(e,t,n){R.dispatch(i({type:"PressKey",key:e},t,{inPopover:n}))}},[],[m.BACKSPACE,m.UP,m.RIGHT,m.DOWN,m.LEFT])},S={popover:null,focus:null,gestureManager:C(x[n].numPages>1)},P=function(){var e=arguments.length<=0||void 0===arguments[0]?S:arguments[0],t=arguments[1];switch(t.type){case"DismissKeypad":return e.gestureManager.disableEventTracking(),e;case"ActivateKeypad":return e.gestureManager.enableEventTracking(),e;case"SetActiveNodes":return i({},e,t.activeNodes);case"ConfigureKeypad":var n=t.configuration.keypadType,r=x[n].numPages,o=r>1;return{popover:null,focus:null,gestureManager:C(o)};default:return e}},k=0,_={echoes:[]},M=function(){var e=arguments.length<=0||void 0===arguments[0]?_:arguments[0],t=arguments[1];switch(t.type){case"PressKey":var n=v[t.key];return n.type===d.VALUE||n.type===d.OPERATOR?i({},e,{echoes:[].concat(e.echoes,[{animationId:""+k++,animationType:t.inPopover?h.LONG_FADE_ONLY:h.FADE_ONLY,borders:t.borders,id:n.id,initialBounds:t.initialBounds}])}):e;case"RemoveEcho":var r=e.echoes.filter(function(e){return e.animationId!==t.animationId});return i({},e,{echoes:r});default:return e}},O={gridDimensions:{numRows:x[n].rows,numColumns:x[n].columns,numMaxVisibleRows:x[n].maxVisibleRows,numPages:x[n].numPages},buttonDimensions:{widthPx:48,heightPx:48},pageDimensions:{pageWidthPx:0,pageHeightPx:0},layoutMode:g.FULLSCREEN,paginationEnabled:!1,navigationPadEnabled:!1},N=function(e,t){var n=e.pageWidthPx,r=e.pageHeightPx,o=n>r?p.LANDSCAPE:p.PORTRAIT,s=Math.min(n,r)>a?u.TABLET:u.PHONE,c=s===u.TABLET,h=s===u.PHONE&&o===p.PORTRAIT,d={deviceOrientation:o,deviceType:s},f={navigationPadEnabled:c,paginationEnabled:h,toolbarEnabled:!0};return i({},l(t,e,d,f),{navigationPadEnabled:c,paginationEnabled:h})},I=function(){var e=arguments.length<=0||void 0===arguments[0]?O:arguments[0],t=arguments[1];switch(t.type){case"ConfigureKeypad":var n=t.configuration.keypadType,r={numRows:x[n].rows,numColumns:x[n].columns,numMaxVisibleRows:x[n].maxVisibleRows,numPages:x[n].numPages};return i({},e,N(e.pageDimensions,r),{gridDimensions:r});case"SetPageSize":var o=t.pageWidthPx,s=t.pageHeightPx,a={pageWidthPx:o,pageHeightPx:s};return i({},e,N(a,e.gridDimensions),{pageDimensions:a});default:return e}},A=o.combineReducers({input:t,keypad:s,pager:w,gestures:P,echoes:M,layout:I}),R=o.createStore(A);return R};e.exports=C},function(e,t,n){"use strict";e.exports={Text:n(339),View:n(340)}},function(e,t,n){"use strict";var r,i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},o=n(310),s=n(198),a=s.DecimalSeparators,l=s.IconTypes,c=s.KeyTypes,p=n(311),u=p.decimalSeparator,h=(r={},r[o.PLUS]={type:c.OPERATOR,ariaLabel:i18n._("Plus")},r[o.MINUS]={type:c.OPERATOR,ariaLabel:i18n._("Minus")},r[o.NEGATIVE]={type:c.VALUE,ariaLabel:i18n._("Negative")},r[o.TIMES]={type:c.OPERATOR,ariaLabel:i18n._("Multiply")},r[o.DIVIDE]={type:c.OPERATOR,ariaLabel:i18n._("Divide")},r[o.DECIMAL]={type:c.VALUE,ariaLabel:i18n._("Decimal"),icon:u===a.COMMA?{type:l.TEXT,data:","}:{type:l.SVG,data:o.PERIOD}},r[o.PERCENT]={type:c.OPERATOR,ariaLabel:i18n._("Percent")},r[o.CDOT]={type:c.OPERATOR,ariaLabel:i18n._("Multiply")},r[o.EQUAL]={type:c.OPERATOR,ariaLabel:i18n._("Equals sign")},r[o.NEQ]={type:c.OPERATOR,ariaLabel:i18n._("Not-equals sign")},r[o.GT]={type:c.OPERATOR,ariaLabel:i18n._("Greater than sign")},r[o.LT]={type:c.OPERATOR,ariaLabel:i18n._("Less than sign")},r[o.GEQ]={type:c.OPERATOR,ariaLabel:i18n._("Greater than or equal to sign")},r[o.LEQ]={type:c.OPERATOR,ariaLabel:i18n._("Less than or equal to sign")},r[o.FRAC_INCLUSIVE]={type:c.OPERATOR,ariaLabel:i18n._("Fraction, with current expression in numerator")},r[o.FRAC_EXCLUSIVE]={type:c.OPERATOR,ariaLabel:i18n._("Fraction, excluding the current expression")},r[o.EXP]={type:c.OPERATOR,ariaLabel:i18n._("Custom exponent")},r[o.EXP_2]={type:c.OPERATOR,ariaLabel:i18n._("Square")},r[o.EXP_3]={type:c.OPERATOR,ariaLabel:i18n._("Cube")},r[o.SQRT]={type:c.OPERATOR,ariaLabel:i18n._("Square root")},r[o.CUBE_ROOT]={type:c.OPERATOR,ariaLabel:i18n._("Cube root")},r[o.RADICAL]={type:c.OPERATOR,ariaLabel:i18n._("Radical with custom root")},r[o.LEFT_PAREN]={type:c.OPERATOR,ariaLabel:i18n._("Left parenthesis")},r[o.RIGHT_PAREN]={type:c.OPERATOR,ariaLabel:i18n._("Right parenthesis")},r[o.LN]={type:c.OPERATOR,ariaLabel:i18n._("Natural logarithm")},r[o.LOG]={type:c.OPERATOR,ariaLabel:i18n._("Logarithm with base 10")
},r[o.LOG_N]={type:c.OPERATOR,ariaLabel:i18n._("Logarithm with custom base")},r[o.SIN]={type:c.OPERATOR,ariaLabel:i18n._("Sine")},r[o.COS]={type:c.OPERATOR,ariaLabel:i18n._("Cosine")},r[o.TAN]={type:c.OPERATOR,ariaLabel:i18n._("Tangent")},r[o.PI]={type:c.VALUE,ariaLabel:i18n._("Pi"),icon:{type:l.MATH,data:"\\pi"}},r[o.THETA]={type:c.VALUE,ariaLabel:i18n._("Theta"),icon:{type:l.MATH,data:"\\theta"}},r[o.NOOP]={type:c.EMPTY},r[o.UP]={type:c.INPUT_NAVIGATION,ariaLabel:i18n._("Up arrow")},r[o.RIGHT]={type:c.INPUT_NAVIGATION,ariaLabel:i18n._("Right arrow")},r[o.DOWN]={type:c.INPUT_NAVIGATION,ariaLabel:i18n._("Down arrow")},r[o.LEFT]={type:c.INPUT_NAVIGATION,ariaLabel:i18n._("Left arrow")},r[o.JUMP_OUT_PARENTHESES]={type:c.INPUT_NAVIGATION,ariaLabel:i18n._("Navigate right out of a set of parentheses")},r[o.JUMP_OUT_EXPONENT]={type:c.INPUT_NAVIGATION,ariaLabel:i18n._("Navigate right out of an exponent")},r[o.JUMP_OUT_BASE]={type:c.INPUT_NAVIGATION,ariaLabel:i18n._("Navigate right out of a base")},r[o.JUMP_INTO_NUMERATOR]={type:c.INPUT_NAVIGATION,ariaLabel:i18n._("Navigate right into the numerator of a fraction")},r[o.JUMP_OUT_NUMERATOR]={type:c.INPUT_NAVIGATION,ariaLabel:i18n._("Navigate right out of the numerator and into the denominator")},r[o.JUMP_OUT_DENOMINATOR]={type:c.INPUT_NAVIGATION,ariaLabel:i18n._("Navigate right out of the denominator of a fraction")},r[o.BACKSPACE]={type:c.INPUT_NAVIGATION,ariaLabel:i18n._("Delete")},r[o.DISMISS]={type:c.KEYPAD_NAVIGATION,ariaLabel:i18n._("Dismiss")},r);h[o.FRAC_MULTI]={childKeyIds:[o.FRAC_INCLUSIVE,o.FRAC_EXCLUSIVE]},h[o.MANY]={type:c.MANY};for(var d=[0,1,2,3,4,5,6,7,8,9],f=d,g=Array.isArray(f),m=0,f=g?f:f[Symbol.iterator]();;){var v;if(g){if(m>=f.length)break;v=f[m++]}else{if(m=f.next(),m.done)break;v=m.value}var y=v,b=""+y;h["NUM_"+y]={type:c.VALUE,ariaLabel:b,icon:{type:l.TEXT,data:b}}}for(var E=["A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"],T=E,w=Array.isArray(T),x=0,T=w?T:T[Symbol.iterator]();;){var C;if(w){if(x>=T.length)break;C=T[x++]}else{if(x=T.next(),x.done)break;C=x.value}for(var S=C,P=S.toLowerCase(),k=S.toUpperCase(),_=[P,k],M=0;M<_.length;M++){var O=_[M];h[O]={type:c.VALUE,ariaLabel:O,icon:{type:l.MATH,data:O}}}}for(var N=Object.keys(h),I=Array.isArray(N),A=0,N=I?N:N[Symbol.iterator]();;){var R;if(I){if(A>=N.length)break;R=N[A++]}else{if(A=N.next(),A.done)break;R=A.value}var D=R;h[D]=i({id:D,icon:{type:l.SVG,data:D}},h[D])}e.exports=h},function(e,t,n){"use strict";var r=n(18),i=n(258),o=n(199).point,s={constrain:function(){this.constrain()}};s.standard=[s.constrain];var a={draw:function(){this.draw()}};a.standard=[a.draw];var l={basic:function(e,t){var n=this.graphie;if(!this.state.visibleShape){var o=[this.pointSize()/n.scale[0],this.pointSize()/n.scale[1]],s={maxScale:Math.max(this.highlightStyle().scale,this.normalStyle().scale),padding:10,shadow:e.shadow};this.state.visibleShape=new i(n,this.coord(),o,s),this.state.visibleShape.attr(r.omit(this.normalStyle(),"scale")),this.state.visibleShape.toFront(),this.mouseTarget()&&this.mouseTarget().toFront()}e.normalStyle===t.normalStyle||r.isEqual(e.normalStyle,t.normalStyle)||this.state.visibleShape.attr(this.normalStyle()),this.state.visibleShape.moveTo(this.coord()),this.mouseTarget()&&this.mouseTarget().moveTo(this.coord())},highlight:function(e,t){e.isHovering&&!t.isHovering?e.visibleShape.animate(this.highlightStyle(),50):!e.isHovering&&t.isHovering&&e.visibleShape.animate(this.normalStyle(),50)}};l.standard=[l.basic,l.highlight];var c={basic:function(){this.state.visibleShape&&(this.state.visibleShape.remove(),this.state.visibleShape=null)}};c.standard=c.basic;var p={fixed:function(){return function(){return!1}},snap:function(e){return function(t){return null===e||(e=e||this.graphie.snap,o.roundTo(t,e))}},bound:function(e,t,n){return void 0===n&&(n=void 0===e?10:0),function(r,i,s){var a=this.graphie;e=e||a.range,void 0===t&&(t=a.snap);var l=a.unscalePoint([n,a.ypixels-n]),c=a.unscalePoint([a.xpixels-n,n]);if(t&&(l=o.ceilTo(l,t),c=o.floorTo(c,t)),s&&s.onOutOfBounds)return(r[0]>c[0]||r[0]<l[0]||r[1]>c[1]||r[1]<l[1])&&(s.onSkipRemaining(),s.onOutOfBounds()),r;var p=Math.max(l[0],Math.min(c[0],r[0])),u=Math.max(l[1],Math.min(c[1],r[1]));return[p,u]}}};p.standard=null,e.exports={add:s,modify:a,draw:l,remove:c,onMoveStart:{standard:null},constraints:p,onMove:{standard:null},onMoveEnd:{standard:null},onClick:{standard:null}}},function(e,t,n){"use strict";var r=n(18),i=n(189),o=n(259),s=n(199).vector,a=n(199).point,l=n(88),c=function(e){var t=e.graphie.scalePoint(e.coord(0)),n=e.graphie.scalePoint(e.coord(1));return s.polarDegFromCart(s.subtract(n,t))[1]},p=function(e,t,n){var r=e.range[0][1]-e.range[0][0],i=e.range[1][1]-e.range[1][0],o=r+i,a=e.unscaleVector(s.cartFromPolarDeg([1,n])),l=s.scale(s.normalize(a),o),c=s.add(t,l),p=s.polarDegFromCart(a)[1],u=e.constrainToBoundsOnAngle(c,4,p*Math.PI/180);return u},u=function(e,t){var n=[.75,0],i=[[-3,4],[-2.75,2.5],[0,.25],n,[0,-.25],[-2.75,-2.5],[-3,-4]],a=1.4;i=r.map(i,function(e){var t=s.subtract(e,n),r=s.scale(t,a);return s.add(n,r)});var c=function(e){for(var t="M"+e[0][0]+" "+e[0][1],n=1;n<e.length;n+=3)t+="C"+e[n][0]+" "+e[n][1]+" "+e[n+1][0]+" "+e[n+1][1]+" "+e[n+2][0]+" "+e[n+2][1];return t},u=r.map(i,e.unscalePoint),h={center:e.unscalePoint(n),createPath:c},d=new o(e,u,h);return d.attr(r.extend({"stroke-linejoin":"round","stroke-linecap":"round","stroke-dasharray":""},t)),d.toCoordAtAngle=function(t,r){var i=e.scalePoint(p(e,t,r));d.transform("translateX("+(i[0]+a*n[0])+"px) translateY("+(i[1]+a*n[1])+"px) translateZ(0) rotate("+(360-l.bound(r))+"deg)")},d},h={draw:function(){this.draw()},pointsToFront:function(e){r.invoke(e.points,"toFront")}};h.standard=[h.draw,h.pointsToFront];var d={draw:function(){this.draw()}};d.standard=[d.draw];var f={basic:function(e){var t=this.graphie,n=this.coord(0),o=this.coord(1);if(!this.state.visibleShape){var s={thickness:10};this.state.visibleShape=new i(t,n,o,s),this.state.visibleShape.attr(this.normalStyle()),this.state.visibleShape.toFront(),this.mouseTarget()&&this.mouseTarget().toFront()}var a=c(this);e.extendLine?(n=p(t,n,360-a),o=p(t,o,(540-a)%360)):e.extendRay&&(o=p(t,o,360-a));var l=[this.state.visibleShape];this.mouseTarget()&&l.push(this.mouseTarget()),r.each(l,function(e){e.moveTo(n,o)})},arrows:function(e){null==this._arrows&&(this._arrows=[],e.extendLine?(this._arrows.push(u(this.graphie,this.normalStyle())),this._arrows.push(u(this.graphie,this.normalStyle()))):e.extendRay&&this._arrows.push(u(this.graphie,this.normalStyle())));var t=c(this),n=[360-t,(540-t)%360];r.each(this._arrows,function(e,t){e.toCoordAtAngle(this.coord(t),n[t])},this)},highlight:function(e,t){e.isHovering&&!t.isHovering?e.visibleShape.animate(e.highlightStyle,50):!e.isHovering&&t.isHovering&&e.visibleShape.animate(e.normalStyle,50)}};f.standard=[f.basic,f.arrows,f.highlight];var g={basic:function(){this.state.visibleShape&&this.state.visibleShape.remove()},arrows:function(){null!=this._arrows&&r.invoke(this._arrows,"remove"),this._arrows=null}};g.standard=[g.basic,g.arrows];var m={fixed:function(){return function(){return!1}},snap:function(e){return function(t,n){if(null===e)return!0;var r=s.subtract(t,n);return e=e||this.graphie.snap,r=a.roundTo(r,e),s.add(n,r)}},bound:function(e,t,n){return void 0===n&&(n=void 0===e?10:0),function(e,i){var o=this.graphie,l=s.subtract(e,i),c=c||o.range;void 0===t&&(t=o.snap);var p=o.unscalePoint([n,o.ypixels-n]),u=o.unscalePoint([o.xpixels-n,n]);t&&(p=a.ceilTo(p,t),u=a.floorTo(u,t));var h=r.map(this.coords(),function(e,t){var n=s.subtract(u,e),r=s.subtract(p,e);return[r,n]}),d=r.reduce(h,function(e,t){var n=t[0],r=t[1],i=Math.max(n[0],Math.min(r[0],e[0])),o=Math.max(n[1],Math.min(r[1],e[1]));return[i,o]},l);return s.add(i,d)}}};m.standard=null;var v={updatePoints:function(e,t){var n=s.subtract(e,t);r.each(this.state.points,function(e){e.setCoord(s.add(e.coord(),n))})}};v.standard=null,e.exports={add:h,modify:d,draw:f,remove:g,onMoveStart:{standard:null},constraints:m,onMove:v,onMoveEnd:{standard:null}}},function(e,t,n){"use strict";function r(e){return o.reduce(e,function(e,t){return e+t},0)}function i(e){var t=o.zip(e,e.slice(1).concat(e.slice(0,1))),n=o.map(t,function(e){var t=e[0],n=e[1];return(n[0]-t[0])*(n[1]+t[1])});return r(n)>0}var o=n(18),s=n(199).point,a=n(199).vector,l={constrain:function(){this.constrain()},pointsToFront:function(e){o.invoke(e.points,"toFront")}};l.standard=[l.constrain,l.pointsToFront];var c={draw:function(){this.draw()}};c.standard=[c.draw];var p={basic:function(e,t){var n=this.graphie,r=this.path(e);this.state.visibleShape||(this.state.visibleShape=n.raphael.path(r),this.state.visibleShape.attr(this.normalStyle())),e.normalStyle===t.normalStyle||o.isEqual(e.normalStyle,t.normalStyle)||this.state.visibleShape.attr(this.normalStyle()),this.state.visibleShape.attr({path:r}),this.mouseTarget()&&this.mouseTarget().attr({path:r})},labels:function(e,t){var n=this.graphie,r=this,s=o.invoke(e.points,"coord"),a=i(s),l=s.length;null!=r.state._labelCache&&o.invoke(r.state._labelCache,"remove"),r.state._labelCache=[],(e.angleLabels.length||e.showRightAngleMarkers.length)&&(null==r.state._labeledAngles&&(r.state._labeledAngles=o.times(Math.max(e.angleLabels.length,e.showRightAngleMarkers.length),function(){return n.label([0,0],"","center",e.labelStyle)})),o.each(r.state._labeledAngles,function(t,i){r.state._labelCache.push(n.labelAngle({point1:s[(i-1+l)%l],vertex:s[i],point3:s[(i+1)%l],label:t,text:e.angleLabels[i],showRightAngleMarker:e.showRightAngleMarkers[i],numArcs:e.numArcs[i],clockwise:a,style:e.labelStyle}))})),e.sideLabels.length&&(null==r.state._labeledSides&&(r.state._labeledSides=o.map(e.sideLabels,function(t){return n.label([0,0],"","center",e.labelStyle)})),o.each(r.state._labeledSides,function(t,i){r.state._labelCache.push(n.labelSide({point1:s[i],point2:s[(i+1)%l],label:t,text:e.sideLabels[i],numArrows:e.numArrows[i],numTicks:e.numTicks[i],clockwise:a,style:e.labelStyle}))})),e.vertexLabels.length&&(null==r.state._labeledVertices&&(r.state._labeledVertices=o.map(e.vertexLabels,function(t){return n.label([0,0],"","center",e.labelStyle)})),o.each(r.state._labeledVertices,function(t,i){r.state._labelCache.push(n.labelVertex({point1:s[(i-1+l)%l],vertex:s[i],point3:s[(i+1)%l],label:t,text:e.vertexLabels[i],clockwise:a,style:e.labelStyle}))})),r.state._labelCache=o.flatten(r.state._labelCache)},highlight:function(e,t){e.isHovering&&!t.isHovering?e.visibleShape.animate(this.highlightStyle(),50):!e.isHovering&&t.isHovering&&e.visibleShape.animate(this.normalStyle(),50)}};p.standard=[p.basic,p.labels,p.highlight];var u={basic:function(){this.state.visibleShape&&this.state.visibleShape.remove()},labels:function e(){var e=[this.state._labeledSides,this.state._labeledVertices,this.state._labeledAngles,this.state._labelCache];o.each(e,function(e){null!=e&&e.length&&o.invoke(e,"remove")})}};u.standard=[u.basic,u.labels];var h={fixed:function(){return function(){return!1}},snap:function(e){return function(t){return null===e||(e=e||this.graphie.snap,s.roundTo(t,e))}},bound:function(e,t,n){return void 0===n&&(n=void 0===e?10:0),function(e,r){var i=this.graphie,l=a.subtract(e,r),c=c||i.range;void 0===t&&(t=i.snap);var p=i.unscalePoint([n,i.ypixels-n]),u=i.unscalePoint([i.xpixels-n,n]);t&&(p=s.ceilTo(p,t),u=s.floorTo(u,t));var h=o.map(this.coords(),function(e,t){var n=a.subtract(u,e),r=a.subtract(p,e);return[r,n]}),d=o.reduce(h,function(e,t){var n=t[0],r=t[1],i=Math.max(n[0],Math.min(r[0],e[0])),o=Math.max(n[1],Math.min(r[1],e[1]));return[i,o]},l);return a.add(r,d)}}};h.standard=null;var d={updatePoints:function(e,t){var n=a.subtract(e,t);o.each(this.state.points,function(e){e.setCoord(a.add(e.coord(),n))})}};d.standard=null,e.exports={add:l,modify:c,draw:p,remove:u,onMoveStart:{standard:null},constraints:h,onMove:d,onMoveEnd:{standard:null},onClick:{standard:null}}},function(e,t,n){"use strict";var r=n(17),i=n(359),o=i.connect,s=n(300),a=s.View,l=n(360),c=n(361),p=n(309),u=p.row,h=p.roundedTopLeft,d=p.roundedTopRight,f=n(198),g=f.BorderStyles,m=n(267),v=n(215),y=v.cursorContextPropType,b=n(301),E=r.createClass({displayName:"FractionKeypad",propTypes:{cursorContext:y.isRequired,dynamicJumpOut:r.PropTypes.bool,roundTopLeft:r.PropTypes.bool,roundTopRight:r.PropTypes.bool},statics:{rows:4,columns:4,maxVisibleRows:5,numPages:1},render:function(){var e=this.props,t=e.cursorContext,n=e.dynamicJumpOut,i=e.roundTopLeft,o=e.roundTopRight,s=void 0;if(n)switch(t){case m.IN_PARENS:s=b.JUMP_OUT_PARENTHESES;break;case m.IN_SUPER_SCRIPT:s=b.JUMP_OUT_EXPONENT;break;case m.IN_SUB_SCRIPT:s=b.JUMP_OUT_BASE;break;case m.BEFORE_FRACTION:s=b.JUMP_INTO_NUMERATOR;break;case m.IN_NUMERATOR:s=b.JUMP_OUT_NUMERATOR;break;case m.IN_DENOMINATOR:s=b.JUMP_OUT_DENOMINATOR;break;case m.NONE:default:s=b.DISMISS}else s=b.DISMISS;return r.createElement(l,null,r.createElement(a,{style:u},r.createElement(c,{keyConfig:b.NUM_7,borders:g.NONE,style:i&&h}),r.createElement(c,{keyConfig:b.NUM_8,borders:g.NONE}),r.createElement(c,{keyConfig:b.NUM_9,borders:g.NONE}),r.createElement(c,{keyConfig:b.FRAC_MULTI,disabled:t===m.IN_NUMERATOR||t===m.IN_DENOMINATOR,style:o&&d})),r.createElement(a,{style:u},r.createElement(c,{keyConfig:b.NUM_4,borders:g.NONE}),r.createElement(c,{keyConfig:b.NUM_5,borders:g.NONE}),r.createElement(c,{keyConfig:b.NUM_6,borders:g.NONE}),r.createElement(c,{keyConfig:b.PERCENT})),r.createElement(a,{style:u},r.createElement(c,{keyConfig:b.NUM_1,borders:g.BOTTOM}),r.createElement(c,{keyConfig:b.NUM_2,borders:g.NONE}),r.createElement(c,{keyConfig:b.NUM_3,borders:g.BOTTOM}),r.createElement(c,{keyConfig:b.BACKSPACE,borders:g.LEFT})),r.createElement(a,{style:u},r.createElement(c,{keyConfig:b.NEGATIVE,borders:g.NONE}),r.createElement(c,{keyConfig:b.NUM_0,borders:g.LEFT}),r.createElement(c,{keyConfig:b.DECIMAL,borders:g.LEFT}),r.createElement(c,{keyConfig:s,borders:g.LEFT})))}}),T=function(e){return{cursorContext:e.input.cursor.context,dynamicJumpOut:!e.layout.navigationPadEnabled}};e.exports=o(T)(E)},function(e,t,n){"use strict";var r=n(17),i=n(359),o=i.connect,s=n(52),a=s.StyleSheet,l=n(300),c=l.View,p=n(362),u=n(363),h=n(361),d=n(309),f=d.row,g=d.column,m=d.oneColumn,v=d.fullWidth,y=d.roundedTopLeft,b=d.roundedTopRight,E=n(198),T=E.BorderStyles,w=n(266),x=w.valueGrey,C=w.controlGrey,S=n(215),P=S.cursorContextPropType,k=S.keyIdPropType,_=n(301),M=n(267),O=r.createClass({displayName:"ExpressionKeypad",propTypes:{currentPage:r.PropTypes.number.isRequired,cursorContext:P.isRequired,dynamicJumpOut:r.PropTypes.bool,extraKeys:r.PropTypes.arrayOf(k),roundTopLeft:r.PropTypes.bool,roundTopRight:r.PropTypes.bool},statics:{rows:4,columns:5,maxVisibleRows:4,numPages:2},render:function(){var e=this.props,t=e.currentPage,n=e.cursorContext,i=e.dynamicJumpOut,o=e.extraKeys,s=e.roundTopLeft,a=e.roundTopRight,l=void 0;if(i)switch(n){case M.IN_PARENS:l=_.JUMP_OUT_PARENTHESES;break;case M.IN_SUPER_SCRIPT:l=_.JUMP_OUT_EXPONENT;break;case M.IN_SUB_SCRIPT:l=_.JUMP_OUT_BASE;break;case M.BEFORE_FRACTION:l=_.JUMP_INTO_NUMERATOR;break;case M.IN_NUMERATOR:l=_.JUMP_OUT_NUMERATOR;break;case M.IN_DENOMINATOR:l=_.JUMP_OUT_DENOMINATOR;break;case M.NONE:default:l=_.DISMISS}else l=_.DISMISS;var d=[f,v,N.rightPage,a&&b],E=r.createElement(c,{style:d},r.createElement(c,{style:[g,m]},r.createElement(h,{keyConfig:_.NUM_7,borders:T.NONE}),r.createElement(h,{keyConfig:_.NUM_4,borders:T.NONE}),r.createElement(h,{keyConfig:_.NUM_1,borders:T.BOTTOM}),r.createElement(u,{keys:o,borders:T.NONE})),r.createElement(c,{style:[g,m]},r.createElement(h,{keyConfig:_.NUM_8,borders:T.NONE}),r.createElement(h,{keyConfig:_.NUM_5,borders:T.NONE}),r.createElement(h,{keyConfig:_.NUM_2,borders:T.NONE}),r.createElement(h,{keyConfig:_.NUM_0,borders:T.LEFT})),r.createElement(c,{style:[g,m]},r.createElement(h,{keyConfig:_.NUM_9,borders:T.NONE}),r.createElement(h,{keyConfig:_.NUM_6,borders:T.NONE}),r.createElement(h,{keyConfig:_.NUM_3,borders:T.BOTTOM}),r.createElement(h,{keyConfig:_.DECIMAL,borders:T.LEFT})),r.createElement(c,{style:[g,m]},r.createElement(h,{keyConfig:_.DIVIDE,borders:T.LEFT}),r.createElement(h,{keyConfig:_.TIMES,borders:T.LEFT}),r.createElement(h,{keyConfig:_.MINUS,borders:T.LEFT}),r.createElement(h,{keyConfig:_.PLUS,borders:T.LEFT})),r.createElement(c,{style:[g,m]},r.createElement(h,{keyConfig:_.FRAC_INCLUSIVE,style:a&&b}),r.createElement(h,{keyConfig:_.CDOT}),r.createElement(h,{keyConfig:_.BACKSPACE,borders:T.LEFT}),r.createElement(h,{keyConfig:l,borders:T.LEFT}))),w=[f,v,N.leftPage,s&&y],x=r.createElement(c,{style:w},r.createElement(c,{style:[g,m]},r.createElement(h,{keyConfig:_.EXP_2,borders:T.NONE,style:s&&y}),r.createElement(h,{keyConfig:_.SQRT,borders:T.NONE}),r.createElement(h,{keyConfig:_.LOG,borders:T.BOTTOM}),r.createElement(h,{keyConfig:_.SIN,borders:T.NONE})),r.createElement(c,{style:[g,m]},r.createElement(h,{keyConfig:_.EXP_3,borders:T.NONE}),r.createElement(h,{keyConfig:_.CUBE_ROOT,borders:T.NONE}),r.createElement(h,{keyConfig:_.LN,borders:T.BOTTOM}),r.createElement(h,{keyConfig:_.COS,borders:T.NONE})),r.createElement(c,{style:[g,m]},r.createElement(h,{keyConfig:_.EXP,borders:T.NONE}),r.createElement(h,{keyConfig:_.RADICAL,borders:T.NONE}),r.createElement(h,{keyConfig:_.LOG_N,borders:T.BOTTOM}),r.createElement(h,{keyConfig:_.TAN,borders:T.NONE})),r.createElement(c,{style:[g,m]},r.createElement(h,{keyConfig:_.GEQ,borders:T.LEFT}),r.createElement(h,{keyConfig:_.EQUAL,borders:T.LEFT}),r.createElement(h,{keyConfig:_.LEQ}),r.createElement(h,{keyConfig:_.LEFT_PAREN,borders:T.LEFT})),r.createElement(c,{style:[g,m]},r.createElement(h,{keyConfig:_.GT,borders:T.NONE}),r.createElement(h,{keyConfig:_.NEQ,borders:T.NONE}),r.createElement(h,{keyConfig:_.LT,borders:T.BOTTOM}),r.createElement(h,{keyConfig:_.RIGHT_PAREN,borders:T.NONE})));return r.createElement(p,{currentPage:t,rightPage:E,leftPage:x})}}),N=a.create({rightPage:{backgroundColor:x},leftPage:{backgroundColor:C}}),I=function(e){return{currentPage:e.pager.currentPage,cursorContext:e.input.cursor.context,dynamicJumpOut:!e.layout.navigationPadEnabled}};e.exports=o(I)(O)},function(e,t,n){"use strict";var r=n(17),i=n(52),o=i.StyleSheet,s=n(300),a=s.View,l=n(361),c=n(309),p=c.row,u=c.column,h=c.centered,d=c.stretch,f=c.roundedTopLeft,g=n(266),m=g.navigationPadWidthPx,v=g.controlGrey,y=g.valueGrey,b=g.gray85,E=n(198),T=E.BorderStyles,w=n(301),x=r.createClass({displayName:"NavigationPad",propTypes:{roundTopLeft:r.PropTypes.bool,style:r.PropTypes.any},render:function(){var e=this.props,t=e.roundTopLeft,n=e.style,i=[u,h,k.container,t&&f].concat(Array.isArray(n)?n:[n]);return r.createElement(a,{style:i},r.createElement(a,{style:[p,h]},r.createElement(l,{keyConfig:w.UP,borders:T.NONE,style:[k.navigationKey,k.topArrow]})),r.createElement(a,{style:[p,h,d]},r.createElement(l,{keyConfig:w.LEFT,borders:T.NONE,style:[k.navigationKey,k.leftArrow]}),r.createElement(a,{style:k.horizontalSpacer}),r.createElement(l,{keyConfig:w.RIGHT,borders:T.NONE,style:[k.navigationKey,k.rightArrow]})),r.createElement(a,{style:[p,h]},r.createElement(l,{keyConfig:w.DOWN,borders:T.NONE,style:[k.navigationKey,k.bottomArrow]})))}}),C=48,S=4,P=1,k=o.create({container:{backgroundColor:v,width:m},navigationKey:{borderColor:b,backgroundColor:y,width:C,height:C,boxSizing:"content-box"},topArrow:{borderTopWidth:P,borderLeftWidth:P,borderRightWidth:P,borderTopLeftRadius:S,borderTopRightRadius:S},rightArrow:{borderTopWidth:P,borderRightWidth:P,borderBottomWidth:P,borderTopRightRadius:S,borderBottomRightRadius:S},bottomArrow:{borderBottomWidth:P,borderLeftWidth:P,borderRightWidth:P,borderBottomLeftRadius:S,borderBottomRightRadius:S},leftArrow:{borderTopWidth:P,borderBottomWidth:P,borderLeftWidth:P,borderTopLeftRadius:S,borderBottomLeftRadius:S},horizontalSpacer:{background:y,width:C}});e.exports=x},function(e,t,n){"use strict";e.exports={popover:1,echo:2,keypad:1060}},function(e,t,n){"use strict";var r=n(52),i=r.StyleSheet,o=n(266),s=o.compactKeypadBorderRadiusPx;e.exports=i.create({row:{flexDirection:"row"},column:{flexDirection:"column"},oneColumn:{flexGrow:1},fullWidth:{width:"100%"},stretch:{alignItems:"stretch"},centered:{justifyContent:"center",alignItems:"center"},centeredText:{textAlign:"center"},roundedTopLeft:{borderTopLeftRadius:s},roundedTopRight:{borderTopRightRadius:s}})},function(e,t,n){"use strict";var r={PLUS:"PLUS",MINUS:"MINUS",NEGATIVE:"NEGATIVE",TIMES:"TIMES",DIVIDE:"DIVIDE",DECIMAL:"DECIMAL",PERIOD:"PERIOD",PERCENT:"PERCENT",CDOT:"CDOT",EQUAL:"EQUAL",NEQ:"NEQ",GT:"GT",LT:"LT",GEQ:"GEQ",LEQ:"LEQ",FRAC_INCLUSIVE:"FRAC_INCLUSIVE",FRAC_EXCLUSIVE:"FRAC_EXCLUSIVE",EXP:"EXP",EXP_2:"EXP_2",EXP_3:"EXP_3",SQRT:"SQRT",CUBE_ROOT:"CUBE_ROOT",RADICAL:"RADICAL",LEFT_PAREN:"LEFT_PAREN",RIGHT_PAREN:"RIGHT_PAREN",LN:"LN",LOG:"LOG",LOG_N:"LOG_N",SIN:"SIN",COS:"COS",TAN:"TAN",PI:"PI",THETA:"THETA",UP:"UP",RIGHT:"RIGHT",DOWN:"DOWN",LEFT:"LEFT",BACKSPACE:"BACKSPACE",DISMISS:"DISMISS",JUMP_OUT_PARENTHESES:"JUMP_OUT_PARENTHESES",JUMP_OUT_EXPONENT:"JUMP_OUT_EXPONENT",JUMP_OUT_BASE:"JUMP_OUT_BASE",JUMP_INTO_NUMERATOR:"JUMP_INTO_NUMERATOR",JUMP_OUT_NUMERATOR:"JUMP_OUT_NUMERATOR",JUMP_OUT_DENOMINATOR:"JUMP_OUT_DENOMINATOR",NOOP:"NOOP",FRAC_MULTI:"FRAC_MULTI",MANY:"MANY"};e.exports=r},function(e,t,n){"use strict";var r=n(198),i=r.DecimalSeparators,o=void 0;o="undefined"!=typeof window&&window.icu&&","===window.icu.getDecimalFormatSymbols().decimal_separator?i.COMMA:i.PERIOD,e.exports={decimalSeparator:o}},function(e,t,n){"use strict";function r(e,t){var n;if(t.isCollapsed()){var r=t.getAnchorKey(),o=t.getAnchorOffset();return o>0?(n=e.getBlockForKey(r).getEntityAt(o-1),i(n)):null}var s=t.getStartKey(),a=t.getStartOffset(),l=e.getBlockForKey(s);return n=a===l.getLength()?null:l.getEntityAt(a),i(n)}function i(e){if(e){var t=o.get(e);return"MUTABLE"===t.getMutability()?e:null}return null}var o=n(229);e.exports=r},function(e,t,n){"use strict";function r(e){var t=e.getSelection(),n=t.getAnchorKey(),r=e.getBlockTree(n),i=t.getStartOffset(),o=!1;return r.some(function(e){return i===e.get("start")?(o=!0,!0):i<e.get("end")&&e.get("leaves").some(function(e){var t=e.get("start");return i===t?(o=!0,!0):!(i<t)&&void 0})}),o}e.exports=r},function(e,t,n){"use strict";function r(e){for(;e&&e!==document.documentElement;){var t=i(e);if(null!=t)return t;e=e.parentNode}return null}var i=n(364);e.exports=r},function(e,t,n){(function(t){"use strict";function n(e,t){var n=0,i=[];e.forEach(function(o){r(o,function(r){n++,r&&i.push(r.slice(0,s)),n==e.length&&t(i.join("\r"))})})}function r(e,n){if(!t.FileReader||e.type&&!(e.type in o))return void n("");if(""===e.type){var r="";return i.test(e.name)&&(r=e.name.replace(i,"")),void n(r)}var s=new FileReader;s.onload=function(){n(s.result)},s.onerror=function(){n("")},s.readAsText(e)}var i=/\.textClipping$/,o={"text/plain":!0,"text/html":!0,"text/rtf":!0},s=5e3;e.exports=n}).call(t,function(){return this}())},function(e,t,n){"use strict";function r(e,t,n,r,s){var a=o(e.getSelection()),l=i.decode(t),c=l.blockKey,p=e.getBlockTree(c).getIn([l.decoratorKey,"leaves",l.leafKey]),u=i.decode(r),h=u.blockKey,d=e.getBlockTree(h).getIn([u.decoratorKey,"leaves",u.leafKey]),f=p.get("start"),g=d.get("start"),m=p?f+n:null,v=d?g+s:null,y=a.getAnchorKey()===c&&a.getAnchorOffset()===m&&a.getFocusKey()===h&&a.getFocusOffset()===v;if(y)return a;var b=!1;if(c===h){var E=p.get("end"),T=d.get("end");b=g===f&&T===E?s<n:g<f}else{var w=e.getCurrentContent().getBlockMap().keySeq().skipUntil(function(e){return e===c||e===h}).first();b=w===h}return a.merge({anchorKey:c,anchorOffset:m,focusKey:h,focusOffset:v,isBackward:b})}var i=n(286),o=n(346);e.exports=r},function(e,t,n){"use strict";function r(e){return g&&(e==d||e==f)}function i(e,t,n,r){var i=a.replaceText(e.getCurrentContent(),e.getSelection(),t,n,r);return l.push(e,i,"insert-characters")}function o(e){var t=e.data;if(t){if(this.props.handleBeforeInput&&this.props.handleBeforeInput(t))return void e.preventDefault();var n=this.props.editorState,o=n.getSelection();if(!o.isCollapsed())return e.preventDefault(),void this.update(i(n,t,n.getCurrentInlineStyle(),p(n.getCurrentContent(),n.getSelection())));var a=!u(n),c=i(n,t,n.getCurrentInlineStyle(),p(n.getCurrentContent(),n.getSelection()));if(!a)return e.preventDefault(),void this.update(c);var d=o.getAnchorKey(),f=n.getBlockTree(d),g=s.getFingerprint(f),m=s.getFingerprint(c.getBlockTree(d));r(t)||g!==m||h(c.getDirectionMap()).get(d)!==h(n.getDirectionMap()).get(d)?e.preventDefault():c=l.set(c,{nativelyRenderedContent:c.getCurrentContent()}),this.update(c)}}var s=n(287),a=n(228),l=n(231),c=n(344),p=n(312),u=n(313),h=n(346),d="'",f="/",g=c.isBrowser("Firefox");e.exports=o},function(e,t,n){(function(t){"use strict";function r(e){a&&s()===document.body&&t.getSelection().removeAllRanges();var n=this.props.editorState,r=n.getSelection();if(r.getHasFocus()){var o=r.set("hasFocus",!1);this.props.onBlur&&this.props.onBlur(e),this.update(i.acceptSelection(n,o))}}var i=n(231),o=n(344),s=n(365),a=o.isEngine("WebKit");e.exports=r}).call(t,function(){return this}())},function(e,t,n){"use strict";function r(){this.setRenderGuard(),this.setMode("composite"),this.update(i.set(this.props.editorState,{inCompositionMode:!0}))}var i=n(231);e.exports=r},function(e,t,n){"use strict";function r(e){var t=this.props.editorState,n=t.getSelection();return n.isCollapsed()?void e.preventDefault():void this.setClipboard(i(this.props.editorState))}var i=n(366);e.exports=r},function(e,t,n){"use strict";function r(e){var t=this,n=this.props.editorState,r=n.getSelection();if(r.isCollapsed())return void e.preventDefault();var o=a.getScrollParent(e.target),s=c(o),p=s.x,u=s.y,h=l(n);this.setClipboard(h),this.setRenderGuard(),this.setMode("cut"),setTimeout(function(){t.restoreEditorDOM({x:p,y:u}),t.removeRenderGuard(),t.exitCurrentMode(),t.update(i(n))},0)}function i(e){var t=o.removeRange(e.getCurrentContent(),e.getSelection(),"forward");return s.push(e,t,"remove-range")}var o=n(228),s=n(231),a=n(343),l=n(366),c=n(347);e.exports=r},function(e,t,n){"use strict";function r(e){this._internalDrag=!1,this.setMode("drag"),e.preventDefault()}e.exports=r},function(e,t,n){"use strict";function r(){this._internalDrag=!0,this.setMode("drag")}e.exports=r},function(e,t,n){"use strict";function r(e){var t=this.props.editorState,n=t.getSelection();if(!n.getHasFocus()){var r=n.set("hasFocus",!0);this.props.onFocus&&this.props.onFocus(e),this.update(i.forceSelection(t,r))}}var i=n(231);e.exports=r},function(e,t,n){(function(t){"use strict";function r(){var e=t.getSelection(),n=e.anchorNode,r=e.isCollapsed;if(n.nodeType===Node.TEXT_NODE){var l=n.textContent,d=this.props.editorState,f=p(c(n)),g=o.decode(f),m=g.blockKey,v=g.decoratorKey,y=g.leafKey,b=d.getBlockTree(m).getIn([v,"leaves",y]),E=b.start,T=b.end,w=d.getCurrentContent(),x=w.getBlockForKey(m),C=x.getText().slice(E,T);if(l.endsWith(h)&&(l=l.slice(0,-1)),l!==C){var S,P,k,_,M=d.getSelection(),O=M.merge({anchorOffset:E,focusOffset:T,isBackward:!1}),N=x.getEntityAt(E),I=N&&a.get(N),A=I&&I.getMutability(),R="MUTABLE"===A,D=R?"spellcheck-change":"apply-entity",L=i.replaceText(w,O,l,x.getInlineStyleAt(E),R?x.getEntityAt(E):null);if(u)S=e.anchorOffset,P=e.focusOffset,k=E+Math.min(S,P),_=k+Math.abs(S-P),S=k,P=_;else{var F=l.length-C.length;k=M.getStartOffset(),_=M.getEndOffset(),S=r?_+F:k,P=_+F}var B=L.merge({selectionBefore:w.getSelectionAfter(),selectionAfter:M.merge({anchorOffset:S,focusOffset:P})});this.update(s.push(d,B,D))}}}var i=n(228),o=n(286),s=n(231),a=n(229),l=n(344),c=n(314),p=n(346),u=l.isEngine("Gecko"),h="\n\n";e.exports=r}).call(t,function(){return this}())},function(e,t,n){"use strict";function r(e,t){switch(e){case"redo":return s.redo(t);case"delete":return m(t);case"delete-word":return d(t);case"backspace":return g(t);case"backspace-word":return h(t);case"backspace-to-start-of-line":return u(t);case"split-block":return f(t);case"transpose-characters":return b(t);case"move-selection-to-start-of-block":return y(t);case"move-selection-to-end-of-block":return v(t);case"secondary-cut":return c.cut(t);case"secondary-paste":return c.paste(t);default:return t}}function i(e){var t=e.which,n=this.props.editorState;switch(t){case l.RETURN:if(e.preventDefault(),this.props.handleReturn&&this.props.handleReturn(e))return;break;case l.ESC:return e.preventDefault(),void(this.props.onEscape&&this.props.onEscape(e));case l.TAB:return void(this.props.onTab&&this.props.onTab(e));case l.UP:return void(this.props.onUpArrow&&this.props.onUpArrow(e));case l.DOWN:return void(this.props.onDownArrow&&this.props.onDownArrow(e));case l.SPACE:if(w&&T(e)){e.preventDefault();var i=o.replaceText(n.getCurrentContent(),n.getSelection()," ");return void this.update(s.push(n,i,"insert-characters"))}}var a=this.props.keyBindingFn(e);if(a){if("undo"===a)return void E(e,n,this.update);if(e.preventDefault(),!this.props.handleKeyCommand||!this.props.handleKeyCommand(a)){var c=r(a,n);c!==n&&this.update(c)}}}var o=n(228),s=n(231),a=n(232),l=n(354),c=n(367),p=n(344),u=n(368),h=n(369),d=n(370),f=n(371),g=n(372),m=n(373),v=n(374),y=n(375),b=n(376),E=n(377),T=a.isOptionKeyCommand,w=p.isBrowser("Chrome");e.exports=i},function(e,t,n){"use strict";function r(e){var t=this;e.preventDefault();var n=new a(e.clipboardData);if(!n.isRichText()){var r=n.getFiles(),f=n.getText();if(r.length>0){if(this.props.handlePastedFiles&&this.props.handlePastedFiles(r))return;return void h(r,function(e){if(e=e||f){var n=t.props.editorState,r=d(e),i=s.create({style:n.getCurrentInlineStyle(),entity:u(n.getCurrentContent(),n.getSelection())}),a=c.processText(r,i),h=o.createFromArray(a),g=l.replaceWithFragment(n.getCurrentContent(),n.getSelection(),h);t.update(p.push(n,g,"insert-fragment"))}})}}var g=[],m=n.getText(),v=n.getHTML();if(!this.props.handlePastedText||!this.props.handlePastedText(m,v)){if(m&&(g=d(m)),!this.props.stripPastedStyles){var y=this.getClipboard();if(n.isRichText()&&y&&(v.indexOf(this.getEditorKey())!==-1||1===g.length&&1===y.size&&y.first().getText()===m))return void this.update(i(this.props.editorState,y));if(v){var b=c.processHTML(v,this.props.blockRenderMap);if(b){var E=o.createFromArray(b);return void this.update(i(this.props.editorState,E))}}this.setClipboard(null)}if(g){var T=this.props.editorState,w=s.create({style:T.getCurrentInlineStyle(),entity:u(T.getCurrentContent(),T.getSelection())}),x=c.processText(g,w),C=o.createFromArray(x);this.update(i(this.props.editorState,C))}}}function i(e,t){var n=l.replaceWithFragment(e.getCurrentContent(),e.getSelection(),t);return p.push(e,n,"insert-fragment")}var o=n(219),s=n(220),a=n(356),l=n(228),c=n(378),p=n(231),u=n(312),h=n(315),d=n(379);e.exports=r},function(e,t,n){"use strict";function r(){if(!this._blockSelectEvents){var e=this.props.editorState,t=s(e,o.findDOMNode(this.refs.editorContainer).firstChild),n=t.selectionState;n!==e.getSelection()&&(e=t.needsRecovery?i.forceSelection(e,n):i.acceptSelection(e,n),this.update(e))}}var i=n(231),o=n(19),s=n(380);e.exports=r},function(e,t,n){"use strict";function r(e,t,n,r){for(var o=e.getCharacterList();t<n;)o=o.set(t,i.applyEntity(o.get(t),r)),t++;return e.set("characterList",o)}var i=n(220);e.exports=r},function(e,t,n){"use strict";var r={getRemovalRange:function(e,t,n,r,i){var o=n.split(" ");o=o.map(function(e,t){if("forward"===i){if(t>0)return" "+e}else if(t<o.length-1)return e+" ";return e});for(var s,a,l=r,c=null,p=null,u=0;u<o.length;u++){if(a=o[u],s=l+a.length,e<s&&l<t)null!==c?p=s:(c=l,p=s);else if(null!==c)break;l=s}var h=r+n.length,d=c===r,f=p===h;return(!d&&f||d&&!f)&&("forward"===i?p!==h&&p++:c!==r&&c--),{start:c,end:p}}};e.exports=r},function(e,t,n){"use strict";function r(e,t){var n=[];return e.findEntityRanges(function(e){return e.getEntity()===t},function(e,t){n.push({start:e,end:t})}),n.length?void 0:i(!1),n}var i=n(348);e.exports=r},function(e,t,n){"use strict";function r(e,t,n){if(n===e.count())t.forEach(function(t){
e=e.push(t)});else if(0===n)t.reverse().forEach(function(t){e=e.unshift(t)});else{var r=e.slice(0,n),i=e.slice(n);e=r.concat(t,i).toList()}return e}e.exports=r},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function o(e){return u?"\n"===e.textContent:"BR"===e.tagName}var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=function(e,t,n){for(var r=!0;r;){var i=e,o=t,s=n;r=!1,null===i&&(i=Function.prototype);var a=Object.getOwnPropertyDescriptor(i,o);if(void 0!==a){if("value"in a)return a.value;var l=a.get;if(void 0===l)return;return l.call(s)}var c=Object.getPrototypeOf(i);if(null===c)return;e=c,t=o,n=s,r=!0,a=c=void 0}},l=n(17),c=n(19),p=n(344),u=p.isBrowser("IE <= 11"),h=u?l.createElement("span",{key:"A","data-text":"true"},"\n"):l.createElement("br",{key:"A","data-text":"true"}),d=u?l.createElement("span",{key:"B","data-text":"true"},"\n"):l.createElement("br",{key:"B","data-text":"true"}),f=function(e){function t(e){r(this,t),a(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,e),this._forceFlag=!1}return i(t,e),s(t,[{key:"shouldComponentUpdate",value:function(e){var t=c.findDOMNode(this),n=""===e.children;return n?!o(t):t.textContent!==e.children}},{key:"componentWillUpdate",value:function(){this._forceFlag=!this._forceFlag}},{key:"render",value:function(){return""===this.props.children?this._forceFlag?h:d:l.createElement("span",{key:this._forceFlag?"A":"B","data-text":"true"},this.props.children)}}]),t}(l.Component);e.exports=f},function(e,t,n){(function(t){"use strict";function r(e,n,r,a,l){if(s(document.documentElement,n)){var c=t.getSelection(),p=e.getAnchorKey(),u=e.getAnchorOffset(),h=e.getFocusKey(),d=e.getFocusOffset(),f=e.getIsBackward();if(!c.extend&&f){var g=p,m=u;p=h,u=d,h=g,d=m,f=!1}var v=p===r&&a<=u&&l>=u,y=h===r&&a<=d&&l>=d;if(v&&y)return c.removeAllRanges(),o(c,n,u-a),void i(c,n,d-a);if(f){if(y&&(c.removeAllRanges(),o(c,n,d-a)),v){var b=c.focusNode,E=c.focusOffset;c.removeAllRanges(),o(c,n,u-a),i(c,b,E)}}else v&&(c.removeAllRanges(),o(c,n,u-a)),y&&i(c,n,d-a)}}function i(e,t,n){if(e.extend&&s(a(),t))e.extend(t,n);else{var r=e.getRangeAt(0);r.setEnd(t,n),e.addRange(r.cloneRange())}}function o(e,t,n){var r=document.createRange();r.setStart(t,n),e.addRange(r)}var s=n(381),a=n(365);e.exports=r}).call(t,function(){return this}())},function(e,t,n){"use strict";function r(e){for(var t=e.cloneRange(),n=[],r=e.endContainer;null!=r;r=r.parentNode){var i=r===e.commonAncestorContainer;i?t.setStart(e.startContainer,e.startOffset):t.setStart(t.endContainer,0);var s=Array.from(t.getClientRects());if(n.push(s),i){var a;return n.reverse(),(a=[]).concat.apply(a,n)}t.setEndBefore(r)}o(!1)}var i=n(344),o=n(348),s=i.isBrowser("Chrome"),a=s?r:function(e){return Array.from(e.getClientRects())};e.exports=a},function(e,t,n){"use strict";var r=n(198),i=r.DeviceTypes,o=r.DeviceOrientations,s=r.LayoutModes,a=n(266),l=a.pageIndicatorHeightPx,c=a.toolbarHeightPx,p=a.navigationPadWidthPx,u=a.innerBorderWidthPx,h=48,d=64,f=32,g=44,m=64,v=44,y=g+v,b=v+(m-g),E=320/(480-g),T=function(e,t,n,r){var a=e.numColumns,g=e.numMaxVisibleRows,m=e.numPages,v=t.pageWidthPx,T=t.pageHeightPx,w=n.deviceOrientation,x=n.deviceType,C=r.navigationPadEnabled,S=r.paginationEnabled,P=r.toolbarEnabled,k=S?a:a*m,_=void 0;if(x===i.PHONE){var M=w===o.LANDSCAPE,O=M?y:b,N=f+O+(P?c:0)+(S?l:0),I=v,A=M?T:v/E,R=A-N,D=Math.max(Math.min(R/g,d),h),L=void 0;if(m>1){var F=S?a:a*m;L=I/F}else L=M?d:I/a;_={widthPx:L,heightPx:D}}else{if(x!==i.TABLET)throw new Error("Invalid device type: "+x);_={widthPx:d,heightPx:d}}var B=(C?1:0)+(S?0:m-1),z=k*_.widthPx+(C?p:0)+B*u;return{buttonDimensions:_,layoutMode:z>=v?s.FULLSCREEN:s.COMPACT}};e.exports=T},function(e,t,n){"use strict";function r(e,t){var n={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},s=n(382),a=n(383),l=n(384),c=function(e){return[e.changedTouches[0].clientX,e.changedTouches[0].clientY]},p=function(){function e(t,n,c,p){var u=this;i(this,e);var h=t.swipeEnabled;this.swipeEnabled=h,this.trackEvents=!1,this.nodeManager=new s,this.popoverStateMachine=new a({onActiveNodesChanged:function(e){var t=e.popover,i=r(e,["popover"]);n.onActiveNodesChanged(o({popover:t&&{parentId:t.parentId,bounds:u.nodeManager.layoutPropsForId(t.parentId).initialBounds,childKeyIds:t.childIds}},i))},onClick:function(e,t,r){n.onClick(e,u.nodeManager.layoutPropsForId(t),r)}}),this.gestureStateMachine=new l({onFocus:function(e){u.popoverStateMachine.onFocus(e)},onLongPress:function(e){u.popoverStateMachine.onLongPress(e)},onTouchEnd:function(e){u.popoverStateMachine.onTouchEnd(e)},onBlur:function(){u.popoverStateMachine.onBlur()},onSwipeChange:n.onSwipeChange,onSwipeEnd:n.onSwipeEnd,onTrigger:function(e){u.popoverStateMachine.onTrigger(e)}},{},c,p)}return e.prototype.onTouchStart=function(e,t){if(this.trackEvents){for(var n=c(e),r=n[0],i=0;i<e.changedTouches.length;i++)this.gestureStateMachine.onTouchStart(function(){return t},e.changedTouches[i].identifier,r);e.preventDefault()}},e.prototype.onTouchMove=function(e){var t=this;if(this.trackEvents)for(var n=this.popoverStateMachine.isPopoverVisible(),r=this.swipeEnabled&&!n,i=c(e),o=i[0],s=i[1],a=0;a<e.changedTouches.length;a++)this.gestureStateMachine.onTouchMove(function(){return t.nodeManager.idForCoords(o,s)},e.changedTouches[a].identifier,o,r)},e.prototype.onTouchEnd=function(e){var t=this;if(this.trackEvents)for(var n=c(e),r=n[0],i=n[1],o=0;o<e.changedTouches.length;o++)this.gestureStateMachine.onTouchEnd(function(){return t.nodeManager.idForCoords(r,i)},e.changedTouches[o].identifier,r)},e.prototype.onTouchCancel=function(e){if(this.trackEvents)for(var t=0;t<e.changedTouches.length;t++)this.gestureStateMachine.onTouchCancel(e.changedTouches[t].identifier)},e.prototype.registerDOMNode=function(e,t,n,r){this.nodeManager.registerDOMNode(e,t,n,r),this.popoverStateMachine.registerPopover(e,n)},e.prototype.unregisterDOMNode=function(e){this.nodeManager.unregisterDOMNode(e),this.popoverStateMachine.unregisterPopover(e)},e.prototype.enableEventTracking=function(){this.trackEvents=!0},e.prototype.disableEventTracking=function(){this.trackEvents=!1},e}();e.exports=p},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},o=n(418),s=function(){function e(t){r(this,e),this.options=i({velocityTimeout:100},t),this._events=[]}return e.prototype.push=function(e){this._events.push({x:e,t:o()})},e.prototype.getVelocity=function(){var e=this._getEvents();if(e.length<2)return 0;var t=e[e.length-1],n=e[0],r=t.t-n.t;return(t.x-n.x)/r},e.prototype._getEvents=function(){var e=o()-this.options.velocityTimeout,t=this._events.filter(function(t){return t.t>e});return this._events=[],t},e}();e.exports=s},function(e,t,n){"use strict";var r=n(17),i=n(52),o=i.StyleSheet,s=i.css,a=r.createClass({displayName:"Text",propTypes:{children:r.PropTypes.oneOfType([r.PropTypes.arrayOf(r.PropTypes.node),r.PropTypes.node]),dynamicStyle:r.PropTypes.any,numberOfLines:r.PropTypes.number,style:r.PropTypes.any},render:function(){var e=this.props,t=e.numberOfLines,n=e.style,i=s.apply(void 0,[l.initial].concat(Array.isArray(n)?n:[n],[1===t&&l.singleLineStyle]));return r.createElement("span",{className:i,style:this.props.dynamicStyle},this.props.children)}}),l=o.create({initial:{color:"inherit",display:"inline",font:"inherit",margin:0,padding:0,textDecorationLine:"none",wordWrap:"break-word"},singleLineStyle:{maxWidth:"100%",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"}});e.exports=a},function(e,t,n){"use strict";var r=n(17),i=n(52),o=i.StyleSheet,s=i.css,a=r.createClass({displayName:"View",propTypes:{ariaLabel:r.PropTypes.string,children:r.PropTypes.oneOfType([r.PropTypes.arrayOf(r.PropTypes.node),r.PropTypes.node]),dynamicStyle:r.PropTypes.any,numberOfLines:r.PropTypes.number,onClick:r.PropTypes.func,onTouchCancel:r.PropTypes.func,onTouchEnd:r.PropTypes.func,onTouchMove:r.PropTypes.func,onTouchStart:r.PropTypes.func,role:r.PropTypes.string,style:r.PropTypes.any},statics:{styles:o.create({initial:{alignItems:"stretch",borderWidth:0,borderStyle:"solid",boxSizing:"border-box",display:"flex",flexBasis:"auto",flexDirection:"column",margin:0,padding:0,position:"relative",backgroundColor:"transparent",color:"inherit",font:"inherit",textAlign:"inherit",textDecorationLine:"none",listStyle:"none",maxWidth:"100%",minHeight:0,minWidth:0}})},render:function(){var e=s.apply(void 0,[a.styles.initial].concat(Array.isArray(this.props.style)?this.props.style:[this.props.style]));return r.createElement("div",{className:e,style:this.props.dynamicStyle,onClick:this.props.onClick,onTouchCancel:this.props.onTouchCancel,onTouchEnd:this.props.onTouchEnd,onTouchMove:this.props.onTouchMove,onTouchStart:this.props.onTouchStart,"aria-label":this.props.ariaLabel,role:this.props.role},this.props.children)}});e.exports=a},function(e,t,n){"use strict";function r(e){return"object"==typeof e?Object.keys(e).filter(function(t){return e[t]}).map(i).join(" "):Array.prototype.map.call(arguments,i).join(" ")}function i(e){return e.replace(/\//g,"-")}e.exports=r},function(e,t,n){"use strict";function r(e,t){return!!t&&(e===t.documentElement||e===t.body)}var i={getTop:function(e){var t=e.ownerDocument;return r(e,t)?t.body.scrollTop||t.documentElement.scrollTop:e.scrollTop},setTop:function(e,t){var n=e.ownerDocument;r(e,n)?n.body.scrollTop=n.documentElement.scrollTop=t:e.scrollTop=t},getLeft:function(e){var t=e.ownerDocument;return r(e,t)?t.body.scrollLeft||t.documentElement.scrollLeft:e.scrollLeft},setLeft:function(e,t){var n=e.ownerDocument;r(e,n)?n.body.scrollLeft=n.documentElement.scrollLeft=t:e.scrollLeft=t}};e.exports=i},function(e,t,n){"use strict";function r(e,t){var n=o.get(e,t);return"auto"===n||"scroll"===n}var i=n(385),o={get:i,getScrollParent:function(e){if(!e)return null;for(;e&&e!==document.body;){if(r(e,"overflow")||r(e,"overflowY")||r(e,"overflowX"))return e;e=e.parentNode}return window}};e.exports=o},function(e,t,n){"use strict";function r(e,t,n,r){if(e===n)return!0;if(!n.startsWith(e))return!1;var i=n.slice(e.length);return!!t&&(i=r?r(i):i,s.contains(i,t))}function i(e){return"Windows"===o.platformName?e.replace(/^\s*NT/,""):e}var o=n(386),s=n(387),a=n(388),l=n(389),c={isBrowser:function(e){return r(o.browserName,o.browserFullVersion,e)},isBrowserArchitecture:function(e){return r(o.browserArchitecture,null,e)},isDevice:function(e){return r(o.deviceName,null,e)},isEngine:function(e){return r(o.engineName,o.engineVersion,e)},isPlatform:function(e){return r(o.platformName,o.platformFullVersion,e,i)},isPlatformArchitecture:function(e){return r(o.platformArchitecture,null,e)}};e.exports=a(c,l)},function(e,t,n){"use strict";function r(e){return function(){return e}}var i=function(){};i.thatReturns=r,i.thatReturnsFalse=r(!1),i.thatReturnsTrue=r(!0),i.thatReturnsNull=r(null),i.thatReturnsThis=function(){return this},i.thatReturnsArgument=function(e){return e},e.exports=i},function(e,t,n){"use strict";var r=function(e){if(null!=e)return e;throw new Error("Got unexpected null or undefined")};e.exports=r},function(e,t,n){"use strict";function r(e){var t=i();e===window&&(e=t);var n=o(e),r=e===t?document.documentElement:e,s=e.scrollWidth-r.clientWidth,a=e.scrollHeight-r.clientHeight;return n.x=Math.max(0,Math.min(n.x,s)),n.y=Math.max(0,Math.min(n.y,a)),n}var i=n(390),o=n(391);e.exports=r},function(e,t,n){"use strict";function r(e,t,n,r,i,o,s,a){if(!e){var l;if(void 0===t)l=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var c=[n,r,i,o,s,a],p=0;l=new Error(t.replace(/%s/g,function(){return c[p++]})),l.name="Invariant Violation"}throw l.framesToPop=1,l}}e.exports=r},function(e,t,n){"use strict";function r(e){var t=h.exec(e);return null==t?null:t[0]}function i(e){var t=r(e);return null==t?c.NEUTRAL:d.exec(t)?c.RTL:c.LTR}function o(e,t){if(t=t||c.NEUTRAL,!e.length)return t;var n=i(e);return n===c.NEUTRAL?t:n}function s(e,t){return t||(t=c.getGlobalDir()),c.isStrong(t)?void 0:p(!1),o(e,t)}function a(e,t){return s(e,t)===c.LTR}function l(e,t){return s(e,t)===c.RTL}var c=n(350),p=n(348),u={L:"A-Za-zªµºÀ-ÖØ-öø-ƺƻƼ-ƿǀ-ǃǄ-ʓʔʕ-ʯʰ-ʸʻ-ˁː-ˑˠ-ˤˮͰ-ͳͶ-ͷͺͻ-ͽͿΆΈ-ΊΌΎ-ΡΣ-ϵϷ-ҁ҂Ҋ-ԯԱ-Ֆՙ՚-՟ա-և։ःऄ-हऻऽा-ीॉ-ौॎ-ॏॐक़-ॡ।-॥०-९॰ॱॲ-ঀং-ঃঅ-ঌএ-ঐও-নপ-রলশ-হঽা-ীে-ৈো-ৌৎৗড়-ঢ়য়-ৡ০-৯ৰ-ৱ৴-৹৺ਃਅ-ਊਏ-ਐਓ-ਨਪ-ਰਲ-ਲ਼ਵ-ਸ਼ਸ-ਹਾ-ੀਖ਼-ੜਫ਼੦-੯ੲ-ੴઃઅ-ઍએ-ઑઓ-નપ-રલ-ળવ-હઽા-ીૉો-ૌૐૠ-ૡ૦-૯૰ଂ-ଃଅ-ଌଏ-ଐଓ-ନପ-ରଲ-ଳଵ-ହଽାୀେ-ୈୋ-ୌୗଡ଼-ଢ଼ୟ-ୡ୦-୯୰ୱ୲-୷ஃஅ-ஊஎ-ஐஒ-கங-சஜஞ-டண-தந-பம-ஹா-ிு-ூெ-ைொ-ௌௐௗ௦-௯௰-௲ఁ-ఃఅ-ఌఎ-ఐఒ-నప-హఽు-ౄౘ-ౙౠ-ౡ౦-౯౿ಂ-ಃಅ-ಌಎ-ಐಒ-ನಪ-ಳವ-ಹಽಾಿೀ-ೄೆೇ-ೈೊ-ೋೕ-ೖೞೠ-ೡ೦-೯ೱ-ೲം-ഃഅ-ഌഎ-ഐഒ-ഺഽാ-ീെ-ൈൊ-ൌൎൗൠ-ൡ൦-൯൰-൵൹ൺ-ൿං-ඃඅ-ඖක-නඳ-රලව-ෆා-ෑෘ-ෟ෦-෯ෲ-ෳ෴ก-ะา-ำเ-ๅๆ๏๐-๙๚-๛ກ-ຂຄງ-ຈຊຍດ-ທນ-ຟມ-ຣລວສ-ຫອ-ະາ-ຳຽເ-ໄໆ໐-໙ໜ-ໟༀ༁-༃༄-༒༓༔༕-༗༚-༟༠-༩༪-༳༴༶༸༾-༿ཀ-ཇཉ-ཬཿ྅ྈ-ྌ྾-࿅࿇-࿌࿎-࿏࿐-࿔࿕-࿘࿙-࿚က-ဪါ-ာေးျ-ြဿ၀-၉၊-၏ၐ-ၕၖ-ၗၚ-ၝၡၢ-ၤၥ-ၦၧ-ၭၮ-ၰၵ-ႁႃ-ႄႇ-ႌႎႏ႐-႙ႚ-ႜ႞-႟Ⴀ-ჅჇჍა-ჺ჻ჼჽ-ቈቊ-ቍቐ-ቖቘቚ-ቝበ-ኈኊ-ኍነ-ኰኲ-ኵኸ-ኾዀዂ-ዅወ-ዖዘ-ጐጒ-ጕጘ-ፚ፠-፨፩-፼ᎀ-ᎏᎠ-Ᏼᐁ-ᙬ᙭-᙮ᙯ-ᙿᚁ-ᚚᚠ-ᛪ᛫-᛭ᛮ-ᛰᛱ-ᛸᜀ-ᜌᜎ-ᜑᜠ-ᜱ᜵-᜶ᝀ-ᝑᝠ-ᝬᝮ-ᝰក-ឳាើ-ៅះ-ៈ។-៖ៗ៘-៚ៜ០-៩᠐-᠙ᠠ-ᡂᡃᡄ-ᡷᢀ-ᢨᢪᢰ-ᣵᤀ-ᤞᤣ-ᤦᤩ-ᤫᤰ-ᤱᤳ-ᤸ᥆-᥏ᥐ-ᥭᥰ-ᥴᦀ-ᦫᦰ-ᧀᧁ-ᧇᧈ-ᧉ᧐-᧙᧚ᨀ-ᨖᨙ-ᨚ᨞-᨟ᨠ-ᩔᩕᩗᩡᩣ-ᩤᩭ-ᩲ᪀-᪉᪐-᪙᪠-᪦ᪧ᪨-᪭ᬄᬅ-ᬳᬵᬻᬽ-ᭁᭃ-᭄ᭅ-ᭋ᭐-᭙᭚-᭠᭡-᭪᭴-᭼ᮂᮃ-ᮠᮡᮦ-ᮧ᮪ᮮ-ᮯ᮰-᮹ᮺ-ᯥᯧᯪ-ᯬᯮ᯲-᯳᯼-᯿ᰀ-ᰣᰤ-ᰫᰴ-ᰵ᰻-᰿᱀-᱉ᱍ-ᱏ᱐-᱙ᱚ-ᱷᱸ-ᱽ᱾-᱿᳀-᳇᳓᳡ᳩ-ᳬᳮ-ᳱᳲ-ᳳᳵ-ᳶᴀ-ᴫᴬ-ᵪᵫ-ᵷᵸᵹ-ᶚᶛ-ᶿḀ-ἕἘ-Ἕἠ-ὅὈ-Ὅὐ-ὗὙὛὝὟ-ώᾀ-ᾴᾶ-ᾼιῂ-ῄῆ-ῌῐ-ΐῖ-Ίῠ-Ῥῲ-ῴῶ-ῼ‎ⁱⁿₐ-ₜℂℇℊ-ℓℕℙ-ℝℤΩℨK-ℭℯ-ℴℵ-ℸℹℼ-ℿⅅ-ⅉⅎ⅏Ⅰ-ↂↃ-ↄↅ-ↈ⌶-⍺⎕⒜-ⓩ⚬⠀-⣿Ⰰ-Ⱞⰰ-ⱞⱠ-ⱻⱼ-ⱽⱾ-ⳤⳫ-ⳮⳲ-ⳳⴀ-ⴥⴧⴭⴰ-ⵧⵯ⵰ⶀ-ⶖⶠ-ⶦⶨ-ⶮⶰ-ⶶⶸ-ⶾⷀ-ⷆⷈ-ⷎⷐ-ⷖⷘ-ⷞ々〆〇〡-〩〮-〯〱-〵〸-〺〻〼ぁ-ゖゝ-ゞゟァ-ヺー-ヾヿㄅ-ㄭㄱ-ㆎ㆐-㆑㆒-㆕㆖-㆟ㆠ-ㆺㇰ-ㇿ㈀-㈜㈠-㈩㈪-㉇㉈-㉏㉠-㉻㉿㊀-㊉㊊-㊰㋀-㋋㋐-㋾㌀-㍶㍻-㏝㏠-㏾㐀-䶵一-鿌ꀀ-ꀔꀕꀖ-ꒌꓐ-ꓷꓸ-ꓽ꓾-꓿ꔀ-ꘋꘌꘐ-ꘟ꘠-꘩ꘪ-ꘫꙀ-ꙭꙮꚀ-ꚛꚜ-ꚝꚠ-ꛥꛦ-ꛯ꛲-꛷Ꜣ-ꝯꝰꝱ-ꞇ꞉-꞊Ꞌ-ꞎꞐ-ꞭꞰ-Ʇꟷꟸ-ꟹꟺꟻ-ꠁꠃ-ꠅꠇ-ꠊꠌ-ꠢꠣ-ꠤꠧ꠰-꠵꠶-꠷ꡀ-ꡳꢀ-ꢁꢂ-ꢳꢴ-ꣃ꣎-꣏꣐-꣙ꣲ-ꣷ꣸-꣺ꣻ꤀-꤉ꤊ-ꤥ꤮-꤯ꤰ-ꥆꥒ-꥓꥟ꥠ-ꥼꦃꦄ-ꦲꦴ-ꦵꦺ-ꦻꦽ-꧀꧁-꧍ꧏ꧐-꧙꧞-꧟ꧠ-ꧤꧦꧧ-ꧯ꧰-꧹ꧺ-ꧾꨀ-ꨨꨯ-ꨰꨳ-ꨴꩀ-ꩂꩄ-ꩋꩍ꩐-꩙꩜-꩟ꩠ-ꩯꩰꩱ-ꩶ꩷-꩹ꩺꩻꩽꩾ-ꪯꪱꪵ-ꪶꪹ-ꪽꫀꫂꫛ-ꫜꫝ꫞-꫟ꫠ-ꫪꫫꫮ-ꫯ꫰-꫱ꫲꫳ-ꫴꫵꬁ-ꬆꬉ-ꬎꬑ-ꬖꬠ-ꬦꬨ-ꬮꬰ-ꭚ꭛ꭜ-ꭟꭤ-ꭥꯀ-ꯢꯣ-ꯤꯦ-ꯧꯩ-ꯪ꯫꯬꯰-꯹가-힣ힰ-ퟆퟋ-ퟻ-豈-舘並-龎ﬀ-ﬆﬓ-ﬗＡ-Ｚａ-ｚｦ-ｯｰｱ-ﾝﾞ-ﾟﾠ-ﾾￂ-ￇￊ-ￏￒ-ￗￚ-ￜ",R:"֐־׀׃׆׈-׏א-ת׫-ׯװ-ײ׳-״׵-׿߀-߉ߊ-ߪߴ-ߵߺ߻-߿ࠀ-ࠕࠚࠤࠨ࠮-࠯࠰-࠾࠿ࡀ-ࡘ࡜-࡝࡞࡟-࢟‏יִײַ-ﬨשׁ-זּ﬷טּ-לּ﬽מּ﬿נּ-סּ﭂ףּ-פּ﭅צּ-ﭏ",AL:"؈؋؍؛؜؝؞-؟ؠ-ؿـف-ي٭ٮ-ٯٱ-ۓ۔ەۥ-ۦۮ-ۯۺ-ۼ۽-۾ۿ܀-܍܎܏ܐܒ-ܯ݋-݌ݍ-ޥޱ޲-޿ࢠ-ࢲࢳ-ࣣﭐ-ﮱ﮲-﯁﯂-﯒ﯓ-ﴽ﵀-﵏ﵐ-ﶏ﶐-﶑ﶒ-ﷇ﷈-﷏ﷰ-ﷻ﷼﷾-﷿ﹰ-ﹴ﹵ﹶ-ﻼ﻽-﻾"},h=new RegExp("["+u.L+u.R+u.AL+"]"),d=new RegExp("["+u.R+u.AL+"]"),f={firstStrongChar:r,firstStrongCharDir:i,resolveBlockDir:o,getDirection:s,isDirectionLTR:a,isDirectionRTL:l};e.exports=f},function(e,t,n){"use strict";function r(e){return e===u||e===h}function i(e){return r(e)?void 0:c(!1),e===u?"ltr":"rtl"}function o(e,t){return r(e)?void 0:c(!1),r(t)?void 0:c(!1),e===t?null:i(e)}function s(e){d=e}function a(){s(u)}function l(){return d||this.initGlobalDir(),d?void 0:c(!1),d}var c=n(348),p="NEUTRAL",u="LTR",h="RTL",d=null,f={NEUTRAL:p,LTR:u,RTL:h,isStrong:r,getHTMLDir:i,getHTMLDirIfDifferent:o,setGlobalDir:s,initGlobalDir:a,getGlobalDir:l};e.exports=f},function(e,t,n){"use strict";function r(e){var t=i(e);return{x:t.left,y:t.top,width:t.right-t.left,height:t.bottom-t.top}}var i=n(392);e.exports=r},function(e,t,n){"use strict";function r(){var e=void 0;return document.documentElement&&(e=document.documentElement.clientWidth),!e&&document.body&&(e=document.body.clientWidth),e||0}function i(){var e=void 0;return document.documentElement&&(e=document.documentElement.clientHeight),!e&&document.body&&(e=document.body.clientHeight),e||0}function o(){return{width:window.innerWidth||r(),height:window.innerHeight||i()}}o.withoutScrollbars=function(){return{width:r(),height:i()}},e.exports=o},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var i=function(){function e(t){r(this,e),this._uri=t}return e.prototype.toString=function(){return this._uri},e}();e.exports=i},function(e,t,n){"use strict";e.exports={BACKSPACE:8,TAB:9,RETURN:13,ALT:18,ESC:27,SPACE:32,PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,LEFT:37,UP:38,RIGHT:39,DOWN:40,DELETE:46,COMMA:188,PERIOD:190,A:65,Z:90,ZERO:48,NUMPAD_0:96,NUMPAD_9:105}},function(e,t,n){"use strict";function r(e){e||(e="");var t=void 0,n=arguments.length;if(n>1)for(var r=1;r<n;r++)t=arguments[r],t&&(e=(e?e+" ":"")+t);return e}e.exports=r},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e){if("file"==e.kind)return e.getAsFile()}var o=n(393),s=n(394),a=n(345),l=new RegExp("\r\n","g"),c="\n",p={"text/rtf":1,"text/html":1},u=function(){function e(t){r(this,e),this.data=t,this.types=t.types?s(t.types):[]}return e.prototype.isRichText=function(){return!(!this.getHTML()||!this.getText())||!this.isImage()&&this.types.some(function(e){return p[e]})},e.prototype.getText=function(){var e;return this.data.getData&&(this.types.length?this.types.indexOf("text/plain")!=-1&&(e=this.data.getData("text/plain")):e=this.data.getData("Text")),e?e.replace(l,c):null},e.prototype.getHTML=function(){if(this.data.getData){if(!this.types.length)return this.data.getData("Text");if(this.types.indexOf("text/html")!=-1)return this.data.getData("text/html")}},e.prototype.isLink=function(){return this.types.some(function(e){return e.indexOf("Url")!=-1||e.indexOf("text/uri-list")!=-1||e.indexOf("text/x-moz-url")})},e.prototype.getLink=function(){if(this.data.getData){if(this.types.indexOf("text/x-moz-url")!=-1){var e=this.data.getData("text/x-moz-url").split("\n");return e[0]}return this.types.indexOf("text/uri-list")!=-1?this.data.getData("text/uri-list"):this.data.getData("url")}return null},e.prototype.isImage=function e(){var e=this.types.some(function(e){return e.indexOf("application/x-moz-file")!=-1});if(e)return!0;for(var t=this.getFiles(),n=0;n<t.length;n++){var r=t[n].type;if(!o.isImage(r))return!1}return!0},e.prototype.getCount=function(){return this.data.hasOwnProperty("items")?this.data.items.length:this.data.hasOwnProperty("mozItemCount")?this.data.mozItemCount:this.data.files?this.data.files.length:null},e.prototype.getFiles=function(){return this.data.items?Array.prototype.slice.call(this.data.items).map(i).filter(a.thatReturnsArgument):this.data.files?Array.prototype.slice.call(this.data.files):[]},e.prototype.hasFiles=function(){return this.getFiles().length>0},e}();e.exports=u},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var i=n(349),o=n(350),s=n(348),a=function(){function e(t){r(this,e),t?o.isStrong(t)?void 0:s(!1):t=o.getGlobalDir(),this._defaultDir=t,this.reset()}return e.prototype.reset=function(){this._lastDir=this._defaultDir},e.prototype.getDirection=function(e){return this._lastDir=i.getDirection(e,this._lastDir),this._lastDir},e}();e.exports=a},function(e,t,n){"use strict";function r(e){return h<=e&&e<=g}function i(e,t){if(0<=t&&t<e.length?void 0:u(!1),t+1===e.length)return!1;var n=e.charCodeAt(t),r=e.charCodeAt(t+1);return h<=n&&n<=d&&f<=r&&r<=g}function o(e){return m.test(e)}function s(e,t){return 1+r(e.charCodeAt(t))}function a(e){if(!o(e))return e.length;for(var t=0,n=0;n<e.length;n+=s(e,n))t++;return t}function l(e,t,n){if(t=t||0,n=void 0===n?1/0:n||0,!o(e))return e.substr(t,n);var r=e.length;if(r<=0||t>r||n<=0)return"";var i=0;if(t>0){for(;t>0&&i<r;t--)i+=s(e,i);if(i>=r)return""}else if(t<0){for(i=r;t<0&&0<i;t++)i-=s(e,i-1);i<0&&(i=0)}var a=r;if(n<r)for(a=i;n>0&&a<r;n--)a+=s(e,a);return e.substring(i,a)}function c(e,t,n){t=t||0,n=void 0===n?1/0:n||0,t<0&&(t=0),n<0&&(n=0);var r=Math.abs(n-t);return t=t<n?t:n,l(e,t,r)}function p(e){for(var t=[],n=0;n<e.length;n+=s(e,n))t.push(e.codePointAt(n));return t}var u=n(348),h=55296,d=56319,f=56320,g=57343,m=/[\uD800-\uDFFF]/,v={getCodePoints:p,getUTF16Length:s,hasSurrogateUnit:o,isCodeUnitInSurrogateRange:r,isSurrogatePair:i,strlen:a,substring:c,substr:l};e.exports=v},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}t.__esModule=!0,t.connect=t.Provider=void 0;var i=n(396),o=r(i),s=n(397),a=r(s);t.Provider=o.default,t.connect=a.default},function(e,t,n){"use strict";function r(e,t){var n={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n}var i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},o=n(17),s=n(19),a=n(359),l=a.connect,c=n(298),p=c.removeEcho,u=n(300),h=u.View,d=n(398),f=n(399),g=n(215),m=g.echoPropType,v=g.popoverPropType,y=o.createClass({displayName:"Keypad",propTypes:{active:o.PropTypes.bool,children:o.PropTypes.oneOfType([o.PropTypes.arrayOf(o.PropTypes.node),o.PropTypes.node]),echoes:o.PropTypes.arrayOf(m).isRequired,popover:v,removeEcho:o.PropTypes.func.isRequired,style:o.PropTypes.any},componentDidMount:function(){window.addEventListener("resize",this._onResize),this._updateSizeAndPosition()},componentWillReceiveProps:function(e){this._container||!e.popover&&!e.echoes.length||this._computeContainer()},componentWillUnmount:function(){window.removeEventListener("resize",this._onResize)},_computeContainer:function(){var e=s.findDOMNode(this);this._container=e.getBoundingClientRect()},_updateSizeAndPosition:function(){this._container=null},_onResize:function(){var e=this;null==this._resizeTimeout&&(this._resizeTimeout=setTimeout(function(){e._resizeTimeout=null,e.isMounted()&&e._updateSizeAndPosition()},66))},render:function(){var e=this,t=this.props,n=t.children,s=t.echoes,a=t.removeEcho,l=t.popover,c=t.style,p=s.map(function(t){var n=t.initialBounds,o=r(t,["initialBounds"]);return i({},o,{initialBounds:{top:n.top-e._container.top,right:n.right-e._container.left,bottom:n.bottom-e._container.top,left:n.left-e._container.left,width:n.width,height:n.height}})}),u=l&&i({},l,{bounds:{bottom:this._container.height-(l.bounds.bottom-this._container.top),left:l.bounds.left-this._container.left,width:l.bounds.width}});return o.createElement(h,{style:c},n,o.createElement(d,{echoes:p,onAnimationFinish:a}),o.createElement(f,{popover:u}))}}),b=function(e){return i({},e.echoes,{active:e.keypad.active,popover:e.gestures.popover})},E=function(e){return{removeEcho:function(t){e(p(t))}}};e.exports=l(b,E)(y)},function(e,t,n){"use strict";function r(e,t){var n={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n}var i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},o=n(17),s=n(19),a=n(359),l=a.connect,c=n(400),p=n(301),u=n(337),h=n(215),d=h.bordersPropType,f=h.keyIdPropType,g=n(198),m=g.KeyTypes,v=o.createClass({displayName:"TouchableKeypadButton",propTypes:{borders:d,childKeyIds:o.PropTypes.arrayOf(f),disabled:o.PropTypes.bool,focused:o.PropTypes.bool,gestureManager:o.PropTypes.instanceOf(u),id:f.isRequired,popoverEnabled:o.PropTypes.bool,style:o.PropTypes.any,type:o.PropTypes.oneOf(Object.keys(m)).isRequired},shouldComponentUpdate:function(e){return e.id!==this.props.id||e.gestureManager!==this.props.gestureManager||e.focused!==this.props.focused||e.disabled!==this.props.disabled||e.popoverEnabled!==this.props.popoverEnabled||e.type!==this.props.type||!!e.style},componentWillUnmount:function(){var e=this.props,t=e.gestureManager,n=e.id;t.unregisterDOMNode(n)},render:function(){var e=this.props,t=e.borders,n=e.childKeyIds,a=e.disabled,l=e.gestureManager,p=e.id,u=r(e,["borders","childKeyIds","disabled","gestureManager","id"]),h=a?{onTouchStart:function(e){return e.preventDefault()}}:{onTouchStart:function(e){return l.onTouchStart(e,p)},onTouchEnd:function(e){return l.onTouchEnd(e)},onTouchMove:function(e){return l.onTouchMove(e)},onTouchCancel:function(e){return l.onTouchCancel(e)}};return o.createElement(c,i({ref:function(e){return l.registerDOMNode(p,s.findDOMNode(e),n,t)},borders:t,disabled:a},h,u))}}),y=function(e){var t=e.ariaLabel,n=e.icon,r=e.type;return{ariaLabel:t,icon:n,type:r}},b=function(e,t){var n=e.gestures,o=t.keyConfig,s=r(t,["keyConfig"]),a=o.id,l=o.childKeyIds,c=o.type,u=l&&l.map(function(e){return p[e]}),h=c!==m.MANY&&u&&u.length>0;return i({},s,{childKeyIds:l,gestureManager:n.gestureManager,id:a,focused:n.focus===a,popoverEnabled:n.popover&&n.popover.parentId===a,childKeys:u},y(h?u[0]:o))};e.exports=l(b)(v)},function(e,t,n){"use strict";var r=n(17),i=n(359),o=i.connect,s=n(52),a=s.StyleSheet,l=n(360),c=n(401),p=n(402),u=n(300),h=u.View,d=n(309),f=d.column,g=d.row,m=d.fullWidth,v=n(266),y=v.innerBorderColor,b=v.innerBorderStyle,E=v.innerBorderWidthPx,T=v.gray85,w=r.createClass({displayName:"TwoPageKeypad",propTypes:{currentPage:r.PropTypes.oneOf([0,1]).isRequired,leftPage:r.PropTypes.node.isRequired,paginationEnabled:r.PropTypes.bool.isRequired,rightPage:r.PropTypes.node.isRequired},render:function(){var e=this.props,t=e.currentPage,n=e.leftPage,i=e.paginationEnabled,o=e.rightPage;return i?r.createElement(l,{style:[f,x.keypad]},r.createElement(p,{numPages:2,currentPage:t}),r.createElement(h,{style:x.borderTop},r.createElement(c,null,n,o))):r.createElement(l,{style:x.keypad},r.createElement(h,{style:g},r.createElement(h,{style:m},n),r.createElement(h,{style:[x.borderLeft,m]},o)))}}),x=a.create({keypad:{backgroundColor:T},borderTop:{borderTop:E+"px "+b+" "+y},borderLeft:{borderLeft:E+"px "+b+" "+y,boxSizing:"content-box"}}),C=function(e){return{paginationEnabled:e.layout.paginationEnabled}};e.exports=o(C)(w)},function(e,t,n){"use strict";function r(e,t){var n={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n}var i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},o=n(17),s=n(403),a=n(361),l=n(310),c=n(301),p=n(198),u=p.KeyTypes,h=n(215),d=h.keyIdPropType,f=o.createClass({displayName:"ManyKeypadButton",propTypes:{keys:o.PropTypes.arrayOf(d).isRequired},render:function(){var e=this.props,t=e.keys,n=r(e,["keys"]);if(0===t.length)return o.createElement(s,n);if(1===t.length){var p=c[t[0]];return o.createElement(a,i({keyConfig:p},n))}var h={id:l.MANY,type:u.MANY,childKeyIds:t};return o.createElement(a,i({keyConfig:h},n))}});e.exports=f},function(e,t,n){"use strict";function r(e){return e instanceof Element?e.getAttribute("data-offset-key"):null}e.exports=r},function(e,t,n){"use strict";function r(){if("undefined"==typeof document)return null;try{return document.activeElement||document.body}catch(e){return document.body}}e.exports=r},function(e,t,n){"use strict";function r(e){var t=e.getSelection();if(!t.isCollapsed())return i(e.getCurrentContent(),t)}var i=n(278);e.exports=r},function(e,t,n){"use strict";var r=n(228),i=n(231),o=n(278),s=n(346),a=null,l={cut:function(e){var t=e.getCurrentContent(),n=e.getSelection(),l=null;if(n.isCollapsed()){var c=n.getAnchorKey(),p=t.getBlockForKey(c).getLength();if(p===n.getAnchorOffset())return e;l=n.set("focusOffset",p)}else l=n;l=s(l),a=o(t,l);var u=r.removeRange(t,l,"forward");return u===t?e:i.push(e,u,"remove-range")},paste:function(e){if(!a)return e;var t=r.replaceWithFragment(e.getCurrentContent(),e.getSelection(),a);return i.push(e,t,"insert-fragment")}};e.exports=l},function(e,t,n){(function(t){"use strict";function r(e){var n=l(e,function(e){var n=e.getSelection();if(n.isCollapsed()&&0===n.getAnchorOffset())return a(e,1);var r=t.getSelection(),i=r.getRangeAt(0);return i=o(i),s(e,null,i.endContainer,i.endOffset,i.startContainer,i.startOffset).selectionState},"backward");return n===e.getCurrentContent()?e:i.push(e,n,"remove-range")}var i=n(231),o=n(404),s=n(405),a=n(406),l=n(407);e.exports=r}).call(t,function(){return this}())},function(e,t,n){"use strict";function r(e){var t=a(e,function(e){var t=e.getSelection(),n=t.getStartOffset();if(0===n)return s(e,1);var r=t.getStartKey(),o=e.getCurrentContent(),a=o.getBlockForKey(r).getText().slice(0,n),l=i.getBackward(a);return s(e,l.length||1)},"backward");return t===e.getCurrentContent()?e:o.push(e,t,"remove-range")}var i=n(408),o=n(231),s=n(406),a=n(407);e.exports=r},function(e,t,n){"use strict";function r(e){var t=a(e,function(e){var t=e.getSelection(),n=t.getStartOffset(),r=t.getStartKey(),o=e.getCurrentContent(),a=o.getBlockForKey(r).getText().slice(n),l=i.getForward(a);return s(e,l.length||1)},"forward");return t===e.getCurrentContent()?e:o.push(e,t,"remove-range")}var i=n(408),o=n(231),s=n(409),a=n(407);e.exports=r},function(e,t,n){"use strict";function r(e){var t=i.splitBlock(e.getCurrentContent(),e.getSelection());return o.push(e,t,"split-block")}var i=n(228),o=n(231);e.exports=r},function(e,t,n){"use strict";function r(e){var t=a(e,function(e){var t=e.getSelection(),n=e.getCurrentContent(),r=t.getAnchorKey(),i=t.getAnchorOffset(),a=n.getBlockForKey(r).getText()[i-1];return s(e,a?o.getUTF16Length(a,0):1)},"backward");if(t===e.getCurrentContent())return e;var n=e.getSelection();return i.push(e,t.set("selectionBefore",n),n.isCollapsed()?"backspace-character":"remove-range")}var i=n(231),o=n(358),s=n(406),a=n(407);e.exports=r},function(e,t,n){"use strict";function r(e){var t=a(e,function(e){var t=e.getSelection(),n=e.getCurrentContent(),r=t.getAnchorKey(),i=t.getAnchorOffset(),a=n.getBlockForKey(r).getText()[i];return s(e,a?o.getUTF16Length(a,0):1)},"forward");if(t===e.getCurrentContent())return e;var n=e.getSelection();return i.push(e,t.set("selectionBefore",n),n.isCollapsed()?"delete-character":"remove-range")}var i=n(231),o=n(358),s=n(409),a=n(407);e.exports=r},function(e,t,n){"use strict";function r(e){var t=e.getSelection(),n=t.getEndKey(),r=e.getCurrentContent(),o=r.getBlockForKey(n).getLength();return i.set(e,{selection:t.merge({anchorKey:n,anchorOffset:o,focusKey:n,focusOffset:o,isBackward:!1}),forceSelection:!0})}var i=n(231);e.exports=r},function(e,t,n){"use strict";function r(e){var t=e.getSelection(),n=t.getStartKey();return i.set(e,{selection:t.merge({anchorKey:n,anchorOffset:0,focusKey:n,focusOffset:0,isBackward:!1}),forceSelection:!0})}var i=n(231);e.exports=r},function(e,t,n){"use strict";function r(e){var t=e.getSelection();if(!t.isCollapsed())return e;var n=t.getAnchorOffset();if(0===n)return e;var r=t.getAnchorKey(),a=e.getCurrentContent(),l=a.getBlockForKey(r),c=l.getLength();if(c<=1)return e;var p,u;n===c?(p=t.set("anchorOffset",n-1),u=t):(p=t.set("focusOffset",n+1),u=p.set("anchorOffset",n+1));var h=s(a,p),d=i.removeRange(a,p,"backward"),f=d.getSelectionAfter(),g=f.getAnchorOffset()-1,m=f.merge({anchorOffset:g,focusOffset:g}),v=i.replaceWithFragment(d,m,h),y=o.push(e,v,"insert-fragment");return o.acceptSelection(y,u)}var i=n(228),o=n(231),s=n(278);e.exports=r},function(e,t,n){"use strict";function r(e,t,n){var r=i.undo(t);if("spellcheck-change"===t.getLastChangeType()){var o=r.getCurrentContent();return void n(i.set(r,{nativelyRenderedContent:o}))}return e.preventDefault(),t.getNativelyRenderedContent()?(n(i.set(t,{nativelyRenderedContent:null})),void setTimeout(function(){n(r)},0)):void n(r)}var i=n(231);e.exports=r},function(e,t,n){"use strict";var r=(n(220),n(222)),i=n(217),o=n(236),s=n(238),a=n(293),l=n(269),c=i.List,p=i.Repeat,u={processHTML:function(e,t){return o(e,a,t)},processText:function(e,t){return e.map(function(e){return e=l(e),new r({key:s(),type:"unstyled",
text:e,characterList:c(p(t,e.length))})})}};e.exports=u},function(e,t,n){"use strict";function r(e){return e.split(i)}var i=/\r\n?|\n/g;e.exports=r},function(e,t,n){(function(t){"use strict";function r(e,n){var r=t.getSelection();return 0===r.rangeCount?{selectionState:e.getSelection().set("hasFocus",!1),needsRecovery:!1}:i(e,n,r.anchorNode,r.anchorOffset,r.focusNode,r.focusOffset)}var i=n(405);e.exports=r}).call(t,function(){return this}())},function(e,t,n){"use strict";function r(e,t){return!(!e||!t)&&(e===t||!i(e)&&(i(t)?r(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}var i=n(410);e.exports=r},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var i=function(){function e(){var t=this;r(this,e),this._nodesById={},this._bordersById={},this._orderedIds=[],this._cachedBoundingBoxesById={},window.addEventListener("resize",function(){t._cachedBoundingBoxesById={}})}return e.prototype.registerDOMNode=function(e,t,n,r){this._nodesById[e]=t,this._bordersById[e]=r;for(var i=[].concat(n||[],[e],this._orderedIds),o=[],s={},a=i,l=Array.isArray(a),c=0,a=l?a:a[Symbol.iterator]();;){var p;if(l){if(c>=a.length)break;p=a[c++]}else{if(c=a.next(),c.done)break;p=c.value}var u=p;s[u]||(o.push(u),s[u]=!0)}this._orderedIds=o},e.prototype.unregisterDOMNode=function(e){delete this._nodesById[e]},e.prototype.idForCoords=function(e,t){for(var n=this._orderedIds,r=Array.isArray(n),i=0,n=r?n:n[Symbol.iterator]();;){var o;if(r){if(i>=n.length)break;o=n[i++]}else{if(i=n.next(),i.done)break;o=i.value}var s=o,a=this._nodesById[s];if(a){var l=a.getBoundingClientRect();if(l.left<=e&&l.right>e&&l.top<=t&&l.bottom>t)return this._cachedBoundingBoxesById[s]=l,s}}},e.prototype.layoutPropsForId=function(e){return this._cachedBoundingBoxesById[e]||(this._cachedBoundingBoxesById[e]=this._nodesById[e].getBoundingClientRect()),{initialBounds:this._cachedBoundingBoxesById[e],borders:this._bordersById[e]}},e}();e.exports=i},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var i=function(){function e(t){r(this,e),this.handlers=t,this.activePopover=null,this.popovers={}}return e.prototype.registerPopover=function(e,t){this.popovers[e]=t},e.prototype.unregisterPopover=function(e){delete this.popovers[e]},e.prototype.isPopoverVisible=function(){return null!=this.activePopover},e.prototype.onBlur=function(){this.activePopover=null,this.handlers.onActiveNodesChanged({popover:null,focus:null})},e.prototype.onFocus=function(e){this.activePopover?this._isNodeInsidePopover(this.activePopover,e)?this.handlers.onActiveNodesChanged({popover:{parentId:this.activePopover,childIds:this.popovers[this.activePopover]},focus:e}):this.handlers.onActiveNodesChanged({popover:{parentId:this.activePopover,childIds:this.popovers[this.activePopover]},focus:null}):(this.activePopover=null,this.handlers.onActiveNodesChanged({popover:null,focus:e}))},e.prototype.onLongPress=function(e){!this.activePopover&&this.popovers[e]&&(this.activePopover=e,this.handlers.onActiveNodesChanged({popover:{parentId:this.activePopover,childIds:this.popovers[this.activePopover]},focus:this._defaultNodeForPopover(this.activePopover)}))},e.prototype.onTrigger=function(e){this.handlers.onClick(e,e,!1)},e.prototype.onTouchEnd=function(e){var t=!!this.activePopover;if(t){if(this._isNodeInsidePopover(this.activePopover,e))this.handlers.onClick(e,e,t);else if(this.activePopover===e){var n=this._defaultNodeForPopover(e);this.handlers.onClick(n,n,t)}}else if(this.popovers[e]){var r=this._defaultNodeForPopover(e),i=e;this.handlers.onClick(r,i,t)}else null!=e&&this.onTrigger(e);this.onBlur()},e.prototype._isNodeInsidePopover=function(e,t){return this.popovers[e].includes(t)},e.prototype._defaultNodeForPopover=function(e){return this.popovers[e][0]},e}();e.exports=i},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},o={longPressWaitTimeMs:50,swipeThresholdPx:20,holdIntervalMs:250},s=function(){function e(t,n,s,a){r(this,e),this.handlers=t,this.options=i({},o,n),this.swipeDisabledNodeIds=s||[],this.multiPressableKeys=a||[],this.touchState={},this.swipeState=null}return e.prototype._maybeCancelLongPressForTouch=function(e){var t=this.touchState[e].longPressTimeoutId;t&&(clearTimeout(t),this.touchState[e]=i({},this.touchState[e],{longPressTimeoutId:null}))},e.prototype._maybeCancelPressAndHoldForTouch=function(e){var t=this.touchState[e].pressAndHoldIntervalId;t&&(clearInterval(t),this.touchState[e]=i({},this.touchState[e],{pressAndHoldIntervalId:null}))},e.prototype._cleanupTouchEvent=function(e){this._maybeCancelLongPressForTouch(e),this._maybeCancelPressAndHoldForTouch(e),delete this.touchState[e]},e.prototype._onFocus=function(e,t){var n=this;this._maybeCancelLongPressForTouch(t),this._maybeCancelPressAndHoldForTouch(t),this.touchState[t]=i({},this.touchState[t],{activeNodeId:e}),this.handlers.onFocus(e),e&&(this.multiPressableKeys.includes(e)?(this.handlers.onTrigger(e),this.touchState[t]=i({},this.touchState[t],{pressAndHoldIntervalId:setInterval(function(){n.handlers.onTrigger(e)},this.options.holdIntervalMs)})):this.touchState[t]=i({},this.touchState[t],{longPressTimeoutId:setTimeout(function(){n.handlers.onLongPress(e),n.touchState[t]=i({},n.touchState[t],{longPressTimeoutId:null})},this.options.longPressWaitTimeMs)}))},e.prototype._onSwipeStart=function(){for(var e=Object.keys(this.touchState),t=Array.isArray(e),n=0,e=t?e:e[Symbol.iterator]();;){var r;if(t){if(n>=e.length)break;r=e[n++]}else{if(n=e.next(),n.done)break;r=n.value}var i=r;this._maybeCancelLongPressForTouch(i),this._maybeCancelPressAndHoldForTouch(i)}this.touchState={},this.handlers.onBlur()},e.prototype.onTouchStart=function(e,t,n){if(!this.swipeState&&!this.touchState[t]){var r=e();this.touchState[t]={swipeLocked:this.swipeDisabledNodeIds.includes(r),startX:n},this._onFocus(r,t)}},e.prototype.onTouchMove=function(e,t,n,r){if(this.swipeState)this.swipeState.touchId===t&&this.handlers.onSwipeChange(n-this.swipeState.startX);else if(this.touchState[t]){var i=this.touchState[t],o=i.activeNodeId,s=i.startX,a=i.swipeLocked,l=n-s,c=r&&!a&&Math.abs(l)>this.options.swipeThresholdPx;if(c)this._onSwipeStart(),this.swipeState={touchId:t,startX:s},this.handlers.onSwipeChange(n-this.swipeState.startX);else{var p=e();p!==o&&this._onFocus(p,t)}}},e.prototype.onTouchEnd=function(e,t,n){if(this.swipeState)this.swipeState.touchId===t&&(this.handlers.onSwipeEnd(n-this.swipeState.startX),this.swipeState=null);else if(this.touchState[t]){var r=this.touchState[t],i=r.activeNodeId,o=r.pressAndHoldIntervalId;this._cleanupTouchEvent(t);var s=!!o;s?this.handlers.onBlur():this.handlers.onTouchEnd(i)}},e.prototype.onTouchCancel=function(e){this.swipeState?this.swipeState.touchId===e&&(this.handlers.onSwipeEnd(0),this.swipeState=null):this.touchState[e]&&(this._cleanupTouchEvent(e),this.handlers.onBlur())},e}();e.exports=s},function(e,t,n){"use strict";function r(e){return null==e?e:String(e)}function i(e,t){var n=void 0;if(window.getComputedStyle&&(n=window.getComputedStyle(e,null)))return r(n.getPropertyValue(s(t)));if(document.defaultView&&document.defaultView.getComputedStyle){if(n=document.defaultView.getComputedStyle(e,null))return r(n.getPropertyValue(s(t)));if("display"===t)return"none"}return r(e.currentStyle?"float"===t?e.currentStyle.cssFloat||e.currentStyle.styleFloat:e.currentStyle[o(t)]:e.style&&e.style[o(t)])}var o=n(411),s=n(412);e.exports=i},function(e,t,n){"use strict";function r(e){return a[e]||e}function i(e){if(!e)return{major:"",minor:""};var t=e.split(".");return{major:t[0],minor:t[1]}}var o=n(432),s="Unknown",a={"Mac OS":"Mac OS X"},l=new o,c=l.getResult(),p=i(c.browser.version),u={browserArchitecture:c.cpu.architecture||s,browserFullVersion:c.browser.version||s,browserMinorVersion:p.minor||s,browserName:c.browser.name||s,browserVersion:c.browser.major||s,deviceName:c.device.model||s,engineName:c.engine.name||s,engineVersion:c.engine.version||s,platformArchitecture:c.cpu.architecture||s,platformName:r(c.os.name)||s,platformVersion:c.os.version||s,platformFullVersion:c.os.version||s};e.exports=u},function(e,t,n){"use strict";function r(e,t){var n=e.split(w);return n.length>1?n.some(function(e){return P.contains(e,t)}):(e=n[0].trim(),i(e,t))}function i(e,t){var n=e.split(x);if(n.length>0&&n.length<=2?void 0:E(!1),1===n.length)return o(n[0],t);var r=n[0],i=n[1];return f(r)&&f(i)?void 0:E(!1),o(">="+r,t)&&o("<="+i,t)}function o(e,t){if(e=e.trim(),""===e)return!0;var n=t.split(T),r=h(e),i=r.modifier,o=r.rangeComponents;switch(i){case"<":return s(n,o);case"<=":return a(n,o);case">=":return c(n,o);case">":return p(n,o);case"~":case"~>":return u(n,o);default:return l(n,o)}}function s(e,t){return b(e,t)===-1}function a(e,t){var n=b(e,t);return n===-1||0===n}function l(e,t){return 0===b(e,t)}function c(e,t){var n=b(e,t);return 1===n||0===n}function p(e,t){return 1===b(e,t)}function u(e,t){var n=t.slice(),r=t.slice();r.length>1&&r.pop();var i=r.length-1,o=parseInt(r[i],10);return d(o)&&(r[i]=o+1+""),c(e,n)&&s(e,r)}function h(e){var t=e.split(T),n=t[0].match(C);return n?void 0:E(!1),{modifier:n[1],rangeComponents:[n[2]].concat(t.slice(1))}}function d(e){return!isNaN(e)&&isFinite(e)}function f(e){return!h(e).modifier}function g(e,t){for(var n=e.length;n<t;n++)e[n]="0"}function m(e,t){e=e.slice(),t=t.slice(),g(e,t.length);for(var n=0;n<t.length;n++){var r=t[n].match(/^[x*]$/i);if(r&&(t[n]=e[n]="0","*"===r[0]&&n===t.length-1))for(var i=n;i<e.length;i++)e[i]="0"}return g(t,e.length),[e,t]}function v(e,t){var n=e.match(S)[1],r=t.match(S)[1],i=parseInt(n,10),o=parseInt(r,10);return d(i)&&d(o)&&i!==o?y(i,o):y(e,t)}function y(e,t){return typeof e!=typeof t?E(!1):void 0,e>t?1:e<t?-1:0}function b(e,t){for(var n=m(e,t),r=n[0],i=n[1],o=0;o<i.length;o++){var s=v(r[o],i[o]);if(s)return s}return 0}var E=n(348),T=/\./,w=/\|\|/,x=/\s+\-\s+/,C=/^(<=|<|=|>=|~>|~|>|)?\s*(.+)/,S=/^(\d*)(.*)/,P={contains:function(e,t){return r(e.trim(),t.trim())}};e.exports=P},function(e,t,n){"use strict";function r(e,t,n){if(!e)return null;var r={};for(var o in e)i.call(e,o)&&(r[o]=t.call(n,e[o],o,e));return r}var i=Object.prototype.hasOwnProperty;e.exports=r},function(e,t,n){"use strict";function r(e){var t={};return function(n){return t.hasOwnProperty(n)||(t[n]=e.call(this,n)),t[n]}}e.exports=r},function(e,t,n){"use strict";function r(e){return e=e||document,i||"CSS1Compat"!==e.compatMode?e.body:e.documentElement}var i="undefined"!=typeof navigator&&navigator.userAgent.indexOf("AppleWebKit")>-1;e.exports=r},function(e,t,n){"use strict";function r(e){return e===window?{x:window.pageXOffset||document.documentElement.scrollLeft,y:window.pageYOffset||document.documentElement.scrollTop}:{x:e.scrollLeft,y:e.scrollTop}}e.exports=r},function(e,t,n){"use strict";function r(e){var t=document.documentElement;if(!("getBoundingClientRect"in e&&i(t,e)))return{left:0,right:0,top:0,bottom:0};var n=e.getBoundingClientRect();return{left:Math.round(n.left)-t.clientLeft,right:Math.round(n.right)-t.clientLeft,top:Math.round(n.top)-t.clientTop,bottom:Math.round(n.bottom)-t.clientTop}}var i=n(381);e.exports=r},function(e,t,n){"use strict";function r(e){return e.split("/")}var i={isImage:function(e){return"image"===r(e)[0]},isJpeg:function(e){var t=r(e);return i.isImage(e)&&("jpeg"===t[1]||"pjpeg"===t[1])}};e.exports=i},function(e,t,n){"use strict";function r(e){var t=e.length;if(Array.isArray(e)||"object"!=typeof e&&"function"!=typeof e?s(!1):void 0,"number"!=typeof t?s(!1):void 0,0===t||t-1 in e?void 0:s(!1),"function"==typeof e.callee?s(!1):void 0,e.hasOwnProperty)try{return Array.prototype.slice.call(e)}catch(e){}for(var n=Array(t),r=0;r<t;r++)n[r]=e[r];return n}function i(e){return!!e&&("object"==typeof e||"function"==typeof e)&&"length"in e&&!("setInterval"in e)&&"number"!=typeof e.nodeType&&(Array.isArray(e)||"callee"in e||"item"in e)}function o(e){return i(e)?Array.isArray(e)?e.slice():r(e):[e]}var s=n(348);e.exports=o},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}t.__esModule=!0,t.compose=t.applyMiddleware=t.bindActionCreators=t.combineReducers=t.createStore=void 0;var i=n(413),o=r(i),s=n(414),a=r(s),l=n(415),c=r(l),p=n(416),u=r(p),h=n(417),d=r(h),f=n(419);r(f);t.createStore=o.default,t.combineReducers=a.default,t.bindActionCreators=c.default,t.applyMiddleware=u.default,t.compose=d.default},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==("undefined"==typeof t?"undefined":a(t))&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+("undefined"==typeof t?"undefined":a(t)));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol?"symbol":typeof e};t.__esModule=!0,t.default=void 0;var l=n(17),c=n(420),p=r(c),u=n(421),h=(r(u),function(e){function t(n,r){i(this,t);var s=o(this,e.call(this,n,r));return s.store=n.store,s}return s(t,e),t.prototype.getChildContext=function(){return{store:this.store}},t.prototype.render=function(){var e=this.props.children;return l.Children.only(e)},t}(l.Component));t.default=h,h.propTypes={store:p.default.isRequired,children:l.PropTypes.element.isRequired},h.childContextTypes={store:p.default.isRequired}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==("undefined"==typeof t?"undefined":p(t))&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+("undefined"==typeof t?"undefined":p(t)));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function a(e){return e.displayName||e.name||"Component"}function l(e,t){try{return e.apply(t)}catch(e){return _.value=e,_}}function c(e,t,n){var r=arguments.length<=3||void 0===arguments[3]?{}:arguments[3],c=Boolean(e),p=e||S,d=void 0;d="function"==typeof t?t:t?(0,y.default)(t):P;var g=n||k,v=r.pure,b=void 0===v||v,E=r.withRef,T=void 0!==E&&E,x=b&&g!==k,O=M++;return function(e){function t(e,t,n){var r=g(e,t,n);return r}var n="Connect("+a(e)+")",r=function(r){function a(e,t){i(this,a);var s=o(this,r.call(this,e,t));s.version=O,s.store=e.store||t.store,(0,C.default)(s.store,'Could not find "store" in either the context or '+('props of "'+n+'". ')+"Either wrap the root component in a <Provider>, "+('or explicitly pass "store" as a prop to "'+n+'".'));var l=s.store.getState();return s.state={storeState:l},s.clearCache(),s}return s(a,r),a.prototype.shouldComponentUpdate=function(){return!b||this.haveOwnPropsChanged||this.hasStoreStateChanged},a.prototype.computeStateProps=function(e,t){if(!this.finalMapStateToProps)return this.configureFinalMapState(e,t);var n=e.getState(),r=this.doStatePropsDependOnOwnProps?this.finalMapStateToProps(n,t):this.finalMapStateToProps(n);return r},a.prototype.configureFinalMapState=function(e,t){var n=p(e.getState(),t),r="function"==typeof n;return this.finalMapStateToProps=r?n:p,this.doStatePropsDependOnOwnProps=1!==this.finalMapStateToProps.length,r?this.computeStateProps(e,t):n},a.prototype.computeDispatchProps=function(e,t){if(!this.finalMapDispatchToProps)return this.configureFinalMapDispatch(e,t);var n=e.dispatch,r=this.doDispatchPropsDependOnOwnProps?this.finalMapDispatchToProps(n,t):this.finalMapDispatchToProps(n);return r},a.prototype.configureFinalMapDispatch=function(e,t){var n=d(e.dispatch,t),r="function"==typeof n;return this.finalMapDispatchToProps=r?n:d,this.doDispatchPropsDependOnOwnProps=1!==this.finalMapDispatchToProps.length,r?this.computeDispatchProps(e,t):n},a.prototype.updateStatePropsIfNeeded=function(){var e=this.computeStateProps(this.store,this.props);return(!this.stateProps||!(0,m.default)(e,this.stateProps))&&(this.stateProps=e,!0)},a.prototype.updateDispatchPropsIfNeeded=function(){var e=this.computeDispatchProps(this.store,this.props);return(!this.dispatchProps||!(0,m.default)(e,this.dispatchProps))&&(this.dispatchProps=e,!0)},a.prototype.updateMergedPropsIfNeeded=function(){var e=t(this.stateProps,this.dispatchProps,this.props);return!(this.mergedProps&&x&&(0,m.default)(e,this.mergedProps))&&(this.mergedProps=e,!0)},a.prototype.isSubscribed=function(){return"function"==typeof this.unsubscribe},a.prototype.trySubscribe=function(){c&&!this.unsubscribe&&(this.unsubscribe=this.store.subscribe(this.handleChange.bind(this)),this.handleChange())},a.prototype.tryUnsubscribe=function(){this.unsubscribe&&(this.unsubscribe(),this.unsubscribe=null)},a.prototype.componentDidMount=function(){this.trySubscribe()},a.prototype.componentWillReceiveProps=function(e){b&&(0,m.default)(e,this.props)||(this.haveOwnPropsChanged=!0)},a.prototype.componentWillUnmount=function(){this.tryUnsubscribe(),this.clearCache()},a.prototype.clearCache=function(){this.dispatchProps=null,this.stateProps=null,this.mergedProps=null,this.haveOwnPropsChanged=!0,this.hasStoreStateChanged=!0,this.haveStatePropsBeenPrecalculated=!1,this.statePropsPrecalculationError=null,this.renderedElement=null,this.finalMapDispatchToProps=null,this.finalMapStateToProps=null},a.prototype.handleChange=function(){if(this.unsubscribe){var e=this.store.getState(),t=this.state.storeState;if(!b||t!==e){if(b&&!this.doStatePropsDependOnOwnProps){var n=l(this.updateStatePropsIfNeeded,this);if(!n)return;n===_&&(this.statePropsPrecalculationError=_.value),this.haveStatePropsBeenPrecalculated=!0}this.hasStoreStateChanged=!0,this.setState({storeState:e})}}},a.prototype.getWrappedInstance=function(){return(0,C.default)(T,"To access the wrapped instance, you need to specify { withRef: true } as the fourth argument of the connect() call."),this.refs.wrappedInstance},a.prototype.render=function(){var t=this.haveOwnPropsChanged,n=this.hasStoreStateChanged,r=this.haveStatePropsBeenPrecalculated,i=this.statePropsPrecalculationError,o=this.renderedElement;if(this.haveOwnPropsChanged=!1,this.hasStoreStateChanged=!1,this.haveStatePropsBeenPrecalculated=!1,this.statePropsPrecalculationError=null,i)throw i;var s=!0,a=!0;b&&o&&(s=n||t&&this.doStatePropsDependOnOwnProps,a=t&&this.doDispatchPropsDependOnOwnProps);var l=!1,c=!1;r?l=!0:s&&(l=this.updateStatePropsIfNeeded()),a&&(c=this.updateDispatchPropsIfNeeded());var p=!0;return p=!!(l||c||t)&&this.updateMergedPropsIfNeeded(),!p&&o?o:(T?this.renderedElement=(0,h.createElement)(e,u({},this.mergedProps,{ref:"wrappedInstance"})):this.renderedElement=(0,h.createElement)(e,this.mergedProps),this.renderedElement)},a}(h.Component);return r.displayName=n,r.WrappedComponent=e,r.contextTypes={store:f.default},r.propTypes={store:f.default},(0,w.default)(r,e)}}var p="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol?"symbol":typeof e},u=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e};t.__esModule=!0,t.default=c;var h=n(17),d=n(420),f=r(d),g=n(422),m=r(g),v=n(423),y=r(v),b=n(421),E=(r(b),n(433)),T=(r(E),n(431)),w=r(T),x=n(434),C=r(x),S=function(e){return{}},P=function(e){return{dispatch:e}},k=function(e,t,n){return u({},n,e,t)},_={value:null},M=0},function(e,t,n){"use strict";var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},i=n(17),o=n(424),s=n(400),a=n(301),l=n(198),c=l.KeyTypes,p=l.EchoAnimationTypes,u=n(215),h=u.echoPropType,d=u.bordersPropType,f=u.boundingBoxPropType,g=u.keyIdPropType,m=n(308),v=i.createClass({displayName:"Echo",propTypes:{animationDurationMs:i.PropTypes.number.isRequired,borders:d,id:g.isRequired,initialBounds:f.isRequired,onAnimationFinish:i.PropTypes.func.isRequired},componentDidMount:function(){var e=this.props,t=e.animationDurationMs,n=e.onAnimationFinish;setTimeout(function(){return n()},t)},render:function(){var e=this.props,t=e.borders,n=e.id,o=e.initialBounds,l=a[n].icon,p=r({zIndex:m.echo,position:"absolute",pointerEvents:"none"},o);return i.createElement("div",{style:p},i.createElement(s,{name:n,icon:l,type:c.ECHO,borders:t}))}}),y=i.createClass({displayName:"EchoManager",propTypes:{echoes:i.PropTypes.arrayOf(h),onAnimationFinish:i.PropTypes.func.isRequired},_animationConfigForType:function(e){var t=void 0,n=void 0;switch(e){case p.SLIDE_AND_FADE:t=400,n="echo-slide-and-fade";break;case p.FADE_ONLY:t=300,n="echo-fade-only";break;case p.LONG_FADE_ONLY:t=400,n="echo-long-fade-only";break;default:throw new Error("Invalid echo animation type:",e)}return{animationDurationMs:t,animationTransitionName:n}},render:function(){var e=this,t=this.props,n=t.echoes,s=t.onAnimationFinish;return i.createElement("span",null,Object.keys(p).map(function(t){var a=e._animationConfigForType(t),l=a.animationDurationMs,c=a.animationTransitionName,p=n.filter(function(e){return e.animationType===t});return i.createElement(o,{transitionName:c,transitionEnter:!0,transitionLeave:!1,transitionEnterTimeout:l,key:t},p.map(function(e){var t=e.animationId;return i.createElement(v,r({key:t,animationDurationMs:l,onAnimationFinish:function(){return s(t)}},e))}))}))}});e.exports=y},function(e,t,n){"use strict";var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},i=n(17),o=n(424),s=n(301),a=n(425),l=n(215),c=l.boundingBoxPropType,p=l.keyConfigPropType,u=l.popoverPropType,h="popover",d=200,f=i.createClass({displayName:"PopoverContainer",propTypes:{bounds:c.isRequired,childKeys:i.PropTypes.arrayOf(p).isRequired},render:function(){var e=this.props,t=e.bounds,n=e.childKeys,o=r({position:"absolute"},t);return i.createElement("div",{style:o},i.createElement(a,{keys:n}))}}),g=i.createClass({displayName:"PopoverManager",propTypes:{popover:u},render:function(){var e=this.props.popover;return i.createElement(o,{transitionName:h,transitionEnter:!0,transitionLeave:!1,transitionEnterTimeout:d},e&&i.createElement(f,{key:e.childKeyIds[0],bounds:e.bounds,childKeys:e.childKeyIds.map(function(e){return s[e]})}))}});e.exports=g},function(e,t,n){"use strict";var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},i=n(17),o=n(90),s=n(359),a=s.connect,l=n(52),c=l.StyleSheet,p=l.css,u=n(300),h=u.View,d=n(426),f=n(427),g=n(428),m=n(198),v=m.KeyTypes,y=m.BorderDirections,b=m.BorderStyles,E=n(266),T=E.brightGreen,w=E.innerBorderColor,x=E.innerBorderStyle,C=E.innerBorderWidthPx,S=E.valueGrey,P=E.operatorGrey,k=E.controlGrey,_=E.emptyGrey,M=n(215),O=M.bordersPropType,N=M.iconPropType,I=M.keyConfigPropType,A=i.createClass({displayName:"KeypadButton",propTypes:{ariaLabel:i.PropTypes.string,borders:O,childKeys:i.PropTypes.arrayOf(I),disabled:i.PropTypes.bool,focused:i.PropTypes.bool,heightPx:i.PropTypes.number.isRequired,icon:N,onTouchCancel:i.PropTypes.func,onTouchEnd:i.PropTypes.func,onTouchMove:i.PropTypes.func,onTouchStart:i.PropTypes.func,popoverEnabled:i.PropTypes.bool,style:i.PropTypes.any,type:i.PropTypes.oneOf(Object.keys(v)).isRequired,widthPx:i.PropTypes.number.isRequired},mixins:[o],getDefaultProps:function(){return{borders:b.ALL,childKeys:[],disabled:!1,focused:!1,popoverEnabled:!1}},componentWillMount:function(){this.buttonSizeStyle=F(this.props.heightPx,this.props.widthPx)},componentDidMount:function(){this._preInjectStyles()},componentWillUpdate:function(e,t){e.heightPx===this.props.heightPx&&e.widthPx===this.props.widthPx||(this.buttonSizeStyle=F(e.heightPx,e.widthPx),this._preInjectStyles())},_preInjectStyles:function(){for(var e=Object.keys(v),t=Array.isArray(e),n=0,e=t?e:e[Symbol.iterator]();;){var r;if(t){if(n>=e.length)break;r=e[n++]}else{if(n=e.next(),n.done)break;r=n.value}var i=r;p.apply(void 0,[h.styles.initial].concat(this._getFocusStyle(i)));for(var o=Object.values(b),s=Array.isArray(o),a=0,o=s?o:o[Symbol.iterator]();;){var l;if(s){if(a>=o.length)break;l=o[a++]}else{if(a=o.next(),a.done)break;l=a.value}var c=l;p.apply(void 0,[h.styles.initial].concat(this._getButtonStyle(i,c)))}}},_getFocusStyle:function(e){var t=void 0;return t=e===v.INPUT_NAVIGATION||e===v.KEYPAD_NAVIGATION?L.light:L.bright,[L.focusBox,t]},_getButtonStyle:function(e,t,n){var r=void 0;switch(e){case v.EMPTY:r=L.empty;break;case v.MANY:case v.VALUE:r=L.value;break;case v.OPERATOR:r=L.operator;break;case v.INPUT_NAVIGATION:case v.KEYPAD_NAVIGATION:r=L.control;break;case v.ECHO:r=null}var i=[];return t.indexOf(y.LEFT)!==-1&&i.push(L.leftBorder),t.indexOf(y.BOTTOM)!==-1&&i.push(L.bottomBorder),[L.buttonBase,r].concat(i,[e===v.ECHO&&L.echo,this.buttonSizeStyle],Array.isArray(n)?n:[n])},render:function(){var e=this.props,t=e.ariaLabel,n=e.borders,o=e.childKeys,s=e.disabled,a=e.focused,l=e.icon,c=e.onTouchCancel,p=e.onTouchEnd,u=e.onTouchMove,m=e.onTouchStart,y=e.popoverEnabled,b=e.style,E=e.type,T=!s&&a||y||E===v.ECHO,w=this._getButtonStyle(E,n,b),x=this._getFocusStyle(E),C=[L.iconWrapper,s&&L.disabled],S={onTouchCancel:c,onTouchEnd:p,onTouchMove:u,onTouchStart:m},P=T&&i.createElement(h,{style:x}),k=!T&&!s&&o&&o.length>0&&i.createElement(g,{style:L.decalInset});if(E===v.EMPTY)return i.createElement(h,r({style:w},S));if(E===v.MANY){var _={role:"button",ariaLabel:o[0].ariaLabel},M=o.map(function(e){return e.icon});return i.createElement(h,r({style:w},S,_),P,i.createElement(h,{style:C},i.createElement(f,{icons:M,focused:T})),k)}var O={role:"button",ariaLabel:t};return i.createElement(h,r({style:w},S,O),P,i.createElement(h,{style:C},i.createElement(d,{icon:l,focused:T})),k)}}),R=4,D=0,L=c.create({buttonBase:{"-webkit-box-flex":"1",flex:1,cursor:"pointer",userSelect:"none",justifyContent:"center",alignItems:"center",borderColor:w,borderStyle:x,boxSizing:"border-box"},decalInset:{top:R,right:R},echo:{borderColor:"transparent"},value:{backgroundColor:S},operator:{backgroundColor:P},control:{backgroundColor:k},empty:{backgroundColor:_,cursor:"default"},bright:{backgroundColor:T},light:{backgroundColor:"rgba(33, 36, 44, 0.1)"},iconWrapper:{zIndex:D+1},focusBox:{position:"absolute",zIndex:D,left:R,right:R,bottom:R,top:R,borderRadius:1},disabled:{opacity:.3},leftBorder:{borderLeftWidth:C},bottomBorder:{borderBottomWidth:C}}),F=function(e,t){return c.create({buttonSize:{height:e,width:t,maxWidth:t}}).buttonSize},B=function(e){return e.layout.buttonDimensions};e.exports=a(B)(A)},function(e,t,n){"use strict";var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},i=n(17),o=n(359),s=o.connect,a=n(52),l=a.StyleSheet,c=n(300),p=c.View,u=n(309),h=u.row,d=n(215),f=d.childrenPropType,g=n(266),m=g.innerBorderColor,v=g.innerBorderStyle,y=g.innerBorderWidthPx,b=i.createClass({displayName:"ViewPager",propTypes:{animateToPosition:i.PropTypes.bool,children:f,pageWidthPx:i.PropTypes.number.isRequired,translateX:i.PropTypes.number.isRequired},getInitialState:function(){return{animationDurationMs:0}},componentWillReceiveProps:function(e){var t=void 0;if(e.animateToPosition){var n=e.translateX,r=this.props.translateX;t=Math.abs(n-r)}else t=0;this.setState({animationDurationMs:t})},render:function(){var e=this.props,t=e.children,n=e.pageWidthPx,o=e.translateX,s=this.state.animationDurationMs,a=[h,E.twoPagePager],l={msTransform:"translate3d("+o+"px, 0, 0)",WebkitTransform:"translate3d("+o+"px, 0, 0)",transform:"translate3d("+o+"px, 0, 0)"},c=s?{msTransitionProperty:"transform",WebkitTransitionProperty:"transform",transitionProperty:"transform",msTransitionDuration:s+"ms",WebkitTransitionDuration:s+"ms",transitionDuration:s+"ms",msTransitionTimingFunction:"ease-out",WebkitTransitionTimingFunction:"ease-out",transitionTimingFunction:"ease-out"}:{},u=r({},l,c),d={width:n};return i.createElement(p,{style:a,dynamicStyle:u},i.createElement(p,{dynamicStyle:d},t[0]),i.createElement(p,{style:E.rightPage,dynamicStyle:d},t[1]))}}),E=l.create({twoPagePager:{alignSelf:"flex-start",maxWidth:"250%"},rightPage:{borderLeft:y+"px "+v+" "+m,boxSizing:"content-box"}}),T=function(e){var t=e.pager,n=t.animateToPosition,r=t.currentPage,i=t.dx,o=t.pageWidthPx;return{animateToPosition:n,pageWidthPx:o,translateX:-r*(o+y)+i}};e.exports=s(T)(b)},function(e,t,n){"use strict";var r=n(17),i=n(52),o=i.StyleSheet,s=n(300),a=s.View,l=n(266),c=l.pageIndicatorHeightPx,p=l.gray68,u=l.gray85,h=r.createClass({displayName:"PagerIcon",propTypes:{active:r.PropTypes.bool,radiusPx:r.PropTypes.number},getDefaultProps:function(){return{active:!1,radiusPx:4}},render:function(){var e=this.props,t=e.active,n=e.radiusPx,i=t?p:u;return r.createElement("svg",{width:2*n,height:2*n},r.createElement("circle",{cx:n,cy:n,r:n,fill:i}))}}),d=r.createClass({displayName:"PagerIndicator",propTypes:{currentPage:r.PropTypes.number.isRequired,numPages:r.PropTypes.number.isRequired},render:function(){for(var e=this.props,t=e.currentPage,n=e.numPages,i=4,o=[],s=0;s<n;s++)o.push(r.createElement(h,{key:s,active:s===t,radiusPx:i}));var l=2*i*n,c=2*i*(n-1),p={width:l+c};return r.createElement(a,{style:f.indicatorStrip},r.createElement(a,{style:f.iconStrip,dynamicStyle:p},o))}}),f=o.create({indicatorStrip:{backgroundColor:"#F0F1F2",flexDirection:"row",justifyContent:"center",alignItems:"center",height:c},iconStrip:{flexDirection:"row",justifyContent:"space-between"}});e.exports=d},function(e,t,n){"use strict";function r(e,t){var n={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n}var i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},o=n(17),s=n(359),a=s.connect,l=n(337),c=n(301),p=n(400),u=o.createClass({displayName:"EmptyKeypadButton",propTypes:{gestureManager:o.PropTypes.instanceOf(l)},render:function(){var e=this.props,t=e.gestureManager,n=r(e,["gestureManager"]);return o.createElement(p,i({onTouchStart:function(e){return t.onTouchStart(e)},onTouchEnd:function(e){return t.onTouchEnd(e)},onTouchMove:function(e){return t.onTouchMove(e)},onTouchCancel:function(e){return t.onTouchCancel(e)}},c.NOOP,n))}}),h=function(e){var t=e.gestures;return{gestureManager:t.gestureManager}};e.exports=a(h)(u)},function(e,t,n){"use strict";function r(e){var t=getComputedStyle(e),n=document.createElement("div");n.style.fontFamily=t.fontFamily,n.style.fontSize=t.fontSize,n.style.fontStyle=t.fontStyle,n.style.fontWeight=t.fontWeight,n.style.lineHeight=t.lineHeight,n.style.position="absolute",n.textContent="M",document.body.appendChild(n);var r=n.getBoundingClientRect();return document.body.removeChild(n),r.height}function i(e,t){for(var n=1/0,r=1/0,i=-(1/0),o=-(1/0),s=0;s<e.length;s++){
var a=e[s];0!==a.width&&1!==a.width&&(n=Math.min(n,a.top),r=Math.min(r,a.bottom),i=Math.max(i,a.top),o=Math.max(o,a.bottom))}return i<=r&&i-n<t&&o-r<t}function o(e){switch(e.nodeType){case Node.DOCUMENT_TYPE_NODE:return 0;case Node.TEXT_NODE:case Node.PROCESSING_INSTRUCTION_NODE:case Node.COMMENT_NODE:return e.length;default:return e.childNodes.length}}function s(e){e.collapsed?void 0:c(!1),e=e.cloneRange();var t=e.startContainer;1!==t.nodeType&&(t=t.parentNode);var n=r(t),s=e.endContainer,p=e.endOffset;for(e.setStart(e.startContainer,0);i(l(e),n)&&(s=e.startContainer,p=e.startOffset,s.parentNode?void 0:c(!1),e.setStartBefore(s),1!==s.nodeType||"inline"===getComputedStyle(s).display););for(var u=s,h=p-1;;){for(var d=u.nodeValue,f=h;f>=0;f--)if(!(null!=d&&f>0&&a.isSurrogatePair(d,f-1))){if(e.setStart(u,f),!i(l(e),n))break;s=u,p=f}if(f===-1||0===u.childNodes.length)break;u=u.childNodes[f],h=o(u)}return e.setStart(s,p),e}var a=n(358),l=n(335),c=n(348);e.exports=s},function(e,t,n){"use strict";function r(e,t,n,r,i,o){var a=n.nodeType===Node.TEXT_NODE,c=i.nodeType===Node.TEXT_NODE;if(a&&c)return{selectionState:p(e,h(l(n)),r,h(l(i)),o),needsRecovery:!1};var u=null,d=null,f=!0;return a?(u={key:h(l(n)),offset:r},d=s(t,i,o)):c?(d={key:h(l(i)),offset:o},u=s(t,n,r)):(u=s(t,n,r),d=s(t,i,o),n===i&&r===o&&(f="BR"!==n.firstChild.nodeName)),{selectionState:p(e,u.key,u.offset,d.key,d.offset),needsRecovery:f}}function i(e){for(;e.firstChild&&c(e.firstChild);)e=e.firstChild;return e}function o(e){for(;e.lastChild&&c(e.lastChild);)e=e.lastChild;return e}function s(e,t,n){var r=l(t);if(null!=r||e&&(e===t||e.firstChild===t)?void 0:u(!1),e===t&&(t=t.firstChild,t instanceof Element&&"true"===t.getAttribute("data-contents")?void 0:u(!1),n>0&&(n=t.childNodes.length)),0===n){var s=null;if(null!=r)s=r;else{var p=i(t);s=h(c(p))}return{key:s,offset:0}}var d=t.childNodes[n-1],f=null,g=null;if(c(d)){var m=o(d);f=h(c(m)),g=a(m)}else f=h(r),g=a(d);return{key:f,offset:g}}function a(e){var t=e.textContent;return"\n"===t?0:t.length}var l=n(314),c=n(364),p=n(316),u=n(348),h=n(346);e.exports=r},function(e,t,n){"use strict";function r(e,t){var n=e.getSelection(),r=e.getCurrentContent(),i=n.getStartKey(),o=n.getStartOffset(),s=i,a=0;if(t>o){var l=r.getKeyBefore(i);if(null==l)s=i;else{s=l;var c=r.getBlockForKey(l);a=c.getText().length}}else a=o-t;return n.merge({focusKey:s,focusOffset:a,isBackward:!0})}e.exports=r},function(e,t,n){"use strict";function r(e,t,n){var r=e.getSelection(),o=e.getCurrentContent(),s=r;if(r.isCollapsed()){if("forward"===n){if(e.isSelectionAtEndOfContent())return o}else if(e.isSelectionAtStartOfContent())return o;if(s=t(e),s===r)return o}return i.removeRange(o,s,n)}var i=n(228);e.exports=r},function(e,t,n){"use strict";function r(e,t){var n=t?u.exec(e):c.exec(e);return n?n[0]:e}var i=n(429),o=i.getPunctuation(),s="['‘’]",a="\\s|(?![_])"+o,l="^(?:"+a+")*(?:"+s+"|(?!"+a+").)*(?:(?!"+a+").)",c=new RegExp(l),p="(?:(?!"+a+").)(?:"+s+"|(?!"+a+").)*(?:"+a+")*$",u=new RegExp(p),h={getBackward:function(e){return r(e,!0)},getForward:function(e){return r(e,!1)}};e.exports=h},function(e,t,n){"use strict";function r(e,t){var n,r=e.getSelection(),i=r.getStartKey(),o=r.getStartOffset(),s=e.getCurrentContent(),a=i,l=s.getBlockForKey(i);return t>l.getText().length-o?(a=s.getKeyAfter(i),n=0):n=o+t,r.merge({focusKey:a,focusOffset:n})}e.exports=r},function(e,t,n){"use strict";function r(e){return i(e)&&3==e.nodeType}var i=n(430);e.exports=r},function(e,t,n){"use strict";function r(e){return e.replace(i,function(e,t){return t.toUpperCase()})}var i=/-(.)/g;e.exports=r},function(e,t,n){"use strict";function r(e){return e.replace(i,"-$1").toLowerCase()}var i=/([A-Z])/g;e.exports=r},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t,n){function r(){y===v&&(y=v.slice())}function s(){return m}function l(e){if("function"!=typeof e)throw new Error("Expected listener to be a function.");var t=!0;return r(),y.push(e),function(){if(t){t=!1,r();var n=y.indexOf(e);y.splice(n,1)}}}function u(e){if(!(0,a.default)(e))throw new Error("Actions must be plain objects. Use custom middleware for async actions.");if("undefined"==typeof e.type)throw new Error('Actions may not have an undefined "type" property. Have you misspelled a constant?');if(b)throw new Error("Reducers may not dispatch actions.");try{b=!0,m=g(m,e)}finally{b=!1}for(var t=v=y,n=0;n<t.length;n++)t[n]();return e}function h(e){if("function"!=typeof e)throw new Error("Expected the nextReducer to be a function.");g=e,u({type:p.INIT})}function d(){var e,t=l;return e={subscribe:function(e){function n(){e.next&&e.next(s())}if("object"!==("undefined"==typeof e?"undefined":o(e)))throw new TypeError("Expected the observer to be an object.");n();var r=t(n);return{unsubscribe:r}}},e[c.default]=function(){return this},e}var f;if("function"==typeof t&&"undefined"==typeof n&&(n=t,t=void 0),"undefined"!=typeof n){if("function"!=typeof n)throw new Error("Expected the enhancer to be a function.");return n(i)(e,t)}if("function"!=typeof e)throw new Error("Expected the reducer to be a function.");var g=e,m=t,v=[],y=v,b=!1;return u({type:p.INIT}),f={dispatch:u,subscribe:l,getState:s,replaceReducer:h},f[c.default]=d,f}var o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol?"symbol":typeof e};t.__esModule=!0,t.ActionTypes=void 0,t.default=i;var s=n(433),a=r(s),l=n(438),c=r(l),p=t.ActionTypes={INIT:"@@redux/INIT"}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){var n=t&&t.type,r=n&&'"'+n.toString()+'"'||"an action";return"Given action "+r+', reducer "'+e+'" returned undefined. To ignore an action, you must explicitly return the previous state.'}function o(e){Object.keys(e).forEach(function(t){var n=e[t],r=n(void 0,{type:a.ActionTypes.INIT});if("undefined"==typeof r)throw new Error('Reducer "'+t+'" returned undefined during initialization. If the state passed to the reducer is undefined, you must explicitly return the initial state. The initial state may not be undefined.');var i="@@redux/PROBE_UNKNOWN_ACTION_"+Math.random().toString(36).substring(7).split("").join(".");if("undefined"==typeof n(void 0,{type:i}))throw new Error('Reducer "'+t+'" returned undefined when probed with a random type. '+("Don't try to handle "+a.ActionTypes.INIT+' or other actions in "redux/*" ')+"namespace. They are considered private. Instead, you must return the current state for any unknown actions, unless it is undefined, in which case you must return the initial state, regardless of the action type. The initial state may not be undefined.")})}function s(e){for(var t=Object.keys(e),n={},r=0;r<t.length;r++){var s=t[r];"function"==typeof e[s]&&(n[s]=e[s])}var a,l=Object.keys(n);try{o(n)}catch(e){a=e}return function(){var e=arguments.length<=0||void 0===arguments[0]?{}:arguments[0],t=arguments[1];if(a)throw a;for(var r=!1,o={},s=0;s<l.length;s++){var c=l[s],p=n[c],u=e[c],h=p(u,t);if("undefined"==typeof h){var d=i(c,t);throw new Error(d)}o[c]=h,r=r||h!==u}return r?o:e}}t.__esModule=!0,t.default=s;var a=n(413),l=n(433),c=(r(l),n(419));r(c)},function(e,t,n){"use strict";function r(e,t){return function(){return t(e.apply(void 0,arguments))}}function i(e,t){if("function"==typeof e)return r(e,t);if("object"!==("undefined"==typeof e?"undefined":o(e))||null===e)throw new Error("bindActionCreators expected an object or a function, instead received "+(null===e?"null":"undefined"==typeof e?"undefined":o(e))+'. Did you write "import ActionCreators from" instead of "import * as ActionCreators from"?');for(var n=Object.keys(e),i={},s=0;s<n.length;s++){var a=n[s],l=e[a];"function"==typeof l&&(i[a]=r(l,t))}return i}var o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol?"symbol":typeof e};t.__esModule=!0,t.default=i},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return function(e){return function(n,r,i){var s=e(n,r,i),l=s.dispatch,c=[],p={getState:s.getState,dispatch:function(e){return l(e)}};return c=t.map(function(e){return e(p)}),l=a.default.apply(void 0,c)(s.dispatch),o({},s,{dispatch:l})}}}t.__esModule=!0;var o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e};t.default=i;var s=n(417),a=r(s)},function(e,t,n){"use strict";function r(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];if(0===t.length)return function(e){return e};var r=function(){var e=t[t.length-1],n=t.slice(0,-1);return{v:function(){return n.reduceRight(function(e,t){return t(e)},e.apply(void 0,arguments))}}}();return"object"===("undefined"==typeof r?"undefined":i(r))?r.v:void 0}var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol?"symbol":typeof e};t.__esModule=!0,t.default=r},function(e,t,n){(function(t){"use strict";(function(){var n,r,i;"undefined"!=typeof performance&&null!==performance&&performance.now?e.exports=function(){return performance.now()}:"undefined"!=typeof t&&null!==t&&t.hrtime?(e.exports=function(){return(n()-i)/1e6},r=t.hrtime,n=function(){var e;return e=r(),1e9*e[0]+e[1]},i=n()):Date.now?(e.exports=function(){return Date.now()-i},i=Date.now()):(e.exports=function(){return(new Date).getTime()-i},i=(new Date).getTime())}).call(void 0)}).call(t,n(439))},function(e,t,n){"use strict";function r(e){"undefined"!=typeof console&&"function"==typeof console.error&&console.error(e);try{throw new Error(e)}catch(e){}}t.__esModule=!0,t.default=r},function(e,t,n){"use strict";t.__esModule=!0;var r=n(17);t.default=r.PropTypes.shape({subscribe:r.PropTypes.func.isRequired,dispatch:r.PropTypes.func.isRequired,getState:r.PropTypes.func.isRequired})},function(e,t,n){"use strict";function r(e){"undefined"!=typeof console&&"function"==typeof console.error&&console.error(e);try{throw new Error(e)}catch(e){}}t.__esModule=!0,t.default=r},function(e,t,n){"use strict";function r(e,t){if(e===t)return!0;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(var i=Object.prototype.hasOwnProperty,o=0;o<n.length;o++)if(!i.call(t,n[o])||e[n[o]]!==t[n[o]])return!1;return!0}t.__esModule=!0,t.default=r},function(e,t,n){"use strict";function r(e){return function(t){return(0,i.bindActionCreators)(e,t)}}t.__esModule=!0,t.default=r;var i=n(395)},function(e,t,n){e.exports=l},function(e,t,n){"use strict";var r=n(17),i=n(52),o=i.StyleSheet,s=n(300),a=s.View,l=n(215),c=l.keyConfigPropType,p=n(198),u=p.BorderStyles,h=n(308),d=r.createClass({displayName:"MultiSymbolPopover",propTypes:{keys:r.PropTypes.arrayOf(c)},render:function(){var e=this.props.keys,t=n(361);return r.createElement(a,{style:f.container},e.map(function(e){return r.createElement(t,{key:e.id,keyConfig:e,borders:u.NONE})}))}}),f=o.create({container:{flexDirection:"column-reverse",position:"relative",width:"100%",borderRadius:2,boxShadow:"0 2px 6px rgba(0, 0, 0, 0.3)",zIndex:h.popover},popoverButton:{backgroundColor:"#FFF",borderWidth:0}});e.exports=d},function(e,t,n){"use strict";var r=n(17),i=n(90),o=n(52),s=o.StyleSheet,a=n(435),l=n(436),c=n(437),p=n(198),u=p.IconTypes,h=n(215),d=h.iconPropType,f=n(266),g=f.gray25,m="#FFF",v=g,y=r.createClass({displayName:"Icon",propTypes:{focused:r.PropTypes.bool,icon:d.isRequired,style:r.PropTypes.any},mixins:[i],render:function(){var e=this.props,t=e.focused,n=e.icon,i=e.style,o=[t?b.focused:b.unfocused].concat(Array.isArray(i)?i:[i]);switch(n.type){case u.MATH:return r.createElement(a,{math:n.data,style:o});case u.SVG:return r.createElement(l,{name:n.data,color:t?m:v});case u.TEXT:return r.createElement(c,{character:n.data,style:o})}throw new Error("No icon or symbol provided")}}),b=s.create({unfocused:{color:v},focused:{color:m}});e.exports=y},function(e,t,n){"use strict";var r=n(17),i=n(52),o=i.StyleSheet,s=n(300),a=s.View,l=n(426),c=n(198),p=c.IconTypes,u=n(215),h=u.iconPropType,d=n(309),f=d.row,g=d.column,m=d.centered,v=d.fullWidth,y=n(266),b=y.iconSizeHeightPx,E=y.iconSizeWidthPx,T=r.createClass({displayName:"MultiSymbolGrid",propTypes:{focused:r.PropTypes.bool,icons:r.PropTypes.arrayOf(h).isRequired},render:function(){var e=this.props,t=e.focused,n=e.icons;if(n.forEach(function(e){if(e.type!==p.MATH)throw new Error("Received invalid icon: type="+e.type+", data="+e.data)}),1===n.length)return r.createElement(l,{icon:n[0],focused:t});var i=C.base,o=[C.base,C.secondary];if(2===n.length)return r.createElement(a,{style:[f,C.size]},r.createElement(a,{style:[g,m,v,C.middleLeft]},r.createElement(l,{style:i,icon:n[0],focused:t})),r.createElement(a,{style:[g,m,v,C.middleRight]},r.createElement(l,{style:o,icon:n[1],focused:t})));if(n.length>=3)return r.createElement(a,{style:[g,C.size]},r.createElement(a,{style:f},r.createElement(a,{style:[m,v,C.topLeft]},r.createElement(l,{style:i,icon:n[0],focused:t})),r.createElement(a,{style:[m,v,C.topRight]},r.createElement(l,{style:o,icon:n[1],focused:t}))),r.createElement(a,{style:f},r.createElement(a,{style:[m,v,C.bottomLeft]},r.createElement(l,{style:o,icon:n[2],focused:t})),r.createElement(a,{style:[m,v,C.bottomRight]},n[3]&&r.createElement(l,{style:o,icon:n[3],focused:t}))));throw new Error("Invalid number of icons:",n.length)}}),w=2,x=4,C=o.create({size:{height:b,width:E},bottomLeft:{marginBottom:w,marginLeft:x},topLeft:{marginTop:w,marginLeft:x},topRight:{marginTop:w,marginRight:x},bottomRight:{marginBottom:w,marginRight:x},middleLeft:{marginLeft:x},middleRight:{marginRight:x},base:{fontSize:18},secondary:{opacity:.3}});e.exports=T},function(e,t,n){"use strict";var r=n(17),i=n(52),o=i.StyleSheet,s=n(300),a=s.View,l=n(266),c=l.gray25,p=r.createClass({displayName:"CornerDecal",propTypes:{style:r.PropTypes.any},render:function(){var e=this.props.style,t=[h.container].concat(Array.isArray(e)?e:[e]);return r.createElement(a,{style:t},r.createElement("svg",{width:u,height:u,viewBox:"4 4 8 8"},r.createElement("path",{fill:c,opacity:"0.3",d:"M5.29289322,5.70710678 L10.2928932,10.7071068 C10.9228581,11.3370716 12,10.8909049 12,10 L12,5 C12,4.44771525 11.5522847,4 11,4 L6,4 C5.10909515,4 4.66292836,5.07714192 5.29289322,5.70710678 Z"})))}}),u=7,h=o.create({container:{position:"absolute",top:0,right:0,width:u,height:u}});e.exports=p},function(e,t,n){"use strict";var r="[.,+*?$|#{}()'\\^\\-\\[\\]\\\\\\/!@%\"~=<>_:;・、。〈-】〔-〟：-？！-／［-｀｛-･⸮؟٪-٬؛،؍﴾﴿᠁।၊။‐-‧‰-⁞¡-±´-¸º»¿]";e.exports={getPunctuation:function(){return r}}},function(e,t,n){"use strict";function r(e){return!(!e||!("function"==typeof Node?e instanceof Node:"object"==typeof e&&"number"==typeof e.nodeType&&"string"==typeof e.nodeName))}e.exports=r},function(e,t,n){"use strict";var r={childContextTypes:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,mixins:!0,propTypes:!0,type:!0},i={name:!0,length:!0,prototype:!0,caller:!0,arguments:!0,arity:!0},o="function"==typeof Object.getOwnPropertySymbols;e.exports=function(e,t,n){if("string"!=typeof t){var s=Object.getOwnPropertyNames(t);o&&(s=s.concat(Object.getOwnPropertySymbols(t)));for(var a=0;a<s.length;++a)if(!(r[s[a]]||i[s[a]]||n&&n[s[a]]))try{e[s[a]]=t[s[a]]}catch(e){}}return e}},function(e,t,n){var r;!function(i,o){"use strict";var s="0.7.10",a="",l="?",c="function",p="undefined",u="object",h="string",d="major",f="model",g="name",m="type",v="vendor",y="version",b="architecture",E="console",T="mobile",w="tablet",x="smarttv",C="wearable",S="embedded",P={extend:function(e,t){for(var n in t)"browser cpu device engine os".indexOf(n)!==-1&&t[n].length%2===0&&(e[n]=t[n].concat(e[n]));return e},has:function(e,t){return"string"==typeof e&&t.toLowerCase().indexOf(e.toLowerCase())!==-1},lowerize:function(e){return e.toLowerCase()},major:function(e){return typeof e===h?e.split(".")[0]:o}},k={rgx:function(){for(var e,t,n,r,i,s,a,l=0,h=arguments;l<h.length&&!s;){var d=h[l],f=h[l+1];if(typeof e===p){e={};for(r in f)f.hasOwnProperty(r)&&(i=f[r],typeof i===u?e[i[0]]=o:e[i]=o)}for(t=n=0;t<d.length&&!s;)if(s=d[t++].exec(this.getUA()))for(r=0;r<f.length;r++)a=s[++n],i=f[r],typeof i===u&&i.length>0?2==i.length?typeof i[1]==c?e[i[0]]=i[1].call(this,a):e[i[0]]=i[1]:3==i.length?typeof i[1]!==c||i[1].exec&&i[1].test?e[i[0]]=a?a.replace(i[1],i[2]):o:e[i[0]]=a?i[1].call(this,a,i[2]):o:4==i.length&&(e[i[0]]=a?i[3].call(this,a.replace(i[1],i[2])):o):e[i]=a?a:o;l+=2}return e},str:function(e,t){for(var n in t)if(typeof t[n]===u&&t[n].length>0){for(var r=0;r<t[n].length;r++)if(P.has(t[n][r],e))return n===l?o:n}else if(P.has(t[n],e))return n===l?o:n;return e}},_={browser:{oldsafari:{version:{"1.0":"/8",1.2:"/1",1.3:"/3","2.0":"/412","2.0.2":"/416","2.0.3":"/417","2.0.4":"/419","?":"/"}}},device:{amazon:{model:{"Fire Phone":["SD","KF"]}},sprint:{model:{"Evo Shift 4G":"7373KT"},vendor:{HTC:"APA",Sprint:"Sprint"}}},os:{windows:{version:{ME:"4.90","NT 3.11":"NT3.51","NT 4.0":"NT4.0",2000:"NT 5.0",XP:["NT 5.1","NT 5.2"],Vista:"NT 6.0",7:"NT 6.1",8:"NT 6.2",8.1:"NT 6.3",10:["NT 6.4","NT 10.0"],RT:"ARM"}}}},M={browser:[[/(opera\smini)\/([\w\.-]+)/i,/(opera\s[mobiletab]+).+version\/([\w\.-]+)/i,/(opera).+version\/([\w\.]+)/i,/(opera)[\/\s]+([\w\.]+)/i],[g,y],[/\s(opr)\/([\w\.]+)/i],[[g,"Opera"],y],[/(kindle)\/([\w\.]+)/i,/(lunascape|maxthon|netfront|jasmine|blazer)[\/\s]?([\w\.]+)*/i,/(avant\s|iemobile|slim|baidu)(?:browser)?[\/\s]?([\w\.]*)/i,/(?:ms|\()(ie)\s([\w\.]+)/i,/(rekonq)\/([\w\.]+)*/i,/(chromium|flock|rockmelt|midori|epiphany|silk|skyfire|ovibrowser|bolt|iron|vivaldi|iridium|phantomjs)\/([\w\.-]+)/i],[g,y],[/(trident).+rv[:\s]([\w\.]+).+like\sgecko/i],[[g,"IE"],y],[/(edge)\/((\d+)?[\w\.]+)/i],[g,y],[/(yabrowser)\/([\w\.]+)/i],[[g,"Yandex"],y],[/(comodo_dragon)\/([\w\.]+)/i],[[g,/_/g," "],y],[/(chrome|omniweb|arora|[tizenoka]{5}\s?browser)\/v?([\w\.]+)/i,/(qqbrowser)[\/\s]?([\w\.]+)/i],[g,y],[/(uc\s?browser)[\/\s]?([\w\.]+)/i,/ucweb.+(ucbrowser)[\/\s]?([\w\.]+)/i,/JUC.+(ucweb)[\/\s]?([\w\.]+)/i],[[g,"UCBrowser"],y],[/(dolfin)\/([\w\.]+)/i],[[g,"Dolphin"],y],[/((?:android.+)crmo|crios)\/([\w\.]+)/i],[[g,"Chrome"],y],[/XiaoMi\/MiuiBrowser\/([\w\.]+)/i],[y,[g,"MIUI Browser"]],[/android.+version\/([\w\.]+)\s+(?:mobile\s?safari|safari)/i],[y,[g,"Android Browser"]],[/FBAV\/([\w\.]+);/i],[y,[g,"Facebook"]],[/fxios\/([\w\.-]+)/i],[y,[g,"Firefox"]],[/version\/([\w\.]+).+?mobile\/\w+\s(safari)/i],[y,[g,"Mobile Safari"]],[/version\/([\w\.]+).+?(mobile\s?safari|safari)/i],[y,g],[/webkit.+?(mobile\s?safari|safari)(\/[\w\.]+)/i],[g,[y,k.str,_.browser.oldsafari.version]],[/(konqueror)\/([\w\.]+)/i,/(webkit|khtml)\/([\w\.]+)/i],[g,y],[/(navigator|netscape)\/([\w\.-]+)/i],[[g,"Netscape"],y],[/(swiftfox)/i,/(icedragon|iceweasel|camino|chimera|fennec|maemo\sbrowser|minimo|conkeror)[\/\s]?([\w\.\+]+)/i,/(firefox|seamonkey|k-meleon|icecat|iceape|firebird|phoenix)\/([\w\.-]+)/i,/(mozilla)\/([\w\.]+).+rv\:.+gecko\/\d+/i,/(polaris|lynx|dillo|icab|doris|amaya|w3m|netsurf|sleipnir)[\/\s]?([\w\.]+)/i,/(links)\s\(([\w\.]+)/i,/(gobrowser)\/?([\w\.]+)*/i,/(ice\s?browser)\/v?([\w\._]+)/i,/(mosaic)[\/\s]([\w\.]+)/i],[g,y]],cpu:[[/(?:(amd|x(?:(?:86|64)[_-])?|wow|win)64)[;\)]/i],[[b,"amd64"]],[/(ia32(?=;))/i],[[b,P.lowerize]],[/((?:i[346]|x)86)[;\)]/i],[[b,"ia32"]],[/windows\s(ce|mobile);\sppc;/i],[[b,"arm"]],[/((?:ppc|powerpc)(?:64)?)(?:\smac|;|\))/i],[[b,/ower/,"",P.lowerize]],[/(sun4\w)[;\)]/i],[[b,"sparc"]],[/((?:avr32|ia64(?=;))|68k(?=\))|arm(?:64|(?=v\d+;))|(?=atmel\s)avr|(?:irix|mips|sparc)(?:64)?(?=;)|pa-risc)/i],[[b,P.lowerize]]],device:[[/\((ipad|playbook);[\w\s\);-]+(rim|apple)/i],[f,v,[m,w]],[/applecoremedia\/[\w\.]+ \((ipad)/],[f,[v,"Apple"],[m,w]],[/(apple\s{0,1}tv)/i],[[f,"Apple TV"],[v,"Apple"]],[/(archos)\s(gamepad2?)/i,/(hp).+(touchpad)/i,/(kindle)\/([\w\.]+)/i,/\s(nook)[\w\s]+build\/(\w+)/i,/(dell)\s(strea[kpr\s\d]*[\dko])/i],[v,f,[m,w]],[/(kf[A-z]+)\sbuild\/[\w\.]+.*silk\//i],[f,[v,"Amazon"],[m,w]],[/(sd|kf)[0349hijorstuw]+\sbuild\/[\w\.]+.*silk\//i],[[f,k.str,_.device.amazon.model],[v,"Amazon"],[m,T]],[/\((ip[honed|\s\w*]+);.+(apple)/i],[f,v,[m,T]],[/\((ip[honed|\s\w*]+);/i],[f,[v,"Apple"],[m,T]],[/(blackberry)[\s-]?(\w+)/i,/(blackberry|benq|palm(?=\-)|sonyericsson|acer|asus|dell|huawei|meizu|motorola|polytron)[\s_-]?([\w-]+)*/i,/(hp)\s([\w\s]+\w)/i,/(asus)-?(\w+)/i],[v,f,[m,T]],[/\(bb10;\s(\w+)/i],[f,[v,"BlackBerry"],[m,T]],[/android.+(transfo[prime\s]{4,10}\s\w+|eeepc|slider\s\w+|nexus 7)/i],[f,[v,"Asus"],[m,w]],[/(sony)\s(tablet\s[ps])\sbuild\//i,/(sony)?(?:sgp.+)\sbuild\//i],[[v,"Sony"],[f,"Xperia Tablet"],[m,w]],[/(?:sony)?(?:(?:(?:c|d)\d{4})|(?:so[-l].+))\sbuild\//i],[[v,"Sony"],[f,"Xperia Phone"],[m,T]],[/\s(ouya)\s/i,/(nintendo)\s([wids3u]+)/i],[v,f,[m,E]],[/android.+;\s(shield)\sbuild/i],[f,[v,"Nvidia"],[m,E]],[/(playstation\s[34portablevi]+)/i],[f,[v,"Sony"],[m,E]],[/(sprint\s(\w+))/i],[[v,k.str,_.device.sprint.vendor],[f,k.str,_.device.sprint.model],[m,T]],[/(lenovo)\s?(S(?:5000|6000)+(?:[-][\w+]))/i],[v,f,[m,w]],[/(htc)[;_\s-]+([\w\s]+(?=\))|\w+)*/i,/(zte)-(\w+)*/i,/(alcatel|geeksphone|huawei|lenovo|nexian|panasonic|(?=;\s)sony)[_\s-]?([\w-]+)*/i],[v,[f,/_/g," "],[m,T]],[/(nexus\s9)/i],[f,[v,"HTC"],[m,w]],[/[\s\(;](xbox(?:\sone)?)[\s\);]/i],[f,[v,"Microsoft"],[m,E]],[/(kin\.[onetw]{3})/i],[[f,/\./g," "],[v,"Microsoft"],[m,T]],[/\s(milestone|droid(?:[2-4x]|\s(?:bionic|x2|pro|razr))?(:?\s4g)?)[\w\s]+build\//i,/mot[\s-]?(\w+)*/i,/(XT\d{3,4}) build\//i,/(nexus\s[6])/i],[f,[v,"Motorola"],[m,T]],[/android.+\s(mz60\d|xoom[\s2]{0,2})\sbuild\//i],[f,[v,"Motorola"],[m,w]],[/android.+((sch-i[89]0\d|shw-m380s|gt-p\d{4}|gt-n8000|sgh-t8[56]9|nexus 10))/i,/((SM-T\w+))/i],[[v,"Samsung"],f,[m,w]],[/((s[cgp]h-\w+|gt-\w+|galaxy\snexus|sm-n900))/i,/(sam[sung]*)[\s-]*(\w+-?[\w-]*)*/i,/sec-((sgh\w+))/i],[[v,"Samsung"],f,[m,T]],[/(samsung);smarttv/i],[v,f,[m,x]],[/\(dtv[\);].+(aquos)/i],[f,[v,"Sharp"],[m,x]],[/sie-(\w+)*/i],[f,[v,"Siemens"],[m,T]],[/(maemo|nokia).*(n900|lumia\s\d+)/i,/(nokia)[\s_-]?([\w-]+)*/i],[[v,"Nokia"],f,[m,T]],[/android\s3\.[\s\w;-]{10}(a\d{3})/i],[f,[v,"Acer"],[m,w]],[/android\s3\.[\s\w;-]{10}(lg?)-([06cv9]{3,4})/i],[[v,"LG"],f,[m,w]],[/(lg) netcast\.tv/i],[v,f,[m,x]],[/(nexus\s[45])/i,/lg[e;\s\/-]+(\w+)*/i],[f,[v,"LG"],[m,T]],[/android.+(ideatab[a-z0-9\-\s]+)/i],[f,[v,"Lenovo"],[m,w]],[/linux;.+((jolla));/i],[v,f,[m,T]],[/((pebble))app\/[\d\.]+\s/i],[v,f,[m,C]],[/android.+;\s(glass)\s\d/i],[f,[v,"Google"],[m,C]],[/android.+(\w+)\s+build\/hm\1/i,/android.+(hm[\s\-_]*note?[\s_]*(?:\d\w)?)\s+build/i,/android.+(mi[\s\-_]*(?:one|one[\s_]plus)?[\s_]*(?:\d\w)?)\s+build/i],[[f,/_/g," "],[v,"Xiaomi"],[m,T]],[/\s(tablet)[;\/\s]/i,/\s(mobile)[;\/\s]/i],[[m,P.lowerize],v,f]],engine:[[/windows.+\sedge\/([\w\.]+)/i],[y,[g,"EdgeHTML"]],[/(presto)\/([\w\.]+)/i,/(webkit|trident|netfront|netsurf|amaya|lynx|w3m)\/([\w\.]+)/i,/(khtml|tasman|links)[\/\s]\(?([\w\.]+)/i,/(icab)[\/\s]([23]\.[\d\.]+)/i],[g,y],[/rv\:([\w\.]+).*(gecko)/i],[y,g]],os:[[/microsoft\s(windows)\s(vista|xp)/i],[g,y],[/(windows)\snt\s6\.2;\s(arm)/i,/(windows\sphone(?:\sos)*|windows\smobile|windows)[\s\/]?([ntce\d\.\s]+\w)/i],[g,[y,k.str,_.os.windows.version]],[/(win(?=3|9|n)|win\s9x\s)([nt\d\.]+)/i],[[g,"Windows"],[y,k.str,_.os.windows.version]],[/\((bb)(10);/i],[[g,"BlackBerry"],y],[/(blackberry)\w*\/?([\w\.]+)*/i,/(tizen)[\/\s]([\w\.]+)/i,/(android|webos|palm\sos|qnx|bada|rim\stablet\sos|meego|contiki)[\/\s-]?([\w\.]+)*/i,/linux;.+(sailfish);/i],[g,y],[/(symbian\s?os|symbos|s60(?=;))[\/\s-]?([\w\.]+)*/i],[[g,"Symbian"],y],[/\((series40);/i],[g],[/mozilla.+\(mobile;.+gecko.+firefox/i],[[g,"Firefox OS"],y],[/(nintendo|playstation)\s([wids34portablevu]+)/i,/(mint)[\/\s\(]?(\w+)*/i,/(mageia|vectorlinux)[;\s]/i,/(joli|[kxln]?ubuntu|debian|[open]*suse|gentoo|(?=\s)arch|slackware|fedora|mandriva|centos|pclinuxos|redhat|zenwalk|linpus)[\/\s-]?([\w\.-]+)*/i,/(hurd|linux)\s?([\w\.]+)*/i,/(gnu)\s?([\w\.]+)*/i],[g,y],[/(cros)\s[\w]+\s([\w\.]+\w)/i],[[g,"Chromium OS"],y],[/(sunos)\s?([\w\.]+\d)*/i],[[g,"Solaris"],y],[/\s([frentopc-]{0,4}bsd|dragonfly)\s?([\w\.]+)*/i],[g,y],[/(ip[honead]+)(?:.*os\s([\w]+)*\slike\smac|;\sopera)/i],[[g,"iOS"],[y,/_/g,"."]],[/(mac\sos\sx)\s?([\w\s\.]+\w)*/i,/(macintosh|mac(?=_powerpc)\s)/i],[[g,"Mac OS"],[y,/_/g,"."]],[/((?:open)?solaris)[\/\s-]?([\w\.]+)*/i,/(haiku)\s(\w+)/i,/(aix)\s((\d)(?=\.|\)|\s)[\w\.]*)*/i,/(plan\s9|minix|beos|os\/2|amigaos|morphos|risc\sos|openvms)/i,/(unix)\s?([\w\.]+)*/i],[g,y]]},O=function(e,t){if(!(this instanceof O))return new O(e,t).getResult();var n=e||(i&&i.navigator&&i.navigator.userAgent?i.navigator.userAgent:a),r=t?P.extend(M,t):M;return this.getBrowser=function(){var e=k.rgx.apply(this,r.browser);return e.major=P.major(e.version),e},this.getCPU=function(){return k.rgx.apply(this,r.cpu)},this.getDevice=function(){return k.rgx.apply(this,r.device)},this.getEngine=function(){return k.rgx.apply(this,r.engine)},this.getOS=function(){return k.rgx.apply(this,r.os)},this.getResult=function(){return{ua:this.getUA(),browser:this.getBrowser(),engine:this.getEngine(),os:this.getOS(),device:this.getDevice(),cpu:this.getCPU()}},this.getUA=function(){return n},this.setUA=function(e){return n=e,this},this.setUA(n),this};O.VERSION=s,O.BROWSER={NAME:g,MAJOR:d,VERSION:y},O.CPU={ARCHITECTURE:b},O.DEVICE={MODEL:f,VENDOR:v,TYPE:m,CONSOLE:E,MOBILE:T,SMARTTV:x,TABLET:w,WEARABLE:C,EMBEDDED:S},O.ENGINE={NAME:g,VERSION:y},O.OS={NAME:g,VERSION:y},typeof t!==p?(typeof e!==p&&e.exports&&(t=e.exports=O),t.UAParser=O):"function"===c&&n(445)?(r=function(){return O}.call(t,n,t,e),!(r!==o&&(e.exports=r))):i.UAParser=O;var N=i.jQuery||i.Zepto;if(typeof N!==p){var I=new O;N.ua=I.getResult(),N.ua.get=function(){return I.getUA()},N.ua.set=function(e){I.setUA(e);var t=I.getResult();for(var n in t)N.ua[n]=t[n]}}}("object"==typeof window?window:this)},function(e,t,n){"use strict";function r(e){if(!s(e)||h.call(e)!=a||o(e))return!1;var t=i(e);if(null===t)return!0;var n=p.call(t,"constructor")&&t.constructor;return"function"==typeof n&&n instanceof n&&c.call(n)==u}var i=n(440),o=n(441),s=n(442),a="[object Object]",l=Object.prototype,c=Function.prototype.toString,p=l.hasOwnProperty,u=c.call(Object),h=l.toString;e.exports=r},function(e,t,n){"use strict";var r=function(e,t,n,r,i,o,s,a){if(!e){var l;if(void 0===t)l=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var c=[n,r,i,o,s,a],p=0;l=new Error(t.replace(/%s/g,function(){return c[p++]})),l.name="Invariant Violation"}throw l.framesToPop=1,l}};e.exports=r},function(e,t,n){"use strict";var r=n(17),i=n(19),o=n(52),s=o.StyleSheet,a=n(300),l=a.View,c=n(309),p=c.row,u=c.centered,h=n(266),d=h.iconSizeHeightPx,f=h.iconSizeWidthPx,g=r.createClass({displayName:"MathIcon",propTypes:{math:r.PropTypes.string.isRequired,style:r.PropTypes.any},componentDidMount:function(){this._renderMath()},componentDidUpdate:function(e){e.math!==this.props.math&&this._renderMath()},_renderMath:function(){var e=this.props.math;window.katex.render(e,i.findDOMNode(this))},render:function(){var e=this.props.style,t=[p,u,m.size,m.base].concat(Array.isArray(e)?e:[e]);return r.createElement(l,{style:t})}}),m=s.create({size:{height:d,width:f},base:{fontSize:25}});e.exports=g},function(e,t,n){"use strict";var r=n(17),i=n(19),o=n(443),s=r.createClass({displayName:"SvgIcon",propTypes:{color:r.PropTypes.string.isRequired,name:r.PropTypes.string.isRequired},componentDidMount:function(){this._addFillRule()},componentDidUpdate:function(e){e.name!==this.props.name&&this._addFillRule()},_addFillRule:function(){var e=i.findDOMNode(this);if(e instanceof SVGElement){var t=e.querySelector("g");t.setAttributeNS(null,"fill-rule","evenodd")}},render:function(){var e=this.props,t=e.color,n=e.name,i=o[n];return r.createElement(i,{color:t})}});e.exports=s},function(e,t,n){"use strict";var r=n(17),i=n(52),o=i.StyleSheet,s=n(300),a=s.View,l=s.Text,c=n(309),p=c.row,u=c.centered,h=n(266),d=h.iconSizeHeightPx,f=h.iconSizeWidthPx,g=r.createClass({displayName:"TextIcon",propTypes:{character:r.PropTypes.string.isRequired,style:r.PropTypes.any},render:function(){var e=this.props,t=e.character,n=e.style,i=[p,u,m.size,m.base].concat(Array.isArray(n)?n:[n]);return r.createElement(a,{style:i},r.createElement(l,null,t))}}),m=o.create({size:{height:d,width:f},base:{fontFamily:"Proxima Nova",fontSize:25}});e.exports=g},function(e,t,n){(function(t){"use strict";e.exports=n(444)(t||window||void 0)}).call(t,function(){return this}())},function(e,t,n){function r(){if(!a){a=!0;for(var e,t=s.length;t;){e=s,s=[];for(var n=-1;++n<t;)e[n]();t=s.length}a=!1}}function i(){}var o=e.exports={},s=[],a=!1;o.nextTick=function(e){s.push(e),a||setTimeout(r,0)},o.title="browser",o.browser=!0,o.env={},o.argv=[],o.version="",o.versions={},o.on=i,o.addListener=i,o.once=i,o.off=i,o.removeListener=i,o.removeAllListeners=i,o.emit=i,o.binding=function(e){throw new Error("process.binding is not supported")},o.cwd=function(){return"/"},o.chdir=function(e){throw new Error("process.chdir is not supported")},o.umask=function(){return 0}},function(e,t,n){"use strict";var r=n(446),i=Object.getPrototypeOf,o=r(i,Object);e.exports=o},function(e,t,n){"use strict";function r(e){var t=!1;if(null!=e&&"function"!=typeof e.toString)try{t=!!(e+"")}catch(e){}return t}e.exports=r},function(e,t,n){"use strict";function r(e){return!!e&&"object"==("undefined"==typeof e?"undefined":i(e))}var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol?"symbol":typeof e};e.exports=r},function(e,t,n){"use strict";e.exports={COS:n(447),LOG:n(448),EQUAL:n(449),BACKSPACE:n(450),SQRT:n(451),EXP:n(452),NEQ:n(453),GEQ:n(454),LN:n(455),DISMISS:n(456),SIN:n(457),LT:n(458),CUBE_ROOT:n(459),PLUS:n(460),TAN:n(461),LEFT:n(462),UP:n(463),DOWN:n(464),LEFT_PAREN:n(465),RIGHT_PAREN:n(466),GT:n(467),DIVIDE:n(468),PERIOD:n(469),PERCENT:n(470),TIMES:n(471),EXP_3:n(472),EXP_2:n(473),RIGHT:n(474),CDOT:n(475),LOG_N:n(476),LEQ:n(477),MINUS:n(478),NEGATIVE:n(478),RADICAL:n(479),FRAC_INCLUSIVE:n(480),FRAC_EXCLUSIVE:n(481),JUMP_OUT_PARENTHESES:n(482),JUMP_OUT_EXPONENT:n(483),JUMP_OUT_BASE:n(484),JUMP_INTO_NUMERATOR:n(485),JUMP_OUT_NUMERATOR:n(486),JUMP_OUT_DENOMINATOR:n(487)}},function(e,t,n){"use strict";e.exports=function(e){var t,n=e.Symbol;return"function"==typeof n?n.observable?t=n.observable:(t=n("observable"),n.observable=t):t="@@observable",t}},function(e,t,n){(function(t){e.exports=t}).call(t,{})},function(e,t,n){"use strict";function r(e,t){return function(n){return e(t(n))}}e.exports=r},function(e,t,n){"use strict";var r=n(17),i=r.createClass({displayName:"Cos",propTypes:{color:r.PropTypes.string.isRequired},render:function(){return r.createElement("svg",{width:"48",height:"48",viewBox:"0 0 48 48"},r.createElement("g",{fill:"none",fillRule:"evenodd"},r.createElement("path",{fill:"none",d:"M0 0h48v48H0z"}),r.createElement("path",{fill:"none",d:"M13 12h24v24H13z"}),r.createElement("path",{d:"M18.182 29.168c1.386 0 2.226-.602 2.674-1.232l-1.162-1.078a1.707 1.707 0 0 1-1.428.728c-1.078 0-1.834-.798-1.834-1.974s.756-1.96 1.834-1.96c.616 0 1.106.252 1.428.728l1.162-1.092c-.448-.616-1.288-1.218-2.674-1.218-2.086 0-3.584 1.47-3.584 3.542 0 2.086 1.498 3.556 3.584 3.556zm6.972 0c2.24 0 3.584-1.624 3.584-3.556 0-1.918-1.344-3.542-3.584-3.542-2.226 0-3.57 1.624-3.57 3.542 0 1.932 1.344 3.556 3.57 3.556zm0-1.582c-1.106 0-1.722-.91-1.722-1.974 0-1.05.616-1.96 1.722-1.96 1.106 0 1.736.91 1.736 1.96 0 1.064-.63 1.974-1.736 1.974zm7.336 1.582c1.876 0 2.926-.938 2.926-2.17 0-2.73-4.004-1.89-4.004-2.898 0-.378.42-.672 1.064-.672.826 0 1.596.35 2.002.784l.714-1.218c-.672-.532-1.582-.924-2.73-.924-1.778 0-2.772.994-2.772 2.128 0 2.66 4.018 1.75 4.018 2.87 0 .42-.364.728-1.134.728-.84 0-1.848-.462-2.338-.924l-.77 1.246c.714.658 1.848 1.05 3.024 1.05z",
fill:this.props.color})))}});e.exports=i},function(e,t,n){"use strict";var r=n(17),i=r.createClass({displayName:"Log",propTypes:{color:r.PropTypes.string.isRequired},render:function(){return r.createElement("svg",{width:"48",height:"48",viewBox:"0 0 48 48"},r.createElement("g",{fill:"none",fillRule:"evenodd"},r.createElement("path",{fill:"none",d:"M0 0h48v48H0z"}),r.createElement("path",{d:"M16.776 29v-9.338h-1.778V29h1.778zm4.9.168c2.24 0 3.584-1.624 3.584-3.556 0-1.918-1.344-3.542-3.584-3.542-2.226 0-3.57 1.624-3.57 3.542 0 1.932 1.344 3.556 3.57 3.556zm0-1.582c-1.106 0-1.722-.91-1.722-1.974 0-1.05.616-1.96 1.722-1.96 1.106 0 1.736.91 1.736 1.96 0 1.064-.63 1.974-1.736 1.974zm7.672 4.158c1.666 0 3.654-.63 3.654-3.206v-6.3H31.21v.868c-.546-.686-1.274-1.036-2.086-1.036-1.708 0-2.982 1.232-2.982 3.444 0 2.254 1.288 3.444 2.982 3.444.826 0 1.554-.392 2.086-1.064v.686c0 1.33-1.008 1.708-1.862 1.708-.854 0-1.568-.238-2.114-.84l-.798 1.288c.854.742 1.75 1.008 2.912 1.008zm.336-4.368c-1.008 0-1.708-.7-1.708-1.862 0-1.162.7-1.862 1.708-1.862.588 0 1.232.322 1.526.77v2.184c-.294.434-.938.77-1.526.77z",fill:this.props.color})))}});e.exports=i},function(e,t,n){"use strict";var r=n(17),i=r.createClass({displayName:"Equal",propTypes:{color:r.PropTypes.string.isRequired},render:function(){return r.createElement("svg",{width:"48",height:"48",viewBox:"0 0 48 48"},r.createElement("g",{fill:"none",fillRule:"evenodd"},r.createElement("path",{fill:"none",d:"M0 0h48v48H0z"}),r.createElement("path",{fill:"none",d:"M12 12h24v24H12z"}),r.createElement("path",{d:"M16 21h17M16 27h17",stroke:this.props.color,strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})))}});e.exports=i},function(e,t,n){"use strict";var r=n(17),i=function(){return r.createElement("svg",{width:"48",height:"48",viewBox:"0 0 48 48"},r.createElement("g",{fill:"none",fillRule:"evenodd"},r.createElement("path",{fill:"none",d:"M0 0h48v48H0z"}),r.createElement("path",{d:"M13 24l6 6h14V18H19l-6 6zm-1.414-1.414l6-6A2 2 0 0 1 19 16h14a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H19a2 2 0 0 1-1.414-.586l-6-6a2 2 0 0 1 0-2.828z",fill:"#888D93"}),r.createElement("path",{d:"M23 21l6 6M29 21l-6 6",stroke:"#888D93",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})))};e.exports=i},function(e,t,n){"use strict";var r=n(17),i=r.createClass({displayName:"Sqrt",propTypes:{color:r.PropTypes.string.isRequired},render:function(){return r.createElement("svg",{width:"48",height:"48",viewBox:"0 0 48 48"},r.createElement("g",{fill:"none",fillRule:"evenodd"},r.createElement("path",{fill:"none",d:"M0 0h48v48H0z"}),r.createElement("path",{stroke:this.props.color,strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",d:"M14 29l4 6 9-14h7"})))}});e.exports=i},function(e,t,n){"use strict";var r=n(17),i=r.createClass({displayName:"Exp",propTypes:{color:r.PropTypes.string.isRequired},render:function(){return r.createElement("svg",{width:"48",height:"48",viewBox:"0 0 48 48"},r.createElement("g",{fill:"none",fillRule:"evenodd"},r.createElement("path",{fill:"none",d:"M0 0h48v48H0z"}),r.createElement("path",{d:"M28 16.997c0-.55.453-.997.997-.997h6.006c.55 0 .997.453.997.997v6.006c0 .55-.453.997-.997.997h-6.006c-.55 0-.997-.453-.997-.997v-6.006zM30 18h4v4h-4v-4zM14 21c0-.552.456-1 1.002-1h9.996A1 1 0 0 1 26 21v14c0 .552-.456 1-1.002 1h-9.996A1 1 0 0 1 14 35V21zm2 1h8v12h-8V22z",fill:this.props.color})))}});e.exports=i},function(e,t,n){"use strict";var r=n(17),i=r.createClass({displayName:"Neq",propTypes:{color:r.PropTypes.string.isRequired},render:function(){return r.createElement("svg",{width:"48",height:"48",viewBox:"0 0 48 48"},r.createElement("g",{fill:"none",fillRule:"evenodd"},r.createElement("path",{fill:"none",d:"M0 0h48v48H0z"}),r.createElement("path",{fill:"none",d:"M12 12h24v24H12z"}),r.createElement("path",{d:"M19 33l10-18M16 21h17M16 27h17",stroke:this.props.color,strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})))}});e.exports=i},function(e,t,n){"use strict";var r=n(17),i=r.createClass({displayName:"Geq",propTypes:{color:r.PropTypes.string.isRequired},render:function(){return r.createElement("svg",{width:"48",height:"48",viewBox:"0 0 48 48"},r.createElement("g",{fill:"none",fillRule:"evenodd"},r.createElement("path",{fill:"none",d:"M0 0h48v48H0z"}),r.createElement("path",{fill:"none",d:"M12 12h24v24H12z"}),r.createElement("path",{d:"M16 33h16M16 30l16-6-16-6",stroke:this.props.color,strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})))}});e.exports=i},function(e,t,n){"use strict";var r=n(17),i=r.createClass({displayName:"Ln",propTypes:{color:r.PropTypes.string.isRequired},render:function(){return r.createElement("svg",{width:"48",height:"48",viewBox:"0 0 48 48"},r.createElement("g",{fill:"none",fillRule:"evenodd"},r.createElement("path",{fill:"none",d:"M0 0h48v48H0z"}),r.createElement("path",{d:"M20.836 29v-9.338h-1.778V29h1.778zm8.106 0v-4.774c0-1.316-.714-2.156-2.198-2.156-1.106 0-1.932.532-2.366 1.05v-.882H22.6V29h1.778v-4.55c.294-.406.84-.798 1.54-.798.756 0 1.246.322 1.246 1.26V29h1.778z",fill:this.props.color})))}});e.exports=i},function(e,t,n){"use strict";var r=n(17),i=function(){return r.createElement("svg",{width:"48",height:"48",viewBox:"0 0 48 48"},r.createElement("g",{fill:"none",fillRule:"evenodd"},r.createElement("path",{fill:"none",d:"M0 0h48v48H0z"}),r.createElement("path",{d:"M18 21l6 6 6-6",strokeLinecap:"round",strokeWidth:"2",stroke:"#71B307",strokeLinejoin:"round"})))};e.exports=i},function(e,t,n){"use strict";var r=n(17),i=r.createClass({displayName:"Sin",propTypes:{color:r.PropTypes.string.isRequired},render:function(){return r.createElement("svg",{width:"48",height:"48",viewBox:"0 0 48 48"},r.createElement("g",{fill:"none",fillRule:"evenodd"},r.createElement("path",{fill:"none",d:"M0 0h48v48H0z"}),r.createElement("path",{fill:"none",d:"M12 12h24v24H12z"}),r.createElement("path",{d:"M18.655 29.168c1.876 0 2.926-.938 2.926-2.17 0-2.73-4.004-1.89-4.004-2.898 0-.378.42-.672 1.064-.672.826 0 1.596.35 2.002.784l.714-1.218c-.672-.532-1.582-.924-2.73-.924-1.778 0-2.772.994-2.772 2.128 0 2.66 4.018 1.75 4.018 2.87 0 .42-.364.728-1.134.728-.84 0-1.848-.462-2.338-.924l-.77 1.246c.714.658 1.848 1.05 3.024 1.05zm5.124-7.658c.588 0 1.064-.476 1.064-1.064 0-.588-.476-1.05-1.064-1.05a1.06 1.06 0 0 0-1.064 1.05c0 .588.49 1.064 1.064 1.064zm.896 7.49v-6.762h-1.778V29h1.778zm8.106 0v-4.774c0-1.316-.714-2.156-2.198-2.156-1.106 0-1.932.532-2.366 1.05v-.882h-1.778V29h1.778v-4.55c.294-.406.84-.798 1.54-.798.756 0 1.246.322 1.246 1.26V29h1.778z",fill:this.props.color})))}});e.exports=i},function(e,t,n){"use strict";var r=n(17),i=r.createClass({displayName:"Lt",propTypes:{color:r.PropTypes.string.isRequired},render:function(){return r.createElement("svg",{width:"48",height:"48",viewBox:"0 0 48 48"},r.createElement("g",{fill:"none",fillRule:"evenodd"},r.createElement("path",{fill:"none",d:"M0 0h48v48H0z"}),r.createElement("path",{fill:"none",d:"M12 12h24v24H12z"}),r.createElement("path",{stroke:this.props.color,strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",d:"M32 30l-16-6 16-6"})))}});e.exports=i},function(e,t,n){"use strict";var r=n(17),i=r.createClass({displayName:"CubeRoot",propTypes:{color:r.PropTypes.string.isRequired},render:function(){return r.createElement("svg",{width:"48",height:"48",viewBox:"0 0 48 48"},r.createElement("g",{fill:"none",fillRule:"evenodd"},r.createElement("path",{fill:"none",d:"M0 0h48v48H0z"}),r.createElement("path",{d:"M17.91 23.12c1.66 0 2.76-.81 2.76-1.98 0-.96-.86-1.51-1.57-1.58.79-.13 1.46-.72 1.46-1.5 0-1.1-.95-1.83-2.65-1.83-1.23 0-2.11.45-2.67 1.08l.83 1.08c.47-.42 1.05-.64 1.66-.64.64 0 1.12.19 1.12.61 0 .35-.39.52-1.08.52-.25 0-.77 0-.9-.01v1.53c.1-.01.61-.01.9-.01.91 0 1.19.18 1.19.56 0 .37-.38.65-1.12.65-.58 0-1.34-.23-1.82-.7l-.87 1.17c.52.6 1.48 1.05 2.76 1.05z",fill:this.props.color}),r.createElement("path",{stroke:this.props.color,strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",d:"M14 29l4 6 9-14h7"})))}});e.exports=i},function(e,t,n){"use strict";var r=n(17),i=r.createClass({displayName:"Plus",propTypes:{color:r.PropTypes.string.isRequired},render:function(){return r.createElement("svg",{width:"48",height:"48",viewBox:"0 0 48 48"},r.createElement("g",{fill:"none",fillRule:"evenodd"},r.createElement("path",{fill:"none",d:"M0 0h48v48H0z"}),r.createElement("path",{d:"M19 24h10M24 29V19",stroke:this.props.color,strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})))}});e.exports=i},function(e,t,n){"use strict";var r=n(17),i=r.createClass({displayName:"Tan",propTypes:{color:r.PropTypes.string.isRequired},render:function(){return r.createElement("svg",{width:"48",height:"48",viewBox:"0 0 48 48"},r.createElement("g",{fill:"none",fillRule:"evenodd"},r.createElement("path",{fill:"none",d:"M0 0h48v48H0z"}),r.createElement("path",{fill:"none",d:"M12 12h24v24H12z"}),r.createElement("path",{d:"M16.93 29.168c.742 0 1.218-.196 1.484-.434l-.378-1.344c-.098.098-.35.196-.616.196-.392 0-.616-.322-.616-.742v-3.052h1.372v-1.554h-1.372V20.39h-1.792v1.848h-1.12v1.554h1.12v3.528c0 1.204.672 1.848 1.918 1.848zM25.232 29v-4.368c0-1.946-1.414-2.562-2.954-2.562-1.064 0-2.128.336-2.954 1.064l.672 1.19c.574-.532 1.246-.798 1.974-.798.896 0 1.484.448 1.484 1.134v.91c-.448-.532-1.246-.826-2.142-.826-1.078 0-2.352.602-2.352 2.184 0 1.512 1.274 2.24 2.352 2.24.882 0 1.68-.322 2.142-.868v.7h1.778zm-3.206-1.036c-.7 0-1.274-.364-1.274-.994 0-.658.574-1.022 1.274-1.022.574 0 1.134.196 1.428.588v.84c-.294.392-.854.588-1.428.588zM33.338 29v-4.774c0-1.316-.714-2.156-2.198-2.156-1.106 0-1.932.532-2.366 1.05v-.882h-1.778V29h1.778v-4.55c.294-.406.84-.798 1.54-.798.756 0 1.246.322 1.246 1.26V29h1.778z",fill:this.props.color})))}});e.exports=i},function(e,t,n){"use strict";var r=n(17),i=n(488),o=function(){return r.createElement("svg",{width:"48",height:"48",viewBox:"0 0 48 48"},r.createElement(i,null))};e.exports=o},function(e,t,n){"use strict";var r=n(17),i=n(488),o=function(){return r.createElement("svg",{width:"48",height:"48",viewBox:"0 0 48 48"},r.createElement(i,{transform:"rotate(90 24 24)"}))};e.exports=o},function(e,t,n){"use strict";var r=n(17),i=n(488),o=function(){return r.createElement("svg",{width:"48",height:"48",viewBox:"0 0 48 48"},r.createElement(i,{transform:"rotate(270 24 24)"}))};e.exports=o},function(e,t,n){"use strict";var r=n(17),i=r.createClass({displayName:"LeftParen",propTypes:{color:r.PropTypes.string.isRequired},render:function(){return r.createElement("svg",{width:"48",height:"48",viewBox:"0 0 48 48"},r.createElement("g",{fill:"none",fillRule:"evenodd"},r.createElement("path",{fill:"none",d:"M0 0h48v48H0z"}),r.createElement("path",{fill:"none",d:"M12 12h24v24H12z"}),r.createElement("path",{d:"M26 14c-4 6-4 14 0 20",stroke:this.props.color,strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})))}});e.exports=i},function(e,t,n){"use strict";var r=n(17),i=r.createClass({displayName:"RightParen",propTypes:{color:r.PropTypes.string.isRequired},render:function(){return r.createElement("svg",{width:"48",height:"48",viewBox:"0 0 48 48"},r.createElement("g",{fill:"none",fillRule:"evenodd"},r.createElement("path",{fill:"none",d:"M0 0h48v48H0z"}),r.createElement("path",{fill:"none",d:"M12 12h24v24H12z"}),r.createElement("path",{d:"M23 14c4 6 4 14 0 20",stroke:this.props.color,strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})))}});e.exports=i},function(e,t,n){"use strict";var r=n(17),i=r.createClass({displayName:"Gt",propTypes:{color:r.PropTypes.string.isRequired},render:function(){return r.createElement("svg",{width:"48",height:"48",viewBox:"0 0 48 48"},r.createElement("g",{fill:"none",fillRule:"evenodd"},r.createElement("path",{fill:"none",d:"M0 0h48v48H0z"}),r.createElement("path",{fill:"none",d:"M12 12h24v24H12z"}),r.createElement("path",{stroke:this.props.color,strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",d:"M16 30l16-6-16-6"})))}});e.exports=i},function(e,t,n){"use strict";var r=n(17),i=r.createClass({displayName:"Divide",propTypes:{color:r.PropTypes.string.isRequired},render:function(){return r.createElement("svg",{width:"48",height:"48",viewBox:"0 0 48 48"},r.createElement("g",{fill:"none",fillRule:"evenodd"},r.createElement("path",{fill:"none",d:"M0 0h48v48H0z"}),r.createElement("path",{d:"M19 24h10",stroke:this.props.color,strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"}),r.createElement("circle",{fill:this.props.color,cx:"24",cy:"19.5",r:"1.5"}),r.createElement("circle",{fill:this.props.color,cx:"24",cy:"28.5",r:"1.5"})))}});e.exports=i},function(e,t,n){"use strict";var r=n(17),i=r.createClass({displayName:"Period",propTypes:{color:r.PropTypes.string.isRequired},render:function(){return r.createElement("svg",{width:"48",height:"48",viewBox:"0 0 48 48"},r.createElement("g",{fill:"none",fillRule:"evenodd"},r.createElement("path",{fill:"none",d:"M0 0h48v48H0z"}),r.createElement("circle",{fill:this.props.color,cx:"24",cy:"30",r:"2"})))}});e.exports=i},function(e,t,n){"use strict";var r=n(17),i=r.createClass({displayName:"Percent",propTypes:{color:r.PropTypes.string.isRequired},render:function(){return r.createElement("svg",{width:"48",height:"48",viewBox:"0 0 48 48"},r.createElement("g",{fill:"none",fillRule:"evenodd"},r.createElement("path",{fill:"none",d:"M0 0h48v48H0z"}),r.createElement("g",{transform:"translate(12 12)"},r.createElement("path",{fill:"none",d:"M0 0h24v24H0z"}),r.createElement("path",{d:"M16 4L8 20",stroke:this.props.color,strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"}),r.createElement("circle",{stroke:this.props.color,strokeWidth:"2",cx:"7",cy:"7",r:"3"}),r.createElement("circle",{stroke:this.props.color,strokeWidth:"2",cx:"17",cy:"17",r:"3"}))))}});e.exports=i},function(e,t,n){"use strict";var r=n(17),i=r.createClass({displayName:"Times",propTypes:{color:r.PropTypes.string.isRequired},render:function(){return r.createElement("svg",{width:"48",height:"48",viewBox:"0 0 48 48"},r.createElement("g",{fill:"none",fillRule:"evenodd"},r.createElement("path",{fill:"none",d:"M0 0h48v48H0z"}),r.createElement("path",{fill:"none",d:"M12 12h24v24H12z"}),r.createElement("path",{d:"M20 20l8 8M28 20l-8 8",stroke:this.props.color,strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})))}});e.exports=i},function(e,t,n){"use strict";var r=n(17),i=r.createClass({displayName:"Exp3",propTypes:{color:r.PropTypes.string.isRequired},render:function(){return r.createElement("svg",{width:"48",height:"48",viewBox:"0 0 48 48"},r.createElement("g",{fill:"none",fillRule:"evenodd"},r.createElement("path",{fill:"none",d:"M0 0h48v48H0z"}),r.createElement("path",{d:"M14 21c0-.552.456-1 1.002-1h9.996A1 1 0 0 1 26 21v14c0 .552-.456 1-1.002 1h-9.996A1 1 0 0 1 14 35V21zm2 1h8v12h-8V22zM30.92 23.12c1.66 0 2.76-.81 2.76-1.98 0-.96-.86-1.51-1.57-1.58.79-.13 1.46-.72 1.46-1.5 0-1.1-.95-1.83-2.65-1.83-1.23 0-2.11.45-2.67 1.08l.83 1.08c.47-.42 1.05-.64 1.66-.64.64 0 1.12.19 1.12.61 0 .35-.39.52-1.08.52-.25 0-.77 0-.9-.01v1.53c.1-.01.61-.01.9-.01.91 0 1.19.18 1.19.56 0 .37-.38.65-1.12.65-.58 0-1.34-.23-1.82-.7l-.87 1.17c.52.6 1.48 1.05 2.76 1.05z",fill:this.props.color})))}});e.exports=i},function(e,t,n){"use strict";var r=n(17),i=r.createClass({displayName:"Exp2",propTypes:{color:r.PropTypes.string.isRequired},render:function(){return r.createElement("svg",{width:"48",height:"48",viewBox:"0 0 48 48"},r.createElement("g",{fill:"none",fillRule:"evenodd"},r.createElement("path",{fill:"none",d:"M0 0h48v48H0z"}),r.createElement("path",{d:"M14 21c0-.552.456-1 1.002-1h9.996A1 1 0 0 1 26 21v14c0 .552-.456 1-1.002 1h-9.996A1 1 0 0 1 14 35V21zm2 1h8v12h-8V22zM33.67 23v-1.5h-2.44c1.66-1.16 2.39-2.03 2.39-3.05 0-1.34-1.13-2.22-2.7-2.22-.93 0-1.99.33-2.7 1.11l.95 1.14c.48-.45 1.04-.73 1.78-.73.49 0 .92.24.92.7 0 .66-.54 1.12-3.43 3.21V23h5.23z",fill:this.props.color})))}});e.exports=i},function(e,t,n){"use strict";var r=n(17),i=n(488),o=function(){return r.createElement("svg",{width:"48",height:"48",viewBox:"0 0 48 48"},r.createElement(i,{transform:"rotate(180 24 24)"}))};e.exports=o},function(e,t,n){"use strict";var r=n(17),i=r.createClass({displayName:"Cdot",propTypes:{color:r.PropTypes.string.isRequired},render:function(){return r.createElement("svg",{width:"48",height:"48",viewBox:"0 0 48 48"},r.createElement("g",{fill:"none",fillRule:"evenodd"},r.createElement("path",{fill:"none",d:"M0 0h48v48H0z"}),r.createElement("g",{transform:"translate(12 12)"},r.createElement("path",{fill:"none",d:"M0 0h24v24H0z"}),r.createElement("circle",{fill:this.props.color,cx:"12",cy:"12",r:"3"}))))}});e.exports=i},function(e,t,n){"use strict";var r=n(17),i=r.createClass({displayName:"LogN",propTypes:{color:r.PropTypes.string.isRequired},render:function(){return r.createElement("svg",{width:"48",height:"48",viewBox:"0 0 48 48"},r.createElement("g",{fill:"none",fillRule:"evenodd"},r.createElement("path",{fill:"none",d:"M0 0h48v48H0z"}),r.createElement("path",{d:"M30 28.997c0-.55.453-.997.997-.997h6.006c.55 0 .997.453.997.997v6.006c0 .55-.453.997-.997.997h-6.006c-.55 0-.997-.453-.997-.997v-6.006zM32 30h4v4h-4v-4zM12.776 29v-9.338h-1.778V29h1.778zm4.9.168c2.24 0 3.584-1.624 3.584-3.556 0-1.918-1.344-3.542-3.584-3.542-2.226 0-3.57 1.624-3.57 3.542 0 1.932 1.344 3.556 3.57 3.556zm0-1.582c-1.106 0-1.722-.91-1.722-1.974 0-1.05.616-1.96 1.722-1.96 1.106 0 1.736.91 1.736 1.96 0 1.064-.63 1.974-1.736 1.974zm7.672 4.158c1.666 0 3.654-.63 3.654-3.206v-6.3H27.21v.868c-.546-.686-1.274-1.036-2.086-1.036-1.708 0-2.982 1.232-2.982 3.444 0 2.254 1.288 3.444 2.982 3.444.826 0 1.554-.392 2.086-1.064v.686c0 1.33-1.008 1.708-1.862 1.708-.854 0-1.568-.238-2.114-.84l-.798 1.288c.854.742 1.75 1.008 2.912 1.008zm.336-4.368c-1.008 0-1.708-.7-1.708-1.862 0-1.162.7-1.862 1.708-1.862.588 0 1.232.322 1.526.77v2.184c-.294.434-.938.77-1.526.77z",fill:this.props.color})))}});e.exports=i},function(e,t,n){"use strict";var r=n(17),i=r.createClass({displayName:"Leq",propTypes:{color:r.PropTypes.string.isRequired},render:function(){return r.createElement("svg",{width:"48",height:"48",viewBox:"0 0 48 48"},r.createElement("g",{fill:"none",fillRule:"evenodd"},r.createElement("path",{fill:"none",d:"M0 0h48v48H0z"}),r.createElement("path",{fill:"none",d:"M12 12h24v24H12z"}),r.createElement("path",{d:"M16 33h16M32 30l-16-6 16-6",stroke:this.props.color,strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})))}});e.exports=i},function(e,t,n){"use strict";var r=n(17),i=r.createClass({displayName:"Minus",propTypes:{color:r.PropTypes.string.isRequired},render:function(){return r.createElement("svg",{width:"48",height:"48",viewBox:"0 0 48 48"},r.createElement("g",{fill:"none",fillRule:"evenodd"},r.createElement("path",{fill:"none",d:"M0 0h48v48H0z"}),r.createElement("path",{d:"M19 24h10",stroke:this.props.color,strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})))}});e.exports=i},function(e,t,n){"use strict";var r=n(17),i=r.createClass({displayName:"Radical",propTypes:{color:r.PropTypes.string.isRequired},render:function(){return r.createElement("svg",{width:"48",height:"48",viewBox:"0 0 48 48"},r.createElement("g",{fill:"none",fillRule:"evenodd"},r.createElement("path",{fill:"none",d:"M0 0h48v48H0z"}),r.createElement("path",{d:"M13 16.997c0-.55.453-.997.997-.997h6.006c.55 0 .997.453.997.997v6.006c0 .55-.453.997-.997.997h-6.006c-.55 0-.997-.453-.997-.997v-6.006zM15 18h4v4h-4v-4z",fill:this.props.color}),r.createElement("path",{stroke:this.props.color,strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",d:"M14 29l4 6 9-14h7"})))}});e.exports=i},function(e,t,n){"use strict";var r=n(17),i=r.createClass({displayName:"FracInclusive",propTypes:{color:r.PropTypes.string.isRequired},render:function(){return r.createElement("svg",{width:"48",height:"48",viewBox:"0 0 48 48"},r.createElement("g",{fill:"none",fillRule:"evenodd"},r.createElement("path",{fill:"none",d:"M0 0h48v48H0z"}),r.createElement("g",{transform:"translate(12 12)"},r.createElement("path",{fill:"none",d:"M0 0h24v24H0z"}),r.createElement("path",{d:"M8 16.997c0-.55.453-.997.997-.997h6.006c.55 0 .997.453.997.997v6.006c0 .55-.453.997-.997.997H8.997c-.55 0-.997-.453-.997-.997v-6.006zM10 18h4v4h-4v-4z",fill:this.props.color}),r.createElement("rect",{fill:this.props.color,x:"2",y:"11",width:"20",height:"2",rx:"1"}),r.createElement("path",{d:"M8 .997C8 .447 8.453 0 8.997 0h6.006c.55 0 .997.453.997.997v6.006c0 .55-.453.997-.997.997H8.997C8.447 8 8 7.547 8 7.003V.997zM10 2h4v4h-4V2z",fill:this.props.color}))))}});e.exports=i},function(e,t,n){"use strict";var r=n(17),i=r.createClass({displayName:"FracExclusive",propTypes:{color:r.PropTypes.string.isRequired},render:function(){return r.createElement("svg",{width:"48",height:"48",viewBox:"0 0 48 48"},r.createElement("g",{fill:"none",fillRule:"evenodd"},r.createElement("path",{fill:"none",d:"M0 0h48v48H0z"}),r.createElement("g",{transform:"translate(12 12)"},r.createElement("path",{fill:"none",d:"M0 0h24v24H0z"}),r.createElement("path",{d:"M13 16.997c0-.55.453-.997.997-.997h6.006c.55 0 .997.453.997.997v6.006c0 .55-.453.997-.997.997h-6.006c-.55 0-.997-.453-.997-.997v-6.006zM15 18h4v4h-4v-4z",fill:this.props.color}),r.createElement("rect",{fill:this.props.color,x:"10",y:"11",width:"14",height:"2",rx:"1"}),r.createElement("path",{d:"M13 .997c0-.55.453-.997.997-.997h6.006c.55 0 .997.453.997.997v6.006c0 .55-.453.997-.997.997h-6.006c-.55 0-.997-.453-.997-.997V.997zM15 2h4v4h-4V2zM0 8.997C0 8.447.453 8 .997 8h6.006c.55 0 .997.453.997.997v6.006c0 .55-.453.997-.997.997H.997C.447 16 0 15.547 0 15.003V8.997zM2 10h4v4H2v-4z",fill:this.props.color}))))}});e.exports=i},function(e,t,n){"use strict";var r=n(17),i=function(){return r.createElement("svg",{width:"48",height:"48",viewBox:"0 0 48 48"},r.createElement("g",{fill:"none",fillRule:"evenodd"},r.createElement("path",{fill:"none",d:"M0 0h48v48H0z"}),r.createElement("path",{fill:"none",d:"M12 12h24v24H12z"}),r.createElement("path",{d:"M24 18c3 3 3 9 0 12M18 18c-3 3-3 9 0 12",stroke:"#888D93",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"}),r.createElement("path",{stroke:"#78C008",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",d:"M32 27l3-3-3-3M22 24h12"})))};e.exports=i},function(e,t,n){"use strict";var r=n(17),i=function(){return r.createElement("svg",{width:"48",height:"48",viewBox:"0 0 48 48"},r.createElement("g",{fill:"none",fillRule:"evenodd"},r.createElement("path",{fill:"none",d:"M0 0h48v48H0z"}),r.createElement("path",{fill:"none",d:"M12 12h24v24H12z"}),r.createElement("path",{d:"M35 19v16M23 19l8 8M31 23v4h-4",stroke:"#78C008",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"}),r.createElement("path",{d:"M12 12.997c0-.55.453-.997.997-.997h6.006c.55 0 .997.453.997.997v6.006c0 .55-.453.997-.997.997h-6.006c-.55 0-.997-.453-.997-.997v-6.006zM14 14h4v4h-4v-4z",fill:"#888D93"})))};e.exports=i},function(e,t,n){"use strict";var r=n(17),i=function(){return r.createElement("svg",{width:"48",height:"48",viewBox:"0 0 48 48"},r.createElement("g",{fill:"none",fillRule:"evenodd"},r.createElement("path",{fill:"none",d:"M0 0h48v48H0z"}),r.createElement("path",{fill:"none",d:"M12 12h24v24H12z"}),r.createElement("path",{d:"M12 28.997c0-.55.453-.997.997-.997h6.006c.55 0 .997.453.997.997v6.006c0 .55-.453.997-.997.997h-6.006c-.55 0-.997-.453-.997-.997v-6.006zM14 30h4v4h-4v-4z",fill:"#888D93"}),r.createElement("path",{d:"M35 13v16M23 29l8-8M27 21h4v4",stroke:"#78C008",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})))};e.exports=i},function(e,t,n){"use strict";var r=n(17),i=function(){return r.createElement("svg",{width:"48",height:"48",viewBox:"0 0 48 48"},r.createElement("g",{fill:"none",fillRule:"evenodd"},r.createElement("path",{fill:"none",d:"M0 0h48v48H0z"}),r.createElement("path",{fill:"none",d:"M12 12h24v24H12z"}),r.createElement("path",{d:"M13 16v16M17 22l6-6M23 20v-4h-4",stroke:"#78C008",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"}),r.createElement("path",{d:"M26 27.997c0-.55.453-.997.997-.997h6.006c.55 0 .997.453.997.997v6.006c0 .55-.453.997-.997.997h-6.006c-.55 0-.997-.453-.997-.997v-6.006zM28 29h4v4h-4v-4z",fill:"#888D93"}),r.createElement("path",{d:"M35 24H25",stroke:"#888D93",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"}),r.createElement("path",{d:"M26 13.997c0-.55.453-.997.997-.997h6.006c.55 0 .997.453.997.997v6.006c0 .55-.453.997-.997.997h-6.006c-.55 0-.997-.453-.997-.997v-6.006zM28 15h4v4h-4v-4z",fill:"#78C008"})))};e.exports=i},function(e,t,n){"use strict";var r=n(17),i=function(){return r.createElement("svg",{width:"48",height:"48",viewBox:"0 0 48 48"},r.createElement("g",{fill:"none",fillRule:"evenodd"},r.createElement("path",{fill:"none",d:"M0 0h48v48H0z"}),r.createElement("path",{fill:"none",d:"M12 12h24v24H12z"}),r.createElement("path",{stroke:"#78C008",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",d:"M33 29l-3 3-3-3M30 18v14"}),r.createElement("path",{d:"M16 27.997c0-.55.453-.997.997-.997h6.006c.55 0 .997.453.997.997v6.006c0 .55-.453.997-.997.997h-6.006c-.55 0-.997-.453-.997-.997v-6.006zM18 29h4v4h-4v-4z",fill:"#78C008"}),r.createElement("path",{d:"M25 24H15",stroke:"#888D93",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"}),r.createElement("path",{d:"M16 13.997c0-.55.453-.997.997-.997h6.006c.55 0 .997.453.997.997v6.006c0 .55-.453.997-.997.997h-6.006c-.55 0-.997-.453-.997-.997v-6.006zM18 15h4v4h-4v-4z",fill:"#888D93"})))};e.exports=i},function(e,t,n){"use strict";var r=n(17),i=function(){return r.createElement("svg",{width:"48",height:"48",viewBox:"0 0 48 48"},r.createElement("g",{fill:"none",fillRule:"evenodd"},r.createElement("path",{d:"M0 0h48v48H0z"}),r.createElement("path",{d:"M12 12h24v24H12z"}),r.createElement("path",{d:"M35 16v16m-4-4v-4h-4m-2 6l6-6",stroke:"#78C008",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"}),r.createElement("path",{d:"M14 27.997c0-.55.453-.997.997-.997h6.006c.55 0 .997.453.997.997v6.006c0 .55-.453.997-.997.997h-6.006c-.55 0-.997-.453-.997-.997v-6.006zM16 29h4v4h-4v-4z",fill:"#888D93"}),r.createElement("path",{d:"M23 24H13",stroke:"#888D93",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"}),r.createElement("path",{d:"M14 13.997c0-.55.453-.997.997-.997h6.006c.55 0 .997.453.997.997v6.006c0 .55-.453.997-.997.997h-6.006c-.55 0-.997-.453-.997-.997v-6.006zM16 15h4v4h-4v-4z",fill:"#888D93"})))};e.exports=i},function(e,t,n){"use strict";var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},i=n(17),o=function(e){return i.createElement("g",r({fill:"none",fillRule:"evenodd"},e),i.createElement("path",{fill:"none",d:"M0 0h48v48H0z"}),i.createElement("path",{fill:"none",d:"M12 12h24v24H12z"}),i.createElement("path",{stroke:"#888D93",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",d:"M22 18l-6 6 6 6M16 24h16"}))};e.exports=o}])});